This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.
The content has been processed where empty lines have been removed, content has been compressed (code blocks are separated by ⋮---- delimiter), security check has been disabled.

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: **/*.md
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Empty lines have been removed from all files
- Content has been compressed - code blocks are separated by ⋮---- delimiter
- Security check has been disabled - content may contain sensitive information
- Files are sorted by Git change count (files with more changes are at the bottom)

# Directory Structure
```
pulp-docs/
  pulp_ansible/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        reference/
          settings.md
      dev/
        reference/
          testing.md
      user/
        guides/
          collections.md
          copy.md
          roles.md
          signature.md
        index.md
    CHANGES.md
    releasing.md
  pulp_container/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        guides/
          build-image.md
          change-allowed-artifacts.md
          customize-access-policy.md
          customize-roles.md
          import-export.md
          migrate-permissions.md
          pull-through-caching.md
          sign-image.md
        learn/
          authentication.md
          domain.md
          rbac.md
          tech-preview.md
      user/
        guides/
          manage-cosign-signature.md
          manage-credentials.md
          manage-flatpak.md
          manage-helm-chart.md
          manage-image.md
          push-image.md
          registry-catalog.md
        tutorials/
          sync-and-host.md
      index.md
    CHANGES.md
    CONTRIBUTING.md
    releasing.md
  pulp_deb/
    CHANGES/
      .TEMPLATE.md
    docs/
      dev/
        guides/
          bindings.md
          plugin_maintenance.md
      user/
        guides/
          _SUMMARY.md
          advanced_copy.md
          api_tooling.md
          checksums.md
          publish.md
          signing_service.md
          sync.md
          upload.md
        index.md
    CHANGES.md
    CONTRIBUTING.md
    README.md
    releasing.md
    TESTING.md
  pulp_gem/
    CHANGES/
      .TEMPLATE.md
    docs/
      user/
        guides/
          _SUMMARY.md
          cache.md
          publish.md
          sync.md
          upload.md
        tutorials/
          _SUMMARY.md
          custom-certificates.md
          quickstart.md
    CHANGES.md
    CONTRIBUTING.md
    README.md
    releasing.md
  pulp_maven/
    CHANGES/
      .TEMPLATE.md
    docs/
      user/
        guides/
          create-cache.md
          deploy.md
        tutorials/
          quickstart.md
    CHANGES.md
    releasing.md
  pulp_npm/
    CHANGES/
      .TEMPLATE.md
    docs/
      user/
        guides/
          _SUMMARY.md
          publish-host.md
          pull-through_cache.md
          sync.md
      index.md
    CHANGES.md
    CONTRIBUTING.md
    README.md
    releasing.md
  pulp_ostree/
    CHANGES/
      .TEMPLATE.md
    docs/
      user/
        guides/
          _SUMMARY.md
          import-commit.md
          modify-content.md
        tutorials/
          sync-and-host.md
        index.md
    CHANGES.md
    README.md
    releasing.md
  pulp_python/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        guides/
          rbac.md
        reference/
          settings.md
      user/
        guides/
          _SUMMARY.md
          publish.md
          pypi.md
          sync.md
          upload.md
        learn/
          tech-preview.md
      index.md
    CHANGES.md
    CONTRIBUTING.md
    README.md
    releasing.md
  pulp_rpm/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        guides/
          add-signing-services.md
          rbac.md
        reference/
          settings.md
        index.md
      dev/
        guides/
          bindings.md
        index.md
      user/
        guides/
          _SUMMARY.md
          alternate-content-source.md
          metadata_signing.md
          modify.md
          prune.md
          sign-packages.md
          upload.md
          use_pulp_repo.md
        learn/
          concepts.md
        tutorials/
          create_sync_publish.md
        index.md
    CHANGES.md
    coverage.md
    releasing.md
  pulp-cli/
    CHANGES/
      .TEMPLATE.md
    cookiecutter/
      bootstrap/
        {{ cookiecutter.__project_name }}/
          CHANGES.md
      ci/
        {{ cookiecutter.__project_name }}/
          CHANGES/
            .TEMPLATE.md
    docs/
      dev/
        guides/
          contributing.md
        learn/
          architecture.md
        reference/
          generic.md
      user/
        guides/
          _SUMMARY.md
          advanced_features.md
          configuration.md
          installation.md
        reference/
          _SUMMARY.md
          authentication.md
          using_the_cli.md
      index.md
    CHANGES.md
    README.md
    releasing.md
  pulp-docs/
    docs/
      dev/
        guides/
          create-plugin-overviews.md
        reference/
          architecture.md
          markdown-cheatsheet.md
        tutorials/
          getting-started.md
        index.md
      sections/
        admin/
          index.md
        blog/
          posts/
            2020/
              2019-12-12-pulp-3-is-GA.md
              2020-01-20-pulp-3-GA-demos.md
              2020-03-05-pulp-3-scale-testing.md
              2020-03-15-pulp-fedora31-single-container.md
              2020-07-09-pulp-3.5-installer-roles.md
              2020-07-16-pulp-squeezer-0.0.1-available.md
              2020-07-30-july-newsletter.md
              2020-07-31-concurrency-testing.md
              2020-08-06-pulp-python-3.0.0b10-is-generally-available.md
              2020-08-13-pulp-3.6-is-generally-available.md
              2020-08-18-pulp-container-2.0-is-generally-available.md
              2020-08-19-pulp-ansible-0.2.0-is-generally-available.md
              2020-08-26-pulp-2-to-3-migration-0.3.0-is-available.md
              2020-08-28-august-community-update.md
              2020-08-5-pulpcon-date-announcement.md
              2020-09-04-pulp-winter-plan.md
              2020-09-14-debian-2.6.1-ga.md
              2020-09-20-pulp-3.7.0-is-generally-available.md
              2020-09-28-pulp-3-cli-poc-call-for-feedback.md
              2020-09-30-pulp-community-update-september-2020.md
              2020-10-05-announcing-pulp-community-manager.md
              2020-10-20-3.8.0-release-announcement.md
              2020-11-03-pulp-community-update-october-2020.md
              2020-11-25-pulp-community-survey-results-2020.md
              2020-11-27-pulp-community-update-november-2020.md
            2021/
              2021-01-13-pulp-python-3.0-release.md
              2021-02-04-pulpcore-3.10-is-now-generally-available.md
              2021-02-08-pulp-squeezer-0.0.7.md
              2021-02-1-pulp-community-update.md
              2021-02-25-pulp-community-update.md
              2021-03-15-pulpcore-3.11-is-now-generally-available.md
              2021-03-22-pup-installer-overview.md
              2021-04-01-pulp-community-update-march2021.md
              2021-04-08-pulp-3.12-is-generally-available.md
              2021-05-04-april-community-news.md
              2021-05-19-freenode-and-the-pulp-community.md
              2021-05-24-pulp-at-community-central.md
              2021-05-24-pulpcore-3.13-is-generally-available.md
              2021-06-08-pulp-leaving-freenode.md
              2021-06-14-pulp-community-update.md
              2021-06-21-a-new-tale.md
              2021-06-28-tasking-event-blog.md
              2021-07-01-pulpcore-3.14-release-announcement.md
              2021-07-07-pulp-community-update-june-2021.md
              2021-08-09-pulp-community-update-july-2021.md
              2021-08-26-pulpcore-3.15-is-generally-available.md
              2021-09-08-pulp-community-roadmap-update.md
              2021-10-06-pulp-3-16-is-now-generally-available.md
              2021-11-23-increasing-pulpcore-compatibility-with-plugin-versions.md
              2021-12-15-pulpcore-3.17-is-ga.md
            2022/
              2022-02-10-pulp-documentation-sig-findings-and-suggestions.md
              2022-03-28-how-stack-hpc-uses-pulp.md
              2022-09-19-pulp-2-eol.md
              2022-11-01-pulpcon-2022-schedule.md
            2023/
              2023-02-14-rpm-redirect-serving-perf-scale-testing.md
            2024/
              2024-11-06-pulp-ui-beta.md
            2025/
              checkpoint.md
              pulp_at_microsoft.md
              release_whenever.md
              writing_docs_with_ai.md
            pulp2/
              2011-05-17-introduction.md
              2011-05-18-pulp-protected-repositories.md
              2011-05-18-spotlight-content-delivery-server-basics.md
              2011-05-23-configuring-the-pulp-server-for-ssl.md
              2011-05-27-pulp-community-release-12.md
              2011-05-28-spotlight-repository-discovery.md
              2011-06-01-fedora-15-qe-builds-available.md
              2011-06-07-candlepin.md
              2011-06-16-katello.md
              2011-06-20-pulp-community-release-13.md
              2011-06-23-sprint-25.md
              2011-07-14-pulp-community-release-14.md
              2011-08-01-pulp-in-production.md
              2011-08-08-generic-content-support.md
              2011-08-15-pulp-community-release-15.md
              2011-09-06-pulp-rearchitecture-sprint-update.md
              2011-09-09-pulp-community-release-16.md
              2011-10-12-pulp-community-release-17.md
              2011-11-01-pulp-v1-0-plans.md
              2011-11-02-preview-creating-a-pulp-plugin.md
              2011-11-04-preview-pulp-v2-0-repository-apis.md
              2011-11-08-pulp-community-release-18.md
              2011-11-09-pulp-fedora-16-builds.md
              2011-11-21-importer-sync-apis.md
              2011-12-15-pulp-community-release-19.md
              2012-01-10-unit-associations.md
              2012-02-24-pulp-v1-0-release.md
              2012-04-03-pulp-beyond-1-0.md
              2012-04-11-pulp-v1-0-4-release.md
              2012-05-24-pulp-v1-1-10-release.md
              2012-06-13-pulp-v1-1-on-fedora-17.md
              2012-06-15-pulp-v2-preview-unit-copy.md
              2012-06-24-pulp-v2-preview-client-extensions.md
              2012-07-02-pulp-1-1-11-bug-fix-release.md
              2012-07-02-pulp-v2-preview-the-coordinator.md
              2012-07-09-pulp-on-openshift.md
              2012-07-17-pulp-v2-preview-general-enhancements.md
              2012-07-26-pulp-v2-community-release-1.md
              2012-08-07-pulp-in-github.md
              2012-08-10-community-contribution-pulp-console.md
              2012-08-29-mirroring-puppet-forge-with-pulp.md
              2012-09-25-customizing-puppet-module-repositories-in-pulp.md
              2012-10-09-pulp-v2-community-release-2.md
              2012-10-22-email-notifications.md
              2012-11-02-amqp-notifications.md
              2012-12-12-pulp-in-2013.md
              2013-01-03-pulp-v2-0-released.md
              2013-01-11-roadmap.md
              2013-01-24-pulp-2-0-7-released.md
              2013-02-22-developer-guide-released.md
              2013-03-22-pulp-presentation-on-youtube.md
              2013-04-05-pulp-2-1-0-released.md
              2013-05-08-pulp-2-1-1-released.md
              2013-06-28-pulp-goes-to-puppet-camp.md
              2013-08-16-new-repository-layout.md
              2013-11-20-pulp-2-2-1-released.md
              2014-02-19-making-pulp-scalable-and-highly-available.md
              2014-08-31-deploying-pulp-in-containers.md
              2014-11-19-upcoming-pulp-releases.md
              2014-11-25-pulp-2-5-0-is-released.md
              2014-11-25-pulp-2-6-0-0-1-alpha-is-available.md
              2014-12-23-pulp-presentation-at-tripython-on-january-22-2015.md
              2015-01-02-pulp-in-the-new-year.md
              2015-03-24-pulp-2-6-0-is-available.md
              2015-05-21-use-docker-to-try-pulp.md
              2015-12-09-syncing-and-publishing-suse-repositories-with-pulp.md
              2016-01-06-screencasting-with-open-tools.md
              2016-03-07-how-to-safely-test-your-data-for-2-8-upgradability.md
              2016-04-05-pulp-2-8-1-has-been-released.md
              2016-04-06-pulp-2-8-2-has-been-released.md
              2016-05-05-langpacks-support-added-to-pulp-2-9-0.md
              2016-05-17-pulp-2-8-3-released-security-bug-fixes.md
              2016-06-06-charting-pulps-issues-stories-etc.md
              2016-06-21-new-documentation-site.md
              2016-07-01-pulp-smash-introduction.md
              2016-07-05-getting-started-on-pulp-and-pulp-smash-a-pulpqe-intern-summary.md
              2016-07-07-sprint-demo-4-july-7-2016.md
              2016-07-12-pulp-2-9-0-generally-available.md
              2016-07-18-pulp-2-8-6-generally-available.md
              2016-07-28-community-testing-day-on-20160805.md
              2016-07-28-sprint-demo-5-july-28-2016.md
              2016-08-15-pulp-2-9-2-generally-available.md
              2016-08-18-sprint-demo-6-august-18-2016.md
              2016-09-08-sprint-demo-7-sept-08-2016.md
              2016-09-15-pulp-2-10-0-generally-available.md
              2016-09-19-pulp-2-9-3-generally-available.md
              2016-10-27-sprint-demo-9.md
              2016-10-31-pulp-2-10-1-generally-available.md
              2016-10-31-pulp-3.0-mvp.md
              2016-11-14-yum-repo-layout-changes.md
              2016-11-17-django14-epel6-retirement.md
              2016-11-17-pulp-2.10.2-generally-available.md
              2016-11-18-sprint-10-demo.md
              2016-12-01-pulp-2.10.3-generally-available.md
              2016-12-05-contributing-blog-post-to-pulpproject.org.md
              2016-12-07-deprecating-nodes.md
              2016-12-08-sprint-11-demo.md
              2016-12-14-pulp-2.11.0-generally-available.md
              2017-01-10-running-pulp-with-nginx-and-uwsgi.md
              2017-01-16-plan-io-is-awesome.md
              2017-01-16-pulp-2.11.1-generally-available.md
              2017-01-19-sprint-12-13-demo.md
              2017-01-26-devconf-and-fosdem-conferences.md
              2017-01-26-new-pulp-logo.md
              2017-01-30-pulp-2.11.2-generally-available.md
              2017-02-01-pulp-2.12.0-generally-available.md
              2017-02-09-sprint-14-demo.md
              2017-02-17-why-does-copy-use-lots-of-memory.md
              2017-02-23-pulp-2.12.1-generally-available.md
              2017-03-01-pulp-at-scale-2017.md
              2017-03-04-sprint-15-demo.md
              2017-03-23-sprint-16-demo.md
              2017-04-12-encouraging-new-contributors.md
              2017-04-12-how-to-make-pulp-vagrant-env-with-very-large-disk.md
              2017-04-12-pulp-2.12.2-generally-available.md
              2017-04-13-sprint-17-demo.md
              2017-04-19-maintaining-community-clear-goals.md
              2017-05-04-sprint-18-demo.md
              2017-05-24-pulp-2.13.1-generally-available.md
              2017-05-25-sprint-19-demo.md
              2017-06-15-sprint-20-demo.md
              2017-06-20-pulp-2.13.2-generally-available.md
              2017-06-22-pulp-qe-intern-update.md
              2017-07-06-sprint-21-demo.md
              2017-07-10-jenkins-job-builder.md
              2017-07-20-pulp-2.13.3-generally-available.md
              2017-07-27-sprint-22-demo.md
              2017-08-02-2.14-Test-Day.md
              2017-08-08-community-survey-results.md
              2017-08-09-pulp-2.14.0-generally-available.md
              2017-08-17-sprint-23-demo.md
              2017-09-07-sprint-24-demo.md
              2017-09-26-plugin-api-alpha.md
              2017-09-29-sprint-25-demo.md
              2017-10-05-pulp-2.14.1-generally-available.md
              2017-10-26-pulp-2.14.2-generally-available.md
              2017-11-09-community-demo.md
              2017-11-21-pulp-2.14.3-generally-available.md
              2017-12-06-community-demo.md
              2018-01-15-upcoming-conferences.md
              2018-01-18-community-demo.md
              2018-02-14-community-demo.md
              2018-02-27-pulp-2.15.2-generally-available.md
              2018-03-01-deprecating-consumers.md
              2018-03-13-pulp-3.0-core-beta.md
              2018-03-15-community-demo.md
              2018-03-20-pulp-2.15.3-generally-available.md
              2018-03-26-reclaiming-disk-space-from-mongodb.md
              2018-04-03-pulp-2.16.0-generally-available.md
              2018-04-04-community-demo.md
              2018-04-25-beta-release.md
              2018-04-25-community-demo.md
              2018-04-27-pulp_ansible-beta-release.md
              2018-05-02-pulp-2.16.1-generally-available.md
              2018-05-08-pulp3-moving-to-rq.md
              2018-05-09-pulp_python-beta-release.md
              2018-06-08-pulp_qe_intern_update.md
              2018-06-20-community-demo.md
              2018-06-28-pulp_qe_intern_update.md
              2018-07-06-podcast__init__.md
              2018-07-16-ina-panova-community-co-lead.md
              2018-08-01-community-demo.md
              2018-08-02-pulp-2.16.4-generally-available.md
              2018-08-31-pulp-2.17.0-generally-available.md
              2018-09-04-generate-pulp-3-python-client-using-swagger-codegen.md
              2018-09-07-install-pulp3-on-openshift.md
              2018-09-14-pulp3-cli-plan.md
              2018-09-17-pulp-community-health-audit.md
              2018-09-19-community-demo.md
              2018-09-25-pulp-3-adopts-dynaconf.md
              2018-10-01-pulp-at-ansiblefest.md
              2018-10-10-pulp-community-meetup.md
              2018-10-12-pulp-2.17.1-generally-available.md
              2018-11-07-community-demo.md
              2018-11-21-pulp_rpm-beta-release.md
              2018-12-04-pulp-2.18.0-generally-available.md
              2018-12-06-community-demo.md
              2019-01-30-pulp-3-rc-information.md
              2019-02-06-community-demo.md
              2019-02-22-pulp-2.18.1-generally-available.md
              2019-02-25-pulp-3.0-rc-plan.md
              2019-03-20-community-demo.md
              2019-03-28-pulp-3-rc-release.md
              2019-04-02-pulp-2.19.0-generally-available.md
              2019-04-17-community-demo.md
              2019-05-22-community-demo.md
              2019-05-28-community-survey.md
              2019-05-29-travis-ci-cd-config-generator-for-pulp3-plugins.md
              2019-05-30-pulp-2.19.1-generally-available.md
              2019-06-19-community-demo.md
              2019-07-09-redhat-and-ibm.md
              2019-07-10-pulp-2.20.0-generally-available.md
              2019-08-25-pulp-2.21.0-generally-available.md
              2019-09-30-pulp-3-GA-timeline.md
              2019-11-04-pulp-3-GA-update.md
              2019-11-14-docker-rename-to-container.md
              2019-11-25-pulp-3-GA-update.md
              2020-03-04-pulp-2.21.1-generally-available.md
              2020-05-19-pulp-2.21.2-generally-available.md
              2020-06-15-pulp-2-enters-maintenance-mode.md
              2020-07-13-pulp-2.21.3-generally-available.md
              2020-10-31-pulp-2.4.1-is-generally-available.md
          index.md
        dev/
          index.md
        help/
          community/
            get-involved.md
            pulpcon.md
          more/
            governance/
              code-of-conduct.md
              privacy.md
            docs-usage.md
            why-pulp.md
          code-of-conduct.md
          index.md
        reference/
          index.md
        user/
          index.md
      index.md
      rest_api.md
    tests/
      fixtures/
        pulp_maven/
          staging_docs/
            content-manager/
              guides/
                How to bind since here..md
                How to bind world none..md
                How to do already choose boy..md
                How to generate run realize something..md
              learn/
                About scalable Model deployment.md
                On resilient Repository setup.md
                Understanding complex Content configuration.md
              tutorials/
                Getting started as content-manager/
                  00 - Getting started as content-manager.md
                  01 - Configuring the artifact infrastructure.md
                  02 - Configuring the content contexts.md
            developer/
              guides/
                How to bind break..md
                How to do subject..md
              learn/
                On flexible Model configuration.md
                Understanding autonomous Artifact setup.md
                Understanding complex Repository ecossystem.md
                Understanding complex Repository setup.md
              tutorials/
                Getting started as developer/
                  00 - Getting started as developer.md
                  01 - Doing the repository dependencie.md
                  02 - Organizing the database relationships.md
                  03 - Organizing the repository internals.md
            reference/
              main.md
            sys-admin/
              guides/
                How to create win crime..md
                How to update treatment raise collection..md
                How to update war..md
              learn/
                On modular Model setup.md
              tutorials/
                Getting started as sys-admin/
                  00 - Getting started as sys-admin.md
                  01 - Handling the artifact signals.md
                  02 - Configuring the database signals.md
                  03 - Deploying the content dependencie.md
                  04 - Setting the database dependencie.md
          CHANGELOG.md
          README.md
        pulp-docs/
          staging_docs/
            index.md
        pulp-oci-images/
          staging_docs/
            content-manager/
              guides/
                How to generate buy..md
              learn/
                About autonomous Repository configuration.md
                In perspective: flexible Repository setup.md
                In perspective: modular Repository configuration.md
              tutorials/
                Getting started as content-manager/
                  00 - Getting started as content-manager.md
                  01 - Organizing the content dependencie.md
                  02 - Handling the database internals.md
            developer/
              guides/
                How to create federal entire..md
                How to create money let charge..md
                How to do couple first..md
                How to do eight near number..md
                How to generate vote student..md
              learn/
                About modular Content setup.md
                In perspective: scalable Database setup.md
                Understanding autonomous Database ecossystem.md
                Understanding resilient Content setup.md
              tutorials/
                Getting started as developer/
                  00 - Getting started as developer.md
                  01 - Organizing the repository dependencie.md
                  02 - Setting the content relationships.md
                  03 - Handling the content relationships.md
            reference/
              main.md
            sys-admin/
              guides/
                How to create story wrong newspaper..md
                How to delete side back create..md
                How to generate store loss pretty..md
              learn/
                In perspective: complex Database deployment.md
                On scalable Database configuration.md
                Understanding modular Content setup.md
              tutorials/
                Getting started as sys-admin/
                  00 - Getting started as sys-admin.md
                  01 - Organizing the content relationships.md
                  02 - Configuring the artifact dependencie.md
                  03 - Setting the artifact signals.md
          CHANGELOG.md
          README.md
        pulpcore/
          staging_docs/
            reference/
              main.md
            sections/
              development/
                guides/
                  How to bind analysis trade..md
                onboarding/
                  About autonomous Model deployment.md
                  On autonomous Database deployment.md
                  On scalable Database ecossystem.md
                  Understanding complex Model deployment.md
                quickstart/
                  01-doc-workflow.md
                  02-code-workflow.md
                index.md
              getting_started/
                fundamentals/
                  About autonomous Model deployment.md
                  On autonomous Database deployment.md
                  On scalable Database ecossystem.md
                  Understanding complex Model deployment.md
                quickstart/
                  01-overview.md
                  02-setup.md
                  03-installation.md
                  04-configuration.md
                  05-deployment.md
                  06-conclusion.md
                index.md
              guides/
                index.md
              learn/
                index.md
              reference/
                01-repository-map.md
                02-glossary.md
                index.md
            index.md
          CHANGELOG.md
          README.md
    README.md
  pulp-oci-images/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        guides/
          build-your-own-pulp-image.md
          configure-certificates.md
          configure-database-encryption.md
          configure-signing-service.md
          migrate-pulp-installer-to-multi-process.md
        reference/
          available-images/
            index.md
            multi-process-images.md
            single-process-images.md
        tutorials/
          quickstart.md
      dev/
        guides/
          release-image.md
      index.md
    images/
      compose/
        README.md
      README.md
    README.md
  pulp-openapi-generator/
    docs/
      user/
        guides/
          generate-bindings.md
          version-migrations.md
        learn/
          how-it-works.md
        reference/
          settings.md
      index.md
  pulp-operator/
    CHANGES/
      .TEMPLATE.md
    controllers/
      backup/
        README.md
      repo_manager/
        README.md
      restore/
        README.md
    docs/
      admin/
        guides/
          backup_and_restore/
            00-overview.md
            01-config_and_run.md
            02-cronjob.md
          configurations/
            networking/
              exposing.md
              reverse_proxy.md
              routes.md
            cache.md
            content_checksums.md
            custom_env_vars.md
            customCA.md
            database.md
            galaxy.md
            ldap.md
            logLevel.md
            metadata_signing.md
            pdb.md
            pod_resources.md
            podPlacement.md
            pulp_settings.md
            reset_admin_pwd.md
            sample_configs.md
            secrets.md
            storage.md
            telemetry.md
            unmanaged.md
          install/
            ha.md
            helm.md
            ocp.md
          troubleshoot/
            gatherData.md
            install.md
        learn/
          basic-concepts.md
        reference/
          custom_resources/
            backup.md
            repo_manager.md
            restore.md
          container.md
        tutorials/
          quickstart-kubernetes.md
          quickstart-openshift.md
        index.md
      dev/
        index.md
      user/
        guides/
          common_issues.md
        tutorials/
          quickstart.md
    release/
      README.md
    CHANGES.md
    README.md
  pulp-ui/
    docs/
      index.md
    CHANGES.md
    README.md
  pulpcore/
    CHANGES/
      .TEMPLATE.md
    docs/
      admin/
        guides/
          auth/
            basic.md
            external.md
            index.md
            json_header.md
            keycloak.md
          configure-pulp/
            configure-storages.md
            db-encryption.md
            index.md
          _SUMMARY.md
          import-export-repos.md
          integrate-kafka.md
          integrate-sentry-glitchtip.md
          remove-plugins.md
          sign-metadata.md
          troubleshooting.md
        learn/
          architecture.md
        reference/
          settings.md
          tech-preview.md
      dev/
        guides/
          git.md
          plugin-walkthrough.md
          pull-request-walkthrough.md
          test-pulp.md
        learn/
          architecture/
            app-layout.md
            rest-api.md
          domains/
            domain_enabled_api.md
            domains_compatibility.md
          other/
            content-protection.md
            documentation.md
            error-handling.md
            how-plugins-work.md
            how-to-doc-api.md
            metadata-signing.md
            object-relationships.md
            on-demand-support.md
            planning-guide.md
            releasing.md
            task-scheduling.md
          rbac/
            access_policy.md
            adding_automatic_permissions.md
            index.md
            permissions.md
            queryset_scoping.md
            users_groups.md
          subclassing/
            checkpoint.md
            import-export.md
            models.md
            pull-through.md
            replication.md
            serializers.md
            viewsets.md
          sync_pipeline/
            sync_pipeline.md
          tasks/
            add-remove.md
            diagnostics.md
            publish.md
          plugin-concepts.md
        reference/
          code-api/
            platform-api/
              app/
                apps.md
                auth.md
                index.md
                models.md
                response.md
                serializers.md
                settings.md
                urls.md
                viewsets.md
              constants.md
              exceptions.md
              index.md
              tasking.md
            plugins-api/
              content-app.md
              download.md
              exceptions.md
              index.md
              models.md
              serializers.md
              stages.md
              storage.md
              tasking.md
              util.md
              viewsets.md
            base-models.md
          code-style-guide.md
        tutorials/
          _SUMMARY.md
          quickstart-docs.md
          quickstart.md
      user/
        guides/
          alternate-content-sources.md
          checkpoint.md
          correlation-id.md
          create-client-bindings.md
          create-domains.md
          manage-labels.md
          protect-content.md
          reclaim-disk-space.md
          repair-pulp.md
          troubleshoot-tasks.md
          update-repo-retention.md
          upload-publish.md
          use-complex-filters.md
        learn/
          concepts.md
          from-pulp-2.md
          lifecycle-promotion.md
          on-demand-downloading.md
          pulp-versioning.md
        tutorials/
          index.md
      index.md
    CHANGES.md
    CODE_OF_CONDUCT.md
    CONTRIBUTING.md
    README.md
    releasing.md
  pulpcore-selinux/
    docs/
      admin/
        guides/
          extend-support.md
        index.md
      dev/
        guides/
          release.md
    README.md
    RELEASING.md
```

# Files

## File: pulp-docs/pulp_ansible/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_ansible/docs/admin/reference/settings.md
`````markdown
# Settings

`pulp_ansible` provides a few settings to control various features. These settings are settable
with dynaconf in various as a regular Pulp setting. See the [pulpcore Setting](https://docs.pulpproject.org/en/3.0/nightly/installation/configuration.html#configuration).

## ANSIBLE_API_HOSTNAME

> The origin, e.g. "<http://example.com>" that will instruct the client how to find the Pulp API
> service. This URL is formed in various Galaxy APIs (V1, V2, V3) responses.
>
> This defaults to http on your fqdn, which is usable with the Ansible installer's default Nginx
> configuration. So if `example.com` is your fqdn, this would default to "<http://example.com>".

## ANSIBLE_CONTENT_HOSTNAME

> The origin, e.g. "<http://example.com>" that will instruct the client how to find the Pulp content
> app. This URL is formed in various Galaxy APIs (V1, V2, V3) responses.
>
> This defaults to [CONTENT_ORIGIN](https://docs.pulpproject.org/pulpcore/settings.html?#content-origin).
> By default it includes the `pulp/content` subpath. So if `https://example.com` is your
> CONTENT_ORIGIN, this would default to "<https://example.com/pulp/content>".

## ANSIBLE_SIGNATURE_REQUIRE_VERIFICATION

> By default, `pulp_ansible` rejects uploaded signatures if they cannot be verified against a
> public key specified on the repository. Setting this to false will allow accepting signatures
> if no key was specified. A repository with a configured key will always reject invalid
> signatures.

## ANSIBLE_SIGNING_TASK_LIMITER

> This number determines the amount of concurrent signing processes that can be spawned at one time
> during a signature task. Increasing this number will generally increase the speed of the task, but
> will also consume more resources of the worker. Defaults to 10 concurrent processes.

## GALAXY_API_ROOT

> By default the Galaxy V1, V2, and V3 APIs are rooted at
> "/pulp_ansible/galaxy/\<path:path>/api/", but this is configurable. Specifying `GALAXY_API_ROOT`
> will re-root the Galaxy API to a different URL namespace.
>
> The `<path:path>` must be included, which corresponds to the `base_path` of an
> `Ansible Distribution`. Clients using the Galaxy API will only receive content served by that
> `Ansible Distribution`.

## ANSIBLE_DEFAULT_DISTRIBUTION_PATH

> Set the distribution base path to be used on the `GALAXY_API_ROOT/default/api/` endpoint.
> By default, this is set to `None`, which causes the API to return a 404 on the `default`
> endpoint.

## ANSIBLE_URL_NAMESPACE

> The Django URL namespace to be used when generating URLs that are returned by the galaxy
> APIs. Setting this allows for the Galaxy APIs to redirect requests to django URLs in other apps.
> This defaults to the pulp ansible URL router.

## ANSIBLE_COLLECT_DOWNLOAD_LOG

> A flag to activate collecting download logs about collections consumed. You can dump the
> collected information using `pulpcore-manager download-log`.

## ANSIBLE_AUTHENTICATION_CLASSES

> A list of authentication classes to be used to authenticate requests to the Galaxy API. Defaults
> to `REST_FRAMEWORK__DEFAULT_AUTHENTICATION_CLASSES`. See [authentication docs](https://www.django-rest-framework.org/api-guide/authentication/#api-reference) for more.

## ANSIBLE_PERMISSION_CLASSES

> A list of permission classes to be used to authorize requests to the Galaxy API. Defaults to
> `REST_FRAMEWORK__DEFAULT_PERMISSION_CLASSES`. See [authorization docs](https://www.django-rest-framework.org/api-guide/permissions/#api-reference) for more.
`````

## File: pulp-docs/pulp_ansible/docs/dev/reference/testing.md
`````markdown
# Testing

## Integration with the `ansible-galaxy`

These are all contained in the `pulp_ansible.tests.functional.cli` package. The following
workflows have tests:

- `ansible-galaxy collection install` - the installation of collection content is tested by
  `pulp_ansible.tests.functional.cli.test_collection_install`
- `ansible-galaxy collection publish` - this uploading of a collection to Pulp is tested by
  `pulp_ansible.tests.functional.cli.test_collection_upload`
- `ansible-galaxy role install` - the installation of role content is tested by
  `pulp_ansible.tests.functional.cli.test_role_install`

## Galaxy APIs

The Galaxy V2 and V3 APIs have tests.

- `pulp_ansible.tests.functional.api.collection.v2` - The V2 collection API
- `pulp_ansible.tests.functional.api.collection.v3` - The V3 collection API
- `pulp_ansible.tests.functional.api.role` - The V2 roles API

## Scale Testing Tools

These tools are contained in `pulp_ansible.tests.performance` and are standalone python utilities
to be called and passed arguments (they use argparse). Here are the tools:

- `generate_collections.py` which generates collections in parallel with Pulp workers.
- `fast_load_collections.py` which loads collections in parallel from a filesystem with Pulp
  workers.
- `create_repos_with_collections.py` which creates repositories and repository versions containing
  CollectionVersions already in Pulp.
- `promote.py` will select a content unit randomly and add it to N randomly selected
  AnsibleRepository objects. This is designed to benchmark adding new content to many repositories.
`````

## File: pulp-docs/pulp_ansible/docs/user/guides/collections.md
`````markdown
# Collection Workflows

Pulp organizes role content into repositories, and you associate the `ansible-galaxy` client with
one or more repositories. From a high level you can:

1. `Create a repo <create-a-collection-repository>`
2. `Create a distribution <create-distribution-for-collection>` expose that repository at a URL
3. `Sync content from galaxy.ansible.com <create-collection-remote>`
4. `Install content from the repo with ansible-galaxy <ansible-galaxy-collections-cli>`


## Create a Repository

Create a repository and name it the `foo` repository.

```bash
# Start by creating a new repository named foo
pulp ansible repository create --name "foo"
```

Repository create output:

```
{
  "pulp_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/",
  "pulp_created": "2021-01-26T22:48:11.479496Z",
  "versions_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/",
  "latest_version_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/0/",
  "name": "foo",
  "description": null,
  "remote": null
}
```

Reference (pulpcore): [Repository API Usage](https://docs.pulpproject.org/restapi.html#tag/repositories)



## Create a Distribution for Repository 'foo'

This will make the latest Repository Version content available for ``` ansible-galaxy` clients. Each
distribution names the url it can be accessed from on an attribute called ``client_url ```. The
`client_url` can be used with the `ansible-galaxy` client with the `-s` option. See the
`ansible-galaxy-roles-cli` docs for more details.

For example a distribution with `base_path` set to `my_content` could have a URL like:

```
http://pulp.example.com/pulp_ansible/galaxy/my_content/
```

```bash
# Distributions are created asynchronously. Create one, and specify the repository that will
# be served at the base path specified.
pulp ansible distribution create --name "baz" --base-path "my_content" --repository "foo"
```

Distribution create output:

```
Started background task /pulp/api/v3/tasks/48d187f6-d1d0-4d83-b803-dae9fe976da9/
.Done.
{
  "pulp_href": "/pulp/api/v3/distributions/ansible/ansible/148ce745-3dd5-4dda-a0ba-f9c5ec7119e1/",
  "pulp_created": "2021-01-26T22:51:34.380612Z",
  "base_path": "my_content",
  "content_guard": null,
  "name": "baz",
  "repository": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/",
  "repository_version": null,
  "client_url": "http://pulp3-source-fedora31.localhost.example.com/pulp_ansible/galaxy/my_content/"
}
```

## Create a Distribution for a RepositoryVersion (optional)

Instead of always distributing the latest RepositoryVersion, you can also specify a specific
RepositoryVersion for a Distribution. This should be used in place of the distribution above, not in
addition to it.

```bash
# Distributions are created asynchronously. Create one, and specify the repository version that will
# be served at the base path specified.
pulp ansible distribution create --name "bar" --base-path "some_content" --repository "foo" --version 0
```

Distribution create output:

```
Started background task /pulp/api/v3/tasks/48d187f6-d1d0-4d83-b803-dae9fe976da9/
.Done.
{
  "pulp_href": "/pulp/api/v3/distributions/ansible/ansible/148ce745-3dd5-4dda-a0ba-f9c5ec7119e1/",
  "pulp_created": "2021-01-26T22:51:34.380612Z",
  "base_path": "my_content",
  "content_guard": null,
  "name": "baz",
  "repository": null,
  "repository_version": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/",
  "client_url": "http://pulp3-source-fedora31.localhost.example.com/pulp_ansible/galaxy/my_content/"
}
```



## Create a CollectionRemote

Creating a CollectionRemote object allows Pulp to sync Collections from an external
content source. This is most commonly is `https://galaxy.ansible.com/` or another `pulp_ansible`
instance.

In this example we will be syncing the Collection with `namespace=testing`  and `name=ansible_testing_content`
from `https://galaxy-dev.ansible.com/`.

```bash
# Create a remote that syncs some versions of django into your repository.
pulp ansible remote -t "collection" create \
    --name "cbar" \
    --url "https://galaxy-dev.ansible.com/" \
    --requirements $'collections:\n  - testing.ansible_testing_content'
# If requirements are in a file
# you can use the option '--requirements @<file_name>' instead.
```

Remote create output:

```
{
  "pulp_href": "/pulp/api/v3/remotes/ansible/collection/80ba27e3-b4d6-4ddb-9677-9e40c04352ef/",
  "pulp_created": "2021-01-26T23:16:06.790367Z",
  "name": "cbar",
  "url": "https://galaxy-dev.ansible.com/",
  "ca_cert": null,
  "client_cert": null,
  "client_key": null,
  "tls_validation": true,
  "proxy_url": null,
  "username": null,
  "password": null,
  "pulp_last_updated": "2021-01-26T23:16:06.790390Z",
  "download_concurrency": 10,
  "policy": "immediate",
  "total_timeout": null,
  "connect_timeout": null,
  "sock_connect_timeout": null,
  "sock_read_timeout": null,
  "requirements_file": "collections:\n  - testing.ansible_testing_content",
  "auth_url": null,
  "token": null,
  "rate_limit": null
}
```

For [remote sources that require authentication](https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#configuring-the-ansible-galaxy-client), tokens can be used. You can provide the `token`
and/or `auth_url`.

In this example we will be syncing the Collection with `namespace=testing`  and `name=ansible_testing_content`
from `https://cloud.redhat.com/api/automation-hub/v3/collections/testing/ansible_testing_content`.

```bash
# Create a remote that syncs some versions of django into your repository.
pulp ansible remote -t "collection" create \
    --name "abar" \
    --auth-url "https://sso.qa.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token" \
    --token "$ANSIBLE_TOKEN_AUTH" \
    --tls-validation false \
    --url "https://cloud.redhat.com/api/automation-hub/" \
    --requirements $'collections:\n  - testing.ansible_testing_content'
```

Remote create output:

```
{
  "pulp_href": "/pulp/api/v3/remotes/ansible/collection/80ba27e3-b4d6-4ddb-9677-9e40c04352ef/",
  "pulp_created": "2021-01-26T23:16:06.790367Z",
  "name": "abar",
  "url": "https://cloud.redhat.com/api/automation-hub/",
  "ca_cert": null,
  "client_cert": null,
  "client_key": null,
  "tls_validation": false,
  "proxy_url": null,
  "username": null,
  "password": null,
  "pulp_last_updated": "2021-01-26T23:16:06.790390Z",
  "download_concurrency": 10,
  "policy": "immediate",
  "total_timeout": null,
  "connect_timeout": null,
  "sock_connect_timeout": null,
  "sock_read_timeout": null,
  "requirements_file": "collections:\n  - testing.ansible_testing_content",
  "auth_url": "https://sso.qa.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token",
  "token": "$ANSIBLE_TOKEN_AUTH",
  "rate_limit": null
}
```

## Sync Repository foo with CollectionRemote

Use the CollectionRemote object to kick off a synchronize task by specifying the Repository to
sync with. You are telling Pulp to fetch Collection content from the external source.

```bash
# Sync repository foo using remote cbar
pulp ansible repository sync --name "foo" --remote "cbar"

# Use the -b option to have the sync task complete in the background
# e.g. pulp -b ansible repository sync --name "foo" --remote "cbar"

# After the task is complete, it gives us a new repository version
# Inspecting new repository version
pulp ansible repository version show --repository "foo"
```

Repository Version GET Response (when complete):

```
{
  "pulp_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/",
  "pulp_created": "2021-01-26T23:25:06.473972Z",
  "number": 1,
  "base_version": null,
  "content_summary": {
    "added": {
      "ansible.collection_version": {
        "count": 2,
        "href": "/pulp/api/v3/content/ansible/collection_versions/?repository_version_added=/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/"
      }
    },
    "removed": {},
    "present": {
      "ansible.collection_version": {
        "count": 2,
        "href": "/pulp/api/v3/content/ansible/collection_versions/?repository_version=/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/"
      }
    }
  }
}
```



## Install a Collection, hosted by Pulp, using `ansible-galaxy`

You can use `ansible-galaxy` to install a collection by its namespace and name from pulp_ansible
using the `install` command. For example to install the `hello` collection from above into a
directory `~/collections` you can specify:

`ansible-galaxy collection install testing.ansible_testing_content -c -s http://localhost/pulp_ansible/galaxy/my_content/`

This assumes that the `hello` Collection is being served by the Distribution `ansible-galaxy` is
configured to use.

### Using a specific version

Install your collection by name by specifying the distribution serving your Repository's content using the
`-s` option.

`ansible-galaxy collection install testing.ansible_testing_content:4.0.6 -c -s http://localhost/pulp_ansible/galaxy/my_content/`

Note: the `-c` flag tells `ansible-galaxy` to ignore self signed https certificates.

### Configuring ansible-galaxy

Use the [ansible-galaxy config files](https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#configuring-the-ansible-galaxy-client) to specify the distribution
`ansible-galaxy` should interact with. To use this, set up your distribution in your ansible
config (e.g. `~/.ansible.cfg` or `/etc/ansible/ansible.cfg`):

```
[galaxy]
server_list = pulp, my_fallback_server

[galaxy_server.pulp]
url = http://localhost/pulp_ansible/galaxy/my_content/

[galaxy_server.my_fallback_server]
url = http://localhost/pulp_ansible/galaxy/my_other_content/
username = my_user
password = my_password

[galaxy_server.deprecated]
url = http://localhost/pulp_ansible/galaxy/deprecated/
username = my_user
password = my_password
```

Servers will be used in the order that they appear in `server_list` in the configuration file. Specific servers
can also be specified using the `-s` (or `--server`) flag, either by their name or URL. In this example
`ansible-galaxy` will attempt to fetch content from `pulp` and fallback to `my_fallback_server` if it can't
find anything. The `deprecated` server is not listed under `server_list`, so `ansible-galaxy` won't pull
content from it unless the server is specified explicitly with the `-s` flag.

```
# Downloads from the "pulp" server
ansible-galaxy collection install testing.ansible_testing_content:4.0.6

# Downloads from the "deprecated" server
ansible-galaxy collection install testing.ansible_testing_content:4.0.6 -s deprecated
```



## Publish (Upload) a Collection

You can use `ansible-galaxy` to publish any [built artifact](https://docs.ansible.com/ansible/latest/dev_guide/developing_collections.html#building-collections) to pulp_ansible by running:

```
ansible-galaxy collection build  # from inside the root directory of the collection
ansible-galaxy collection publish path/to/artifact.tar.gz
```

For example if you have ansible-galaxy installed and configured the script below will upload a
Collection to pulp_ansible and display it:

```
ansible-galaxy collection init namespace_name.collection_name
ansible-galaxy collection build namespace_name/collection_name/
ansible-galaxy collection publish namespace_name-collection_name-1.0.0.tar.gz -c
```

The client upload the Collection to the Repository associated with the Distribution. Each upload
creates a new Repository Version for the Repository.
`````

## File: pulp-docs/pulp_ansible/docs/user/guides/copy.md
`````markdown
# Copy Workflows

If you want to copy Ansible Collections or Roles from one repository into another repository, you
have two options for doing so.



## Basic Repository Modification API

Like all Pulp repositories, you can use the \$\{repo_href}/modify/ endpoint to:

- add or remove individual Collections or Roles from a repository by HREF
- roll back the content present in a repository to that of a previous version using 'base_version'
- clone a repository version using '"base_version". This operation will create a new repository
  version in the current repository which is a copy of the one specified as the "base_version",
  regardless of what content was previously present in the repository. This can be combined with
  adding and removing content units in the same call.

For example:

```
http POST localhost/pulp/api/v3/repositories/ansible/ansible/05813fa6-cf0b-435b-b54b-5a30fc370848/modify/ \
    add_content_units:="['/pulp/api/v3/content/ansible/collections/d2bab58c-50f2-4f1d-9cf0-8ceb1680f31b/']"
```

% copy-workflow:

## Advanced Copy Workflow

Ansible Collections store their `deprecated` status data at the Repository Version level, and the
"modify" workflow above does not properly preserve `deprecated` because the source of the content
is not known. For this reason a `copy` endpoint is available at `/pulp/api/v3/ansible/copy/`
which is similar to modify except the source of content, e.g. Collections, is declared which
allows the `deprecated` status to follow the content.

For example say you have two `AnsibleRepository` Repositories two `AnsibleDistribution`
Distributions exposing their content. One contains Collections with `deprecate=True` and the other
has no Collections in it.

Viewing the Repository with content you can see:

```
http GET http://example.com/pulp_ansible/galaxy/my_content/api/v3/collections/

HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "meta": {
        "count": 1
    },
    "links": {
        "first": "/pulp_ansible/galaxy/my_content/api/v3/collections/?limit=10&offset=0",
        "previous": null,
        "next": null,
        "last": "/pulp_ansible/galaxy/my_content/api/v3/collections/?limit=10&offset=0"
    },
    "data": [
        {
            "href": "/pulp_ansible/galaxy/my_content/api/v3/collections/testing/k8s_demo_collection/",
            "namespace": "testing",
            "name": "k8s_demo_collection",
            "deprecated": true,
            "versions_url": "/pulp_ansible/galaxy/my_content/api/v3/collections/testing/k8s_demo_collection/versions/",
            "highest_version": {
                "href": "/pulp_ansible/galaxy/my_content/api/v3/collections/testing/k8s_demo_collection/versions/0.0.3/",
                "version": "0.0.3"
            },
            "created_at": "2020-10-28T19:22:24.577606Z",
            "updated_at": "2020-10-28T19:22:24.577606Z"
        }
    ]
}
```

Then viewing the empty repository you can see:

```
http GET http://example.com/pulp_ansible/galaxy/dest_repo/api/v3/collections/

HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "meta": {
        "count": 0
    },
    "links": {
        "first": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/?limit=10&offset=0",
        "previous": null,
        "next": null,
        "last": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/?limit=10&offset=0"
    },
    "data": []
}
```

In this situation if you use the `modify` call since it doesn't know which Repository Version to
take the `deprecated` data from it isn't preserved For example if you run:

```
http POST http://example.com/pulp/api/v3/repositories/ansible/ansible/05813fa6-cf0b-435b-b54b-5a30fc370848/modify/ \
    add_content_units:="['/pulp/api/v3/content/ansible/collections/d2bab58c-50f2-4f1d-9cf0-8ceb1680f31b/']"
```

And you list the dest_repo via the Galaxy V3 API (that the CLI uses) you would see
`deprecated=False`.

However you could instead use the `copy` API as follows:

```bash
POST /pulp/api/v3/ansible/copy/
config:=[
    {"source_repo_version": "$SRC_REPO_VERS_HREF", "dest_repo": "$DEST_REPO_HREF", "content": [$CONTENT_HREF1]}
]
```

Then if you list the contents on the destination repository, you would see the `deprecated=True`
was preserved:

```
http GET http://example.com/pulp_ansible/galaxy/dest_repo/api/v3/collections/

HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "meta": {
        "count": 1
    },
    "links": {
        "first": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/?limit=10&offset=0",
        "previous": null,
        "next": null,
        "last": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/?limit=10&offset=0"
    },
    "data": [
        {
            "href": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/testing/k8s_demo_collection/",
            "namespace": "testing",
            "name": "k8s_demo_collection",
            "deprecated": true,
            "versions_url": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/testing/k8s_demo_collection/versions/",
            "highest_version": {
                "href": "/pulp_ansible/galaxy/dest_repo/api/v3/collections/testing/k8s_demo_collection/versions/0.0.3/",
                "version": "0.0.3"
            },
            "created_at": "2020-10-28T19:22:24.577606Z",
            "updated_at": "2020-10-28T19:22:24.577606Z"
        }
    ]
}
```

## Copy All Content

When calling `copy` you can omit the `content` argument and `copy` will copy all content from
the `source_repo_version` to a new Repository Version created on the `dest_repo`. That would be
similar to:

```bash
POST /pulp/api/v3/ansible/copy/
config:=[
    {"source_repo_version": "$SRC_REPO_VERS_HREF", "dest_repo": "$DEST_REPO_HREF"}
]
```

## Specifying a Destination Base Version

In some situations, you may want the content being copied to be applied not to the latest version
of the `dest_repo`, and in that case, you can additionally specify the `dest_base_version` and
that would be used instead of the latest RepositoryVersion of `dest_repo`:

```bash
POST /pulp/api/v3/ansible/copy/
config:=[
    {"source_repo_version": "$SRC_REPO_VERS_HREF", "dest_repo": "$DEST_REPO_HREF", "dest_base_version": "$DEST_BASE_VERSION", "content": [$CONTENT_HREF1, $CONTENT_HREF2]}
]
```

## Multi-Repo Copy

You can specify a more complicated `config` option which can express multiple copy operations in
one call. Each entry is the dictionary of `source_repo_version`, `dest_repo`, and optional
`content`, in a list form.

```bash
POST /pulp/api/v3/ansible/copy/
config:=[
    {"source_repo_version": "$SRC_REPO_VERS_HREF", "dest_repo": "$DEST_REPO_HREF", "content": [$CONTENT_HREF1, $CONTENT_HREF2]},
    {"source_repo_version": "$SRC_REPO_VERS_HREF2", "dest_repo": "$DEST_REPO_HREF2", "content": []},
]
```
`````

## File: pulp-docs/pulp_ansible/docs/user/guides/roles.md
`````markdown
# Role Workflows

Pulp organizes role content into repositories, and you associate the `ansible-galaxy` client with
one or more repositories. From a high level you can:

1. `Create a repo <create-a-roles-repository>`
2. `Create a distribution <create-distribution-for-repo>` expose that repository at a URL
3. `Sync content from galaxy.ansible.com <create-role-remote>`
4. `Install content from the repo with ansible-galaxy <ansible-galaxy-roles-cli>`


## Create a Repository

Create a repository and name it the `foo` repository.

```bash
# Start by creating a new repository named foo
pulp ansible repository create --name "foo"
```

Repository create output:

```json
{
  "pulp_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/",
  "pulp_created": "2021-01-26T22:48:11.479496Z",
  "versions_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/",
  "latest_version_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/0/",
  "name": "foo",
  "description": null,
  "remote": null
}
```

Reference (pulpcore): [Repository API Usage](https://docs.pulpproject.org/restapi.html#tag/repositories)



## Create a Distribution for Repository 'foo'

This will make the latest Repository Version content available for `ansible-galaxy` clients. Each
distribution names the url it can be accessed from on an attribute called `client_url`. The
`client_url` can be used with the `ansible-galaxy` client with the `-s` option. See the
`ansible-galaxy-roles-cli` docs for more details.

For example a distribution with `base_path` set to `my_content` could have a URL like:

```
http://pulp.example.com/pulp_ansible/galaxy/my_content/
```

```bash
# Distributions are created asynchronously. Create one, and specify the repository that will
# be served at the base path specified.
pulp ansible distribution create --name "baz" --base-path "my_content" --repository "foo"
```

Distribution create output:

```
Started background task /pulp/api/v3/tasks/48d187f6-d1d0-4d83-b803-dae9fe976da9/
.Done.
{
  "pulp_href": "/pulp/api/v3/distributions/ansible/ansible/148ce745-3dd5-4dda-a0ba-f9c5ec7119e1/",
  "pulp_created": "2021-01-26T22:51:34.380612Z",
  "base_path": "my_content",
  "content_guard": null,
  "name": "baz",
  "repository": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/",
  "repository_version": null,
  "client_url": "http://pulp3-source-fedora31.localhost.example.com/pulp_ansible/galaxy/my_content/"
}
```

## Create a Distribution for a RepositoryVersion (optional)

Instead of always distributing the latest RepositoryVersion, you can also specify a specific
RepositoryVersion for a Distribution. This should be used in place of the distribution above, not in
addition to it.

```bash
# Distributions are created asynchronously. Create one, and specify the repository version that will
# be served at the base path specified.
pulp ansible distribution create --name "bar" --base-path "some_content" --repository "foo" --version 0
```

Distribution create output:

```
Started background task /pulp/api/v3/tasks/48d187f6-d1d0-4d83-b803-dae9fe976da9/
.Done.
{
  "pulp_href": "/pulp/api/v3/distributions/ansible/ansible/148ce745-3dd5-4dda-a0ba-f9c5ec7119e1/",
  "pulp_created": "2021-01-26T22:51:34.380612Z",
  "base_path": "my_content",
  "content_guard": null,
  "name": "baz",
  "repository": null,
  "repository_version": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/",
  "client_url": "http://pulp3-source-fedora31.localhost.example.com/pulp_ansible/galaxy/my_content/"
}
```



## Create a Remote

Creating a Remote object informs Pulp about an external content source, which most commonly is
`https://galaxy.ansible.com/` or another `pulp_ansible` instance. In this case, we will be
syncing all Roles where `namespace=elastic` on Galaxy. You can browse those Roles Pulp will import
[here](https://galaxy.ansible.com/api/v1/roles/?namespace=elastic).

```bash
# Create a remote that syncs some versions of django into your repository.
pulp ansible remote -t "role" create --name "bar" --url "https://galaxy.ansible.com/api/v1/roles/?owner__username=elastic"
```

Remote create output:

```
{
  "pulp_href": "/pulp/api/v3/remotes/ansible/role/38f37de9-842c-4690-a73c-9e813853b28b/",
  "pulp_created": "2021-01-26T22:55:17.126745Z",
  "name": "bar",
  "url": "https://galaxy.ansible.com/api/v1/roles/?owner__username=elastic",
  "ca_cert": null,
  "client_cert": null,
  "client_key": null,
  "tls_validation": true,
  "proxy_url": null,
  "username": null,
  "password": null,
  "pulp_last_updated": "2021-01-26T22:55:17.126755Z",
  "download_concurrency": 10,
  "policy": "immediate",
  "total_timeout": null,
  "connect_timeout": null,
  "sock_connect_timeout": null,
  "sock_read_timeout": null
}
```



## Sync Repository foo with Remote

Use the Remote object to kick off a synchronize task by specifying the Repository to
sync with. You are telling Pulp to fetch content from the Remote and add to the Repository.

```bash
# Sync repository foo using remote bar
pulp ansible repository sync --name "foo" --remote "role:bar"

# Use the -b option to have the sync task complete in the background
# e.g. pulp -b ansible repository sync --name "foo" --remote "bar"

# After the task is complete, it gives us a new repository version
# Inspecting new repository version
pulp ansible repository version show --repository "foo" --version 1
```

Repository Version show output:

```
{
    "pulp_href": "/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/",
    "pulp_created": "2021-01-26T22:57:55.451200Z",
    "number": 1,
    "base_version": null,
    "content_summary": {
      "added": {
        "ansible.role": {
          "count": 56,
          "href": "/pulp/api/v3/content/ansible/roles/?repository_version_added=/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/"
        }
      },
      "removed": {},
      "present": {
        "ansible.role": {
          "count": 56,
          "href": "/pulp/api/v3/content/ansible/roles/?repository_version=/pulp/api/v3/repositories/ansible/ansible/b17950e8-cee8-493a-b735-0d04905cf067/versions/1/"
        }
      }
    }
}
```

Reference (pulpcore): [Repository Version List API Usage](https://docs.pulpproject.org/restapi.html#operation/repositories_versions_list)



## Install a Role, hosted by Pulp, using `ansible-galaxy`

### Using a direct path

Install your role by name by specifying the distribution serving your Repository's content using the
`-s` option.

`ansible-galaxy install elasticsearch,6.2.4 -c -s http://pulp.example.com/pulp_ansible/galaxy/my_content/`

### Configuring ansible-galaxy Permanently

Use the [ansible-galaxy config files](https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html#environment) to specify the distribution `ansible-galaxy` should interact
with. To use this, set up your distribution in your ansible config (e.g. `~/.ansible.cfg` or
`/etc/ansible/ansible.cfg`):

```
[galaxy]
server: http://pulp.example.com/pulp_ansible/galaxy/my_content/
```

Then you can install without the `-s` url

```bash
$ ansible-galaxy install elastic.elasticsearch,6.2.4
- downloading role 'elasticsearch', owned by elastic
- downloading role from http://localhost:24816/pulp/content/dev/elastic/elasticsearch/6.2.4.tar.gz
- extracting elastic.elasticsearch to /home/vagrant/.ansible/roles/elastic.elasticsearch
- elastic.elasticsearch (6.2.4) was installed successfully
```
`````

## File: pulp-docs/pulp_ansible/docs/user/guides/signature.md
`````markdown
# Signature Workflows

`pulp_ansible` supports Collection signing, syncing, and uploading. Collection signing adds extra
validation when installing Collections with `ansible-galaxy`. Check out the workflows below to see
how to add signature support.

## Setup

In order to verify signature validity on uploads you will need to store your trusted key on the
repositories `gpgkey` attribute.

!!! note
    You can upload signatures without supplying Pulp any key, but `pulp_ansible` will not
    perform validity checks on the uploaded signature. You will also have to configure the
    `ANSIBLE_SIGNATURE_REQUIRE_VERIFICATION` setting to `False`. By default and once a key is
    provided, all signatures impossible to verify are rejected.


In order to have `pulp_ansible` sign collections stored in your repositories you will need to set
up a signing service. First, create/import the key you intend to sign your collections with onto
your Pulp system. Second, create a signing script on your Pulp system with the parameters you want
on the generated signatures. Galaxy uses a signing script like the one below:

```bash
#!/usr/bin/env bash
FILE_PATH=$1
SIGNATURE_PATH="$1.asc"

# Create a detached signature
gpg --quiet --batch --homedir ~/.gnupg/ --detach-sign --local-user "${PULP_SIGNING_KEY_FINGERPRINT}" \
    --armor --output ${SIGNATURE_PATH} ${FILE_PATH}

# Check the exit status
STATUS=$?
if [[ ${STATUS} -eq 0 ]]; then
   echo {\"file\": \"${FILE_PATH}\", \"signature\": \"${SIGNATURE_PATH}\"}
else
   exit ${STATUS}
fi
```

Third, create the signing service using `pulpcore-manager`:

```bash
pulpcore-manager add-signing-service ansible-signing-service $SCRIPT_LOCATION $PUBKEY_FINGERPRINT
```

Reference: [Signing Service](https://docs.pulpproject.org/pulpcore/workflows/signed-metadata.html)

## Signing Collections

Sign collections stored in repository `foo` with the signing service `ansible-signing-service`:

```bash
pulp ansible repository sign --name foo --signing-service ansible-signing-service
```

By default it will sign everything in the repository, specify `--content-units` with a list of
specific collection hrefs you want to sign. Collections can have multiple signatures attached to
them in a repository as long as they are all from different keys.

## Syncing Signed Collections

Signature information will be present in the Galaxy APIs if your repository has signatures in it
and when syncing from a Galaxy repository, signatures will automatically be synced as well if
present. You can also specify to only sync Collections that have signatures with the
`signed_only` field on the remote. e.g.:

```bash
pulp ansible remote update --name foo --signed-only
# Sync task will only sync collections with signatures now
pulp ansible repository sync --name foo --remote foo
```

## Uploading Signed Collections

Signatures can also be manually created and uploaded to `pulp_ansible`.

```bash
pulp ansible content -t signature upload --file $SIGNATURE --collection $COLLECTION_HREF
```

Signatures can be verified upon upload by setting the `keyring` field on the repository to your
keyring location, and then specifying the `repository` option when uploading the signature.

```bash
pulp ansible repository update --name foo --keyring $KEYRING_FILE_LOCATION
# Validate signature against keyring of repository
pulp ansible content -t signature upload --file $SIGNATURE --collection $COLLECTION_HREF --repository foo
```

## Verifying Signatures with `ansible-galaxy`

Installing collections from `pulp_ansible` with signatures via `ansible-galaxy` requires
specifying the keyring to perform the validation upon install:

```bash
ansible-galaxy collection install $COLLECTION -s "$BASE_ADDR"pulp_ansible/galaxy/foo/api/ --keyring $KEYRING_FILE_LOCATION
```

You can also verify already installed collections with the verify command:

```bash
ansible-galaxy collection verify $COLLECTION -s "$BASE_ADDR"pulp_ansible/galaxy/foo/api/ --keyring $KEYRING_FILE_LOCATION
```
`````

## File: pulp-docs/pulp_ansible/docs/user/index.md
`````markdown
# Welcome to Pulp Ansible's documentation!

Use `pulp_ansible` to create a private Galaxy. It doesn't have a UI currently, but using an API
you can:

- Mirror a subset of roles on-premise
- Mirror all of Galaxy’s roles on-premise
- Store private Ansible roles on-premise
- Install Roles from pulp_ansible using the `ansible-galaxy` CLI
- Version Role content over time and rollback if necessary
- Support for the new multi-role content type from Galaxy

Issues are tracked [in Github](https://github.com/pulp/pulp_ansible/issues). You can file
a new issue or feature request [here](https://github.com/pulp/pulp_ansible/issues/new).
You can also ask questions in the #pulp-ansible channel on
[Matrix](https://matrix.to/#/!cbADstEIkixyOUTCtO:matrix.org?via=libera.chat&via=matrix.org).
`````

## File: pulp-docs/pulp_ansible/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 0.26.0 (2025-05-27) {: #0.26.0 }

#### Features {: #0.26.0-feature }

- Added a migration to prepare moving tags into an array field on collection versions.

  The second part of the migration will be shipped in the next release to keep the process zero downtime safe.

#### Bugfixes {: #0.26.0-bugfix }

- Fixed broken collection import logs.
- Made collection sync slightly more resiliant in face of missing "next" links.

#### Deprecations and Removals {: #0.26.0-removal }

- Remove the `is_highest` field from CollectionVersion table.
  [#1550](https://github.com/pulp/pulp_ansible/issues/1550)

---

## 0.25.1 (2025-05-06) {: #0.25.1 }

#### Bugfixes {: #0.25.1-bugfix }

- Fixed broken collection import logs.
- Made collection sync slightly more resiliant in face of missing "next" links.

---

## 0.25.0 (2025-04-23) {: #0.25.0 }

#### Features {: #0.25.0-feature }

- Added namespace progress report.

#### Bugfixes {: #0.25.0-bugfix }

- Renamed duplicate 'Downloading Artifacts' sync progress report message to 'Downloading Docs Blob'.
  [#1369](https://github.com/pulp/pulp_ansible/issues/1369)
- Fixed a migration that was failing when upgrading on a system that was on 0.23.0 at one point in time.
  [#2118](https://github.com/pulp/pulp_ansible/issues/2118)
- Fixed deadlock when performing multiple syncs with similar collections.
  [#2131](https://github.com/pulp/pulp_ansible/issues/2131)
- Fixed optimization of fetching namespace logos during sync.
  [#2138](https://github.com/pulp/pulp_ansible/issues/2138)
- Added a workaround to the `CollectionVersionSearchListSerializer` to allow installing djangorestframework>=3.16.
- Added version constraint on djangorestframework to prevent an interference leading to a missing `repository_version` field in the openapi specification.
- Fixed a bug in the git sync caused by a bad serialization after pulpcore 3.73.0.
- Fixed namespace avatar download log.

---

## 0.24.6 (2025-04-23) {: #0.24.6 }

#### Features {: #0.24.6-feature }

- Added namespace progress report.

#### Bugfixes {: #0.24.6-bugfix }

- Fixed optimization of fetching namespace logos during sync.
  [#2138](https://github.com/pulp/pulp_ansible/issues/2138)

---

## 0.24.5 (2025-04-15) {: #0.24.5 }

#### Bugfixes {: #0.24.5-bugfix }

- Fixed namespace avatar download log.

---

## 0.24.4 (2025-04-07) {: #0.24.4 }

#### Bugfixes {: #0.24.4-bugfix }

- Added a workaround to the `CollectionVersionSearchListSerializer` to allow installing djangorestframework>=3.16.

---

## 0.24.3 (2025-04-03) {: #0.24.3 }

#### Bugfixes {: #0.24.3-bugfix }

- Added version constraint on djangorestframework to prevent an interference leading to a missing `repository_version` field in the openapi specification.

---

## 0.24.2 (2025-03-12) {: #0.24.2 }

#### Bugfixes {: #0.24.2-bugfix }

- Fixed deadlock when performing multiple syncs with similar collections.
  [#2131](https://github.com/pulp/pulp_ansible/issues/2131)
- Fixed a bug in the git sync caused by a bad serialization after pulpcore 3.73.0.

---

## 0.24.1 (2025-02-18) {: #0.24.1 }

#### Bugfixes {: #0.24.1-bugfix }

- Fixed a migration that was failing when upgrading on a system that was on 0.23.0 at one point in time.
  [#2118](https://github.com/pulp/pulp_ansible/issues/2118)

---

## 0.24.0 (2025-02-17) {: #0.24.0 }

#### Features {: #0.24.0-feature }

- CollectionVersion global uniqueness constraint is now its sha256 digest. Repository level uniqueness
  is still (namespace, name, version).
  [#1052](https://github.com/pulp/pulp_ansible/issues/1052)

#### Bugfixes {: #0.24.0-bugfix }

- Fixed a regression with migration 0056 failing on multiple null values on a unique constraint.
  [#2040](https://github.com/pulp/pulp_ansible/issues/2040)

#### Deprecations and Removals {: #0.24.0-removal }

- Added the final migration to make the sha256 of the collection version artifact the uniqueness
  constraint. This allows users to serve their own interpretation of the content in their private
  repositories.
  The migration will only succeed if all the content has been adjusted. To account for content that
  was not migrated by the migration shipped with 0.23.0, you can run the content repair command
  ``datarepair-ansible-collection-sha256`` prior to upgrading.
  This version removed the content repair command.
  [#1052](https://github.com/pulp/pulp_ansible/issues/1052)
- Rebased and squashed old migrations to prepare for pulpcore 3.70 compatibility.
  [#2062](https://github.com/pulp/pulp_ansible/issues/2062)

#### Misc {: #0.24.0-misc }

- [#2081](https://github.com/pulp/pulp_ansible/issues/2081), [#2083](https://github.com/pulp/pulp_ansible/issues/2083)

---

## 0.23.1 (2024-11-22) {: #0.23.1 }

#### Bugfixes {: #0.23.1-bugfix }

- Fixed a regression with migration 0056 failing on multiple null values on a unique constraint.
  [#2040](https://github.com/pulp/pulp_ansible/issues/2040)

---

## 0.23.0 (2024-11-11) {: #0.23.0 }

#### Features {: #0.23.0-feature }

- Added sha256 to collection versions.
  This is the first part of a change to make this field the uniqueness constraint in the database.
  The `datarepair-ansible-collection-sha256` management command is provided to prepare for the next release bringing the second and final step.

#### Bugfixes {: #0.23.0-bugfix }

- Fixed some 500 errors when browsing the Galaxy API.
  [#galaxy500s](https://github.com/pulp/pulp_ansible/issues/galaxy500s)
- Cast the content object to a collectionversion before setting the rebuild metadata.
  [#1921](https://github.com/pulp/pulp_ansible/issues/1921)
- Fixed a bug hitting a db restriction with `is_highest` on import.
  [#1986](https://github.com/pulp/pulp_ansible/issues/1986)
- Use the highest collection version to reflect a collection's update_at timestamp.
  [#2000](https://github.com/pulp/pulp_ansible/issues/2000)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).
- Fixed the openapi spec for the collection version search.

#### Deprecations and Removals {: #0.23.0-removal }

- Removed `is_highest` from collection versions.
  [#1986](https://github.com/pulp/pulp_ansible/issues/1986)
- Removed the `is_highest` attribute on CollectionVersion.

---

## 0.22.6 (2025-05-06) {: #0.22.6 }

#### Bugfixes {: #0.22.6-bugfix }

- Made collection sync slightly more resiliant in face of missing "next" links.

---

## 0.22.5 (2025-04-23) {: #0.22.5 }

#### Features {: #0.22.5-feature }

- Added namespace progress report.

#### Bugfixes {: #0.22.5-bugfix }

- Fixed optimization of fetching namespace logos during sync.
  [#2138](https://github.com/pulp/pulp_ansible/issues/2138)

---

## 0.22.4 (2025-03-12) {: #0.22.4 }

#### Bugfixes {: #0.22.4-bugfix }

- Fixed deadlock when performing multiple syncs with similar collections.
  [#2131](https://github.com/pulp/pulp_ansible/issues/2131)

---

## 0.22.3 (2024-11-12) {: #0.22.3 }

#### Bugfixes {: #0.22.3-bugfix }

- Fixed some 500 errors when browsing the Galaxy API.
  [#galaxy500s](https://github.com/pulp/pulp_ansible/issues/galaxy500s)

---

## 0.22.2 (2024-10-29) {: #0.22.2 }

#### Bugfixes {: #0.22.2-bugfix }

- Set `is_highest` to `False` before importing a collection version to prevent conflicts.
  [#1986](https://github.com/pulp/pulp_ansible/issues/1986)
- Use the highest collection version to reflect a collection's update_at timestamp.
  [#2000](https://github.com/pulp/pulp_ansible/issues/2000)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 0.22.1 (2024-07-22) {: #0.22.1 }


#### Bugfixes {: #0.22.1-bugfix }

- Cast the content object to a collectionversion before setting the rebuild metadata.
  [#1921](https://github.com/pulp/pulp_ansible/issues/1921)
- Fixed the openapi spec for the collection version search.

---

## 0.22.0 (2024-06-20) {: #0.22.0 }


#### Bugfixes {: #0.22.0-bugfix }

- Fixed syncing progress report, `Parsing CollectionVersion Metadata`, total count when using `signed_only=True`.
  [#1608](https://github.com/pulp/pulp_ansible/issues/1608)
- Duplicate Collection uploads no longer return 400s.
  [#1691](https://github.com/pulp/pulp_ansible/issues/1691)
- Fixed AnsibleNamespaceMetadata not being exported.
  [#1764](https://github.com/pulp/pulp_ansible/issues/1764)
- Fixed a bug failing sync on namespace metadata when avatar_sha256 is missing.
  [#1772](https://github.com/pulp/pulp_ansible/issues/1772)
- Add ansible hostname to API v3 cache key
  [#1833](https://github.com/pulp/pulp_ansible/issues/1833)
- Fixed import failing to associate signatures and marks with their collection version.
  [#1836](https://github.com/pulp/pulp_ansible/issues/1836)
- Fixed sync failing on undownloadable namespace avatars.
  [#1868](https://github.com/pulp/pulp_ansible/issues/1868)
- Changed avatar download to allow graceful failure on mismatching image checksum.
- Fixed the api for direct creation of collection_deprecated content.

#### Improved Documentation {: #0.22.0-doc }

- Convert docs to new style.
  [#1754](https://github.com/pulp/pulp_ansible/issues/1754)

#### Deprecations and Removals {: #0.22.0-removal }

- Removed the galaxy v2 apis. The v3 apis should be used instead.
  [#691](https://github.com/pulp/pulp_ansible/issues/691)
- Bumped `pulpcore` requirement to `>=3.39.0` and dropped `python 3.8` support.

---

## 0.21.13 (2025-05-06) {: #0.21.13 }

#### Bugfixes {: #0.21.13-bugfix }

- Made collection sync slightly more resiliant in face of missing "next" links.

---

## 0.21.12 (2025-04-23) {: #0.21.12 }

#### Features {: #0.21.12-feature }

- Added namespace progress report.

#### Bugfixes {: #0.21.12-bugfix }

- Fixed optimization of fetching namespace logos during sync.
  [#2138](https://github.com/pulp/pulp_ansible/issues/2138)

---

## 0.21.11 (2025-04-15) {: #0.21.11 }

#### Bugfixes {: #0.21.11-bugfix }

- Fixed namespace avatar download log.

---

## 0.21.10 (2025-03-18) {: #0.21.10 }

#### Bugfixes {: #0.21.10-bugfix }

- Fixed deadlock when performing multiple syncs with similar collections.
  [#2131](https://github.com/pulp/pulp_ansible/issues/2131)

---

## 0.21.9 (2024-10-29) {: #0.21.9 }

#### Bugfixes {: #0.21.9-bugfix }

- Set `is_highest` to `False` before importing a collection version to prevent conflicts.
  [#1986](https://github.com/pulp/pulp_ansible/issues/1986)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 0.21.8 (2024-08-14) {: #0.21.8 }

#### Bugfixes {: #0.21.8-bugfix }

- Fixed import failing to associate signatures and marks with their collection version.
  [#1836](https://github.com/pulp/pulp_ansible/issues/1836)

---

## 0.21.7 (2024-07-22) {: #0.21.7 }


#### Bugfixes {: #0.21.7-bugfix }

- Cast the content object to a collectionversion before setting the rebuild metadata.
  [#1921](https://github.com/pulp/pulp_ansible/issues/1921)
- Fixed the openapi spec for the collection version search.

---

## 0.21.6 (2024-05-29) {: #0.21.6 }

#### Bugfixes

-   Fixed sync failing on undownloadable namespace avatars.
    [#1868](https://github.com/pulp/pulp_ansible/issues/1868)

---

## 0.21.5 (2024-05-15) {: #0.21.5 }

No significant changes.

---

## 0.21.4 (2024-05-07) {: #0.21.4 }

#### Bugfixes

-   Add ansible hostname to API v3 cache key
    [#1833](https://github.com/pulp/pulp_ansible/issues/1833)

---

## 0.21.3 (2024-02-28) {: #0.21.3 }

#### Bugfixes

-   Fixed AnsibleNamespaceMetadata not being exported.
    [#1764](https://github.com/pulp/pulp_ansible/issues/1764)
-   Fixed a bug failing sync on namespace metadata when avatar_sha256 is missing.
    [#1772](https://github.com/pulp/pulp_ansible/issues/1772)
-   Changed avatar download to allow graceful failure on mismatching image checksum.

---

## 0.21.2 (2024-02-26) {: #0.21.2 }

No significant changes.

---

## 0.21.1 (2023-12-12) {: #0.21.1 }

#### Bugfixes

-   Duplicate Collection uploads no longer return 400s.
    [#1691](https://github.com/pulp/pulp_ansible/issues/1691)

---

## 0.21.0 (2023-11-03) {: #0.21.0 }

#### Features

-   Added pulpcore 3.40 compatibility.
-   Display the `count` attribute in the tags of collections.
    [#1612](https://github.com/pulp/pulp_ansible/issues/1612)

#### Bugfixes

-   Ignore the "users" field in namespace data during sync.
    [#1598](https://github.com/pulp/pulp_ansible/issues/1598)
-   Fixed highest version calculation failing when versions of a collection were created out of order.
    [#1623](https://github.com/pulp/pulp_ansible/issues/1623)

---

## 0.20.12 (2025-05-06) {: #0.20.12 }

#### Bugfixes {: #0.20.12-bugfix }

- Made collection sync slightly more resiliant in face of missing "next" links.

---

## 0.20.11 (2025-04-23) {: #0.20.11 }

#### Features {: #0.20.11-feature }

- Added namespace progress report.

#### Bugfixes {: #0.20.11-bugfix }

- Fixed optimization of fetching namespace logos during sync.
  [#2138](https://github.com/pulp/pulp_ansible/issues/2138)

---

## 0.20.10 (2025-01-16) {: #0.20.10 }

No significant changes.

---

## 0.20.9 (2024-10-31) {: #0.20.9 }

#### Bugfixes {: #0.20.9-bugfix }

- Set `is_highest` to `False` before importing a collection version to prevent conflicts.
  [#1986](https://github.com/pulp/pulp_ansible/issues/1986)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 0.20.8 (2024-07-22) {: #0.20.8 }


#### Bugfixes {: #0.20.8-bugfix }

- Cast the content object to a collectionversion before setting the rebuild metadata.
  [#1921](https://github.com/pulp/pulp_ansible/issues/1921)
- Fixed the openapi spec for the collection version search.

---

## 0.20.7 (2024-05-29) {: #0.20.7 }

#### Bugfixes

-   Fixed sync failing on undownloadable namespace avatars.
    [#1868](https://github.com/pulp/pulp_ansible/issues/1868)

---

## 0.20.6 (2024-05-15) {: #0.20.6 }

#### Bugfixes

-   Fixed import failing to associate signatures and marks with their collection version.
    [#1836](https://github.com/pulp/pulp_ansible/issues/1836)

---

## 0.20.5 (2024-04-11) {: #0.20.5 }

No significant changes.

---

## 0.20.4 (2024-02-28) {: #0.20.4 }

#### Bugfixes

-   Fixed AnsibleNamespaceMetadata not being exported.
    [#1764](https://github.com/pulp/pulp_ansible/issues/1764)
-   Fixed a bug failing sync on namespace metadata when avatar_sha256 is missing.
    [#1772](https://github.com/pulp/pulp_ansible/issues/1772)
-   Changed avatar download to allow graceful failure on mismatching image checksum.

---

## 0.20.3 (2023-12-12) {: #0.20.3 }

#### Bugfixes

-   Duplicate Collection uploads no longer return 400s.
    [#1691](https://github.com/pulp/pulp_ansible/issues/1691)

---

## 0.20.2 (2023-10-23) {: #0.20.2 }

#### Bugfixes

-   Fixed highest version calculation failing when versions of a collection were created out of order.
    [#1623](https://github.com/pulp/pulp_ansible/issues/1623)

---

## 0.20.1 (2023-10-03) {: #0.20.1 }

#### Bugfixes

-   Ignore the "users" field in namespace data during sync.
    [#1598](https://github.com/pulp/pulp_ansible/issues/1598)

---

## 0.20.0 (2023-09-26) {: #0.20.0 }

#### Features

-   Added settings `ANSIBLE_AUTHENTICATION_CLASSES` and `ANSIBLE_PERMISSION_CLASSES` to allow for
    customizing Galaxy authentication and authorization separate from Pulp APIs.
    [#1555](https://github.com/pulp/pulp_ansible/issues/1555)
-   Adjusted default access policies for new labels api.
    [#1568](https://github.com/pulp/pulp_ansible/issues/1568)

#### Bugfixes

-   Fixed ordering by version in the `/ansible/search/collection-versions/` endpoint.
    [#1516](https://github.com/pulp/pulp_ansible/issues/1516)
-   Stopped collection sync from failing if a namespace's avatar url was unreachable.
    [#1543](https://github.com/pulp/pulp_ansible/issues/1543)
-   Fixed a sporadic sync error when re-syncing a repository with new collection versions.
    [#1547](https://github.com/pulp/pulp_ansible/issues/1547)
-   Prevented a race condition that lead to contraint violations when calculating the highest version of a collection.
    [#1571](https://github.com/pulp/pulp_ansible/issues/1571)

#### Misc

-   [#1506](https://github.com/pulp/pulp_ansible/issues/1506)

---

## 0.19.0 (2023-07-20) {: #0.19.0 }

#### Features

-   Exposes collection download count in the api.
    Download count controlled by new setting ANSIBLE_COLLECT_DOWNLOAD_COUNT.
    [#1478](https://github.com/pulp/pulp_ansible/issues/1478)

#### Bugfixes

-   Fixed the migration 0030 in face of collections without runtime.yml.
    [#1480](https://github.com/pulp/pulp_ansible/issues/1480)
-   Wrapped db writes with try/except for collection download logs with read-only databases.
    [#1491](https://github.com/pulp/pulp_ansible/issues/1491)
-   Fixed updated namespacemetadata in x-repo search indexing.
    [#1494](https://github.com/pulp/pulp_ansible/issues/1494)

---

## 0.18.4 (2025-02-17) {: #0.18.4 }

No significant changes.

---

## 0.18.3 (2024-10-31) {: #0.18.3 }

#### Bugfixes {: #0.18.3-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).
- Fixed the openapi spec for the collection version search.

---

## 0.18.2 (2023-10-03) {: #0.18.2 }

#### Bugfixes

-   Ignore the "users" field in namespace data during sync.
    [#1598](https://github.com/pulp/pulp_ansible/issues/1598)

---

## 0.18.1 (2023-09-21) {: #0.18.1 }

#### Features

-   Added settings `ANSIBLE_AUTHENTICATION_CLASSES` and `ANSIBLE_PERMISSION_CLASSES` to allow for
    customizing Galaxy authentication and authorization separate from Pulp APIs.
    [#1555](https://github.com/pulp/pulp_ansible/issues/1555)

---

## 0.18.0 (2023-05-25) {: #0.18.0 }

#### Features

-   Updated compatibility for pulpcore 3.25 and Django 4.2.
    [#1462](https://github.com/pulp/pulp_ansible/issues/1462)

#### Bugfixes

-   Reduce fetched fields in cv list endpoint to prevent oomkill.
    [#1433](https://github.com/pulp/pulp_ansible/issues/1433)
-   Fix traceback when publishing a collection to the v2 API endpoint
    [#1441](https://github.com/pulp/pulp_ansible/issues/1441)
-   Fixed several bugs in the galaxy v2 API related to generating URLs for various collection resources.
    [#1452](https://github.com/pulp/pulp_ansible/issues/1452)
-   Increase collectionversion search index build speeds.
    [#1467](https://github.com/pulp/pulp_ansible/issues/1467)

---

## 0.17.5 (2023-10-03) {: #0.17.5 }

#### Bugfixes

-   Ignore the "users" field in namespace data during sync.
    [#1598](https://github.com/pulp/pulp_ansible/issues/1598)

---

## 0.17.4 (2023-08-10) {: #0.17.4 }

#### Bugfixes

-   Stopped collection sync from failing if a namespace's avatar url was unreachable.
    [#1543](https://github.com/pulp/pulp_ansible/issues/1543)
-   Fixed a sporadic sync error when re-syncing a repository with new collection versions.
    [#1547](https://github.com/pulp/pulp_ansible/issues/1547)

---

## 0.17.3 (2023-07-05) {: #0.17.3 }

#### Bugfixes

-   Fixed updated namespacemetadata in x-repo search indexing.
    [#1494](https://github.com/pulp/pulp_ansible/issues/1494)

---

## 0.17.2 (2023-05-30) {: #0.17.2 }

#### Bugfixes

-   Fixed several bugs in the galaxy v2 API related to generating URLs for various collection resources.
    [#1452](https://github.com/pulp/pulp_ansible/issues/1452)
-   Increase collectionversion search index build speeds.
    [#1467](https://github.com/pulp/pulp_ansible/issues/1467)

---

## 0.17.1 (2023-05-09) {: #0.17.1 }

#### Bugfixes

-   Reduce fetched fields in cv list endpoint to prevent oomkill.
    [#1433](https://github.com/pulp/pulp_ansible/issues/1433)
-   Fix traceback when publishing a collection to the v2 API endpoint
    [#1441](https://github.com/pulp/pulp_ansible/issues/1441)

---

## 0.17.0 (2023-03-30) {: #0.17.0 }

#### Features

-   Added Namespace metadata content model and Galaxy endpoints v3/namespaces/ & [v3/plugin/ansible/content/<base_path>/namespaces/]{.title-ref}.

    Added ability to sync Namespaces during Collection syncs.
    [#735](https://github.com/pulp/pulp_ansible/issues/735)

-   Add a cross repository collection version index for fast searching and filtering.
    [#739](https://github.com/pulp/pulp_ansible/issues/739)

-   Added "total" count on "sync.parsing.metadata" progress report.
    [#1219](https://github.com/pulp/pulp_ansible/issues/1219)

-   Added Role Based Access Control.
    New default roles (creator, owner, viewer) have been added for `AnsibleRepository`, `AnsibleDistribution`,
    `CollectionRemote`, `RoleRemote`, and `GitRemote`.
    New detail role management endpoints (`my_permissions`, `list_roles`, `add_role`,
    `remove_role`) have been added to `AnsibleRepository`, `AnsibleDistribution`, `CollectionRemote`,
    `GitRemote`, and `RoleRemote`.
    [#1290](https://github.com/pulp/pulp_ansible/issues/1290)

-   Add CollectionVersionMark as a content
    [#1325](https://github.com/pulp/pulp_ansible/issues/1325)

-   Added `last_sync_task` field to `CollectionRemote` and `AnsibleRepository`.
    Added filtering by `url` in `CollectionRemote`.
    [#1344](https://github.com/pulp/pulp_ansible/issues/1344)

-   Created POST `{repo_href}/copy_collection_version/` and POST
    `{repo_href}/copy_collection_version/` API endpoints which
    allow for copying and moving collections between repos.
    [#1394](https://github.com/pulp/pulp_ansible/issues/1394)

#### Bugfixes

-   GitRemotes can now be attached to an AnsibleRepository.
    [#1140](https://github.com/pulp/pulp_ansible/issues/1140)
-   Fixed a 500 server error in the `repositories/ansible/ansible/{repository_pk}/versions/{number}/rebuild_metadata/` endpoint.
    [#1322](https://github.com/pulp/pulp_ansible/issues/1322)
-   Pinned the dependency upper bound on setuptools to <66.2.0. Newer versions introduce stricter
    PEP-440 parsing.
    [#1340](https://github.com/pulp/pulp_ansible/issues/1340)
-   Fixed duplicate operationIDs in Galaxy V1 & V2 API endpoint schemas.
    [#1356](https://github.com/pulp/pulp_ansible/issues/1356)
-   Fix exclude list when syncing from galaxy_ng.
    [#1381](https://github.com/pulp/pulp_ansible/issues/1381)
-   Fixed broken sync form servers without signatures or marks.
    [#1387](https://github.com/pulp/pulp_ansible/issues/1387)
-   Fix 404 on collection detail routing for collections with a name of "collections".
    [#1388](https://github.com/pulp/pulp_ansible/issues/1388)
-   Pre-release collection versions should only be higher than stable releases when none exist.
    [#1391](https://github.com/pulp/pulp_ansible/issues/1391)
-   Selectively delete indexes for content no longer in the repo.
    [#1396](https://github.com/pulp/pulp_ansible/issues/1396)

#### Improved Documentation

-   Fixed linebreak issues in remote workflow cli examples.
    [#1328](https://github.com/pulp/pulp_ansible/issues/1328)

#### Misc

-   [#1349](https://github.com/pulp/pulp_ansible/issues/1349)

---

## 0.16.7 (2025-03-12) {: #0.16.7 }

No significant changes.

---

## 0.16.6 (2025-01-16) {: #0.16.6 }

No significant changes.

---

## 0.16.5 (2024-10-31) {: #0.16.5 }

#### Bugfixes {: #0.16.5-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 0.16.4 (2024-09-25) {: #0.16.4 }

#### Bugfixes {: #0.16.4-bugfix }

- Pre-release collection versions should only be higher than stable releases when none exist.
  [#1391](https://github.com/pulp/pulp_ansible/issues/1391)
- Fixed a sporadic sync error when re-syncing a repository with new collection versions.
  [#1547](https://github.com/pulp/pulp_ansible/issues/1547)

---

## 0.16.3 (2024-05-15) {: #0.16.3 }

#### Bugfixes

-   Fixed import failing to associate signatures and marks with their collection version.
    [#1836](https://github.com/pulp/pulp_ansible/issues/1836)

---

## 0.16.2 (2023-12-14) {: #0.16.2 }

#### Bugfixes

-   Fix exclude list when syncing from galaxy_ng.
    [#1381](https://github.com/pulp/pulp_ansible/issues/1381)
-   Fix traceback when publishing a collection to the v2 API endpoint
    [#1441](https://github.com/pulp/pulp_ansible/issues/1441)

---

## 0.16.1 (2023-02-23) {: #0.16.1 }

#### Bugfixes

-   Removed unused dependency on packaging.
    [#1366](https://github.com/pulp/pulp_ansible/issues/1366)

#### Improved Documentation

-   Fixed linebreak issues in remote workflow cli examples.
    [#1328](https://github.com/pulp/pulp_ansible/issues/1328)

#### Misc

-   [#1349](https://github.com/pulp/pulp_ansible/issues/1349)

---

## 0.16.0 (2022-12-01) {: #0.16.0 }

#### Features

-   An existing artifact or upload object can now be used to create a Collection.
    [#1175](https://github.com/pulp/pulp_ansible/issues/1175)

#### Bugfixes

-   Properly return 400 error when trying to create/upload a duplicate Collection.
    [#1175](https://github.com/pulp/pulp_ansible/issues/1175)
-   Fixed unnecessary creation of intermediate repository versions when performing a collection delete.
    [#1274](https://github.com/pulp/pulp_ansible/issues/1274)
-   Limit search_vector to only tags for the collectionversion instead of all collectionversions.
    [#1278](https://github.com/pulp/pulp_ansible/issues/1278)

#### Deprecations and Removals

-   Renamed CollectionVersion upload fields [namespace, name, version] to [expected]()[namespace, name, version].

    Deprecated /ansible/collections/ upload endpoint. Use /pulp/api/v3/content/ansible/collection_versions/ instead.

    Deprecated Galaxy V2 Collection upload endpoint. Use Galaxy V3 Collection Artifact upload endpoint instead.
    [#1176](https://github.com/pulp/pulp_ansible/issues/1176)

#### Misc

-   [#1273](https://github.com/pulp/pulp_ansible/issues/1273)

---

## 0.15.6 (2024-10-31) {: #0.15.6 }

#### Bugfixes {: #0.15.6-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 0.15.5 (2024-05-15) {: #0.15.5 }

#### Bugfixes

-   Fixed import failing to associate signatures and marks with their collection version.
    [#1836](https://github.com/pulp/pulp_ansible/issues/1836)

---

## 0.15.4 (2023-12-14) {: #0.15.4 }

#### Bugfixes

-   Fix exclude list when syncing from galaxy_ng.
    [#1381](https://github.com/pulp/pulp_ansible/issues/1381)

---

## 0.15.3 (2023-02-23) {: #0.15.3 }

#### Bugfixes

-   Removed unused dependency on packaging.
    [#1366](https://github.com/pulp/pulp_ansible/issues/1366)

#### Misc

-   [#1349](https://github.com/pulp/pulp_ansible/issues/1349)

---

## 0.15.2 (2023-02-03) {: #0.15.2 }

#### Bugfixes

-   Pinned the dependency upper bound on setuptools to <66.2.0. Newer versions introduce stricter
    PEP-440 parsing.
    [#1340](https://github.com/pulp/pulp_ansible/issues/1340)

---

## 0.15.1 (2023-01-20) {: #0.15.1 }

#### Improved Documentation

-   Fixed linebreak issues in remote workflow cli examples.
    [#1328](https://github.com/pulp/pulp_ansible/issues/1328)

#### Misc

-   [#1273](https://github.com/pulp/pulp_ansible/issues/1273)

---

## 0.15.0 (2022-09-21) {: #0.15.0 }

#### Features

-   Implement v3/plugin/client-configuration/ endpoint to communicate to the ansible galaxy client
    which distribution to use.
    [#740](https://github.com/pulp/pulp_ansible/issues/740)
-   Added modelresources for Pulp import/export of collection version signatures.
    [#844](https://github.com/pulp/pulp_ansible/issues/844)
-   Added CollectionDownloadLog table and logger.
    [#946](https://github.com/pulp/pulp_ansible/issues/946)
-   Added `rebuild_metadata` endpoint to ansible repositories and repository versions.
    [#1106](https://github.com/pulp/pulp_ansible/issues/1106)

#### Bugfixes

-   Fixed bug where Git Remote failed to clone git submodules when syncing a collection from a git
    repository.
    [#1065](https://github.com/pulp/pulp_ansible/issues/1065)
-   Add a gpgkey field to the ansible repository to ease verification of collection signatures.
    [#1086](https://github.com/pulp/pulp_ansible/issues/1086)
-   Fixed a bug where updating a CollectionRemote did not reset all repositories sync timestamp.
    [#1177](https://github.com/pulp/pulp_ansible/issues/1177)
-   Update the jsonschema requirements to not conflict with ansible-lint. Currently ansible-lint requires at least 4.9, so match that.
    [#1202](https://github.com/pulp/pulp_ansible/issues/1202)
-   Switched the attribute token on CollectionRemotes to be encrypted in the database and not to
    be exposed in the API.
    [#1221](https://github.com/pulp/pulp_ansible/issues/1221)

#### Deprecations and Removals

-   Removed `keyring` attribute from repositories in favor of `gpgkey`.
    [#1086](https://github.com/pulp/pulp_ansible/issues/1086)

#### Misc

-   [#1230](https://github.com/pulp/pulp_ansible/issues/1230), [#1245](https://github.com/pulp/pulp_ansible/issues/1245)

---

## 0.14.2 (2022-09-15) {: #0.14.2 }

#### Bugfixes

-   Update the jsonschema requirements to not conflict with ansible-lint. Currently ansible-lint requires at least 4.9, so match that.
    [#1202](https://github.com/pulp/pulp_ansible/issues/1202)

---

## 0.14.1 (2022-09-09) {: #0.14.1 }

#### Misc

-   [#1230](https://github.com/pulp/pulp_ansible/issues/1230)

---

## 0.14.0 (2022-06-30) {: #0.14.0 }

#### Features

-   Enable support for the pulpcore setting `REDIRECT_TO_OBJECT_STORAGE=False`.
    [#943](https://github.com/pulp/pulp_ansible/issues/943)

#### Bugfixes

-   Fixed 500 error when accessing Galaxy APIs when distribution is not pointing to a repository.
    [#909](https://github.com/pulp/pulp_ansible/issues/909)
-   Allow deleting collection versions when another version of the collection satisfies requirements.
    [#933](https://github.com/pulp/pulp_ansible/issues/933)
-   Fixed generation of the redirect url to the object storage
    [#956](https://github.com/pulp/pulp_ansible/issues/956)
-   Fixed improper type `KeyringEnum` being generated in client bindings.
    [#973](https://github.com/pulp/pulp_ansible/issues/973)

#### Misc

-   [#1035](https://github.com/pulp/pulp_ansible/issues/1035)

---

## 0.13.6 (2023-02-03) {: #0.13.6 }

#### Bugfixes

-   Pinned the dependency upper bound on setuptools to <66.2.0. Newer versions introduce stricter
    PEP-440 parsing.
    [#1340](https://github.com/pulp/pulp_ansible/issues/1340)

#### Improved Documentation

-   Fixed linebreak issues in remote workflow cli examples.
    [#1328](https://github.com/pulp/pulp_ansible/issues/1328)

---

## 0.13.5 (2022-11-16) {: #0.13.5 }

#### Bugfixes

-   Switched the attribute token on CollectionRemotes not to be exposed in the API.
    [#1221](https://github.com/pulp/pulp_ansible/issues/1221)

#### Misc

-   [#1218](https://github.com/pulp/pulp_ansible/issues/1218)

---

## 0.13.4 (2022-08-23) {: #0.13.4 }

No significant changes.

---

## 0.13.3 (2022-08-22) {: #0.13.3 }

No significant changes.

---

## 0.13.2 (2022-06-17) {: #0.13.2 }

No significant changes.

---

## 0.13.1 (2022-06-15) {: #0.13.1 }

#### Bugfixes

-   Allow deleting collection versions when another version of the collection satisfies requirements.
    [#933](https://github.com/pulp/pulp_ansible/issues/933)
-   Fixed improper type `KeyringEnum` being generated in client bindings.
    [#973](https://github.com/pulp/pulp_ansible/issues/973)

---

## 0.13.0 (2022-04-11) {: #0.13.0 }

#### Features

-   Galaxy API Refactor stage 1

    Move the existing collection views under /plugin/ansible/.
    Redirects the legacy v3 endpoints to their counterparts in /plugin/ansible/.
    Adds a new configuration option ANSIBLE_DEFAULT_DISTRIBUTION_PATH that allows users to configure a default distribution base path for the API.
    Adds a new configuration option ANSIBLE_URL_NAMESPACE that allows django URL namespace to be set on reverse so that urls can be configured to point correctly to the galaxy APIs when pulp ansible is deployed as part of automation hub.
    Adds the get v3/artifacts/path/file API endpoint from galaxy_ng.
    Enable RedirectContentGuard.
    [#728](https://github.com/pulp/pulp_ansible/issues/728)

-   Added upload endpoint for `/content/ansible/collection_signatures/`
    [#837](https://github.com/pulp/pulp_ansible/issues/837)

-   Made certs dir configurable
    [#851](https://github.com/pulp/pulp_ansible/issues/851)

-   Add api endpoints to delete collections and collection versions.
    [#879](https://github.com/pulp/pulp_ansible/issues/879)

#### Bugfixes

-   Fixed `manifest` and `files` fields not being set when uploading a collection.
    [#840](https://github.com/pulp/pulp_ansible/issues/840)
-   Signatures are now properly generated from a collection's MANIFEST.json file.
    [#841](https://github.com/pulp/pulp_ansible/issues/841)
-   Fixed collection signature filtering by `signed_collection` and `signing_service`.
    [#860](https://github.com/pulp/pulp_ansible/issues/860)
-   Fix a bug where when a collection version is removed from a repository, it's associated signatures
    and deprecated content remains in the repository.
    [#889](https://github.com/pulp/pulp_ansible/issues/889)

---

## 0.12.1 (2022-04-11) {: #0.12.1 }

#### Bugfixes

-   Fixed `manifest` and `files` fields not being set when uploading a collection.
    [#840](https://github.com/pulp/pulp_ansible/issues/840)

---

## 0.12.0 (2022-02-02) {: #0.12.0 }

#### Features

-   Added Collection Signatures to the Galaxy V3 API to allow for syncing of signatures during a collection sync.
    [#748](https://github.com/pulp/pulp_ansible/issues/748)
-   Added `CollectionVersionSignature` content model to store signatures for Collections.
    [#757](https://github.com/pulp/pulp_ansible/issues/757)
-   Added API to serve Collection Signatures at `/pulp/api/v3/content/ansible/collection_signatures/`.
    [#758](https://github.com/pulp/pulp_ansible/issues/758)
-   Enabled Collection Remote to sync content that was initially synced using Git Remote.
    [#778](https://github.com/pulp/pulp_ansible/issues/778)

#### Bugfixes

-   Fixed the migrations 0035 and 0036 that handle the transition of deprecations to being repository
    content and used to fail on uniquenes constraints.
    [#791](https://github.com/pulp/pulp_ansible/issues/791)
-   Use proxy auth credentials of a Remote when syncing content
    [#801](https://github.com/pulp/pulp_ansible/issues/801)
-   Adds workaround to handle collections that do not have a `requires_ansible` in the
    `meta/runtime.yml` data. This can happen in collections from `galaxy.ansible.com`.
    [#806](https://github.com/pulp/pulp_ansible/issues/806)

#### Misc

-   [#813](https://github.com/pulp/pulp_ansible/issues/813)

---

## 0.11.1 (2021-12-20) {: #0.11.1 }

#### Misc

-   [#774](https://github.com/pulp/pulp_ansible/issues/774)

---

## 0.11.0 (2021-12-15) {: #0.11.0 }

#### Features

-   Added ability to sync only metadata from a Git remote. This is a tech preview feature. The
    functionality may change in the future.
    [#744](https://github.com/pulp/pulp_ansible/issues/744)
-   Syncing now excludes collection versions found at `/excludes/` endpoint of remote.
    [#750](https://github.com/pulp/pulp_ansible/issues/750)
-   Added a Git Remote that is used to sync content from Git repositories. This is a tech preview
    feature. The functionality may change in the future.
    [#751](https://github.com/pulp/pulp_ansible/issues/751)
-   Added ability to sync collections using GitRemote. This is a tech preview feature. The
    functionality may change in the future.
    [#752](https://github.com/pulp/pulp_ansible/issues/752)
-   Use `shared_resources` in tasks where appropriate.
    [#753](https://github.com/pulp/pulp_ansible/issues/753)

#### Bugfixes

-   Case-insensitive search for the `owner__username` and role `name` fields in the pulp_ansible role view (same as on galaxy.ansible.com).
    [#747](https://github.com/pulp/pulp_ansible/issues/747)

---

## 0.10.5 (2023-02-03) {: #0.10.5 }

#### Bugfixes

-   Pinned the dependency upper bound on setuptools to <66.2.0. Newer versions introduce stricter
    PEP-440 parsing.
    [#1340](https://github.com/pulp/pulp_ansible/issues/1340)

#### Improved Documentation

-   Fixed linebreak issues in remote workflow cli examples.
    [#1328](https://github.com/pulp/pulp_ansible/issues/1328)

---

## 0.10.4 (2022-11-17) {: #0.10.4 }

#### Bugfixes

-   Switched the attribute token on CollectionRemotes not to be exposed in the API.
    [#1221](https://github.com/pulp/pulp_ansible/issues/1221)

---

## 0.10.3 (2022-06-07) {: #0.10.3 }

#### Bugfixes

-   Syncing now excludes collection versions found at `/excludes/` endpoint of remote.
    [#960](https://github.com/pulp/pulp_ansible/issues/960)

---

## 0.10.2 (2022-01-31) {: #0.10.2 }

#### Bugfixes

-   Fixed the migrations 0035 and 0036 that handle the transition of deprecations to being repository
    content and used to fail on uniquenes constraints.
    [#791](https://github.com/pulp/pulp_ansible/issues/791)
-   Use proxy auth credentials of a Remote when syncing content
    [#801](https://github.com/pulp/pulp_ansible/issues/801)
-   Adds workaround to handle collections that do not have a `requires_ansible` in the
    `meta/runtime.yml` data. This can happen in collections from `galaxy.ansible.com`.
    [#806](https://github.com/pulp/pulp_ansible/issues/806)

---

## 0.10.1 (2021-10-05) {: #0.10.1 }

#### Bugfixes

-   Added a better error message when trying to sync a missing collection using V3 endpoints.
    [#9404](https://pulp.plan.io/issues/9404)
-   Ensure deprecation status is in sync with the remote
    [#9442](https://pulp.plan.io/issues/9442)
-   Fixed optimized mirror syncs erroneously removing all content in the repository.
    [#9476](https://pulp.plan.io/issues/9476)
-   Changed the use of `dispatch` to match the signature from pulpcore>=3.15.
    [#9483](https://pulp.plan.io/issues/9483)

#### Misc

-   [#9368](https://pulp.plan.io/issues/9368)

---

## 0.10.0 (2021-08-31) {: #0.10.0 }

#### Features

-   Made deprecation exportable/importable
    [#8205](https://pulp.plan.io/issues/8205)

#### Bugfixes

-   Fixed bug where sync tasks would open a lot of DB connections.
    [#9260](https://pulp.plan.io/issues/9260)

#### Deprecations and Removals

-   Turned collection deprecation status into a content.

    !!! warning
        Current deprecation history will be lost, only accounting for
        the latest repository version.

    [#8205](https://pulp.plan.io/issues/8205)

-   Dropped support for Python 3.6 and 3.7. pulp_ansible now supports Python 3.8+.
    [#9034](https://pulp.plan.io/issues/9034)

#### Misc

-   [#9119](https://pulp.plan.io/issues/9119)

---

## 0.9.2 (2021-10-04) {: #0.9.2 }

#### Bugfixes

-   Fixed optimized mirror syncs erroneously removing all content in the repository.
    (backported from #9476)
    [#9480](https://pulp.plan.io/issues/9480)

---

## 0.9.1 (2021-08-25) {: #0.9.1 }

#### Bugfixes

-   Improved performance on reporting progress on parsing collection metadata
    [#9137](https://pulp.plan.io/issues/9137)
-   Ensure galaxy-importer is used when uploading collections
    [#9220](https://pulp.plan.io/issues/9220)

#### Misc

-   [#9250](https://pulp.plan.io/issues/9250)

---

## 0.9.0 (2021-07-21) {: #0.9.0 }

#### Bugfixes

-   Renaming bindings to be compatible with pulpcore >= 3.14
    [#8971](https://pulp.plan.io/issues/8971)

#### Misc

-   [#8882](https://pulp.plan.io/issues/8882)

---

## 0.8.1 (2021-07-21) {: #0.8.1 }

#### Bugfixes

-   Fixed an error message which indicated that the remote url was invalid when in fact the requirements
    source url was invalid.
    [#8957](https://pulp.plan.io/issues/8957)
-   Use proxy auth credentials of a Remote when syncing content.
    [#9075](https://pulp.plan.io/issues/9075)

#### Misc

-   [#9006](https://pulp.plan.io/issues/9006)

---

## 0.8.0 (2021-06-01) {: #0.8.0 }

#### Features

-   Pulp Ansible can now sync collection dependencies by setting the `sync_dependencies` option for `CollectionRemote` objects.
    (By default set to true)
    [#7751](https://pulp.plan.io/issues/7751)
-   Enabled pulp_label support for AnsibleDistributions
    [#8441](https://pulp.plan.io/issues/8441)
-   Provide backend storage url to galaxy-importer on collection import.
    [#8486](https://pulp.plan.io/issues/8486)

#### Bugfixes

-   /collection_versions/all/ endpoint is now streamed to alleviate timeout issues
    [#8439](https://pulp.plan.io/issues/8439)
-   V3 sync now properly waits for async task completion
    [#8442](https://pulp.plan.io/issues/8442)
-   Remove scheme from apache snippet
    [#8572](https://pulp.plan.io/issues/8572)
-   Fix collections endpoint for collections named "api"
    [#8587](https://pulp.plan.io/issues/8587)
-   Fix requirements.yml parser for pinned collection version
    [#8627](https://pulp.plan.io/issues/8627)
-   Fixed dependency syncing slowing down from excessive task creation
    [#8639](https://pulp.plan.io/issues/8639)
-   Updated api lengths for collection version fields to match db model lengths.
    [#8649](https://pulp.plan.io/issues/8649)
-   Optimized unpaginated collection_versions endpoint
    [#8746](https://pulp.plan.io/issues/8746)

#### Improved Documentation

-   Fixed broken link on client bindings page
    [#8298](https://pulp.plan.io/issues/8298)

#### Misc

-   [#8589](https://pulp.plan.io/issues/8589)

---

## 0.7.6 (2022-06-07) {: #0.7.6 }

#### Bugfixes

-   Syncing now excludes collection versions found at `/excludes/` endpoint of remote.
    [#959](https://github.com/pulp/pulp_ansible/issues/959)
-   Fixed optimized mirror syncs erroneously removing all content in the repository.
    [#974](https://github.com/pulp/pulp_ansible/issues/974)

---

## 0.7.5 (2022-01-31) {: #0.7.5 }

#### Bugfixes

-   Use proxy auth credentials of a Remote when syncing content
    [#801](https://github.com/pulp/pulp_ansible/issues/801)
-   Adds workaround to handle collections that do not have a `requires_ansible` in the
    `meta/runtime.yml` data. This can happen in collections from `galaxy.ansible.com`.
    [#806](https://github.com/pulp/pulp_ansible/issues/806)

---

## 0.7.4 (2021-11-12) {: #0.7.4 }

#### Bugfixes

-   /collection_versions/all/ endpoint is now streamed to alleviate timeout issues
    Optimized unpaginated collection_versions endpoint
    (backported from #8439 and #8746) rochacbruno
    [#8923](https://pulp.plan.io/issues/8923)
-   Use proxy auth credentials of a Remote when syncing content. Warning: This is not a proper fix.
    The actual fix is shipped with 0.7.5.
    [#9391](https://pulp.plan.io/issues/9391)

#### Misc

-   [#8857](https://pulp.plan.io/issues/8857)

---

## 0.7.3 (2021-04-29) {: #0.7.3 }

#### Bugfixes

-   Fix requirements.yml parser for pinned collection version
    [#8647](https://pulp.plan.io/issues/8647)
-   V3 sync now properly waits for async task completion
    [#8664](https://pulp.plan.io/issues/8664)
-   Remove scheme from apache snippet
    [#8665](https://pulp.plan.io/issues/8665)
-   Fix collections endpoint for collections named "api"
    [#8666](https://pulp.plan.io/issues/8666)
-   Updated api lengths for collection version fields to match db model lengths.
    [#8667](https://pulp.plan.io/issues/8667)

---

## 0.7.2 (2021-04-09) {: #0.7.2 }

No significant changes.

---

## 0.7.1 (2021-03-04) {: #0.7.1 }

#### Bugfixes

-   Removing `manifest` and `files` from metadata endpoints.
    [#8264](https://pulp.plan.io/issues/8264)
-   Fix V3 collection list endpoint when repository is empty
    [#8276](https://pulp.plan.io/issues/8276)
-   Use DRF token when no `auth_url` is provided
    [#8290](https://pulp.plan.io/issues/8290)
-   Fixed bug where rate limit wasn't being honored.
    [#8300](https://pulp.plan.io/issues/8300)

---

## 0.7.0 (2021-02-11) {: #0.7.0 }

#### Features

-   Ansible export/import is now available as a tech preview feature
    [#6738](https://pulp.plan.io/issues/6738)
-   Expose MANIFEST.json and FILES.json at CollectionVersion endpoint
    [#7572](https://pulp.plan.io/issues/7572)
-   Introduce a new `v3/` endpoint returning publication time
    [#7939](https://pulp.plan.io/issues/7939)
-   Introduces a new `v3/collections/all/` endpoint returning all collections unpaginated.
    [#7940](https://pulp.plan.io/issues/7940)
-   Introduces a new `v3/collection_versions/all/` endpoint returning all collections versions
    unpaginated.
    [#7941](https://pulp.plan.io/issues/7941)
-   Improve sync performance with no-op when possible. To disable the no-op optimization use the
    `optimize=False` option on the `sync` call.
    [#7942](https://pulp.plan.io/issues/7942)
-   Adds the `requires_ansible` attribute to the Galaxy V3 CollectionVersion APIs.
    This documents the version of Ansible required to use the collection.
    [#7949](https://pulp.plan.io/issues/7949)
-   Field `updated_at` from Galaxy v3 Collections endpoint using latest instead of highest version
    [#8012](https://pulp.plan.io/issues/8012)
-   Efficient sync with unpaginated metadata endpoints if they are available.
    [#8177](https://pulp.plan.io/issues/8177)

#### Bugfixes

-   Make collection namespace max_length consistent in models
    [#8078](https://pulp.plan.io/issues/8078)

#### Improved Documentation

-   Move official docs site to <https://docs.pulpproject.org/pulp_ansible/>.
    [#7926](https://pulp.plan.io/issues/7926)
-   Updated Roles and Collections workflows to use Pulp-CLI commands
    [#8076](https://pulp.plan.io/issues/8076)

#### Misc

-   [#8216](https://pulp.plan.io/issues/8216)

---

## 0.6.2 (2021-03-03) {: #0.6.2 }

#### Bugfixes

-   Use DRF token when no `auth_url` is provided
    [#8290](https://pulp.plan.io/issues/8290)

---

## 0.6.1 (2021-01-15) {: #0.6.1 }

#### Bugfixes

-   Allow updating `auth_url` on CollectionRemote when `token` is already set
    [#7957](https://pulp.plan.io/issues/7957)
-   Fixed create_task calls for Python 3.6 in collections tasks
    [#8098](https://pulp.plan.io/issues/8098)

---

## 0.6.0 (2020-12-01) {: #0.6.0 }

#### Features

-   Enable filter by name/namespace on Collections V3 endpoint
    [#7873](https://pulp.plan.io/issues/7873)

#### Bugfixes

-   Allows a requirements.yml collection version specification to be respected during sync.
    [#7739](https://pulp.plan.io/issues/7739)
-   Allow requirements.yml with different sources to sync correctly.
    [#7741](https://pulp.plan.io/issues/7741)
-   Increased collection tag field length from 32 to 64, which allows sync to work for longer tag names
    used on galaxy.ansible.com.
    [#7827](https://pulp.plan.io/issues/7827)

#### Misc

-   [#7777](https://pulp.plan.io/issues/7777)

---

## 0.5.11 (2022-01-31) {: #0.5.11 }

#### Bugfixes

-   Use proxy auth credentials of a Remote when syncing content
    [#801](https://github.com/pulp/pulp_ansible/issues/801)

---

## 0.5.10 (2021-09-13) {: #0.5.10 }

#### Bugfixes

-   Use proxy auth credentials of a Remote when syncing content.
    [#9390](https://pulp.plan.io/issues/9390)

---

## 0.5.9 (2021-04-29) {: #0.5.9 }

#### Bugfixes

-   Remove scheme from apache snippet
    [#8661](https://pulp.plan.io/issues/8661)
-   Fix collections endpoint for collections named "api"
    [#8662](https://pulp.plan.io/issues/8662)
-   Updated api lengths for collection version fields to match db model lengths.
    [#8663](https://pulp.plan.io/issues/8663)

---

## 0.5.8 (2021-03-08) {: #0.5.8 }

#### Bugfixes

-   Allow updating `auth_url` on CollectionRemote when `token` is already set
    [#8362](https://pulp.plan.io/issues/8362)

---

## 0.5.7 (2021-03-03) {: #0.5.7 }

#### Bugfixes

-   Use DRF token when no `auth_url` is provided
    [#8290](https://pulp.plan.io/issues/8290)

---

## 0.5.6 (2021-01-12) {: #0.5.6 }

#### Bugfixes

-   Fixed v3 schema pagination to match OpenAPI standard
    [#8037](https://pulp.plan.io/issues/8037)
-   Fix collection version comparison on re-syncs
    [#8039](https://pulp.plan.io/issues/8039)
-   Enable proxy on token refresh requests
    [#8051](https://pulp.plan.io/issues/8051)

---

## 0.5.5 (2020-12-11) {: #0.5.5 }

#### Bugfixes

-   Field `updated_at` from Galaxy v3 Collections endpoint using highest version
    [#7990](https://pulp.plan.io/issues/7990)

---

## 0.5.4 (2020-12-04) {: #0.5.4 }

#### Bugfixes

-   Increase interval between requests when token is required
    [#7929](https://pulp.plan.io/issues/7929)

---

## 0.5.3 (2020-12-04) {: #0.5.3 }

#### Bugfixes

-   Avoid rate limiting by slowing down sync when token is required
    [#7917](https://pulp.plan.io/issues/7917)

---

## 0.5.2 (2020-11-19) {: #0.5.2 }

#### Bugfixes

-   Improve MANIFEST.json handling and provide better error message
    [#5745](https://pulp.plan.io/issues/5745)
-   Ensure that when creating a `CollectionRemote` you can use `token` without specifying `auth_url`
    [#7821](https://pulp.plan.io/issues/7821)
-   Fix version comparisons during sync and upload when comparing the same version with different build
    numbers.
    [#7826](https://pulp.plan.io/issues/7826)
-   Stop making requests to docs-blob endpoint on Galaxy v2
    [#7830](https://pulp.plan.io/issues/7830)
-   Avoid to download docs-blob when content is already saved
    [#7831](https://pulp.plan.io/issues/7831)
-   Ensure deprecation status is synced even when no content changes
    [#7834](https://pulp.plan.io/issues/7834)
-   Fix deprecation status update for pulp-ansible-client
    [#7871](https://pulp.plan.io/issues/7871)
-   Makes `url` optional when patching a collection remote
    [#7872](https://pulp.plan.io/issues/7872)

---

## 0.5.1 (2020-11-09) {: #0.5.1 }

#### Bugfixes

-   Token refresh happens when needed, not on every call.
    [#7643](https://pulp.plan.io/issues/7643)
-   Field `updated_at` from Galaxy v3 Collections endpoint using latest instead of highest version
    [#7775](https://pulp.plan.io/issues/7775)
-   Allow CollectionUploadViewSet subclass to set own serializer
    [#7788](https://pulp.plan.io/issues/7788)
-   Ensure that when creating a `CollectionRemote` with either a `token` or `auth_url` that you
    use both together.
    [#7802](https://pulp.plan.io/issues/7802)

---

## 0.5.0 (2020-10-29) {: #0.5.0 }

#### Features

-   Adds a new `/pulp/api/v3/ansible/copy/` endpoint allowing content to be copied from one
    `AnsibleRepository` version to a destination `AnsibleRepository`.
    [#7621](https://pulp.plan.io/issues/7621)

#### Bugfixes

-   Sync collection deprecation status
    [#7504](https://pulp.plan.io/issues/7504)
-   Supporting url formats that conform to ansible-galaxy cli (e.g. "<https://galaxy.ansible.com>" and
    "<https://galaxy.ansible.com/api>").
    [#7686](https://pulp.plan.io/issues/7686)
-   Fixed bug where only 10 collections were being synced in some cases
    [#7740](https://pulp.plan.io/issues/7740)
-   Fixed syncing with a default remote.
    [#7742](https://pulp.plan.io/issues/7742)
-   Increase the version size for `CollectionVersions`.
    [#7745](https://pulp.plan.io/issues/7745)
-   Fixed bug where we didn't properly handle trailing slashes.
    [#7767](https://pulp.plan.io/issues/7767)

#### Deprecations and Removals

-   Remove 'certification' flag from CollectionVersion
    [#6715](https://pulp.plan.io/issues/6715)
-   Derive ANSIBLE_CONTENT_HOSTNAME from CONTENT_ORIGIN
    [#7368](https://pulp.plan.io/issues/7368)
-   Removing deprecated field from Collection
    [#7504](https://pulp.plan.io/issues/7504)
-   Url formats must conform to ansible-galaxy cli format (e.g. "<https://galaxy.ansible.com>" and
    "<https://galaxy.ansible.com/api>"). This means we no longer support urls such as
    "<https://galaxy.ansible.com/api/v2/collections>" or
    "<https://galaxy.ansible.com/api/v2/collections/amazon/aws>".
    [#7686](https://pulp.plan.io/issues/7686)
-   Galaxy URLs now require trailing slashes per the ansible-galaxy docs. Made an exception for
    "<https://galaxy.ansible.com>" since the ansible-galaxy CLI code does as well.
    [#7767](https://pulp.plan.io/issues/7767)

---

## 0.4.3 (2020-11-04) {: #0.4.3 }

#### Features

-   Allow CollectionUploadViewSet subclass to set own serializer
    [#7788](https://pulp.plan.io/issues/7788)

---

## 0.4.2 (2020-10-09) {: #0.4.2 }

#### Bugfixes

-   Update Collection serializer to match Galaxy v2
    [#7647](https://pulp.plan.io/issues/7647)
-   Fix galaxy collection endpoint results for empty repos
    [#7669](https://pulp.plan.io/issues/7669)

---

## 0.4.1 (2020-09-30) {: #0.4.1 }

#### Bugfixes

-   Fixing docs-blob file parser
    [#7551](https://pulp.plan.io/issues/7551)
-   Sync CollectionVersion metadata
    [#7632](https://pulp.plan.io/issues/7632)

---

## 0.4.0 (2020-09-23) {: #0.4.0 }

#### Bugfixes

-   List highest versions per repository
    [#7428](https://pulp.plan.io/issues/7428)
-   Fix skipped collections at requirements.yml
    [#7512](https://pulp.plan.io/issues/7512)

---

## 0.3.0 (2020-09-09) {: #0.3.0 }

#### Features

-   Add endpoint to show docs_blob for a CollectionVersion
    [#7397](https://pulp.plan.io/issues/7397)
-   Allow the requirements file field on remotes to be of longer length.
    [#7434](https://pulp.plan.io/issues/7434)
-   Sync docs_blob information for collection versions
    [#7439](https://pulp.plan.io/issues/7439)

#### Bugfixes

-   Replace URLField with CharField
    [#7353](https://pulp.plan.io/issues/7353)
-   Pagination query params according to API versions.
    v1 and v2 - page and page_size
    v3 or above - offset and limit
    [#7396](https://pulp.plan.io/issues/7396)
-   Build collections URL according to requirements.yml
    [#7412](https://pulp.plan.io/issues/7412)

#### Deprecations and Removals

-   Changed V3 pagination to match Galaxy V3 API pagination
    [#7435](https://pulp.plan.io/issues/7435)

#### Misc

-   [#7453](https://pulp.plan.io/issues/7453)

---

## 0.2.0 (2020-08-17) {: #0.2.0 }

#### Features

-   Allow a Remote to be associated with a Repository and automatically use it when syncing the
    Repository.
    [#7194](https://pulp.plan.io/issues/7194)

#### Deprecations and Removals

-   Moved the role remote path from `/pulp/api/v3/remotes/ansible/ansible/` to
    `/pulp/api/v3/remotes/ansible/role/` to be consistent with
    `/pulp/api/v3/remotes/ansible/collection/`.
    [#7305](https://pulp.plan.io/issues/7305)

#### Misc

-   [#6718](https://pulp.plan.io/issues/6718)

---

## 0.2.0b15 (2020-07-14)

#### Features

-   Enable token authentication for syncing Collections.
    Added auth_url and token [fields](https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#configuring-the-ansible-galaxy-client) to CollectionRemote
    [#6540](https://pulp.plan.io/issues/6540)

---

## 0.2.0b14 (2020-06-19)

#### Bugfixes

-   Make default page size equals to 100
    [#5494](https://pulp.plan.io/issues/5494)
-   Including requirements.txt on MANIFEST.in
    [#6889](https://pulp.plan.io/issues/6889)

#### Misc

-   [#6772](https://pulp.plan.io/issues/6772)

---

## 0.2.0b13 (2020-05-28)

#### Features

-   Increased max length for documentation, homepage, issues, repository in CollectionVersion
    [#6648](https://pulp.plan.io/issues/6648)

#### Bugfixes

-   Galaxy V3 download_url now uses fully qualified URL
    [#6510](https://pulp.plan.io/issues/6510)
-   Include readable error messages on user facing logger
    [#6657](https://pulp.plan.io/issues/6657)
-   Fix filename generation for ansible collection artifacts.
    [#6855](https://pulp.plan.io/issues/6855)

#### Improved Documentation

-   Updated the required roles names
    [#6760](https://pulp.plan.io/issues/6760)

#### Misc

-   [#6673](https://pulp.plan.io/issues/6673), [#6848](https://pulp.plan.io/issues/6848), [#6850](https://pulp.plan.io/issues/6850)

---

## 0.2.0b12 (2020-04-30)

#### Improved Documentation

-   Documented bindings installation on dev environment
    [#6390](https://pulp.plan.io/issues/6390)

#### Misc

-   [#6391](https://pulp.plan.io/issues/6391)

---

## 0.2.0b11 (2020-03-13)

#### Features

-   Add support for syncing collections from Automation Hub's v3 api.
    [#6132](https://pulp.plan.io/issues/6132)

#### Bugfixes

-   Including file type extension when uploading collections.
    This comes with a data migration that will fix incorrect fields for already uploaded collections.
    [#6223](https://pulp.plan.io/issues/6223)

#### Improved Documentation

-   Added docs on how to use the new scale testing tools.
    [#6272](https://pulp.plan.io/issues/6272)

#### Misc

-   [#6155](https://pulp.plan.io/issues/6155), [#6223](https://pulp.plan.io/issues/6223), [#6272](https://pulp.plan.io/issues/6272), [#6300](https://pulp.plan.io/issues/6300)

---

## 0.2.0b10 (2020-02-29)

#### Bugfixes

-   Includes webserver snippets in the packaged version also.
    [#6248](https://pulp.plan.io/issues/6248)

#### Misc

-   [#6250](https://pulp.plan.io/issues/6250)

---

## 0.2.0b9 (2020-02-28)

#### Bugfixes

-   Fix 404 error with ansible-galaxy 2.10.0 while staying compatible with 2.9.z CLI clients also.
    [#6239](https://pulp.plan.io/issues/6239)

#### Misc

-   [#6188](https://pulp.plan.io/issues/6188)

---

## 0.2.0b8 (2020-02-02)

#### Bugfixes

-   Fixed `ansible-galaxy publish` command which was failing with a 400 error.
    [#5905](https://pulp.plan.io/issues/5905)
-   Fixes `ansible-galaxy role install` when installing from Pulp.
    [#5929](https://pulp.plan.io/issues/5929)

#### Improved Documentation

-   Heavy overhaul of workflow docs to be two long pages that are focused on the `ansible-galaxy` cli.
    [#4889](https://pulp.plan.io/issues/4889)

#### Misc

-   [#5867](https://pulp.plan.io/issues/5867), [#5929](https://pulp.plan.io/issues/5929), [#5930](https://pulp.plan.io/issues/5930), [#5931](https://pulp.plan.io/issues/5931)

---

## 0.2.0b7 (2019-12-16)

#### Features

-   Add "modify" endpoint as `/pulp/api/v3/repositories/ansible/ansible/<uuid>/modify/`.
    [#5783](https://pulp.plan.io/issues/5783)

#### Improved Documentation

-   Adds copyright notice to source.
    [#4592](https://pulp.plan.io/issues/4592)

#### Misc

-   [#5693](https://pulp.plan.io/issues/5693), [#5701](https://pulp.plan.io/issues/5701), [#5757](https://pulp.plan.io/issues/5757)

---

## 0.2.0b6 (2019-11-20)

#### Features

-   Add Ansible Collection endpoint.
    [#5520](https://pulp.plan.io/issues/5520)
-   Added since filter for CollectionImport messsages.
    [#5522](https://pulp.plan.io/issues/5522)
-   Add a tags filter by which to filter collection versions.
    [#5571](https://pulp.plan.io/issues/5571)
-   Allow users to update deprecated for collections endpoint.
    [#5577](https://pulp.plan.io/issues/5577)
-   Add the ability to set a certification status for a collection version.
    [#5579](https://pulp.plan.io/issues/5579)
-   Add sorting parameters to the collection versions endpoint.
    [#5621](https://pulp.plan.io/issues/5621)
-   Expose the deprecated field on collection versions and added a deprecated filter.
    [#5645](https://pulp.plan.io/issues/5645)
-   Added filters to v3 collection version endpoint
    [#5670](https://pulp.plan.io/issues/5670)

#### Bugfixes

-   Reverting back to the older upload serializers.
    [#5555](https://pulp.plan.io/issues/5555)
-   Fix bug where CollectionImport was not being created in viewset causing 404s for galaxy.
    [#5569](https://pulp.plan.io/issues/5569)
-   Fixed an old call to _id in a collection task.
    [#5572](https://pulp.plan.io/issues/5572)
-   Fix 500 error for /pulp/api/v3/ page and drf_yasg error on api docs.
    [#5748](https://pulp.plan.io/issues/5748)

#### Deprecations and Removals

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)

-   Remove "_" from _versions_href, _latest_version_href
    [#5548](https://pulp.plan.io/issues/5548)

-   Removing base field: _type .
    [#5550](https://pulp.plan.io/issues/5550)

-   Change is_certified to certification enum on CollectionVersion.
    [#5579](https://pulp.plan.io/issues/5579)

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting Ansible repositories is now performed on /pulp/api/v3/ansible/ansible/ instead of /pulp/api/v3/repositories/. Only Ansible content can be present in a Ansible repository, and only a Ansible repository can hold Ansible content.
    [#5625](https://pulp.plan.io/issues/5625)

-   Removing unnecessary DELETE action for set_certified method.
    [#5711](https://pulp.plan.io/issues/5711)

#### Misc

-   [#4554](https://pulp.plan.io/issues/4554), [#5580](https://pulp.plan.io/issues/5580), [#5629](https://pulp.plan.io/issues/5629)

---

## 0.2.0b5 (2019-10-01)

#### Misc

-   [#5462](https://pulp.plan.io/issues/5462), [#5468](https://pulp.plan.io/issues/5468)

---

## 0.2.0b3 (2019-09-18)

#### Features

-   Setting code on ProgressBar.
    [#5184](https://pulp.plan.io/issues/5184)
-   Add galaxy-importer into import_collection to parse and validate collection.
    [#5239](https://pulp.plan.io/issues/5239)
-   Add Collection upload endpoint to Galaxy V3 API.
    [#5243](https://pulp.plan.io/issues/5243)
-   Introduces the GALAXY_API_ROOT setting that lets you re-root the Galaxy API.
    [#5244](https://pulp.plan.io/issues/5244)
-   Add [requirements.yaml](https://docs.ansible.com/ansible/devel/dev_guide/collections_tech_preview.html#install-multiple-collections-with-a-requirements-file) specification support to collection sync.
    [#5250](https://pulp.plan.io/issues/5250)
-   Adding is_highest filter for Collection Version.
    [#5278](https://pulp.plan.io/issues/5278)
-   Add certified collections status support.
    [#5287](https://pulp.plan.io/issues/5287)
-   Support pulp-to-pulp syncing of collections by expanding galaxy API views/serializers
    [#5288](https://pulp.plan.io/issues/5288)
-   Add model for tracking collection import status.
    [#5300](https://pulp.plan.io/issues/5300)
-   Add collection imports endpoints.
    [#5301](https://pulp.plan.io/issues/5301)
-   Uploaded collections through the Galaxy V2 and V3 APIs now auto-create a RepositoryVersion for the
    Repository associated with the AnsibleDistribution.
    [#5334](https://pulp.plan.io/issues/5334)
-   Added support for ansible-galaxy collections command and removed mazer.
    [#5335](https://pulp.plan.io/issues/5335)
-   CollectionImport object is created on collection upload.
    [#5358](https://pulp.plan.io/issues/5358)
-   Adds id field to collection version items returned by API.
    [#5365](https://pulp.plan.io/issues/5365)
-   The Galaxy V3 artifacts/collections/ API now logs correctly during the import process.
    [#5366](https://pulp.plan.io/issues/5366)
-   Write galaxy-importer result of contents and docs_blob into CollectionVersion model
    [#5368](https://pulp.plan.io/issues/5368)
-   The Galaxy v3 API validates the tarball's binary data before import using the optional arguments
    expected_namespace, expected_name, and expected_version.
    [#5422](https://pulp.plan.io/issues/5422)
-   Settings `ANSIBLE_API_HOSTNAME` and `ANSIBLE_CONTENT_HOSTNAME` now have defaults that use your
    FQDN, which works with [the installer](https://github.com/pulp/ansible-pulp) defaults.
    [#5466](https://pulp.plan.io/issues/5466)

#### Bugfixes

-   Treating how JSONFields will be handled by OpenAPI.
    [#5299](https://pulp.plan.io/issues/5299)
-   Galaxy API v3 collection upload returns valid imports URL.
    [#5357](https://pulp.plan.io/issues/5357)
-   Fix CollectionVersion view imcompatibilty with ansible-galaxy.
    Fixes ansible issue <https://github.com/ansible/ansible/issues/62076>
    [#5459](https://pulp.plan.io/issues/5459)

#### Improved Documentation

-   Added documentation on all settings.
    [#5244](https://pulp.plan.io/issues/5244)

#### Deprecations and Removals

-   Removing latest filter Collection Version.
    [#5227](https://pulp.plan.io/issues/5227)
-   Removed support for mazer cli.
    [#5335](https://pulp.plan.io/issues/5335)
-   Renamed _artifact on content creation to artifact.
    [#5428](https://pulp.plan.io/issues/5428)

#### Misc

-   [#4681](https://pulp.plan.io/issues/4681), [#5236](https://pulp.plan.io/issues/5236), [#5262](https://pulp.plan.io/issues/5262), [#5332](https://pulp.plan.io/issues/5332), [#5333](https://pulp.plan.io/issues/5333)

---

## 0.2.0b2 (2019-08-12)

#### Features

-   Fulltext Collection search is available with the `q` filter argument. A migration creates
    databases indexes to speed up the search.
    [#5075](https://pulp.plan.io/issues/5075)
-   Sync all collections (a full mirror) from Galaxy.
    [#5165](https://pulp.plan.io/issues/5165)
-   Mirror ansible collection
    [#5167](https://pulp.plan.io/issues/5167)
-   Added new fields to CollectionVersion and extended the CollectionVersion upload and sync to populate
    the data correctly. The serializer displays the new fields. The 'tags' field in serializer also has
    its own viewset for filtering on Tag objects system-wide.
    [#5198](https://pulp.plan.io/issues/5198)
-   Custom error handling and pagination for Galaxy API v3 is available.
    [#5224](https://pulp.plan.io/issues/5224)
-   Implements Galaxy API v3 collections and collection versions endpoints
    [#5225](https://pulp.plan.io/issues/5225)

#### Bugfixes

-   Validating collection remote URL
    [#4996](https://pulp.plan.io/issues/4996)
-   Validates artifact creation when uploading a collection
    [#5209](https://pulp.plan.io/issues/5209)
-   Fixes exception when generating initial full text search index on more than one collection.
    [#5226](https://pulp.plan.io/issues/5226)

#### Deprecations and Removals

-   Removing whitelist field from CollectionRemote.
    [#5165](https://pulp.plan.io/issues/5165)

#### Misc

-   [#4970](https://pulp.plan.io/issues/4970), [#5106](https://pulp.plan.io/issues/5106), [#5223](https://pulp.plan.io/issues/5223)

---

## 0.2.0b1 (2019-07-12)

#### Features

-   Adds Artifact sha details to the Collection list and detail APIs.
    [#4827](https://pulp.plan.io/issues/4827)
-   Collection sync now provides basic progress reporting.
    [#5023](https://pulp.plan.io/issues/5023)
-   A new Collection uploader has been added to the pulp_ansible API at
    `/pulp/api/v3/ansible/collections/`.
    [#5050](https://pulp.plan.io/issues/5050)
-   Collection filtering now supports the 'latest' boolean. When True, only the most recent version of
    each `namespace` and `name` combination is included in filter results.
    [#5076](https://pulp.plan.io/issues/5076)

#### Bugfixes

-   Collection sync now creates a new RepositoryVersion even if no new Collection content was added.
    [#4920](https://pulp.plan.io/issues/4920)
-   Content present in a second sync now associates correctly with the newly created Repository Version.
    [#4997](https://pulp.plan.io/issues/4997)
-   Collection sync no longer logs errors about a missing directory named 'ansible_collections'
    [#4999](https://pulp.plan.io/issues/4999)

#### Improved Documentation

-   Switch to using [towncrier](https://github.com/hawkowl/towncrier) for better release notes.
    [#4875](https://pulp.plan.io/issues/4875)
-   Add documentation on Collection upload workflows.
    [#4939](https://pulp.plan.io/issues/4939)
-   Update the REST API docs to the latest by updating the committed openAPI schema.
    [#5001](https://pulp.plan.io/issues/5001)
`````

## File: pulp-docs/pulp_ansible/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_ansible' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_ansible/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_ansible/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_ansible/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_ansible/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_container/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_container/docs/admin/guides/build-image.md
`````markdown
# Build Images

!!! warning

    All container build APIs are in tech preview. Backwards compatibility when upgrading is not
    guaranteed.

Users can add new images to a container repository by uploading a Containerfile. The syntax for
Containerfile is the same as for a Dockerfile.

To pass arbitrary files or artifacts to the image building context, the `build_context` property (a reference to a file repository) can be provided in the request payload.
These files can be referenced in Containerfile by passing their `relative-path`:
```
ADD/COPY <file relative-path> <location in container>
```

It is possible to define the Containerfile in two ways:

 * from a [local file](site:pulp_container/docs/admin/guides/build-image#build-from-a-containerfile-uploaded-during-build-request) and pass it during build request
 * from an [existing file](site:pulp_container/docs/admin/guides/build-image#upload-the-containerfile-as-a-file-content) in the `build_context`

## Create a Container Repository

```bash
CONTAINER_REPO=$(pulp container repository create --name building | jq -r '.pulp_href')
```

## Create a File Repository and populate it

```bash
FILE_REPO=$(pulp file repository create --name bar --autopublish | jq -r '.pulp_href')

echo 'Hello world!' > example.txt

pulp file content upload --relative-path foo/bar/example.txt \
--file ./example.txt --repository bar
```

## Create a Containerfile

```bash
echo 'FROM centos:7

# Copy a file using COPY statement. Use the path specified in the '--relative-path' parameter.
COPY foo/bar/example.txt /inside-image.txt

# Print the content of the file when the container starts
CMD ["cat", "/inside-image.txt"]' >> Containerfile
```


## Build from a Containerfile uploaded during build request

```bash
TASK_HREF=$(http --form POST ${BASE_ADDR}${CONTAINER_REPO}'build_image/' "containerfile@./Containerfile" \
build_context=${FILE_REPO}versions/1/ | jq -r '.task')
```

## Upload the Containerfile to a File Repository and use it to build

### Upload the Containerfile as a File Content

```bash
pulp file content upload --relative-path MyContainerfile --file ./Containerfile --repository bar
```

### Build an OCI image from a Containerfile present in build_context

```bash
TASK_HREF=$(http --form POST ${BASE_ADDR}${CONTAINER_REPO}'build_image/' containerfile_name=MyContainerfile \
build_context=${FILE_REPO}versions/2/ | jq -r '.task')
```


!!! warning

    File repositories synced with the on-demand policy will not automatically download the missing artifacts.
    Trying to build an image using a file that has not yet been downloaded will fail.
`````

## File: pulp-docs/pulp_container/docs/admin/guides/change-allowed-artifacts.md
`````markdown
# OCI Artifacts Support

Pulp is not only a container registry, it also supports OCI artifacts by leveraging the config
property on the image manifest.
Here are some examples of compliant OCI artifacts supported by `pulp_container` plugin:

 * [OCI images](site:pulp_container/docs/user/guides/manage-image)
 * [Helm](site:pulp_container/docs/user/guides/manage-helm-chart)
 * [Flatpak images](site:pulp_container/docs/user/guides/manage-flatpak)
 * [Cosign, SBOMs, attestations](site:pulp_container/docs/user/guides/manage-cosign-signature)
 * Source containers
 * Singularity
 * Conftest policies
 * WASM
`````

## File: pulp-docs/pulp_container/docs/admin/guides/customize-access-policy.md
`````markdown
# Customize Access Policies

The plugin is shipped with default access policies that can be modified to achieve different RBAC
behaviour. Administrators can update creation hooks accordingly:

```bash
pulp access-policy update --viewset-name "repositories/container/container" --creation-hooks '[{"function": "add_roles_for_object_creator", "parameters": {"roles": "container.containerrepository_syncer"}}]'
```

!!! note

    Access polices can be reset to their defaults using the `pulp access-policy reset` command.

!!! note

    Customizing the access policy will cause any future changes to the default policies, like
    statement changes and bug fixes, to be ignored unless reset to the default policy.

Visit [Role-based Access Control](site:pulp_container/docs/admin/learn/rbac) to learn more about
access policies.
`````

## File: pulp-docs/pulp_container/docs/admin/guides/customize-roles.md
`````markdown
# Customize Roles

In Pulp, administrators are allowed to create or update roles. To create a role with permissions
required only for syncing content, one can do the following:

```bash
pulp role create --name "container.containerrepository_syncer" \
    --permission "container.view_containerrepository" \
    --permission "container.view_containerremote" \
    --permission "container.change_containerrepository" \
    --permission "container.modify_content_containerrepository" \
    --permission "container.sync_containerrepository"

pulp user role-assignment add --username "alice" --role "container.containerrepository_syncer" --object ""
```

Visit [Role-based Access Control](site:pulp_container/docs/admin/learn/rbac) to learn more about roles.
`````

## File: pulp-docs/pulp_container/docs/admin/guides/import-export.md
`````markdown
# Export and Import Images

When maintaining an **air-gapped** environment, one can benefit from using the import/export
machinery. A common workflow usually resembles the following steps:

1. **An administrator exports Pulp's content on a system with the internet connectivity.** The
   system runs a Pulp instance that syncs content from remote repositories.
2. **The exported content (tarball) is moved to another (air-gapped) system.** The transfer can
   be made through the intranet or via an external hard drive.
3. **The administrator imports the exported content by initiating an import task.** The
   procedure takes care of importing the content to another Pulp instance running in the air-gapped
   environment.

## Exporting a Repository

To export a repository, run the following set of commands:

```bash
podman pull ghcr.io/pulp/test-fixture-1:manifest_a

# push a tagged image to the registry
podman login ${REGISTRY_ADDR} -u admin -p password --tls-verify=false
podman tag ghcr.io/pulp/test-fixture-1:manifest_a \
  ${REGISTRY_ADDR}/test/fixture:manifest_a
podman push ${REGISTRY_ADDR}/test/fixture:manifest_a --tls-verify=false

# a repository of the push type is automatically created
REPOSITORY_HREF=$(pulp container repository -t push show \
  --name "test/fixture" | jq -r ".pulp_href")

# export the repository to the directory '/tmp/exports/test-fixture'
EXPORTER_HREF=$(http ${BASE_ADDR}/pulp/api/v3/exporters/core/pulp/ \
  name=both repositories:="[\"${REPOSITORY_HREF}\"]" \
  path=/tmp/exports/test-fixture | jq -r ".pulp_href")
```

If the exported content is no longer needed to be managed on the system, delete it:

```bash
pulp container distribution destroy --name "test/fixture"
pulp orphan cleanup --protection-time 0
```

## Importing the Repository

Import the exported content by running the next commands and monitor the task:

```bash
http ${BASE_ADDR}/pulp/api/v3/repositories/container/container/ \
  name="test/fixture" | jq -r ".pulp_href"

# import the exported repository stored in '/tmp/exports/test-fixture'
IMPORTER_HREF=$(http ${BASE_ADDR}/pulp/api/v3/importers/core/pulp/ \
  name="test/fixture" | jq -r ".pulp_href")
EXPORTED_REPO_PATH=$(find "/tmp/exports/test-fixture" -type f -name \
  "*.tar.gz" | head -n 1)
GROUP_HREF=$(http ${BASE_ADDR}${IMPORTER_HREF}imports/ \
  path=${EXPORTED_REPO_PATH} | jq -r ".task_group")
```

!!! note

    Pass `create_repositories=True` to the `http POST ${BASE_ADDR}${IMPORTER_HREF}imports/`
    request to tell Pulp to create missing repositories during the import procedure on the fly.
    Otherwise, the repositories need to be created ahead of the import.


!!! warning

    Repositories of the push type are automatically converted to sync repositories at import time.
`````

## File: pulp-docs/pulp_container/docs/admin/guides/migrate-permissions.md
`````markdown
# Migrate from Permissions to Roles

As of release 2.11.0, the plugin started to support roles instead of separate groups and
permissions. Default permission classes provided by Pulp are **automatically** migrated when
upgrading from older releases. But, custom permissions created before release 2.11.0 require
additional **post-upgrade steps** to preserve the initial behaviour.

Usually, administrators define permissions for two types of operations:

1. **pull** - Pulling content from all or a number of specific repositories
2. **push** - Pushing content to all or concrete repositories

During the upgrade, the custom permissions need to be manually revised and assigned. To do so, one
can proceed as follows:

1. Make all repositories private:

```bash
for name in $(pulp container distribution list | jq -re '.[].name')
do
    pulp container distribution update --name $name --private
done
```

2. Start assigning Pulp-provided/adjusted roles to a particular user. For instance, use the role
   `container.containerdistribution_consumer` to enable user `alice` to consume content from
   distributions `dist1`, `dist2`, `dist3`:

```bash
for distribution in "dist1" "dist2" "dist3"
do
    DISTRIBUTION_HREF=$(pulp container distribution show --name $distribution | jq -r ".pulp_href")
    pulp user role-assignment add --username "alice" --role "container.containerdistribution_consumer" --object $DISTRIBUTION_HREF
done
```

Similarly, execute an adjusted script for other repository objects that were asserted under
the permissions' scope.

!!! note

    As of release 2.13.0, administrators should use the `pulpcore-manager dump-permissions`
    command to list deprecated permissions not yet translated into roles.
`````

## File: pulp-docs/pulp_container/docs/admin/guides/pull-through-caching.md
`````markdown
# Configure Pull-Through Caching

!!! warning

    This feature is provided as a tech preview and could change in backwards incompatible
    ways in the future.

The Pull-Through Caching feature offers an alternative way to host content by leveraging a **remote
registry** as the source of truth. This eliminates the need for in-advance repository
synchronization because Pulp acts as a **caching proxy** and stores images, after they have been
pulled by an end client, in a local repository.

## Configuring the caching:

```
# initialize a pull-through remote (the concept of upstream-name is not applicable here)
REMOTE_HREF=$(http ${BASE_ADDR}/pulp/api/v3/remotes/container/pull-through/ name=docker-cache url=https://registry-1.docker.io | jq -r ".pulp_href")

# create a pull-through distribution linked to the initialized remote
http ${BASE_ADDR}/pulp/api/v3/distributions/container/pull-through/ remote=${REMOTE_HREF} name=docker-cache base_path=docker-cache
```

Pulling content:

```
podman pull localhost:24817/docker-cache/library/busybox
```

In the example above, the image "busybox" is pulled from *DockerHub* through the "docker-cache"
distribution, acting as a transparent caching layer.

By incorporating the Pull-Through Caching feature into standard workflows, users **do not need** to
pre-configure a new repository and sync it to facilitate the retrieval of the actual content. This
speeds up the whole process of shipping containers from its early management stages to distribution.
Similarly to on-demand syncing, the feature also **reduces external network dependencies**, and
ensures a more reliable container deployment system in production environments.

!!! note

    During the pull-through operation, Pulp creates a local repository that maintains a single
    version for pulled images. For instance, when pulling an image like "debian:10," a local
    repository named "debian" with the tag "10" is created. Subsequent pulls, such as "debian:11,"
    generate a new repository version that incorporates both the "10" and "11" tags, automatically
    removing the previous version. Repositories and their content remain manageable through standard
    Pulp API endpoints. The repositories are read-only and public by default.


### Filtering the repositories

It is possible to use the includes/excludes fields to set a list of upstream repositories that Pulp
will be able to pull from.

```
# define a pull-through remote with the includes/excludes fields
REMOTE_HREF=$(http ${BASE_ADDR}/pulp/api/v3/remotes/container/pull-through/ name=docker-cache url=https://registry-1.docker.io includes=["*pulp*"] excludes=["*molecule_debian*"] | jq -r ".pulp_href")

# create a pull-through distribution linked to the initialized remote
http ${BASE_ADDR}/pulp/api/v3/distributions/container/pull-through/ remote=${REMOTE_HREF} name=docker-cache base_path=docker-cache
```

Pulling allowed content:

```
podman pull localhost:24817/docker-cache/pulp/test-fixture-1:manifest_a
```

Pulling from a repository that includes *molecule_debian* in its name will fail because it is filtered by the *excludes* definition:
```
podman pull localhost:24817/docker-cache/pulp/molecule_debian11
Error response from daemon: repository localhost:24817/docker-cache/pulp/molecule_debian11 not found: name unknown: Repository not found.
```

Since only repositories with *pulp* in their names are included (`includes=["*pulp*"]`), the following image pull will also fail:

```
podman pull localhost:24817/docker-cache/library/hello-world
Error response from daemon: repository localhost:24817/docker-cache/library/hello-world not found: name unknown: Repository not found.
```
`````

## File: pulp-docs/pulp_container/docs/admin/guides/sign-image.md
`````markdown
# Sign Images

Administrators can add a container manifest signing service to The Pulp Registry using the command
line tools. Users may then associate the signing service with container repositories.
The example below demonstrates how a manifest signing service can be created using `gpg`:

1. Make sure the service user `pulp` has access to `gpg` and that the key pair is
   installed in its key rings. The private key might alternatively be provided by a
   hardware cryptographic device.

2. Create a signing script that accepts a manifest path as the only argument. The script invokes
   `skopeo standalone-sign` command that generates an atomic container signature for the image
   manifest, using the key specified via the `PULP_SIGNING_KEY_FINGERPRINT` environment variable.
   The script should then print out a JSON structure with the following format. The path of the
   created signature is a relative path inside the current working directory:

    ```
    {"signature_path": "signature"}
    ```

    Below is a snippet of the signing script to be used for signing content:

    ```bash
    #!/usr/bin/env bash

    MANIFEST_PATH=$1
    FINGEPRINT="$PULP_SIGNING_KEY_FINGERPRINT"
    IMAGE_REFERENCE="$REFERENCE"
    SIGNATURE_PATH="$SIG_PATH"

    # Create atomic container signature
    skopeo standalone-sign $MANIFEST_PATH $IMAGE_REFERENCE $FINGEPRINT --output $SIGNATURE_PATH
    # Check the exit status
    STATUS=$?
    if [ $STATUS -eq 0 ]; then
      echo {\"signature_path\": \"$SIGNATURE_PATH\"}
    else
      exit $STATUS
    fi
    ```

    !!! note

        Make sure the script contains a proper shebang and Pulp has got valid permissions
        to execute it.
        Since the script invokes a `skopeo` command, it should be installed as well.
        Environment variables passed to the script cannot be changed since these are the
        variables expected by the signing facility.
   

    !!! note

        If the GPG key is password protected the password must be stored in a text file and
        the path passed to skopeo `--passphrase-file` argument.
   

3. Create a signing service consisting of an absolute path to the script and a meaningful
   name describing the script's purpose. It is possible to create a signing service by using the
   `pulpcore-manager add-signing-service` command:

    ```
    $ pulpcore-manager add-signing-service signing-service-test /var/lib/pulp/scripts/bash-script.sh 45ACE14E3EBB9BBA --class container:ManifestSigningService
    ```

    !!! note

        While creating a signing service, the container model `ManifestSigningService`
        runs additional checks in order to prevent saving invalid scripts to the database.
        This feature enables administrators to validate their signing scripts in advance.
   

4. Retrieve and check the saved signing service via REST API:

    ```
    $ http GET https://pulp.example.com/pulp/api/v3/signing-services/187120de-307e-4389-b17d-9e42ab295151/

    {
        "name": "signing-service-test",
        "pubkey_fingerprint": "8F336A705074623F7FC3273945ACE14E3EBB9BBA",
        "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\...snip...\n-----END PGP PUBLIC KEY BLOCK-----\n",
        "pulp_created": "2022-01-04T16:51:49.208122Z",
        "pulp_href": "/pulp/api/v3/signing-services/187120de-307e-4389-b17d-9e42ab295151/",
        "script": "/var/lib/pulp/scripts/bash-script.sh "
    }
    ```

Afterwards, users are able to sign selected content by the provided script.

!!! warning

    The underlying singing facility will sign anything that represents an OCI container image.


## Sign Images Pushed to the Registry

Given that an image is pushed to the Pulp Registry via `podman/docker push` or via the standard
DockerRegistry v2 push API, a repository is created containing it:

```
$ http GET https://pulp.example.com/pulp/api/v3/repositories/container/container-push/
  {
      "count": 1,
      "next": null,
      "previous": null,
      "results": [
          {
              "description": null,
              "latest_version_href": "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/9/",
              "manifest_signing_service": null,
              "name": "test/minio",
              "pulp_created": "2021-12-10T20:38:40.379570Z",
              "pulp_href": "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/",
              "pulp_labels": {},
              "retain_repo_versions": null,
              "versions_href": "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/"
          }
      ]
  }
```

Trigger `sign` task to sign previously pushed image into the repository. One can associate
`manifest_signing_service` with the repository which will be used automatically during sign
operation or it can be explictly specified in the following manner:

```
$ http https://pulp.example.com/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/sign/ manifest_signing_service=/pulp/api/v3/signing-services/187120de-307e-4389-b17d-9e42ab295151/
  {
      "task": "/pulp/api/v3/tasks/2d6eb9b7-f5aa-40b5-be1c-99c40805d049/"
  }


$ http GET https://pulp.example.com/pulp/api/v3/tasks/2d6eb9b7-f5aa-40b5-be1c-99c40805d049/
  {
      "child_tasks": [],
      "created_resources": [
          "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
      ],
      "error": null,
      "finished_at": "2021-12-10T20:39:57.016883Z",
      "logging_cid": "f397ba767a9649b68fee8fe90826e1e7",
      "name": "pulp_container.app.tasks.sign.sign",
      "parent_task": null,
      "progress_reports": [],
      "pulp_created": "2021-12-10T20:39:56.741507Z",
      "pulp_href": "/pulp/api/v3/tasks/2d6eb9b7-f5aa-40b5-be1c-99c40805d049/",
      "reserved_resources_record": [
          "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/"
      ],
      "started_at": "2021-12-10T20:39:56.780215Z",
      "state": "completed",
      "task_group": null,
      "worker": "/pulp/api/v3/workers/eb65c2d9-31b2-47dc-847e-dad0e744c539/"
  }
```

Upon task completion, an atomic container signature is created and added to the repository:

```
$ http GET https://pulp.example.com/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/
  {
      "base_version": null,
      "content_summary": {
          "added": {
              "container.signature": {
                  "count": 1,
                  "href": "/pulp/api/v3/content/container/signatures/?repository_version_added=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
              }
          },
          "present": {
              "container.blob": {
                  "count": 8,
                  "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
              },
              "container.manifest": {
                  "count": 1,
                  "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
              },
              "container.signature": {
                  "count": 1,
                  "href": "/pulp/api/v3/content/container/signatures/?repository_version=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
              },
              "container.tag": {
                  "count": 1,
                  "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/"
              }
          },
          "removed": {}
      },
      "number": 10,
      "pulp_created": "2021-12-10T20:39:56.942014Z",
      "pulp_href": "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/",
      "repository": "/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/"
  }


  $ http GET https://pulp.example.com/pulp/api/v3/content/container/signatures/?repository_version=/pulp/api/v3/repositories/container/container-push/3b279a32-b313-44bf-ad41-4359a92cae24/versions/10/

  {
      "count": 1,
      "next": null,
      "previous": null,
      "results": [
          {
              "creator": "atomic 5.16.2-dev",
              "digest": "sha256:2d916bd0c131e9da11d09a8490a4529cf8fd5b3063b093a2ce115c45d8564c4a",
              "key_id": "45ACE14E3EBB9BBA",
              "name": "sha256:de0b3821d652af121ad384b0198dc1c6926f77531d6c250cecff3c42d29c95ce@2d916bd0c131e9da11d09a8490a4529c",
              "pulp_created": "2021-12-10T20:39:56.933134Z",
              "pulp_href": "/pulp/api/v3/content/container/signatures/365af055-320b-4e19-8cd9-7a3fcaa620d2/",
              "signed_manifest": "/pulp/api/v3/content/container/manifests/51caa6c9-5c93-4843-9488-c01de3effdf3/",
              "timestamp": 1639168796,
              "type": "atomic"
          }
      ]
  }
```

## Sign Images Mirrored into the Registry

It is possible to sign content that was synchronized from remote registries.
If the content was synced together with signatures, upon signing task completion new signatures will be
added and the original ones will be kept intact:

```
$ http https://pulp.example.com/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/

 {
     "base_version": null,
     "content_summary": {
         "added": {
             "container.blob": {
                 "count": 9,
                 "href": "/pulp/api/v3/content/container/blobs/?repository_version_added=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             },
             "container.manifest": {
                 "count": 5,
                 "href": "/pulp/api/v3/content/container/manifests/?repository_version_added=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             },
             "container.tag": {
                 "count": 2,
                 "href": "/pulp/api/v3/content/container/tags/?repository_version_added=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             }
         },
         "present": {
             "container.blob": {
                 "count": 9,
                 "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             },
             "container.manifest": {
                 "count": 5,
                 "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             },
             "container.tag": {
                 "count": 2,
                 "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/"
             }
         },
         "removed": {}
     },
     "number": 1,
     "pulp_created": "2022-01-04T19:23:03.899602Z",
     "pulp_href": "/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/versions/1/",
     "repository": "/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/"
 }
```

In order to adhere to the [container signature specs](https://github.com/containers/image/blob/main/docs/containers-signature.5.md),
`future_base_path` needs to be provided to the sign call. This information will be used in the
signature's `identity`. It is crucial that `future_base_path` matches the  `base_path` of the
existing distribution or a future one, under which it is planned to make the content available to the
clients. If the information does not match, the client's policy might reject images on pull
operation. Please refer more to the  [containers.policy specs](https://github.com/containers/image/blob/main/docs/containers-policy.json.5.md):

```
http https://pulp.example.com/pulp/api/v3/repositories/container/container/2629ca48-1d98-4ce1-88f2-accf2de9de95/sign/ manifest_signing_service=/pulp/api/v3/signing-services/fe61ee1b-3354-4c11-ab08-b58f53eb2335/ future_base_path=library/busybox

{
    "task": "/pulp/api/v3/tasks/f20139e2-d76e-4e69-877f-129bf135c475/"
}


http https://pulp.example.com/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/

{
    "base_version": null,
    "content_summary": {
        "added": {
            "container.signature": {
                "count": 4,
                "href": "/pulp/api/v3/content/container/signatures/?repository_version_added=/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/"
            }
        },
        "present": {
            "container.blob": {
                "count": 9,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/"
            },
            "container.manifest": {
                "count": 5,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/"
            },
            "container.signature": {
                "count": 4,
                "href": "/pulp/api/v3/content/container/signatures/?repository_version=/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/"
            },
            "container.tag": {
                "count": 2,
                "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/"
            }
        },
        "removed": {}
    },
    "number": 2,
    "pulp_created": "2022-01-04T21:11:07.080160Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/versions/2/",
    "repository": "/pulp/api/v3/repositories/container/container/6508bcfb-9f3d-4caa-af25-07703f832c46/"
}
```

Upon task completion, signatures for every image manifest will be created and added to the repo.
It is possible to specify a single manifest identified by tag or a list of manifests to sign,
by proviging `tags_list` option to the call.
Note that `manifest lists` are not signed, instead all the image manifests that manifest lists
contain, are signed.

# Manage Signatures via the Extensions API

This API exposes an endpoint for reading and writing image signatures. Users should configure the
sigstore section in the [registries.d file](https://github.com/containers/image/blob/main/docs/containers-registries.d.5.md)
accordingly to benefit from the API.

## Reading Signatures

To read existing signatures, issue the following GET request:

```
http GET http://localhost:24817/extensions/v2/<namespace>/<name>/signatures/sha256:<manifest-digest>
```

Signatures are retrieved by container clients automatically if the policy requires so. The policy is
defined in the file `/etc/containers/policy.json`.

## Writing Signatures

To add a new signature to an image, execute the following PUT request:

```
http PUT http://localhost:24817/extensions/v2/<namespace>/<name>/signatures/sha256:<manifest-digest> < signature.json
```

The JSON payload has the same structure as described in the [container signature specs](https://github.com/containers/image/blob/main/docs/containers-signature.5.md):

```
{
  "schemaVersion": 2,
  "type":    "atomic",
  "name":    "sha256:4028782c08eae4a8c9a28bf661c0a8d1c2fc8e19dbaae2b018b21011197e1484@cddeb7006d914716e2728000746a0b23",
  "content": "<cryptographic_signature>"
}
```

This step can be also done via podman or skopeo. After configuring a GPG keyring, it is possible to
issue the following command to push a tagged image altogether with its signature to the Pulp
Registry:

```
podman push --tls-verify=false --sign-by username@email.com localhost:24817/<namespace>/<name>
```
`````

## File: pulp-docs/pulp_container/docs/admin/learn/authentication.md
`````markdown
# Authentication

The Pulp Registry supports [token authentication](https://distribution.github.io/distribution/spec/auth/token/).
The token authentication is enabled by default and **does not** come pre-configured out of the box. See
the section [Token Authentication](#token-authentication) for more details.

The token authentication can be disabled via the pulp settings by declaring `TOKEN_AUTH_DISABLED=True`.
When disabled, Basic authentication or Remote Webserver authentication is used as a default
authentication method depending on a particular configuration.

## Basic Authentication

Base64 encoded user credentials are passed along with the `Authorization` header with each Registry
API request to Pulp. Container clients handle the authentication procedure automatically.

All users are permitted to pull content from the Registry without any limitations because the concept
of private repositories is not adopted once token authentication is disabled. But, only users with
superuser permissions are allowed to push content to the Registry.

## Remote Webserver Authentication

A webserver that sits in front of Pulp (e.g., Nginx or Apache) is a proxy that forwards user
credentials to a remote webserver which authenticates users. For authenticated users, the webserver
sets the header `settings.REMOTE_USER_ENVIRON_NAME` for every request and passes it to Pulp.

Similarly to basic authentication, all users can pull content from the Registry without limitations
and only superusers are allowed to push new content to the Registry.

To set up the remote webserver authentication, update the Pulp settings in the following way:

```python
TOKEN_AUTH_DISABLED = True

REMOTE_USER_ENVIRON_NAME = "HTTP_REMOTE_USER"

AUTHENTICATION_BACKENDS = [
    "pulpcore.app.authentication.PulpNoCreateRemoteUserBackend",
    "pulpcore.backends.ObjectRolePermissionBackend",
]
REST_FRAMEWORK__DEFAULT_AUTHENTICATION_CLASSES = (
    "rest_framework.authentication.SessionAuthentication",
    "pulpcore.app.authentication.PulpRemoteUserAuthentication",
)
```

Then, configure Nginx or Apache to proxy the authentication header:

```
location /v2/ {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $http_host;
    # we don't want nginx trying to do something clever with
    # redirects, we set the Host: header above already.
    proxy_redirect off;
    proxy_pass http://pulp-api;
    client_max_body_size 0;
+   proxy_set_header Remote_User $remote_user;
}
```

!!! note

    Ensure that users, who are being authenticated, exist in the Pulp database. User names passed
    via the `settings.REMOTE_USER_ENVIRON_NAME` header must agree with user names stored in the
    database.

## Token Authentication

Token authentication allows users to pull/push content with an authorized access. A token server
grants access based on the user's privileges and current scope.

To configure token authentication, an administrator defines the following settings:

1. **A fully qualified domain name of a token server with an associated port number**. The token server is
  responsible for generating Bearer tokens. Append the constant `TOKEN_SERVER` to the settings file
  `pulp_container/app/settings.py`.

2. **A token signature algorithm**. A particular signature algorithm can be chosen only from the list of
  [supported algorithms](https://pyjwt.readthedocs.io/en/latest/algorithms.html#digital-signature-algorithms).
  Pulp uses exclusively asymmetric cryptography to sign and validate tokens. Therefore, it is possible
  only to choose from the algorithms, such as ES256, RS256, or PS256. Append the the constant
  `TOKEN_SIGNATURE_ALGORITHM` with a selected algorithm to the settings file.

3. **Paths to secure keys**. These keys are going to be used for a signing and validation of tokens.
  Remember that the keys have to be specified in the **PEM format**. To generate keys, one could use
  the openssl utility. In the following example, the utility is used to generate keys with the algorithm
  ES256.

    1. Generate a private key:

        ```
        $ openssl ecparam -genkey -name prime256v1 -noout -out /tmp/private_key.pem
        ```
  
    2. Check if the generated private key has the proposed permissions:

        - mode: 600
        - owner: pulp (the account that pulp runs under)
        - group: pulp (the group of the account that pulp runs under)
    
    3. Generate a public key out of the private key:

        ```
        $ openssl ec -in /tmp/private_key.pem -pubout -out /tmp/public_key.pem
        ```
    
    4. Check if the generated public key has the proposed permissions:

        - mode: 644
        - owner: pulp (the account that pulp runs under)
        - group: pulp (the group of the account that pulp runs under)

In addition to that, the administrator can configure the duration of the validity of issued tokens
via the setting `TOKEN_EXPIRATION_TIME`. The default expiration time is `300` seconds.

Below is provided an example of the settings file:

```python
TOKEN_SERVER = "https://puffy.example.com/token/"
TOKEN_SIGNATURE_ALGORITHM = 'ES256'
PUBLIC_KEY_PATH = '/tmp/public_key.pem'
PRIVATE_KEY_PATH = '/tmp/private_key.pem'
```

Restart Pulp services in order to reload the updated settings. Pulp will fetch a domain for the token
server and will initialize all handlers according to that.


!!! note

    Standard container tooling clients like podman, skopeo and docker handle token authentication calls on
    behalf of the user during pull and push operations. However, if you would like to debug registry
    access or implement manual registry API calls, here are a few examples of how the token authentication
    works behind the scene.

Access the root registry endpoint to check if the token authentication was successfully configured and enabled:

```bash
    $ http 'https://puffy.example.com/v2/'

    HTTP/1.1 401 Unauthorized
    Allow: GET, HEAD, OPTIONS
    Connection: close
    Content-Length: 58
    Content-Type: application/json
    Date: Mon, 13 Jul 2020 09:56:54 GMT
    Docker-Distribution-Api-Version: registry/2.0
    Server: gunicorn/20.0.4
    Vary: Accept
    WWW-Authenticate: Bearer realm="https://puffy.example.com/token/",service="puffy.example.com"
    X-Frame-Options: SAMEORIGIN

    {
        "detail": "Authentication credentials were not provided."
    }
```

Since the request was not authenticated, the registry returned an HTTP 401 error and in the authentication header
there are details on how to authenticate. This time send the request with the specified realm and service:

```bash
$ http https://puffy.example.com/token/?service=puffy.example.com

HTTP/1.1 200 OK
Allow: GET, HEAD, OPTIONS
Connection: close
Content-Length: 609
Content-Type: application/json
Date: Mon, 13 Jul 2020 09:57:25 GMT
Server: gunicorn/20.0.4
Vary: Accept, Cookie
X-Frame-Options: SAMEORIGIN

{   
    "access_token": <TOKEN>,
    "expires_in": 300,
    "issued_at": "2020-07-13T09:57:25.601760Z",
    "token": <TOKEN>
}
```

The token was generated to access registry root endpoint.

```bash
$ http --auth-type=jwt --auth=<TOKEN> https://puffy.example.com/v2/

HTTP/1.1 200 OK
Allow: GET, HEAD, OPTIONS
Connection: close
Content-Length: 2
Content-Type: application/json
Date: Mon, 13 Jul 2020 09:58:40 GMT
Docker-Distribution-Api-Version: registry/2.0
Server: gunicorn/20.0.4
Vary: Accept
X-Frame-Options: SAMEORIGIN

{}
```

In order to access other registry endpoints, like manifests, blobs and tags, the scope needs to be provided
as well. In this context, it will be a specific repository with the according action pull or push.

```bash
$ http https://puffy.example.com/v2/library/azure/tags/list
HTTP/1.1 401 Unauthorized
Access-Control-Expose-Headers: Correlation-ID
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Content-Length: 106
Content-Type: application/json
Correlation-ID: c4e809f1e290478b8acfd0c9f7be7d00
Cross-Origin-Opener-Policy: same-origin
Date: Fri, 17 May 2024 09:18:33 GMT
Docker-Distribution-Api-Version: registry/2.0
Referrer-Policy: same-origin
Server: nginx
Vary: Accept
WWW-Authenticate: Bearer realm="https://puffy.example.com/token/",service="puffy.example.com",scope="repository:library/azure:pull"
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-Registry-Supports-Signatures: 1

{
    "errors": [
        {
            "code": "UNAUTHORIZED",
            "detail": {},
            "message": "Authentication credentials were not provided."
        }
    ]
}
```

```bash
$ http 'https://puffy.example.com/token/?service=puffy.example.com&scope=repository:library/azure:pull'
HTTP/1.1 200 OK
Access-Control-Expose-Headers: Correlation-ID
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Content-Length: 1311
Content-Type: application/json
Correlation-ID: 611f0ce122a54509b348ff54d5030c80
Cross-Origin-Opener-Policy: same-origin
Date: Fri, 17 May 2024 09:20:29 GMT
Referrer-Policy: same-origin
Server: nginx
Strict-Transport-Security: max-age=15768000
Vary: Accept
X-Content-Type-Options: nosniff
X-Frame-Options: DENY

{
    "access_token": <TOKEN>,
    "expires_in": 300,
    "issued_at": "2024-05-17T09:20:29.660984Z",
    "token": <TOKEN>
}
```

```bash
$ http https://puffy.example.com/v2/library/azure/tags/list --auth-type=jwt --auth=<TOKEN>
HTTP/1.1 200 OK
Access-Control-Expose-Headers: Correlation-ID
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Content-Length: 42
Content-Type: application/json
Correlation-ID: b944d8b6b1fc474eada8531776a2609b
Cross-Origin-Opener-Policy: same-origin
Date: Fri, 17 May 2024 09:33:04 GMT
Docker-Distribution-Api-Version: registry/2.0
Referrer-Policy: same-origin
Server: nginx
Strict-Transport-Security: max-age=15768000
Vary: Accept
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-Registry-Supports-Signatures: 1

{
    "name": "library/azure",
    "tags": [
        "latest"
    ]
}
```

!!! note

    If the repository is private, one needs to provide basic auth credentials while
    requesting the token in order to pull content from it. If no basic auth is provided,
    then the generated token is for the anonymous user.
    In order to push content to the registry a user always needs to be authenticated.

```bash
$ http 'https://puffy.example.com/token/?service=puffy.example.com&scope=repository:private/azure:pull' --auth-type=basic --auth=alice:wonderland
```

!!! note

    Some registry endpoints, like ``_catalog`` endpoint, are not opened to anonymous/not logged-in users and
    require credentials provided during the token request. Anonymous tokens will still lead to HTTP 401 insufficient scope errors.

```bash
http 'https://puffy.example.com/token/?service=puffy.example.com&scope=registry:catalog:*' --auth-type=basic --auth=alice:wonderland
```

This token embeds permissions that allow to see only those repositories that Alice has access to. 

```bash
$ http https://puffy.example.com/v2/_catalog --auth-type=jwt --auth=<TOKEN>
HTTP/1.1 200 OK
Access-Control-Expose-Headers: Correlation-ID
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Content-Length: 63
Content-Type: application/json
Correlation-ID: f4ea6c26bcb7462099c0d5757178f7ca
Cross-Origin-Opener-Policy: same-origin
Date: Fri, 17 May 2024 09:57:11 GMT
Docker-Distribution-Api-Version: registry/2.0
Referrer-Policy: same-origin
Server: nginx
Strict-Transport-Security: max-age=15768000
Vary: Accept
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-Registry-Supports-Signatures: 1

{
    "repositories": [
        "alice/azure",
        "alice/openstack-cron"
    ]
}
```

If you are still unsure why you are geting HTTP 401 errors with the generated token, paste its payload to https://jwt.io/
and it will help identify whether the token contains the needed access.
`````

## File: pulp-docs/pulp_container/docs/admin/learn/domain.md
`````markdown
# Domain support

Enabling domain support in pulp_container works a bit differently than other plugins due to the 
nature of the Registry API. Each domain is scoped as a unique registry by the domain name. This 
means that all images will include the domain name as a prefix to its repository path.

## Examples

### Sync and Pull

Here's an example of syncing and hosting an image (`pulp/pulp`) in the domain `foo`.

```bash
pulp --domain foo container repository create --name pulp
pulp --domain foo container remote create --name quay-pulp --url https://quay.io --upstream-name pulp/pulp
pulp --domain foo container repository sync --name pulp --remote quay-pulp
pulp --domain foo distribution create --name pulp --repository pulp --base-path pulp/pulp

# 'foo' is added to the repository path
docker pull localhost:24817/foo/pulp/pulp:latest
```

### Push

Here's an example of pushing an image (`pulp/pulp`) to the domain `foo`.

```bash
docker tag pulp/pulp localhost:24817/foo/pulp/pulp:latest
# This will create a 'pulp/pulp' repository in the domain 'foo'
docker push localhost:24817/foo/pulp/pulp:latest
```

### RBAC

With domain support enabled, roles can now be assigned at the domain level.

```bash
pulp --domain foo container distribution create --name "bar" --base-path "bar" --private
pulp user create --username "alice"
# This will allow alice to pull all images from the 'foo' domain
pulp user role-assignment add --username "alice" --role "container.containerdistribution_consumer" --domain "foo"

docker login localhost:24817 -u alice
docker pull localhost:24817/foo/bar:latest
```

!!! note

    Objects are still prohibited from being used across domains even if you have permissions for both.

!!! note

    The Flatpak endpoints will only work within the default domain, even with domains enabled.
`````

## File: pulp-docs/pulp_container/docs/admin/learn/rbac.md
`````markdown
# Role-based Access Control

Role-based access control (RBAC) **restricts** access to entities based on a user's role within an
organization. A role consists of one or more permissions. Users having a proper set of roles can
view, modify, or delete resources hosted on different endpoints.

By default, container repositories' content is accessible via `podman` or `docker` pull
commands, unless the opposite is *explicitly* specified. A private repository can be created via the
REST API for container distributions. An existing distribution can be updated with the parameter
`private=True`.

!!! note

    Users logged in as administrators (superusers) always bypass any authorization checks.

## Roles

Role based access control (RBAC) is configured using access policies for the following endpoints:

- `pulp_container/namespaces`
- `distributions/container/container`
- `repositories/container/container-push`
- `remotes/container/container`
- `repositories/container/container`
- `repositories/container/container-push/versions`
- `repositories/container/container/versions`
- `content/container/blobs`
- `content/container/manifests`
- `content/container/tags`

### Default Roles

For each endpoint, a different set of roles is defined. The roles can be assigned at the model
or object level for every user or group. In the following sections, the *Creator*, *Owner*,
*Consumer*, and *Collaborator* roles are introduced. The *Consumer* and *Collaborator* roles are
defined only for namespaces and distributions (i.e., container repositories served by the Pulp Registry).

#### Creator Role

The *Creator* role contains the `add` permission for objects present on a particular endpoint.
For the distributions endpoint, only users with the `container.add_containerdistribution`
permission can create objects:

```bash
pulp role show --name "container.containerdistribution_creator"
```

```
{
  "pulp_href": "/pulp/api/v3/roles/1a8555c8-3bfc-4688-81e3-5bf6fa38b9d7/",
  "pulp_created": "2022-05-26T12:02:28.872667Z",
  "name": "container.containerdistribution_creator",
  "description": null,
  "permissions": [
    "container.add_containerdistribution"
  ],
  "locked": true
}
```

To perform operations on an endpoint (aka ViewSet actions), a user may need to have additional
permissions. One of the following *conditions* need to be satisfied to create a new distribution:

```bash
pulp access-policy show --viewset-name "distributions/container/container" | jq -r '.statements[] | select(.action[] | contains("create"))'
```

```
{
  "action": [
    "create"
  ],
  "effect": "allow",
  "condition": "has_namespace_model_perms",
  "principal": "authenticated"
}
{
  "action": [
    "create"
  ],
  "effect": "allow",
  "condition": "has_namespace_perms:container.add_containerdistribution",
  "principal": "authenticated"
}
{
  "action": [
    "create"
  ],
  "effect": "allow",
  "condition": "namespace_is_username",
  "principal": "authenticated"
}
```

!!! note

    A user with the *Creator* role for namespaces does not need to have any additional roles to
    create distributions within the given namespaces. Similarly, the user is allowed to create
    distributions within the owning username namespace (e.g., user `alice` can create container
    repositories like `alice/repo1`).


#### Owner Role

The *Owner* role contains all of the permissions available for the associated ViewSet apart from
the `add` permission. For the ViewSet hosting namespaces, the set of permissions reads:

```bash
pulp role show --name "container.containernamespace_owner"
```

```
{
  "pulp_href": "/pulp/api/v3/roles/1f5519f5-5b2d-47cc-b081-2f38f256740e/",
  "pulp_created": "2022-05-26T12:02:28.999330Z",
  "name": "container.containernamespace_owner",
  "description": null,
  "permissions": [
    "container.delete_containernamespace",
    "container.manage_roles_containernamespace",
    "container.namespace_add_containerdistribution",
    "container.namespace_change_containerdistribution",
    "container.namespace_change_containerpushrepository",
    "container.namespace_delete_containerdistribution",
    "container.namespace_modify_content_containerpushrepository",
    "container.namespace_pull_containerdistribution",
    "container.namespace_push_containerdistribution",
    "container.namespace_view_containerdistribution",
    "container.namespace_view_containerpushrepository",
    "container.view_containernamespace"
  ],
  "locked": true
}
```

Besides the permissions for *Read*, *Update*, and *Delete* actions, the *Owner* role has the
`mange_roles` permission that allows the user to call the ViewSet's `add_role` and
`remove_role` endpoints for easy management of roles around that ViewSet's object.

The *Owner* role for namespaces contains permissions for any additional action that can be performed
on the related endpoints. The endpoints serving content for container clients permit access to
container distributions/repositories based on the presence of `pull_containerdistribution` and
`push_containerdistributuion` permissions.

!!! note

    Repositories of the push type created with container clients (e.g., by running `podman push`)
    are considered public and anyone can `pull` the images from them.


#### Consumer Role

The *Consumer* role contains only the `view` and `pull` permissions. Below, a list of associated
permissions for distributions is showcased:

```bash
pulp role show --name "container.containerdistribution_consumer"
```

```
{
  "pulp_href": "/pulp/api/v3/roles/7b97928a-5d33-454f-982e-41cfe102b273/",
  "pulp_created": "2022-05-26T12:02:28.945828Z",
  "name": "container.containerdistribution_consumer",
  "description": null,
  "permissions": [
    "container.pull_containerdistribution",
    "container.view_containerdistribution"
  ],
  "locked": true
}
```

Having the `view` and `pull` permissions allows a user to see and pull content from the Pulp
Registry. Assigning this role only at the object level allows administrators and owners to select
what the user can see.

```bash
pulp container distribution create --name "foo" --base-path "bar"
pulp user create --username "consumer"
pulp container distribution role add --name "foo" --user "consumer" --role "container.containerdistribution_consumer"
pulp user role-assignment list --username "consumer"
```

```
[
  {
    "pulp_href": "/pulp/api/v3/users/44/roles/6e58251d-7656-4c0d-9630-ea51ed7c29b5/",
    "pulp_created": "2022-05-27T15:27:00.623004Z",
    "role": "container.containerdistribution_consumer",
    "content_object": "/pulp/api/v3/distributions/container/container/5b8ec13c-d578-4b3a-9b99-80986e5e00b6/"
  }
]
```

Also, it is possible to assign the role in the following manner:

```bash
PULP_HREF=$(pulp container distribution show --name "foo" | jq -r ".pulp_href")
pulp user role-assignment add --object ${PULP_HREF} --username "consumer" --role "container.containerdistribution_consumer"
```

#### Collaborator Role

The *Collaborator* role represents a set of permissions that a co-worker working within a same user-space
should have. In addition to the *Consumer* role, users with the *Collaborator* role are allowed
to add (push) and modify content. The following set of permissions is evaluated for the *Collaborator*
role for distributions:

```bash
pulp role show --name "container.containerdistribution_collaborator"
```

```
{
  "pulp_href": "/pulp/api/v3/roles/933e0376-8945-489a-93a6-cafb6753f4bb/",
  "pulp_created": "2022-05-26T12:02:28.924330Z",
  "name": "container.containerdistribution_collaborator",
  "description": null,
  "permissions": [
    "container.pull_containerdistribution",
    "container.push_containerdistribution",
    "container.view_containerdistribution"
  ],
  "locked": true
}
```

```bash
pulp role show --name "container.containernamespace_collaborator"
```

```
{
  "pulp_href": "/pulp/api/v3/roles/1466e614-73a7-4a58-ab36-ced0ab1a1809/",
  "pulp_created": "2022-05-26T12:02:29.058226Z",
  "name": "container.containernamespace_collaborator",
  "description": null,
  "permissions": [
    "container.namespace_add_containerdistribution",
    "container.namespace_change_containerdistribution",
    "container.namespace_change_containerpushrepository",
    "container.namespace_delete_containerdistribution",
    "container.namespace_modify_content_containerpushrepository",
    "container.namespace_pull_containerdistribution",
    "container.namespace_push_containerdistribution",
    "container.namespace_view_containerdistribution",
    "container.namespace_view_containerpushrepository",
    "container.view_containernamespace"
  ],
  "locked": true
}
```

## Permissions

A role is defined by one or more permissions. In this section, details of permissions used within
the container plugin are discussed.

!!! warning

    The concept of managing granular permissions is obsolete. As of release 2.11.0, the plugin uses
    `roles` instead of separate permission classes. To migrate the customized permission
    classes to roles, follow the instructions shown at `migrating-perms-to-roles`.


### Namespaces

Pulp Container namespaces allow users to reuse repository names under different context. The
namespace can represent an organization, a team, or any other kind of logical grouping of container
repositories. Namespaces provide a naming convention for container repositories. Repositories in
the `foo` namespace are named `foo/something` and `foo/something-else`.

The default access policy for `pulp_container/namespaces` requires a user to have the
`container.add_containernamespace` permission to create a new namespace. Alternatively a user is
allowed to create a namespace that matches his username if it did not exist before. The new
namespace can be created by pushing an image using `podman` or `docker` client. This same
permissions allow the user of Pulp's API to create a new namespace.

The creation of a new namespace creates three user groups that can access the namespace:
Owners, Collaborators, and Consumers. The user that creates the namespace is automatically added to
the Owners group.

#### Namespace Owners

The group name is `container.namespace.owners.<namespace name>`. This group has the following
object permissions for the namespace:

```
"container.view_containernamespace"
"container.delete_containernamespace"
"container.namespace_add_containerdistribution",
"container.namespace_delete_containerdistribution
"container.namespace_view_containerdistribution"
"container.namespace_pull_containerdistribution"
"container.namespace_push_containerdistribution"
"container.namespace_change_containerdistribution"
"container.namespace_view_containerpushrepository"
"container.namespace_modify_content_containerpushrepository"
"container.namespace_modify_content_containerrepository"
```

The users in the owners group have the permissions to add/remove users from all three groups
associated with the namespace. They also have the ability to create, update, and delete
repositories in the namespace.

In addition to being able to use the `podman` or `docker` client to manage repositories, owners
can use Pulp's API to add and remove tags in the repositories for the namespace.

#### Namespace Collaborators

The group name is `container.namespace.collaborators.<namespace name>`. This group has the
following object permissions for the namespace:

```
"container.view_containernamespace"
"container.namespace_add_containerdistribution"
"container.namespace_delete_containerdistribution"
"container.namespace_view_containerdistribution"
"container.namespace_pull_containerdistribution"
"container.namespace_push_containerdistribution"
"container.namespace_change_containerdistribution"
"container.namespace_view_containerpushrepository"
"container.namespace_modify_content_containerpushrepository"
"container.namespace_modify_content_containerrepository"
```

Users in the Collaborator group can do everything that the owners can, with the exception of
deleting the namespace.

#### Namespace Consumers

The group name is `container.namespace.consumers.<namespace name>`. This group has the following
object permissions for the namespace:

```
"container.view_containernamespace"
"container.namespace_view_containerdistribution"
"container.namespace_pull_containerdistribution"
"container.namespace_view_containerpushrepository"
```

Users in the Consumers group can `pull` from any of the repositories in the namespace. Users
should only need to be added to this group if private repositories are being used. If the
repository is public, then anyone can `pull` from the repository.

### Distributions

Distributions are Pulp resources that represent URLs where repositories can be consumed.
Permissions for accessing specific container repositories are described in terms of permissions
to access Container Distributions. Each time a new repository is pushed using `podman` or `docker`,
a Container Distribution is created. There is also a Container Push Repository created. Both of
these resources can be accessed using Pulp's API.

The creation of a new distribution creates three user groups that can access the distribution:
Owners, Collaborators, and Consumers. The user that creates the distribution is automatically added to
the Owners group.

#### Distribution Owners

The group name is `container.distribution.owners.<distribution uuid>`. This group has the following
object permissions for the Distribution:

```
"container.view_containerdistribution"
"container.pull_containerdistribution"
"container.push_containerdistribution"
"container.delete_containerdistribution"
"container.change_containerdistribution"
```

The Owners group also has the following permissions for the Container Push Repository associated
with the Distribution:

```
"container.view_containerpushrepository"
"container.modify_content_containerpushrepository"
```

The owners of a Container Distribution have the ability to update and delete the repository
associated with the Distribution. They can also add/remove users from the groups associated with
the distribution.

#### Distribution Collaborators

The group name is `container.distribution.collaborators.<distribution uuid>`. This group has the
following object permissions for the Distribution:

```
"container.view_containerdistribution"
"container.pull_containerdistribution"
"container.push_containerdistribution"
```

The Collaborators group also has the following permissions for the Container Push Repository associated
with the Distribution:

```
"container.view_containerpushrepository"
"container.modify_content_containerpushrepository"
```

Users in the Collaborator group can do everything that the owners can, with the exception for deleting
the Distribution.

#### Distribution Consumers

The group name is `container.distribution.consumers.<distribution uuid>`. This group has the following
object permissions for the distribution:

```
"container.view_containerdistribution"
"container.pull_containerdistribution"
```

The Consumers group also has the following permissions for the Container Push Repository associated
with the Distribution:

```
"container.view_containerpushrepository"
```

Users in the Consumers group can the `pull` the repository. Users should only need to be added to
this group if the Distribution has been configured with `private=True`. If the Distribution is
public, then anyone can `pull` from the repository associated with the Distribution.


#### Pull-through Distribution Owners

This role allows users to manage and pull content from the pull-through cache distribution.

```
"container.view_containerpullthroughdistribution"
"container.delete_containerpullthroughdistribution"
"container.change_containerpullthroughdistribution"
"container.manage_roles_containerpullthroughdistribution"
"container.pull_new_containerdistribution"
```

#### Pull-through Distribution Collaborators

Users who have this role assigned can preview and pull new content from the main pull-through cache
distribution.

```
"container.view_containerpullthroughdistribution"
"container.pull_new_containerdistribution"
```

#### Pull-through Distribution Consumers

Similarly to the collaborator role, the following set of permissions is set for the consumer role:

```
"container.view_containerpullthroughdistribution"
"container.pull_new_containerdistribution"
```

It is recommended to assign at least one role with these permissions to allow users to pull new
content from a remote repository:
```
"container.namespace_modify_content_containerrepository" (e.g., namespace collaborator)
"container.namespace_add_containerdistribution" (e.g., namespace collaborator)
"container.pull_new_containerdistribution" (e.g., pull-through cache consumer)
```

Users without the permissions can still pull already cached content from Pulp. This behaviour is
further restricted by flagging a distribution as `private=True`.

### Private Repositories

Users wishing to `pull` from a Container Distribution with `private=True`
will require the following object level permission on the Distribution:

```
"container.pull_containerdistribution"
```

Users that wish to be able to access the distribution with Pulp's API need the following object level
permission on the Distribution:

```
"container.view_containerdistribution"
```

Users that wish to be able to access the repository associated with the distribution with Pulp's
API need the following object level permission on the Container Push Repository:

```
"container.view_containerpushrepository"
```
`````

## File: pulp-docs/pulp_container/docs/admin/learn/tech-preview.md
`````markdown
# Tech Previews

The following features are currently being released as part of tech preview:

- [Building an OCI image](site:pulp_container/docs/admin/guides/build-image) from a Containerfile.
- Support for [hosting Flatpak content](site:pulp_container/docs/user/tutorials/04-manage-flatpak) in OCI format.
- [Pull-through caching](site:pulp_container/docs/admin/guides/pull-through-caching) (i.e., proxy cache) for upstream registries.
`````

## File: pulp-docs/pulp_container/docs/user/guides/manage-cosign-signature.md
`````markdown
# Manage Cosign Signatures

Being an OCI compliant registry, the Pulp Container Registry can natively host cosign signatures
that are stored as an OCI image.

## Mirror cosign Signatures

During the sync task, Pulp will automatically mirror cosign signatures or atomic
signatures (accessible via the signatures extensions API).

```
{
   "schemaVersion": 2,
   "mediaType": "application/vnd.oci.image.manifest.v1+json",
   "config": {
       "mediaType": "application/vnd.oci.image.config.v1+json",
       "digest": "sha256:f35028aa1563f37ccbaa0b32c57777ffbd8e9e3d81d739fec0022995e58a375a",
       "size": 153
   },
   "layers": [
       {
           "mediaType": "application/vnd.dev.cosign.simplesigning.v1+json",
           "digest": "sha256:d3370bd32b32aba43de2b45bb4a2de2fb5c95fd2edbe738acbc3bc595b80c456",
           "size": 305,
           "annotations": {
               "dev.cosignproject.cosign/signature": "MEUCIBWDnTKhbf5x3mSuEHWkv3ixloIFXeDpfXipF9szqrd5AiEA+UU5J84gQ9JnmT6QZAXiPXqSoDVW0CXQYssGh63e9Ro="
           }
       }
   ]
}
```

## Sign and push cosign signatures

Pulp Container registry can host cosign signatures which can be pushed via cosign or podman clients:

=== "Cosign"

    ```
    # This command creates an ECDSA-P256 key pair (a private and a public key).
    cosign generate-key-pair
    cosign sign --key cosign.key pulp-registry/ipanova/cosign-test:latest
    ```

=== "Podman"

    ```
    podman push pulp-registry/ipanova/cosign-test:latest --sign-by-sigstore-private-key cosign.key
    ```

!!! warning

    To use this with images hosted on image registries, the relevant registry or repository must have
    the use-sigstore-attachments option enabled in containers-registries.d(5). This specifies whether
    sigstore image attachments (signatures, attestations and the like) are going to be read/written
    along with the image. If disabled, the images are treated as if no attachments exist; attempts to
    write attachments fail.

As a result of this operation, the `ipanova/cosign-test:latest` image is signed and its
cosign signature is stored in the registry as an OCI image. Cosign uses a fixed naming convention
to decide the name for a separate image, at which we can store the signature. The tag name resolved
to a fixed digest of the image/or manifest list which is being signed in the form of `sha256-12345.sig`

The payload of the signature will be stored as an image layer:

```
{
  "critical": {
      "identity": {
          "docker-reference": "pulp-registry/ipanova/cosigned:latest"
      },
      "image": {
          "docker-manifest-digest": "sha256:81cd171c4eda75046c31d6ed26f1241bbfa9326640613430be780ea931b02c24"
      },
      "type": "cosign container image signature"
  },
  "optional": {
      "creator": "containers/image 5.23.1",
      "timestamp": 1673006074
  }
}
```

!!! note

    Besides cosign signatures, Pulp Container Registry can mirror and host SBOMs and attestations.


## Cosign signature verification

Signature verification can be done via cosign or podman clients:

```
cosign verify --key cosign.pub pulp-registry/ipanova/cosign-test:latest
```

When using podman client the policy.json file should be properly configured per specs.
A new requirement type `sigstoreSigned` has been introduced:

<https://github.com/containers/image/blob/main/docs/containers-policy.json.5.md#sigstoresigned>

!!! warning

    To use this with images hosted on image registries, the relevant registry or repository must have
    the use-sigstore-attachments option enabled in containers-registries.d(5). This specifies whether
    sigstore image attachments (signatures, attestations and the like) are going to be read/written
    along with the image. If disabled, the images are treated as if no attachments exist; attempts to
    write attachments fail.
`````

## File: pulp-docs/pulp_container/docs/user/guides/manage-credentials.md
`````markdown
# Manage Credentials

Registry's credentials may be stored in a separate file. At the moment, Pulp does not provide
support for reading from this file. Therefore, a user who wants to synchronize content from
a registry, which requires the authentication, he or she has to manually extract data from this
file and pass it directly to Pulp.

!!! note

    A file which contains registry's credentials is also called a pull secret. These terms are
    considered interchangeable.


When using `podman`, the default path for such a file is
`${XDG_RUNTIME_DIR}/containers/auth.json`. The file can have the following content:

```
cat ${XDG_RUNTIME_DIR}/containers/auth.json
{
        "auths": {
                "registry.hub.docker.com": {
                        "auth": "YWRtaW46cGFzc3dvcmQ="
                }
        }
}
```

The content of the file is usually updated by running `podman login ${REGISTRY}` and providing a
valid username and password for the registry `${REGISTRY}`.

!!! note

    In some cases, a pull secret is handled by a registry's maintainer and it is not stored locally
    by default. If so, it is necessary to download it
    (e.g. from <https://access.redhat.com/terms-based-registry/>).


Suppose a user wants to retrieve credentials from the file shown above in order to sync the content.
First, the user retrieves the field `auth`:

```
export AUTH=$(cat ${XDG_RUNTIME_DIR}/containers/auth.json \
    | jq -r '.auths["registry.hub.docker.com"].auth')
```

Then, he or she fetches the username and password by running:

```
read USERNAME PASSWORD <<< $(echo $AUTH | base64 -d | awk -F':' '{print $1, $2}')
```

And finally, the user creates a new Pulp remote, for example, by executing:

```
http POST http://localhost:24817/pulp/api/v3/remotes/container/container/ \
    name='foo/bar' upstream_name='foo/bar' url='https://registry.hub.docker.com' \
    policy='immediate' username=$USERNAME password=$PASSWORD
```

The remote is used by the sync machinery afterwards. Refer to [Mirror and Host Content](site:pulp_container/docs/user/tutorials/01-sync-and-host) if you missed the syncing part.
`````

## File: pulp-docs/pulp_container/docs/user/guides/manage-flatpak.md
`````markdown
# Manage Flatpak Images

Pulp can host Flatpak application and runtime images that are distributed in OCI format.  To make
such content discoverable, it can provide `/index/dynamic` and `/index/static` endpoints as
specified by [the Flatpak registry index protocol](https://github.com/flatpak/flatpak-oci-specs/blob/main/registry-index.md).  This is not enabled
by default. To enable it, define `FLATPAK_INDEX=True` in the settings file.

Clients like the `flatpak` command-line tool or the GNOME Software application will typically
query the `/index/static` endpoint, which is intended to be called repeatedly with identical query
parameters, and whose responses are meant to be cached.  The `/index/dynamic` endpoint serves
exactly the same content, but is intended for one-off requests that should not be cached.  These
endpoints can be accessed without authentication.  They only provide information about public
repositories.

The two endpoints support a number of query parameters (`architecture`, `tag`, `label`, etc.),
see the protocol specification for details.  Two notes:

- Every request must include a `label:org.flatpak.ref:exists=1` query parameter.  This acts as a
  marker to only report Flatpak content, and to exclude other container content that may also be
  provided by the Pulp instance.
- This implementation does not support annotations.  Including any `annotation` query parameters
  will result in a 400 failure response.  Use `label` query parameters instead.  (Existing clients
  like the `flatpak` command-line tool never issue requests including any `annotation` query
  parameters.)

## Install a Flatpak image from Pulp

This section assumes that you have created at least one public distribution in your Pulp instance
that serves a repository containing Flatpak content.  To do this, see the general {doc}`host`
documentation.

You can for example use the `flatpak` [command-line tool](https://docs.flatpak.org/en/latest/using-flatpak.html#the-flatpak-command) to set up a Flatpak
remote (named `pulp` here) that references your Pulp instance:

```bash
flatpak remote-add pulp oci+"$BASE_ADDR"
```

Then, use

```bash
flatpak remote-ls pulp
```

to retrieve a list of all Flatpak applications and runtimes that your Pulp instance serves.  (This
queries the `/index/static` endpoint, as explained above.)  Finally, if your Pulp instance serves
e.g. the `org.gnome.gedit` application, use

```bash
flatpak install pulp org.gnome.gedit
```

to install it and run it with

```bash
flatpak run org.gnome.gedit
```

!!! warning

    This functionality is shipped as part of the tech preview offering. Role-based access control
    and listing of Flatpak images from within the API may be a subject to change.
`````

## File: pulp-docs/pulp_container/docs/user/guides/manage-helm-chart.md
`````markdown
# Manage Helm Charts

Helm charts are packages for Kubernetes applications, bundling YAML files defining resources like
deployments and services. To package them as container images, developers use tools like Helm to
embed the application code and dependencies into a containerized environment. Container registries
provide platforms for storing and sharing these containerized Helm charts, simplifying deployment
across Kubernetes clusters.

## Push and Host

Use the following **example** to download and push an etherpad chart from the Red Hat community repository.

Add a chart repository:

```
helm repo add redhat-cop https://redhat-cop.github.io/helm-charts
```

Update the information of available charts locally from the chart repository:

```
helm repo update
```

Download a chart from a repository:

```
helm pull redhat-cop/etherpad --version=0.0.4 --untar
```

Package the chart into a chart archive:

```
helm package ./etherpad
```

Log in to your Pulp container registry using helm registry login:

```
helm registry login pulp3-source-fedora36.puffy.example.com
```

Push the chart to your Pulp Container registry using the helm push command:

=== "Script"

    ```
    helm push etherpad-0.0.4.tgz oci://pulp3-source-fedora36.puffy.example.com
    ```

=== "Output"

    ```
    Pushed: pulp3-source-fedora36.puffy.example.com/etherpad:0.0.4
    Digest: sha256:a6667ff2a0e2bd7aa4813db9ac854b5124ff1c458d170b70c2d2375325f2451b
    ```

Ensure that the push worked by deleting the local copy, and then pulling the chart from the repository:

=== "Script"

    ```
    rm -rf etherpad-0.0.4.tgz

    helm pull oci://pulp3-source-fedora36.puffy.example.com/etherpad --version 0.0.4
    ```

=== "Script"

    ```
    Pulled: pulp3-source-fedora36.puffy.example.com/etherpad:0.0.4
    Digest: sha256:4f627399685880daf30cf77b6026dc129034d68c7676c7e07020b70cf7130902
    ```

The chart can then be installed using the helm install command:

```
helm install etherpad-0.0.4.tgz
```

Alternatively, charts can be installed directly from the registry without needing to download locally.
Use the helm install command and reference the registry location:

```
helm install oci://pulp3-source-fedora36.puffy.example.com/helm/etherpad --version=0.0.4
```

## Mirror

Being an OCI compliant registry, Pulp Container registry can natively mirror helm charts
that are stored as an OCI image:

```
{
 "schemaVersion": 2,
 "config": {
   "mediaType": "application/vnd.cncf.helm.config.v1+json",
   "digest": "sha256:8ec7c0f2f6860037c19b54c3cfbab48d9b4b21b485a93d87b64690fdb68c2111",
   "size": 117
 },
 "layers": [
   {
     "mediaType": "application/vnd.cncf.helm.chart.content.v1.tar+gzip",
     "digest": "sha256:1b251d38cfe948dfc0a5745b7af5ca574ecb61e52aed10b19039db39af6e1617",
     "size": 2487
   },
   {
     "mediaType": "application/vnd.cncf.helm.chart.provenance.v1.prov",
     "digest": "sha256:3e207b409db364b595ba862cdc12be96dcdad8e36c59a03b7b3b61c946a5741a",
     "size": 643
   }
 ]
}
```
`````

## File: pulp-docs/pulp_container/docs/user/guides/manage-image.md
`````markdown
# Manage Images

There are multiple ways that users can manage Container content in repositories:

1. [Tag](#tagging) or [Untag](#untagging) Manifests in a repository.
2. Recursively [Add Content](#add-content) or [Remove Content](#remove-content) container content.
3. [Copy Tags](#copy-tags) or [Copy Manifests](#copy-manifests) from source repository.

Each of these workflows kicks off a task, and when the task is complete,
a new repository version will have been created.


## Tagging

Images are described by manifests. The procedure of an image tagging is
related to manifests because of that. In pulp, it is required to specify
a digest of a manifest in order to create a tag for the corresponding
image.

Below is provided an example on how to tag an image within a repository.
First, a digest of an existing manifest is selected. Then, a custom tag is
applied to the corresponding manifest.

```bash
TAG_NAME='custom_tag'
MANIFEST_DIGEST=$(http $BASE_ADDR'/pulp/api/v3/content/container/manifests/?repository_version='$REPOVERSION_HREF \
  | jq -r '.results | first | .digest')

echo "Tagging the manifest."
pulp container repository tag --name test --tag $TAG_NAME --digest $MANIFEST_DIGEST
```

A new distribution can be created to include the newly created tag. This
allows clients to pull the image with the applied tag.

```bash
TAG_NAME='custom_tag'

DIST_NAME=$(head /dev/urandom | tr -dc a-z | head -c5)
DIST_BASE_PATH='tag'

echo "Publishing the latest repository."
DISTRIBUTION_HREF=$(pulp container distribution create --name $DIST_NAME --base-path $DIST_BASE_PATH --repository $REPO_HREF \
jq -r '.pulp_href')
REGISTRY_PATH=$(http $BASE_ADDR$DISTRIBUTION_HREF \
  | jq -r '.registry_path')

echo "Running ${REGISTRY_PATH}:${TAG_NAME}."
sudo docker login -u admin -p password $REGISTRY_PATH
sudo docker run $REGISTRY_PATH:$TAG_NAME
```

Each tag has to be unique within a repository to prevent ambiguity. When
a user is trying to tag an image with a same name but with a different
digest, the tag associated with the old manifest is going to be
eliminated in a new repository version.


## Untagging

An untagging is an inverse operation to the tagging. To remove a tag
applied to an image, it is required to issue the following calls.

```bash
pulp container repository untag --name test --tag $TAG_NAME
```

Pulp will create a new repository version which will not contain the
corresponding tag. The removed tag however still persists in a database.
When a client tries to untag an image that was already untagged, a new
repository version is created as well.

## Add Content

Any Container content can be added to a repository version with the
recursive-add endpoint. Here, "recursive" means that the content will be
added, as well as all related content.

Relations:
 - Adding a **tag**  will also add the tagged manifest and its related
    content.
  - Adding a **manifest** (manifest list) will also add related
    manifests and their related content.
  - Adding a **manifest** (not manifest list) will also add related
    blobs.

!!! note

    Because tag names are unique within a repository version, adding a tag
    with a duplicate name will first remove the existing tag
    (non-recursively).


Begin by following the `Synchronize <sync-workflow>` workflow to
start with a repository that has some content in it.

Next create a new repository that we can add content to.

```bash
SECOND_REPO_HREF=$(pulp container repository create --name second | jq -r ".pulp_href")
```

Now we recursively add a tag to the destination repository.

```bash
echo "Retrieve the href of Tag manifest_a in the synced repository."
TAG_HREF=$(http $BASE_ADDR'/pulp/api/v3/content/container/tags/?repository_version='$REPOVERSION_HREF'&name=manifest_a' \
  | jq -r '.results | first | .pulp_href')

echo "Create a task to recursively add a tag to the repo."
TASK_HREF=$(http POST $BASE_ADDR$SECOND_REPO_HREF'add/' \
  content_units:="[\"$TAG_HREF\"]" \
  | jq -r '.task')
```

We have added our single tag, as well as the content necessary for that
tag to function correctly when pulled by a client.

New Repository Version:

```
{
    "pulp_created": "2019-09-05T19:04:06.152589Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/",
    "base_version": null,
    "content_summary": {
        "added": {
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version_added=/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/"
            }
        },
        "present": {
            "container.blob": {
                "count": 20,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/"
            },
            "container.manifest": {
                "count": 10,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/"
            },
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/"
            }
        },
        "removed": {
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version_removed=/pulp/api/v3/repositories/container/container/ce642635-dd9b-423f-82c4-86a150b9f5fe/versions/10/"
            }
        }
    },
    "number": 10
}
```

!!! note

    Directly adding a manifest that happens to be tagged in another repo
    will **not** include its tags.



## Remove Content

Any Container content can be removed from a repository version with the
recursive-remove endpoint. Recursive remove is symmetrical with
recursive add, meaning that performing a recursive-add and a
recursive-remove back-to-back with the same content will result in the
original content set. If other operations (i.e. tagging) are done between
recursive-add and recursive remove, they can break the symmetry.

Removing a tag also removes the tagged manifest and its related content,
which is **new behavior with Pulp 3**. If you just want to remove the
tag, but not the related content, use the [untagging workflow](#untagging).

Recursive remove **does not** remove content that is related to content
that will stay in the repository. For example, if a manifest is tagged,
the manifest cannot be removed from the repository -- instead the tag
should be removed. See the relations noted in the [Add Content](#add-content) section.

Continuing from the recursive add workflow, we can
remove the tag and the related content that is no longer needed.

```bash
echo "Create a task to recursively remove the same tag to the repo."
TASK_HREF=$(http POST $BASE_ADDR$SECOND_REPO_HREF'remove/' \
  content_units:="[\"$TAG_HREF\"]" \
  | jq -r '.task')
```

!!! note

    Users can remove all content from the repo by specifying '\*' in the content units field.

Now we can see that the tag and related content that was added has now
been removed, resulting in an empty repository.

New Repository Version:

```
{
    "pulp_created": "2019-09-10T13:25:44.078017Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/c2f67416-7200-4dcc-9868-f320431aae20/versions/2/",
    "base_version": null,
    "content_summary": {
        "added": {},
        "present": {},
        "removed": {
            "container.blob": {
                "count": 20,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version_removed=/pulp/api/v3/repositories/container/container/c2f67416-7200-4dcc-9868-f320431aae20/versions/2/"
            },
            "container.manifest": {
                "count": 10,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version_removed=/pulp/api/v3/repositories/container/container/c2f67416-7200-4dcc-9868-f320431aae20/versions/2/"
            },
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version_removed=/pulp/api/v3/repositories/container/container/c2f67416-7200-4dcc-9868-f320431aae20/versions/2/"
            }
        }
    },
    "number": 2
}
```

## Copy Tags

Tags in one repository can be copied to another repository using the tag
copy endpoint.

When no names are specified, all tags are recursively copied. If names are
specified, only the matching tags are recursively copied.

If tag names being copied already exist in the destination repository,
the conflicting tags are removed from the destination repository and the
new tags are added. This action is not recursive, no manifests or blobs
are removed.

Again we start with a new destination repository.

```bash
pulp container repository create --name second2
```

With copy (contrasted to recursive add) we do not need to retrieve the
href of the tag. Rather, we can specify the tag by source repository and
name.

```bash
pulp container repository copy-tag --name second2 --tag manifest_a --source test
```

New Repository Version:

```
{
    "pulp_created": "2019-09-10T13:42:12.572859Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/",
    "base_version": null,
    "content_summary": {
        "added": {
            "container.blob": {
                "count": 20,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version_added=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            },
            "container.manifest": {
                "count": 10,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version_added=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            },
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version_added=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            }
        },
        "present": {
            "container.blob": {
                "count": 20,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            },
            "container.manifest": {
                "count": 10,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            },
            "container.tag": {
                "count": 1,
                "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container/2b1c6d76-c369-4f31-8eb8-9d5d92bb2346/versions/1/"
            }
        },
        "removed": {}
    },
    "number": 1
}
```

## Copy Manifests

Manifests in one repository can be copied to another repository using
the manifest copy endpoint.

If digests are specified, only the manifests (and their recursively
related content) will be added.

If media types are specified, only manifests matching that media type
(and their recursively related content) will be added. This allows users
to copy only manifest lists, for example.

```bash
echo "Create a task to copy all manifests from source to destination repo."
TASK_HREF=$(http POST $BASE_ADDR$SECOND_REPO_HREF'copy_manifests/' \
  source_repository=$REPO_HREF \
  | jq -r '.task')
```

New Repository Version:

```
{
    "pulp_created": "2019-09-20T13:53:04.907351Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/70450dfb-ae46-4061-84e3-97eb71cf9414/versions/2/",
    "base_version": null,
    "content_summary": {
        "added": {
            "container.blob": {
                "count": 31,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version_added=/pulp/api/v3/repositories/container/container/70450dfb-ae46-4061-84e3-97eb71cf9414/versions/2/"
            },
            "container.manifest": {
                "count": 21,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version_added=/pulp/api/v3/repositories/container/container/70450dfb-ae46-4061-84e3-97eb71cf9414/versions/2/"
            }
        },
        "present": {
            "container.blob": {
                "count": 31,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/70450dfb-ae46-4061-84e3-97eb71cf9414/versions/2/"
            },
            "container.manifest": {
                "count": 21,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/70450dfb-ae46-4061-84e3-97eb71cf9414/versions/2/"
            }
        },
        "removed": {}
    },
    "number": 2
}
```
`````

## File: pulp-docs/pulp_container/docs/user/guides/push-image.md
`````markdown
# Push Images

Users can push images (manifests and manifest lists) to repositories hosted by the Container
Registry. It is possible to push images that container foreign (non-distributable) layers. Only the
users who are logged in to the registry are allowed to perform push operation. Find below a complete
example of pushing a tagged image.

!!! note

    Having disabled the token authentication, only users with superuser privileges (i.e.,
    administrators) are allowed to push content to the registry.

The registry supports cross repository blob mounting. When uploading blobs that already exist in
the registry as a part of a different repository, the content is not being uploaded but rather
referenced from another repository to reduce network traffic.

```
podman tag d21d863f69b5 localhost:24817/test/this:mytag1.8
podman login -u user -p password localhost:24817
podman push d21d863f69b5 localhost:24817/test/this:mytag1.8
```

```
http GET $BASE_ADDR/v2/test/this/tags/list
```

```
HTTP/1.1 200 OK
Allow: GET, HEAD, OPTIONS
Connection: close
Content-Length: 40
Content-Type: application/json
Date: Wed, 03 Jun 2020 18:25:46 GMT
Docker-Distribution-API-Version: registry/2.0
Server: gunicorn/20.0.4
Vary: Accept
X-Frame-Options: SAMEORIGIN

{
    "name": "test/this",
    "tags": [
        "mytag1.8"
    ]
}
```

!!! note

    Content is pushed to a push repository type. A push repository does not support mirroring of the
    remote content via the Pulp API. Trying to push content with the same name as an existing
    "regular" repository will fail.

!!! note

    Rollback to the previous repository versions is not possible with a push repository. Its latest version will always be served.

!!! warning

    Image that has been pulled from a registry and then subsequently pushed to another registy can lead to the blobs digest change.
    Most image layers on registries are compressed. Pull operation decompresses them to get an uncompressed stream, and extracts it
    to create the local filesystem. Push creates an uncompressed tarball from the local filesystem and recompresses it during upload.
    The recompression is not at all guaranteed to be reproducible, it is client implementation dependent — push with different
    compression implementation than the original author used is more likely to result in a different blob digest.
`````

## File: pulp-docs/pulp_container/docs/user/guides/registry-catalog.md
`````markdown
# Registry catalog

A registry may contain several repositories which hold collections of multiple images. Each
repository is identified by its unique name. The list of names of all distributed repositories
is made available through the ``_catalog`` endpoint.

For instance, let's assume that a new distribution of a repository with the name ``library/zoo``
was recently created. Its name is now possible to fetch from the list of names of distributed
repositories.

```bash
$ http https://puffy.example.com/v2/_catalog
HTTP/1.1 200 OK
Access-Control-Expose-Headers: Correlation-ID
Allow: GET, HEAD, OPTIONS
Connection: keep-alive
Content-Length: 63
Content-Type: application/json
Correlation-ID: 1de33d4807a244f1b00c10df3fdc7a1b
Cross-Origin-Opener-Policy: same-origin
Date: Fri, 17 May 2024 10:20:25 GMT
Docker-Distribution-Api-Version: registry/2.0
Referrer-Policy: same-origin
Server: nginx
Strict-Transport-Security: max-age=15768000
Vary: Accept
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-Registry-Supports-Signatures: 1

{
    "repositories": [
        "library/zoo",
        "alice/azure",
    ]
}
```
!!! note
    For the sake of simplicity of this example, there is missing required user token authentication
    to this endpoint. Users will see only those repositories in the registry catalog that they have access to.
    Visit [Token authentication section](site:pulp_container/docs/admin/learn/authentication.md) to learn more.
`````

## File: pulp-docs/pulp_container/docs/user/tutorials/sync-and-host.md
`````markdown
# Mirror and Host Images

Users can populate their repositories with content from an external source like Docker Hub by syncing
their repository. This enables them to maintain the content in a consistent state without depending
on external sources.

## Create a Repository

Start by creating a new repository named "foo".

```bash
pulp container repository create --name foo
```

## Create a Remote

Creating a remote object informs Pulp about an external content source. In this case, we will be
using Docker Hub, but `pulp-container` remotes can be anything that implements the registry API,
including `quay`, `google container registry`, or even another instance of Pulp.

!!! note

    Container plugin supports both Docker and OCI media types.

```bash
pulp container remote create --name foo --url "https://registry-1.docker.io" --upstream-name=pulp/test-fixture-1
```

!!! note

    Use the fields `include/exclude_tags` when a specific set of tags is needed to be mirrored
    instead of the whole repository. Note that it is also possible to filter a bunch of tags that
    matches defined criteria by leveraging wildcards.


Some registries contain signed images. Such registries provide signatures in different ways.
If a registry provides signatures via a dedicated SigStore, a URL to it should be specified in
the `sigstore` field when creating a Remote.

!!! note

    Some registries provide docker API extensions for `atomic container signature` type only, or
    have `cosign` type signatures that are stored as a separate OCI image in a registry.
    Pulp will automatically sync signatures provided via the docker API extension or cosign
    signatures stored as an OCI image.


## Sync Content

Use the remote object to kick off a synchronize task by specifying the repository to
sync with. You are telling pulp to fetch content from the remote and add to the repository.

```bash
pulp container repository sync --name foo --remote foo
```

!!! note

    In the above example, the payload contains the field `mirror=False`. This means that the
    sync will be run in the additive mode only. Set `mirror` to `True` and Pulp will pull
    in new content and remove content which was also removed from upstream.
    The same logic will be applied when `include/exclude_tags` are specified together with
    the `mirror` command, but only on the subset of tags.


!!! note

    It is not posible to push content to a repository that has been used to mirror content.

Every time you change a repository, a new repository version is created. To retrieve a list of repository
versions, use the following command:

```bash
http $BASE_URL/pulp/api/v3/repositories/container/<uuid>/versions/
```

Repository Version GET Response (when complete):

```json
{
    "pulp_created": "2019-09-05T14:29:45.563089Z",
    "pulp_href": "/pulp/api/v3/repositories/container/container/ffcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/",
    "base_version": null,
    "content_summary": {
        "added": {
            "container.blob": {
                "count": 31,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version_added=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            },
            "container.manifest": {
                "count": 21,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version_added=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            },
            "container.tag": {
                "count": 8,
                "href": "/pulp/api/v3/content/container/tags/?repository_version_added=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            }
        },
        "present": {
            "container.blob": {
                "count": 31,
                "href": "/pulp/api/v3/content/container/blobs/?repository_version=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            },
            "container.manifest": {
                "count": 21,
                "href": "/pulp/api/v3/content/container/manifests/?repository_version=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            },
            "container.tag": {
                "count": 8,
                "href": "/pulp/api/v3/content/container/tags/?repository_version=/pulp/api/v3/repositories/container/container/fcf03266-f0e4-4497-8434-0fe9d94c8053/versions/1/"
            }
        },
        "removed": {}
    },
    "number": 1
}
```

!!! note

    To set up a regular sync task, use one of the external tools that deal with periodic background jobs.
    Learn more about scheduling tasks [here](https://docs.pulpproject.org/pulpcore/workflows/scheduling-tasks.html).

## Host and Consume a Repository

This section assumes that you have a repository with content in it. Follow the previous sections to
do so.

### Create a Distribution

Container Distributions can be used to serve the Container registry API
containing the content in a repository's latest version or a specified
repository version.

```
pulp container distribution create --name foo --base-path foo --repository foo
```

### Pull and Run an Image

Once a distribution is configured to host a repository with Container
images in it, that content can be consumed by container clients.

!!! note

    An administrator is expected to configure the environment in advance to enable users to consume
    content with authorized access. Otherwise, the registry will not be able to serve the requested
    content flawlessly. In Pulp, the token authentication is enabled by default and does not come
    pre-configured out of the box.


#### Podman

```
podman pull localhost:24817/foo
```

If SSL has not been setup for your Pulp, configure podman to work with the insecure registry.
Edit the file `/etc/containers/registries.conf.` and add:

```
[registries.insecure]
registries = ['localhost:24817']
```

More info:
<https://www.projectatomic.io/blog/2018/05/podman-tls/>

#### Docker

If SSL has not been setup for your Pulp, configure docker to work with the insecure registry:

Edit the file `/etc/docker/daemon.json` and add:

```
{
    "insecure-registries" : ["localhost:24817"]
}
```

More info:
<https://docs.docker.com/registry/insecure/#deploy-a-plain-http-registry>

=== "Script"

    ```bash
    sudo docker login -u admin -p password localhost:24817
    sudo docker run localhost:24817/foo
    ```

=== "Output"

    ```
    Unable to find image 'localhost:24817/test:latest' locally
    Trying to pull repository localhost:24817/test ...
    sha256:451ce787d12369c5df2a32c85e5a03d52cbcef6eb3586dd03075f3034f10adcd: Pulling from localhost:24817/test
    1b930d010525: Pull complete
    Digest: sha256:451ce787d12369c5df2a32c85e5a03d52cbcef6eb3586dd03075f3034f10adcd
    Status: Downloaded newer image for localhost:24817/test:latest

    Hello from Docker!
    This message shows that your installation appears to be working correctly.

    To generate this message, Docker took the following steps:
     1. The Docker client contacted the Docker daemon.
     2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
        (amd64)
     3. The Docker daemon created a new container from that image which runs the
        executable that produces the output you are currently reading.
     4. The Docker daemon streamed that output to the Docker client, which sent it
        to your terminal.

    To try something more ambitious, you can run an Ubuntu container with:
     $ docker run -it ubuntu bash

    Share images, automate workflows, and more with a free Docker ID:
     https://hub.docker.com/

    For more examples and ideas, visit:
     https://docs.docker.com/get-started/
    ```

!!! note

    When using a container client that cannot handle requested manifests in the new format
    (schema 2), the manifests will **not** be rewritten into the old format (schema 1) and Pulp will
    raise a 404 (HTTPNOTFOUND) error.
`````

## File: pulp-docs/pulp_container/docs/index.md
`````markdown
# Welcome to Pulp Container

The Pulp Container plugin extends Pulp so that you can host your container registry and distribute containers in an on-premises environment.
Pulp is a Container and Artifact Registry that implements [OCI Distribution Specification](https://github.com/opencontainers/distribution-spec/)
and [OCI Image Format Specification](https://github.com/opencontainers/image-spec).

On top of the standard registry capabilites, Pulp Registry provides additional features. For example, you can synchronize from any Container Registry that is HTTP API V2-compatible.
Depending on your needs, you can perform whole or partial syncs from these remote repositories, blend content from different sources, and distribute them throughout your organization using Pulp.
You can also build OCI-compatible images with Pulp Container and push them to a repository in Pulp so you can distribute private containers.

For information about why you might think about hosting your own container registry, see [5 reasons to host your container registry with Pulp](https://opensource.com/article/21/5/container-management-pulp/). At the time of this article's publication, there was no native way to perform import and exports to disconnected or air-gapped environments. This has since been introduced and is available.

If you'd like to watch a recent talk about Pulp Container and see it in action, check out [Registry Native Delivery of Software Content](https://video.fosdem.org/2021/D.infra/registrynativedeliverysoftwarecontentpulp3.mp4).

## Features

- Synchronize container image repositories hosted on Docker-hub, Google Container Registry,
  Quay.io, etc., in mirror or additive mode
- Automatically create Versioned Repositories so every operation is a restorable snapshot
- Download content on-demand when requested by clients to reduce disk space
- Perform docker/podman pull from a container distribution served by Pulp
- Perform docker/podman push to the Pulp Registry
- Curate container images by filtering what is mirrored from an external repository
- Curate container images by creating repository versions with a specific set of images
- Build an OCI format image from a Containerfile and make it available from the Pulp Registry
- Host content either locally or on S3
- De-duplicate all saved content
- Support disconnected and air-gapped environments with the Pulp Import/Export facility for container repositories
- Host Flatpak content in OCI format
- Host Helm Charts
- Host OCI artifacts
- Sign images and host Cosign signatures, SBOMS and attestations
- Sign images and host Atomic signature type via extensions API
- Host content via pull-through caching distributions
- Discover and replicate distributions to serve the same content as the upstream Pulp
`````

## File: pulp-docs/pulp_container/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 2.25.1 (2025-05-16) {: #2.25.1 }

#### Bugfixes {: #2.25.1-bugfix }

- Fixed the Registry API returning 'charset utf-8' in the Content-Type header.
  [#1997](https://github.com/pulp/pulp_container/issues/1997)
- Fixed a 500 error when using a file storage domain at a custom MEDIA_ROOT.
  [#1998](https://github.com/pulp/pulp_container/issues/1998)

---

## 2.25.0 (2025-04-15) {: #2.25.0 }

#### Features {: #2.25.0-feature }

- Added full support for domains.
  [#1534](https://github.com/pulp/pulp_container/issues/1534)
- Added permissions for set/unset_label on RPM content-types.

  The types that support this new call include:
    * Tag
    * Manifest
    * Blob
    * ManifestSignature
  [#1954](https://github.com/pulp/pulp_container/issues/1954)

#### Bugfixes {: #2.25.0-bugfix }

- Fixed integer overflow error when pushing or syncing images greater than 2GB.
  [#1926](https://github.com/pulp/pulp_container/issues/1926)

#### Misc {: #2.25.0-misc }

- [#1621](https://github.com/pulp/pulp_container/issues/1621)

---

## 2.24.2 (2025-04-23) {: #2.24.2 }

No significant changes.

---

## 2.24.1 (2025-03-12) {: #2.24.1 }

#### Bugfixes {: #2.24.1-bugfix }

- Fixed integer overflow error when pushing or syncing images greater than 2GB.
  [#1926](https://github.com/pulp/pulp_container/issues/1926)

---

## 2.24.0 (2025-02-19) {: #2.24.0 }

#### Features {: #2.24.0-feature }

- Add partial support for Domains. The plugin can be installed with the feature turned on, but it
  only functions within the default domain.
  [#domain-enablement](https://github.com/pulp/pulp_container/issues/domain-enablement)

---

## 2.23.0 (2025-02-17) {: #2.23.0 }

#### Bugfixes {: #2.23.0-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)
- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)
- Fixed flatpak index returning 500 when Manifest content was on_demand or had been reclaimed.
  [#1887](https://github.com/pulp/pulp_container/issues/1887)

#### Deprecations and Removals {: #2.23.0-removal }

- Rebased and squashed old migrations to prepare for pulpcore 3.70 compatibility.
  [#1850](https://github.com/pulp/pulp_container/issues/1850)

#### Misc {: #2.23.0-misc }

- [#1910](https://github.com/pulp/pulp_container/issues/1910)

---

## 2.22.2 (2025-04-03) {: #2.22.2 }

No significant changes.

---

## 2.22.1 (2025-01-22) {: #2.22.1 }

#### Bugfixes {: #2.22.1-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)
- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)
- Fixed flatpak index returning 500 when Manifest content was on_demand or had been reclaimed.
  [#1887](https://github.com/pulp/pulp_container/issues/1887)

---

## 2.22.0 (2024-11-01) {: #2.22.0 }

#### Features {: #2.22.0-feature }

- The `build_image` endpoint has been refactored to accept `build_context`
  (i.e., a file repository version) instead of raw artifacts. The same applies to Containerfile."
  [#479](https://github.com/pulp/pulp_container/issues/479)
- Introduced the `type` field on the Manifests endpoint to enable easier differentiation of image
  types.
  [#1751](https://github.com/pulp/pulp_container/issues/1751)
- Added `architecture`, `os`, and `compressed_image_size` fields to Manifest.
  [#1767](https://github.com/pulp/pulp_container/issues/1767)

#### Bugfixes {: #2.22.0-bugfix }

- Resolved an issue with the pull-through cache that was causing errors when retrieving v2 schema 1
  manifests.
  [#1700](https://github.com/pulp/pulp_container/issues/1700)
- Fixed an issue causing an HTTP 500 error when a GET request for a non-existing
  blob was made to a distribution with only a `repository_version` set.
  [#1703](https://github.com/pulp/pulp_container/issues/1703)
- Fixed an HTTP 500 error returned when pushing an image with the same name as the name of an existing
  read-only repository.
  [#1712](https://github.com/pulp/pulp_container/issues/1712)
- Resolved an issue with syncing content causing errors when retrieving manifests without a mediaType
  definition.
  [#1746](https://github.com/pulp/pulp_container/issues/1746)
- Resolved an issue where syncing filtered content with a `cosign` signature from a remote source lacking `Sigstore`,
  and with `signed_only: true` enabled, could occasionally fail.
  [#1759](https://github.com/pulp/pulp_container/issues/1759)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 2.21.2 (2025-01-07) {: #2.21.2 }

No significant changes.

---

## 2.21.1 (2024-10-25) {: #2.21.1 }

#### Bugfixes {: #2.21.1-bugfix }

- Fixed an issue causing an HTTP 500 error when a GET request for a non-existing
  blob was made to a distribution with only a `repository_version` set.
  [#1703](https://github.com/pulp/pulp_container/issues/1703)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 2.21.0 (2024-07-19) {: #2.21.0 }


#### Features {: #2.21.0-feature }

- Added support for filtering remote repositories in pull-through caching using `includes` and
  `excludes` fields. These fields can be set on pull-through caching remote objects.
  [#459](https://github.com/pulp/pulp_container/issues/459)
- Added support for the Replication feature. The replication process allows a Pulp instance to
  replicate container repositories from an upstream Pulp, creating the required remotes,
  repositories (those will always be read-only), and distributions.
  [#1648](https://github.com/pulp/pulp_container/issues/1648)

#### Bugfixes {: #2.21.0-bugfix }

- The pulp signing task that produces atomic type signature no longer signs cosign signatures,
  attestations and sboms (images that end with .sig, .att, or .sbom), and ignores them instead.
  [#1347](https://github.com/pulp/pulp_container/issues/1347)
- Fixed a bug that caused intermittent failures during the pull-through caching when using non-local
  filesystem storage.
  [#1493](https://github.com/pulp/pulp_container/issues/1493)
- Made the pull-through caching machinery resilient to connection errors.
  [#1499](https://github.com/pulp/pulp_container/issues/1499)
- Pulp Container specific settings are now properly validated during the deployment checks of a Pulp
  instance.
  [#1550](https://github.com/pulp/pulp_container/issues/1550)
- Tasks created after uploading manifests will now remain available for further inspection and will not be deleted.
  [#1602](https://github.com/pulp/pulp_container/issues/1602)
- Disallowed anonymous users to pull images from private pull-through distributions.
  [#1623](https://github.com/pulp/pulp_container/issues/1623)
- Permitted users with the `pull_new_containerdistribution` permission to pull new data via
  pull-through distributions.
  [#1624](https://github.com/pulp/pulp_container/issues/1624)
- Modified the `_catalog` endpoint to allow non-authed users to see all repos in catalog
  (private and public) when token-auth is disabled.
  [#1651](https://github.com/pulp/pulp_container/issues/1651)
- Disallowed anonymous users to pull new content via a pull-through caching distribution. Content that
  is already cached/downloaded can be still pulled.
  [#1657](https://github.com/pulp/pulp_container/issues/1657)

#### Misc {: #2.21.0-misc }

- [#1607](https://github.com/pulp/pulp_container/issues/1607), [#1681](https://github.com/pulp/pulp_container/issues/1681)

---

## 2.20.5 (2025-01-07) {: #2.20.5 }

#### Bugfixes {: #2.20.5-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)
- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)

---

## 2.20.4 (2024-10-25) {: #2.20.4 }

#### Bugfixes {: #2.20.4-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 2.20.3 (2024-08-27) {: #2.20.3 }

#### Bugfixes {: #2.20.3-bugfix }

- Resolved an issue with syncing content causing errors when retrieving manifests without a mediaType
  definition.
  [#1746](https://github.com/pulp/pulp_container/issues/1746)

---

## 2.20.2 (2024-07-26) {: #2.20.2 }


No significant changes.

---

## 2.20.1 (2024-07-25) {: #2.20.1 }


#### Bugfixes {: #2.20.1-bugfix }

- Fixed an issue causing an HTTP 500 error when a GET request for a non-existing
  blob was made to a distribution with only a `repository_version` set.
  [#1703](https://github.com/pulp/pulp_container/issues/1703)

---

## 2.20.0 (2024-05-06) {: #2.20.0 }

### Features

-   Updated the Manifest model to no longer rely on artifacts, storing all manifest data internally
    within the database. This change dissociates the manifest from external files on the storage
    backend.
    [#1288](https://github.com/pulp/pulp_container/issues/1288)

### Bugfixes

-   Resolved circular import errors raised when using pulp-container as a library.
    [#1561](https://github.com/pulp/pulp_container/issues/1561)
-   Fixed hande-image-data command to skip content that has labels/annotations already populated.
    [#1573](https://github.com/pulp/pulp_container/issues/1573)
-   Fixed handle-image-data command to update all entries in one run.
    [#1575](https://github.com/pulp/pulp_container/issues/1575)
-   Fixed a bug that disallowed users from leveraging the remote authentication.
    [#1577](https://github.com/pulp/pulp_container/issues/1577)
-   Fixed a bug that caused the registry to not accept requests from anonymous users when token
    authentication was disabled.
    [#1605](https://github.com/pulp/pulp_container/issues/1605)

### Deprecations and Removals

-   Removed the deprecated ADDITIONAL_OCI_ARTIFACT_TYPES setting.
    [#1537](https://github.com/pulp/pulp_container/issues/1537)

### Misc

-   

---

## 2.19.5 (2025-03-18) {: #2.19.5 }

No significant changes.

---

## 2.19.4 (2025-01-07) {: #2.19.4 }

#### Bugfixes {: #2.19.4-bugfix }

- Added ``application/vnd.docker.distribution.manifest.v1+prettyjws`` to the list of accepted
  media types retrieved from a remote registry.
  [#1444](https://github.com/pulp/pulp_container/issues/1444)
- Fixed sync failure due to ignored certs during registry signature extentions API check.
  [#1552](https://github.com/pulp/pulp_container/issues/1552)
- Fixed a bug that disallowed users from leveraging the remote authentication.
  [#1577](https://github.com/pulp/pulp_container/issues/1577)
- Fixed a bug that caused the registry to not accept requests from anonymous users when token
  authentication was disabled.
  [#1605](https://github.com/pulp/pulp_container/issues/1605)
- Fixed the long accept header limit exceed during sync.
  [#1696](https://github.com/pulp/pulp_container/issues/1696)
- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)
- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)

---

## 2.19.3 (2024-04-23) {: #2.19.3 }

### Bugfixes

-   Fixed hande-image-data command to skip content that has labels/annotations already populated.
    [#1573](https://github.com/pulp/pulp_container/issues/1573)
-   Fixed handle-image-data command to update all entries in one run.
    [#1575](https://github.com/pulp/pulp_container/issues/1575)
-   Fixed a bug that disallowed users from leveraging the remote authentication.
    [#1577](https://github.com/pulp/pulp_container/issues/1577)

---

## 2.19.2 (2024-03-20) {: #2.19.2 }

No significant changes.

---

## 2.19.1 (2024-03-20) {: #2.19.1 }

### Bugfixes

-   Resolved circular import errors raised when using pulp-container as a library.
    [#1561](https://github.com/pulp/pulp_container/issues/1561)

---

## 2.19.0 (2024-03-15) {: #2.19.0 }

### Features

-   Incorporated a notion of container images' characteristics. Users can now filter manifests by their
    nature using the `is_flatpak` or `is_bootable` field on the corresponding Manifest endpoint.
    In addition to that, manifest's annotations and configuration labels were exposed on the same
    endpoint too.
    [#1437](https://github.com/pulp/pulp_container/issues/1437)
-   Updated the OCI manifest schema validation to comply with the changes from the OCI Image Manifest
    Specification.
    [#1494](https://github.com/pulp/pulp_container/issues/1494)

### Bugfixes

-   Fixed sync failure due to ignored certs during registry signature extentions API check.
    [#1552](https://github.com/pulp/pulp_container/issues/1552)

### Improved Documentation

-   Migrated the whole documentation to staging. The documentation should be now consumed from the
    unified docs site.
    [#1517](https://github.com/pulp/pulp_container/issues/1517)

### Deprecations and Removals

-   Removed the optional "kid" parameter stored inside the signatures' payload generated during
    docker manifest v2 schema 1 conversion. This change also removes the `ecdsa` dependency,
    which is vulnerable to Minevra timing attacks.
    [#1485](https://github.com/pulp/pulp_container/issues/1485)
-   Removed the manifest schema conversion machinery. If the manifest is stored locally in the newer
    format and old clients request v2 schema1 manifest they will receive 404. v2 schema1 manifest is
    still going to be mirrored from remote source during sync if available and passed to the old clients
    on the request.
    [#1509](https://github.com/pulp/pulp_container/issues/1509)
-   Deprecated `ADDITIONAL_OCI_ARTIFACT_TYPES` setting in favour of the relaxed validation.
    [#1494](https://github.com/pulp/pulp_container/issues/1494)

---

## 2.18.1 (2024-03-15) {: #2.18.1 }

### Bugfixes

-   Fixed sync failure due to ignored certs during registry signature extentions API check.
    [#1552](https://github.com/pulp/pulp_container/issues/1552)

---

## 2.18.0 (2024-02-02) {: #2.18.0 }

### Features

-   Added support for pull-through caching. Users can now configure a dedicated distribution and remote
    linked to an external registry without the need to create and mirror repositories in advance. Pulp
    downloads missing content automatically if requested and acts as a caching proxy.
    [#507](https://github.com/pulp/pulp_container/issues/507)

### Bugfixes

-   Added `application/vnd.docker.distribution.manifest.v1+prettyjws` to the list of accepted
    media types retrieved from a remote registry.
    [#1444](https://github.com/pulp/pulp_container/issues/1444)

### Misc

-   [#489](https://github.com/pulp/pulp_container/issues/489), [#1275](https://github.com/pulp/pulp_container/issues/1275)

---

## 2.17.0 (2023-11-03) {: #2.17.0 }

### Features

-   Started signing manifests asynchronously. This feature improves the performance of signing tasks.
    Additionally, setting `MAX_PARALLEL_SIGNING_TASKS` was introduced to cap the number of threads
    used for parallel signing (defaults to `10`).
    [#1208](https://github.com/pulp/pulp_container/issues/1208)
-   Adjusted default access policies for new labels API.
    [#1384](https://github.com/pulp/pulp_container/issues/1384)
-   Made pulp_container compatible with pulpcore 3.40.
    [#1399](https://github.com/pulp/pulp_container/issues/1399)

### Bugfixes

-   Fixed re-sync failures after reclaiming disk space.
    [#1400](https://github.com/pulp/pulp_container/issues/1400)

---

## 2.16.11 (2025-03-18) {: #2.16.11 }

#### Bugfixes {: #2.16.11-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)

---

## 2.16.10 (2025-01-07) {: #2.16.10 }

#### Bugfixes {: #2.16.10-bugfix }

- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)

---

## 2.16.9 (2024-07-09) {: #2.16.9 }


#### Bugfixes {: #2.16.9-bugfix }

- Fixed the long accept header limit exceed during sync.
  [#1696](https://github.com/pulp/pulp_container/issues/1696)

---

## 2.16.8 (2024-06-27) {: #2.16.8 }


#### Bugfixes {: #2.16.8-bugfix }

- Fixed a bug that disallowed users from leveraging the remote authentication.
  [#1577](https://github.com/pulp/pulp_container/issues/1577)
- Fixed a bug that caused the registry to not accept requests from anonymous users when token
  authentication was disabled.
  [#1605](https://github.com/pulp/pulp_container/issues/1605)

---

## 2.16.7 (2024-06-21) {: #2.16.7 }


No significant changes.

---

## 2.16.6 (2024-03-15) {: #2.16.6 }

### Bugfixes

-   Fixed sync failure due to ignored certs during registry signature extentions API check.
    [#1552](https://github.com/pulp/pulp_container/issues/1552)

---

## 2.16.5 (2024-02-14) {: #2.16.5 }

### Deprecations and Removals

-   Removed the optional "kid" parameter stored inside the signatures' payload generated during
    docker manifest v2 schema 1 conversion. This change also removes the `ecdsa` dependency,
    which is vulnerable to Minevra timing attacks.
    [#1485](https://github.com/pulp/pulp_container/issues/1485)

---

## 2.16.4 (2024-01-24) {: #2.16.4 }

### Bugfixes

-   Fixed re-sync failures after reclaiming disk space.
    [#1400](https://github.com/pulp/pulp_container/issues/1400)

---

## 2.16.3 (2023-12-15) {: #2.16.3 }

### Bugfixes

-   Added `application/vnd.docker.distribution.manifest.v1+prettyjws` to the list of accepted
    media types retrieved from a remote registry.
    [#1444](https://github.com/pulp/pulp_container/issues/1444)

---

## 2.16.2 (2023-09-09) {: #2.16.2 }

No significant changes.

---

## 2.16.1 (2023-09-09) {: #2.16.1 }

No significant changes.

---

## 2.16.0 (2023-08-02) {: #2.16.0 }

### Features

-   Added OCI artifact support for Helm charts.
    [#464](https://github.com/pulp/pulp_container/issues/464)
-   Added support to serve cosign signatures, SBOMs, and attestations.
    [#1165](https://github.com/pulp/pulp_container/issues/1165)
-   Added support to mirror cosign signatures, SBOMs and attestations.
    [#1166](https://github.com/pulp/pulp_container/issues/1166)
-   Added suport to push cosign signatures, attestations or SBOMs to Pulp Registry.
    [#1167](https://github.com/pulp/pulp_container/issues/1167)
-   Added support for monolithic upload.
    [#1219](https://github.com/pulp/pulp_container/issues/1219)
-   Enabled Pulp registry to support by default some well-known OCI types.
    [#1232](https://github.com/pulp/pulp_container/issues/1232)
-   Added `ADDITIONAL_OCI_ARTIFACT_TYPES` setting to make the list of supported OCI artifact types
    configurable.
    [#1233](https://github.com/pulp/pulp_container/issues/1233)
-   Added support for Flatpak index endpoints.
    [#1315](https://github.com/pulp/pulp_container/issues/1315)

### Bugfixes

-   Taught the Container Registry to accept docker schema2 sub-manifest types in OCI index.
    [#1231](https://github.com/pulp/pulp_container/issues/1231)
-   Fixed a security issue that allowed users without sufficient permissions to mount blobs.
    [#1286](https://github.com/pulp/pulp_container/issues/1286)
-   Ensured downloader during the repair task contains accept headers for the
    manifests to download.
    [#1303](https://github.com/pulp/pulp_container/issues/1303)
-   Disabled TLS validation, if opted out in a remote, when syncing signatures.
    [#1305](https://github.com/pulp/pulp_container/issues/1305)
-   Fixed pulp-to-pulp failing sync with `406 Not Acceptable`.
    [#1329](https://github.com/pulp/pulp_container/issues/1329)

### Improved Documentation

-   Took the import/export feature out of tech preview.
    [#1236](https://github.com/pulp/pulp_container/issues/1236)

---

## 2.15.7 (2025-01-07) {: #2.15.7 }

#### Bugfixes {: #2.15.7-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)
- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)

---

## 2.15.6 (2024-03-15) {: #2.15.6 }

### Bugfixes

-   Fixed sync failure due to ignored certs during registry signature extentions API check.
    [#1552](https://github.com/pulp/pulp_container/issues/1552)

---

## 2.15.5 (2024-02-15) {: #2.15.5 }

### Deprecations and Removals

-   Removed the optional "kid" parameter stored inside the signatures' payload generated during
    docker manifest v2 schema 1 conversion. This change also removes the `ecdsa` dependency,
    which is vulnerable to Minevra timing attacks.
    [#1485](https://github.com/pulp/pulp_container/issues/1485)

---

## 2.15.4 (2024-01-15) {: #2.15.4 }

### Bugfixes

-   Taught the Container Registry to accept docker schema2 sub-manifest types in OCI index.
    [#1231](https://github.com/pulp/pulp_container/issues/1231)

---

## 2.15.3 (2023-12-15) {: #2.15.3 }

### Bugfixes

-   Fixed re-sync failures after reclaiming disk space.
    [#1400](https://github.com/pulp/pulp_container/issues/1400)
-   Added `application/vnd.docker.distribution.manifest.v1+prettyjws` to the list of accepted
    media types retrieved from a remote registry.
    [#1444](https://github.com/pulp/pulp_container/issues/1444)

---

## 2.15.2 (2023-07-24) {: #2.15.2 }

### Bugfixes

-   Fixed a security issue that allowed users without sufficient permissions to mount blobs.
    [#1286](https://github.com/pulp/pulp_container/issues/1286)
-   Fixed pulp-to-pulp failing sync with `406 Not Acceptable`.
    [#1329](https://github.com/pulp/pulp_container/issues/1329)

---

## 2.15.1 (2023-06-15) {: #2.15.1 }

### Bugfixes

-   Relaxed oci manifest json validation to allow other layer mediaTypes than oci layer type.
    [#1227](https://github.com/pulp/pulp_container/issues/1227)
-   Ensured downloader during the repair task contains accept headers for the
    manifests to download.
    [#1303](https://github.com/pulp/pulp_container/issues/1303)

---

## 2.15.0 (2023-05-26) {: #2.15.0 }

### Features

-   Added support for automatically creating missing repositories during the import procedure. The
    creation is disabled by default. Use `create_repositories=True` to tell Pulp to create missing
    repositories when executing the import procedure.
    [#825](https://github.com/pulp/pulp_container/issues/825)
-   Added a check if a manifest already exists locally to decrease the number of downloads from a remote registry when syncing content.
    [#1047](https://github.com/pulp/pulp_container/issues/1047)
-   Enhanced push operation efficiency by implementing the utilization of ephemeral blobs and
    manifests, eliminating the need for generating unnecessary repository versions.
    [#1212](https://github.com/pulp/pulp_container/issues/1212)
-   Updated compatibility for pulpcore 3.25 and Django 4.2.
    [#1277](https://github.com/pulp/pulp_container/issues/1277)

### Bugfixes

-   Ensured an HTTP 401 response in case a user provides invalid credentials during the login
    (e.g., via `podman login`).
    [#918](https://github.com/pulp/pulp_container/issues/918)
-   Translated v1 signed schema media_type into v1 schema instead.
    [#1045](https://github.com/pulp/pulp_container/issues/1045)
-   Fixed content-disposition header which is used in the object storage backends.
    [#1096](https://github.com/pulp/pulp_container/issues/1096)
-   Fixed an issue that caused all staff users to have superuser permissions when accessing the
    registry without token authentication enabled.
    [#1109](https://github.com/pulp/pulp_container/issues/1109)
-   Fixed a bug where the Podman client could not verify manifest indices signed with a Pulp signing service.
    [#1135](https://github.com/pulp/pulp_container/issues/1135)
-   Fixed a method for determining the media type of manifests when syncing content.
    [#1147](https://github.com/pulp/pulp_container/issues/1147)
-   Added application/octet-stream as an accepted media_type for docker config objects.
    [#1156](https://github.com/pulp/pulp_container/issues/1156)
-   Fixed signing task that could skip some image signing.
    [#1209](https://github.com/pulp/pulp_container/issues/1209)
-   Started triggering only one mount-blob task per upload after back-off.
    [#1211](https://github.com/pulp/pulp_container/issues/1211)
-   Started sanitizing input data when creating namespaces or distributions.
    [#1229](https://github.com/pulp/pulp_container/issues/1229)
-   Fixed a bug that disallowed users to build images that have artifacts within the same directory.
    [#1234](https://github.com/pulp/pulp_container/issues/1234)
-   Fixed a bug that disallowed users to configure custom authentication classes for the token server.
    [#1254](https://github.com/pulp/pulp_container/issues/1254)

### Misc

-   [#1093](https://github.com/pulp/pulp_container/issues/1093), [#1154](https://github.com/pulp/pulp_container/issues/1154)

---

## 2.14.18 (2025-03-18) {: #2.14.18 }

#### Bugfixes {: #2.14.18-bugfix }

- Fixed a bug where the authentication scheme in the authorization header
  was not being parsed correctly.
  [#1812](https://github.com/pulp/pulp_container/issues/1812)

---

## 2.14.17 (2025-01-07) {: #2.14.17 }

#### Bugfixes {: #2.14.17-bugfix }

- Fixed an issue in `DOCKER_MANIFEST_V1_SCHEMA` definition where the optional `jwk` header parameter
  was defined as required.
  [#1874](https://github.com/pulp/pulp_container/issues/1874)

---

## 2.14.16 (2024-07-24) {: #2.14.16 }


No significant changes.

---

## 2.14.15 (2024-07-09) {: #2.14.15 }


#### Bugfixes {: #2.14.15-bugfix }

- Fixed the long accept header limit exceed during sync.
  [#1696](https://github.com/pulp/pulp_container/issues/1696)

---

## 2.14.14 (2024-06-20) {: #2.14.14 }


No significant changes.

---

## 2.14.13 (2024-03-15) {: #2.14.13 }

### Bugfixes

-   Fixed sync failure due to ignored certs during registry signature extentions API check.
    [#1552](https://github.com/pulp/pulp_container/issues/1552)

---

## 2.14.12 (2024-02-15) {: #2.14.12 }

### Deprecations and Removals

-   Removed the optional "kid" parameter stored inside the signatures' payload generated during
    docker manifest v2 schema 1 conversion. This change also removes the `ecdsa` dependency,
    which is vulnerable to Minevra timing attacks.
    [#1485](https://github.com/pulp/pulp_container/issues/1485)

---

## 2.14.11 (2024-01-30) {: #2.14.11 }

### Bugfixes

-   Disabled TLS validation, if opted out in a remote, when syncing signatures.
    [#1305](https://github.com/pulp/pulp_container/issues/1305)

---

## 2.14.10 (2024-01-15) {: #2.14.10 }

### Bugfixes

-   Taught the Container Registry to accept docker schema2 sub-manifest types in OCI index.
    [#1231](https://github.com/pulp/pulp_container/issues/1231)

---

## 2.14.9 (2023-12-15) {: #2.14.9 }

### Bugfixes

-   Added `application/vnd.docker.distribution.manifest.v1+prettyjws` to the list of accepted
    media types retrieved from a remote registry.
    [#1444](https://github.com/pulp/pulp_container/issues/1444)

---

## 2.14.8 (2023-10-31) {: #2.14.8 }

### Bugfixes

-   Fixed re-sync failures after reclaiming disk space.
    [#1400](https://github.com/pulp/pulp_container/issues/1400)

---

## 2.14.7 (2023-07-24) {: #2.14.7 }

### Bugfixes

-   Fixed a security issue that allowed users without sufficient permissions to mount blobs.
    [#1286](https://github.com/pulp/pulp_container/issues/1286)
-   Fixed pulp-to-pulp failing sync with `406 Not Acceptable`.
    [#1329](https://github.com/pulp/pulp_container/issues/1329)

---

## 2.14.6 (2023-06-15) {: #2.14.6 }

### Bugfixes

-   Ensured an HTTP 401 response in case a user provides invalid credentials during the login
    (e.g., via `podman login`).
    [#918](https://github.com/pulp/pulp_container/issues/918)
-   Started triggering only one mount-blob task per upload after back-off.
    [#1211](https://github.com/pulp/pulp_container/issues/1211)
-   Ensured downloader during the repair task contains accept headers for the
    manifests to download.
    [#1303](https://github.com/pulp/pulp_container/issues/1303)

---

## 2.14.5 (2023-04-11) {: #2.14.5 }

### Bugfixes

-   Fixed a bug that disallowed users to configure custom authentication classes for the token server.
    [#1254](https://github.com/pulp/pulp_container/issues/1254)

---

## 2.14.4 (2023-03-30) {: #2.14.4 }

### Bugfixes

-   Fixed signing task that could skip some image signing.
    [#1209](https://github.com/pulp/pulp_container/issues/1209)
-   Relaxed oci manifest json validation to allow other layer mediaTypes than oci layer type.
    [#1227](https://github.com/pulp/pulp_container/issues/1227)

---

## 2.14.3 (2022-12-02) {: #2.14.3 }

### Bugfixes

-   Fixed a bug where the Podman client could not verify manifest indices signed with a Pulp signing service.
    [#1135](https://github.com/pulp/pulp_container/issues/1135)
-   Fixed a method for determining the media type of manifests when syncing content.
    [#1147](https://github.com/pulp/pulp_container/issues/1147)
-   Added application/octet-stream as an accepted media_type for docker config objects.
    [#1156](https://github.com/pulp/pulp_container/issues/1156)

---

## 2.14.2 (2022-10-22) {: #2.14.2 }

No significant changes.

---

## 2.14.1 (2022-10-07) {: #2.14.1 }

### Bugfixes

-   Translated v1 signed schema media_type into v1 schema instead.
    [#1045](https://github.com/pulp/pulp_container/issues/1045)

---

## 2.14.0 (2022-08-25) {: #2.14.0 }

### Features

-   Added validation for uploaded and synced manifest JSON content.
    [#672](https://github.com/pulp/pulp_container/issues/672)

### Bugfixes

-   Silenced redundant logs when downloading signatures.
    [#518](https://github.com/pulp/pulp_container/issues/518)
-   Silenced redundant GnuPG errors logged while decrypting manifest signatures.
    [#519](https://github.com/pulp/pulp_container/issues/519)
-   Fixed a bug that caused untagged manifests to be tagged by their digest during the push operation.
    [#852](https://github.com/pulp/pulp_container/issues/852)
-   Fixed internal server errors raised when a podman client (<4.0) used invalid content types for
    manifest lists.
    [#853](https://github.com/pulp/pulp_container/issues/853)
-   Fixed a misleading error message raised when a user provided an invalid manifest list.
    [#854](https://github.com/pulp/pulp_container/issues/854)
-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)
-   Started returning an HTTP 401 response in case of invalid credentials provided by a container
    client (e.g., `podman`).
    [#918](https://github.com/pulp/pulp_container/issues/918)
-   Configured aiohttp to avoid rewriting redirect URLs, as some web servers
    (e.g. Amazon CloudFront) can be tempermental about the encoding of the URL.
    [#919](https://github.com/pulp/pulp_container/issues/919)
-   Fixed the Content-Length key error raised when uploading images.
    [#921](https://github.com/pulp/pulp_container/issues/921)
-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

### Misc

-   [#687](https://github.com/pulp/pulp_container/issues/687)

---

## 2.13.3 (2022-09-14) {: #2.13.3 }

### Bugfixes

-   Translated v1 signed schema media_type into v1 schema instead.
    [#1045](https://github.com/pulp/pulp_container/issues/1045)

---

## 2.13.2 (2022-08-24) {: #2.13.2 }

### Bugfixes

-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

---

## 2.13.1 (2022-08-02) {: #2.13.1 }

### Bugfixes

-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)
-   Fixed the Content-Length key error raised when uploading images.
    [#921](https://github.com/pulp/pulp_container/issues/921)

---

## 2.13.0 (2022-06-24) {: #2.13.0 }

### Features

-   Added support for streaming artifacts from object storage.
    [#731](https://github.com/pulp/pulp_container/issues/731)

### Bugfixes

-   Fixed the machinery for building OCI images.
    [#461](https://github.com/pulp/pulp_container/issues/461)
-   Fixed the regular expression for matching base paths in distributions.
    [#756](https://github.com/pulp/pulp_container/issues/756)
-   Fixed generation of the redirect url to the object storage
    [#767](https://github.com/pulp/pulp_container/issues/767)
-   Enforced the reference to manifests from tags. Note that this bugfix introduces a migration that
    removes tags without any reference to the manifests.
    [#789](https://github.com/pulp/pulp_container/issues/789)
-   Improved image upload process from podman/docker clients.
    These clients send data as one big chunk hence we don't need to save it
    as chunk but as an artifact directly.
    [#797](https://github.com/pulp/pulp_container/issues/797)
-   Fixed upload does not exist error during image push operation.
    [#861](https://github.com/pulp/pulp_container/issues/861)

### Improved Documentation

-   Improved the documentation for RBAC by adding a new section for roles and a new section for
    migrating from permissions to roles.
    [#641](https://github.com/pulp/pulp_container/issues/641)

### Misc

-   [#678](https://github.com/pulp/pulp_container/issues/678), [#772](https://github.com/pulp/pulp_container/issues/772), [#791](https://github.com/pulp/pulp_container/issues/791), [#809](https://github.com/pulp/pulp_container/issues/809)

---

## 2.12.3 (2022-08-24) {: #2.12.3 }

### Bugfixes

-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)
-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

---

## 2.12.2 (2022-07-11) {: #2.12.2 }

### Bugfixes

-   Fixed upload does not exist error during image push operation.
    [#861](https://github.com/pulp/pulp_container/issues/861)

---

## 2.12.1 (2022-05-12) {: #2.12.1 }

### Misc

-   [#772](https://github.com/pulp/pulp_container/issues/772)

---

## 2.12.0 (2022-05-05) {: #2.12.0 }

### Features

-   Added more robust validation for unknown fields passed via REST API requests.
    [#475](https://github.com/pulp/pulp_container/issues/475)
-   Added validation for signatures' payloads.
    [#512](https://github.com/pulp/pulp_container/issues/512)
-   Log messages are now not being translated.
    [#690](https://github.com/pulp/pulp_container/issues/690)

### Bugfixes

-   Fixed url of the registry root endpoint during signature source check.
    [#646](https://github.com/pulp/pulp_container/issues/646)
-   Fixed sync of signed content failing with the error [DeclarativeContent' object has no attribute 'd_content']{.title-ref}.
    [#654](https://github.com/pulp/pulp_container/issues/654)
-   Fixed group related creation hooks that failed if no current user could be identified.
    [#673](https://github.com/pulp/pulp_container/issues/673)
-   Fixed other instances of fd leak.
    [#679](https://github.com/pulp/pulp_container/issues/679)
-   Removed Namespace validation.
    Namespaces are managed transparently on behalf of the user.
    [#688](https://github.com/pulp/pulp_container/issues/688)
-   Fixed some tasks that were using /tmp/ instead of the worker working directory.
    [#696](https://github.com/pulp/pulp_container/issues/696)
-   Fixed the reference to a serializer for building images.
    [#718](https://github.com/pulp/pulp_container/issues/718)
-   Fixed the regular expression for matching dockerhub URLs.
    [#736](https://github.com/pulp/pulp_container/issues/736)

### Improved Documentation

-   Added docs for client signature verification policy.
    [#530](https://github.com/pulp/pulp_container/issues/530)

### Misc

-   [#486](https://github.com/pulp/pulp_container/issues/486), [#495](https://github.com/pulp/pulp_container/issues/495), [#606](https://github.com/pulp/pulp_container/issues/606), [#640](https://github.com/pulp/pulp_container/issues/640), [#665](https://github.com/pulp/pulp_container/issues/665)

---

## 2.11.2 (2022-08-24) {: #2.11.2 }

### Bugfixes

-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)
-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

---

## 2.11.1 (2022-07-12) {: #2.11.1 }

### Bugfixes

-   Fixed sync of signed content failing with the error [DeclarativeContent' object has no attribute 'd_content']{.title-ref}.
    [#654](https://github.com/pulp/pulp_container/issues/654)
-   Fixed group related creation hooks that failed if no current user could be identified.
    [#673](https://github.com/pulp/pulp_container/issues/673)
-   Fixed some tasks that were using /tmp/ instead of the worker working directory.
    [#696](https://github.com/pulp/pulp_container/issues/696)
-   Fixed upload does not exist error during image push operation.
    [#861](https://github.com/pulp/pulp_container/issues/861)

---

## 2.11.0 (2022-03-16) {: #2.11.0 }

### Features

-   Allow upload of non-distributable layers.
    [#462](https://github.com/pulp/pulp_container/issues/462)
-   Added support for pushing manifest lists via the Registry API.
    [#469](https://github.com/pulp/pulp_container/issues/469)
-   Added support for cross repository blob mount.
    [#494](https://github.com/pulp/pulp_container/issues/494)
-   Added support for caching responses from the registry. The caching is not enabled by default.
    Enable it by configuring the Redis connection and defining `CACHE_ENABLED = True` in the
    settings file.
    [#496](https://github.com/pulp/pulp_container/issues/496)
-   Added model, serializer, filter and viewset for image manifest signature.
    Added ability to sync manifest signatures from a sigstore.
    [#498](https://github.com/pulp/pulp_container/issues/498)
-   Added ability to sign container images from within The Pulp Registry.
    manifest_signing_service is used to produce signed container content.
    [#500](https://github.com/pulp/pulp_container/issues/500)
-   Added support for pushing image signatures to the Pulp Registry. The signatures can be pushed by
    utilizing the extensions API.
    [#502](https://github.com/pulp/pulp_container/issues/502)
-   Added an extensions API endpoint for downloading image signatures.
    [#504](https://github.com/pulp/pulp_container/issues/504)
-   Enabled users to import/export image signatures.
    [#506](https://github.com/pulp/pulp_container/issues/506)
-   Ported RBAC implementation to use pulpcore roles.
    [#508](https://github.com/pulp/pulp_container/issues/508)
-   Added recursive removal of manifest signatures when a manifest is removed from a repository.
    [#511](https://github.com/pulp/pulp_container/issues/511)
-   Added support for syncing signatures using docker API extension.
    [#528](https://github.com/pulp/pulp_container/issues/528)
-   Added ability to remove signatures from a container(push) repo.
    [#548](https://github.com/pulp/pulp_container/issues/548)
-   Don't reject manifest that has non-distributable layers during upload.
    [#598](https://github.com/pulp/pulp_container/issues/598)

### Bugfixes

-   Don't store blob's media_type on the model.
    There is no way to say what mimetype it has when it comes into the registry.
    [#493](https://github.com/pulp/pulp_container/issues/493)
-   Account for case when token's scope does not contain type/resource/action.
    [#509](https://github.com/pulp/pulp_container/issues/509)
-   Fixed content retrieval from distribution when repo is removed.
    [#513](https://github.com/pulp/pulp_container/issues/513)
-   Fixed file descriptor leak during image push.
    [#523](https://github.com/pulp/pulp_container/issues/523)
-   Fixed "manifest_id" violates not-null constraint error during sync.
    [#537](https://github.com/pulp/pulp_container/issues/537)
-   Fixed error during container image push.
    [#542](https://github.com/pulp/pulp_container/issues/542)
-   Return a more concise message exception on 500 during image pull when content is missing on the FS.
    [#555](https://github.com/pulp/pulp_container/issues/555)
-   Fixed a bug that disallowed users who were authenticated by a remote webserver to access the
    Registry API endpoints when token authentication was disabled.
    [#558](https://github.com/pulp/pulp_container/issues/558)
-   Successfully re-upload artifact in case it was previously removed.
    [#595](https://github.com/pulp/pulp_container/issues/595)
-   Fixed check for the signature source location.
    [#617](https://github.com/pulp/pulp_container/issues/617)
-   Accept token under access_token for compat reasons.
    [#619](https://github.com/pulp/pulp_container/issues/619)

### Misc

-   [#561](https://github.com/pulp/pulp_container/issues/561)

---

## 2.10.13 (2024-02-15) {: #2.10.13 }

### Deprecations and Removals

-   Removed the optional "kid" parameter stored inside the signatures' payload generated during
    docker manifest v2 schema 1 conversion. This change also removes the `ecdsa` dependency,
    which is vulnerable to Minevra timing attacks.
    [#1485](https://github.com/pulp/pulp_container/issues/1485)

---

## 2.10.12 (2023-02-28) {: #2.10.12 }

### Bugfixes

-   Fixed a method for determining the media type of manifests when syncing content.
    [#1147](https://github.com/pulp/pulp_container/issues/1147)

---

## 2.10.11 (2023-01-11) {: #2.10.11 }

### Bugfixes

-   Fixed container repo sync failure 'null value in column "image_manifest_id" violates not-null constraint'.
    [#1190](https://github.com/pulp/pulp_container/issues/1190)

---

## 2.10.10 (2022-10-20) {: #2.10.10 }

### Bugfixes

-   Fixed a database error raised when creating a distribution with a long base_path.
    [#1103](https://github.com/pulp/pulp_container/issues/1103)

---

## 2.10.9 (2022-09-14) {: #2.10.9 }

### Bugfixes

-   Translated v1 signed schema media_type into v1 schema instead.
    [#1045](https://github.com/pulp/pulp_container/issues/1045)

---

## 2.10.8 (2022-08-24) {: #2.10.8 }

### Bugfixes

-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

---

## 2.10.7 (2022-08-16) {: #2.10.7 }

No significant changes.

---

## 2.10.6 (2022-08-15) {: #2.10.6 }

No significant changes.

---

## 2.10.5 (2022-08-02) {: #2.10.5 }

### Bugfixes

-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)

---

## 2.10.4 (2022-07-11) {: #2.10.4 }

### Bugfixes

-   Fixed upload does not exist error during image push operation.
    [#861](https://github.com/pulp/pulp_container/issues/861)

---

## 2.10.3 (2022-04-05) {: #2.10.3 }

### Bugfixes

-   Accept token under access_token for compat reasons.
    [#619](https://github.com/pulp/pulp_container/issues/619)
-   Fixed group related creation hooks that failed if no current user could be identified.
    [#673](https://github.com/pulp/pulp_container/issues/673)

---

## 2.10.2 (2022-03-04) {: #2.10.2 }

### Bugfixes

-   Return a more concise message exception on 500 during image pull when content is missing on the FS.
    [#555](https://github.com/pulp/pulp_container/issues/555)
-   Successfully re-upload artifact in case it was previously removed.
    [#595](https://github.com/pulp/pulp_container/issues/595)

---

## 2.10.1 (2022-02-15) {: #2.10.1 }

### Bugfixes

-   Fixed file descriptor leak during image push.
    [#523](https://github.com/pulp/pulp_container/issues/523)
-   Fixed "manifest_id" violates not-null constraint error during sync.
    [#537](https://github.com/pulp/pulp_container/issues/537)
-   Fixed error during container image push.
    [#542](https://github.com/pulp/pulp_container/issues/542)

---

## 2.10.0 (2021-12-14) {: #2.10.0 }

### Features

-   Enabled Azure storage backend support.
    [#9488](https://pulp.plan.io/issues/9488)
-   Enabled rate_limit option on the remote. Rate limit defines N req/sec per connection.
    [#9607](https://pulp.plan.io/issues/9607)

---

## 2.9.10 (2023-02-28) {: #2.9.10 }

### Bugfixes

-   Fixed a method for determining the media type of manifests when syncing content.
    [#1147](https://github.com/pulp/pulp_container/issues/1147)
-   Fixed container repo sync failure 'null value in column "image_manifest_id" violates not-null constraint'.
    [#1190](https://github.com/pulp/pulp_container/issues/1190)

---

## 2.9.9 (2022-10-20) {: #2.9.9 }

### Bugfixes

-   Fixed a database error raised when creating a distribution with a long base_path.
    [#1103](https://github.com/pulp/pulp_container/issues/1103)

---

## 2.9.8 (2022-09-14) {: #2.9.8 }

### Bugfixes

-   Translated v1 signed schema media_type into v1 schema instead.
    [#1045](https://github.com/pulp/pulp_container/issues/1045)

---

## 2.9.7 (2022-08-24) {: #2.9.7 }

### Bugfixes

-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)
-   Introduced the `pulpcore-manager container-repair-media-type` command to fix incorrect media
    types of manifests that could have been stored in the database as a result of a sync task.
    [#977](https://github.com/pulp/pulp_container/issues/977)

---

## 2.9.6 (2022-08-02) {: #2.9.6 }

### Bugfixes

-   Fixed an error that was raised when an OCI manifest did not contain `mediaType`.
    [#883](https://github.com/pulp/pulp_container/issues/883)

---

## 2.9.5 (2022-07-11) {: #2.9.5 }

### Bugfixes

-   Accept token under access_token for compat reasons.
    [#619](https://github.com/pulp/pulp_container/issues/619)
-   Fixed upload does not exist error during image push operation.
    [#861](https://github.com/pulp/pulp_container/issues/861)

---

## 2.9.4 (2022-03-04) {: #2.9.4 }

### Bugfixes

-   Return a more concise message exception on 500 during image pull when content is missing on the FS.
    [#555](https://github.com/pulp/pulp_container/issues/555)
-   Successfully re-upload artifact in case it was previously removed.
    [#595](https://github.com/pulp/pulp_container/issues/595)

---

## 2.9.3 (2022-02-15) {: #2.9.3 }

### Bugfixes

-   Fixed file descriptor leak during image push.
    [#523](https://github.com/pulp/pulp_container/issues/523)
-   Fixed error during container image push.
    [#542](https://github.com/pulp/pulp_container/issues/542)
-   Fixed rate_limit option on the remote. Rate limit defines N req/sec per connection.
    [#578](https://github.com/pulp/pulp_container/issues/578)
-   Fixed a bug that caused container clients to be unable to interact with content stored on S3.
    [#579](https://github.com/pulp/pulp_container/issues/579)

---

## 2.9.2 (2022-02-08) {: #2.9.2 }

### Bugfixes

-   Added validation for the supported manifests and blobs media_types in the push operation.
    [#8303](https://pulp.plan.io/issues/8303)
-   Fixed ORM calls in the content app that were made in async context to use sync_to_async.
    [#9454](https://pulp.plan.io/issues/9454)
-   Fixed a failure during distribution update that occured when unsetting repository_version.
    [#9497](https://pulp.plan.io/issues/9497)
-   Corrected value of `Content-Length` header for push upload responses.
    This fixes the *upstream prematurely closed connection while reading upstream* error that would
    appear in nginx logs after a push operation.
    [#9516](https://pulp.plan.io/issues/9516)
-   Fixed headers and status codes in the upload/blob responses during image push.
    [#9568](https://pulp.plan.io/issues/9568)
-   Send proper blob content_type header when the blob is served.
    [#9571](https://pulp.plan.io/issues/9571)
-   Fixed a bug that caused container clients to be unable to interact with content stored on S3.
    [#9586](https://pulp.plan.io/issues/9586)
-   Fixed a bug, where permissions were checked against the wrong object type.
    [#9589](https://pulp.plan.io/issues/9589)

### Misc

-   [#9562](https://pulp.plan.io/issues/9562), [#9618](https://pulp.plan.io/issues/9618)

---

## 2.9.1 (2021-11-23) {: #2.9.1 }

### Bugfixes

-   Fixed ORM calls in the content app that were made in async context to use sync_to_async.
    (Backported from <https://pulp.plan.io/issues/9454>).
    [#9538](https://pulp.plan.io/issues/9538)
-   Corrected value of `Content-Length` header for push upload responses.
    This fixes the *upstream prematurely closed connection while reading upstream* error that would
    appear in nginx logs after a push operation (Backported from <https://pulp.plan.io/issues/9516>).
    [#9539](https://pulp.plan.io/issues/9539)
-   Fixed Azure storage backend support (Backported from <https://pulp.plan.io/issues/9488>).
    [#9540](https://pulp.plan.io/issues/9540)

---

## 2.9.0 (2021-10-06) {: #2.9.0 }

### Bugfixes

-   Switched from `condition` element to `condition_expression` for boolean logic evaluation to
    support latest drf-access-policy.
    [#9092](https://pulp.plan.io/issues/9092)
-   Fix OpenAPI schema view
    [#9258](https://pulp.plan.io/issues/9258)
-   Refactor sync pipeline to fix a race condition with multiple synchronous syncs.
    [#9292](https://pulp.plan.io/issues/9292)
-   Added validation for a repository base path.
    [#9403](https://pulp.plan.io/issues/9403)

### Misc

-   [#9187](https://pulp.plan.io/issues/9187), [#9203](https://pulp.plan.io/issues/9203), [#9310](https://pulp.plan.io/issues/9310), [#9385](https://pulp.plan.io/issues/9385), [#9466](https://pulp.plan.io/issues/9466)

---

## 2.8.9 (2022-12-13) {: #2.8.9 }

### Bugfixes

-   Fixed a bug that led Pulp to run out of DB connections during podman pull operations.
    [#1146](https://github.com/pulp/pulp_container/issues/1146)

---

## 2.8.8 (2022-08-24) {: #2.8.8 }

### Bugfixes

-   Fixed an HTTP 404 response during sync from registry.redhat.io.
    [#974](https://github.com/pulp/pulp_container/issues/974)

---

## 2.8.7 (2022-04-05) {: #2.8.7 }

### Bugfixes

-   Accept token under access_token for compat reasons.
    [#619](https://github.com/pulp/pulp_container/issues/619)

---

## 2.8.6 (2022-03-04) {: #2.8.6 }

### Bugfixes

-   Return a more concise message exception on 500 during image pull when content is missing on the FS.
    [#555](https://github.com/pulp/pulp_container/issues/555)
-   Successfully re-upload artifact in case it was previously removed.
    [#595](https://github.com/pulp/pulp_container/issues/595)

---

## 2.8.5 (2022-02-15) {: #2.8.5 }

### Bugfixes

-   Fixed file descriptor leak during image push.
    [#523](https://github.com/pulp/pulp_container/issues/523)
-   Fixed error during container image push.
    [#542](https://github.com/pulp/pulp_container/issues/542)

---

## 2.8.4 (2022-01-27) {: #2.8.4 }

### Bugfixes

-   Fixed "manifest_id" violates not-null constraint error during sync.
    [#537](https://github.com/pulp/pulp_container/issues/537)

---

## 2.8.3 (2021-12-09) {: #2.8.3 }

### Bugfixes

-   Fixed a bug that caused container clients to be unable to interact with content stored on S3.
    (Backported from <https://pulp.plan.io/issues/9586>).
    [#9601](https://pulp.plan.io/issues/9601)
-   Fixed rate_limit option on the remote which was ignored during the downloads. Rate limit defines
    N req/sec per connection ( backported from <https://pulp.plan.io/issues/9610>).
    [#9610](https://pulp.plan.io/issues/9610)

---

## 2.8.2 (2021-11-23) {: #2.8.2 }

### Bugfixes

-   Corrected value of `Content-Length` header for push upload responses.
    This fixes the *upstream prematurely closed connection while reading upstream* error that would
    appear in nginx logs after a push operation (Backported from <https://pulp.plan.io/issues/9516>).
    [#9521](https://pulp.plan.io/issues/9521)
-   Fixed ORM calls in the content app that were made in async context to use loop.run_in_executor().
    [#9522](https://pulp.plan.io/issues/9522)
-   Fixed Azure storage backend support (Backported from <https://pulp.plan.io/issues/9488>).
    [#9523](https://pulp.plan.io/issues/9523)
-   Added validation for a repository base path (Backported from <https://pulp.plan.io/issues/9403>).
    [#9526](https://pulp.plan.io/issues/9526)

---

## 2.8.1 (2021-09-07) {: #2.8.1 }

### Bugfixes

-   Refactor sync pipeline to fix a race condition with multiple synchronous syncs.
    (backported from #9292)
    [#9334](https://pulp.plan.io/issues/9334)

---

## 2.8.0 (2021-08-04) {: #2.8.0 }

### Features

-   Add model resources to allow pulp import export handle pulp_container content units for synced container repositories.
    [#6636](https://pulp.plan.io/issues/6636)
-   Enable reclaim disk space feature for blobs and manifests.This feature is available with pulpcore 3.15+
    [#9169](https://pulp.plan.io/issues/9169)

### Bugfixes

-   Use proxy auth credentials when syncing content from a Remote.
    [#9065](https://pulp.plan.io/issues/9065)

### Deprecations and Removals

-   Dropped support for Python 3.6 and 3.7. pulp_container now supports Python 3.8+.
    [#9035](https://pulp.plan.io/issues/9035)

### Misc

-   [#9134](https://pulp.plan.io/issues/9134)

---

## 2.7.1 (2021-07-21) {: #2.7.1 }

### Bugfixes

-   Use proxy auth credentials when syncing content from a Remote.
    (backported from #9065)
    [#9067](https://pulp.plan.io/issues/9067)

---

## 2.7.0 (2021-07-01) {: #2.7.0 }

### Features

-   As a user I can update container push repositories.
    [#8313](https://pulp.plan.io/issues/8313)

### Bugfixes

-   Updated distribution creation policy.
    [#8244](https://pulp.plan.io/issues/8244)
-   Improved error logging on failed image push.
    [#8879](https://pulp.plan.io/issues/8879)
-   Fixed access policy for the container repository `repair` endpoint.
    [#8884](https://pulp.plan.io/issues/8884)

---

## 2.6.0 (2021-05-20) {: #2.6.0 }

### Features

-   Added ability for users to add a Remote to a Repository that is used by default when syncing.
    [#7795](https://pulp.plan.io/issues/7795)

### Bugfixes

-   Fixed a bug where image push of the same tag with docker client ended up in the different manifest upload.
    Updated Range header in the blob upload response so it is inclusive.
    [#8543](https://pulp.plan.io/issues/8543)
-   Add a fix to prevent server errors on push of new repositories including multiple layers.
    [#8565](https://pulp.plan.io/issues/8565)
-   Fixed apache snippet config and removed scheme
    [#8573](https://pulp.plan.io/issues/8573)
-   Do not suggest a time to wait on 429 responses. This allows clients to decide to play nice and increase backoff times.
    [#8576](https://pulp.plan.io/issues/8576)
-   Fix a bug where users with container.namespace_change_containerdistribution couldn't change distributions.
    [#8618](https://pulp.plan.io/issues/8618)
-   Fixed compution of the digest string during the manifest conversion so it also contains the algorithm.
    [#8629](https://pulp.plan.io/issues/8629)
-   Create and return empty_blob on the fly.
    [#8631](https://pulp.plan.io/issues/8631)
-   Fixed "connection already closed" error in the Registry handler.
    [#8672](https://pulp.plan.io/issues/8672)

### Improved Documentation

-   Fixed broken links to API guide
    [#8125](https://pulp.plan.io/issues/8125)

### Misc

-   [#8581](https://pulp.plan.io/issues/8581)

---

## 2.5.5 (2022-02-15) {: #2.5.5 }

### Bugfixes

-   Fixed file descriptor leak during image push.
    [#523](https://pulp.plan.io/issues/523)
-   Fixed error during container image push.
    [#542](https://pulp.plan.io/issues/542)

---

## 2.5.4 (2021-12-14) {: #2.5.4 }

### Bugfixes

-   Improved error logging on failed image push. (Backported from <https://pulp.plan.io/issues/8879>).
    [#8888](https://pulp.plan.io/issues/8888)
-   Fixed access policy for the container repository `repair` endpoint. (Backported from <https://pulp.plan.io/issues/8884>).
    [#8889](https://pulp.plan.io/issues/8889)
-   Fixed a bug that caused container clients to be unable to interact with content stored on S3.
    (Backported from <https://pulp.plan.io/issues/9586>).
    [#9600](https://pulp.plan.io/issues/9600)

---

## 2.5.3 (2021-05-20) {: #2.5.3 }

### Bugfixes

-   Fixed "connection already closed" error in the Registry handler.
    (backported from #8672)
    [#8697](https://pulp.plan.io/issues/8697)
-   Fixed compution of the digest string during the manifest conversion so it also contains the algorithm.
    (backported from #8629)
    [#8698](https://pulp.plan.io/issues/8698)
-   Create and return empty_blob on the fly.
    (backported from #8631)
    [#8699](https://pulp.plan.io/issues/8699)
-   Do not suggest a time to wait on 429 responses. This allows clients to decide to play nice and increase backoff times (Backported from #8576).
    [#8703](https://pulp.plan.io/issues/8703)

---

## 2.5.2 (2021-04-19) {: #2.5.2 }

### Bugfixes

-   Add a fix to prevent server errors on push of new repositories including multiple layers. (Backported from <https://pulp.plan.io/issues/8565>)
    [#8591](https://pulp.plan.io/issues/8591)

---

## 2.5.1 (2021-04-13) {: #2.5.1 }

### Bugfixes

-   Fixed a bug where image push of the same tag with docker client ended up in the different manifest upload.
    Updated Range header in the blob upload response so it is inclusive. (Backported from <https://pulp.plan.io/issues/8543>)
    [#8545](https://pulp.plan.io/issues/8545)

---

## 2.5.0 (2021-04-08) {: #2.5.0 }

### Features

-   Updated the catalog endpoint to show only repositories that users have permissions to pull from.
    [#8068](https://pulp.plan.io/issues/8068)
-   Config blob is downloaded always, regardless of the remote's settings.
    [#8319](https://pulp.plan.io/issues/8319)

### Bugfixes

-   Wrapped the repository version creation during blob upload commit in a task that will be waited on by issuing 429.
    [#8151](https://pulp.plan.io/issues/8151)

### Improved Documentation

-   Released container RBAC from tech-preview.
    [#8527](https://pulp.plan.io/issues/8527)

---

## 2.4.0 (2021-03-18) {: #2.4.0 }

### Features

-   Added pagination to the _catalog and the tags/list endpoint in the registry API.
    [#7974](https://pulp.plan.io/issues/7974)
-   Added a fall back to use BasicAuth if TOKEN_AUTH_DISABLED is set.
    [#8074](https://pulp.plan.io/issues/8074)
-   Added a new API endpoint that allows users to remove an image by a digest from a push repository.
    [#8105](https://pulp.plan.io/issues/8105)
-   Added a namespace_is_username helper to decide whether the namespace matches the username of the requests user.
    Changed the namespace access_policy to allow users without permissions to create the namespace that matches their username.
    [#8197](https://pulp.plan.io/issues/8197)

### Bugfixes

-   Fixed the `scope` field returned by the registry when a user was accessing the catalong endpoint without a token. In addition to that, the field `access` returned by the token server for the root endpoint was fixed as well.
    [#8045](https://pulp.plan.io/issues/8045)
-   Added missing error code that should be returned in the WWW-Authenticate header.
    [#8046](https://pulp.plan.io/issues/8046)
-   Fixed a bug that caused the registry to fail during the schema conversion when there was not
    provided the field `created_by`.
    [#8299](https://pulp.plan.io/issues/8299)
-   Prevent the registry pagination classes to fail if a negative page size is requested.
    [#8318](https://pulp.plan.io/issues/8318)

---

## 2.3.1 (2021-02-15) {: #2.3.1 }

### Bugfixes

-   Use `get_user_model()` to prevent pulp_container from crashing when running alongside other pulp plugins that override the default user authentication models.
    [#8260](https://pulp.plan.io/issues/8260)

---

## 2.3.0 (2021-02-08) {: #2.3.0 }

### Features

-   Added access policy and permission management to container repositories.
    [#7706](https://pulp.plan.io/issues/7706)
-   Added access policy and permission management to the container remotes.
    [#7707](https://pulp.plan.io/issues/7707)
-   Added access policy for ContainerDistributionViewSet and the Registry API.
    [#7937](https://pulp.plan.io/issues/7937)
-   Added access policy and permission management to the container namespaces.
    [#7967](https://pulp.plan.io/issues/7967)
-   Added RBAC to the push repository endpoint.
    [#7968](https://pulp.plan.io/issues/7968)
-   Add RBAC to the repository version endpoints.
    [#8017](https://pulp.plan.io/issues/8017)
-   Made the push and pull permission granting use the `ContainerDistribution` access policy.
    [#8075](https://pulp.plan.io/issues/8075)
-   Added Owner, Collaborator, and Consumer groups and permissions for Namespaces and Repositories.
    [#8101](https://pulp.plan.io/issues/8101)
-   Added a private flag to mark distributions global read accessability.
    [#8102](https://pulp.plan.io/issues/8102)
-   Added support for tagging and untagging manifests for push repositories.
    [#8104](https://pulp.plan.io/issues/8104)
-   Added RBAC for container content.
    [#8142](https://pulp.plan.io/issues/8142)
-   Made the token expiration time configurable via the setting 'TOKEN_EXPIRATION_TIME'.
    [#8147](https://pulp.plan.io/issues/8147)
-   Decoupled permissions for registry live api and pulp api.
    [#8153](https://pulp.plan.io/issues/8153)
-   Add description field to the ContainerDistribution.
    [#8168](https://pulp.plan.io/issues/8168)

### Bugfixes

-   Fixed a bug that caused the registry to advertise an invalid digest of a converted manifest.
    [#7923](https://pulp.plan.io/issues/7923)
-   Fixed the way how the plugin verifies authenticated users in the token authentication.
    [#8057](https://pulp.plan.io/issues/8057)
-   Adjusted the queryset filtering of `ContainerDistribution` to include `private` and `Namespace` permissions.
    [#8206](https://pulp.plan.io/issues/8206)
-   Fixed bug experienced when pulling using docker 20.10 client.
    [#8208](https://pulp.plan.io/issues/8208)

### Deprecations and Removals

-   POST and DELETE requests are no longer available for /pulp/api/v3/repositories/container/container-push/.
    Push repositories are still automatically created via docker/podman push and deleted through container distributions.
    [#8014](https://pulp.plan.io/issues/8014)

### Misc

-   [#7936](https://pulp.plan.io/issues/7936)

---

## 2.2.2 (2021-05-26) {: #2.2.2 }

### Bugfixes

-   Fixed compution of the digest string during the manifest conversion so it also contains the algorithm. (Backported from <https://pulp.plan.io/issues/8629>).
    [#8818](https://pulp.plan.io/issues/8818)
-   Create and return empty_blob on the fly. (Backported from <https://pulp.plan.io/issues/8654>).
    [#8819](https://pulp.plan.io/issues/8819)
-   Fixed "connection already closed" error in the Registry handler. (Backported from <https://pulp.plan.io/issues/8672>).
    [#8820](https://pulp.plan.io/issues/8820)

---

## 2.2.1 (2021-03-18) {: #2.2.1 }

### Bugfixes

-   Fixed a bug that caused the registry to fail during the schema conversion when there was not
    provided the field `created_by`. (Backported from <https://pulp.plan.io/issues/8299>)
    [#8349](https://pulp.plan.io/issues/8349)
-   Fixed a bug that caused the registry to advertise an invalid digest of a converted manifest. (Backported from <https://pulp.plan.io/issues/7923>)
    [#8350](https://pulp.plan.io/issues/8350)
-   Fixed bug experienced when pulling using docker 20.10 client. (Backported from <https://pulp.plan.io/issues/8208>)
    [#8367](https://pulp.plan.io/issues/8367)

---

## 2.2.0 (2020-12-09) {: #2.2.0 }

### Features

-   Added namespaces to group repositories and distributions.
    [#7089](https://pulp.plan.io/issues/7089)
-   Refactored the registry's push API to not store uploaded chunks in /var/lib/pulp, but rather
    in the shared storage.
    [#7218](https://pulp.plan.io/issues/7218)

### Bugfixes

-   Fixed the value of registry_path in a container distribution.
    [#7385](https://pulp.plan.io/issues/7385)
-   Added validation for tags' names.
    [#7506](https://pulp.plan.io/issues/7506)
-   Fixed Renderer to handle properly Manifest and Blob responses.
    [#7620](https://pulp.plan.io/issues/7620)
-   Updated models fields to not use settings directly.
    [#7728](https://pulp.plan.io/issues/7728)
-   Fixed a bug where Artifacts were missing sha224 checksum after podman push.
    [#7774](https://pulp.plan.io/issues/7774)

### Improved Documentation

-   Updated scripts to correctly show the workflows.
    [#7547](https://pulp.plan.io/issues/7547)

### Misc

-   [#7649](https://pulp.plan.io/issues/7649)

---

## 2.1.3 (2022-05-12) {: #2.1.3 }

### Misc

-   [#744](https://github.com/pulp/pulp_container/issues/744)

---

## 2.1.2 (2021-05-04) {: #2.1.2 }

### Bugfixes

-   Create and return empty_blob on the fly (Backported from <https://pulp.plan.io/issues/8631>)
    [#8654](https://pulp.plan.io/issues/8654)
-   Fixed compution of the digest string during the manifest conversion so it also contains the algorithm (Backported from <https://pulp.plan.io/issues/8629>).
    [#8655](https://pulp.plan.io/issues/8655)
-   Fixed "connection already closed" error in the Registry handler (Backported from <https://pulp.plan.io/issues/8672>).
    [#8685](https://pulp.plan.io/issues/8685)

---

## 2.1.1 (2021-03-08) {: #2.1.1 }

### Bugfixes

-   Fixed Renderer to handle properly Manifest and Blob responses. (Backported from <https://pulp.plan.io/issues/7620>)
    [#8346](https://pulp.plan.io/issues/8346)
-   Fixed a bug that caused the registry to advertise an invalid digest of a converted manifest. (Backported from <https://pulp.plan.io/issues/7923>)
    [#8347](https://pulp.plan.io/issues/8347)
-   Fixed a bug that caused the registry to fail during the schema conversion when there was not
    provided the field `created_by`. (Backported from <https://pulp.plan.io/issues/8299>)
    [#8348](https://pulp.plan.io/issues/8348)
-   Fixed bug experienced when pulling using docker 20.10 client. (Backported from <https://pulp.plan.io/issues/8208>)
    [#8366](https://pulp.plan.io/issues/8366)

---

## 2.1.0 (2020-09-23) {: #2.1.0 }

### Bugfixes

-   Fixed the unnecessary double redirect issued for the S3 storage
    [#6826](https://pulp.plan.io/issues/6826)

### Improved Documentation

-   Documented how include/exclude_tags options work with mirror=True/False.
    [#7380](https://pulp.plan.io/issues/7380)

---

## 2.0.1 (2020-09-08) {: #2.0.1 }

### Bugfixes

-   Fixed bug where users would get 403 response when pulling from the registry running behind an HTTPS
    reverse proxy.
    [#7462](https://pulp.plan.io/issues/7462)

---

## 2.0.0 (2020-08-18) {: #2.0.0 }

### Features

-   Added 'exclude_tags' to support e.g. skipping source containers in sync.
    [#6922](https://pulp.plan.io/issues/6922)
-   Push repositories will be deleted together with their attached distribution.
    [#7172](https://pulp.plan.io/issues/7172)

### Bugfixes

-   Updated the sync machinery to not store an image manifest as a tag's artifact
    [#6816](https://pulp.plan.io/issues/6816)
-   Added a validation, that a push repository cannot be distributed by specifying a version.
    [#7012](https://pulp.plan.io/issues/7012)
-   Forbid the REST API methods PATCH and PUT to prevent changes to repositories created via
    docker/podman push requests
    [#7013](https://pulp.plan.io/issues/7013)
-   Fixed the rendering of errors in the container registry api.
    [#7054](https://pulp.plan.io/issues/7054)
-   Repaired broken registry with TOKEN_AUTH_DISABLED=True
    [#7304](https://pulp.plan.io/issues/7304)

### Improved Documentation

-   Updated docs for 2.0 GA.
    [#7317](https://pulp.plan.io/issues/7317)

### Deprecations and Removals

-   Renamed 'whitelist_tags' to 'include_tags'.
    [#7070](https://pulp.plan.io/issues/7070)

---

## 2.0.0b3 (2020-07-16)

### Features

-   Redirected get on Manifest get to the content app to enable schema conversion.
    Repaired schema conversion to work with django-storage framework.
    [#6824](https://pulp.plan.io/issues/6824)
-   Added ContainerPushRepository type to back writeable container registries.
    [#6825](https://pulp.plan.io/issues/6825)
-   Added ContentRedirectContentGuard to redirect with preauthenticated urls to the content app.
    [#6894](https://pulp.plan.io/issues/6894)
-   Restricted push access to admin user.
    [#6976](https://pulp.plan.io/issues/6976)

### Bugfixes

-   Refactored token_authentication that now happens in pulpcore-api app
    [#6894](https://pulp.plan.io/issues/6894)
-   Fixed a crash when trying to access content with an unparseable token.
    [#7124](https://pulp.plan.io/issues/7124)
-   Fixed a runtime error which was triggered when a registry client sends an accept header with an
    inappropriate media type for a manifest and the conversion failed.
    [#7125](https://pulp.plan.io/issues/7125)

### Misc

-   [#5302](https://pulp.plan.io/issues/5302)

---

## 2.0.0b2 (2020-06-08)

### Bugfixes

-   Fixed the client_max_body_size value in the nginx config.
    [#6916](https://pulp.plan.io/issues/6916)

---

## 2.0.0b1 (2020-06-03)

### Features

-   Added REST APIs for handling docker/podman push.
    [#5027](https://pulp.plan.io/issues/5027)

### Bugfixes

-   Fixed 500 error when pulling by tag.
    [#6776](https://pulp.plan.io/issues/6776)
-   Ensure that all relations between content models are properly created
    [#6827](https://pulp.plan.io/issues/6827)
-   Auto create repos and distributions for the container push.
    [#6878](https://pulp.plan.io/issues/6878)
-   Fixed not being able to push tags with periods in them.
    [#6884](https://pulp.plan.io/issues/6884)

---

## 1.4.2 (2020-07-13) {: #1.4.2 }

### Bugfixes

-   Improved the performance of the synchronization
    [#6940](https://pulp.plan.io/issues/6940)

---

## 1.4.1 (2020-06-04) {: #1.4.1 }

### Bugfixes

-   Including requirements.txt on MANIFEST.in
    [#6890](https://pulp.plan.io/issues/6890)

---

## 1.4.0 (2020-05-28) {: #1.4.0 }

### Features

-   Enable S3 as alternative storage.
    [#4456](https://pulp.plan.io/issues/4456)

### Bugfixes

-   Fixed webserver snippets config
    [#6628](https://pulp.plan.io/issues/6628)

### Improved Documentation

-   Added a new section about using pull secrets
    [#6315](https://pulp.plan.io/issues/6315)

### Misc

-   [#6733](https://pulp.plan.io/issues/6733), [#6823](https://pulp.plan.io/issues/6823), [#6840](https://pulp.plan.io/issues/6840), [#6842](https://pulp.plan.io/issues/6842)

---

## 1.3.0 (2020-04-23) {: #1.3.0 }

### Features

-   Added support for filtering tags using wildcards
    [#6338](https://pulp.plan.io/issues/6338)

### Misc

-   [#6394](https://pulp.plan.io/issues/6394)

---

## 1.2.0 (2020-03-05) {: #1.2.0 }

### Features

-   Enable users to sync content in mirror mode
    [#5771](https://pulp.plan.io/issues/5771)
-   Provide apache and nginx config snippets to be used by the installer.
    [#6292](https://pulp.plan.io/issues/6292)

### Bugfixes

-   Building an image from a Containerfile no longer requires root access.
    [#5895](https://pulp.plan.io/issues/5895)

### Misc

-   [#6069](https://pulp.plan.io/issues/6069)

---

## 1.1.0 (2020-01-22) {: #1.1.0 }

### Features

-   Let users fetch the list of all distributed repositories via the _catalog endpoint
    [#5772](https://pulp.plan.io/issues/5772)
-   Adds ability to build OCI images from Containerfiles.
    [#5785](https://pulp.plan.io/issues/5785)

### Bugfixes

-   The schema conversion cannot be applied for manifests with foreign layers
    [#5646](https://pulp.plan.io/issues/5646)
-   Adds operation_summaries for ContainerRepository operations
    [#5956](https://pulp.plan.io/issues/5956)

### Misc

-   [#5867](https://pulp.plan.io/issues/5867), [#5907](https://pulp.plan.io/issues/5907)

---

## 1.0.0 (2019-12-12) {: #1.0.0 }

### Features

-   As a user, I can remove all repository container content with ["*"]
    [#5756](https://pulp.plan.io/issues/5756)
-   Enable users to disable the token authentication from the settings
    [#5796](https://pulp.plan.io/issues/5796)
-   As a user I can manage images in OCI format.
    [#5816](https://pulp.plan.io/issues/5816)

### Bugfixes

-   Allow users to provide fully qualified domain name of a token server with an associated port number
    [#5779](https://pulp.plan.io/issues/5779)

### Improved Documentation

-   Add note about access permissions for private and public keys
    [#5778](https://pulp.plan.io/issues/5778)

### Misc

-   [#4592](https://pulp.plan.io/issues/4592), [#5701](https://pulp.plan.io/issues/5701), [#5757](https://pulp.plan.io/issues/5757), [#5780](https://pulp.plan.io/issues/5780), [#5830](https://pulp.plan.io/issues/5830)

---

## 1.0.0rc1 (2019-11-18)

### Features

-   No duplicated content can be present in a repository version.
    [#3541](https://pulp.plan.io/issues/3541)
-   Convert manifests of the format schema 2 to schema 1
    [#4244](https://pulp.plan.io/issues/4244)
-   Add support for pulling content using token authentication
    [#4938](https://pulp.plan.io/issues/4938)
-   Store whitelisted tags in a list instead of CSV string
    [#5515](https://pulp.plan.io/issues/5515)
-   Make repositories "typed". Repositories now live at a detail endpoint. Sync is performed by POSTing to {repo_href}/sync/ remote={remote_href}.
    [#5625](https://pulp.plan.io/issues/5625)
-   Added v2s2 to v2s1 converter.
    [#5635](https://pulp.plan.io/issues/5635)

### Bugfixes

-   Fix using specified proxy for downloads.
    [#5637](https://pulp.plan.io/issues/5637)

### Improved Documentation

-   Change the prefix of Pulp services from pulp-* to pulpcore-*
    [#4554](https://pulp.plan.io/issues/4554)

### Deprecations and Removals

-   Change _type to pulp_type
    [#5454](https://pulp.plan.io/issues/5454)

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)

-   Remove "_" from _versions_href, _latest_version_href
    [#5548](https://pulp.plan.io/issues/5548)

-   Removing base field: _type .
    [#5550](https://pulp.plan.io/issues/5550)

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting Container repositories is now performed on /pulp/api/v3/repositories/container/container/ instead of /pulp/api/v3/repositories/.
    Only Container content can be present in a Container repository, and only a Container repository can hold Container content.
    [#5625](https://pulp.plan.io/issues/5625)

### Misc

-   [#3308](https://pulp.plan.io/issues/3308), [#5580](https://pulp.plan.io/issues/5580), [#5690](https://pulp.plan.io/issues/5690)

---

## 0.1.0b7 (2019-10-02)

### Bugfixes

-   Fix a bug that allowed arbitrary url prefixes for custom endpoints.
    [#5486](https://pulp.plan.io/issues/5486)
-   Add Docker-Distribution-API-Version header among response headers.
    [#5527](https://pulp.plan.io/issues/5527)

### Misc

-   [#5470](https://pulp.plan.io/issues/5470)

---

## 0.1.0b6 (2019-09-05)

### Features

-   Add endpoint to recursively copy manifests from a source repository to a destination repository.
    [#3403](https://pulp.plan.io/issues/3403)
-   Add endpoint to recursively add docker content to a repository.
    [#3405](https://pulp.plan.io/issues/3405)
-   As a user I can sync from a docker repo published by Pulp2/Pulp3.
    [#4737](https://pulp.plan.io/issues/4737)
-   Add support for tagging and untagging manifests via an additional endpoint
    [#4934](https://pulp.plan.io/issues/4934)
-   Add endpoint for copying all tags from a source repository, or specific tags by name.
    [#4947](https://pulp.plan.io/issues/4947)
-   Add ability to filter Manifests and ManifestTags by media_type and digest
    [#5033](https://pulp.plan.io/issues/5033)
-   Add ability to filter Manifests, ManifestTags and Blobs by multiple media_types
    [#5157](https://pulp.plan.io/issues/5157)
-   Add endpoint to recursively remove docker content from a repository.
    [#5179](https://pulp.plan.io/issues/5179)

### Bugfixes

-   Allow Accept header to send multiple values.
    [#5211](https://pulp.plan.io/issues/5211)
-   Populate ManifestListManifest thru table during sync.
    [#5235](https://pulp.plan.io/issues/5235)
-   Fixed a problem where repeated syncs created invalid orphaned tags.
    [#5252](https://pulp.plan.io/issues/5252)

### Misc

-   [#4681](https://pulp.plan.io/issues/4681), [#5213](https://pulp.plan.io/issues/5213), [#5218](https://pulp.plan.io/issues/5218)

---

## 0.1.0b5 (2019-07-04)

### Bugfixes

-   Add 'Docker-Content-Digest' header to the response headers.
    [#4646](https://pulp.plan.io/issues/4646)
-   Allow docker remote whitelist_tags to be unset to null.
    [#5017](https://pulp.plan.io/issues/5017)
-   Remove schema1 manifest signature when calculating its digest.
    [#5037](https://pulp.plan.io/issues/5037)

### Improved Documentation

-   Switch to using [towncrier](https://github.com/hawkowl/towncrier) for better release notes.
    [#4875](https://pulp.plan.io/issues/4875)
-   Add an example to the whitelist_tag help text
    [#4994](https://pulp.plan.io/issues/4994)
-   Add list of features to the docker landing page.
    [#5030](https://pulp.plan.io/issues/5030)

### Misc

-   [#4572](https://pulp.plan.io/issues/4572), [#4994](https://pulp.plan.io/issues/4994), [#5014](https://pulp.plan.io/issues/5014)

---
`````

## File: pulp-docs/pulp_container/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://pulpproject.org/dev/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulp_container/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_container' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_container/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_container/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_container/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_container/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_deb/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_deb/docs/dev/guides/bindings.md
`````markdown
# Client Bindings

## Python Client

The [pulp-deb-client package](https://pypi.org/project/pulp-deb-client/) on PyPI provides bindings for all `pulp_deb` [REST API][1] endpoints.
It is currently published daily and with every RC.

The [pulpcore-client package](https://pypi.org/project/pulpcore-client) on PyPI provides bindings for all `pulpcore` [REST API][2] endpoints.
It is currently published daily and with every RC.

## Ruby Client

The [pulp_deb_client Ruby Gem](https://rubygems.org/gems/pulp_deb_client) on rubygems.org provides bindings for all `pulp_deb` [REST API][1] endpoints.
It is currently published daily and with every RC.

The [pulpcore_client Ruby Gem](https://rubygems.org/gems/pulpcore_client) on rubygems.org provides bindings for all `pulpcore` [REST API][2] endpoints.
It is currently published daily and with every RC.

## Client in a Language of Your Choice

A client can be generated using Pulp's OpenAPI schema and any of the available [OpenAPI generators](https://openapi-generator.tech/docs/generators).

Generating a client is a two step process:

1. Download the OpenAPI schema for pulpcore and all installed plugins:
   ```bash
   curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json
   ```
   The OpenAPI schema for a specific plugin can be downloaded by specifying the plugin's module name as a GET parameter.
   For example for `pulp_deb` only endpoints use a query like this:
   ```bash
   curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json?plugin=pulp_deb
   ```
2. Generate a client using OpenAPI generator:
   The schema can then be used as input to the `openapi-generator-cli`.
   See [try OpenAPI generator](https://openapi-generator.tech/#try) for documentation on getting started.

[1]: https://staging-docs.pulpproject.org/pulp_deb/restapi/
[2]: https://staging-docs.pulpproject.org/pulpcore/restapi/
`````

## File: pulp-docs/pulp_deb/docs/dev/guides/plugin_maintenance.md
`````markdown
# Plugin Maintenance

This part of the documentation is intended as an aid to current and future plugin maintainers.

## Plugin Version Semantics

Release version strings of the `pulp_deb` plugin use the following format: `X.Y.Z<beta_tag?>`

A `X` version release, signifies one or more of the following:

- There are major new features.
- There has been a major overhaul of existing features.
- The plugin has entered a new stage of its development.
- The plugin is compatible with a new pulpcore `X` version.

!!! note
    A `X` version release, is more of a high level communication, than something with a detailed technical definition.
    It is up to the judgement of plugin maintainers when a new `X` version is warranted.


A `Y` version release, signifies one or more of the following:

- This release contains new features.
- This release may require a newer version of pulpcore (or some other dependency) than the `Y-1` release branch did.
- A `Y` version release is given its own release branch.

A `Z` version release, signifies the following:

- A `Z` version release may contain only bugfixes (semantic versioning).
- A `Z` version change is cherry-picked to the relevant `Y` version release branch.

Pulp plugins follow a "release whenever" policy, this means both `Y` and `Z` releases may happen whenever there are relevant changes, and as the need arises.

## Plugin Release Steps

!!! note
    The [pulpcore release guide](https://pulp.plan.io/projects/pulp/wiki/Release_Guide) wiki article is now badly out of date, but may still be of interest as a reference.


At the time of this writing the release process required the following steps:

1. (optional) Run the "CI Update" action and review and merge any resulting PRs.
2. (`Y` version release only) Run the "Create New Release Branch" action.
3. Run the "Release Pipeline" action from the relevant release branch and merge any resulting PRs.
4. Check that each of the following has been released:
   * The [pulp_deb python package](https://pypi.org/project/pulp-deb/) on pypi.org.
   * The [pulp-deb-client package](https://pypi.org/project/pulp-deb-client) on pypi.org.
   * The [pulp_deb_client Ruby Gem](https://rubygems.org/gems/pulp_deb_client) on rubygems.org.
   * This `pulp_deb` documentation.
5. (`Y` version release only) Update the `ci_update_branches` variable in the `template_config.yml` file in the [pulp_deb source repository](https://github.com/pulp/pulp_deb).
6. (optional) Run the "changelog update" action to add any release branch changelog commits to the main branch.
   If you skip this, it will be picked up by the nightly CI.
7. Post a release announcement under [Pulp community forum announcements](https://discourse.pulpproject.org/c/announcements/6).
   Hint: Simply copy and past from past release announcements making adjustments as necessary.


## Using the Plugin Template

For existing plugins, the [Pulp plugin template](https://github.com/pulp/plugin_template) is used to keep the plugin CI up to date and synchronized across all plugins.
Applying the latest plugin template is primarily performed via GitHub actions pipeline.
This pipeline is periodically run or can be triggered manually (for example before a new `Y` release).
The pipeline will open a PR against every branch listed in the `ci_update_branches` variable of the `template_config.yml` file of the `pulp_deb` source repository.

It is also possible (and sometimes useful) to run the plugin template locally.
Make sure you clone the `plugin_template` repository in the same folder as the `pulp_deb` repository.
You can then issue the below template commands within the root of the plugin template repository to apply changes.

!!! warning
    The following commands are usually applied via the GitHub actions pipeline, which is the preferred way for creating the needed PRs.

```none
./plugin-template --generate-config pulp_deb
./plugin-template --github pulp_deb
```

!!! warning
    The following plugin template commands are primarily intended for creating the skeleton for a new plugin.
    It sometimes makes sense to apply them to an existing plugin, but the applied changes will clash with the existing plugin content, and need to be manually evaluated.

```none
./plugin-template --docs pulp_deb
./plugin-template --bootstrap pulp_deb
```

## Building the docs and API docs

The content for the [pulp_deb REST API documentation](https://staging-docs.pulpproject.org/pulp_deb/changes/) is extracted via API call to a running pulp instance.
It will contain various docstrings from the plugin code as deployed to that instance.
As a result, building the docs can only be done via the CI pipelines or a full fledged development environment.

This can be done within a `pulp3-source-*` vagrant box from the `pulp_installer` repository, that has the `pulp_deb` plugin installed.
Within such a box run the following commands:

```none
cd /home/vagrant/devel/pulp_deb/docs/
make html
```

You can now find the built documentation at `docs/_build/html/index.html` within your local `pulp_deb` repository.
You can also find the API doc contents within `docs/_static/api.json`.

You can open the locally built documentation in a browser, but you will not be able to view the API docs, since those make use of an external service, that obviously has no access to your local build.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/_SUMMARY.md
`````markdown
[//]: Learn more here about the syntax:
[//]: https://staging-docs.pulpproject.org/pulp-docs/docs/dev/reference/markdown-cheatsheet/#ordering-files

* [Setting up API tooling](api_tooling.md)
* [Repository Synchronization](sync.md)
* [Package Uploads](upload.md)
* [Publish Repositories](publish.md)
* [Signing Service Creation](signing_service.md)
* [Advanced Copy](advanced_copy.md)
* [Configuring Checksums](checksums.md)
`````

## File: pulp-docs/pulp_deb/docs/user/guides/advanced_copy.md
`````markdown
# Advanced Copy

You can copy packages between Pulp repositories, *along with all associated structure content* using the advanced copy API.

For example, let us first set up an example repository with some test content:

```bash
NAME='advanced-copy-example'
REMOTE_OPTIONS=(
  --url=https://fixtures.pulpproject.org/debian/
  --distribution=ragnarok
  --distribution=ginnungagap
  --architecture=ppc64
  --architecture=armeb
  --policy=on_demand
)
pulp deb remote create --name=${NAME} ${REMOTE_OPTIONS[@]}
pulp deb repository create --name=${NAME}-src --remote=${NAME}
pulp deb repository sync --name=${NAME}-src
```

Now let us copy just one package from this src repository to a different target repository using the advanced copy API:

```bash
NAME='advanced-copy-example'
PULP_URL='http://localhost:5001'
SRC_VERSION_HREF=$(pulp deb repository show --name=${NAME}-src | jq -r '.latest_version_href')
TARGET_REPO_HREF=$(pulp deb repository create --name=${NAME}-target | jq -r '.pulp_href')
PACKAGE_HREF=$(
  pulp deb repository content --type=package list --repository=${NAME}-src \
  | jq -r '.[0].pulp_href'
)
echo "\
[
  {
    \"source_repo_version\": \"${SRC_VERSION_HREF}\",
    \"dest_repo\": \"${TARGET_REPO_HREF}\",
    \"content\": [
      \"${PACKAGE_HREF}\"
    ]
  }
]" > copy_config.json
http post ${PULP_URL}/pulp/api/v3/deb/copy/ config:=@copy_config.json
```

After the copy task has completed, check the new repository version to see we do not just have `deb.package` type content, but also structure content of type `deb.package_release_component` and others:

```bash
pulp deb repository version show --repository=${NAME}-target
```

Our example `copy_config.json` from the above example might look like this:

```json
[
  {
    "source_repo_version": "/pulp/api/v3/repositories/deb/apt/018a600b-06d1-71a8-ac7f-6275e8ed7fd7/versions/1/",
    "dest_repo": "/pulp/api/v3/repositories/deb/apt/018a600b-a719-75ea-b7b8-4916176496ba/",
    "content": [
      "/pulp/api/v3/content/deb/packages/018a2c87-43d7-7013-a40f-db1ca6e2f367/"
    ]
  }
]
```

This example could easily be extended with extra values in the `"content"` list to copy several packages at once.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/api_tooling.md
`````markdown
# Setting up API tooling

In order to use Pulp we must be able to talk to the Pulp API.
Usage examples throughout this documentation depend on the API tooling described below.


## Setting up Pulp CLI for pulp_deb

!!! tip
    We recommend installing Pulp CLI in a virtual python environment.


Pulp CLI for `pulp_deb` can be installed via the [pulp-cli-deb python package](https://pypi.org/project/pulp-cli-deb/), on any host that can reach the REST API of your Pulp instance:

```none
pip install pulp-cli-deb
```

This will also pull in the [pulp-cli python package](https://pypi.org/project/pulp-cli/) as a dependency.
The `pulp-cli` package contains the core of Pulp CLI, as well as the subcommands for many other Pulp content plugins like `pulp_file` and `pulp_rpm`.

Once you have installed Pulp CLI, you will need to configure it, so that it can talk to the REST API of your Pulp instance:

```none
pulp config create --help  # List a description of available config options
pulp config create -e  # Open a generated default config file for editing
```

Make sure you set the `base_url`, the `api_root` and any API credentials.
The default location for the CLI config file is `~/.config/pulp/cli.toml`.

To test if Pulp CLI can reach the Pulp API use:

```none
pulp status
```

!!! note
    The status API endpoint does not require authentication, so this will work even if the configured API credentials are incorrect.


For more information see the [pulp-cli documentation](https://staging-docs.pulpproject.org/pulp-cli/docs/user/).
To open bug reports or feature requests against `pulp-cli-deb`, see the [pulp-cli-deb issue tracker](https://github.com/pulp/pulp-cli-deb/issues).

To start using the CLI commands for `pulp_deb`, consult:

```none
pulp deb --help
```


## Setting up httpie and jq

Where there are feature gaps in Pulp CLI, or for advanced scripting scenarios, it may be preferrable to interact with the `Pulp REST API ` directly.
Examples within this documentation will use the [httpie](https://httpie.io/) utility for this purpose.
httpie can be installed via `pip`, so you could install it alongside Pulp CLI in a virtual python environment using:

```none
pip install pulp-cli-deb httpie
```

You will need to configure your Pulp API credentials, or else specify them with each call to `http`.
For example, you can adjust the following `.netrc` example as needed:

```none
machine localhost
login admin
password password
```

For alternative methods, please consult `http --help`.

Both in combination with Pulp CLI as well as httpie, we recommend and make use of [jq](https://jqlang.github.io/jq/) for parsing API responses.
`jq` can normally be installed via your preferred package manager, for example using `sudo apt-get install jq` for APT based systems.
Being a simple command-line JSON parser, `jq` requires no additional configuration.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/checksums.md
`````markdown
# Configuring Checksums

What checksum algorithems are available on any given Pulp instance, is controlled by the pulpcore `ALLOWED_CONTENT_CHECKSUMS` setting. If enabled, `pulp_deb` will make use of MD5, SHA-1, SHA-256, and SHA-512. SHA-256 is required and cannot be disabled.

!!! warning
    For compliance reasons, MD5 and SHA-1 have been disabled by default since pulpcore 3.11.

!!! note
    It is almost universal practice within the Debian ecosystem to make use of MD5 in particular.
    If your Pulp instance is configured to disallow the MD5 checksum algorithm, `pulp_deb` will log a warning with every sync as well as every use of the APT publisher.
    You can disable these warnings, by changing the `FORBIDDEN_CHECKSUM_WARNINGS` setting to `False`.


!!! warning
    While the APT publisher respects the `ALLOWED_CONTENT_CHECKSUMS` setting, the verbatim publisher will mirror an exact copy of the synced upstream metadata.
    By its very nature, the verbatim publisher  does not respect the `ALLOWED_CONTENT_CHECKSUMS` setting.
    If your policy prohibits the presence of certain checksum types, either do not use the verbatim publisher, or only synchronize repositories that are already compliant with your policy.


## Enabling MD5 and/or SHA1

In order to opt in to MD5 and/or SHA1, the values `md5` and/or `sha1` must be added to the list configured for the `ALLOWED_CONTENT_CHECKSUMS` setting. In addition a `pulpcore-manager` command must be run to generate any missing checksums within the DB for the settings change to take effect.

See the [pulpcore configuration documentation](https://staging-docs.pulpproject.org/pulpcore/docs/admin/guides/configure-pulp/) for more information on how to apply settings. Look for the section on `ALLOWED_CONTENT_CHECKSUMS` in the [pulpcore settings documentation](https://staging-docs.pulpproject.org/pulpcore/docs/admin/learn/settings/#pulp-settings) in particular.

Once you have updated your configuration file you will need to halt your Pulp instance, and then run the following command to ensure your DB is made consistent with your `ALLOWED_CONTENT_CHECKSUMS` setting:

```none
pulpcore-manager handle-artifact-checksums
```

!!! note
    Missing checksums will need to be recalculated for all your artifacts which can take some time.
    If you have a missmatch between your configured `ALLOWED_CONTENT_CHECKSUMS` setting and the checksums present in the DB, Pulp will simply refuse to start.


## Security Implications

APT repository metadata files (release files and package indecies) will typically include several checksums for all referenced files.
During synchronization, `pulp_deb` will check the downloaded files against the provided checksums.
Together with a valid (and trusted) release file signature this will guarantee the integrity of the synchronized repository.
During publication, the APT publisher will include any supported (and permitted) checksumtypes in any metadata files it publishes.

While the MD5 and SHA-1 algorithms are no longer considered secure, `pulp_deb` *requires* the presence of SHA-256 checksums to function, and is therefore *never* dependent on unsecure algorithms for integrity checking.
MD5 and SHA-1 are checked and used *in addition* to the other algorithms.
This is consistent with widespread usage within the larger Debian ecosystem.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/publish.md
`````markdown
# Hosting APT Repositories

![Publish content](publish.svg)

However you have obtained your Pulp repository content, you must publish and distribute it for it to become accessible on your Pulp instance.


## Basic Workflow

Once you have obtained some `pulp_deb` content, either via [sync](https://staging-docs.pulpproject.org/pulp_deb/docs/user/guides/sync/) or [upload](https://staging-docs.pulpproject.org/pulp_deb/docs/user/guids/upload/), that content must then be published and distributed so as to be available for clients.
The most basic version of this workflow is always the same, and all you need is the name of the relevant Pulp repository:

```bash
pulp deb repository list
NAME=my-repository  # Insert some repository name from the list here.
pulp deb publication create --repository=${NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

Creating the distribution will return the `base_url` in the API response, which will contain the URL to your hosted repository.
The `base_url` has the following structure:

```none
<CONTENT_ORIGIN><CONTENT_PATH_PREFIX><distribution_base_path>
```

- `CONTENT_ORIGIN` is a required pulpcore setting, containing the protocol, fqdn, and port where the content app is reachable. See also the [pulpcore settings documentation](https://staging-docs.pulpproject.org/pulpcore/docs/admin/learn/settings/#pulp-settings).
- `CONTENT_PATH_PREFIX` is a optional pulpcore setting that defaults to `/pulp/content/`.
- The distribution base path is what you have supplied to the `--base-path` flag in the above example. In the examples in this documentation, we generally just use the repository name for the base path as well, but you may want to depart from that convention.

An example `base_url` could be:

```none
http://my-pulp-instance.com:5001/pulp/content/my-repository/
```



## Metadata Signing

!!! attention
    This workflow assumes you have already created a signing service of type `AptReleaseSigningService`.
    See the workflow on [signing service creation](https://staging-docs.pulpproject.org/pulp_deb/docs/user/guides/signing_service/) for how to do this.


Once you have created a signing service you can create signed publications from any repository:

```bash
pulp deb repository list
NAME=my-repository  # Insert some repository name from the list here.
pulp signing-service list
SIGNING_SERVICE_NAME=my-apt-release-signing-service  # Insert a signing service from the list.
pulp deb publication create --repository=${NAME} --signing-service=${SIGNING_SERVICE_NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

The above example, will sign every distribution in your publication using the same signing service, and you will need to explicitly specify the signing service each time you create the publication.

You can also create a permanent link between a repository and a signing service using the `signing_service` parameter on your repository.
At the time of this writing, this cannot be done via Pulp CLI.

It is also possible to use the `signing_service_release_overrides` parameter to specify different signing services for different distributions within a single repository.
This parameter expects a dict of key-value pairs of the form `{"<distribution>": "<signing_service_href>"}`.
At the time of this writing, this cannot be done via Pulp CLI.

## Verbatim Publications

!!! attention
    For an explanation on what a verbatim publication is, see the corresponding [feature overview](https://staging-docs.pulpproject.org/pulp_deb/docs/user/overview).


The following example uses a verbatim publication to host an official Debian repository, including the installer files:

```bash
NAME='debian-installer-bookworm-amd64'
PULP_URL='http://localhost:5001'
REMOTE_OPTIONS=(
  name=${NAME}
  url=http://ftp.de.debian.org/debian/
  distributions=bookworm
  architectures=amd64
  sync_udebs=true
  sync_installer=true
)
http ${PULP_URL}/pulp/api/v3/remotes/deb/apt/ ${REMOTE_OPTIONS[@]}
pulp deb repository create --name=${NAME} --remote=${NAME}
pulp deb repository sync --name=${NAME}
pulp deb publication --type=verbatim create --repository=${NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

As you can see, we had to create the remote using `http`, since Pulp CLI does not currently support the `sync_udebs` and `sync_installer` flags.
The only other addition was to add `--type=verbatim` to the `publication` command.

!!! warning
    Installing from synced content, as published above, is currently an [experimental feature](https://staging-docs.pulpproject.org/pulp_deb/docs/user/overview#installing-from-synced-content).


## Simple Publishing

It is possible to create `pulp_deb` repositories, that contain `.deb` packages, without any associated structure content.
Using the standard APT publisher, such packages are not included in the repo metadata.
By extension they are not part of the published repository as far as any consuming clients are concerned.
We recommend to stick to the workflows presented in this documentation, which ensure the creation of structured content.
However, as an alternate workaround, you can set the `--simple` flag when creating your publication:

```bash
pulp deb publication create --simple --no-structured --repository=${NAME}
```

The `--simple` flag causes an additional distribution named `default` with a single component named `all` to be added to your publication.
As the name suggests, this distribution-component combination, will simply contain all `.deb` packages from the repository, regardless of any structure content.
If you omit the `--no-structured` flag, the `default/all` distribution-component combination will be added *in addition* to the usual structured distribution-componen combinations.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/signing_service.md
`````markdown
# Signing Service Creation

To sign your APT release files on your `pulp_deb` publications, you will first need to create a signing service of type `AptReleaseSigningService`.

## Prerequisites

Creating a singing service requires the following:

- A unique name for the signing service, use `pulp signing-service list --field=name` to see what has been taken already.
- The public key fingerprint of the GPG key that the signing service should use for signing. The public key itself must be available in the pulp user's GPG home directory.
- A path to a signing script or executable that must meet the following criteria:
  - Must be executable by the user pulp is running as.
  - Must be available on each pulp worker.
  - Any dependencies must also be available on each pulp worker.
  - Must accept the path to the file to be signed as a argument, e.g.: `/tmp/LJDSFHD/Release`.
  - Must do at least one of the following using the GPG key specified in the signing service:
    - Clearsign the file and write the output to e.g.: `/tmp/LJDSFHD/InRelease`.
    - Detached-sign the file and write the output to e.g.: `/tmp/LJDSFHD/Release.gpg`
  - Must return a JSON dict detailing the path to any signed files, e.g.:
    ```json
    {
        "signatures": {
             "inline": "/tmp/LJDSFHD/InRelease",
             "detached": "/tmp/LJDSFHD/Release.gpg",
        }
    }
    ```

## Example Signing Script

The following example signing service script is used as part of the `pulp_deb` test suite:

```bash
#!/bin/bash

set -e

RELEASE_FILE="$(/usr/bin/readlink -f $1)"
OUTPUT_DIR="${PULP_TEMP_WORKING_DIR}"
DETACHED_SIGNATURE_PATH="${OUTPUT_DIR}/Release.gpg"
INLINE_SIGNATURE_PATH="${OUTPUT_DIR}/InRelease"
GPG_KEY_ID="Pulp QE"
COMMON_GPG_OPTS="--batch --armor --digest-algo SHA256"

# Create a detached signature
/usr/bin/gpg ${COMMON_GPG_OPTS} \
  --detach-sign \
  --output "${DETACHED_SIGNATURE_PATH}" \
  --local-user "${GPG_KEY_ID}" \
  "${RELEASE_FILE}"

# Create an inline signature
/usr/bin/gpg ${COMMON_GPG_OPTS} \
  --clearsign \
  --output "${INLINE_SIGNATURE_PATH}" \
  --local-user "${GPG_KEY_ID}" \
  "${RELEASE_FILE}"

echo { \
       \"signatures\": { \
         \"inline\": \"${INLINE_SIGNATURE_PATH}\", \
         \"detached\": \"${DETACHED_SIGNATURE_PATH}\" \
       } \
     }
```

It assumes that both public and secret key for `GPG_KEY_ID="Pulp QE"` is present in the GPG home of the Pulp user and that the secret key is not protecteded by a password.

## Creation Steps

1. Add the public key to your pulp users GPG home, for example, if pulp workers are running as the `pulp` user:
   ```bash
   sudo -u pulp gpg --import <path/to/public.gpg>
   ```
2. Deploy the signing service script and any dependencies to all your pulp workers.
3. Create the signing service:
   ```bash
   sudo -u pulp pulpcore-manager add-signing-service --class deb:AptReleaseSigningService \
     PulpQE </path/to/script> 6EDF301256480B9B801EBA3D05A5E6DA269D9D98
   ```
   Consult `pulpcore-manager add-signing-service --help` for more information.
4. You can retrieve the `pulp_href` of the newly created signing service using:
   ```bash
   pulp signing-service show --name=PulpQE | jq -r .pulp_href
   ```
5. Start [using the signing service to sign metadata](https://staging-docs.pulpproject.org/pulp_deb/docs/user/guides/publish/#metadata-signing).
`````

## File: pulp-docs/pulp_deb/docs/user/guides/sync.md
`````markdown
# Repository Synchronization

![Sync repository with remote](sync.svg)

Synchronization is one of two ways to obtain APT content for your Pulp instance.


## Quickstart Example

A working example for synchronizing and hosting Debian bookworm content from [nginx.org](https://nginx.org/en/linux_packages.html#Debian):

```bash
NAME='quickstart-nginx-bookworm-amd64'
REMOTE_OPTIONS=(
  --url=http://nginx.org/packages/debian/
  --distribution=bookworm
  --component=nginx
  --architecture=amd64
)
pulp deb remote create --name=${NAME} ${REMOTE_OPTIONS[@]}
pulp deb repository create --name=${NAME} --remote=${NAME}
pulp deb repository sync --name=${NAME}
pulp deb publication create --repository=${NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

The final command above, will include the `base_url` parameter in its output.
The accompanying value will tell you where the Pulp content app serves your newly created repository.

To re-sync, re-publish and re-distribute a newer version of the upstream repository:

```bash
pulp deb repository sync --name=${NAME}
pulp deb publication create --repository=${NAME}
```

The distribution is automatically updated since it was created using the `--repository` flag.
This enables auto-distributing of the latest publication created from the repository.

To configure our example repo in the `/etc/apt/sources.list` file on a consuming host:

```bash
deb http://<your_pulp_host>/pulp/content/quickstart-nginx-bookworm-amd64/ bookworm nginx
```

## Variation 1: Maximum Flexibility

This second example will trade in some convenience for increased flexibility:

```bash
NAME='flexible-nginx-bookworm-amd64'
pulp deb repository create --name=${NAME}
pulp deb repository sync --name=${NAME} --remote=quickstart-nginx-bookworm-amd64
PUB_HREF=$(pulp deb publication create --repository=${NAME} | jq -r '.pulp_href')
pulp deb distribution create --name=${NAME} --base-path=${NAME} --publication=${PUB_HREF}
```

- The repository is created first, and not linked to any remote.
  As a result we can and must specify the remote for each sync, in this case re-using the remote from the previous example.
- Rather than linking our distribution to our repository to enable auto-distributing the publication is specified explicitly.
  To do so, the publication href is stored in a variable parsed from the API response via `jq` at creation time.
  This is necessary since publications have no name.

The re-sync, workflow for this example is significantly more complicated:

```bash
pulp deb repository sync --name=${NAME} --remote=quickstart-nginx-bookworm-amd64
PUB_HREF=$(pulp deb publication create --repository=${NAME} | jq -r '.pulp_href')
pulp deb distribution update --name=${NAME} --publication=${PUB_HREF}
```

One advantage of updating the distribution manually like this, is increased control over the time when attached clients are served the new version.
For large repositories, the `sync` and `publication create` actions can take a long time to complete, while a distribution update is near instantaneous and could be scheduled to run at a precise time.

## Important APT Remote Flags

The above examples are designed so that they can be modified for synchronizing arbitrary upstream repositories, simply by modifying the `REMOTE_OPTIONS`.
A remote describes the sync options for some upstream repository.
As a result, we will now describe how to set some important sync flags:

- `--url` (required): The URL to the remote repository root.
  The repository root folder can normally be identified by the presence of a `dists/` and a `pool/` folder.
  For example, if you open <http://ftp.de.debian.org/debian/> in a browser, you will see these folders there.
- `--distribution` (required): The path between the `dists/` folder, and some `Release`/`InRelease` file that should be synchronized.
  For example, if you open <http://ftp.de.debian.org/debian/dists/bullseye/> in a browser, you will find the release files there, so this distribution must be given as `bullseye`.
  A single APT repository may host many different APT distributions, so the `--distribution` flag may be specified multiple times.
- `--component`: An APT repo component to sync.
  The `Release`/`InRelease` file of every APT repo distribution includes a `Components:` field with a list of valid components for that distribution.
  For example, if you check the file at <http://ftp.de.debian.org/debian/dists/bullseye/InRelease>, it includes the line `Components: main contrib non-free`, so `main`, `contrib`, and `non-free` would all be valid values for the `--component` flag.
  If you do not supply any components on a remote, then all that are available will be synchronized.
- `--architecture`: A Debian machine architecture to sync.
  This flag works exactly like the `--component` flag, with the only difference that the relevant field in the `Release`/`InRelease` file is the `Architectures:` field.
  For example, if some `Release` file includes the line `Architectures: all amd64 arm64 i386`, then `amd64`, `arm64`, `i386` are all good values for the `--architecture` flag.
  A architecture value of `all` has special meaning, and never has to be specified on your remote.

Putting all of this together in a single example, we could create the following remote:

```bash
NAME='debian-bullseye-amd64'
REMOTE_OPTIONS=(
  --url=http://ftp.de.debian.org/debian/
  --distribution=bullseye
  --component=main
  --component=contrib
  --architecture=amd64
  --architecture=nonsense
)
pulp deb remote create --name=${NAME} ${REMOTE_OPTIONS[@]}
```

- By having specified the components `main` and `contrib`, we are excluding the `non-free` component from our sync.
- By specifying the architecture `amd64` we are synchronizing all packages with architecture `amd64` but also packages with architecture `all` which are always synchronized.
- By also specifying the non existent architecture `nonsense` we are not changing the sync result at all, since specifying architectures or components that do not exist for some distribution does not result in any errors (though it will log a warning).

You can list the full list of available remote creation options using `pulp deb remote create --help`.

## Best Practice Recommendations

We recommend sticking to the following best practice recommendations:

- Once you sync a remote into a repository don't modify what is synced to that repository.
  Keep using the same remote for that repository, and don't modify the distributions, components, or architectures parameters on the remote.
  If you do want to change these values it is almost always best to create a new remote, and sync it to a new Pulp repository.
- Use a single `--distribution` per remote.
  While it is possible to set multiple distributions on a single remote, and sync them into a single Pulp repository, this can easily lead to huge confusing reposiotries with performance issues.
  On the flip side it is cheap to create one remote and one repository for each distribution you want to sync.
  If you want to sync a lot of distributions, from the same upstream repository, this can easily be scripted.
- For official Debian repositories, never use values like `stable`, `oldstable`, `oldoldstable-updates`, etc. for the distribution.
  Always use Debian distribution names like `bookworm` or `bookworm-updates` instead.
  The reason is that `stable`, `oldstable`, or `oldoldstable` are symlinks, that might suddenly be redirected to an entirely different APT repo distribution when a new Debian version is released.
- Always consider explicitly setting any `--architecture` values you want.
  If you know you just need `amd64`, syncing all the other architectures could cost you a multiple in sync times and storage requirements compared to just syncing `amd64`.
  Unless you have hosts with multiarch environments, consider syncing just one architecture per Pulp repository (similarly to syncing just a single distribution).
- For official Debian and Ubuntu repositories you normally want all the components, so it is ok not to set any components explicitly (this is interpreted as sync all that are available).
  However, some third party repositories sometimes host a large number of components that you may not need, so you should set just the components you need in such cases.
- Use a naming scheme for your remotes, that reflects the above.
  For example `nginx-bookworm-amd64` is a good name using the structure `<repo_name>-<distribution>-<architecture>`.

## Flat Repository Format Example

`pulp_deb` supports synchronization from repositories using the deprecated [flat repository format](https://wiki.debian.org/DebianRepository/Format#Flat_Repository_Format).

!!! note
    An APT repo using flat repository format does not have a `dists/` folder.
    Rather it is characterized by a single `Release` and/or `InRelease` file, with a single package index right next to it.
    Most commonly all metadata files and all packages are stored directly in the repository root.
    Hence, the name: "flat repo format".


The following workflow synchronizes an example flat APT repo:

```bash
NAME='nvidia-cuda-flat-amd64'
REMOTE_OPTIONS=(
  --url=http://developer.download.nvidia.com/compute/cuda/repos/debian11/x86_64/
  --distribution=/
  --architecture=amd64
)
pulp deb remote create --name=${NAME} ${REMOTE_OPTIONS[@]}
pulp deb repository create --name=${NAME} --remote=${NAME}
pulp deb repository sync --name=${NAME}
pulp deb publication create --repository=${NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

- For a flat repository, the specified distribution must always end with a `/`, most commonly, it will just be a `/`.
  Conversely, a distribution string provided for a repository not using flat repository format must not end with `/`!
- You must not provide more than one distribution for a flat repository.
- Since flat repositories do not contain components, there is no reason to use the `--component` flag.
- You may still filter by architecture using the `--architecture` flag.

!!! warning
    Even though you are synchronizing a flat repository, `pulp_deb` will convert it to a regular structured APT repository on the publish.
    A distribution of `/` will be converted into a single distribution named `flat-repo`, which will contain a single component named `flat-repo-component`.

To configure the above repo in the `/etc/apt/sources.list` file on a consuming host:

```bash
deb http://<your_pulp_host>/pulp/content/nvidia-cuda-flat-amd64/ flat-repo flat-repo-component
```

This contrasts with how you would configure the upstream flat repository:

```bash
deb http://developer.download.nvidia.com/compute/cuda/repos/debian11/x86_64/ /
```

## Debian Security Repository Example

The debian security repository up to the `buster` release, uses a rare variation on the standard APT repository structure, where the distribution includes a `/` in it.
It is possible to create a remote for this as follows:

```bash
NAME='debian-security-buster-amd64'
REMOTE_OPTIONS=(
  --url=http://security.debian.org/debian-security/
  --distribution=buster/updates
  --component=updates/contrib
  --component=non-free
  --architecture=amd64
)
pulp deb remote create --name=${NAME} ${REMOTE_OPTIONS[@]}
```

!!! note
    For the example distribution above, the Release file components are listed as:

`Components: updates/main updates/contrib updates/non-free`

You may specify a component of `updates/main` as either `updates/main` or simply as `main`, `pulp_deb` will understand either way.
The example is chosen to demonstrate both versions, as a matter of best practice we recommend being consistent.


## Synchronizing from Partial Mirrors

By default, syncs will fail if the upstream repository is missing package indices that are present in its Release file.
This breaks synchronization from partial mirrors, and can be overriden by setting `ignore_missing_package_indices=True` on the remote.
Alternatively, use `FORCE_IGNORE_MISSING_PACKAGE_INDICES=True` in your Pulp configuration file, to force this behaviour for all syncs irrespective of the individual remotes.

!!! note
    Currently, the remote option `ignore_missing_package_indices` cannot be set using Pulp CLI.
`````

## File: pulp-docs/pulp_deb/docs/user/guides/upload.md
`````markdown
# Package Uploads

![Add Content to Repository with upload](upload.svg)

Next to synchronization, direct upload is the second way to obtain APT content for your Pulp instance.


## Quickstart Example

A working example for uploading a `.deb` package and hosting it in a `pulp_deb` repository:

```bash
NAME='quickstart-upload-vim-amd64'
pulp deb repository create --name=${NAME}
wget ftp.de.debian.org/debian/pool/main/v/vim/vim_9.0.1378-2_amd64.deb
pulp deb content upload --repository=${NAME} --file=vim_9.0.1378-2_amd64.deb
pulp deb publication create --repository=${NAME}
pulp deb distribution create --name=${NAME} --base-path=${NAME} --repository=${NAME}
```

By default a package uploaded directly to a repository like this will be placed in the `upload` component of the `pulp` distribution.
It follows we can configure our example repo in the `/etc/apt/sources.list` file on a consuming host as follows:

```bash
deb http://<your_pulp_host>/pulp/content/quickstart-uploaded-vim-amd64/ pulp upload
```

!!! note
    You can think of the upload command as declarative and idempotent.
    In other words, you can upload the same package to your Pulp repository multiple times, and the task will succeed each time, but only the first time will result in any changes to your Pulp repository.


!!! warning
    It is possible to have an uploaded package added to an arbitrary distribution-component combination, by supplying the `distribution` and `component` parameters to the package upload API endpoint.
    However, at the time of writing it is not possible to do this via Pulp CLI.
    It is also not possible to use Pulp CLI to create a release content in order to customize the release file fields.


## Create a Structured Repo Manually

To get around Pulp CLI limitations from the quickstart example, we present the following scripted example that uses `http`  and `jq` to talk directly to the API.

!!! note
    You may also want to have a look at the [pulpcore upload documentation](https://staging-docs.pulpproject.org/pulpcore/docs/user/guides/upload-publish/).


**Setup**

```bash
#!/usr/bin/env bash
set -e

export PULP_URL=${PULP_URL:-http://localhost:24817}

# Poll a Pulp task until it is finished.
wait_until_task_finished() {
    echo "Polling the task until it has reached a final state."
    local task_url=${1}
    while true
    do
        local response=$(http ${task_url})
        local state=$(echo ${response} | jq -r .state)
        case ${state} in
            failed|canceled)
                echo "Task in final state: ${state}"
                exit 1
                ;;
            completed)
                echo "${task_url} complete."
                break
                ;;
            *)
                echo "Still waiting..."
                sleep 1
                ;;
        esac
    done
}
```

**Workflow**

```bash
#!/usr/bin/env bash

set -ev

trap "rm frigg_1.0_ppc64.deb" EXIT

# user defined values
NAME=manual-upload-frigg-ppc64
DIST=pulp
COMP=upload

RELEASE_FILE_FIELDS=(
  codename=${DIST}
  suite=${DIST}
  version=1
  origin=myorigin
  label=mylabel
  description=mydescription
)

# download a package
wget https://fixtures.pulpproject.org/debian/pool/asgard/f/frigg/frigg_1.0_ppc64.deb

# create a repo and distribution
REPO_HREF=$(http ${PULP_URL}/pulp/api/v3/repositories/deb/apt/ name=${NAME} | jq -r .pulp_href)
TASK_HREF=$(http ${PULP_URL}/pulp/api/v3/distributions/deb/apt/ name=${NAME} base_path=${NAME} repository=${REPO_HREF} | jq -r .task)
wait_until_task_finished ${PULP_URL}${TASK_HREF}

# Create a Release, ReleaseArchitecture, and ReleaseComponent content to set various release file fields and add them to the repo in a single action
TASK_HREF=$(http ${PULP_URL}/pulp/api/v3/content/deb/releases/ repository=${REPO_HREF} distribution=${DIST} ${RELEASE_FILE_FIELDS[@]} architectures:='["amd64", "ppc64"]' components:=['"'${COMP}'"'] | jq -r .task)
wait_until_task_finished ${PULP_URL}${TASK_HREF}

# upload the package to create Package and PackageReleaseComponent content and add it to the repo in a single action
# the ReleaseComponent and ReleaseArchitecture were created in the previous step but could have been created in this step
TASK_HREF=$(http --form ${PULP_URL}/pulp/api/v3/content/deb/packages/ file@frigg_1.0_ppc64.deb repository=${REPO_HREF} distribution=${DIST} component=${COMP} | jq -r .task)
wait_until_task_finished ${PULP_URL}${TASK_HREF}

# publish our repo
TASK_HREF=$(http ${PULP_URL}/pulp/api/v3/publications/deb/apt/ repository=${REPO_HREF} | jq -r .task)
wait_until_task_finished ${PULP_URL}${TASK_HREF}

# check that our repo has one of the package index folders we would expect
http --check-status ${PULP_URL}/pulp/content/${NAME}/dists/${DIST}/${COMP}/binary-ppc64/Packages
```

The final command from the sctipt should return a `200 OK` response.
`````

## File: pulp-docs/pulp_deb/docs/user/index.md
`````markdown
# Feature Overview

This chapter aims to give a high level overview of what features the plugin supports, including known limitations, so as to set realistic expectations on how the plugin can be used.

For detailed usage examples, see `How-to Guides` instead.
See the [REST API documentation](https://staging-docs.pulpproject.org/pulp_deb/restapi/) for an exhaustive feature reference.

## Core Features

### Repository Synchronization

Synchronizing upstream repositories is one of two ways to obtain content for the `pulp_deb` plugin.
See [package uploads](#package-uploads) for the other.
The aim is for the plugin to be able to synchronize (and publish) arbitrary (valid) APT repositories.
This also includes repositories using [flat repository format](https://wiki.debian.org/DebianRepository/Format#Flat_Repository_Format).

When synchronizing an upstream repository, only content supported by the `pulp_deb` plugin is downloaded. This includes:

- `Release`, `InRelease`, and `Release.gpg` metadata files.
- Binary package indices, aka `Packages` files.
- Any `.deb` binary packages referenced by any package indices being synced.
- (optionally) Installer package indices, the associated `.udeb` installer packages, as well as some other installer file types.

Things that are not synchronized:

- Source indices and source packages.
- Language and translation files.
- Anything else not explicitly mentioned above.

If and how this synchronized content is ultimately used, is dependent on the publisher and its options.
For more information see [verbatim publishing](#verbatim-publishing) and [APT publishing](#apt-publishing) below.

#### Filtered Synchronization

It is possible to synchronize only a subset of a given upstream repository by specifying a set of distributions (aka releases), components, and architectures to synchronize.
Specifying the desired distributions is mandatory, while not specifying any components or architectures is interpreted as: "synchronize all that are available".

#### Signature Verification

!!! note
    For APT repositories, only the `Release` file of each distribution is signed.
    This file contains various checksums for all other metadata files contained within the distribution, which in turn contain the checksums of the packages themselves.
    As a result, signing the `Release` file is sufficient to guarantee the integrity of the entire distribution.


You may provide your remotes with the relevant (public) GPG key for `Release` file signature verification.
When synchronizing an upstream repository using signature verification, any metadata files that cannot be verified are discarded.
If no relevant metadata files are left, a `NoReleaseFile` error is thrown and the sync fails.

### Package Uploads

Rather than synchronizing upstream repositories, it is also possible to upload `.deb` package files to the `pulp_deb` plugin in a variety of ways.
See the corresponding [workflow documentation](https://staging-docs.pulpproject.org/pulp_deb/docs/user/guides/upload/#upload-and-manage-content) for more information.
In general, uploading content works the same way as for any other Pulp plugin, so you may also wish to consult the [pulpcore upload documentation](https://staging-docs.pulpproject.org/pulpcore/docs/user/guides/upload-publish/).


### Hosting APT Repositories

Once you have obtained some content via synchronization, or upload, you will want to publish and distribute this content, so that your clients may consume your hosted APT repositories.

The default way to do so is to use the `pulp_deb` APT publisher.
This publisher will generate new metadata for any `.deb` packages stored in your Pulp repository.
Any upstream metadata, installer files, and installer packages will be ignored.
The APT publisher will publish all the distributions (aka releases), components, and architectures, that were synchronized to the Pulp repository being published (or else created during package upload).
It will also use a default `pool/` folder structure regardless of the package file locations used by the relevant upstream repository.

This approach guarantees a consistent set of packages and metadata is presented to your clients using the latest APT repository format specification.
It also allows you to sign the newly generated metadata using your own signing key.

An alternative is to use the `pulp_deb` [verbatim publisher](#verbatim-publishing).

#### Metadata Signing

The `pulp_deb` plugin allows you to sign any `Release` files generated by the APT publisher by providing it with a signing service of type `AptReleaseSigningService` at the time of creation.
It is also possible to use different signing services for different distributions within your APT repositories.

## Advanced Features

### Verbatim Publishing

!!! note
    Even though the interface is very different, the verbatim publisher is comparable to `pulp_rpm`'s "full mirror" sync feature.


The verbatim publisher is an alternative to the `pulp_deb` plugin's main [APT publisher](#apt-publishing).
It will recreate an exact copy of the subset of an upstream repo that was synchronized into Pulp.
In other words, every synchronized file, including the upstream metadata will use the exact same relative path it had in the upstream repository.

**Advantages:**

- Upstream `Release` file signatures are retained, so clients can verify using the same keys as for the upstream repository.
- No new metadata is generated, so the verbatim publisher is much faster than the APT publisher.
- The verbatim publisher is the only way to publish synchronized installer files and packages.

**Disadvantages:**

- Since it relies on upstream metadata, it only works for synced content.
- It is not possible to sign a verbatim publication using your own [signing services](#metadata-signing).
- Since the upstream repo is mirrored exactly, any errors in the upstream repo are retained.
- In some cases the upstream metadata may be inconsistent with what was synced into Pulp.

### Advanced Copy

The plugin provides an advanced copy feature for moving packages between repositories.
Using this feature, it is possible to specify a set of packages to be copied from one Pulp repository to another, without having to manually specify the structure content that tells Pulp what packages go into what release component.
That way, the repository version created in the target repository, can be meaningfully published using the [APT publisher](#apt-publishing), without relying on the "simple publishing" workaround.

We are also planning to expand the advanced copy feature with a [dependency solving](#dependency-solving) mechanism in the future.

### ApyByHash

AptByHash is a feature that mitigates commonplace 'Hash Sum Mismatch' errors during an 'apt-get-update'.
It adds the checksum of the package metadata to the the packages' names.
These files are then stored within a 'by-hash' directory within each release architecture in the specified debian repository.
The client will then use the filename to identify the expected checksum and download a file whose name matches the checksum.

Please note that this feature is disabled by default and should be enabled prior to use.
To do this, set `APT_BY_HASH = True` in `/pulp_deb/app/settings.py`.

In addition, you are responsible for setting up a reverse proxy with cache in order to cache the by-hash files.

### Import/Export

The `pulp_deb` plugin implements the pulpcore Import/Export API. Which allows you to import and export repositories.
See also the [pulpcore import-export docs](https://staging-docs.pulpproject.org/pulpcore/docs/admin/guides/import-export-repos/).

### Source Packages

The `pulp_deb` plugin is able to sync and publish [Debian source packages](https://wiki.debian.org/Packaging/SourcePackage).

## Roadmap and Experimental

!!! warning
    This section describe features that are either planned for the future, or exist only in an experimental state.
    These features may lack expected functionality, or break unexpectedly.
    The API may still change in non-backwards compatible ways.

### Installation from Synced Content

It is currently possible to synchronize installer indices and packages and publish them using the [verbatim publisher](#verbatim-publishing).
However, there is no actual test coverage for installing Debian or Ubuntu hosts from a so published repository using the debian-installer.
We have also received feedback that the feature is currently broken since `pulp_deb` currently lacks the ability to synchronize language and translation files which are needed for the debian-installer.

!!! note
    There is not yet any firm time table for when this might be worked on.
    The next step is to solve the [translation file issue](https://github.com/pulp/pulp_deb/issues/408).

### Dependency Solving

It is planned to expand the [advanced copy](#advanced-copy) feature with a dependency solving mechanism analogous to the one provided by `pulp_rpm`.
The idea is to make it possible to specify a list of packages and automatically copy them *and their entire dependency trees* into a target repo.

!!! note
    There is not yet any firm time table for when this might be worked on.
    See the [dependency solving issue](https://github.com/pulp/pulp_deb/issues/386) for any new developments.


### Domain and RBAC (Multi-Tenancy)

There have been multiple requests for this feature in `pulp_deb`.

!!! note
    The plugin maintainers have no plans to implement this.
    If you are interested in contributing to the development of this feature, please get in touch with us via the [multi tenancy feature request](https://github.com/pulp/pulp_deb/issues/860).
`````

## File: pulp-docs/pulp_deb/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 3.5.2 (2025-04-23) {: #3.5.2 }

No significant changes.

---

## 3.5.1 (2025-02-24) {: #3.5.1 }

#### Features {: #3.5.1-feature }

- Added compatibility with pulpcore 3.70+.

---

## 3.5.0 (2025-01-22) {: #3.5.0 }

#### Features {: #3.5.0-feature }

- Added initial RBAC support.
  [#860](https://github.com/pulp/pulp_deb/issues/860)
- Exposed the plain component when retrieving ReleaseComponent content via the API.
  [#1167](https://github.com/pulp/pulp_deb/issues/1167)
- Expose a sha256 column for source packages that contains the digest of the dsc file.

#### Bugfixes {: #3.5.0-bugfix }

- Fixed an issue where the signing service did not properly clean up temporary files after completion.
  [#1141](https://github.com/pulp/pulp_deb/issues/1141)
- Removing packages from a repository using the modify API endpoint now also removes all associated PackageReleaseComponents.
  [#1190](https://github.com/pulp/pulp_deb/issues/1190)

#### Misc {: #3.5.0-misc }

- Rebase migrations to prepare for pulpcore 3.70.
  [#1204](https://github.com/pulp/pulp_deb/issues/1204)

---

## 3.4.0 (2024-10-02) {: #3.4.0 }

#### Features {: #3.4.0-feature }

- Extend publishing at by-hash paths to source files.
  [#1059](https://github.com/pulp/pulp_deb/issues/1059)
- Improved performance when creating publications, by creating PublishedArtifacts in bulk, greatly reducing the number of database calls.
  [#1147](https://github.com/pulp/pulp_deb/issues/1147)
- Improved performance by prefetching relevant Artifacts and RemoteArtifacts during publishing, reducing the number of database calls.
  [#1148](https://github.com/pulp/pulp_deb/issues/1148)

#### Bugfixes {: #3.4.0-bugfix }

- Fixed throwing the wrong error when pointing to an invalid repository with a custom signing service.
  [#1122](https://github.com/pulp/pulp_deb/issues/1122)

#### Misc {: #3.4.0-misc }

- Improved the publish task performance by optimizing the database queries used in that task.
  [#1115](https://github.com/pulp/pulp_deb/issues/1115)

---

## 3.3.1 (2024-08-06) {: #3.3.1 }

#### Bugfixes {: #3.3.1-bugfix }

- Fixed throwing the wrong error when pointing to an invalid repository with a custom signing service.
  [#1122](https://github.com/pulp/pulp_deb/issues/1122)

#### Misc {: #3.3.1-misc }

- Improved the publish task performance by optimizing the database queries used in that task.
  [#1115](https://github.com/pulp/pulp_deb/issues/1115)

---

## 3.3.0 (2024-06-19) {: #3.3.0 }


#### Features {: #3.3.0-feature }

- Added the ``architectures`` and ``components`` parameters to the release API in order to create releases with accompanying architectures and components in a single API call.
  Also added retrieve functionality to the release API.
  [#1038](https://github.com/pulp/pulp_deb/issues/1038)
- Added support for duplicate source debs. If an source deb already exists, return it instead of raising an exception.
  [#1077](https://github.com/pulp/pulp_deb/issues/1077)
- Made the plugin compatible with pulpcore 3.55.0+.
  [#1100](https://github.com/pulp/pulp_deb/issues/1100)

#### Bugfixes {: #3.3.0-bugfix }

- Fixed a bug where an ``IntegrityError`` was raised during publish when a source package belonged to
  two dists.
  [#1053](https://github.com/pulp/pulp_deb/issues/1053)

#### Improved Documentation {: #3.3.0-doc }

- Added initial staging docs.
  [#1014](https://github.com/pulp/pulp_deb/issues/1014)

#### Removals {: #3.3.0-removal }

- When creating a release, the API now returns a task instead of the release being created.
  In addition, attempting to create a release that already exists will no longer return an error.
  Instead the resulting task will simply list the existing content in its ``created_resources`` field.
  [#1038](https://github.com/pulp/pulp_deb/issues/1038)
- Dropped support for Python 3.8. pulp_deb now supports Python >=3.9.
  [#1039](https://github.com/pulp/pulp_deb/issues/1039)
- When uploading a source deb that already exists, instead of throwing an exception it will now return the existing source package.
  [#1077](https://github.com/pulp/pulp_deb/issues/1077)

---

## 3.2.1 (2024-08-06) {: #3.2.1 }

#### Bugfixes {: #3.2.1-bugfix }

- Fixed a bug where an ``IntegrityError`` was raised during publish when a source package belonged to
  two dists.
  [#1053](https://github.com/pulp/pulp_deb/issues/1053)
- Fixed throwing the wrong error when pointing to an invalid repository with a custom signing service.
  [#1122](https://github.com/pulp/pulp_deb/issues/1122)

#### Misc {: #3.2.1-misc }

- Improved the publish task performance by optimizing the database queries used in that task.
  [#1115](https://github.com/pulp/pulp_deb/issues/1115)

---

## 3.2.0 (2024-03-04) {: #3.2.0 }

### Features

-   Added feature to serve published artifacts from previous publications for 3 days.
    This fulfills the apt-by-hash/acquire-by-hash spec by allowing by-hash files to be cached for a
    period of 3 days.
    [#911](https://github.com/pulp/pulp_deb/issues/911)
-   Added retrieve functionality for ReleaseArchitecture and ReleaseComponent content.
    [#1010](https://github.com/pulp/pulp_deb/issues/1010)
-   Allow optimize with mirror mode if nothing at all has changed in the repository being synced.
    [#1027](https://github.com/pulp/pulp_deb/issues/1027)

### Bugfixes

-   Fixed repo uniqueness constraints.
    Duplicate packages with identical checksums are now allowed.
    In addition, duplicates are now also handled for the set of incoming content.
    [#921](https://github.com/pulp/pulp_deb/issues/921)
-   Fixed a bug where pulp_deb was serving unpublished content when distributing a repository that has content but no publications.
    [#976](https://github.com/pulp/pulp_deb/issues/976)
-   Fixed a bug where enabling the `APT_BY_HASH` setting did not enable the feature.
    [#984](https://github.com/pulp/pulp_deb/issues/984)
-   Fixed DEBUG logging of prohibited duplicate packages.
    [#994](https://github.com/pulp/pulp_deb/issues/994)
-   Suppressed deb822's confusing log warning about python-apt not being installed.
    [#1019](https://github.com/pulp/pulp_deb/issues/1019)

### Removals

-   The API endpoints for ReleaseArchitecture and ReleaseComponent creation will no longer return a 400 `non_field_errors` if the content to be created already exists.
    Instead a task is triggered that will list the existing content in its `created_resources` field.
    [#1010](https://github.com/pulp/pulp_deb/issues/1010)

### Misc

-   Added tests that verify the download of content served by `pulp_deb`.
    [#919](https://github.com/pulp/pulp_deb/issues/919)
-   Added sync, publish and pulp2pulp performance tests to run with the nightly CI.
    [#970](https://github.com/pulp/pulp_deb/issues/970)

---

## 3.1.2 (2024-02-29) {: #3.1.2 }

### Bugfixes

-   Fixed a bug where enabling the `APT_BY_HASH` setting did not enable the feature.
    [#984](https://github.com/pulp/pulp_deb/issues/984)
-   Fixed DEBUG logging of prohibited duplicate packages.
    [#994](https://github.com/pulp/pulp_deb/issues/994)
-   Suppressed deb822's confusing log warning about python-apt not being installed.
    [#1019](https://github.com/pulp/pulp_deb/issues/1019)

---

## 3.1.1 (2023-12-12) {: #3.1.1 }

### Bugfixes

-   Fixed repo uniqueness constraints.
    Duplicate packages with identical checksums are now allowed.
    In addition, duplicates are now also handled for the set of incoming content.
    [#921](https://github.com/pulp/pulp_deb/issues/921)
-   Fixed a bug where pulp_deb was serving unpublished content when distributing a repository that has content but no publications.
    [#976](https://github.com/pulp/pulp_deb/issues/976)

### Misc

-   Added tests that verify the download of content served by `pulp_deb`.
    [#919](https://github.com/pulp/pulp_deb/issues/919)

---

## 3.1.0 (2023-11-09) {: #3.1.0 }

### Features

-   Add support for handling source packages.
    [#409](https://github.com/pulp/pulp_deb/issues/409)
-   Added an option to publish by-hash/ files to mitigate the Hash Sum Mismatch error in debian repos as specified here: <https://wiki.debian.org/DebianRepository/Format#indices_acquisition_via_hashsums_.28by-hash.29>.
    Use the APT_BY_HASH setting to enable this feature.
    [#795](https://github.com/pulp/pulp_deb/issues/795)
-   Fixed the `create_repositories=True` parameter for importing content.
    [#872](https://github.com/pulp/pulp_deb/issues/872)
-   Add additional package name filters such as `name__contains` and `name__startswith`.
    Check the REST docs for a complete list.
    [#909](https://github.com/pulp/pulp_deb/issues/909)
-   Added extra filters linking SourcePackages to Releases and ReleaseComponents.
    [#926](https://github.com/pulp/pulp_deb/issues/926)
-   Made the plugin compatible with pulpcore 3.40.1+.
    [#928](https://github.com/pulp/pulp_deb/issues/928)

### Bugfixes

-   Improved the performance of structured `/pulp/api/v3/deb/copy/` actions.
    [#870](https://github.com/pulp/pulp_deb/issues/870)
-   Optimize mode can now take effect, when switching from mirrored to not mirrored mode between syncs.
    [#903](https://github.com/pulp/pulp_deb/issues/903)

---

## 3.0.2 (2024-02-29) {: #3.0.2 }

### Bugfixes

-   Fixed DEBUG logging of prohibited duplicate packages.
    [#994](https://github.com/pulp/pulp_deb/issues/994)
-   Suppressed deb822's confusing log warning about python-apt not being installed.
    [#1019](https://github.com/pulp/pulp_deb/issues/1019)

---

## 3.0.1 (2023-12-12) {: #3.0.1 }

### Features

-   Fixed the `create_repositories=True` parameter for importing content.
    [#872](https://github.com/pulp/pulp_deb/issues/872)

### Bugfixes

-   Improved the performance of structured `/pulp/api/v3/deb/copy/` actions.
    [#870](https://github.com/pulp/pulp_deb/issues/870)
-   Optimize mode can now take effect, when switching from mirrored to not mirrored mode between syncs.
    [#903](https://github.com/pulp/pulp_deb/issues/903)
-   Fixed repo uniqueness constraints.
    Duplicate packages with identical checksums are now allowed.
    In addition, duplicates are now also handled for the set of incoming content.
    [#921](https://github.com/pulp/pulp_deb/issues/921)
-   Fixed a bug where pulp_deb was serving unpublished content when distributing a repository that has content but no publications.
    [#976](https://github.com/pulp/pulp_deb/issues/976)

### Misc

-   Added tests that verify the download of content served by `pulp_deb`.
    [#919](https://github.com/pulp/pulp_deb/issues/919)

---

## 3.0.0 (2023-09-05) {: #3.0.0 }

### Features

-   Added `version`, `origin`, `label`, and `description` fields to Releases.
    These fields can be set when creating new Releases via the API.
    Going forward, they will also be synced from upstream release files if present.
    [#449](https://github.com/pulp/pulp_deb/issues/449)
-   Specify and remember the Signing Services we want to use for each Repo / Release.
    [#641](https://github.com/pulp/pulp_deb/issues/641)
-   Added API filters to limit results by related pulp_deb content types.
    [#646](https://github.com/pulp/pulp_deb/issues/646)
-   Added the `publish_upstream_release_fields` field to the repository model.
    To avoid a breaking change in publication behaviour, existing repositories are populated with the setting set to `False`, while any newly created repostiroies will default to `True`.
    Whatever the value on the repository, it can be overriden when creating a new publication.
    [#793](https://github.com/pulp/pulp_deb/issues/793)

### Bugfixes

-   Fixed KeyError during publish if package has architecture that's not supported in the Packages file.
    Instead, a warning message will be logged.
    [#777](https://github.com/pulp/pulp_deb/issues/777)
-   Fixed an async error preventing synchronization with `sync_installer` set to `True`.
    [#797](https://github.com/pulp/pulp_deb/issues/797)
-   Fixed content creating code triggered in rare edge cases when unapplying DB migration 0021.
    [#806](https://github.com/pulp/pulp_deb/issues/806)
-   Fixed a bug where structured package upload was only working as intended for the first package uploaded to each repository.
    Also added logging and ensured structure content is added to the creating tasks `created_resources` list.
    [#807](https://github.com/pulp/pulp_deb/issues/807)

### Improved Documentation

-   Added `pulp-cli-deb` installation instructions.
    [#598](https://github.com/pulp/pulp_deb/issues/598)
-   Replaced references to the Pulp Ansible installer with references to the Pulp OCI images.
    [#779](https://github.com/pulp/pulp_deb/issues/779)
-   Added workflow documentation for creating and using signing services.
    [#867](https://github.com/pulp/pulp_deb/issues/867)
-   Completely reworked the "Feature Overview" and "Workflows" docs with an emphasise on Pulp CLI and structured content.
    [#886](https://github.com/pulp/pulp_deb/issues/886)

### Removals

-   Since release file fields including "Label" and "Version", are now synced from upstream repositories, we have dropped the PUBLISH_RELEASE_FILE_LABEL and PUBLISH_RELEASE_FILE_VERSION settings.
    This removes the ability to publish Pulp internal "Label" and "Version" values that never made much sense, and had been disabled by default since at least pulp_deb 2.18.0.
    [#449](https://github.com/pulp/pulp_deb/issues/449)
-   The codename and suite fields are removed from the ReleaseComponent and ReleaseArchitecture models and all associated filters and viewsets.
    [#599](https://github.com/pulp/pulp_deb/issues/599)
-   The `pulp/api/v3/publications/deb/apt/` API endpoint, used to require users to explicitly set at least one of `simple` or `structured` to `True` on the POST.
    The new behavior is to default to `structured=True` and `simple=False`.
    [#858](https://github.com/pulp/pulp_deb/issues/858)

### Misc

-   This change includes a large DB migration to drop 'codename' and 'suite' from the uniqueness constraints of all structure content.
    The migration will merge any resulting collisions and alter all records with a foreign key relation to the so eliminated content to point at the merge result instead.
    [#599](https://github.com/pulp/pulp_deb/issues/599)
-   Added test cases for advanced copy task.
    [#758](https://github.com/pulp/pulp_deb/issues/758)
-   Add tests for content filters, and make filters return empty list if Content not in RepoVersion instead of raising ValidationError.
    [#780](https://github.com/pulp/pulp_deb/issues/780)
-   Added better scoping for the pytest fixtures.
    [#790](https://github.com/pulp/pulp_deb/issues/790)
-   Removed the `pulp-smash` test dependency.
    [#796](https://github.com/pulp/pulp_deb/issues/796)
-   Converted the publish tests to use the pytest framework.
    [#828](https://github.com/pulp/pulp_deb/issues/828)
-   Converted the import/export tests to use the pytest framework.
    [#846](https://github.com/pulp/pulp_deb/issues/846)

---

## 2.21.2 (2023-09-05) {: #2.21.2 }

### Bugfixes

-   Fixed advanced copy due to pulpcore deprecations.
    [#869](https://github.com/pulp/pulp_deb/issues/869)

### Misc

-   Fixed the deb/copy/ API path for scenarios that modify the API root.
    [#879](https://github.com/pulp/pulp_deb/issues/879)

---

## 2.21.1 (2023-07-20) {: #2.21.1 }

### Bugfixes

-   Fixed KeyError during publish if package has architecture that's not supported in the Packages file.
    Instead, a warning message will be logged.
    [#777](https://github.com/pulp/pulp_deb/issues/777)
-   Fixed an async error preventing synchronization with `sync_installer` set to `True`.
    [#797](https://github.com/pulp/pulp_deb/issues/797)
-   Fixed content creating code triggered in rare edge cases when unapplying DB migration 0021.
    [#806](https://github.com/pulp/pulp_deb/issues/806)
-   Fixed a bug where structured package upload was only working as intended for the first package uploaded to each repository.
    Also added logging and ensured structure content is added to the creating tasks `created_resources` list.
    [#807](https://github.com/pulp/pulp_deb/issues/807)

---

## 2.21.0 (2023-05-22) {: #2.21.0 }

### Features

-   The upload of content has been changed to accept already existing debian packages. This allows multiple users to own identical files.
    [#592](https://github.com/pulp/pulp_deb/issues/592)
-   Sign the metadata for all releases in a repo concurrently, greatly speeding up the publish task in environments where signing is slow.
    [#682](https://github.com/pulp/pulp_deb/issues/682)
-   Add new parameters component and distribution to the package upload endpoint to enable a structured package upload.
    [#743](https://github.com/pulp/pulp_deb/issues/743)
-   Declare and require at least pulpcore/3.25 compatibility.
    [#770](https://github.com/pulp/pulp_deb/issues/770)

### Bugfixes

-   Improve the pulp_deb "No valid Release file found" error message for gpg validation fail.
    [#399](https://github.com/pulp/pulp_deb/issues/399)
-   Fixed a bug where architecture "all" packages were missing when syncing Debian 11 style repositories.
    [#612](https://github.com/pulp/pulp_deb/issues/612)
-   Fixed a bug where packages were only showing up in one Packages index file if they belonged to two
    or more releases.
    [#674](https://github.com/pulp/pulp_deb/issues/674)
-   Fixed a bug that prevented orphan cleanup due to protected foreign keys.
    [#690](https://github.com/pulp/pulp_deb/issues/690)
-   Fixed bug where PackageReleaseComponents were not being automatically removed when dupes were added
    to a repo version even though the duplicate Packages they referenced were being removed.
    [#705](https://github.com/pulp/pulp_deb/issues/705)

### Improved Documentation

-   Improved the documentation on metadata signing.
    [#660](https://github.com/pulp/pulp_deb/issues/660)
-   Fixed infinite loading when searching for specific terms.
    [#765](https://github.com/pulp/pulp_deb/issues/765)

### Removals

-   Package and generic content API endpoints no longer return errors when entities already exist.
    Instead they return the existing entities as if they had just been created.
    [#592](https://github.com/pulp/pulp_deb/issues/592)
-   Replaced the `release` field with the triple `distribution`, `codename`, `suite` on the `/pulp/pulp/api/v3/content/deb/release_components/` and `/pulp/pulp/api/v3/content/deb/release_architectures/` API endpoints.
    As a result, the available filters where also adjusted for the new fields.
    [#748](https://github.com/pulp/pulp_deb/issues/748)

### Misc

-   Add precompiled test data for pytest to use in functional tests
    [#395](https://github.com/pulp/pulp_deb/issues/395)
-   Made repository publication structure independed of the Release model, which includes removing all foreighn key relations to the model.
    [#748](https://github.com/pulp/pulp_deb/issues/748)

---

## 2.20.4 (2023-09-05) {: #2.20.4 }

### Bugfixes

-   Improve the pulp_deb "No valid Release file found" error message for gpg validation fail.
    [#399](https://github.com/pulp/pulp_deb/issues/399)

### Misc

-   Fixed the deb/copy/ API path for scenarios that modify the API root.
    [#879](https://github.com/pulp/pulp_deb/issues/879)

---

## 2.20.3 (2023-07-20) {: #2.20.3 }

### Bugfixes

-   Fixed KeyError during publish if package has architecture that's not supported in the Packages file.
    Instead, a warning message will be logged.
    [#777](https://github.com/pulp/pulp_deb/issues/777)
-   Fixed an async error preventing synchronization with `sync_installer` set to `True`.
    [#797](https://github.com/pulp/pulp_deb/issues/797)

### Improved Documentation

-   Fixed infinite loading when searching for specific terms.
    [#765](https://github.com/pulp/pulp_deb/issues/765)

---

## 2.20.2 (2023-04-26) {: #2.20.2 }

### Bugfixes

-   Fixed a bug that prevented orphan cleanup due to protected foreign keys.
    [#690](https://github.com/pulp/pulp_deb/issues/690)

### Misc

-   Add precompiled test data for pytest to use in functional tests
    [#395](https://github.com/pulp/pulp_deb/issues/395)

---

## 2.20.1 (2022-12-07) {: #2.20.1 }

### Bugfixes

-   Fixed a bug where architecture "all" packages were missing when syncing Debian 11 style repositories.
    [#612](https://github.com/pulp/pulp_deb/issues/612)
-   Fixed a bug where packages were only showing up in one Packages index file if they belonged to two
    or more releases.
    [#674](https://github.com/pulp/pulp_deb/issues/674)

---

## 2.20.0 (2022-10-19) {: #2.20.0 }

### Features

-   Added the option to synchronize repositories using an optimized mode (enabled by default).
    [#564](https://github.com/pulp/pulp_deb/issues/564)
-   Added feature to import/export pulp_deb content
    [#605](https://github.com/pulp/pulp_deb/issues/605)

### Bugfixes

-   Fixed handling of download URLs containing special characters in the path part.
    [#571](https://github.com/pulp/pulp_deb/issues/571)
-   Fixed several serializer bugs preventing the manual creation of structure content of type
    `ReleaseArchitecture`, `ReleaseComponent`, and `PackageReleaseComponent`.
    [#575](https://github.com/pulp/pulp_deb/issues/575)
-   Added handling for the special case when publishing an upstream repo containing a distribution named "default" using both simple and structured publish modes.
    [#601](https://github.com/pulp/pulp_deb/issues/601)
-   Added a better error message when users try to create a repository version containing duplicate APT distributions.
    [#603](https://github.com/pulp/pulp_deb/issues/603)
-   Fixed a bug preventing the synchronization of repos referencing a single package from multiple package indices.
    [#632](https://github.com/pulp/pulp_deb/issues/632)

### Improved Documentation

-   Added workflow docs on manually creating structured repos.
    [#586](https://github.com/pulp/pulp_deb/issues/586)
-   Added feature overview documentation for the new Import/Export feature.
    [#624](https://github.com/pulp/pulp_deb/issues/624)

### Misc

-   Add a proper local SigningService setup for tests using pytest.
    [#402](https://github.com/pulp/pulp_deb/issues/402)

---

## 2.19.3 (2022-12-07) {: #2.19.3 }

### Bugfixes

-   Fixed a bug where architecture "all" packages were missing when syncing Debian 11 style repositories.
    [#612](https://github.com/pulp/pulp_deb/issues/612)
-   Fixed a bug where packages were only showing up in one Packages index file if they belonged to two
    or more releases.
    [#674](https://github.com/pulp/pulp_deb/issues/674)

---

## 2.19.2 (2022-10-18) {: #2.19.2 }

### Bugfixes

-   Added handling for the special case when publishing an upstream repo containing a distribution named "default" using both simple and structured publish modes.
    [#601](https://github.com/pulp/pulp_deb/issues/601)
-   Added a better error message when users try to create a repository version containing duplicate APT distributions.
    [#603](https://github.com/pulp/pulp_deb/issues/603)

### Improved Documentation

-   Added workflow docs on manually creating structured repos.
    [#586](https://github.com/pulp/pulp_deb/issues/586)

---

## 2.19.1 (2022-07-25) {: #2.19.1 }

### Bugfixes

-   Fixed handling of download URLs containing special characters in the path part.
    [#571](https://github.com/pulp/pulp_deb/issues/571)
-   Fixed several serializer bugs preventing the manual creation of structure content of type
    `ReleaseArchitecture`, `ReleaseComponent`, and `PackageReleaseComponent`.
    [#575](https://github.com/pulp/pulp_deb/issues/575)

---

## 2.19.0 (2022-06-23) {: #2.19.0 }

### Bugfixes

-   Added support for uploading zstd compressed packages.
    [#459](https://github.com/pulp/pulp_deb/issues/459)
-   Fixed a bug causing inconsistent verbatim publications in combination with rare circumstances and streamed syncs.
    [#549](https://github.com/pulp/pulp_deb/issues/549)

### Misc

-   Converted CharField to TextField for pulp_deb models.
    [#532](https://github.com/pulp/pulp_deb/issues/532)

---

## 2.18.3 (2022-12-07) {: #2.18.3 }

### Bugfixes

-   Fixed a bug where architecture "all" packages were missing when syncing Debian 11 style repositories.
    [#612](https://github.com/pulp/pulp_deb/issues/612)
-   Fixed a bug where packages were only showing up in one Packages index file if they belonged to two
    or more releases.
    [#674](https://github.com/pulp/pulp_deb/issues/674)

---

## 2.18.2 (2022-10-18) {: #2.18.2 }

### Bugfixes

-   Added a better error message when users try to create a repository version containing duplicate APT distributions.
    [#603](https://github.com/pulp/pulp_deb/issues/603)

---

## 2.18.1 (2022-08-16) {: #2.18.1 }

### Bugfixes

-   Fixed handling of download URLs containing special characters in the path part.
    [#571](https://github.com/pulp/pulp_deb/issues/571)
-   Fixed several serializer bugs preventing the manual creation of structure content of type
    `ReleaseArchitecture`, `ReleaseComponent`, and `PackageReleaseComponent`.
    [#575](https://github.com/pulp/pulp_deb/issues/575)
-   Added handling for the special case when publishing an upstream repo containing a distribution named "default" using both simple and structured publish modes.
    [#601](https://github.com/pulp/pulp_deb/issues/601)

---

## 2.18.0 (2022-04-21) {: #2.18.0 }

### Features

-   Added experimental advanced copy API with support for structured copying.
    [#396](https://github.com/pulp/pulp_deb/issues/396)

### Bugfixes

-   Made the sync workflow robust with respect to upstream package indices containing packages with a wrong architecture.
    [#422](https://github.com/pulp/pulp_deb/issues/422)
-   Changed the release file publication behaviour of the APT publisher to prevent a design clash with apt-secure.
    You may set PUBLISH_RELEASE_FILE_LABEL and PUBLISH_RELEASE_FILE_VERSION to True to revert to the old behaviour.
    [#443](https://github.com/pulp/pulp_deb/issues/443)

### Misc

-   Reworked the sync handling for upstream repos using `No-Support-for-Architecture-all: Packages` format.
    This was needed to avoid clashes with the new arch filtering introduced in [#422](https://github.com/pulp/pulp_deb/issues/422).
    [#456](https://github.com/pulp/pulp_deb/issues/456)

---

## 2.17.2 (2022-10-18) {: #2.17.2 }

### Bugfixes

-   Fixed handling of download URLs containing special characters in the path part.
    [#571](https://github.com/pulp/pulp_deb/issues/571)
-   Fixed several serializer bugs preventing the manual creation of structure content of type
    `ReleaseArchitecture`, `ReleaseComponent`, and `PackageReleaseComponent`.
    [#575](https://github.com/pulp/pulp_deb/issues/575)
-   Added handling for the special case when publishing an upstream repo containing a distribution named "default" using both simple and structured publish modes.
    [#601](https://github.com/pulp/pulp_deb/issues/601)
-   Added a better error message when users try to create a repository version containing duplicate APT distributions.
    [#603](https://github.com/pulp/pulp_deb/issues/603)

---

## 2.17.1 (2022-04-21) {: #2.17.1 }

### Bugfixes

-   Made the sync workflow robust with respect to upstream package indices containing packages with a wrong architecture.
    [#422](https://github.com/pulp/pulp_deb/issues/422)
-   Changed the release file publication behaviour of the APT publisher to prevent a design clash with apt-secure.
    You may set PUBLISH_RELEASE_FILE_LABEL and PUBLISH_RELEASE_FILE_VERSION to True to revert to the old behaviour.
    [#443](https://github.com/pulp/pulp_deb/issues/443)

### Misc

-   Reworked the sync handling for upstream repos using `No-Support-for-Architecture-all: Packages` format.
    This was needed to avoid clashes with the new arch filtering introduced in [#422](https://github.com/pulp/pulp_deb/issues/422).
    [#456](https://github.com/pulp/pulp_deb/issues/456)

---

## 2.17.0 (2022-01-11) {: #2.17.0 }

### Features

-   Users can now use the FORCE_IGNORE_MISSING_PACKAGE_INDICES setting to define the corresponding behaviour for all remotes.
    [#9555](https://pulp.plan.io/issues/9555)

### Bugfixes

-   Fixed mirrored metadata handling when creating a new repository version.
    [#8756](https://pulp.plan.io/issues/8756)
-   Fixed a bug causing package validation to fail, when the package paragraph contains keys without values.
    [#8770](https://pulp.plan.io/issues/8770)
-   Fixed a bug causing publications to reference any `AptReleaseSigningService` via a full URL instead of just a `pulp_href`.
    [#9563](https://pulp.plan.io/issues/9563)

---

## 2.16.3 (2022-10-18) {: #2.16.3 }

### Bugfixes

-   Fixed handling of download URLs containing special characters in the path part.
    [#571](https://github.com/pulp/pulp_deb/issues/571)
-   Fixed several serializer bugs preventing the manual creation of structure content of type
    `ReleaseArchitecture`, `ReleaseComponent`, and `PackageReleaseComponent`.
    [#575](https://github.com/pulp/pulp_deb/issues/575)
-   Added handling for the special case when publishing an upstream repo containing a distribution named "default" using both simple and structured publish modes.
    [#601](https://github.com/pulp/pulp_deb/issues/601)
-   Added a better error message when users try to create a repository version containing duplicate APT distributions.
    [#603](https://github.com/pulp/pulp_deb/issues/603)

---

## 2.16.2 (2022-04-21) {: #2.16.2 }

### Features

-   Users can now use the FORCE_IGNORE_MISSING_PACKAGE_INDICES setting to define the corresponding behaviour for all remotes.
    [#9555](https://github.com/pulp/pulp_deb/issues/9555)

### Bugfixes

-   Made the sync workflow robust with respect to upstream package indices containing packages with a wrong architecture.
    [#422](https://github.com/pulp/pulp_deb/issues/422)
-   Changed the release file publication behaviour of the APT publisher to prevent a design clash with apt-secure.
    You may set PUBLISH_RELEASE_FILE_LABEL and PUBLISH_RELEASE_FILE_VERSION to True to revert to the old behaviour.
    [#443](https://github.com/pulp/pulp_deb/issues/443)

### Misc

-   Reworked the sync handling for upstream repos using `No-Support-for-Architecture-all: Packages` format.
    This was needed to avoid clashes with the new arch filtering introduced in [#422](https://github.com/pulp/pulp_deb/issues/422).
    [#456](https://github.com/pulp/pulp_deb/issues/456)

---

## 2.16.1 (2022-01-13) {: #2.16.1 }

### Bugfixes

-   Fixed a bug causing package validation to fail, when the package paragraph contains keys without values.
    (backported from #8770)
    [#432](https://github.com/pulp/pulp_deb/issues/432)
-   Fixed a bug causing publications to reference any `AptReleaseSigningService` via a full URL instead of just a `pulp_href`.
    (backported from #9563)
    [#433](https://github.com/pulp/pulp_deb/issues/433)

---

## 2.16.0 (2021-10-28) {: #2.16.0 }

### Bugfixes

-   Flat repo syncs were made more robust with respect to minimal release files.
    [#7673](https://pulp.plan.io/issues/7673)
-   Fixed a bug causing syncs to fail if upstream repos have more than 256 characters worth of distributions, components, or architectures.
    [#9277](https://pulp.plan.io/issues/9277)
-   Added fix to delete package fields with values of an incorrect type.
    [#9333](https://pulp.plan.io/issues/9333)

### Misc

-   Amended dispatch arguments deprecated by pulpcore in anticipation of removal.
    [#9349](https://pulp.plan.io/issues/9349)

---

## 2.15.1 (2021-10-27) {: #2.15.1 }

### Misc

-   Amended dispatch arguments deprecated by pulpcore in anticipation of removal.
    (backported from #9349)
    [#9505](https://pulp.plan.io/issues/9505)

---

## 2.15.0 (2021-08-26) {: #2.15.0 }

### Features

-   Add custom_fields to hold non-standard PackageIndex fields
    [#8232](https://pulp.plan.io/issues/8232)

### Bugfixes

-   The plugins async pipeline was made Django 3 compatible in anticipation of pulpcore 3.15.
    [#9299](https://pulp.plan.io/issues/9299)

### Improved Documentation

-   Reworked the plugin installation docs to be helpful to new users.
    [#9186](https://pulp.plan.io/issues/9186)

### Misc

-   Added touch statements to prevent false positives during orphan cleanup.
    [#9162](https://pulp.plan.io/issues/9162)
-   Replaced deprecated JSONField model from contrib with the one available with Django 3.
    [#9300](https://pulp.plan.io/issues/9300)

---

## 2.14.1 (2021-07-29) {: #2.14.1 }

Compatible with: `pulpcore>=3.14,<3.16`

### Misc

-   Re-enabled Python 3.6 and 3.7 for the all 2.14.* releases.
    [#9164](https://pulp.plan.io/issues/9164)
-   Added touch statements to prevent false positives during orphan cleanup.
    (backported from #9162)
    [#9175](https://pulp.plan.io/issues/9175)

---

## 2.14.0 (2021-07-22) {: #2.14.0 }

!!! warning
    This version was released in a broken state and has been yanked from pypi.
    The issues are addressed in the 2.14.1 release.

### Bugfixes

-   Add missing "Size" field in publications
    [#8506](https://pulp.plan.io/issues/8506)
-   Fixed a bug where arch=all package indices were not being synced when filtering by architecture.
    [#8910](https://pulp.plan.io/issues/8910)

### Removals

-   Dropped support for Python 3.6 and 3.7. pulp_deb now supports Python 3.8+.
    [#9036](https://pulp.plan.io/issues/9036)

### Misc

-   If remotes specify components or architectures that do not exist in the synchronized Release file, a warning is now logged.
    [#6948](https://pulp.plan.io/issues/6948)

---

## 2.13.1 (2021-08-02) {: #2.13.1 }

Compatible with: `pulpcore>=3.12,<3.15`

### Bugfixes

-   Add missing "Size" field in publications
    (backported from #8506)
    [#9167](https://pulp.plan.io/issues/9167)

---

## 2.13.0 (2021-05-27) {: #2.13.0 }

Compatible with: `pulpcore>=3.12,<3.15`

### Bugfixes

-   Completely disabled translation file synchronization to prevent sync failures.
    [#8671](https://pulp.plan.io/issues/8671)
-   Fixed a bug where components from the remote were being ignored when specified as the plain component.
    [#8828](https://pulp.plan.io/issues/8828)

---

## 2.12.1 (2021-05-25) {: #2.12.1 }

Compatible with: `pulpcore>=3.12,<3.14`

### Bugfixes

-   Completely disabled translation file synchronization to prevent sync failures.
    (Backported from <https://pulp.plan.io/issues/8671>)
    [#8735](https://pulp.plan.io/issues/8735)

---

## 2.12.0 (2021-05-10) {: #2.12.0 }

Compatible with: `pulpcore>=3.12,<3.14`

### Features

-   APT repositories may now reference an APT remote, that will automatically be used for syncs.
    [#8520](https://pulp.plan.io/issues/8520)

### Bugfixes

-   Fixed the relative paths for translation files, which were causing sync failures and missing translation files.
    [#8410](https://pulp.plan.io/issues/8410)

### Misc

-   Migrated to new Distribution model for pulpcore 3.13 compatibility.
    [#8682](https://pulp.plan.io/issues/8682)

---

## 2.11.2 (2021-05-25) {: #2.11.2 }

Compatible with: `pulpcore>=3.10,<3.13`

### Bugfixes

-   Completely disabled translation file synchronization to prevent sync failures.
    (Backported from <https://pulp.plan.io/issues/8671>)
    [#8736](https://pulp.plan.io/issues/8736)

---

## 2.11.1 (2021-04-14) {: #2.11.1 }

Compatible with: `pulpcore>=3.10,<3.13`

### Bugfixes

-   Fixed the relative paths for translation files, which were causing sync failures and missing translation files.
    (Backported from <https://pulp.plan.io/issues/8410>)
    [#8556](https://pulp.plan.io/issues/8556)

---

## 2.11.0 (2021-03-30) {: #2.11.0 }

Compatible with: `pulpcore>=3.10,<3.13`

No significant changes.

---

## 2.10.2 (2021-05-25) {: #2.10.2 }

Compatible with: `pulpcore>=3.10,<3.12`

### Bugfixes

-   Completely disabled translation file synchronization to prevent sync failures.
    (Backported from <https://pulp.plan.io/issues/8671>)
    [#8737](https://pulp.plan.io/issues/8737)

---

## 2.10.1 (2021-04-14) {: #2.10.1 }

Compatible with: `pulpcore>=3.10,<3.12`

### Bugfixes

-   Fixed the relative paths for translation files, which were causing sync failures and missing translation files.
    (Backported from <https://pulp.plan.io/issues/8410>)
    [#8558](https://pulp.plan.io/issues/8558)

---

## 2.10.0 (2021-03-17) {: #2.10.0 }

Compatible with: `pulpcore>=3.10,<3.12`

### Bugfixes

-   Ensured the plugin respects the ALLOWED_CONTENT_CHECKSUMS setting.
    [#8388](https://pulp.plan.io/issues/8388)

### Improved Documentation

-   The plugin documentation was moved from <https://pulp-deb.readthedocs.io/> to <https://docs.pulpproject.org/pulp_deb/>.
    [#8113](https://pulp.plan.io/issues/8113)
-   Added workflow documentation on checksum handling configuration.
    [#8388](https://pulp.plan.io/issues/8388)

### Removals

-   Update AptReleaseSigningService validation to respect new base class requirements.
    [#8307](https://pulp.plan.io/issues/8307)

---

## 2.9.3 (2021-11-16) {: #2.9.3 }

### Misc

-   Added an upper bound of `<0.1.42` to the `python-debian` dependency to prevent breakage against python `<3.7`.

---

## 2.9.2 (2021-05-25) {: #2.9.2 }

Compatible with: `pulpcore>=3.7,<3.11`

### Bugfixes

-   Completely disabled translation file synchronization to prevent sync failures.
    (Backported from <https://pulp.plan.io/issues/8671>)
    [#8738](https://pulp.plan.io/issues/8738)

---

## 2.9.1 (2021-04-14) {: #2.9.1 }

Compatible with: `pulpcore>=3.7,<3.11`

### Bugfixes

-   Fixed the relative paths for translation files, which were causing sync failures and missing translation files.
    (Backported from <https://pulp.plan.io/issues/8410>)
    [#8559](https://pulp.plan.io/issues/8559)

---

## 2.9.0 (2021-01-14) {: #2.9.0 }

Compatible with: `pulpcore>=3.7,<3.11`

---

## 2.8.0 (2020-11-23) {: #2.8.0 }

Compatible with: `pulpcore>=3.7,<3.10`

### Features

-   Added an `ignore_missing_package_indices` flag to remotes which users may set to allow the synchronization of repositories with missing declared package indices.
    [#7467](https://pulp.plan.io/issues/7467)
-   Added the capability to synchronize repositories using "flat repository format".
    [#7502](https://pulp.plan.io/issues/7502)
-   Added ability to handle upstream repositories without a "Codename" field.
    [#7886](https://pulp.plan.io/issues/7886)

---

## 2.7.0 (2020-09-29) {: #2.7.0 }

Compatible with: `pulpcore>=3.7,<3.9`

---

## 2.6.1 (2020-09-03) {: #2.6.1 }

### Misc

-   Dropped the beta status of the plugin. The plugin is now GA!
    [#6999](https://pulp.plan.io/issues/6999)

---

## 2.6.0b1 (2020-09-01)

### Features

-   Added handling of packages with the same name, version, and architecture, when saving a new repository version.
    [#6429](https://pulp.plan.io/issues/6429)
-   Both simple and structured publish now use separate `Architecture: all` package indecies only.
    [#6991](https://pulp.plan.io/issues/6991)

### Bugfixes

-   Optional version strings are now stripped from the sourcename before using it for package file paths.
    [#7153](https://pulp.plan.io/issues/7153)
-   Fixed several field names in the to deb822 translation dict.
    [#7190](https://pulp.plan.io/issues/7190)
-   `Section` and `Priority` are no longer required for package indecies.
    [#7236](https://pulp.plan.io/issues/7236)
-   Fixed content creation for fields containing more than 255 characters by using `TextField` instead of `CharField` for all package model fields.
    [#7257](https://pulp.plan.io/issues/7257)
-   Fixed a bug where component path prefixes were added to package index paths twice instead of once when using structured publish.
    [#7295](https://pulp.plan.io/issues/7295)

### Improved Documentation

-   Added a note on per repository package uniqueness constraints to the feature overview documentation.
    [#6429](https://pulp.plan.io/issues/6429)
-   Fixed several URLs pointing at various API documentation.
    [#6506](https://pulp.plan.io/issues/6506)
-   Reworked the workflow documentation and added flow charts.
    [#7148](https://pulp.plan.io/issues/7148)
-   Completely refactored the documentation source files.
    [#7211](https://pulp.plan.io/issues/7211)
-   Added a high level "feature overview" documentation.
    [#7318](https://pulp.plan.io/issues/7318)
-   Added meaningful endpoint descriptions to the REST API documentation.
    [#7355](https://pulp.plan.io/issues/7355)

### Misc

-   Added tests for repos with distribution paths that are not equal to the codename.
    [#6051](https://pulp.plan.io/issues/6051)
-   Added a long_description to the python package.
    [#6882](https://pulp.plan.io/issues/6882)
-   Added test to publish repository with package index files but no packages.
    [#7344](https://pulp.plan.io/issues/7344)

---

## 2.5.0b1 (2020-07-15)

### Features

-   Added additional metadata fields to published Release files.
    [#6907](https://pulp.plan.io/issues/6907)

### Bugfixes

-   Fixed a bug where some nullable fields for remotes could not be set to null via the API.
    [#6908](https://pulp.plan.io/issues/6908)
-   Fixed a bug where APT client was installing same patches again and again.
    [#6982](https://pulp.plan.io/issues/6982)

### Misc

-   Renamed some internal models to Apt.. to keep API consistent with other plugins.
    [#6897](https://pulp.plan.io/issues/6897)

---

## 2.4.0b1 (2020-06-17)

### Features

-   The "Date" field is now added to Release files during publish.
    [#6869](https://pulp.plan.io/issues/6869)

### Bugfixes

-   Fixed structured publishing of architecture 'all' type packages.
    [#6787](https://pulp.plan.io/issues/6787)
-   Fixed a bug where published Release files were using paths relative to the repo root, instead of relative to the release file.
    [#6876](https://pulp.plan.io/issues/6876)

---

## 2.3.0b1 (2020-04-29)

### Features

-   Added Release file signing using signing services.
    [#6171](https://pulp.plan.io/issues/6171)

### Bugfixes

-   Fixed synchronization of Release files without a Suite field.
    [#6050](https://pulp.plan.io/issues/6050)
-   Fixed publication creation with packages referenced from multiple package inecies.
    [#6383](https://pulp.plan.io/issues/6383)

### Improved Documentation

-   Documented bindings installation for the dev environment.
    [#6396](https://pulp.plan.io/issues/6396)

### Misc

-   Added tests for invalid Debian repositories (bad signature, missing package indecies).
    [#6052](https://pulp.plan.io/issues/6052)
-   Made tests use the bindings config from pulp-smash.
    [#6393](https://pulp.plan.io/issues/6393)

---

## 2.2.0b1 (2020-03-03)

### Features

-   Structured publishing (with releases and components) has been implemented.
    [#6029](https://pulp.plan.io/issues/6029)
-   Verification of upstream signed metadata has been implemented.
    [#6170](https://pulp.plan.io/issues/6170)

---

## 2.0.0b4 (2020-01-14)

No significant changes.

---

## 2.0.0b3 (2019-11-14)

### Features

-   Change relative_path from CharField to TextField
    [#4544](https://pulp.plan.io/issues/4544)
-   Add more validation for uploading packages and installer packages.
    [#5377](https://pulp.plan.io/issues/5377)

### Deprecations and Removals

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)

-   Remove "_" from _versions_href, _latest_version_href
    [#5548](https://pulp.plan.io/issues/5548)

-   Removing base field: _type .
    [#5550](https://pulp.plan.io/issues/5550)

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting deb repositories is now performed on /pulp/api/v3/repositories/deb/apt/ instead of /pulp/api/v3/repositories/.
    [#5698](https://pulp.plan.io/issues/5698)

### Bugfixes

-   Fix fields filter.
    [#5543](https://pulp.plan.io/issues/5543)

### Misc

-   Depend on pulpcore, directly, instead of pulpcore-plugin.
    [#5580](https://pulp.plan.io/issues/5580)

---

## 2.0.0b2 (2019-10-02)

### Features

-   Rework Package and InstallerPackage serializers to allow creation from artifact or uploaded file with specifying any metadata.
    [#5379](https://pulp.plan.io/issues/5379)
-   Change generic content serializer to create content units by either specifying an artifact or uploading a file.
    [#5403](https://pulp.plan.io/issues/5403),
    [#5487](https://pulp.plan.io/issues/5487)

### Deprecations and Removals

-   Remove one shot uploader in favor of the combined create endpoint.
    [#5403](https://pulp.plan.io/issues/5403)

### Bugfixes

-   Change content serializers to use relative_path instead of _relative_path.
    [#5376](https://pulp.plan.io/issues/5376)

### Improved Documentation

-   Change the prefix of Pulp services from pulp-* to pulpcore-*
    [#4554](https://pulp.plan.io/issues/4554)
-   Reflect artifact and upload functionality in the content create endpoint documentation.
    [#5371](https://pulp.plan.io/issues/5371)

### Misc

-   PublishedMetadata is now a type of Content.
    [#5304](https://pulp.plan.io/issues/5304)
-   Replace ProgressBar with ProgressReport.
    [#5477](https://pulp.plan.io/issues/5477)

---

## 2.0.0b1 (2019-09-06)

### Features

-   Add oneshot upload functionality for deb type packages.
    [#5391](https://pulp.plan.io/issues/5391)

### Bugfixes

-   Add relative_path to package units natural key to fix uniqueness constraints.
    [#5377](https://pulp.plan.io/issues/5377)
-   Fix publishing of lazy content and add download_policy tests.
    [#5405](https://pulp.plan.io/issues/5405)

### Improved Documentation

-   Reference the fact you must have both _relative_path and relative_path.
    [#5376](https://pulp.plan.io/issues/5376)
-   Fix various documentation issues from API changes, plus other misc fixes.
    [#5380](https://pulp.plan.io/issues/5380)

### Misc

-   Adopting related names on models.
    [#4681](https://pulp.plan.io/issues/4681)
-   Generate and commit initial migrations.
    [#5401](https://pulp.plan.io/issues/5401)
`````

## File: pulp-docs/pulp_deb/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://pulpproject.org/dev/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulp_deb/README.md
`````markdown
# pulp_deb

[![Pulp Deb Release Pipeline](https://github.com/pulp/pulp_deb/actions/workflows/release.yml/badge.svg)][11]
[![Pulp Deb Nightly CI](https://github.com/pulp/pulp_deb/actions/workflows/nightly.yml/badge.svg)][12]
[![Pulp Deb CI Update](https://github.com/pulp/pulp_deb/actions/workflows/update_ci.yml/badge.svg)][13]
[![python versions](https://img.shields.io/pypi/pyversions/pulp_deb.svg)][5]

A Pulp plugin to host APT repositories.

Visit the [Pulp project homepage][1] or see the [plugin documentation][2] for more information.
If you want to report a bug, see the [issue tracker][3].

The most important places:

* The [Pulp project homepage][1].
* The [plugin documentation][2].
* The [plugin issue tracker][3].
* The [plugin source repository][4].
* Released [python packages on pypi.org][5].


## pulp-deb-client

API bindings for python and ruby for talking to the pulp_deb REST API.
These are automatically generated for each pulp_deb release using the [pulp-openapi-generator][16].

The most important places:

* The [pulp-deb-client Python package][6] (contains API bindings for Python).
* The [pulp-deb-client Ruby Gem][7] (contains API bindings for Ruby).


## pulp-cli-deb

[![pulp-cli-deb Release Pipeline](https://github.com/pulp/pulp-cli-deb/actions/workflows/release.yml/badge.svg)][14]
[![pulp-cli-deb Nightly CI](https://github.com/pulp/pulp-cli-deb/actions/workflows/nightly.yml/badge.svg)][15]
[![python versions](https://img.shields.io/pypi/pyversions/pulp-cli-deb.svg)][10]

A pulp-cli plugin to add the commands for using pulp_deb via Pulp CLI.

The most important places:

* The [pulp-cli documentation][8].
* The [pulp-cli-deb source repository][9].
* Released [python packages for the deb Pulp CLI plugin][10].


[1]: https://pulpproject.org
[2]: https://staging-docs.pulpproject.org/pulp_deb/
[3]: https://github.com/pulp/pulp_deb/issues
[4]: https://github.com/pulp/pulp_deb
[5]: https://pypi.org/project/pulp-deb/
[6]: https://pypi.org/project/pulp-deb-client/
[7]: https://rubygems.org/gems/pulp_deb_client
[8]: https://staging-docs.pulpproject.org/pulp-cli/
[9]: https://github.com/pulp/pulp-cli-deb
[10]: https://pypi.org/project/pulp-cli-deb/
[11]: https://github.com/pulp/pulp_deb/actions/workflows/release.yml
[12]: https://github.com/pulp/pulp_deb/actions/workflows/nightly.yml
[13]: https://github.com/pulp/pulp_deb/actions/workflows/update_ci.yml
[14]: https://github.com/pulp/pulp-cli-deb/actions/workflows/release.yml
[15]: https://github.com/pulp/pulp-cli-deb/actions/workflows/nightly.yml
[16]: https://github.com/pulp/pulp-openapi-generator
`````

## File: pulp-docs/pulp_deb/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_deb' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_deb/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_deb/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_deb/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_deb/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_deb/TESTING.md
`````markdown
## How to add new test data for functional tests.

- To add new data you need to create a debian repository including `.deb` packages and meta data. You can create them yourself from scratch or use tools (e.g. `equivs-build`, `reprepro`, etc) to generate them from config files.
- Put your files here `pulp_deb/tests/functional/data/`.
- To use your data in a test make sure to call this pytest fixture `deb_remote_factory()` with the following parameter: `repo_name=NAME_OF_YOUR_DATA_REPO`.

### Misc

- Scripts of some of the available test data can be found: https://github.com/pulp/pulp-fixtures/tree/master/debian
`````

## File: pulp-docs/pulp_gem/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_gem/docs/user/guides/_SUMMARY.md
`````markdown
* [Upload and Manage Content](upload.md)
* [Synchronize a Repository](sync.md)
* [Publish and Host a Repository](publish.md)
* [Cache rubygems.org](cache.md)
`````

## File: pulp-docs/pulp_gem/docs/user/guides/cache.md
`````markdown
# Cache rubygems.org 

In this guide you will configure Pulp to act as a pull-through cache of `rubygems.org`.
After this, the first time a gem will be requested from Pulp, it will be downloaded from rubygems.org.
The gem will be simultaneously streamed to the client.
The gem will then be saved in Pulp.
On subsequent requests for the same gem, Pulp will return the saved copy.

## 1. Create a Gem Remote

Create a remote named `rubygems.org`.
Set the URL to `https://index.rubygems.org/`.

=== "run"
    ```bash
    pulp gem remote create --name rubygems.org --url https://index.rubygems.org/
    ```

=== "output"
    ```json
    {
        "pulp_href": "/pulp/api/v3/remotes/gem/gem/0188e505-157c-7565-8474-e607e0dbc4a0/",
        "pulp_created": "2023-06-22T21:31:35.676442Z",
        "name": "rubygems.org",
        "url": "https://index.rubygems.org",
        "ca_cert": null,
        "client_cert": null,
        "tls_validation": true,
        "proxy_url": null,
        "pulp_labels": {},
        "pulp_last_updated": "2023-06-22T21:31:35.676454Z",
        "download_concurrency": null,
        "max_retries": null,
        "policy": "immediate",
        "total_timeout": null,
        "connect_timeout": null,
        "sock_connect_timeout": null,
        "sock_read_timeout": null,
        "headers": null,
        "rate_limit": null,
        "hidden_fields": [...],
        "prereleases": false,
        "includes": null,
        "excludes": null
    }
    ```

## 2. Create a Gem Distribution

Create a Gem Distribution named `rubygems.org.cache` and associate the `rubygems.org` remote with it.

=== "run"
    ```bash
    pulp gem distribution create --name rubygems.org.cache \
      --base-path rubygems --remote rubygems.org
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/distributions/gem/gem/0188e513-594c-7c44-aaff-beed0f97363e/",
      "pulp_created": "2023-06-22T21:47:10.540670Z",
      "base_path": "rubygems",
      "base_url": "http://localhost:5001/pulp/content/rubygems/",
      "content_guard": null,
      "hidden": false,
      "pulp_labels": {},
      "name": "rubygems.org.cache",
      "repository": null,
      "publication": null,
      "remote": "/pulp/api/v3/remotes/gem/gem/0188e505-157c-7565-8474-e607e0dbc4a0/"
    }
    ```

## 3. Install a gem from Pulp

Run the `gem install` command.
Use the Gem Distribution's `base_url` as the value for the `--source` parameter.

=== "run"
    ```bash
    gem install --clear-sources --source http://localhost:5001/pulp/content/rubygems/ pulpcore_client
    ```
=== "output"
    ```bash
    Building native extensions. This could take a while...
    Successfully installed json-2.7.1
    Fetching: ruby2_keywords-0.0.5.gem (10752B)
    Successfully installed ruby2_keywords-0.0.5
    Fetching: faraday-retry-1.0.3.gem (10240B)
    Successfully installed faraday-retry-1.0.3
    Fetching: faraday-rack-1.0.0.gem (7168B)
    Successfully installed faraday-rack-1.0.0
    Fetching: faraday-patron-1.0.0.gem (7680B)
    Successfully installed faraday-patron-1.0.0
    Fetching: faraday-net_http_persistent-1.2.0.gem (7680B)
    Successfully installed faraday-net_http_persistent-1.2.0
    Fetching: faraday-net_http-1.0.1.gem (8192B)
    Successfully installed faraday-net_http-1.0.1
    Fetching: multipart-post-2.4.0.gem (15872B)
    Successfully installed multipart-post-2.4.0
    Fetching: faraday-multipart-1.0.4.gem (10752B)
    Successfully installed faraday-multipart-1.0.4
    Fetching: faraday-httpclient-1.0.1.gem (7680B)
    Successfully installed faraday-httpclient-1.0.1
    Fetching: faraday-excon-1.1.0.gem (7168B)
    Successfully installed faraday-excon-1.1.0
    Fetching: faraday-em_synchrony-1.0.0.gem (8192B)
    Successfully installed faraday-em_synchrony-1.0.0
    Fetching: faraday-em_http-1.0.0.gem (9216B)
    Successfully installed faraday-em_http-1.0.0
    Fetching: faraday-1.10.3.gem (71680B)
    Successfully installed faraday-1.10.3
    Fetching: pulpcore_client-3.46.0.gem (182784B)
    Successfully installed pulpcore_client-3.46.0
    15 gems installed
    ```
`````

## File: pulp-docs/pulp_gem/docs/user/guides/publish.md
`````markdown
# Publish and Host a Repository

This section assumes that you have a repository with content in it.
See [Sync](site:pulp_gem/docs/user/guides/sync/) or [Upload](site:pulp_gem/docs/user/guides/upload/) guides.

## 1. Create a Publication

Kick off a publish task by creating a new publication.
The publish task will generate all the metadata that `gem` needs to install packages
(although it will need to be hosted through a Distribution before it is consumable).

=== "run"
    ```bash
    pulp gem publication create --repository foo --version 1
    ```

    !!! tip
        If `--version` is ommited, Pulp will assume the latest version.
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/publications/gem/gem/0188e510-cbbe-7586-b182-927bacc89bdb/",
      "pulp_created": "2023-06-22T21:44:23.230932Z",
      "repository_version": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/1/",
      "repository": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/"
    }
    ```


## 2. Host a Publication by creating a Distribution

To host a publication, (which makes it consumable by `gem`),
users create a distribution which will serve the associated publication at `/pulp/content/<distribution.base_path>`

=== "run"
    ```bash
    PUBLICATION_HREF=$(pulp gem publication list | jq -r .[0].pulp_href)
    pulp gem distribution create --name foo \
      --base-path foo --publication "$PUBLICATION_HREF"
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/distributions/gem/gem/0188e513-594c-7c44-aaff-beed0f97363e/",
      "pulp_created": "2023-06-22T21:47:10.540670Z",
      "base_path": "foo",
      "base_url": "http://localhost:5001/pulp/content/foo/",
      "content_guard": null,
      "hidden": false,
      "pulp_labels": {},
      "name": "foo",
      "repository": null,
      "publication": "/pulp/api/v3/publications/gem/gem/0188e510-cbbe-7586-b182-927bacc89bdb/",
      "remote": null
    }
    ```

!!! note
    Alternatively you could specify the repository when creating a distribution.
    In this case Pulp will automatically distribute the newest available publication for the latest repository version.


## 3. Enable Pull-Through Caching:

Only gems present in your repository will be available from your index,
but adding a remote source to your distribution will enable the pull-through cache feature.

This feature allows you to install any gem from the remote source and have Pulp store that gem as orphaned content.

```bash
pulp gem distribution update --name foo --remote gem
```

!!! warning
    Support for pull-through caching is provided as a tech preview in Pulp 3.
    The functionality may not work or may be incomplete.
    Also, backwards compatibility when upgrading is not guaranteed.


## 4. Use the newly created distribution

The metadata and packages can now be retrieved from the distribution:

```bash
http $BASE_ADDR/pulp/content/foo/specs.4.8
http $BASE_ADDR/pulp/content/foo/gems/panda-1.1.0.gem
```

The content is now gem installable:

```
gem install --clear-sources --source $BASE_ADDR/pulp/content/foo/ panda
```
`````

## File: pulp-docs/pulp_gem/docs/user/guides/sync.md
`````markdown
# Synchronize a Repository

Users can populate their repositories with content from an external sources by syncing their repository.

## 1. Create a Repository

Start by creating a new repository named "foo":

=== "run"
    ```bash
    pulp gem repository create --name foo
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/",
      "pulp_created": "2023-06-22T20:54:27.113947Z",
      "versions_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/0/",
      "name": "foo",
      "description": null,
      "retain_repo_versions": null,
      "remote": null
    }
    ```

## 2. Create a Remote

Create a remote that syncs all versions of the `panda` gem into your repository.

=== "run"
    ```bash
    pulp gem remote create --name gem --url https://index.rubygems.org/ --includes '{"panda":null}'
    ```
    !!! note
        You can also not specify anything in `includes` and have Pulp try to sync all gems available on the remote.

        `includes` and `excludes` fields are JSON dictionaries with the key being the gem name and the value being the version specifier string, or `null` for syncing all versions.

=== "output"
    ```json
    {
        "pulp_href": "/pulp/api/v3/remotes/gem/gem/0188e505-157c-7565-8474-e607e0dbc4a0/",
        "pulp_created": "2023-06-22T21:31:35.676442Z",
        "name": "gem",
        "url": "https://index.rubygems.org",
        "ca_cert": null,
        "client_cert": null,
        "tls_validation": true,
        "proxy_url": null,
        "pulp_labels": {},
        "pulp_last_updated": "2023-06-22T21:31:35.676454Z",
        "download_concurrency": null,
        "max_retries": null,
        "policy": "immediate",
        "total_timeout": null,
        "connect_timeout": null,
        "sock_connect_timeout": null,
        "sock_read_timeout": null,
        "headers": null,
        "rate_limit": null,
        "hidden_fields": [...],
        "prereleases": false,
        "includes": {
          "panda": null
        },
        "excludes": null
    }
    ```


## 3. Sync repository foo with remote

Use the remote object to kick off a synchronize task by specifying the repository to sync with.
You are telling pulp to fetch content from the remote and add to the repository:

=== "run"
    ```bash
    pulp gem repository sync --name foo --remote gem
    pulp gem repository version show --repository foo
    ```
    !!! note
        The `sync` command will by default wait for the sync to complete.

        Use `Ctrl+c` or the `-b` option to send the task to the background.
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/1/",
      "pulp_created": "2023-06-22T21:40:00.488466Z",
      "number": 1,
      "repository": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/",
      "base_version": null,
      "content_summary": {
        "added": {
          "gem.gem": {
            "count": 33,
            "href": "/pulp/api/v3/content/gem/gem/?repository_version_added=/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/1/"
          }
        },
        "removed": {},
        "present": {
          "gem.gem": {
            "count": 33,
            "href": "/pulp/api/v3/content/gem/gem/?repository_version=/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/1/"
          }
        }
      }
    }
    ```
`````

## File: pulp-docs/pulp_gem/docs/user/guides/upload.md
`````markdown
# Upload and Manage Content

## 1. Create a Repository

Start by creating a new repository named "foo".

=== "run"
    ```bash
    pulp gem repository create --name foo
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/",
      "pulp_created": "2023-06-22T20:54:27.113947Z",
      "versions_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/0/",
      "name": "foo",
      "description": null,
      "retain_repo_versions": null,
      "remote": null
    }
    ```

## 2. Upload a file to Pulp

Each artifact in Pulp represents a file.
They can be created during sync or created manually by uploading a file:

=== "run"
    ```bash
    #  Get a Gem package or choose your own and upload to Pulp
    curl -O https://fixtures.pulpproject.org/gem/gems/amber-1.0.0.gem
    pulp gem content upload --file "amber-1.0.0.gem"
    CONTENT_HREF=$(pulp gem content list | jq -r .[0].pulp_href)
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/content/gem/gem/0188e53f-b8ae-71e8-a2da-a1c79ab9d822/",
      "pulp_created": "2023-06-22T22:35:38.543295Z",
      "artifacts": {
        "gems/amber-1.0.0.gem": "/pulp/api/v3/artifacts/0188e53f-b84e-74c9-a82e-60583c0e4fd2/",
        "quick/Marshal.4.8/amber-1.0.0.gemspec.rz": "/pulp/api/v3/artifacts/0188e53f-b8aa-7d05-8dd2-1b941fef9b6e/"
      },
      "name": "amber",
      "version": "1.0.0",
      "prerelease": false,
      "dependencies": {},
      "required_ruby_version": ">= 0",
      "required_rubygems_version": ">= 0"
    }
    ```

!!! note
    You can also specify a repository during an upload to immediately add the uploaded content to the repository.

## 3. Add content to a repository

Once there is a content unit, it can be added and removed from repositories using the add and remove commands.
This will create a new `repository version`.

=== "run"
    ```bash
    pulp gem repository content add --repository foo --href $CONTENT_HREF
    pulp gem repository version show --repository foo
    ```
=== "output"
    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/2/",
      "pulp_created": "2023-06-22T22:54:09.911372Z",
      "number": 2,
      "repository": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/",
      "base_version": "/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/1/",
      "content_summary": {
        "added": {
          "gem.gem": {
            "count": 1,
            "href": "/pulp/api/v3/content/gem/gem/?repository_version_added=/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/2/"
          }
        },
        "removed": {},
        "present": {
          "gem.gem": {
            "count": 34,
            "href": "/pulp/api/v3/content/gem/gem/?repository_version=/pulp/api/v3/repositories/gem/gem/0188e4e3-1429-7411-89d7-c87288edf51a/versions/2/"
          }
        }
      }
    }
    ```
`````

## File: pulp-docs/pulp_gem/docs/user/tutorials/_SUMMARY.md
`````markdown
* [Quickstart](quickstart.md)
* [Using Custom Certificates](custom-certificates.md)
`````

## File: pulp-docs/pulp_gem/docs/user/tutorials/custom-certificates.md
`````markdown
# Using Custom Certificates

When using Pulp as mirror of `rubygems.org`, you may need to configure `bundler` to use custom SSL certificates.
Any certificate related settings for `bundler` need to be also added for `gem`.
If only `bundler` is configured, metadata will be downloaded from Pulp, but gems will fail to download.
Gems are downloaded by `gem` and it has its own configuration.
`````

## File: pulp-docs/pulp_gem/docs/user/tutorials/quickstart.md
`````markdown
# User Setup

### Server Installation

Follow the [Installation Quickstart](site:pulp-oci-images/docs/admin/tutorials/quickstart) instructions to get started with Pulp.
Further details are discussed in the [pulpcore documentation](https://docs.pulpproject.org/pulpcore/installation/instructions.html).

### CLI Installation

All workflow examples use the [Pulp CLI](https://docs.pulpproject.org/pulp_cli/).
Install and setup from PyPI:

=== "pip"

    ```bash
    pip install pulp-cli[pygments] pulp-cli-gem

    pulp config create -e
    pulp status  # Check that CLI can talk to Pulp
    ```

=== "pipx"

    ```bash
    pipx install pulp-cli[pygments]
    pipx inject pulp-cli pulp-cli-gem

    pulp config create -e
    pulp status  # Check that CLI can talk to Pulp
    ```

If you configured the `admin` user with a different password, adjust the configuration accordingly.
If you prefer to specify the `username` and `password` with each request,
please see [`Pulp CLI` documentation](https://docs.pulpproject.org/pulp_cli/configuration/) on how to do that.
`````

## File: pulp-docs/pulp_gem/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 0.7.1 (2025-03-28) {: #0.7.1 }

#### Misc {: #0.7.1-misc }

- 

---

## 0.7.0 (2025-03-18) {: #0.7.0 }

#### Bugfixes {: #0.7.0-bugfix }

- Fixed handling somewhat inconsistent metadata on rubygems.org where an md5 checksum is missing in the versions file.
  [#313](https://github.com/pulp/pulp_gem/issues/313)
- Allowed pulp-glue-gem version 0.5.* to be installed.

#### Deprecations and Removals {: #0.7.0-removal }

- Squashed and rebased old migrations (before the 0.4 release) to prepare for pulpcore 3.70 compatibility.
  [#334](https://github.com/pulp/pulp_gem/issues/334)

#### Misc {: #0.7.0-misc }

- [#339](https://github.com/pulp/pulp_gem/issues/339)

---

## 0.6.2 (2025-02-10) {: #0.6.2 }

#### Misc {: #0.6.2-misc }

- [#339](https://github.com/pulp/pulp_gem/issues/339)

---

## 0.6.1 (2024-06-26) {: #0.6.1 }


#### Bugfixes {: #0.6.1-bugfix }

- Allowed pulp-glue-gem version 0.5.* to be installed.

---

## 0.6.0 (2024-06-19) {: #0.6.0 }


#### Deprecations and Removals {: #0.6.0-removal }

- Bumped miminal pulpcore requirement to 3.49.0.
- Droped support for python 3.8.

#### Misc {: #0.6.0-misc }

- 

---

## 0.5.1 (2024-05-23) {: #0.5.1 }

### Bugfixes

-   Fixed the wrong upper bound for pulpcore version requirement.
    [#265](https://github.com/pulp/pulp_gem/issues/265)

---

## 0.5.0 (2024-02-12) {: #0.5.0 }

### Features

-   Added replica definitions.
    [#216](https://github.com/pulp/pulp_gem/issues/216)

### Bugfixes

-   Fixed a bug where legacy gems would cause an exception in pulpcore-content.
    [#209](https://github.com/pulp/pulp_gem/issues/209)

### Deprecations and Removals

-   Bumped the requirement on pulpcore to >=3.39 as the next supported version in the line.

---

## 0.4.1 (2024-02-12) {: #0.4.1 }

### Bugfixes

-   Fixed a bug where legacy gems would cause an exception in pulpcore-content.
    [#209](https://github.com/pulp/pulp_gem/issues/209)

---

## 0.4.0 (2023-11-03) {: #0.4.0 }

### Features

-   Bumped pulpcore compatibility to 3.54.
-   Added support for RBAC and domains.
    [#154](https://github.com/pulp/pulp_gem/issues/154)

### Deprecations and Removals

-   Removed pre 0.2 residua. When you are upgrading from <0.3, and your system was operated on <0.2 before, make sure you have run the corresponding datarepair commands before upgrading the codebase to this version.
    [#143](https://github.com/pulp/pulp_gem/issues/143)

---

## 0.3.0 (2023-09-18) {: #0.3.0 }

### Deprecations and Removals

-   Added a migration to tell admins to run certain datarepair commands before upgrading to 0.4.
    [#141](https://github.com/pulp/pulp_gem/issues/141)

---

## 0.2.0 (2023-08-15) {: #0.2.0 }

### Features

-   Added support for gems with a platform that is not "ruby".
    [#130](https://github.com/pulp/pulp_gem/issues/130)

### Bugfixes

-   Fixed the detection of prerelease versions.
    [#114](https://github.com/pulp/pulp_gem/issues/114)
-   Added a datarepair-gemspec-platform command to regenerate the gemspec artifacts and properly set the platform attribute on existing gems.
    [#130](https://github.com/pulp/pulp_gem/issues/130)
-   Fixed the generation of gemspec data.
    [#131](https://github.com/pulp/pulp_gem/issues/131)

---

## 0.1.1 (2023-06-29) {: #0.1.1 }

### Bugfixes

-   Fixed the detection of prerelease versions.
    [#114](https://github.com/pulp/pulp_gem/issues/114)

---

## 0.1.0 (2023-06-26) {: #0.1.0 }

### Features

-   Added support for pull-through caching. Add a remote to a distribution to enable this feature.
    [#94](https://github.com/pulp/pulp_gem/issues/94)
-   Implemented new synching and publishing the compact index format.
    Rubymarshal and quick index will still be generated when publishing, but synching is exclusive to the new format.
    Added checksum and dependency information to gem content.
    Added `prereleases` and `includes` / `excludes` filter to remotes.
    [#96](https://github.com/pulp/pulp_gem/issues/96)
-   Added compatibility for pulpcore 3.25, pulpcore support is now >=3.25,<3.40.
    [#99](https://github.com/pulp/pulp_gem/issues/99)
-   Added support to assign a remote to a repository.
    [#101](https://github.com/pulp/pulp_gem/issues/101)

### Bugfixes

-   Optimized publish task to be significantly faster.
    [#93](https://github.com/pulp/pulp_gem/issues/93)

### Improved Documentation

-   Added CLI commands to documented workflows.
    [#107](https://github.com/pulp/pulp_gem/issues/107)

### Deprecations and Removals

-   Disabled synching without compact index format.
    Existing content will still be downloadable.
    There is a `pulpcore-manager datarepair-shallow-gems` command that will reindex content to the new format given their artifacts are persisted.
    [#96](https://github.com/pulp/pulp_gem/issues/96)

---

## 0.0.1b3 (2022-03-01)

### Misc

-   [#39](https://github.com/pulp/pulp_gem/issues/39)

---

## 0.0.1b2 (2018-12-19)

No significant changes.
`````

## File: pulp-docs/pulp_gem/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://docs.pulpproject.org/contributing/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulp_gem/README.md
`````markdown
# pulp-gem

A Pulp plugin to support hosting your own gem.

For more information, please see the [documentation](docs/index.rst) or the [Pulp project page](https://pulpproject.org/).
`````

## File: pulp-docs/pulp_gem/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_gem' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_gem/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_gem/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_gem/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_gem/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_maven/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_maven/docs/user/guides/create-cache.md
`````markdown
# Cache a Maven Repository

Pulp Maven can be used to cache packages from Maven Central or any other repository on the internet.

The commands below use the `pulp-cli-maven` package available on PyPI.

## 1. Create a new Maven Remote

=== "run"

    ```bash
    pulp maven remote create --name maven-central --url https://repo1.maven.org/maven2/
    ```

=== "output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/remotes/maven/maven/a0554b43-d229-4aba-b106-bd9f41eddd31/",
      "pulp_created": "2023-03-10T20:28:08.573718Z",
      "name": "maven-central",
      "url": "https://repo1.maven.org/maven2/",
      "ca_cert": null,
      "client_cert": null,
      "tls_validation": true,
      "proxy_url": null,
      "pulp_labels": {},
      "pulp_last_updated": "2023-03-10T20:28:08.573744Z",
      "download_concurrency": null,
      "max_retries": null,
      "policy": "immediate",
      "total_timeout": null,
      "connect_timeout": null,
      "sock_connect_timeout": null,
      "sock_read_timeout": null,
      "headers": null,
      "rate_limit": null,
      "hidden_fields": [
        {
          "name": "client_key",
          "is_set": false
        },
        {
          "name": "proxy_username",
          "is_set": false
        },
        {
          "name": "proxy_password",
          "is_set": false
        },
        {
          "name": "username",
          "is_set": false
        },
        {
          "name": "password",
          "is_set": false
        }
      ]
    }
    ```

## 2. Create a Maven Repository

The repository will be used to store content initially cached by pulpcore-content.

You don't have to specify a remote on it, but adding one now will enable you to not have to specify one each time you want to add newly cached content to a repository.

=== "run"

    ```bash
    pulp maven repository create --name maven-central --remote maven-central
    ```

=== "output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/maven/maven/550b4240-4d1a-4d98-811d-ce7fbbab81c8/",
      "pulp_created": "2023-03-16T10:10:18.047792Z",
      "versions_href": "/pulp/api/v3/repositories/maven/maven/550b4240-4d1a-4d98-811d-ce7fbbab81c8/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/maven/maven/550b4240-4d1a-4d98-811d-ce7fbbab81c8/versions/0/",
      "name": "maven-central",
      "description": null,
      "retain_repo_versions": null,
      "remote": "/pulp/api/v3/remotes/maven/maven/a0554b43-d229-4aba-b106-bd9f41eddd31/"
    }
    ```

## 3. Create a Maven Distribution

Create a distribution with a defined remote.

Doing this ensures that when clients request content from that distribution, `pulpcore-content` will stream the content from the remote to the client.
During that process the content is saved into Pulp.

Adding the repository to the distribution will enable users to browse the HTML listing pages served by `pulpcore-content`.
However, the content will not be displayed there until the cached content is added to the repository as described in the next steps.

=== "run"

    ```bash
    pulp maven distribution create --name maven-central --remote maven-central --repository maven-central --base-path maven-central
    ```

=== "output"

    ```json
    Started background task /pulp/api/v3/tasks/627488da-5375-4827-9424-5b75b1c880d1/
    .Done.
    {
      "pulp_href": "/pulp/api/v3/distributions/maven/maven/1c70eb04-7229-44a2-bf74-b8a94f461b73/",
      "pulp_created": "2023-03-10T20:30:04.487734Z",
      "base_path": "maven-central",
      "base_url": "http://pulp-hostname/pulp/content/maven-central/",
      "content_guard": null,
      "pulp_labels": {},
      "name": "maven-central",
      "repository": "/pulp/api/v3/repositories/maven/maven/550b4240-4d1a-4d98-811d-ce7fbbab81c8/",
      "remote": "/pulp/api/v3/remotes/maven/maven/a0554b43-d229-4aba-b106-bd9f41eddd31/"
    }
    ```

## 4. Add Pulp as a mirror for Maven

In your `~/.m2/settings.xml` add Pulp as a mirror of Maven Central. The URL comes from the
`base_url` attribute of the Maven Distribution.

```xml title="~/.m2/settings.xml"
<settings>
  <mirrors>
    <mirror>
      <id>pulp-maven-central</id>
      <name>Local Maven Central mirror </name>
      <url>http://pulp-hostname/pulp/content/maven-central/</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings>
```

## 5. Add cached content to a repository

Whenever content is initially cached by Pulp in the above scenario, it does not belong to any
repository. Pulp considers such content an orphan after 24 hours. At that point an Orphan Cleanup
task would remove the cached content from Pulp. Adding the cached content to a repository would
prevent the cleanup from happening. The following command will create a new repository version
by adding all Maven content that was created from a remote associated with the repository since
the last repository version was created.

=== "run"

    ```bash
    pulp maven repository add-cached-content --name maven-central
    ```

=== "output"

    ```
    Started background task /pulp/api/v3/tasks/2459cf00-3c67-4dd7-bff2-35acd72f584f/
    Done.
    ```
`````

## File: pulp-docs/pulp_maven/docs/user/guides/deploy.md
`````markdown
# Deploy a project to Pulp

Users can use the Maven Deploy Plugin to deploy a project to Pulp.

At this time this feature does not use authentication.
There is also no distinction between SNAPSHOT and release repositories.

## 1. Create a new Maven repository

=== "run"

    ```bash
    pulp maven repository create --name maven-releases
    ```

=== "output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/repositories/maven/maven/2f8d4e8f-7bdb-4a77-8832-6f3d1089d063/",
      "pulp_created": "2023-03-10T21:00:05.426515Z",
      "versions_href": "/pulp/api/v3/repositories/maven/maven/2f8d4e8f-7bdb-4a77-8832-6f3d1089d063/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/maven/maven/2f8d4e8f-7bdb-4a77-8832-6f3d1089d063/versions/0/",
      "name": "maven-releases",
      "description": null,
      "retain_repo_versions": null,
      "remote": null
    }
    ```

## 2. Create a Maven Distribution

The distribution serves will serve your repository in `http://<host-name>/pulp/content/maven-releases/`.

=== "run"

    ```bash
    pulp maven distribution create --name maven-releases --repository maven-releases --base-path maven-releases
    ```

=== "output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/distributions/maven/maven/e881cbc7-036e-41ac-a17d-4e8741cd92ee/",
      "pulp_created": "2023-03-10T21:05:30.218854Z",
      "base_path": "maven-releases",
      "base_url": "http://pulp-hostname/pulp/content/maven-releases/",
      "content_guard": null,
      "pulp_labels": {},
      "name": "maven-releases",
      "repository": "/pulp/api/v3/repositories/maven/maven/2f8d4e8f-7bdb-4a77-8832-6f3d1089d063/",
      "remote": null
    }
    ```

## 3. Configure your project with the new repository

Add the following stanza to the `pom.xml` in your Maven project.

```xml title="pom.xml"
<distributionManagement>
  <repository>
    <id>pulp</id>
    <name>Nexus Releases</name>
    <url>http://pulp-hostname/pulp/maven/maven-releases/</url>
  </repository>
  <snapshotRepository>
    <id>pulp</id>
    <name>Nexus Snapshot</name>
    <url>http://pulp-hostname/pulp/maven/maven-releases/</url>
  </snapshotRepository>
</distributionManagement>
```

## 4. Deploy the project

=== "run"

    ```bash
    mvn deploy
    ```

=== "output"

    ```bash
    [INFO] Scanning for projects...
    [INFO]
    [INFO] -------------< org.sonatype.nexus.examples:simple-project >-------------
    [INFO] Building simple-project 1.0.0
    [INFO] --------------------------------[ jar ]---------------------------------
    [INFO]
    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ simple-project ---
    [INFO] Using 'UTF-8' encoding to copy filtered resources.
    [INFO] skip non existing resourceDirectory /home/dkliban/devel/nexus-book-examples/maven/simple-project/src/main/resources
    [INFO]
    [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ simple-project ---
    [INFO] Nothing to compile - all classes are up to date
    [INFO]
    [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ simple-project ---
    [INFO] Using 'UTF-8' encoding to copy filtered resources.
    [INFO] skip non existing resourceDirectory /home/dkliban/devel/nexus-book-examples/maven/simple-project/src/test/resources
    [INFO]
    [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ simple-project ---
    [INFO] Nothing to compile - all classes are up to date
    [INFO]
    [INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ simple-project ---
    [INFO] Surefire report directory: /home/dkliban/devel/nexus-book-examples/maven/simple-project/target/surefire-reports

    -------------------------------------------------------
     T E S T S
    -------------------------------------------------------
    Running org.sonatype.nexus.examples.AppTest
    Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec

    Results :

    Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

    [INFO]
    [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ simple-project ---
    [INFO] Building jar: /home/dkliban/devel/nexus-book-examples/maven/simple-project/target/simple-project-1.0.0.jar
    [INFO]
    [INFO] --- maven-install-plugin:2.4:install (default-install) @ simple-project ---
    [INFO] Installing /home/dkliban/devel/nexus-book-examples/maven/simple-project/target/simple-project-1.0.0.jar to /home/dkliban/.m2/repository/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.jar
    [INFO] Installing /home/dkliban/devel/nexus-book-examples/maven/simple-project/pom.xml to /home/dkliban/.m2/repository/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.pom
    [INFO]
    [INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ simple-project ---
    Uploading to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.jar
    Uploaded to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.jar (3.4 kB at 1.0 kB/s)
    Uploading to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.pom
    Uploaded to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/1.0.0/simple-project-1.0.0.pom (5.5 kB at 1.7 kB/s)
    Downloading from pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/maven-metadata.xml
    Uploading to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/maven-metadata.xml
    Uploaded to pulp: http://pulp-hostname/pulp/maven/maven-releases/org/sonatype/nexus/examples/simple-project/maven-metadata.xml (321 B at 99 B/s)
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time:  10.839 s
    [INFO] Finished at: 2023-03-10T16:13:06-05:00
    [INFO] ------------------------------------------------------------------------
    ```
`````

## File: pulp-docs/pulp_maven/docs/user/tutorials/quickstart.md
`````markdown
# Quickstart

All REST API examples bellow use [httpie](https://httpie.org/doc) to perform the requests.
The `httpie` commands below assume that the user executing the commands has a `.netrc` file
in the home directory. The `.netrc` should have the following configuration:

```
machine localhost
login admin
password admin
```

If you configured the `admin` user with a different password, adjust the configuration
accordingly. If you prefer to specify the username and password with each request, please see
`httpie` documentation on how to do that.

This documentation makes use of the [jq library](https://stedolan.github.io/jq/)
to parse the json received from requests, in order to get the unique urls generated
when objects are created. To follow this documentation as-is please install the jq
library with:

```bash
sudo dnf install jq
```

## Install `pulpcore`

Follow the [installation
instructions](https://docs.pulpproject.org/en/3.0/nightly/installation/instructions.html)
provided with pulpcore.

Users should install from **either** PyPI or source.

## Install `pulp-maven`

=== "from source"

    ```bash
    sudo -u pulp -i
    source ~/pulpvenv/bin/activate
    git clone https://github.com/pulp/pulp_maven.git
    cd pulp_maven
    pip install -e .
    ```

=== "from pypi"

    ```bash
    sudo -u pulp -i
    source ~/pulpvenv/bin/activate
    pip install pulp-maven
    ```

## Make and Run Migrations

```bash
export DJANGO_SETTINGS_MODULE=pulpcore.app.settings
django-admin makemigrations maven
django-admin migrate maven
```

## Run Services

```bash
django-admin runserver 24817
gunicorn pulpcore.content:server --bind 'localhost:24816' --worker-class 'aiohttp.GunicornWebWorker' -w 2
sudo systemctl restart pulpcore-resource-manager
sudo systemctl restart pulpcore-worker@1
sudo systemctl restart pulpcore-worker@2
```

## Create a new Maven

`$ http POST http://localhost:24817/pulp/api/v3/remotes/maven/maven/ name='bar' url='https://repo1.maven.org/maven2/'`

```json
{
    "pulp_href": "/pulp/api/v3/remotes/maven/maven/2668a20c-3908-4767-b134-531e5145d7b7/",
    ...
}
```

`$ export REMOTE_HREF=$(http :24817/pulp/api/v3/remotes/maven/maven/ | jq -r '.results[] | select(.name == "bar") | .pulp_href')`

## Create a Maven Distribution for the Maven Remote

`$ http POST http://localhost:24817/pulp/api/v3/distributions/maven/maven/ name='baz' base_path='my/local/maven' remote=$REMOTE_HREF`

```json
{
    "pulp_href": "/pulp/api/v3/distributions/67baa17e-0a9f-4302-b04a-dbf324d139de/",
   ...
}
```

## Add Pulp as mirror for Maven

```xml title="~/.m2/settings.xml"
<settings>
  <mirrors>
    <mirror>
      <id>pulp-maven-central</id>
      <name>Local Maven Central mirror </name>
      <url>http://localhost:24816/pulp/content/my/local/maven</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings>
```
`````

## File: pulp-docs/pulp_maven/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 0.10.1 (2025-04-24) {: #0.10.1 }

#### Bugfixes {: #0.10.1-bugfix }

- Fixed bug related to multi-gateway deployments.
  [#268](https://github.com/pulp/pulp_maven/issues/268)

---

## 0.10.0 (2025-03-31) {: #0.10.0 }

#### Features {: #0.10.0-feature }

- Added domain support to the `mvn deploy` API.
  [#258](https://github.com/pulp/pulp_maven/issues/258)

---

## 0.9.0 (2025-02-27) {: #0.9.0 }

#### Features {: #0.9.0-feature }

- Adds domain support for the Pulp API. No support for maven deploy (yet).
  [#244](https://github.com/pulp/pulp_maven/issues/244)

#### Misc {: #0.9.0-misc }

- [#234](https://github.com/pulp/pulp_maven/issues/234), [#239](https://github.com/pulp/pulp_maven/issues/239)

---

## 0.8.3 (2025-02-25) {: #0.8.3 }

No significant changes.

---

## 0.8.2 (2025-02-06) {: #0.8.2 }

No significant changes.

---

## 0.8.1 (2024-06-20) {: #0.8.1 }


No significant changes.

---

## 0.8.0 (2023-12-20) {: #0.8.0 }

### Features

-   Changed the deploy api to use non blocking immediate tasks.

---

## 0.7.0 (2023-11-02) {: #0.7.0 }

### Features

-   Made plugin compatible with pulpcore 3.40+.
    [#172](https://pulp.plan.io/issues/172)

---

## 0.6.0 (2023-05-17) {: #0.6.0 }

### Features

-   Added ability to add cached content to a repository.
    [#136](https://pulp.plan.io/issues/136)
-   Updated pulpcore compatibility to >=3.25.0,<3.40.
    [#153](https://pulp.plan.io/issues/153)

---

## 0.5.0 (2023-03-17) {: #0.5.0 }

### Features

-   Added ability to add cached content to a repository.
    [#136](https://pulp.plan.io/issues/136)

---

## 0.4.0 (2023-03-15) {: #0.4.0 }

### Features

-   Added ability to upload projects to repositories using the Maven Deploy Plugin.
    [#115](https://pulp.plan.io/issues/115)

### Misc

-   [#111](https://pulp.plan.io/issues/111)

---

## 0.3.3 (2022-06-22) {: #0.3.3 }

No significant changes.

---

## 0.3.2 (2021-12-16) {: #0.3.2 }

### Bugfixes

-   Added view_name to DetailRelatedField to prevent a warning.
    [#8678](https://pulp.plan.io/issues/8678)

---

0.3.1 (2021-06-28)
Misc
---

-   [#8979](https://pulp.plan.io/issues/8979)

---

## 0.3.0 (2021-05-26) {: #0.3.0 }

### Misc

-   [#8745](https://pulp.plan.io/issues/8745)

---

## 0.2.0 (2021-02-03) {: #0.2.0 }

-   Added compatibility with pulpcore 3.10.

---

## 0.1.0 (2020-02-11) {: #0.1.0 }

### Improved Documentation

-   Change the prefix of Pulp services from pulp-* to pulpcore-*
    [#4554](https://pulp.plan.io/issues/4554)

### Deprecations and Removals

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting file repositories is now performed on /pulp/api/v3/maven/maven/ instead of /pulp/api/v3/repositories/. Only Maven content can be present in a Maven repository, and only a Maven repository can hold Maven content.
    [#5625](https://pulp.plan.io/issues/5625)

### Misc

-   [#5580](https://pulp.plan.io/issues/5580), [#5625](https://pulp.plan.io/issues/5625), [#5701](https://pulp.plan.io/issues/5701)

---

## 0.1.0b3 (2019-09-11)

### Bugfixes

-   Updates serializers and tests to make plugin compatible with pulpcore-plugin 0.1.0rc4.
    [#5217](https://pulp.plan.io/issues/5217)

### Misc

-   [#4681](https://pulp.plan.io/issues/4681)
`````

## File: pulp-docs/pulp_maven/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_maven' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_maven/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_maven/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_maven/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_maven/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_npm/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_npm/docs/user/guides/_SUMMARY.md
`````markdown
* [Synchronize a Repository](sync.md)
* [Publish and Host](publish-host.md)
* [Pull Through Cache](pull-through_cache.md)
`````

## File: pulp-docs/pulp_npm/docs/user/guides/publish-host.md
`````markdown
# Publish and Host

This section assumes that you have a repository with content in it. To do this, see the
[sync](site:/pulp_npm/docs/user/guides/sync.md).

## Create a Publication

Publications contain extra settings for how to publish.

=== "Create a publication"
```bash
curl -X POST $BASE_ADDR/pulp/{domain}/api/v3/publications/npm/npm/ -d '{"name": "bar"}' -H 'Content-Type: application/json'
```

=== "Response"
```json
{
    "pulp_href": "/pulp/{domain}/api/v3/publications/npm/npm/bar/",
}
```

## Host a Publication (Create a Distribution)

To host a publication, (which makes it consumable by a package manager),
users create a distribution which will serve the associated publication 
at `/pulp/content/{domain}/{distribution.base_path}`:

=== "Create a distribution"
```bash
curl -X POST $BASE_ADDR/pulp/{domain}/api/v3/distributions/npm/npm/ -d '{"name": "baz", "base_path": "foo", "publication": "$BASE_ADDR/publications/5fcb3a98-1bd1-445f-af94-801a1d563b9f/"}' -H 'Content-Type: application/json'
```

=== "Response"
```json
{
    "pulp_href": "/pulp/{domain}/api/v3/distributions/2ac41454-931c-41c7-89eb-a9d11e19b02a/",
}
```
`````

## File: pulp-docs/pulp_npm/docs/user/guides/pull-through_cache.md
`````markdown
# Pull-Through Cache

The pull-through cache feature allows Pulp to act as a cache for any package from a remote source.

!!! warning
    Support for pull-through caching is provided as a tech preview in Pulp 3.
    Functionality may not work or may be incomplete. Also, backwards compatibility when upgrading
    is not guaranteed.


=== "Create remote bar"
  ```bash
  curl -X POST $BASE_ADDR/pulp/pulp/api/v3/remotes/npm/npm/ -d '{"name": "bar", "url": "http://some.url/somewhere/"}' -H 'Content-Type: application/json'
  ```

=== "Create a distribution"
  ```bash
  curl -X POST $BASE_ADDR/pulp/api/v3/distributions/npm/npm/ -d '{"name": "baz", "base_path": "foo", "remote": $REMOTE_HREF"}' -H 'Content-Type: application/json'
  ```

=== "Point your CLI to the distribution"
  ```bash
  npm install --registry $BASE_ADDR/pulp/content/{domain}/foo react@19.0.0
  ```
`````

## File: pulp-docs/pulp_npm/docs/user/guides/sync.md
`````markdown
# Synchronize a Repository

Users can populate their repositories with content from an external sources by syncing
their repository.

## Create a Repository

Start by creating a new repository named "foo":
```bash
curl -X POST $BASE_ADDR/pulp/{domain}/api/v3/repositories/npm/npm/ -d '{"name": "foo"}' -H 'Content-Type: application/json'
```

=== "Response"
```json
{
    "pulp_href": "/pulp/{domain}/api/v3/repositories/npm/npm/9b19ceb7-11e1-4309-9f97-bcbab2ae38b6/",
    "description": "",
    "name": "foo"
}
```

## Create a Remote

Creating a remote object informs Pulp about an external content source.

=== "Create remote bar"
```bash
curl -X POST $BASE_ADDR/pulp/{domain}/api/v3/remotes/npm/npm/ -d '{"name": "bar", "url": "http://some.url/somewhere/"}' -H 'Content-Type: application/json'
```

=== "Response"
```json
{
    "pulp_href": /pulp/{domain}/api/v3/remotes/npm/npm/9c757d65-3007-4884-ac5b-c2fd93873289/"
}
```


## Sync repository foo with remote bar

Use the remote object to kick off a synchronize task by specifying the repository to
sync with. You are telling pulp to fetch content from the remote and add to the repository:

=== "Sync repository foo with remote bar"
```bash
curl -X POST $BASE_ADDR/pulp/{domain}/api/v3/repositories/npm/npm/9b19ceb7-11e1-4309-9f97-bcbab2ae38b6/sync/' remote=$REMOTE_HREF
```

=== "Response"
```json
{
    "pulp_href": "http://localhost:24817/pulp/{domain}/api/v3/tasks/3896447a-2799-4818-a3e5-df8552aeb903/",
    "task_id": "3896447a-2799-4818-a3e5-df8552aeb903"
}
```

You can follow the progress of the task with a GET request to the task href. Notice that when the
synchronize task completes, it creates a new version, which is specified in `created_resources`:

=== "Follow the progress of the task"
```bash
curl -X GET $BASE_ADDR/pulp/{domain}/api/v3/tasks/3896447a-2799-4818-a3e5-df8552aeb903/
```

=== "Response"
```json
{
    "pulp_href": "/pulp/{domain}/api/v3/tasks/3896447a-2799-4818-a3e5-df8552aeb903/",
    "pulp_created": "2018-05-01T17:17:46.558997Z",
    "created_resources": [
        "/pulp/{domain}/api/v3/repositories/npm/npm/9b19ceb7-11e1-4309-9f97-bcbab2ae38b6/versions/6/"
    ],
    "error": null,
    "finished_at": "2018-05-01T17:17:47.149123Z",
    "parent": null,
    "progress_reports": [
        {
            "done": 0,
            "message": "Add Content",
            "state": "completed",
            "suffix": "",
            "total": 0
        },
        {
            "done": 0,
            "message": "Remove Content",
            "state": "completed",
            "suffix": "",
            "total": 0
        }
    ],
    "spawned_tasks": [],
    "started_at": "2018-05-01T17:17:46.644801Z",
    "state": "completed",
    "worker": "/pulp/{domain}/api/v3/workers/eaffe1be-111a-421d-a127-0b8fa7077cf7/"
}
```
`````

## File: pulp-docs/pulp_npm/docs/index.md
`````markdown
# About NPM Packages

The `npm` plugin extends [pulpcore](https://pypi.python.org/pypi/pulpcore/) to support
hosting npm packages. This plugin is a part of the [Pulp Project](https://pulpproject.org),
and assumes some familiarity with the [pulpcore documentation](https://pulpproject.org/user/).

If you are just getting started, we recommend getting to know the [basic workflows](site:pulp_npm/docs/user/guides/sync.md).

## Overview
`````

## File: pulp-docs/pulp_npm/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 0.3.3 (2025-04-14) {: #0.3.3 }

#### Bugfixes {: #0.3.3-bugfix }

- Fixes the name of the package when downloaded using pull-through cache.
  [#315](https://github.com/pulp/pulp_npm/issues/315)

---

## 0.3.2 (2025-03-28) {: #0.3.2 }

#### Misc {: #0.3.2-misc }

- 

---

## 0.3.1 (2025-03-27) {: #0.3.1 }

No significant changes.

---

## 0.3.0 (2025-03-21) {: #0.3.0 }

#### Features {: #0.3.0-feature }

- Enabled adding pulp-through content to a associated repository.
  [#299](https://github.com/pulp/pulp_npm/issues/299)

#### Improved Documentation {: #0.3.0-doc }

- Fixes the domain usage examples in the docs.
  [#298](https://github.com/pulp/pulp_npm/issues/298)

---

## 0.2.0 (2025-02-20) {: #0.2.0 }

#### Features {: #0.2.0-feature }

- Added pull-through cache feature.
  [#278](https://github.com/pulp/pulp_npm/issues/278)

#### Misc {: #0.2.0-misc }

- [#128](https://github.com/pulp/pulp_npm/issues/128)

---

### Bugfixes

-   Remove scheme from apache snippet
    [#8574](https://pulp.plan.io/issues/8574)
-   Adjusted the use of `dispatch` for pulpcore>=3.15. Also bumped the dependency.
    [#9533](https://pulp.plan.io/issues/9533)

---

## 0.1.0 (2025-02-14) {: #0.1.0 }

#### Features {: #0.1.0-feature }

- Bumped pulpcore compatibility to >=3.25.0,<3.40.
  [#229](https://github.com/pulp/pulp_npm/issues/229)
- Added Domains compatibility.
  [#273](https://github.com/pulp/pulp_npm/issues/273)

#### Bugfixes {: #0.1.0-bugfix }

- Fixes a sync operation demanding the remote URL when the repository already have one.
  [#275](https://github.com/pulp/pulp_npm/issues/275)
- Fixes the missing REMOTE_TYPES property of the NpmRepository class.
  [#276](https://github.com/pulp/pulp_npm/issues/276)

#### Misc {: #0.1.0-misc }

- [#268](https://github.com/pulp/pulp_npm/issues/268)

---

## 0.1.0a4 (2022-06-27)

### Bugfixes

-   Remove scheme from apache snippet
    [#8574](https://pulp.plan.io/issues/8574)
-   Adjusted the use of `dispatch` for pulpcore>=3.15. Also bumped the dependency.
    [#9533](https://pulp.plan.io/issues/9533)

---

## 0.1.0a3 (2021-03-17)

No significant changes.

---

## 0.1.0a2 (2020-11-25)

No significant changes.

---

## 0.1.0a1 (2020-11-18)

### Features

-   Download a package with its dependencies
    [#6004](https://pulp.plan.io/issues/6004)
`````

## File: pulp-docs/pulp_npm/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://docs.pulpproject.org/contributing/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulp_npm/README.md
`````markdown
# pulp-npm

<!--toc:start-->
- [pulp-npm](#pulp-npm)
  - [About Pulp](#about-pulp)
  - [About pulp_npm](#about-pulp_npm)
  - [License](#license)
<!--toc:end-->

A Pulp plugin to support npm packages.

For more information, please see the [documentation](docs/index.md) or the [Pulp project page](https://pulpproject.org/).

## About Pulp
Pulp is a platform for managing repositories of content, such as software
packages, and pushing that content out to large numbers of consumers.

Using Pulp you can:
- Locally mirror all or part of a repository
- Host your own content in a new repository
- Manage content from multiple sources in one place
- Promote content through different repos in an organized way

## About pulp_npm
The plugin pulp_npm currently supports mirroring one specific version of a package and make it available.
Since the plugin is API compatible with the NPM Registry, you can use the `npm` CLI to download packages from Pulp.
For ex:
```
npm install --registry http://localhost:5001/pulp/content/{domain}/npm/ react
```

We are working to support more ways of mirroring the NPM Registry and allow uploads of npm content to pulp_npm.

## License
- License: GPLv2+
- Documentation: https://pulpproject.org/
- Source: https://github.com/pulp/pulp_npm/
- Bugs: https://github.com/pulp/pulp_npm/issues
`````

## File: pulp-docs/pulp_npm/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_npm' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_npm/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_npm/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_npm/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_npm/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_ostree/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_ostree/docs/user/guides/_SUMMARY.md
`````markdown
* [Import Commit](import-commit.md)
* [Modify Content](modify-content.md)
`````

## File: pulp-docs/pulp_ostree/docs/user/guides/import-commit.md
`````markdown
# Import Content

Create a new repository by running:

```bash
pulp ostree repository create --name fedora-iot
```

## Import a Commit

First, build an image representing one OSTree commit and wait until the process finishes:

```bash
echo """name = \"fishy-commit\"
description = \"Fishy OSTree commit\"
version = \"0.0.1\"

[[packages]]
name = \"fish\"
version = \"*\"""" > fishy.toml

sudo composer-cli blueprints push fishy.toml
sudo composer-cli compose start-ostree fishy-commit fedora-iot-commit --ref fedora/stable/x86_64/iot
sudo composer-cli compose status
```

Download the result from the server by issuing:

```bash
sudo composer-cli compose image ${COMPOSER_TASK_UUID}
```

Ensure that the downloaded tarball is readable by Pulp and import it:

```bash
pulp ostree repository import-all --name fedora-iot --file ${IMAGE_TARBALL_C1} --repository_name repo
```

!!! note

    The argument `repository_name` describes the name of a root directory containing the OSTree repository
    after untarring the tarball. For example, the name of the root directory created by `composer-cli`
    defaults to `repo`, which contains the repository itself.


## Import more Commits

If there is a need to import additional commits, one can do so by attaching new commits to the last
commit in the existing repository:

```bash
echo """name = \"vim-commit\"
description = \"Vim OSTree commit\"
version = \"0.0.2\"

[[packages]]
name = \"vim\"
version = \"*\"""" > vim.toml

sudo composer-cli blueprints push vim.toml
```

!!! note

    Through this step, the reader should have distributed the imported repository to enable the
    `composer-cli` utility to download a parent commit to which more commits are going to be
    attached. Follow `the publish workflow <publish-workflow>` to learn how to distribute a
    repository.


Set the reference to the parent commit, the URL of a Pulp repository to verify the parent against,
and monitor the status of the build:

```bash
sudo composer-cli compose start-ostree vim-commit fedora-iot-commit --ref fedora/stable/x86_64/iot --parent fedora/stable/x86_64/iot --url ${DISTRIBUTION_BASE_URL}
sudo composer-cli compose status
```

Download the result from the server by issuing:

```bash
sudo composer-cli compose image ${TASK_UUID}
```

Import the downloaded tarball into Pulp:

```bash
pulp ostree repository import-commits --name fedora-iot --file ${IMAGE_TARBALL_C2} --repository_name repo --ref fedora/stable/x86_64/iot
```

!!! note

    The OSTree plugin currently supports only repositories with the modern `archive` format. The
    repository's config file still uses the historical term `archive-z2` to signify such a format.
`````

## File: pulp-docs/pulp_ostree/docs/user/guides/modify-content.md
`````markdown
# Modify Content

Users add existing content to a repository by issuing the following commands:

```bash
pulp ostree repository ref add --repository foo --name ${REF_NAME} --checksum ${COMMIT_CHECKSUM1}
pulp ostree repository commit add --repository foo --checksum ${COMMIT_CHECKSUM2}
pulp ostree repository config add --repository foo --pulp_href ${PULP_HREF_CONFIG}
```

The added content can be listed by inspecting the latest repository version:

```bash
pulp ostree repository ref list --repository foo
pulp ostree repository config list --repository foo --version 1
```

Similarly, to remove content, one specifies refs and commits that should be removed, like so:

```bash
pulp ostree repository ref remove --repository foo --name ${REF_NAME} --checksum ${COMMIT_CHECKSUM1}
pulp ostree repository commit remove --repository foo --checksum ${COMMIT_CHECKSUM2}
```

!!! note

    Bear in mind that the `ostree` utility may require the `config` file to be present in the
    published repository as well. Otherwise, the `pull` operations may not be successful.
`````

## File: pulp-docs/pulp_ostree/docs/user/tutorials/sync-and-host.md
`````markdown
# Mirror and Host Content

In this tutorial, there is demonstrated how one can mirror remote content into a local Pulp
repository.

Users can populate their repositories with content from external sources by syncing a remote
repository. The procedure is as follows: first, create a repository object, then establish a
remote object pointing to the external source, and finally execute a sync task. Upon completion
of the sync task, the content is ready to be promoted/published and becomes visible to end users.

## Create a Repository

Start by creating a new repository named "foo".

```bash
pulp ostree repository create --name foo
```

## Create a Remote

Then, create a remote object that informs Pulp about an external content source.

```bash
pulp ostree remote create --name bar --url https://fixtures.pulpproject.org/ostree/small/
```

Optionally, use the standard Linux wildcards `*`, `?` to include or exclude specific commits from
a remote repository. This might be helpful when there is no need to mirror everything from the
remote repository. Besides that, it reduces the network or storage overhead.

```bash
pulp ostree remote create --name bar-filtered --url https://fixtures.pulpproject.org/ostree/small/ --include-refs "[\"stable\"]" --exclude-refs "[\"raw*\"]"
```

## Sync the Repository

After creating the repository and remote, use these objects to kick off a synchronization task.
This tells Pulp to fetch content from the remote source and add it to the repository.

```bash
pulp ostree repository sync --name foo --remote bar
```

!!! note

    The OSTree plugin currently supports only repositories with the modern `archive` format. The
    repository's config file still uses the historical term `archive-z2` to signify such a format.

## Host Content (Create a Distribution)

To serve the OSTree content from Pulp, the user needs to create a distribution that will host the
associated repository at `${PULP_BASE_ADDR}/pulp/content/<distribution.base_path>`:

```bash
pulp ostree distribution create --name fedora-iot --base-path fedora-iot --repository fedora-iot
```

The content present in the latest repository version is automatically published and accessible by
package managers (e.g., the `ostree` utility).


## Consume the Content

Now, configure a local OSTree repository to consume the content from the Pulp repository.

=== "Script"

    ```bash
    ostree --repo=repo init --mode=archive
    ostree --repo=repo remote --no-gpg-verify add pulpos ${PULP_BASE_ADDR}/pulp/content/fedora-iot

    ostree pull --repo=repo --mirror pulpos:fedora/stable/x86_64/iot --depth=-1
    ostree log --repo=repo fedora/stable/x86_64/iot
    ```

=== "Output"

    ```
    commit 9bbeb2f9961b425b70551b91992e4e3169e7c695f93d99b03e3f2aac463231bf
    Parent:  50aeff7f74c66041ffc9e197887bfd5e427248ff1405e0e61e2cff4d3a1cecc7
    ContentChecksum:  237941566711d062b8b73d0c2823225d59c404d78bf184243c6031fa279e8a1f
    Date:  2021-09-06 15:48:13 +0000
    (no subject)

    commit 50aeff7f74c66041ffc9e197887bfd5e427248ff1405e0e61e2cff4d3a1cecc7
    ContentChecksum:  10155b85154b87675970fd56c4a3b44c4739b486772926ed7463f1c827e7a236
    Date:  2021-09-06 11:35:16 +0000
    (no subject)
    ```

!!! note

    The plugin automatically generates static deltas for a specific subset of commits. Currently,
    the summary file is not being updated after every single change to the repository.

Users are allowed to copy and remove content within repositories. When a new ref is being added or
removed from a repository, all the referenced commits and file objects will be added or removed as
well in order to preserve the integrity of the repository. Visit the guide section to learn more
about particular workflows.
`````

## File: pulp-docs/pulp_ostree/docs/user/index.md
`````markdown
# Welcome to Pulp OSTree

The Pulp OSTree plugin adds support for managing OSTree repositories. In this section,
readers will learn more about the concept of mirroring remote repositories and publishing
them for further client's consumption.

## Features

- **Synchronize** a remote OSTree repository and serve it via Pulp.
- **Import** new OSTree commits to an existing repository.
- **Modify** commits and refs within a published repository.
- **Consume** OSTree content imported to Pulp by leveraging the `ostree` utility.

## Requirements

Usually, it is recommended to instal the following utilities when managing OSTree content:

- [ostree](https://manpages.debian.org/testing/ostree/ostree.1.en.html) - a CLI tool for managing
  versioned filesystem trees locally
- [osbuild-composer](https://github.com/osbuild/osbuild-composer) - an HTTP service for building
  bootable OS disk images
- [composer-cli](https://osbuild.org/docs/user-guide/introduction) - a tool
  for use with a WELDR API server, managing blueprints, or building new images

In this documentation, these utilities are used to demonstrate the way how to create and consume
the OSTree content as well as how they can complement the Pulp's functionality.

For the best user experience, the workflows utilize [Pulp CLI OSTree](https://github.com/pulp/pulp-cli-ostree).
Install the CLI for the OSTree plugin and update its configuration if necessary. It is simple!

```bash
pip install pulp-cli-ostree

pulp config create && pulp config edit  # configure the reference to the running Pulp instance
```
`````

## File: pulp-docs/pulp_ostree/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 2.4.8 (2025-04-22) {: #2.4.8 }

No significant changes.

---

## 2.4.7 (2025-04-04) {: #2.4.7 }

#### Misc {: #2.4.7-misc }

- [#435](https://github.com/pulp/pulp_ostree/issues/435)

---

## 2.4.6 (2025-02-24) {: #2.4.6 }

#### Misc {: #2.4.6-misc }

- [#422](https://github.com/pulp/pulp_ostree/issues/422)

---

## 2.4.5 (2025-02-06) {: #2.4.5 }

No significant changes.

---

## 2.4.4 (2024-10-30) {: #2.4.4 }

#### Bugfixes {: #2.4.4-bugfix }

- Disable the an `import_all` test if pulpcore version is equal or higher than 3.59 given a specific fix in that version.
  [#403](https://github.com/pulp/pulp_ostree/issues/403)

---

## 2.4.3 (2024-07-09) {: #2.4.3 }


No significant changes.

---

## 2.4.2 (2024-07-09) {: #2.4.2 }


No significant changes.

---

## 2.4.1 (2024-06-26) {: #2.4.1 }


#### Bugfixes {: #2.4.1-bugfix }

- Fixed an issue when trying to use import-all as a non-admin user.
  [#373](https://github.com/pulp/pulp_ostree/issues/373)

---

## 2.4.0 (2024-06-20) {: #2.4.0 }


#### Bugfixes {: #2.4.0-bugfix }

- Fixed an issue with `rpm-ostree` having multiples commits in the same tar file and breaking
  Pulp `import-commits`.
  [#366](https://github.com/pulp/pulp_ostree/issues/366)

#### Improved Documentation {: #2.4.0-doc }

- Migrated the whole documentation to staging. The documentation should be now consumed from the
  unified docs site.
  [#347](https://github.com/pulp/pulp_ostree/issues/347)

#### Misc {: #2.4.0-misc }

- 

---

## 2.3.2 (2024-06-26) {: #2.3.2 }


#### Bugfixes {: #2.3.2-bugfix }

- Fixed an issue when trying to use import-all as a non-admin user.
  [#373](https://github.com/pulp/pulp_ostree/issues/373)

---

## 2.3.1 (2024-06-18) {: #2.3.1 }


#### Bugfixes {: #2.3.1-bugfix }

- Fixed an issue with `rpm-ostree` having multiples commits in the same tar file and breaking
  Pulp `import-commits`.
  [#366](https://github.com/pulp/pulp_ostree/issues/366)

---

## 2.3.0 (2024-02-19) {: #2.3.0 }

### Features

-   Added support for domains.
    [#321](https://github.com/pulp/pulp_ostree/issues/321)
-   Added role-based access control.
    [#331](https://github.com/pulp/pulp_ostree/issues/331)

### Bugfixes

-   Improved the performance of subsequent imports.
    [#289](https://github.com/pulp/pulp_ostree/issues/289)

### Misc

-   [#324](https://github.com/pulp/pulp_ostree/issues/324), [#325](https://github.com/pulp/pulp_ostree/issues/325), [#326](https://github.com/pulp/pulp_ostree/issues/326), [#327](https://github.com/pulp/pulp_ostree/issues/327)

---

## 2.2.1 (2023-11-16) {: #2.2.1 }

### Bugfixes

-   Improved the performance of subsequent imports.
    [#289](https://github.com/pulp/pulp_ostree/issues/289)

---

## 2.2.0 (2023-11-03) {: #2.2.0 }

### Features

-   Made plugin compatible with pulpcore 3.40.1+.
    [#303](https://github.com/pulp/pulp_ostree/issues/303)

### Bugfixes

-   Started re-generating summary files and publishing them during the import.
    [#269](https://github.com/pulp/pulp_ostree/issues/269)
-   Fixed a bug that led to ignoring already imported refs in a repository when generating a summary.
    [#277](https://github.com/pulp/pulp_ostree/issues/277)
-   Made the import facility to accept tarballs with already imported parent commits.
    [#279](https://github.com/pulp/pulp_ostree/issues/279)
-   Fixed the procedure of regenerating summaries by using the relevant refs only.
    [#288](https://github.com/pulp/pulp_ostree/issues/288)

---

## 2.1.3 (2023-09-18) {: #2.1.3 }

### Bugfixes

-   Fixed the procedure of regenerating summaries by using the relevant refs only.
    [#288](https://github.com/pulp/pulp_ostree/issues/288)

---

## 2.1.2 (2023-09-11) {: #2.1.2 }

### Bugfixes

-   Fixed a bug that led to ignoring already imported refs in a repository when generating a summary.
    [#277](https://github.com/pulp/pulp_ostree/issues/277)
-   Made the import facility to accept tarballs with already imported parent commits.
    [#279](https://github.com/pulp/pulp_ostree/issues/279)

---

## 2.1.1 (2023-07-12) {: #2.1.1 }

### Bugfixes

-   Started re-generating summary files and publishing them during the import.
    [#269](https://github.com/pulp/pulp_ostree/issues/269)

---

## 2.1.0 (2023-05-28) {: #2.1.0 }

### Features

-   Made the plugin compatible with Django 4.2 and pulpcore 3.25.
    [#258](https://github.com/pulp/pulp_ostree/issues/258)

### Bugfixes

-   Fixed the path resolution when a user specifies absolute paths when importing repositories.
    [#226](https://github.com/pulp/pulp_ostree/issues/226)
-   Fixed a bug that disallowed users to pull re-synced content locally.
    [#257](https://github.com/pulp/pulp_ostree/issues/257)
-   Fixed a bug which prevented users from assigning remotes to repositories in advance.
    [#262](https://github.com/pulp/pulp_ostree/issues/262)

---

## 2.0.0 (2023-03-30) {: #2.0.0 }

### Features

-   Added support for third-party storage backends (i.e., S3, Azure).
    [#172](https://github.com/pulp/pulp_ostree/issues/172)
-   Added support for static deltas. The static deltas are automatically computed for synced and
    imported repositories. This behaviour is enabled by default. Set `compute_delta` to `False`
    in a corresponding repository if there is no need to compute the static deltas between the last
    two commits.
    [#230](https://github.com/pulp/pulp_ostree/issues/230)

---

## 2.0.0a6 (2022-06-24)

### Features

-   Added support for filtering refs during synchronization. Users can now use the flags
    `include_refs` or `exclude_refs` to include or exclude refs from a remote repository.
    [#163](https://github.com/pulp/pulp_ostree/issues/163)
-   The old endpoint for importing a whole OSTree repository, including refs, was renamed to
    `import_all`. The endpoint `import_commits` shall be now used to import commits to an existing
    ref.
    [#170](https://github.com/pulp/pulp_ostree/issues/170)

### Improved Documentation

-   Added a new paragraph about filtering remote content by refs.
    [#179](https://github.com/pulp/pulp_ostree/issues/179)

---

## 2.0.0a5 (2022-02-12)

No significant changes.

---

## 2.0.0a4 (2022-01-12)

No significant changes.

---

## 2.0.0a3 (2022-01-11)

### Features

-   The reference to a parent commit is now retrieved from a child commit automatically.
    [#140](https://github.com/pulp/pulp_ostree/issues/140)

### Bugfixes

-   Fixed content paths for published distributions.
    [#143](https://github.com/pulp/pulp_ostree/issues/143)

---

## 2.0.0a2 (2021-10-25)

### Features

-   Added support for modifying repository content via the Pulp API.
    [#8929](https://pulp.plan.io/issues/8929)
-   Added support for filtering refs and commits by names and checksums, respectively.
    [#9493](https://pulp.plan.io/issues/9493)

### Bugfixes

-   Fixed a bug that disallowed users from publishing the same content in different repositories.
    [#9431](https://pulp.plan.io/issues/9431)
-   Fixed an issue that disallowed users from saving imported content.
    [#9490](https://pulp.plan.io/issues/9490)

---

## 2.0.0a1 (2021-09-08)

### Features

-   Added support for uploading and publishing OSTree commits.
    [#8918](https://pulp.plan.io/issues/8918)
-   Added support for adding new commits to an existing repository.
    [#8919](https://pulp.plan.io/issues/8919)
-   Added support for syncing from remote OSTree repositories.
    [#8921](https://pulp.plan.io/issues/8921)
-   Verified support for deleting repository versions.
    [#8922](https://pulp.plan.io/issues/8922)
`````

## File: pulp-docs/pulp_ostree/README.md
`````markdown
![Nightly CI/CD](https://github.com/pulp/pulp_ostree/actions/workflows/nightly.yml/badge.svg?branch=main)

Pulp OSTree Plugin
==================

A Pulp plugin to support hosting your own OSTree content.

For more information, please see the [documentation](https://docs.pulpproject.org/pulp_ostree/) or the [Pulp project page](https://pulpproject.org/).
`````

## File: pulp-docs/pulp_ostree/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_ostree' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_ostree/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_ostree/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_ostree/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_ostree/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_python/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_python/docs/admin/guides/rbac.md
`````markdown
# Role Base Access Control in Pulp Python

Role based access control in Pulp Python is configured using access policies for the following `viewset_names`:

* `content/python/packages`
* `distributions/python/pypi`
* `publications/python/pypi`
* `remotes/python/python`
* `repositories/python/python`
* `repositories/python/python/versions`
* `pypi/root`
* `pypi/simple`
* `pypi/pypi`
* `pypi/legacy`

This document will focus on describing the default access policies for the PyPI specific APIs and how they may be
customized. The access policies for the Pulp APIs follow the same scheme as the Pulp File plugin which can be read 
about here: [Pulp File RBAC](site:pulp_file/docs/admin/guides/01-rbac/). Use the Pulp 
CLI to follow along with the examples here.

!!! note 
    This feature is currently in tech preview and is subject to change in future releases.

## Default Index Behavior

By default, the read APIs of the index are accessible to any user, authenticated or not, while the upload APIs 
require permission to modify the backing repository. 

```json
"statements": [
    {
        "action": ["list", "retrieve"],
        "principal": "*",
        "effect": "allow",
    },
    {
        "action": ["create"],
        "principal": "authenticated",
        "effect": "allow",
        "condition": "index_has_repo_perm:python.modify_pythonrepository",
    },
],
```

The `root` and `pypi` endpoints are solely read APIs while the `legacy` endpoint is solely an upload API. The 
`simple` endpoint is both a read and upload API and thus has two actions in its access policy. The defaults on 
these endpoints match the default behavior found on public repositories like PyPI and ensure the maximum compatibility 
with Python tooling.

Also by default, the download links for the Python packages in the index are accessible by anyone. If you wish to 
protect who can download Python content then do so by adding a content guard to your distribution.

```bash
pulp python distribution update --name foo --content-guard $CONTENT_GUARD_HREF_OR_NAME
```

Example pulp-cli workflow to add RBAC-based access to download from the index:

```bash
pulp content-guard rbac create --name foo-guard
pulp content-guard rbac assign --name foo-guard --user user1 --user user2 --group group1 --group group2
CG_HREF=$(pulp content-guard rbac list --name foo-guard | jq -r ".[0].pulp_href")
pulp python distribution update --name foo --content-guard $CG_HREF
```

Links for using basic auth with various python package tools to pass the 
new RBACContentGuard:
- [pip](https://pip.pypa.io/en/stable/topics/authentication/)
- [poetry](https://python-poetry.org/docs/repositories/#private-repository-example)
- [pipenv](https://pipenv.pypa.io/en/latest/credentials.html)
- [pdm](https://pdm-project.org/en/latest/usage/config/#store-credentials-with-the-index)

!!! warning
    The PyPI access policies do not support `creation_hooks` or `queryset_scoping`.

## Index Specific Access Conditions

Pulp Python comes with two specific access condition methods that can be used in the PyPI access policies.

### `index_has_repo_perm`

This access condition checks if the user has the supplied permission on the index's backing repository. If the index
has no repository this will return `True`. If no permission is specified for the method then it will use 
`python.view_pythonrepository` as its default. This is the default condition that is used for the upload APIs with
the modify python repository permission.

### `index_has_perm`

This access condition checks if the user has the supplied permission on the index (distribution) itself. If no 
permission is specified for the method then it will use `python.view_pythondistribution` as its default.

!!! note 
    Both access condition methods are compatible with the Pulp Domains feature.
`````

## File: pulp-docs/pulp_python/docs/admin/reference/settings.md
`````markdown
# Settings

`pulp_python` adds configuration options to those offered by `pulpcore`.

## PYTHON_GROUP_UPLOADS

> This setting controls whether the uploading of packages through the PyPI APIs can be grouped
> inside http sessions. When enabled, Pulp tries to group the uploaded distributions of a package
> into one task generating one repository version. Defaults to False.

## PYPI_API_HOSTNAME

> This specifies the hostname where the PyPI API is served. It defaults to the fully qualified
> hostname of the system where the process is running. This needs to be adjusted if running behind
> a non local reverse proxy.
`````

## File: pulp-docs/pulp_python/docs/user/guides/_SUMMARY.md
`````markdown
* [Set up your own PyPI](pypi.md)
* [Sync from Remote Repositories](sync.md)
* [Upload and Manage Content](upload.md)
* [Publish and Host Python Content](publish.md)
`````

## File: pulp-docs/pulp_python/docs/user/guides/publish.md
`````markdown
# Publish and Host Your Python Content

This section assumes that you have a repository with content in it. To do this, see the
[sync](site:pulp_python/docs/user/guides/sync/) or [upload](site:pulp_python/docs/user/guides/upload/) documentation.

## Create a Publication (manually)

Kick off a publish task by creating a new publication. The publish task will generate all the
metadata that `pip` needs to install packages (although it will need to be hosted through a
Distribution before it is consumable).

=== "Run"

    ```bash
    # Create a new publication specifying the repository_version.
    # Alternatively, you can specify just the repository, and Pulp will assume the latest version.
    pulp python publication create --repository foo --version 1
    
    # Publications can only be referenced through their pulp_href
    PUBLICATION_HREF=$(pulp python publication list | jq -r .[0].pulp_href)
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/publications/python/pypi/0196ba31-cd04-7aba-a7b4-71a98a976745/",
      "prn": "prn:python.pythonpublication:0196ba31-cd04-7aba-a7b4-71a98a976745",
      "pulp_created": "2025-05-10T12:35:48.103758Z",
      "pulp_last_updated": "2025-05-10T12:35:48.205361Z",
      "repository_version": "/pulp/api/v3/repositories/python/python/0196ba30-e15e-71ea-9867-33aeceb5a87e/versions/1/",
      "repository": "/pulp/api/v3/repositories/python/python/0196ba30-e15e-71ea-9867-33aeceb5a87e/",
      "distributions": []
    }
    ```

## Host a Publication (Create a Distribution)

To host a publication, (which makes it consumable by `pip`), users create a distribution which
will serve the associated publication at `${BASE_ADDR}/pypi/${DIST_BASE_PATH}/`.

=== "Run"

    ```bash
    # Distributions are created asynchronously. Create one, and specify the publication that will
    # be served at the base path specified.
    pulp python distribution create --name foo --base-path foo --publication "$PUBLICATION_HREF"
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/distributions/python/pypi/0196ba32-0be6-7f85-bbb3-cf561a4e2d88/",
      "prn": "prn:python.pythondistribution:0196ba32-0be6-7f85-bbb3-cf561a4e2d88",
      "pulp_created": "2025-05-10T12:36:04.200189Z",
      "pulp_last_updated": "2025-05-10T12:36:04.200232Z",
      "base_path": "foo",
      "base_url": "http://localhost:5001/pypi/foo/",
      "content_guard": null,
      "no_content_change_since": "2025-05-10T12:36:04.200232Z",
      "hidden": false,
      "pulp_labels": {},
      "name": "foo",
      "repository": null,
      "publication": "/pulp/api/v3/publications/python/pypi/0196ba31-cd04-7aba-a7b4-71a98a976745/",
      "allow_uploads": true,
      "remote": null
    }
    ```

## Automate Publication and Distribution

With a little more initial setup, you can have publications and distributions for your repositories
updated automatically when new repository versions are created.

```bash
# This configures the repository to produce new publications when a new version is created
pulp python repository update --name foo --autopublish
# This configures the distribution to track the latest repository version for a given repository
pulp python distribution update --name foo --repository foo
```

!!! warning
    Support for automatic publication and distribution is provided as a tech preview in Pulp 3.
    Functionality may not work or may be incomplete. Also, backwards compatibility when upgrading
    is not guaranteed.

## Enable Pull-Through Caching

Only packages present in your repository will be available from your index, but adding a remote source to
your distribution will enable the pull-through cache feature. This feature allows you to install any package
from the remote source and have Pulp store that package as orphaned content.

```bash
# Add remote to distribution to enable pull-through caching
pulp python distribution update --name foo --remote bar
```

!!! note
    Pull-through caching will respect the includes/excludes filters on the supplied remote.

!!! warning
    Support for pull-through caching is provided as a tech preview in Pulp 3.
    Functionality may not work or may be incomplete. Also, backwards compatibility when upgrading
    is not guaranteed.

## Use the newly created distribution

The metadata and packages can now be retrieved from the distribution:

```bash
http "${BASE_ADDR}/pypi/foo/simple/"
http "${BASE_ADDR}/pypi/foo/simple/shelf-reader/"
```

!!! note
    When domains are enabled, it is necessary to include the domain name within the URL, like so:
    `${BASE_ADDR}/pypi/${DOMAIN_NAME}/foo/simple/`

The content is also pip installable:

```bash
pip install --trusted-host localhost -i "${BASE_ADDR}/pypi/foo/simple/" shelf-reader
```

If you don't want to specify the distribution path every time, you can modify your `pip.conf` file:

=== "Run"

    ```bash
    cat pip.conf
    ```

=== "Output"

    ```
    [global]
    index-url = http://localhost:24817/pypi/foo/simple/
    ```

The above configuration informs `pip` to install from `pulp`:

```bash
pip install --trusted-host localhost shelf-reader
```

See the [pip docs](https://pip.pypa.io/en/stable/topics/configuration) for more details.
`````

## File: pulp-docs/pulp_python/docs/user/guides/pypi.md
`````markdown
# Set up your own PyPI

This section guides you through the quickest way to set up `pulp_python` to act as your very own
private `PyPI`.

## Create a Repository

Repositories are the base objects `Pulp` uses to store and organize its content. They are automatically
versioned when content is added or deleted and allow for easy rollbacks to previous versions.

=== "Run"

    ```bash
    # Start by creating a new repository named "foo":
    pulp python repository create --name foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/repositories/python/python/0196ba29-52b9-7cf4-b12e-f3247f0eb3dc/",
      "prn": "prn:python.pythonrepository:0196ba29-52b9-7cf4-b12e-f3247f0eb3dc",
      "pulp_created": "2025-05-10T12:26:32.506906Z",
      "pulp_last_updated": "2025-05-10T12:26:32.517333Z",
      "versions_href": "/pulp/api/v3/repositories/python/python/0196ba29-52b9-7cf4-b12e-f3247f0eb3dc/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/python/python/0196ba29-52b9-7cf4-b12e-f3247f0eb3dc/versions/0/",
      "name": "foo",
      "description": null,
      "retain_repo_versions": null,
      "remote": null,
      "autopublish": false
    }
    ```

## Create a Distribution

Distributions serve the content stored in repositories so that it can be used by tools like `pip`.

=== "Run"

    ```bash
    pulp python distribution create --name my-pypi --base-path my-pypi --repository foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/distributions/python/pypi/0196ba29-8f95-776b-a782-78d7838f3f9f/",
      "prn": "prn:python.pythondistribution:0196ba29-8f95-776b-a782-78d7838f3f9f",
      "pulp_created": "2025-05-10T12:26:48.086775Z",
      "pulp_last_updated": "2025-05-10T12:26:48.086806Z",
      "base_path": "my-pypi",
      "base_url": "http://localhost:5001/pypi/my-pypi/",
      "content_guard": null,
      "no_content_change_since": null,
      "hidden": false,
      "pulp_labels": {},
      "name": "my-pypi",
      "repository": "/pulp/api/v3/repositories/python/python/0196ba29-52b9-7cf4-b12e-f3247f0eb3dc/",
      "publication": null,
      "allow_uploads": true,
      "remote": null
    }
    ```

## Upload and Install Packages

Packages can now be uploaded to the index using your favorite Python tool. The index url will be available
at `${BASE_ADDR}/pypi/${DIST_BASE_PATH}/simple/`.

```bash
BASE_ADDR="http://localhost:5001"
PLUGIN_SOURCE="shelf-reader"
git clone https://github.com/asmacdo/shelf-reader.git
# Build custom package
python -m build "$PLUGIN_SOURCE"
# Upload built package distributions to my-pypi
twine upload --repository-url "${BASE_ADDR}/pypi/my-pypi/simple/" -u admin -p password "${PLUGIN_SOURCE}/dist/"*
```

Packages can then be installed using your favorite Python tool:

```bash
pip install --trusted-host localhost -i "${BASE_ADDR}/pypi/my-pypi/simple/" "$PLUGIN_SOURCE"
```

Now you have a fully operational Python package index. Check out the other workflows to see more features of
`pulp_python`.
`````

## File: pulp-docs/pulp_python/docs/user/guides/sync.md
`````markdown
# Synchronize a Repository

Users can populate their repositories with content from an external source like PyPI by syncing
their repository.

## Create a Repository

=== "Run"

    ```bash
    # Start by creating a new repository named "foo":
    pulp python repository create --name foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/",
      "prn": "prn:python.pythonrepository:0196ba2a-f353-736a-854c-2d415389a509",
      "pulp_created": "2025-05-10T12:28:19.156941Z",
      "pulp_last_updated": "2025-05-10T12:28:19.169190Z",
      "versions_href": "/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/versions/0/",
      "name": "foo",
      "description": null,
      "retain_repo_versions": null,
      "remote": null,
      "autopublish": false
    }
    ```

Reference: [Python Repository Usage](site:pulp_python/restapi/#tag/Repositories:-Python)

## Create a Remote

Creating a remote object informs Pulp about an external content source. In this case, we will be
using a fixture, but Python remotes can be anything that implements the PyPI API. This can be PyPI
itself, a fixture, or even an instance of Pulp 2.

=== "Run"

    ```bash
    # Create a remote that syncs some versions of shelf-reader into your repository.
    pulp python remote create --name bar --url https://pypi.org/ --includes '["shelf-reader"]'
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/remotes/python/python/0196ba2b-1461-7d0d-99f6-5f75610abf71/",
      "prn": "prn:python.pythonremote:0196ba2b-1461-7d0d-99f6-5f75610abf71",
      "pulp_created": "2025-05-10T12:28:27.617672Z",
      "pulp_last_updated": "2025-05-10T12:28:27.617697Z",
      "name": "bar",
      "url": "https://pypi.org/",
      "ca_cert": null,
      "client_cert": null,
      "tls_validation": true,
      "proxy_url": null,
      "pulp_labels": {},
      "download_concurrency": null,
      "max_retries": null,
      "policy": "on_demand",
      "total_timeout": null,
      "connect_timeout": null,
      "sock_connect_timeout": null,
      "sock_read_timeout": null,
      "headers": null,
      "rate_limit": null,
      "hidden_fields": [
        {
          "name": "client_key",
          "is_set": false
        },
        {
          "name": "proxy_username",
          "is_set": false
        },
        {
          "name": "proxy_password",
          "is_set": false
        },
        {
          "name": "username",
          "is_set": false
        },
        {
          "name": "password",
          "is_set": false
        }
      ],
      "includes": [
        "shelf-reader"
      ],
      "excludes": [],
      "prereleases": true,
      "package_types": [],
      "keep_latest_packages": 0,
      "exclude_platforms": []
    }
    ```

Reference: [Python Remote Usage](site:pulp_python/restapi/#tag/Remotes:-Python)

## A More Complex Remote

If only the name of a project is specified, every distribution of every version of that project
will be synced. You can use the version specifier field to ensure only distributions you care
about will be synced:

```bash
pulp python remote create \
    --name 'complex-remote' \
    --url 'https://pypi.org/' \
    --includes '[
        "django~=2.0,!=2.0.1",
        "pip-tools>=1.12,<=2.0",
        "scipy",
        "shelf-reader"
    ]'
```

You can also use version specifiers to "exclude" certain versions of a project, like so:

```bash
pulp python remote create \
    --name 'complex-remote' \
    --url 'https://pypi.org/' \
    --includes '[
        "django",
        "scipy"
    ]' \
    --excludes '[
        "django~=1.0",
        "scipy"
    ]'
```

You can also filter packages by their type, platform and amount synced through the "package_types",
"exclude_platforms", and "keep_latest_packages" fields respectively, like so:

```bash
# Sync only sdist and bdist_wheel package types, exclude any packages built
# for windows and keep the five latest versions
pulp python remote create \
    --name 'complex-filters' \
    --url 'https://pypi.org/' \
    --includes '["django"]' \
    --package-types '["sdist", "bdist_wheel"]' \
    --exclude-platforms '["windows"]' \
    --keep-latest-packages 5 
```

Reference: [Python Remote Usage](site:pulp_python/restapi/#tag/Remotes:-Python)

### Creating a remote to sync all of PyPI

A remote can be set up to sync all of PyPI by not specifying any included packages, like so:

```bash
pulp python remote create \
    --name 'PyPI-mirror' \
    --url 'https://pypi.org/' \
    --excludes '[
        "django~=1.0",
        "scipy"
    ]'
```

By not setting the "includes" field Pulp will ask PyPI for all of its available packages to sync, minus the ones from
the excludes field. Default Python remotes are created with syncing policy "on_demand" because the most common
Python remotes involve syncing with PyPI which requires terabytes of disk space. This can be changed by
modifying the "policy" field.

Syncing all of PyPI can take a long time depending on your network and disk speeds. Check out
[pull-through caching](site:pulp_python/docs/user/guides/publish/#enable-pull-through-caching) 
to learn about another way to mirror PyPI.

## Sync repository foo with remote

Use the remote object to kick off a synchronize task by specifying the repository to
sync with. You are telling pulp to fetch content from the remote and add to the repository.

=== "Run"

    ```bash
    # Using the Remote we just created, we kick off a sync task
    pulp python repository sync --name foo --remote bar
    
    # The sync command will by default wait for the sync to complete
    # Use Ctrl+c or the -b option to send the task to the background
    
    # Show the latest version when sync is done
    pulp python repository version show --repository foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/versions/1/",
      "prn": "prn:core.repositoryversion:0196ba2b-655c-7745-b10f-bdde15a941c6",
      "pulp_created": "2025-05-10T12:28:48.349938Z",
      "pulp_last_updated": "2025-05-10T12:28:49.031497Z",
      "number": 1,
      "repository": "/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/",
      "base_version": null,
      "content_summary": {
        "added": {
          "python.python": {
            "count": 2,
            "href": "/pulp/api/v3/content/python/packages/?repository_version_added=/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/versions/1/"
          }
        },
        "removed": {},
        "present": {
          "python.python": {
            "count": 2,
            "href": "/pulp/api/v3/content/python/packages/?repository_version=/pulp/api/v3/repositories/python/python/0196ba2a-f353-736a-854c-2d415389a509/versions/1/"
          }
        }
      }
    }
    ```

Reference: [Python Sync Usage](site:pulp_python/restapi/#tag/Repositories:-Python/operation/repositories_python_python_sync)
`````

## File: pulp-docs/pulp_python/docs/user/guides/upload.md
`````markdown
# Upload and Manage Content

Content can be added to a repository not only by synchronizing from a remote source but also by uploading the files directly into Pulp.

## Create a repository

If you don't already have a repository, create one.

=== "Run"

    ```bash
    # Start by creating a new repository named "foo":
    pulp python repository create --name foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/",
      "prn": "prn:python.pythonrepository:0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20",
      "pulp_created": "2025-05-10T12:30:34.358509Z",
      "pulp_last_updated": "2025-05-10T12:30:34.373703Z",
      "versions_href": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/",
      "pulp_labels": {},
      "latest_version_href": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/0/",
      "name": "foo",
      "description": null,
      "retain_repo_versions": null,
      "remote": null,
      "autopublish": false
    }
    ```

## Upload a file to Pulp

Each artifact in Pulp represents a file. They can be created during sync or created manually by uploading a file.

=== "Run"

    ```bash
    # Get a Python package or choose your own
    curl -O https://fixtures.pulpproject.org/python-pypi/packages/shelf-reader-0.1.tar.gz
    PKG="shelf-reader-0.1.tar.gz"
    
    # Upload it to Pulp
    pulp python content upload --relative-path "$PKG" --file "$PKG"
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/content/python/packages/0196ba2d-6453-75f9-949c-55b3cd435909/",
      "prn": "prn:python.pythonpackagecontent:0196ba2d-6453-75f9-949c-55b3cd435909",
      "pulp_created": "2025-05-10T12:30:59.157306Z",
      "pulp_last_updated": "2025-05-10T12:30:59.157328Z",
      "pulp_labels": {},
      "artifact": "/pulp/api/v3/artifacts/0196ba2d-637f-7fd4-bce7-7e557ad82bc9/",
      "filename": "shelf-reader-0.1.tar.gz",
      "packagetype": "sdist",
      "name": "shelf-reader",
      "version": "0.1",
      "sha256": "04cfd8bb4f843e35d51bfdef2035109bdea831b55a57c3e6a154d14be116398c",
      "metadata_version": "1.1",
      "summary": "Make sure your collections are in call number order.",
      "description": "too long to read",
      "description_content_type": "",
      "keywords": "",
      "home_page": "https://github.com/asmacdo/shelf-reader",
      "download_url": "",
      "author": "Austin Macdonald",
      "author_email": "asmacdo@gmail.com",
      "maintainer": "",
      "maintainer_email": "",
      "license": "GNU GENERAL PUBLIC LICENSE Version 2, June 1991",
      "requires_python": "",
      "project_url": "",
      "project_urls": "{}",
      "platform": "",
      "supported_platform": "",
      "requires_dist": "[]",
      "provides_dist": "[]",
      "obsoletes_dist": "[]",
      "requires_external": "[]",
      "classifiers": "[]"
    }
    ```

## Add content to a repository

Once there is a content unit, it can be added and removed from repositories using the add and remove commands.

=== "Run"

    ```bash
    # Add created PythonPackage content to repository
    pulp python repository content add --repository foo --filename "$PKG"
    
    # After the task is complete, it gives us a new repository version
    pulp python repository version show --repository foo
    ```

=== "Output"

    ```
    {
      "pulp_href": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/1/",
      "prn": "prn:core.repositoryversion:0196ba2d-b1bc-7ac2-ac2a-dc8300104a8c",
      "pulp_created": "2025-05-10T12:31:18.972944Z",
      "pulp_last_updated": "2025-05-10T12:31:19.051457Z",
      "number": 1,
      "repository": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/",
      "base_version": "/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/0/",
      "content_summary": {
        "added": {
          "python.python": {
            "count": 1,
            "href": "/pulp/api/v3/content/python/packages/?repository_version_added=/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/1/"
          }
        },
        "removed": {},
        "present": {
          "python.python": {
            "count": 1,
            "href": "/pulp/api/v3/content/python/packages/?repository_version=/pulp/api/v3/repositories/python/python/0196ba2d-0374-77ef-a4e0-1b5ba5b1ed20/versions/1/"
          }
        }
      }
    }
    ```
`````

## File: pulp-docs/pulp_python/docs/user/learn/tech-preview.md
`````markdown
# Tech previews

The following features are currently being released as part of a tech preview

- New endpoint “pulp/api/v3/remotes/python/python/from_bandersnatch/” that allows for Python remote creation from a
  Bandersnatch config file.
- PyPI’s json API at content endpoint ‘/pypi/\{package-name}/json’. Allows for basic Pulp-to-Pulp syncing.
- Fully mirror Python repositories provided PyPI and Pulp itself.
- `Twine` upload packages to indexes at endpoints '/simple\` or '/legacy'.
- Create pull-through caches of remote sources.
- Pulp Domain Support
- RBAC support
`````

## File: pulp-docs/pulp_python/docs/index.md
`````markdown
# Welcome to Pulp Python

The `python` plugin extends [pulpcore](site:pulpcore/) to support
hosting python packages. This plugin is a part of the [Pulp Project](site:/), and assumes some familiarity with the [pulpcore documentation](site:pulpcore/).

If you are just getting started, we recommend getting to know the [basic
workflows](site:pulp_python/docs/user/guides/pypi/).

The REST API documentation for `pulp_python` is available [here](site:pulp_python/restapi/).

## Features

- [Create local mirrors of PyPI](site:pulp_python/docs/user/guides/sync/) that you have full control over
- [Upload your own Python packages](site:pulp_python/docs/user/guides/upload/)
- [Perform pip install](site:pulp_python/docs/user/guides/publish/) from your Pulp Python repositories
- Download packages on-demand to reduce disk usage
- Every operation creates a restorable snapshot with Versioned Repositories
- Curate your Python repositories with allowed and disallowed packages
- Host content either locally or on S3/Azure/GCP
- De-duplication of all saved content

## Tech Preview

Some additional features are being supplied as a tech preview.  There is a possibility that
backwards incompatible changes will be introduced for these particular features.  For a list of
features currently being supplied as tech previews only, see the [tech preview page](site:pulp_python/docs/user/learn/tech-preview/).

## How to use these docs

The documentation here should be considered the **primary documentation for managing Python related content.**
All relevant workflows are covered here, with references to some pulpcore supplemental docs.
Users may also find pulpcore’s conceptual docs useful.

This documentation falls into two main categories:

1. `How-to Guides` shows the **major features** of the Python plugin, with links to reference docs.
2. The [REST API Docs](site:pulp_python/restapi/) are automatically generated and provide more detailed information for each 
minor feature, including all fields and options.
`````

## File: pulp-docs/pulp_python/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 3.16.0 (2025-06-10) {: #3.16.0 }

#### Features {: #3.16.0-feature }

- Added support for on-demand content to `repair_metadata` endpoint.
  [#849](https://github.com/pulp/pulp_python/issues/849)

#### Bugfixes {: #3.16.0-bugfix }

- Fixed pull-through caching not working for indexes that use relative URLs.
  [#842](https://github.com/pulp/pulp_python/issues/842)

---

## 3.15.1 (2025-06-10) {: #3.15.1 }

#### Bugfixes {: #3.15.1-bugfix }

- Fixed pull-through caching not working for indexes that use relative URLs.
  [#842](https://github.com/pulp/pulp_python/issues/842)

---

## 3.15.0 (2025-05-13) {: #3.15.0 }

#### Features {: #3.15.0-feature }

- Added new `repair_metadata` endpoint to `Repository` for fixing packages' metadata.
  [#805](https://github.com/pulp/pulp_python/issues/805)

---

## 3.14.0 (2025-04-10) {: #3.14.0 }

#### Features {: #3.14.0-feature }

- Pull-through caching now respects the include/exclude filters on the upstream remote.
  [#706](https://github.com/pulp/pulp_python/issues/706)
- Added support for automatically saving pull-through content to a repository.
  Requires pulpcore 3.74 or later.
  [#815](https://github.com/pulp/pulp_python/issues/815)

#### Bugfixes {: #3.14.0-bugfix }

- Fixed a proxy sync regression introduced in 3.13.0.

#### Misc {: #3.14.0-misc }

- [#809](https://github.com/pulp/pulp_python/issues/809)

---

## 3.13.5 (2025-04-23) {: #3.13.5 }

No significant changes.

---

## 3.13.4 (2025-04-10) {: #3.13.4 }

#### Misc {: #3.13.4-misc }

- [#809](https://github.com/pulp/pulp_python/issues/809)

---

## 3.13.3 (2025-04-07) {: #3.13.3 }

#### Bugfixes {: #3.13.3-bugfix }

- Fixed a proxy sync regression introduced in 3.13.0.

---

## 3.13.2 (2025-02-20) {: #3.13.2 }

#### Misc {: #3.13.2-misc }

- 

---

## 3.13.1 (2025-02-11) {: #3.13.1 }

No significant changes.

---

## 3.13.0 (2025-02-05) {: #3.13.0 }

#### Features {: #3.13.0-feature }

- Added pulpcore 3.70 compatibility

#### Bugfixes {: #3.13.0-bugfix }

- Fixed uploads not supporting packages using metadata spec 2.3
  [#682](https://github.com/pulp/pulp_python/issues/682)
- Fixed the `package_types` filter breaking other remote filters.
  [#691](https://github.com/pulp/pulp_python/issues/691)
- Fixed package name normalization issue preventing syncing packages with "." or "_" in their names.
  [#716](https://github.com/pulp/pulp_python/issues/716)
- Fixed replicate failing on upstream on-demand repositories
  [#718](https://github.com/pulp/pulp_python/issues/718)
- Fixed `requires_python` field not being properly set on package upload.

  Run the new `pulpcore-manager repair-python-metadata` command with repositories containing affected
  packages to repair their metadata.
  [#773](https://github.com/pulp/pulp_python/issues/773)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

#### Misc {: #3.13.0-misc }

- [#774](https://github.com/pulp/pulp_python/issues/774)

---

## 3.12.6 (2025-02-26) {: #3.12.6 }

#### Misc {: #3.12.6-misc }

- 

---

## 3.12.5 (2024-10-25) {: #3.12.5 }

#### Bugfixes {: #3.12.5-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

---

## 3.12.4 (2024-10-14) {: #3.12.4 }

#### Bugfixes {: #3.12.4-bugfix }

- Fixed replicate failing on upstream on-demand repositories
  [#718](https://github.com/pulp/pulp_python/issues/718)

---

## 3.12.3 (2024-08-26) {: #3.12.3 }

#### Bugfixes {: #3.12.3-bugfix }

- Fixed uploads not supporting packages using metadata spec 2.3
  [#682](https://github.com/pulp/pulp_python/issues/682)

---

## 3.12.2 (2024-08-21) {: #3.12.2 }

#### Bugfixes {: #3.12.2-bugfix }

- Fixed package name normalization issue preventing syncing packages with "." or "_" in their names.
  [#716](https://github.com/pulp/pulp_python/issues/716)

---

## 3.12.1 (2024-06-27) {: #3.12.1 }

#### Bugfixes {: #3.12.1-bugfix }

- Fixed the `package_types` filter breaking other remote filters.
  [#691](https://github.com/pulp/pulp_python/issues/691)

---

## 3.12.0 (2024-06-25) {: #3.12.0 }

#### Features {: #3.12.0-feature }

- Added RBAC support.
  [#399](https://github.com/pulp/pulp_python/issues/399)
- Added Pulp replication support for Python distributions.
  [#648](https://github.com/pulp/pulp_python/issues/648)
- Added Domain support.
  [#668](https://github.com/pulp/pulp_python/issues/668)

#### Bugfixes {: #3.12.0-bugfix }

- Fixed tls_validation not being disabled when set to false on the remote.
  [#653](https://github.com/pulp/pulp_python/issues/653)

#### Deprecations and Removals {: #3.12.0-removal }

- Raised the minimum `pulpcore` bound to `>=3.49` and dropped support for `python 3.8`.
  [#pulpcore](https://github.com/pulp/pulp_python/issues/pulpcore)

#### Misc {: #3.12.0-misc }

- 

---

## 3.11.5 (2025-04-15) {: #3.11.5 }

No significant changes.

---

## 3.11.4 (2025-02-20) {: #3.11.4 }

#### Bugfixes {: #3.11.4-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

#### Misc {: #3.11.4-misc }

- 

---

## 3.11.3 (2024-08-21) {: #3.11.3 }

#### Bugfixes {: #3.11.3-bugfix }

- Fixed uploads not supporting packages using metadata spec 2.3
  [#682](https://github.com/pulp/pulp_python/issues/682)
- Fixed package name normalization issue preventing syncing packages with "." or "_" in their names.
  [#716](https://github.com/pulp/pulp_python/issues/716)

---

## 3.11.2 (2024-06-27) {: #3.11.2 }

#### Bugfixes {: #3.11.2-bugfix }

- Fixed the `package_types` filter breaking other remote filters.
  [#691](https://github.com/pulp/pulp_python/issues/691)

---

## 3.11.1 (2024-04-11) {: #3.11.1 }

### Bugfixes

-   Fixed tls_validation not being disabled when set to false on the remote.
    [#653](https://github.com/pulp/pulp_python/issues/653)

---

## 3.11.0 (2023-11-08) {: #3.11.0 }

### Features

-   Added pulpcore 3.40 compatibility.
-   Added import export support of python content.
    [#579](https://github.com/pulp/pulp_python/issues/579)

---

## 3.10.0 (2023-05-17) {: #3.10.0 }

### Features

-   Added compatibility for pulpcore 3.25, pulpcore support is now >=3.25,<3.40.
    [#605](https://github.com/pulp/pulp_python/issues/605)

---

## 3.9.0 (2023-03-17) {: #3.9.0 }

### Features

-   Added version filter to package list endpoint.
    [#577](https://github.com/pulp/pulp_python/issues/577)
-   Allow duplicate uploads to return existing packages instead of erring.
    [#590](https://github.com/pulp/pulp_python/issues/590)

### Bugfixes

-   Fixed pull-through caching ignoring remote proxy settings.
    [#553](https://github.com/pulp/pulp_python/issues/553)
-   Changed includes and excludes openapi schema to report as array of strings instead of object.
    [#576](https://github.com/pulp/pulp_python/issues/576)
-   Fixed syncing ignoring remote proxy.
    [#581](https://github.com/pulp/pulp_python/issues/581)
-   Fixed duplicate operationID for generated PyPI simple endpoints schema.
    [#594](https://github.com/pulp/pulp_python/issues/594)

---

## 3.8.0 (2022-12-19) {: #3.8.0 }

### Bugfixes

-   Fixed syncing failing when using bandersnatch 5.3.0
    [#554](https://github.com/pulp/pulp_python/issues/554)
-   Prevent .netrc file from being read on syncs.
    [#566](https://github.com/pulp/pulp_python/issues/566)
-   Fix 500 error when pip installing using object storage.
    [#572](https://github.com/pulp/pulp_python/issues/572)

### Improved Documentation

-   Documented `pulp_python` specific settings.
    [#571](https://github.com/pulp/pulp_python/issues/571)

---

## 3.7.3 (2022-10-06) {: #3.7.3 }

### Bugfixes

-   Prevent .netrc file from being read on syncs.
    [#566](https://github.com/pulp/pulp_python/issues/566)

---

## 3.7.2 (2022-08-04) {: #3.7.2 }

### Bugfixes

-   Fixed syncing failing when using bandersnatch 5.3.0
    [#554](https://github.com/pulp/pulp_python/issues/554)

---

## 3.7.1 (2022-06-29) {: #3.7.1 }

No significant changes.

---

## 3.7.0 (2022-06-22) {: #3.7.0 }

### Features

-   Added ability to fully sync repositories that don't support the PyPI XMLRPC endpoints. Full Pulp-to-Pulp syncing is now available.
    [#462](https://github.com/pulp/pulp_python/issues/462)

### Bugfixes

-   Ensured temporary package uploads are written to worker's directory instead of /tmp.
    [#505](https://github.com/pulp/pulp_python/issues/505)

### Misc

-   [#503](https://github.com/pulp/pulp_python/issues/503)

---

## 3.6.1 (2022-08-19) {: #3.6.1 }

### Bugfixes

-   Fixed syncing failing when using bandersnatch 5.3.0
    [#554](https://github.com/pulp/pulp_python/issues/554)

---

## 3.6.0 (2021-12-15) {: #3.6.0 }

### Features

-   `pulp_python` now supports pull-through caching. Add a remote to a distribution to enable this feature.
    [#381](https://github.com/pulp/pulp_python/issues/381)
-   Enable Azure support
    [#458](https://github.com/pulp/pulp_python/issues/458)

### Bugfixes

-   Fixed proxy url not being passed during sync
    [#433](https://github.com/pulp/pulp_python/issues/433)
-   Changed the use of `dispatch` to match the signature from pulpcore>=3.15.
    [#443](https://github.com/pulp/pulp_python/issues/443)
-   Fixed package name normalization issue preventing installing packages with "." or "_" in their names.
    [#467](https://github.com/pulp/pulp_python/issues/467)

---

## 3.5.2 (2021-10-05) {: #3.5.2 }

### Bugfixes

-   Fixed proxy url not being passed during sync
    (backported from #445)
    [#436](https://github.com/pulp/pulp_python/issues/436)
-   Changed the use of `dispatch` to match the signature from pulpcore>=3.15.
    (backported from #443)
    [#446](https://github.com/pulp/pulp_python/issues/446)

---

## 3.5.1 (2021-09-10) {: #3.5.1 }

### Bugfixes

-   Fixed proxy url not being passed during sync
    (backported from #433)
    [#436](https://github.com/pulp/pulp_python/issues/436)

---

## 3.5.0 (2021-08-30) {: #3.5.0 }

### Features

-   Python package content can now be filtered by their sha256
    [#404](https://github.com/pulp/pulp_python/issues/404)
-   Added new setting `PYPI_API_HOSTNAME` that is used to form a distribution's `base_url`. Defaults to the machine's FQDN.
    [#412](https://github.com/pulp/pulp_python/issues/412)
-   Enabled reclaim disk feature provided by pulpcore 3.15+.
    [#425](https://github.com/pulp/pulp_python/issues/425)

### Bugfixes

-   Fixed twine upload failing when using remote storage backends
    [#400](https://github.com/pulp/pulp_python/issues/400)
-   Fixed improper metadata serving when using publications with S3 storage
    [#413](https://github.com/pulp/pulp_python/issues/413)

### Deprecations and Removals

-   Dropped support for Python < 3.8.
    [#402](https://github.com/pulp/pulp_python/issues/402)

### Misc

-   [#408](https://github.com/pulp/pulp_python/issues/408), [#427](https://github.com/pulp/pulp_python/issues/427)

---

## 3.4.1 (2021-08-24) {: #3.4.1 }

### Features

-   Python package content can now be filtered by their sha256
    (backported from #404)
    [#419](https://github.com/pulp/pulp_python/issues/419)

### Bugfixes

-   Fixed improper metadata serving when using publications with S3 storage
    (backported from #413)
    [#418](https://github.com/pulp/pulp_python/issues/418)
-   Fixed twine upload failing when using remote storage backends
    (backported from #400)
    [#420](https://github.com/pulp/pulp_python/issues/420)

---

## 3.4.0 (2021-06-17) {: #3.4.0 }

### Features

-   Added `twine` (and other similar Python tools) package upload support
    [#342](https://github.com/pulp/pulp_python/issues/342)
-   PyPI endpoints are now available at `/pypi/{base_path}/`
    [#376](https://github.com/pulp/pulp_python/issues/376)
-   Changed the global uniqueness constraint for `PythonPackageContent` to its sha256 digest
    [#380](https://github.com/pulp/pulp_python/issues/380)

### Bugfixes

-   Added missing fields to PyPI live JSON API to be compliant with core metadata version 2.1
    [#352](https://github.com/pulp/pulp_python/issues/352)
-   Fixed sync to use default concurrency (10) when download_concurrency was not specified
    [#391](https://github.com/pulp/pulp_python/issues/391)

---

## 3.3.0 (2021-05-27) {: #3.3.0 }

### Features

-   Add support for automatic publishing and distributing.
    [#365](https://github.com/pulp/pulp_python/issues/365)

### Bugfixes

-   Fixed publications publishing more content than was in the repository
    [#362](https://github.com/pulp/pulp_python/issues/362)

### Improved Documentation

-   Update syntax in doc for cli repository content add command
    [#368](https://github.com/pulp/pulp_python/issues/368)

### Misc

-   [#347](https://github.com/pulp/pulp_python/issues/347), [#360](https://github.com/pulp/pulp_python/issues/360), [#371](https://github.com/pulp/pulp_python/issues/371)

---

## 3.2.0 (2021-04-14) {: #3.2.0 }

### Features

-   Added new sync filter keep_latest_packages to specify how many latest versions of packages to sync
    [#339](https://github.com/pulp/pulp_python/issues/339)
-   Added new sync filters package_types and exclude_platforms to specify package types to sync
    [#341](https://github.com/pulp/pulp_python/issues/341)

### Misc

-   [#354](https://github.com/pulp/pulp_python/issues/354)

---

## 3.1.0 (2021-03-12) {: #3.1.0 }

### Features

-   Python content can now be filtered by requires_python
    [#3629](https://pulp.plan.io/issues/3629)

### Improved Documentation

-   Updated workflows to use Pulp CLI commands
    [#8364](https://pulp.plan.io/issues/8364)

---

## 3.0.0 (2021-01-12) {: #3.0.0 }

### Bugfixes

-   Remote proxy settings are now passed to Bandersnatch while syncing
    [#7864](https://pulp.plan.io/issues/7864)

### Improved Documentation

-   Added bullet list of Python Plugin features and a tech preview page for new experimental features
    [#7628](https://pulp.plan.io/issues/7628)

---

## 3.0.0b12 (2020-11-05)

### Features

-   Pulp Python can now fully mirror all packages from PyPi
    [#985](https://pulp.plan.io/issues/985)
-   Implemented PyPi's json API at content endpoint '/pypi/{package-name}/json'. Pulp can now perform basic syncing on other Pulp Python instances.
    [#2886](https://pulp.plan.io/issues/2886)
-   Pulp Python now uses Bandersnatch to perform syncing and filtering of package metadata
    [#6930](https://pulp.plan.io/issues/6930)

### Bugfixes

-   Sync now includes python package's classifiers in the content unit
    [#3627](https://pulp.plan.io/issues/3627)
-   Policy can now be specified when creating a remote from a Bandersnatch config
    [#7331](https://pulp.plan.io/issues/7331)
-   Includes/excludes/prereleases fields are now properly set in a remote from Bandersnatch config
    [#7392](https://pulp.plan.io/issues/7392)

### Improved Documentation

-   Fixed makemigrations commands in the install docs
    [#5386](https://pulp.plan.io/issues/5386)

### Misc

-   [#6875](https://pulp.plan.io/issues/6875), [#7401](https://pulp.plan.io/issues/7401)

---

## 3.0.0b11 (2020-08-18)

Compatibility update for pulpcore 3.6

---

## 3.0.0b10 (2020-08-05)

### Features

-   Added a new endpoint to remotes "/from_bandersnatch" that allows for Python remote creation from a Bandersnatch config file.
    [#6929](https://pulp.plan.io/issues/6929)

### Bugfixes

-   Including requirements.txt on MANIFEST.in
    [#6891](https://pulp.plan.io/issues/6891)
-   Updating API to not return publications that aren't complete.
    [#6987](https://pulp.plan.io/issues/6987)
-   Fixed an issue that prevented 'on_demand' content from being published.
    [#7128](https://pulp.plan.io/issues/7128)

### Improved Documentation

-   Change the commands for publication and distribution on the publish workflow to use their respective scripts already defined in _scripts.
    [#6877](https://pulp.plan.io/issues/6877)
-   Updated sync.sh, publication.sh and distribution.sh in docs/_scripts to reference wait_until_task_finished function from base.sh
    [#6918](https://pulp.plan.io/issues/6918)

---

## 3.0.0b9 (2020-06-01)

### Features

-   Add upload functionality to the python contents endpoints.
    [#5464](https://pulp.plan.io/issues/5464)

### Bugfixes

-   Fixed the 500 error returned by the OpenAPI schema endpoint.
    [#5452](https://pulp.plan.io/issues/5452)

### Improved Documentation

-   Change the prefix of Pulp services from pulp-* to pulpcore-*
    [#4554](https://pulp.plan.io/issues/4554)
-   Added "python/python/" to fix two commands in repo.sh, fixed export command in sync.sh
    [#6790](https://pulp.plan.io/issues/6790)
-   ﻿Added "index.html" to the relative_path field for both project_metadata and index_metadata. Added a "/" to fix the link in the simple_index_template.
    [#6792](https://pulp.plan.io/issues/6792)
-   Updated the workflow documentation for upload.html. Fixed the workflow commands and added more details to the instructions.
    [#6854](https://pulp.plan.io/issues/6854)

### Deprecations and Removals

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)

-   Remove "_" from _versions_href, _latest_version_href
    [#5548](https://pulp.plan.io/issues/5548)

-   Removing base field: _type .
    [#5550](https://pulp.plan.io/issues/5550)

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting python repositories is now performed on /pulp/api/v3/python/python/ instead of /pulp/api/v3/repositories/. Only python content can be present in a python repository, and only a python repository can hold python content.
    [#5625](https://pulp.plan.io/issues/5625)

### Misc

-   [#remotetests](https://pulp.plan.io/issues/remotetests), [#4681](https://pulp.plan.io/issues/4681), [#4682](https://pulp.plan.io/issues/4682), [#5304](https://pulp.plan.io/issues/5304), [#5471](https://pulp.plan.io/issues/5471), [#5580](https://pulp.plan.io/issues/5580), [#5701](https://pulp.plan.io/issues/5701)

---

## 3.0.0b8 (2019-09-16)

### Misc

-   [#4681](https://pulp.plan.io/issues/4681)

---

## 3.0.0b7 (2019-08-01)

### Features

-   Users can upload a file to create content and optionally add to a repo in one step known as
    one-shot upload
    [#4396](https://pulp.plan.io/issues/4396)
-   Override the Remote's serializer to allow policy='on_demand' and policy='streamed'.
    [#4990](https://pulp.plan.io/issues/4990)

### Improved Documentation

-   Switch to using [towncrier](https://github.com/hawkowl/towncrier) for better release notes.
    [#4875](https://pulp.plan.io/issues/4875)

---
`````

## File: pulp-docs/pulp_python/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://docs.pulpproject.org/contributing/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulp_python/README.md
`````markdown
# pulp_python

[![PyPI](https://img.shields.io/pypi/v/pulp_python.svg)](https://pypi.python.org/pypi/pulp_python)
[![Pulp Nightly CI/CD](https://github.com/pulp/pulp_python/actions/workflows/nightly.yml/badge.svg)](https://github.com/pulp/pulp_python/actions/workflows/nightly.yml)

A Pulp plugin to support hosting your own pip compatible Python packages.

For more information, please see the [documentation](https://docs.pulpproject.org/pulp_python/) or the
[Pulp project page](https://pulpproject.org).
`````

## File: pulp-docs/pulp_python/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_python' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_python/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_python/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_python/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_python/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp_rpm/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp_rpm/docs/admin/guides/add-signing-services.md
`````markdown
# Register Signing Services

Create a `SigningService` for signing RPM metadata (`repomd.xml`) or RPM Packages.

## Metadata Signing

RPM metadata signing uses detached signature, which is already provided by pulpcore.
To register such a service, follow the general instructions [in pulpcore](site:pulpcore/docs/admin/guides/sign-metadata/).

## Package Signing

!!! tip "New in 3.26.0 (Tech Preview)"

Package signing is not detached as metadata signing, so it uses a different type of `SigningService`.
Nevertheless, the process of registering is very similar.

### Pre-Requisites

- Get familiar with the general SigningService registration [here](site:pulpcore/docs/admin/guides/sign-metadata/).

### Instructions

1. Create a signing script capable of signing an RPM Package.
    - The script receives a file path as its first argument.
    - The script should return a json-formatted output. No signature is required, since its embedded.
      ```json
      {"file": "filename"}
      ```
1. Register it with `pulpcore-manager add-signing-service`.
    - The `--class` should be `rpm:RpmPackageSigningService`.
    - The key provided here serves only for validating the script.
      The signing fingerprint is provided dynamically, as [on upload signing](site:pulp_rpm/docs/user/guides/sign-packages/#on-upload).
1. Retrieve the signing service for usage.

### Example

Write a signing script.
The following example is roughly what we use for testing.

```bash title="package-signing-script.sh"
#!/usr/bin/env bash

# Input provided to the script
FILE_PATH=$1
FINGERPRINT="${PULP_SIGNING_KEY_FINGERPRINT}"

# Specific signing logic
GPG_HOME=${HOME}/.gnupg
GPG_BIN=/usr/bin/gpg
rpm \
    --define "_signature gpg" \
    --define "_gpg_path ${GPG_HOME}" \
    --define "_gpg_name ${FINGERPRINT}" \
    --define "_gpgbin ${GPG_BIN}" \
    --addsign "${FILE_PATH}" 1> /dev/null

# Output
STATUS=$?
if [[ ${STATUS} -eq 0 ]]; then
   echo {\"rpm_package\": \"${FILE_PATH}\"}
else
   exit ${STATUS}
fi
```

Register the signing service and retrieve information about it.

```bash
pulpcore-manager add-signing-service \
  "SimpleRpmSigningService" \
  ${SCRIPT_ABS_FILENAME} \
  ${KEYID} \
  --class "rpm:RpmPackageSigningService"

pulp signing-service show --name "SimpleRpmSigningService"
```
`````

## File: pulp-docs/pulp_rpm/docs/admin/guides/rbac.md
`````markdown
# Configure Role Based Access Control

!!! warning
    This feature is a Tech Preview and may be subject to change.


!!! note
    User `admin` automatically gets all RBAC permissions.


RPM plugin presents Role Based Access for these endpoints :

- RPM Alternate Content Source (`/pulp/api/v3/acs/rpm/rpm/`)
- RPM Distributions (`/pulp/api/v3/distributions/rpm/rpm/`)
- RPM Publications (`/pulp/api/v3/publications/rpm/rpm/`)
- RPM Remotes (`/pulp/api/v3/remotes/rpm/rpm/` and `/pulp/api/v3/remotes/rpm/uln`)
- RPM Repository (`/pulp/api/v3/repositories/rpm/rpm/`)
- RPM Copy (`/pulp/api/v3/rpm/copy/`)

!!! note
    Content is secured too, but the only condition right now is the authenticated user.


## Default Roles

RPM plugin ships a few default roles described bellow.

### Viewer Role

This role contains only `view` permission for an endpoint. Using this permission you can control who can
view specific content for example a repository.

=== "Check a Role"

    ```shell
     pulp role show --name "rpm.rpmremote_viewer"
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/roles/62baf888-09c2-4c18-8d3a-354d9c6bdb48/",
      "pulp_created": "2022-04-07T12:41:11.065567Z",
      "name": "rpm.rpmremote_viewer",
      "description": null,
      "permissions": [
        "rpm.view_rpmremote"
      ],
      "locked": true
    }
    ```

### Creator Role

This role contains only `add` permission for a specific endpoint to allow a user to create a new object of its type.
Be aware that you may need additional permission to create a new object.
For example, `rpm.rpmrepository_view` is needed for a used repository to create a new publication.

```json title="Example of the requested condition to create an RPM Publication"
 {
     "action": ["create"],
     "principal": "authenticated",
     "effect": "allow",
     "condition": [
         "has_model_perms:rpm.add_rpmpublication",
         "has_repo_attr_model_or_obj_perms:rpm.view_rpmrepository",
     ]
 }
```

### Owner Role

This role contains all permissions needed for manipulating objects, such as modifying or removing them.
This role also contains permission to manage role assignments on the object,
for example, adding or removing user roles.

By default, the user who created a new object will receive this role.

```json title="Example of the RPM Remote owner role"
 {
   "pulp_href": "/pulp/api/v3/roles/592356da-8cdf-4a1b-a434-3f10cda285f7/",
   "pulp_created": "2022-04-07T12:41:11.047168Z",
   "name": "rpm.rpmremote_owner",
   "description": null,
   "permissions": [
     "rpm.change_rpmremote",
     "rpm.delete_rpmremote",
     "rpm.manage_roles_rpmremote",
     "rpm.view_rpmremote"
   ],
   "locked": true
 }
```

## RPM specific Roles

Also, the RPM plugin ships two roles to use.

### RPM Admin Role (rpm.admin)

This role is like a pulp admin but only for the RPM plugin -
it can perform any RPM workflow with no restrictions. If you need a more
specific admin role as a repo maintainer, you need to combine
permissions on your own. More in the `Creating Roles` section.

```json title="rpm.admin role"
 {
   "pulp_href": "/pulp/api/v3/roles/08d16dda-038b-4fbb-b3fc-acb081111e6a/",
   "pulp_created": "2022-04-07T12:41:11.129526Z",
   "name": "rpm.admin",
   "description": null,
   "permissions": [
      "rpm.add_rpmalternatecontentsource",
      "rpm.add_rpmdistribution",
      "rpm.add_rpmpublication",
      "rpm.add_rpmremote",
      "rpm.add_rpmrepository",
      "rpm.add_ulnremote",
      "rpm.change_rpmalternatecontentsource",
      "rpm.change_rpmdistribution",
      "rpm.change_rpmremote",
      "rpm.change_rpmrepository",
      "rpm.change_ulnremote",
      "rpm.delete_rpmalternatecontentsource",
      "rpm.delete_rpmdistribution",
      "rpm.delete_rpmpublication",
      "rpm.delete_rpmremote",
      "rpm.delete_rpmrepository",
      "rpm.delete_rpmrepository_version",
      "rpm.delete_ulnremote",
      "rpm.manage_roles_rpmalternatecontentsource",
      "rpm.manage_roles_rpmdistribution",
      "rpm.manage_roles_rpmpublication",
      "rpm.manage_roles_rpmremote",
      "rpm.manage_roles_rpmrepository",
      "rpm.manage_roles_ulnremote",
      "rpm.modify_content_rpmrepository",
      "rpm.refresh_rpmalternatecontentsource",
      "rpm.repair_rpmrepository",
      "rpm.sync_rpmrepository",
      "rpm.view_rpmalternatecontentsource",
      "rpm.view_rpmdistribution",
      "rpm.view_rpmpublication",
      "rpm.view_rpmremote",
      "rpm.view_rpmrepository",
      "rpm.view_ulnremote",
   ],
   "locked": true
 }
```

!!! note
    Please note there are two types of Remotes with their individual permissions.


### RPM Viewer Role (rpm.viewer)

A universal role allows you to view all content within the RPM plugin.

```json title="Universal RPM viewer role"
 {
   "pulp_href": "/pulp/api/v3/roles/d1e7bae0-2363-45e2-815c-d721ecc3133c/",
   "pulp_created": "2022-04-07T12:41:11.144883Z",
   "name": "rpm.viewer",
   "description": null,
   "permissions": [
     "rpm.view_rpmalternatecontentsource",
     "rpm.view_rpmdistribution",
     "rpm.view_rpmpublication",
     "rpm.view_rpmremote",
     "rpm.view_rpmrepository",
     "rpm.view_ulnremote",
   ],
   "locked": true
 }
```

#### Content and RepositoryVersions Permissions

RPM Content and RepositoryVersions are unique as they do not have any default roles on their
viewsets. Content's access policy allows any authenticated user to create content, however
they must specify the repository to upload to since viewing content is scoped by the repositories
the user has permission for. RepositoryVersions' access policy requires the user to have
permissions on the parent repository in order to perform actions on the repository version. Both
objects have CRD permissions in the database that can be assigned to users, but currently their
access policies do not use them for authorization.

## Creating Roles

!!! note
    Roles shipped by the RPM plugin mentioned above are locked and cannot be modified or removed.


To create a new role, you need to specify its name and permissions to use.
To find out which permissions you need for a new role, you can list an endpoints policy with the following command:

=== "List endpoint access-policies"

    ```shell
     pulp access-policy show --viewset-name "repositories/rpm/rpm"
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/access_policies/dae50330-83b5-4ab0-b74f-f54e1d2cbf29/",
      "pulp_created": "2022-04-25T15:27:48.556140Z",
      "permissions_assignment": [
        {
          "function": "add_roles_for_object_creator",
          "parameters": {
            "roles": "rpm.rpmrepository_owner"
          }
        }
      ],
      "creation_hooks": [
        {
          "function": "add_roles_for_object_creator",
          "parameters": {
            "roles": "rpm.rpmrepository_owner"
          }
        }
      ],
      "statements": [
        {
          "action": [
            "list",
            "my_permissions"
          ],
          "effect": "allow",
          "principal": [
            "authenticated"
          ]
        },
        {
          "action": [
            "retrieve"
          ],
          "effect": "allow",
          "condition": "has_model_or_obj_perms:rpm.view_rpmrepository",
          "principal": "authenticated"
        },
        {
          "action": [
            "create"
          ],
          "effect": "allow",
          "condition": [
            "has_remote_param_model_or_obj_perms:rpm.view_rpmremote",
            "has_model_perms:rpm.add_rpmrepository"
          ],
          "principal": "authenticated"
        },
        {
          "action": [
            "update",
            "partial_update"
          ],
          "effect": "allow",
          "condition": [
            "has_model_or_obj_perms:rpm.change_rpmrepository",
            "has_model_or_obj_perms:rpm.view_rpmrepository",
            "has_remote_param_model_or_obj_perms:rpm.view_rpmremote"
          ],
          "principal": "authenticated"
        },
        {
          "action": [
            "modify"
          ],
          "effect": "allow",
          "condition": [
            "has_model_or_obj_perms:rpm.modify_content_rpmrepository",
            "has_model_or_obj_perms:rpm.view_rpmrepository"
          ],
          "principal": "authenticated"
        },
        {
          "action": [
            "destroy"
          ],
          "effect": "allow",
          "condition": [
            "has_model_or_obj_perms:rpm.delete_rpmrepository",
            "has_model_or_obj_perms:rpm.view_rpmrepository"
          ],
          "principal": "authenticated"
        },
        {
          "action": [
            "sync"
          ],
          "effect": "allow",
          "condition": [
            "has_model_or_obj_perms:rpm.sync_rpmrepository",
            "has_model_or_obj_perms:rpm.view_rpmrepository",
            "has_remote_param_model_or_obj_perms:rpm.view_rpmremote"
          ],
          "principal": "authenticated"
        },
        {
          "action": [
            "list_roles",
            "add_role",
            "remove_role"
          ],
          "effect": "allow",
          "condition": "has_model_or_obj_perms:rpm.manage_roles_rpmrepository",
          "principal": "authenticated"
        }
      ],
      "viewset_name": "repositories/rpm/rpm",
      "customized": false
    }
    ```

**Example 1: RPM Repository Creator**

```shell title="Example of the RPM repository creator role"
 pulp role create --name "rpm_repo_creator" \
     --permission "rpm.add_rpmrepository" \
     --permission "rpm.view_rpmrepository" \
     --permission "rpm.sync_rpmrepository" \
     --permission "rpm.modify_rpmrepository" \
     --permission "rpm.change_rpmrepository" \
     --permission "rpm.delete_rpmrepository" \
     --permission "rpm.add_rpmremote" \
     --permission "rpm.change_rpmremote" \
     --permission "rpm.delete_rpmremote" \
     --permission "rpm.view_rpmremote"
```

**Example 2: RPM Publisher**

```shell title="Example of the RPM publisher role"
 pulp role create --name "rpm_publisher" \
     --permission "rpm.view_rpmrepository" \
     --permission "rpm.add_rpmpublication" \
     --permission "rpm.add_rpmdistribution"
```

```shell title="Globally assign these roles to user"
 pulp user role-assignment add --username "bob" --role "rpm_repo_creator" --object ""
 pulp user role-assignment add --username "jack" --role "rpm_publisher" --object ""
```

!!! note
    You can only assign roles at the object level if the role contains at least one permission applicable for that object.


## Edit Access Policy

It is possible to edit the `access policy` for an endpoint.

```shell title="Change the access policy of all actions not requiring any permission."
pulp access-policy update \
     --viewset-name "remotes/rpm/rpm" \
     --statements '[{"action": ["list", "retrieve"], "effect": "allow"}, {"action": "*", "effect": "allow"}]'
```

!!! warning
    When editing access policies, you must specify all the endpoint actions, or their usage will lead to failure.


You can modify `creation-hooks` to specify what will happen after object creation.
By default, a user will receive the `owner` role.

```shell title="Update creation hook of a repository to creator gets another role than `repository_owner`"
pulp access-policy update --viewset-name "repositories/rpm/rpm" \
     --creation-hooks '[{"function": "add_roles", "parameters": {"roles": "rpm_viewer"}}]'
```

Of course, you can reset the access policy back to the default with the command:

```shell
pulp access-policy reset --viewset-name "repositories/rpm/rpm"
```
`````

## File: pulp-docs/pulp_rpm/docs/admin/reference/settings.md
`````markdown
# Settings

pulp_rpm adds configuration options to the those offered by pulpcore.

## KEEP_CHANGELOG_LIMIT

This setting controls how many changelog entries (from the most recent ones) should
be kept for each RPM package synced or uploaded into Pulp. The limit is enacted to
avoid metadata bloat, as it can \_significantly\_ reduce the amount of space needed
to store metadata, the amount of bandwidth needed to download it, and the amount of
time needed to create it.

The changelog metadata is used for the `dnf changelog` command, which can display the
changelogs of a package even if it is not installed on the system. This setting
therefore controls the maximum number of changelogs that can be viewed on clients
using Pulp-hosted repositories using this command. Note, however, that for installed
packages the `rpm -qa --changelog` command can show all available changelogs for that
package without limitation.

10 was selected as the default because it is a good compromise between utility and
efficiency - and because it is the value used by Fedora, CentOS, OpenSUSE, and others.

## ALLOW_AUTOMATIC_UNSAFE_ADVISORY_CONFLICT_RESOLUTION

This setting controls whether or not pulp_rpm will block advisory sync or
upload if it appears an 'incoming' advisory is incompatible with an existing
advisory with the same name.

This defaults to False, and advisory-merge will raise an `AdvisoryConflict`
exception in two scenarios:

- Situation 1
  
    Updated date and version are the same but pkglists differ (and one is not a subset
    or superset of the other).  E.g. It's likely a mistake in one of the pkglists.

- Situation 2

    Updated dates are different but pkglists have no intersection at all. E.g. It's
    either an attempt to combine content from incompatible repos (RHEL6-main and RHEL7
    debuginfo), or someone created a completely different advisory with already used id.

If this setting is True, Pulp will merge the advisories in Situation 1, and simply
accept the new advisory in Situation 2.

If the setting is False, then the merge is rejected until the user has examined the
conflicting advisories and addressed the problem.

Addressing the problem manually could take a number of forms. Examples include
(but are not limited to):

- remove the existing advisory from the destination repository
- choose not to sync from the offending remote
- evaluate the command and choose not to combine conflicting repositories (e.g. RHEL6-main and RHEL7-debuginfo)

!!! note
    This approach to conflict-resolution is done **AT YOUR OWN RISK**.
    Pulp cannot guarantee the usability/usefulness of the resulting advisory.


## RPM_METADATA_USE_REPO_PACKAGE_TIME

When publishing RPM metadata, if this is true, Pulp will use the timestamp that the package was
added to the repo rather than the timestamp that the package first appeared in Pulp. This timestamp
appears in the "file" field of the time element for each package in primary.xml. Defaults to
`False`.
`````

## File: pulp-docs/pulp_rpm/docs/admin/index.md
`````markdown
# Welcome to Pulp RPM for admins!

Here you'll find information about RPM-specific admin workflows.

If you just got here, consider following the top [Admin Manual](site:pulpcore/#admin) links, as it provides the common ground for setting up and configuring your Pulp deployment.

You may also find useful to have a look at [RPM specific Pulp settings](site:pulp_rpm/docs/admin/reference/settings/).
`````

## File: pulp-docs/pulp_rpm/docs/dev/guides/bindings.md
`````markdown
# Client Bindings

## Python Client

The [pulp-rpm-client package](https://pypi.org/project/pulp-rpm-client/) on PyPI provides
bindings for all API calls in the [pulp_rpm API documentation](site:pulp_rpm/restapi/). It is
currently published daily and with every RC.

The [pulpcore-client package](https://pypi.org/project/pulpcore-client/) on PyPI provides bindings
for all API calls in the [pulpcore API documentation](site:pulpcore/restapi/).
It is currently published daily and with every RC.

## Ruby Client

The [pulp_rpm_client Ruby Gem](https://rubygems.org/gems/pulp_rpm_client) on rubygems.org
provides bindings for all API calls in the [pulp_rpm API documentation](site:pulp_rpm/restapi/). It
is currently published daily and with every RC.

The [pulpcore_client Ruby Gem](https://rubygems.org/gems/pulpcore_client) on rubygems.org provides
bindings for all API calls in the [pulpcore API documentation](site:pulpcore/restapi/). It is currently published daily and with every RC.

## Client in a language of your choice

A client can be generated using Pulp's OpenAPI schema and any of the available [generators](https://openapi-generator.tech/docs/generators.html).

Generating a client is a two step process:

**1) Download the OpenAPI schema for pulpcore and all installed plugins:**

```bash
curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json
```

The OpenAPI schema for a specific plugin can be downloaded by specifying the plugin's module name
as a GET parameter. For example for `pulp_rpm` only endpoints use a query like this:

```bash
curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json?plugin=pulp_rpm
```

**2) Generate a client using openapi-generator.**

The schema can then be used as input to the openapi-generator-cli. The documentation on getting
started with openapi-generator-cli is available on
[openapi-generator.tech](https://openapi-generator.tech/#try).

## Generating a client for a dev environment

The pulp dev environment provided by [pulp_installer](https://github.com/pulp/pulp_installer)
introduces a set of useful
[aliases](https://github.com/pulp/pulp_installer/tree/main/roles/pulp-devel#aliases),
such as `pbindings`.

Examples:

- generating python bindings for pulp_rpm:

```bash
pbindings pulp_rpm python
```

- generating ruby bindings for pulp_rpm with '3.0.0rc1.dev.10' version

```bash
pbindings pulp_rpm ruby 3.0.0rc1.dev.10
```
`````

## File: pulp-docs/pulp_rpm/docs/dev/index.md
`````markdown
# Welcome to Pulp RPM for developers!

Here you'll find information useful for the RPM plugin developers.

If you just got here, consider exploring Pulpcore's [Developer Manual](site:pulpcore/docs/dev/), as it provides the common ground for developers for contributing to docs, to code and getting basic background on plugin development.
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/_SUMMARY.md
`````markdown
[//]: Learn more here about the syntax:
[//]: https://pulpproject.org/pulp-docs/docs/dev/reference/markdown-cheatsheet/#ordering-files

* [Get Content from Pulp](use_pulp_repo.md)
* [Upload Content](upload.md)
* [Modify Content](modify.md)
* [Alternate Content Source](alternate-content-source.md)
* [Sign Repository Metadata](metadata_signing.md)
* [Sign Packages](sign-packages.md)
* [Prune Packages](prune.md)
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/alternate-content-source.md
`````markdown
# Configure Alternate Content Sources

Alternate Content Sources (ACS) can help speed up populating of new repositories.
If you have content stored locally or geographically near you which matches
the remote content, Alternate Content Sources will allow you to substitute
this content, allowing for faster data transfer.

*Alternate Content Sources* base is provided by pulpcore.
You can learn more about its general usage [here](site:pulp_file/docs/admin/guides/02-alternate-content-sources/).

To use an Alternate Content Source you need a `RPMRemote` with path of your ACS.

!!! warning
    Remotes with mirrorlist URLs cannot be used as an Alternative Content Source.


```bash
pulp rpm remote create --name rpm_acs_remote --policy on_demand --url http://fixtures.pulpproject.org/rpm-unsigned/
```

## Create Alternate Content Source

Create an Alternate Content Source.

```bash
pulp rpm acs create --name rpm_acs --remote rpm_acs_remote
```

### Alternate Content Source Paths

If you have more places with ACS within one base path you can specify them
by paths and all of them will be considered as a ACS.

```bash
pulp rpm remote create --name rpm_acs_remote --policy on_demand --url http://fixtures.pulpproject.org/
pulp rpm acs create --name rpm_acs --remote rpm_acs_remote --path "rpm-unsigned/" --path "rpm-distribution-tree/"
```

## Refresh Alternate Content Source

To make your ACS available for future syncs you need to call `refresh` endpoint
on your ACS. This create a catalogue of available content which will be used instead
new content if found.

```bash
pulp rpm acs refresh --name rpm_acs
```

Alternate Content Source has a global scope so if any content is found in ACS it
will be used in all future syncs.
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/metadata_signing.md
`````markdown
# Sign Repository Metadata

The RPM plugin is able to sign repository metadata using a [signing service](site:/pulpcore/docs/admin/guides/sign-metadata/) configured by an administrator.
This enables package managers to verify the authenticity of metadata before installing packages
referenced by that metadata. The metadata signing is enabled for all repositories that have a
signing service associated with them.

## Setup

Let us assume that a signing service is already supplied by an administrator and is queryable via
REST API in an ordinary way. The only thing that needs to be done by a user is to create a new
repository with the associated signing service, like so:

```bash
#!/usr/bin/env bash

# Create RPM repository
if [ $# -eq 0 ]; then
  REPO_NAME="foo"
else
  REPO_NAME="$1"
fi
export REPO_NAME

echo "Fetching the signing service."
SIGNING_SERVICE_HREF=$(pulp signing-service show --name 'sign-metadata' | jq -r '.pulp_href')
export SIGNING_SERVICE_HREF

echo "Creating a new repository named ${REPO_NAME}."
REPO_HREF=$(http POST "$BASE_ADDR"/pulp/api/v3/repositories/rpm/rpm/ name="${REPO_NAME}" \
    metadata_signing_service="${SIGNING_SERVICE_HREF}" \
    | jq -r '.pulp_href')
export REPO_HREF

echo "Inspecting Repository."
pulp rpm repository show --name "${REPO_NAME}"
```

Then, the repository needs to be published and a new distribution needs to be created out of it, as
usually. Follow the instructions provided [in the tutorial](site:/pulp_rpm/docs/user/tutorials/create_sync_publish/#create-a-publication) to do so.

The publication will automatically contain a detached ascii-armored signature and a public key.
Both the detached signature and the public key are used by package managers during the process of
verification.

## Installing Packages

When a distribution with signed repodata is created, a user can install packages from a signed
repository. But, at first, it is necessary to set up the configuration for the repository. One may
initialize the configuration by leveraging the utility `dnf config-manager` like shown below.
Afterwards, the user should be able to install the packages by running `dnf install packages`.

```bash
#!/usr/bin/env bash

BASE_URL=$(pulp rpm distribution show --name "${DIST_NAME}" | jq -r '.base_url')
BASE_PATH=$(pulp rpm distribution show --name "${DIST_NAME}" | jq -r '.base_path')
PUBLIC_KEY_URL="${BASE_URL}"/repodata/repomd.xml.key

echo "Setting up a YUM repository."
sudo dnf config-manager --add-repo "${BASE_URL}"
sudo dnf config-manager --save \
    --setopt=*"${BASE_PATH}".gpgcheck=0 \
    --setopt=*"${BASE_PATH}".repo_gpgcheck=1 \
    --setopt=*"${BASE_PATH}".gpgkey="${PUBLIC_KEY_URL}"

sudo dnf install --downloadonly -y walrus
```

!!! note
    Package managers take advantage of signed repositories only when the attribute `repo_gpgcheck`
    is set to 1. Also, bear in mind that the attribute `gpgkey` should be configured as well to
    let the managers know which public key has to be used during the verification.
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/modify.md
`````markdown
# Modify Repository Content

Modifying existing Repository Content lets you filter what content you want in a Repository.

Keep in mind that none of these operations introduces new Content or deletes a Content from a Pulp instance.
To populate Pulp, see [Post and Delete Content](site:pulp_rpm/docs/user/guides/upload/) or [Create, Sync and Publish a Repository](site:pulp_rpm/docs/user/tutorials/create_sync_publish/).

## Basic Repository Modification API

Like all Pulp repositories, you can use `pulp rpm repository modify` to:

- Add or remove individual content units from a repository by HREF.
- Clone a repository version using `base_version`. This enables roll-back to a previous version.

### Sample Setup

If you want to experiment with the operations on some sample data, run this setup so you can follow along.
The output is based on this sample and only makes sense if the operations are followed in order.

=== "Setup"

    ```bash
    pulp rpm repository create --name modify_test_repo
    pulp rpm repository create --name fixture_repo
    pulp rpm remote create --name fixture_remote --url https://fixtures.pulpproject.org/rpm-unsigned/
    pulp rpm repository sync --repository fixture_repo --remote fixture_remote
    ```

### Add content to Repository

1. Set required variables:
    * `REPONAME`: The repository where you want to add
    * `ADD_LIST`: A json list with the `package_href` constructed like:
    ```json
    [{"pulp_href": "/pulp/api/v3/content/rpm/packages/018ea4c6-50f2-7895-aaf9-d1dde2b94c20/"}]
    ```
2. Run the modify command
3. Inspect the created Repository Version

=== "Add Packages to a Repository"

    ```bash
    # Set required variables
    REPONAME=modify_test_repo
    ADD_LIST=$(pulp rpm repository content list \
        --repository fixture_repo \
        --limit 5 | jq -r '[.[] | {pulp_href}]')
    # Run the modify command
    pulp rpm repository content modify \
        --repository "${REPONAME}" \
        --add-content "${ADD_LIST}"
    # Inspect the Repository Version and its Contents
    pulp rpm repository show --name modify_test_repo | jq '.latest_version_href'
    pulp rpm repository content list --repository modify_test_repo | jq '.[].location_href'
    ```

=== "Output"

    ```json
    # last repository version. Now its 1, previous was 0
    "/pulp/api/v3/repositories/rpm/rpm/018ea4da-702b-7b20-b427-393efe196193/versions/1/"

    # last repository version content
    "zebra-0.1-2.noarch.rpm"
    "wolf-9.4-2.noarch.rpm"
    "whale-0.2-1.noarch.rpm"
    "walrus-5.21-1.noarch.rpm"
    "walrus-0.71-1.noarch.rpm"
    ```

### Remove content from a Repository

Removing a content means creating a new *Repository Version* that won't contain it anymore:

1. Set required variables:
    * `REPONAME`: The repository where you want to delete from
    * `REMOVE_LIST`: A json list with the `package_href` constructed like:
    ```json
    [{"pulp_href": "/pulp/api/v3/content/rpm/packages/018ea4c6-50f2-7895-aaf9-d1dde2b94c20/"}]
    ```
2. Run the modify command
3. Inspect the created Repository Version

=== "Remove Package from  a Repository"

    ```bash
    # Set required variables
    REPONAME=modify_test_repo
    REMOVE_LIST=$(pulp rpm repository content list \
        --repository modify_test_repo \
        --limit 2 | jq -r '[.[] | {pulp_href}]')

    # Run the modify command
    pulp rpm repository content modify \
        --repository "${REPONAME}" \
        --remove-content "${REMOVE_LIST}"

    # Inspect the Repository Version and its Contents
    pulp rpm repository show --name modify_test_repo | jq '.latest_version_href'
    pulp rpm repository content list --repository modify_test_repo | jq '.[].location_href'
    ```

=== "Output"

    ```json
    # last repository version. Now its 2, previous was 1
    "/pulp/api/v3/repositories/rpm/rpm/018ea4da-702b-7b20-b427-393efe196193/versions/2/"

    # last repository version content
    "whale-0.2-1.noarch.rpm"
    "walrus-5.21-1.noarch.rpm"
    "walrus-0.71-1.noarch.rpm"
    ```

### Copy content from a Repository Version

This operation will create a new *Repository Version* in the current Repository based on a previous version (that belongs to the same Repository).
It will contain the exact same contents as in the `base_version`, regardless of what content was previously present.

This can be combined with adding and removing content units in the same call.

1. Sets required variables:
    * `REPONAME`: The repository to create a copy and get a `base_version` from.
    * `REPOVERSION`: The repository version number to roll-back to.
2. Runs the modify command
3. Inspects the created Repository Version

=== "Clone a Repository Version"

    ```bash
    # Set required variables
    REPONAME=modify_test_repo
    REPOVERSION=1

    # Run the modify command
    pulp rpm repository content modify \
        --repository "${REPONAME}" \
        --base-version "${REPOVERSION}"

    # Inspect the Repository Version and its Contents
    pulp rpm repository show --name modify_test_repo | jq '.latest_version_href'
    pulp rpm repository content list --repository modify_test_repo | jq '.[].location_href'
    ```

=== "Output"

    ```json
    # last repository version. Now its 3, previous was 2
    "/pulp/api/v3/repositories/rpm/rpm/018ea4da-702b-7b20-b427-393efe196193/versions/3/"

    # last repository version content
    "zebra-0.1-2.noarch.rpm"
    "wolf-9.4-2.noarch.rpm"
    "whale-0.2-1.noarch.rpm"
    "walrus-5.21-1.noarch.rpm"
    "walrus-0.71-1.noarch.rpm"
    ```

## Advanced copy workflow

!!! note

    The RPM copy API is a **tech preview**, while we hope it can remain stable, it may be subject
    to change in future releases.

RPM repositories have a large number of unique use cases for which the standard 'generic' Pulp
repository modification API is insufficient, so a separate RPM-specific API is provided for more
'advanced' use cases.

### Background

Several types of RPM content, such as Advisories (Errata), Package Groups, and Modules
depend on the existence of other content units to be "correct" or meaningful. For example:

1. An Advisory (Errata) references RPM Packages and Modules that are needed to address a
   particular bug or security concern. In order for the Advisory to be useful, these RPM packages
   or Modules should be present in the same repository - otherwise when a client tries to install
   them it will not be able to fully apply the Advisory fix.
2. A Package Group is a group of RPM packages. If the RPM packages that a Package Group contains
   are not present in the same repository, the Package Group is effectively "broken" and won't be
   possible to install correctly on a client system.
3. A Module consists of many RPM packages (similar to a Package Group). If the module is added to
   a repository while the packages that its RPMs depend on are not, it may not be possible to
   install the module on a client system.
4. A Module can depend on other modules. If those modules are not present in the RPM repo, the
   module will not be installable on a client system.
5. RPM Packages typically depend on other RPM packages. If a lone RPM package is added to a
   repository without its dependencies, it will potentially not be installable on a client system.

The advanced copy API exists primarily to address these use cases.

In contrast to the repository modification API, when a copy is performed using the RPM copy
API it is permitted to additionally copy content in the background which you, the user,
did not explicitly tell it to copy. For example:

- When copying an Advisory (Errata) from one repository to another, all of the RPM packages
  directly referenced by the Advisory will also be copied (however, see note below
  regarding "best effort" in copies).
- When copying RPM packages from one repository to another, if dependency-resolution is enabled
  then all of the RPM packages that those packages depend on are also be copied.

The goal is to be as easy to use as possible, while allowing for a "best effort" at maintaining
the "correctness" of the repository, as well as its dependencies if requested.

!!! note

    In all cases, copy engages in a "best effort" attempt to fulfill the requirement. This
    means that, in the event of the copy process being unable to find entities it believes
    are necessary for the copy operation, **it will continue to execute the copy**. This
    can happen for a variety of reasons (e.g., the source repositor(ies) don't contain all
    of the referenced/required content, or the copy-configuration is incomplete or otherwise
    incorrect). In these instances, missing entities are logged as WARNINGs - be sure to
    check the logs if the results of a copy are unexpected.

### Dependency solving

When copying RPM packages, advisories, or modules between repositories, it is useful to ensure
that all of the RPM dependencies they need to be "installable" on a client system are also present
in the destination-repository.

For example: if you want to add the "hexchat" RPM to a new repository, and you want to be able
to install it from that repository, the repository should also contain hexchat's dependencies
such as "libnotify" and "gtk3".

This applies to all RPM concepts that "contain" RPMs, such as Advisories (Errata), Modules, and
PackageGroups. With the RPM copy API, you are afforded the option to have all dependencies (and
the dependencies of those dependencies) copied for you automatically, if they do not already exist
in the destination repository. In Pulp 2, this feature was documented as "advanced copy";
the Pulp3 behavior matches the "recursive-conservative" option from Pulp2 (copies **latest missing**
dependencies)

Solving these complex dependency relationships can be quite expensive, but is often necessary for
correctness. It is **enabled by default**, but can be disabled by setting the "dependency_solving"
parameter to a value of `False` when making calls against the API. Note that if you do choose not
to use dependency-solving, (or if you configure it incorrectly), it is possible to create incomplete
repositories.

!!! note

    While the default value for the "dependency_solving" parameter is currently `True`, this
    default is potentially subject to change in the future - until such a time as this API is
    stabilized.

Dependency solving does have some restrictions to be aware of. The set of content contained by
all repositories used in a copy operation must be "dependency closed", which is to say that no
content in any repository may have a dependency which cannot be satisfied by any content present
in any of the other repositories involved in the copy operation.

For example, in CentOS 8, there are two primary repositories which are called "BaseOS" and
"AppStream". RPMs present in the "AppStream" repository frequently depend on RPMs which are
not present in "AppStream", but are present in "BaseOS", instead.

In order to copy RPMs from a Pulp-clone of the "AppStream" repository, you must perform a
"multi-repository copy" so that the dependencies can be properly resolved. Please see the
recipe section below for more details on how to do this.

!!! note

    If a destination repository has a retain-packages policy set, it will take effect after the copy.
    Retain package policy is set by `retain_package_versions` option.
    When set, it identifies the maximum number of versions of each package to keep; as new versions of
    packages are added by upload, sync, or copy, older versions of the same packages are automatically
    removed. A value of 0 means "unlimited" and will keep all versions of each package.

### Recipes

These are examples of how the RPM copy API should be used. This code isn't intended to be runnable
as-is, but rather as a template for how the calls should be constructed.

=== "Setup"

    ```bash
    export BASE_NAME="test_advanced_copy"
    # Create one remote
    pulp rpm remote create --name "${BASE_NAME}" --url "https://fixtures.pulpproject.org/rpm-signed/" --policy on_demand
    # Create 2 src and 2 dest repos
    for pre in "src" "dst"; do
      for inst in {1..2}; do
        echo "${pre}/${inst}"
        pulp rpm repository create --name "${pre}_${BASE_NAME}_${inst}" --remote "${BASE_NAME}" --no-autopublish
      done
    done
    # sync the src repos (only)
    for inst in {1..2}; do
      echo "SYNC src_${BASE_NAME}_${inst}}"
      pulp rpm repository sync --repository "src_${BASE_NAME}_${inst}"
    done
    # Find and remember one RPM HREF and one Advisory HREF from src1
    export rpm_href="$(pulp rpm content -t package list --name bear --version 4.1 --release 1 --field pulp_href | jq '.[0].pulp_href')"
    echo "RPM ${rpm_href}"
    export advisory_href="$(pulp rpm content -t advisory list --id RHEA-2012:0055 --field pulp_href | jq '.[0].pulp_href')"
    echo "ADVISORY ${advisory_href}"
    ```

#### Full repository copy

Create a new repository version in a destination repository containing all content units which are present in
the source repository-version. This essentially copies all content from the source version into
the destination repository.

=== "Copy All From Source To Destination"

    ```bash
    cat << EOF >  ./copy_test.json
    [
      {
        "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_1" | jq '.latest_version_href'),
        "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_1" | jq '.pulp_href')
      }
    ]
    EOF
    pulp rpm copy --config @./copy_test.json
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/01903bb0-34a1-7c58-82a8-30626adeec74/",
      "pulp_created": "2024-06-21T16:45:21.953880Z",
      "pulp_last_updated": "2024-06-21T16:45:21.953892Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.copy.copy_content",
      "logging_cid": "4bfd43b974ed46a58c70bb1df73c125d",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-21T16:45:21.972269Z",
      "started_at": "2024-06-21T16:45:22.026509Z",
      "finished_at": "2024-06-21T16:45:22.609179Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-50cc-79d3-bc8d-d4726981e072/",
      "parent_task": null,
      "child_tasks": [],
      "task_group": null,
      "progress_reports": [],
      "created_resources": [
        "/pulp/api/v3/repositories/rpm/rpm/01903baf-df99-7497-b9c4-fc882ebae05e/versions/1/"
      ],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:01903baf-df99-7497-b9c4-fc882ebae05e",
        "shared:prn:rpm.rpmrepository:01903baf-d818-765e-8cba-72e027fddda1",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```

#### Specific-content copy

Create a new repository version in the destination repository containing the two content-units specified by href,
which are present in the source-repository.

=== "Copy Specific Content From Source To Destination"

    ```bash
    cat << EOF >  ./copy_test.json
    [
     {
       "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_1" | jq '.latest_version_href'),
       "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_1" | jq '.pulp_href'),
       "content": [${rpm_href}, ${advisory_href}]
     }
    ]
    EOF
    pulp rpm copy --config @./copy_test.json
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/01903bb1-ac68-7110-ae36-0a6079c17df6/",
      "pulp_created": "2024-06-21T16:46:58.152804Z",
      "pulp_last_updated": "2024-06-21T16:46:58.152815Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.copy.copy_content",
      "logging_cid": "8ac95a20fc27489cba22ca32e041ff70",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-21T16:46:58.182745Z",
      "started_at": "2024-06-21T16:46:58.233618Z",
      "finished_at": "2024-06-21T16:46:58.386792Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-53d3-705a-a316-c5d08dcebaaa/",
      "parent_task": null,
      "child_tasks": [],
      "task_group": null,
      "progress_reports": [],
      "created_resources": [],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:01903baf-df99-7497-b9c4-fc882ebae05e",
        "shared:prn:rpm.rpmrepository:01903baf-d818-765e-8cba-72e027fddda1",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```

#### Specific-content to specific-destination-version copy

Create a new repository version in the destination repository containing the two content-units specified by href,
which are present in the source repository version. Instead of adding them to the content present in
the **latest** repository version present in destination repository, instead create a new version based upon
specified version-number of the destination repository. These semantics are similar to how the
`base_version` parameter is used in the repository modification API.

=== "Copy content to dest-repo/versions/0/"

    ```bash
    cat << EOF >  ./copy_test.json
    [
      {
        "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_1" | jq '.latest_version_href'),
        "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_1" | jq '.pulp_href'),
        "dest_base_version": 0,
        "content": [${rpm_href}, ${advisory_href}]
      }
    ]
    EOF
    pulp rpm copy --config @./copy_test.json
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/01903bb2-f7dc-7697-b33e-5a2f66ab58e8/",
      "pulp_created": "2024-06-21T16:48:23.004932Z",
      "pulp_last_updated": "2024-06-21T16:48:23.004944Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.copy.copy_content",
      "logging_cid": "f13911c4153f47348ccdc1e3dfea98e7",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-21T16:48:23.022271Z",
      "started_at": "2024-06-21T16:48:23.075167Z",
      "finished_at": "2024-06-21T16:48:23.235869Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-536f-7e31-aec9-059c55ba427c/",
      "parent_task": null,
      "child_tasks": [],
      "task_group": null,
      "progress_reports": [],
      "created_resources": [
        "/pulp/api/v3/repositories/rpm/rpm/01903baf-df99-7497-b9c4-fc882ebae05e/versions/2/"
      ],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:01903baf-df99-7497-b9c4-fc882ebae05e",
        "shared:prn:rpm.rpmrepository:01903baf-d818-765e-8cba-72e027fddda1",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```

#### Copy content from src1 to dest1 **including dependencies**

Create a new repository version in the destination repository containing a specified content-unit,
as well as all of its RPM-dependencies, taken from the source repository-version.

=== "Copy specific content and dependencies from src to dest"

    ```bash
    cat << EOF >  ./copy_test.json
    [
      {
        "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_1" | jq '.latest_version_href'),
        "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_1" | jq '.pulp_href'),
        "content": [${advisory_href}]
      }
    ]
    EOF
    pulp rpm copy --config @./copy_test.json --dependency-solving
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/01903be8-1857-7cb8-a510-28096ede2771/",
      "pulp_created": "2024-06-21T17:46:24.727563Z",
      "pulp_last_updated": "2024-06-21T17:46:24.727574Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.copy.copy_content",
      "logging_cid": "a82707ece6d94ad48a9447569518df39",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-21T17:46:24.743962Z",
      "started_at": "2024-06-21T17:46:24.798102Z",
      "finished_at": "2024-06-21T17:46:24.965390Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-54c2-7d48-a74c-df41802bc946/",
      "parent_task": null,
      "child_tasks": [],
      "task_group": null,
      "progress_reports": [],
      "created_resources": [],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:01903baf-df99-7497-b9c4-fc882ebae05e",
        "shared:prn:rpm.rpmrepository:01903baf-d818-765e-8cba-72e027fddda1",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```

#### Multi-repository copy

"Multi-repository-copy", required when any of the repositories involved in the copy are not "dependency closed".

Each of the pairs of source and destination repositories will see the content units that were
specified copied as normal. However when one of the content units has a dependency which is not
present in the same repository, but is present in one of the other "source" repositories listed,
it may be copied between the repos configured in that pair.

In the following example, if the specified RPM depends on a content unit which is only present in the second
source repository-version and is not present in either the first or second destination repository, then
it will be copied from the second source repository-version to the second destination repository, even though no
content was specified to be copied between those repositories.

=== "Copy content from src1/dest1 to src2/dest2"

    ```bash
    cat << EOF >  ./copy_test.json
    [
      {
        "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_1" | jq '.latest_version_href'),
        "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_1" | jq '.pulp_href'),
        "content": [${rpm_href}, ${advisory_href}]
      },
      {
        "source_repo_version": $(pulp rpm repository show --name "src_${BASE_NAME}_2" | jq '.latest_version_href'),
        "dest_repo": $(pulp rpm repository show --name "dst_${BASE_NAME}_2" | jq '.pulp_href'),
        "content": []
      }
    ]
    EOF
    pulp rpm copy --config @./copy_test.json --dependency-solving
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/01903be9-33e8-7b44-a43a-97b54dca3724/",
      "pulp_created": "2024-06-21T17:47:37.320871Z",
      "pulp_last_updated": "2024-06-21T17:47:37.320883Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.copy.copy_content",
      "logging_cid": "3b4553346d534751b37cc16aefed4975",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-21T17:47:37.335849Z",
      "started_at": "2024-06-21T17:47:37.392426Z",
      "finished_at": "2024-06-21T17:47:37.656981Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-5460-7186-ad57-c0eb34ddfe61/",
      "parent_task": null,
      "child_tasks": [],
      "task_group": null,
      "progress_reports": [],
      "created_resources": [],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:01903baf-df99-7497-b9c4-fc882ebae05e",
        "prn:rpm.rpmrepository:01903baf-e352-7b56-bffb-70f6afa479a9",
        "shared:prn:rpm.rpmrepository:01903baf-dbe0-710a-bfb5-e0392927e04e",
        "shared:prn:rpm.rpmrepository:01903baf-d818-765e-8cba-72e027fddda1",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/prune.md
`````markdown
# Prune Repository Content

A workflow that can be useful for specific kinds of installation is the "prune" workflow.
For repositories that see frequent updates followed by long periods of stability, it can
be desirable to eventually "age out" RPMs that have been superseded, after a period of time.

The `/pulp/api/v3/rpm/prune/` API exists to provide to the repository-owner/admin a tool to
accomplish this workflow.

- `repo_hrefs` allows the user to specify a list of specific `RpmRepository` HREFs, or 
the wildcard "*" to prune all repositories available in the user's domain.
- `keep_days` allows the user to specify the number of days to allow "old" content to remain in the
repository. The default is 14 days.
- `dry_run` is available as a debugging tool. Instead of actually-pruning, it will log to Pulp's system
log the Packages it **would have pruned**, while making no actual changes.

This workflow will operate on the `latest_version` of the specified RpmRepositor(ies), creating a new RepositoryVersion
with the pruned list of Packages. All the "standard rules" apply at that point:

- Space is not reclaimed unless the older versions are deleted/removed (e.g., older versions are removed manually or `retain_repository_versions` is 1) and orphan-cleanup runs.
- The version must be published to generate the repo-metadata reflecting the new content (e.g., a new Publication is created or`autopublish` is `True`).
- The version will not be available until it is Distributed (e.g. a Distribution is created to point to the new Publication or a Distribution exists that points at the **Repository** directly)


!!! note

    This workflow dispatches a separate task for each repository being pruned. In order to avoid using all available
    workers (and hence blocking regular Pulp processing), the prune workflow will consume no more workers than are
    specified by the `PRUNE_WORKERS_MAX` setting, defaulting to 5.

## Example

=== "Setup"

    ```bash
    pulp rpm remote create --name zoo --policy on_demand --url https://fixtures.pulpproject.org/rpm-signed/
    pulp rpm repository create --name zoo --remote zoo
    pulp rpm repository sync --name zoo
    ```

=== "Prune a repository"

    ```bash 
    $ pulp rpm prune-packages --repository zoo --keep-days 0 --dry-run
    Started background task group /pulp/api/v3/task-groups/019036ae-04c5-79b4-bc0b-e31be3372c8a/
    $ pulp task-group show --href /pulp/api/v3/task-groups/019036ae-04c5-79b4-bc0b-e31be3372c8a/
    ``` 

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/task-groups/019036ae-04c5-79b4-bc0b-e31be3372c8a/",
      "description": "Prune old Packages.",
      "all_tasks_dispatched": true,
      "waiting": 0,
      "skipped": 0,
      "running": 0,
      "completed": 2,
      "canceled": 0,
      "failed": 0,
      "canceling": 0,
      "group_progress_reports": [
        {
          "message": "Pruning old Packages",
          "code": "rpm.package.prune",
          "total": 1,
          "done": 1,
          "suffix": null
        }
      ],
      "tasks": [
        {
          "pulp_href": "/pulp/api/v3/tasks/019036ae-04d0-79e8-97eb-f4ac6778d1a1/",
          "pulp_created": "2024-06-20T17:24:52.561964Z",
          "pulp_last_updated": "2024-06-20T17:24:52.561999Z",
          "name": "pulp_rpm.app.tasks.prune.prune_packages",
          "state": "completed",
          "unblocked_at": "2024-06-20T17:24:52.579086Z",
          "started_at": "2024-06-20T17:24:52.619739Z",
          "finished_at": "2024-06-20T17:24:52.684361Z",
          "worker": "/pulp/api/v3/workers/01902cd4-536f-7e31-aec9-059c55ba427c/"
        },
        {
          "pulp_href": "/pulp/api/v3/tasks/019036ae-052c-7b42-9716-61c7c289662c/",
          "pulp_created": "2024-06-20T17:24:52.652887Z",
          "pulp_last_updated": "2024-06-20T17:24:52.652897Z",
          "name": "pulp_rpm.app.tasks.prune.prune_repo_packages",
          "state": "completed",
          "unblocked_at": "2024-06-20T17:24:52.669390Z",
          "started_at": "2024-06-20T17:24:52.721946Z",
          "finished_at": "2024-06-20T17:24:52.774561Z",
          "worker": "/pulp/api/v3/workers/01902cd4-51ff-78d3-9aa7-3d2dde187e18/"
        }
      ]
    }
    ```

=== "Show spawned task pruning repository 'zoo'"

    ```bash
    $ pulp task show --href /pulp/api/v3/tasks/019036ae-052c-7b42-9716-61c7c289662c/
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/tasks/019036ae-052c-7b42-9716-61c7c289662c/",
      "pulp_created": "2024-06-20T17:24:52.652887Z",
      "pulp_last_updated": "2024-06-20T17:24:52.652897Z",
      "state": "completed",
      "name": "pulp_rpm.app.tasks.prune.prune_repo_packages",
      "logging_cid": "4008405185ef4b40b24581eefece35ab",
      "created_by": "/pulp/api/v3/users/1/",
      "unblocked_at": "2024-06-20T17:24:52.669390Z",
      "started_at": "2024-06-20T17:24:52.721946Z",
      "finished_at": "2024-06-20T17:24:52.774561Z",
      "error": null,
      "worker": "/pulp/api/v3/workers/01902cd4-51ff-78d3-9aa7-3d2dde187e18/",
      "parent_task": "/pulp/api/v3/tasks/019036ae-04d0-79e8-97eb-f4ac6778d1a1/",
      "child_tasks": [],
      "task_group": "/pulp/api/v3/task-groups/019036ae-04c5-79b4-bc0b-e31be3372c8a/",
      "progress_reports": [
        {
          "message": "Pruning zoo",
          "code": "rpm.package.prune.repository",
          "state": "completed",
          "total": 4,
          "done": 0,
          "suffix": null
        }
      ],
      "created_resources": [],
      "reserved_resources_record": [
        "prn:rpm.rpmrepository:019036a6-4f7a-7daa-b2ad-02bd30f4ce01",
        "rpm-prune-worker-0",
        "shared:prn:core.domain:01902cd3-9252-72fe-9069-58fc3086c0cf"
      ]
    }
    ```
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/sign-packages.md
`````markdown
# Sign RPM Packages

Sign an RPM Package using a registered RPM signing service.

Currently, only on-upload signing is supported.

## On Upload

!!! tip "New in 3.26.0 (Tech Preview)"

Sign an RPM Package when uploading it to a Repository.

### Pre-requisites

- Have an `RpmPackageSigningService` registered
  (see [here](site:pulp_rpm/docs/admin/guides/add-signing-services/#package-signing)).
- Have the V4 fingerprint of the key you want to use. The key should be accessible by the SigningService you are using.

### Instructions

1. Configure a Repository to enable signing.
    - Both `package_signing_service` and `package_signing_fingerprint` must be set.
    - If they are set, any package upload to the Repository will be signed by the service.
2. Upload a Package to this Repository.

### Example

```bash
# Create a Repository w/ required params
http POST $API_ROOT/repositories/rpm/rpm \
  name="MyRepo" \
  package_signing_service=$SIGNING_SERVICE_HREF \
  package_signing_fingerprint=$SIGNING_FINGERPRINT

# Upload a package
pulp rpm content upload \
  --repository ${REPOSITORY} \
  --file ${FILE}
```

### Known Limitations

**Traffic overhead**: The signing of a package should happen inside of a Pulp worker.
  [By design](site:pulpcore/docs/dev/learn/plugin-concepts/#tasks),
  Pulp needs to temporarily commit the file to the default backend storage in order to make the Uploaded File available to the tasking system.
  This implies in some extra traffic, compared to a scenario where a task could process the file directly.

**No sign tracking**: We do not track signing information of a package.

For extra context, see discussion [here](https://github.com/pulp/pulp_rpm/issues/2986).
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/upload.md
`````markdown
# Post and Delete Content

RPM Content (packages, advisories, modulemds, etc) can be submitted to a Pulp Repository individually.

## Post Content

### Package Example

Package upload requires a valid RPM package.

=== "Upload a Package"

    ```bash
    # Get or create a repository
    pulp rpm repository create --name testrepo
    REPOSITORY=testrepo

    # Get a package
    wget https://fixtures.pulpproject.org/rpm-unsigned/bear-4.1-1.noarch.rpm
    PACKAGE="bear-4.1-1.noarch.rpm"
    
    # Upload package to the repo
    PACKAGE_HREF=$(pulp rpm content -t package upload \
        --file "${PACKAGE}" \
        --repository "${REPOSITORY}" \
        | jq -r '.content_summary.added."rpm.package".href')
    
    # Inspect the package
    pulp show --href "${PACKAGE_HREF}"
    ```

=== "Output"

    ```json
      {
        "pulp_href": "/pulp/api/v3/content/rpm/packages/018e9b3a-78c8-7cce-aa9a-034e92ae2e93/",
        "pulp_created": "2024-04-01T19:54:44.297487Z",
        "pulp_last_updated": "2024-04-01T19:54:44.297497Z",
        "md5": "95281cf165536b930d428e06c9072ecc",
        "sha1": "7a1c48b1ed69992c6ca3f20853f46ec88e8de146",
        "sha224": "2c96cdb234d4ace0f95d0d4dcab5c6dbc009f886ad021fb223768dd1",
        "sha256": "ceb0f0bb58be244393cc565e8ee5ef0ad36884d8ba8eec74542ff47d299a34c1",
        "sha384": "444b2be8b1e91f851acced29c00ccc3984106f3f8429c2c6d79d0166bf3fe0ce82942e761f861b52f9d32b8766ac9b01",
        "sha512": "67434c4e7697908572e65007590317dc7e541dc63be68b330b5fdcddf1127ad525487ee4cca41f218a6810c7a936d5da1847e840f751b5b22f3f1a03f4e25a12",
        "artifact": "/pulp/api/v3/artifacts/018e9b3a-785f-7b12-b7c5-cb966c1efcd0/",
        "name": "bear",
        "epoch": "0",
        "version": "4.1",
        "release": "1",
        "arch": "noarch",
        "pkgId": "ceb0f0bb58be244393cc565e8ee5ef0ad36884d8ba8eec74542ff47d299a34c1",
        "checksum_type": "sha256",
        "summary": "A dummy package of bear",
        "description": "A dummy package of bear",
        "url": "http://tstrachota.fedorapeople.org",
        "changelogs": [],
        "files": [
          [
            "",
            "/tmp/",
            "bear.txt",
            "5938462bfd4a5d750e0851f5b82f3ade"
          ]
        ],
        "requires": [],
        "provides": [
          [
            "bear",
            "EQ",
            "0",
            "4.1",
            "1",
            false
          ]
        ],
        "conflicts": [],
        "obsoletes": [],
        "suggests": [],
        "enhances": [],
        "recommends": [],
        "supplements": [],
        "location_base": "",
        "location_href": "bear-4.1-1.noarch.rpm",
        "rpm_buildhost": "smqe-ws15",
        "rpm_group": "Internet/Applications",
        "rpm_license": "GPLv2",
        "rpm_packager": "",
        "rpm_sourcerpm": "bear-4.1-1.src.rpm",
        "rpm_vendor": "",
        "rpm_header_start": 280,
        "rpm_header_end": 1697,
        "is_modular": false,
        "size_archive": 296,
        "size_installed": 42,
        "size_package": 1846,
        "time_build": 1331831374,
        "time_file": 1712001284
      },
    ```

### Advisory Example

Advisory upload requires a file or an artifact containing advisory information in the JSON format.


=== "Upload an Advisory"

    ```bash
    # Get advisory
    echo '{
        "updated": "2014-09-28 00:00:00",
        "issued": "2014-09-24 00:00:00",
        "id": "RHSA-XXXX:XXXX"
    }' > advisory.json
    ADVISORY="advisory.json"
    
    # Upload advisory
    ADVISORY_HREF=$(pulp rpm content -t advisory \
        upload --file "${ADVISORY}" | jq -r '.pulp_href')
    
    # Inspect advisory
    pulp show --href "${ADVISORY_HREF}"
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/content/rpm/advisories/018e9aec-f864-73a1-9e0b-22fc0288be75/",
      "pulp_created": "2024-04-01T18:30:05.157638Z",
      "pulp_last_updated": "2024-04-01T18:30:05.163938Z",
      "id": "RHSA-XXXX:XXXX",
      "updated_date": "2014-09-28 00:00:01",
      "description": "",
      "issued_date": "2014-09-24 00:00:01",
      "fromstr": "",
      "status": "",
      "title": "",
      "summary": "",
      "version": "",
      "type": "",
      "severity": "",
      "solution": "",
      "release": "",
      "rights": "",
      "pushcount": "",
      "pkglist": [],
      "references": [],
      "reboot_suggested": false
    }
    ```

!!! note

    The previous example doesn't relate the Advisory with a Repository.
    To do so, see [Add Content to Repository](site:pulp_rpm/docs/user/guides/modify#add-content-to-repository).

### Other Contents

Rpm Content types that support individual submission are:
`packages`,
`advisories`,
`modulemds`,
`modulemd_defaults`,
`modulemd_obsoletes`. If CLI supports it, you can use the commands below to check the necessary parameters.

```bash
pulp rpm content -t CONTENT_TYPE upload --help
pulp rpm content -t CONTENT_TYPE create --help
```

!!! warning

    `pulp-cli` may not support all of these yet, but they are available in the REST API 
    (e.g, [modulemd_defaults POST](site:pulp_rpm/restapi/#tag/Content:-Modulemd_Defaults/operation/content_rpm_modulemd_defaults_create)).
    
    You may consider [opening a ticket in pulp-cli](https://github.com/pulp/pulp-cli/issues/new/choose) requesting support.

## Delete Content

Deleting *Content* is not part of the user-facing API as a CRUD operation.
There are several architectural reasons for that, one of which is that multiple *Repository Versions* may rely on the same *Content* unit, and forcing a deletion may lead to a broken state.

If you want to remove *Content*, consider using the [Modify API](site:pulp_rpm/docs/user/guides/modify/#remove-content-from-a-repository) to remove the content *from a Repository*, and not from Pulp itself. The latter should be handled by Admins, who should configure Pulp to handle cleanups safely.
`````

## File: pulp-docs/pulp_rpm/docs/user/guides/use_pulp_repo.md
`````markdown
# Get content from Pulp

When content is published and distributed, one can download packages directly from Pulp or point
client tools to a repo distributed by Pulp.

## Download `foo.rpm` from Pulp

=== "Download a Package"

    ```bash
    #!/usr/bin/env bash
    
    # Download a package
    
    # Specify one package from repository used in 'remote.sh'
    if [ -z "${PKG}" ]; then
      PKG="fox-1.1-2.noarch.rpm"
    fi
    
    SHORT="${PKG:0:1}"
    
    # The distribution will return a url that can be used by http clients
    echo "Setting DISTRIBUTION_BASE_URL, which is used to retrieve content from the content app."
    DISTRIBUTION_BASE_URL=$(pulp rpm distribution show --name "${DIST_NAME}" | jq -r '.base_url')
    export DISTRIBUTION_BASE_URL
    
    # If Pulp was installed without CONTENT_HOST set, it's just the path.
    # And httpie will default to localhost:80
    if [[ "${DISTRIBUTION_BASE_URL:0:1}" = "/" ]]; then
        DISTRIBUTION_BASE_URL="${CONTENT_ADDR}""${DISTRIBUTION_BASE_URL}"
    fi
    
    # Download a package from the distribution
    echo "Download a package from the distribution."
    http -d "$DISTRIBUTION_BASE_URL"Packages/"${SHORT}"/"${PKG}"
    ```

=== "Output"

    ```shell
    HTTP/1.1 200 OK
    Accept-Ranges: bytes
    AppTime: D=417
    Cache-Control: max-age=1800
    Connection: keep-alive
    Content-Length: 2473
    Content-Type: application/x-rpm
    Date: Wed, 27 Nov 2019 14:17:43 GMT
    Etag: "9a9-598026a4cfb06"
    Expires: Wed, 27 Nov 2019 14:47:43 GMT
    Last-Modified: Sat, 23 Nov 2019 12:10:24 GMT
    Server: nginx/1.16.1
    Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
    X-Fedora-AppServer: people02.fedoraproject.org
    X-GitProject: (null)
    
    +-----------------------------------------+
    | NOTE: binary data not shown in terminal |
    +-----------------------------------------+
    ```

## Install a package from Pulp

If available, download the config.repo file from the server at distribution's
base_path and store it in /etc/yum.repos.d:

```
curl http://localhost:24816/pulp/content/foo/config.repo > /etc/yum.repos.d/foo.repo
```

Now use dnf to install a package:

```
sudo dnf install walrus
```

If config.repo file is not served by the distribution, it is necessary to manually set up the
configuration for the repository. One may initialize the configuration by leveraging the utility
`dnf config-manager` like shown below. Afterwards, the user should be able to install the packages
by running dnf install packages.

```bash
BASE_URL=$(pulp rpm distribution show --name "${DIST_NAME}" | jq -r '.base_url')
BASE_PATH=$(pulp rpm distribution show --name "${DIST_NAME}" | jq -r '.base_path')

sudo dnf config-manager --add-repo "${BASE_URL}"
sudo dnf config-manager --save \
    --setopt=*"${BASE_PATH}".gpgcheck=0 \
    --setopt=*"${BASE_PATH}".repo_gpgcheck=0 \

sudo dnf install walrus
```

## List and Install applicable Advisories

Make sure Pulp repo is configured in /etc/yum.repos.d/, then use dnf to work with Advisory content.

List applicable Advisories:

`dnf list-sec`

Install a specific advisory:

`sudo dnf update --advisory XXXX-XXXX:XXXX`
`````

## File: pulp-docs/pulp_rpm/docs/user/learn/concepts.md
`````markdown
# Core RPM Concepts

## Package

Within a repository version there can be only one package (RPM or SRPM) with the same NEVRA.
NEVRA stands for name, epoch, version, release, architecture.

## Advisory

!!! warning
    Advisory Upload is provided as a tech preview in Pulp RPM 3.0. Functionality may not fully work and backwards compatibility when upgrading to future Pulp RPM releases is not guaranteed.


Advisory is sometimes referred as an Erratum.
It carries information about the updates: which packages need to be updated to solve a specific problem.

There can be only one advisory with the same id in a repository version.

If advisory with the same id already exists in a repository version at the time when another one is being added,
or if a remote repository holds duplicate advisory-ids at sync time, a conflict resolution mechanism is applied.
As a result, a new combined advisory might be created and added to a repository instead of two conflicting ones.
It's also possible that one of advisories will be kept as is, in case it's a newer version of the other.
For more information of the conflict resolution logic, see [this detailed explanation](https://github.com/pulp/pulp_rpm/blob/1d507db453d4e6a91518beb4981a434a29cc3c01/pulp_rpm/app/advisory.py#L81-L96).

## Modularity Metadata

RPM plugin parses a modules.yaml metadata file into modules and their defaults.

Modulemd is uniquely identified by NSVCA which stands for name, stream, version, context, and
architecture. Modulemd contains artifacts (RPM packages), whenever a modulemd is being added or
copied to a repository, modulemd's packages are carried over. In case a modulemd is removed from
a repository version, modulemd's packages are removed as well, this way repository version will
not contain ursine (modulemd unreferenced) packages and modulemd consistency will be preserved.

Within a repository version there can be only one modulemd-defaults with the same modulemd name.

## Distribution Tree

!!! warning
    Support for Distribution Trees is provided as a tech preview in Pulp RPM 3.0. Functionality may not fully work and backwards compatibility when upgrading to future Pulp RPM releases is not guaranteed.


Distribution is sometimes referred as a kickstart tree.
A tree is architecture-specific and is made up of:

- One or more RPM repositories
- Bootable ISO images
- PXE boot images including EFI boot files, ISOLINUX boot files, and one or more kernel images with initial RAM disks.

Almost all the content in a tree is described in a metadata file called the treeinfo file (sometimes .treeinfo).

There can be only one Distribution Tree in a repository version.

## Comps.xml

RPM plugin parses comps.xml metadata file into package groups, package environments, package
categories and langpacks.

## Custom Repository Metadata

Custom or unknown repository metadata is considered any file listed in repomd.xml that Pulp does
not otherwise recognize. Within a repository version there can be only one custom repository
metadata of the same type.
`````

## File: pulp-docs/pulp_rpm/docs/user/tutorials/create_sync_publish.md
`````markdown
# Create, Sync and Publish a Repository

One of the most common workflows is a fetching content from a remote source and making it
available for users.

## Create an RPM repository `foo`

=== "Create Repo"

    ```bash
    echo "Creating Repository."
    pulp rpm repository create --name foo | jq -r '.pulp_href'
    echo "Inspecting Repository."
    pulp rpm repository show --name foo
    ```

=== "Output"

    ```json
    {
        "description": null,
        "latest_version_href": "/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/0/",
        "name": "foo",
        "pulp_created": "2019-11-27T13:30:28.159167Z",
        "pulp_href": "/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/",
        "versions_href": "/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/"
    }
    ```

RPM Repositories support several additional options.

- metadata_signing_service:
  : See `metadata_signing`.
- retain_package_versions:
  : The maximum number of versions of each package to keep; as new versions of packages are added by upload, sync, or copy, older versions of the same packages are automatically removed. A value of 0 means "unlimited".
- autopublish:
  : If set to True, Pulp will automatically create publications for new repository versions. It is generally intended to be used with the `Distribution` pointing to the repository, i.e. set the `repository` field on the distribution. Newly created publications (from autopublish) will then be made available automatically upon creation.
- retain_repo_versions:
  : Provided by pulpcore, specifies how many repository versions will be kept for a repository. For example, if set to 1, it will keep only the most-recent repository version; the rest will be automatically deleted, together with any associated publications. Note, however, that repository versions that are currently being distributed are "protected", and cannot be removed. This can result in more versions being retained than specified by `retain_repo_versions`.
  
## Create a new remote `bar`

By default `policy='immediate` which means that all the content is downloaded right away.
Specify `policy='on_demand'` to make synchronization of a repository faster and only
to download RPMs whenever they are requested by clients.

=== "Create Remote"

    ```bash
    echo "Creating a remote that points to an external source of files."
    pulp rpm remote create \
        --name bar \
        --url 'https://fixtures.pulpproject.org/rpm-unsigned/' \
        --policy 'on_demand'
    
    echo "Inspecting new Remote."
    pulp rpm remote show --name bar
    ```

=== "Create Remote with Certs"

    Also, you can specify `client_cert` and `client_key` if your remote require authorization with a certificate.
    
    ```bash
    pulp rpm remote create \
        --name='bar' \
        --url "${URL}" \
        --policy on_demand \
        --client-cert @./certificate.crt \
        --client-key @./certificate.key \
        --tls-validation False
    ```

    If you want to use TLS validation you have to provide `ca_cert` too.

=== "Output"

    ```json
    {
        "ca_cert": null,
        "client_cert": null,
        "client_key": null,
        "download_concurrency": 20,
        "name": "bar",
        "policy": "on_demand",
        "proxy_url": null,
        "pulp_created": "2019-11-27T13:30:29.199173Z",
        "pulp_href": "/pulp/api/v3/remotes/rpm/rpm/2ceb5262-a5b2-4297-afdf-a31f7e46dfc5/",
        "pulp_last_updated": "2019-11-27T13:30:29.199187Z",
        "tls_validation": true,
        "url": "https://fixtures.pulpproject.org/rpm-unsigned/"
    }
    ```

!!! note
    While creating a new remote, you may set the field `url` to point to a mirror list feed. Pulp
    fetches the list of available mirrors and tries to download content from the first valid mirror.
    This means that whenever an error occurs during the synchronization, the whole sync process ends
    with an error too.

### Configuration for SLES 12+ repository with authentication

If you would like to sync SLES 12+ repository you will need to specify an authentication as `sles_auth_token`.

You can receive your token with script like this:

```bash
curl -H "Authorization: Token token=YourOrganizationRegistrationCode" \
https://scc.suse.com/connect/subscriptions/products | \
tr "," "\n" | \
grep -i "url" | \
grep -i "SLE-SERVER"
```

Assuming your token is `YourRepositoryToken`, create the remote with the `sles_auth_token` specified.

```bash
pulp rpm remote create \
    --name 'SLESrepo' \
    --url 'https://updates.suse.com/SUSE/Updates/SLE-SERVER/12/x86_64/update/' \
    --policy on_demand \
    --sles-auth-token 'YourRepositoryToken'
```

### Creating a ULN remote

ULN stands for "Unbreakable Linux Network" and refers to the way Oracle in particular, 
[delivers Oracle Linux repositories](https://linux.oracle.com/) to their enterprise customers.
You can use a ULN remote to synchronize repositories from a ULN server to Pulp.
For ULN remotes you must provide your ULN login credentials via the `username`, and `password` parameters, 
and the `url` is the ULN channel, e.g. `uln://ovm2_2.1.1_i386_patch`:

```bash
pulp rpm remote create \
    --name 'ULNRemote' \
    --url 'uln://ovm2_2.1.1_i386_patch' \
    --username 'example@example.com' \
    --password 'changeme'
```

You can also specify the ULN Server base URL for a remote using the `uln_server_base_url` parameter.
If you do not provide this parameter, a sync with the remote will default to the contents of the `DEFAULT_ULN_SERVER_BASE_URL` setting, which is `https://linux-update.oracle.com/` by default.
The [pulpcore settings documentation](site:pulpcore/docs/admin/reference/settings/) has more on how to change Pulp settings.

Once you have created a ULN remote, you can synchronize it into a RPM repository, just like you would with a RPM remote.

You may also want to consult the [Oracle ULN documentation](https://docs.oracle.com/en/operating-systems/oracle-linux/uln-user/uln-AbouttheUnbreakableLinuxNetwork.html#ol_about_uln) for more information.

## Sync repository `foo` using remote `bar`

There are 3 sync modes to choose from, using the `--sync-policy` option.

- `additive` (the default) will retain the existing contents of the Pulp repository and add the contents of the remote repository being synced.
- `mirror_content_only` will synchronize the Pulp repository to contain the same content as the one remote repository being synced - removing any existing content that isn't present in the remote repo.
- `mirror_complete` will act as `mirror_content_only` does, but additionally it will automatically create a publication that will be an \_exact\_ bit-for-bit copy of the remote repository being synced, rather than requiring a separate step (or `autopublish`) to generate the metadata later. This will keep repo metadata checksums intact, but is not possible for all repositories, as some use features which are incompatible with creating local clones that are exact copies.

The `--mirror` option is deprecated, `--sync-policy` should be used instead. 
If the `--mirror` option is used, this will change the default `sync_policy` to `mirror_complete`, 
while a value of `--no-mirror` will not change the default `sync_policy`.

Optionally, you can skip `SRPM` packages by using `--skip_type srpm`
option.

Optionally, you can skip kickstart-trees referred to by a parent repository by using `--skip_type treeinfo`

You can combine these options by specifying `--skip_type srpm --skip-type treeinfo`.

By default, sync will only proceed if changes are present in the remote repository (i.e., `--optimize`).
You can override this by specifying `--no-optimize` which will disable optimizations and
run a full sync.

=== "Sync a Repository"

    ```bash
    #!/usr/bin/env bash
    
    # Sync repository foo using remote bar
    echo "Create a task to sync the repository using the remote."
    pulp rpm repository update --name foo --remote bar
    pulp rpm repository sync --name foo 
    # Show resulting latest-version of foo
    pulp pulp rpm repository version --repository foo
    ```

=== "Output"

    ```json
    {
        "base_version": null,
        "content_summary": {
            "added": {
                "rpm.advisory": {
                    "count": 4,
                    "href": "/pulp/api/v3/content/rpm/advisories/?repository_version_added=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.package": {
                    "count": 35,
                    "href": "/pulp/api/v3/content/rpm/packages/?repository_version_added=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagecategory": {
                    "count": 1,
                    "href": "/pulp/api/v3/content/rpm/packagecategories/?repository_version_added=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagegroup": {
                    "count": 2,
                    "href": "/pulp/api/v3/content/rpm/packagegroups/?repository_version_added=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagelangpacks": {
                    "count": 1,
                    "href": "/pulp/api/v3/content/rpm/packagelangpacks/?repository_version_added=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                }
            },
            "present": {
                "rpm.advisory": {
                    "count": 4,
                    "href": "/pulp/api/v3/content/rpm/advisories/?repository_version=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.package": {
                    "count": 35,
                    "href": "/pulp/api/v3/content/rpm/packages/?repository_version=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagecategory": {
                    "count": 1,
                    "href": "/pulp/api/v3/content/rpm/packagecategories/?repository_version=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagegroup": {
                    "count": 2,
                    "href": "/pulp/api/v3/content/rpm/packagegroups/?repository_version=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                },
                "rpm.packagelangpacks": {
                    "count": 1,
                    "href": "/pulp/api/v3/content/rpm/packagelangpacks/?repository_version=/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
                }
            },
            "removed": {}
        },
        "number": 1,
        "pulp_created": "2019-11-27T13:30:31.961788Z",
        "pulp_href": "/pulp/api/v3/repositories/rpm/rpm/a02ace53-d490-458d-8b93-604fbcd23a9c/versions/1/"
    }
    ```

!!! note
    To set up a regular sync task, use one of the external tools that deal with periodic background jobs.
    Learn more about scheduling tasks [here](site:pulpcore/docs/user/learn/from-pulp-2/#scheduling-tasks).

## Create a Publication

A publication can only be created once a sync task completes. The following optional parameters are available:

- checksum_type: Sets the checksum type to be used by the repository metadata, including primary.xml, repomd.xml, etc.
  If not specified, the default SHA256 algorithm will be used. Because of on_demand sync, it is possible that the
  requested checksum is not available. In such case the available checksum supplied by the remote repo will be used.
- compression_type: Sets the compression type to be used by the repository metadata (primary.xml, filelists.xml, etc.)
  If not specified, the default Gzip algorithm will be used.
  
=== "Create a Publication"

    ```bash
    #!/usr/bin/env bash
    
    # Create RPM publication
    echo "Create a task to create a publication."
    TASK_HREF=$(pulp rpm publication create \
                --repository "${REPO_NAME}" \
                2>&1 >/dev/null | awk '{print $4}')
    
    # After the task is complete, it gives us a new publication
    echo "Set PUBLICATION_HREF from finished task."
    PUBLICATION_HREF=$(pulp show --href "${TASK_HREF}" | jq -r '.created_resources | first')
    export PUBLICATION_HREF
    
    echo "Inspecting Publication."
    pulp show --href "${PUBLICATION_HREF}"
    ```

=== "Create a Publication with a config.repo"

    You can specify various options for the `config.repo` file by passing them to the `--repo-config` option:
    
    ```bash
    pulp rpm publication create \
       --repository "${REPO_NAME}" \
       --repo-config '{"gpgcheck": 1, "repo-gpgcheck": 1}'
    ```

=== "Output"

    ```json
    {
      "pulp_href": "/pulp/api/v3/publications/rpm/rpm/018d9e89-f231-729a-b9ea-1c489e7b0cef/",
      "pulp_created": "2024-02-12T18:17:37.074463Z",
      "repository_version": "/pulp/api/v3/repositories/rpm/rpm/678798cd-9e08-4c9d-9feb-7dc88412b101/versions/1/",
      "repository": "/pulp/api/v3/repositories/rpm/rpm/678798cd-9e08-4c9d-9feb-7dc88412b101/",
      "checksum_type": "sha256",
      "metadata_checksum_type": "sha256",
      "package_checksum_type": "sha256",
      "gpgcheck": null,
      "repo_gpgcheck": null,
      "sqlite_metadata": false,
      "repo_config": {
        "gpgcheck": 1,
        "repo-gpgcheck": 1
      },
      "compression_type": null
    }
    ```

We encourage users to take a look at the [pulp_rpm API documentation](site:pulp_rpm/restapi/#tag/Repositories:-Rpm/operation/repositories_rpm_rpm_create)
to see the default values for these options.

## Create a Distribution for the Publication

=== "Create a Distribution"

    ```bash
    #!/usr/bin/env bash
    
    # Variables
    if [ $# -eq 0 ]; then
      BASE_PATH="foo"
    else
      BASE_PATH="$1"
    fi
    export BASE_PATH
    
    # Create RPM distribution for publication
    pulp rpm distribution create \
      --name "${DIST_NAME}" \
      --base-path "${BASE_PATH}" \
      --publication "${PUBLICATION_HREF}"
    
    # After the task is complete, it gives us a new distribution
    pulp rpm distribution show --name "${DIST_NAME}"
    ```

=== "Output"

    ```json
    {
        "base_path": "foo",
        "base_url": "http://pulp3-source-fedora30.pavels-macbook-pro.example.com/pulp/content/foo",
        "content_guard": null,
        "name": "baz",
        "publication": "/pulp/api/v3/publications/rpm/rpm/c90316fc-bf2a-458a-93b8-d3d75614572f/",
        "pulp_created": "2019-11-27T13:30:38.238857Z",
        "pulp_href": "/pulp/api/v3/distributions/rpm/rpm/c1166d2d-0832-4e90-85fd-e34e94e6a156/"
    }
    ```
`````

## File: pulp-docs/pulp_rpm/docs/user/index.md
`````markdown
# Welcome to Pulp RPM!

The pulp_rpm plugin extends pulpcore to support hosting RPM family content types.

If you just got here, you should take our [Getting Started with RPM](site:pulp_rpm/docs/user/tutorials/create_sync_publish/) tutorial to get your first RPM repository up and running.
We also recommended that you read the [Basic Concepts](site:pulp_rpm/docs/user/learn/concepts/) section before diving into the workflows and reference material.

## Features

- Sync-publish workflow:
    * Support for RPM Packages, Advisories, Modularity, and Comps
    * Support for ULN servers
- Versioned Repositories so every operation is a restorable snapshot
- Download content on-demand when requested by clients to reduce disk space.
- Upload local RPM content
- Add, remove, copy, and organize RPM content into various repositories
- De-duplication of all saved content
- Host content either [locally or on S3](https://github.com/pulp/pulp-oci-images/issues/649)
- View distributions served by pulpcore-content in a browser
`````

## File: pulp-docs/pulp_rpm/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 3.30.1 (2025-06-08) {: #3.30.1 }

#### Bugfixes {: #3.30.1-bugfix }

- Significantly improved publish performance (more than double in some cases) by fixing some Django queries.

---

## 3.30.0 (2025-05-12) {: #3.30.0 }

#### Features {: #3.30.0-feature }

- Enabled the checkpoint feature in pulp_rpm.
  [#3907](https://github.com/pulp/pulp_rpm/issues/3907)

#### Bugfixes {: #3.30.0-bugfix }

- Fix a memory consumption issue w/ syncing repositories that contain modules.
  [#3311](https://github.com/pulp/pulp_rpm/issues/3311)
- Fixed RPM signing with chunked uploads
  [#3927](https://github.com/pulp/pulp_rpm/issues/3927)

#### Deprecations and Removals {: #3.30.0-removal }

- Using the 'gpgcheck', 'repo_gpgcheck', 'package_checksum_type', or 'checksum_type' options, which have been deprecated for some time, will no longer have any effect. In the case of 'gpgcheck' or 'repo_gpgcheck', please use the 'repo_config' option instead. In the case of 'package_checksum_type' or 'metadata_checksum_type', please use 'checksum_type' instead.

#### Misc {: #3.30.0-misc }

- 

---

## 3.29.3 (2025-06-08) {: #3.29.3 }

#### Bugfixes {: #3.29.3-bugfix }

- Fixed RPM signing with chunked uploads
  [#3927](https://github.com/pulp/pulp_rpm/issues/3927)
- Significantly improved publish performance (more than double in some cases) by fixing some Django queries.

---

## 3.29.2 (2025-04-23) {: #3.29.2 }

#### Bugfixes {: #3.29.2-bugfix }

- Fix a memory consumption issue w/ syncing repositories that contain modules.
  [#3311](https://github.com/pulp/pulp_rpm/issues/3311)

---

## 3.29.1 (2025-04-04) {: #3.29.1 }

#### Misc {: #3.29.1-misc }

- 

---

## 3.29.0 (2025-03-18) {: #3.29.0 }

#### Features {: #3.29.0-feature }

- Make the layout of the packages in the published repository configurable.
  [#3874](https://github.com/pulp/pulp_rpm/issues/3874)
- Added permissions for set/unset_label on RPM content-types.

  The types that support this new call include:
    * Package
    * UpdateRecord
    * Modulemd
    * ModulemdDefaults
    * ModulemdObsoletes
  [#3896](https://github.com/pulp/pulp_rpm/issues/3896)

#### Bugfixes {: #3.29.0-bugfix }

- Added a retry mechanism for client authentication in ULN-based downloaders to improve connection stability.
  [#3891](https://github.com/pulp/pulp_rpm/issues/3891)
- Reworked content-labeling RBAC to rely on core.manage_content_labels permission.

  This permission must be explicitly granted by assigning the core.content_labeler Role
  to a user.
  [#3910](https://github.com/pulp/pulp_rpm/issues/3910)

---

## 3.28.1 (2025-03-18) {: #3.28.1 }

No significant changes.

---

## 3.28.0 (2025-02-17) {: #3.28.0 }

#### Bugfixes {: #3.28.0-bugfix }

- Honor repository's compression_type for publications unless overridden
  [#3614](https://github.com/pulp/pulp_rpm/issues/3614)
- Declared compatibility against pulpcore<3.70.
  [#3620](https://github.com/pulp/pulp_rpm/issues/3620)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  [#3639](https://github.com/pulp/pulp_rpm/issues/3639)
- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)
- Make it possible to sync repositories without filelists.xml or other.xml metadata
  [#3777](https://github.com/pulp/pulp_rpm/issues/3777)
- Extended PRN support to Advanced Copy API and DistributionTree.
  [#3853](https://github.com/pulp/pulp_rpm/issues/3853)

#### Improved Documentation {: #3.28.0-doc }

- Updated documentation for prune and advanced-copy to use pulp-cli examples.
  [#3622](https://github.com/pulp/pulp_rpm/issues/3622)

#### Misc {: #3.28.0-misc }

- [#3828](https://github.com/pulp/pulp_rpm/issues/3828), [#3854](https://github.com/pulp/pulp_rpm/issues/3854), [#3856](https://github.com/pulp/pulp_rpm/issues/3856)

---

## 3.27.4 (2025-06-08) {: #3.27.4 }

#### Bugfixes {: #3.27.4-bugfix }

- Fixed RPM signing with chunked uploads
  [#3927](https://github.com/pulp/pulp_rpm/issues/3927)
- Significantly improved publish performance (more than double in some cases) by fixing some Django queries.

---

## 3.27.3 (2025-04-23) {: #3.27.3 }

#### Bugfixes {: #3.27.3-bugfix }

- Fix a memory consumption issue w/ syncing repositories that contain modules.
  [#3311](https://github.com/pulp/pulp_rpm/issues/3311)

---

## 3.27.2 (2024-10-17) {: #3.27.2 }

#### Bugfixes {: #3.27.2-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  [#3639](https://github.com/pulp/pulp_rpm/issues/3639)
- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)

---

## 3.27.1 (2024-06-20) {: #3.27.1 }


#### Features {: #3.27.1-feature }

- Honor repository's compression_type for publications unless overridden
  [#3614](https://github.com/pulp/pulp_rpm/issues/3614)

#### Bugfixes {: #3.27.1-bugfix }

- Declared compatibility against pulpcore<3.70.
  [#3620](https://github.com/pulp/pulp_rpm/issues/3620)

---

## 3.27.0 (2024-06-16) {: #3.27.0 }


#### Features {: #3.27.0-feature }

- Added /rpm/prune/ endpoint to allow "pruning" old Packages from repositories.
  [#2909](https://github.com/pulp/pulp_rpm/issues/2909)
- Added (tech preview) support for signing RPM packages when uploading to a Repository.
  [#2986](https://github.com/pulp/pulp_rpm/issues/2986)

#### Bugfixes {: #3.27.0-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)
- Made sync more tolerant of poorly configured webservers.
  [#3599](https://github.com/pulp/pulp_rpm/issues/3599)

---

## 3.26.5 (2025-04-23) {: #3.26.5 }

#### Bugfixes {: #3.26.5-bugfix }

- Fix a memory consumption issue w/ syncing repositories that contain modules.
  [#3311](https://github.com/pulp/pulp_rpm/issues/3311)

---

## 3.26.4 (2025-03-18) {: #3.26.4 }

No significant changes.

---

## 3.26.3 (2024-10-21) {: #3.26.3 }

#### Bugfixes {: #3.26.3-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  [#3639](https://github.com/pulp/pulp_rpm/issues/3639)

---

## 3.26.2 (2024-10-17) {: #3.26.2 }

#### Bugfixes {: #3.26.2-bugfix }

- Honor repository's compression_type for publications unless overridden
  [#3614](https://github.com/pulp/pulp_rpm/issues/3614)
- Declared compatibility against pulpcore<3.70.
  [#3620](https://github.com/pulp/pulp_rpm/issues/3620)
- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)

---

## 3.26.1 (2024-06-16) {: #3.26.1 }


#### Bugfixes {: #3.26.1-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)
- Made sync more tolerant of poorly configured webservers.
  [#3599](https://github.com/pulp/pulp_rpm/issues/3599)

---

## 3.26.0 (2024-05-28) {: #3.26.0 }

### Features

-   Added django admin command to analyse repository disk size.
    [#3003](https://github.com/pulp/pulp_rpm/issues/3003)
-   Added support for `repository-size` management command.
    [#3312](https://github.com/pulp/pulp_rpm/issues/3312)

### Bugfixes

-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)
-   Fixed modulemd upload raising an error when "packages" parameter was passed.
    [#3427](https://github.com/pulp/pulp_rpm/issues/3427)
-   Fixed an issue where the value of gpgcheck wasn't appropriately set on some publications.
    [#3462](https://github.com/pulp/pulp_rpm/issues/3462)
-   Fix publications created by mirror_complete syncs not having checksum_type set properly.
    [#3484](https://github.com/pulp/pulp_rpm/issues/3484)
-   Fixed modulemd_defaults create endpoint not setting the content digest.
    [#3495](https://github.com/pulp/pulp_rpm/issues/3495)

### Improved Documentation

-   Improved pages about Post/Delete Content (from Pulp) and Add/Remove/Copy existing Content (from Repos).
    [#3482](https://github.com/pulp/pulp_rpm/issues/3482)

### Misc

-   [#3445](https://github.com/pulp/pulp_rpm/issues/3445), [#3520](https://github.com/pulp/pulp_rpm/issues/3520), [#3526](https://github.com/pulp/pulp_rpm/issues/3526)

---

## 3.25.6 (2024-10-17) {: #3.25.6 }

#### Bugfixes {: #3.25.6-bugfix }

- Honor repository's compression_type for publications unless overridden
  [#3614](https://github.com/pulp/pulp_rpm/issues/3614)
- Declared compatibility against pulpcore<3.70.
  [#3620](https://github.com/pulp/pulp_rpm/issues/3620)
- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)

---

## 3.25.5 (2024-06-16) {: #3.25.5 }


#### Bugfixes {: #3.25.5-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)
- Made sync more tolerant of poorly configured webservers.
  [#3599](https://github.com/pulp/pulp_rpm/issues/3599)

#### Misc {: #3.25.5-misc }

- [#3520](https://github.com/pulp/pulp_rpm/issues/3520)

---

## 3.25.4 (2024-05-28) {: #3.25.4 }

### Bugfixes

-   Fixed modulemd upload raising an error when "packages" parameter was passed.
    [#3427](https://github.com/pulp/pulp_rpm/issues/3427)

### Misc

-   [#3526](https://github.com/pulp/pulp_rpm/issues/3526)

---

## 3.25.3 (2024-04-18) {: #3.25.3 }

### Bugfixes

-   Fix publications created by mirror_complete syncs not having checksum_type set properly.
    [#3484](https://github.com/pulp/pulp_rpm/issues/3484)
-   Fixed modulemd_defaults create endpoint not setting the content digest.
    [#3495](https://github.com/pulp/pulp_rpm/issues/3495)

---

## 3.25.2 (2024-04-02) {: #3.25.2 }

### Bugfixes

-   Fixed an issue where the value of gpgcheck wasn't appropriately set on some publications.
    [#3462](https://github.com/pulp/pulp_rpm/issues/3462)

---

## 3.25.1 (2024-02-09) {: #3.25.1 }

### Bugfixes

-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.25.0 (2024-01-18) {: #3.25.0 }

### Features

-   Added a `compression_type` option to allow publishing metadata files with zstd compression (in addition to the default gzip).
    [#3316](https://github.com/pulp/pulp_rpm/issues/3316)
-   Raised pulpcore requirement to 3.44.1 to fix an RBAC related bug.
    [#3381](https://github.com/pulp/pulp_rpm/issues/3381)

### Bugfixes

-   Added support for preventing unquoted NSVCA numerical values (e.g. `"stream": 2.10`) of having zeros stripped on modulemd YAML files.
    [#3285](https://github.com/pulp/pulp_rpm/issues/3285)
-   Fixed bug about malformed tuple introduced on the removal of sqlite-metadata support (PR #3328).
    [#3351](https://github.com/pulp/pulp_rpm/issues/3351)
-   Fixed server error when trying to create repository with deprecated gpgcheck and repo_gpgcheck.
    [#3357](https://github.com/pulp/pulp_rpm/issues/3357)
-   Fixes bug where RpmPublications couldn't be created when using a non-admin user.
    [#3381](https://github.com/pulp/pulp_rpm/issues/3381)

### Deprecations and Removals

-   Removed the ability to generate sqlite metadata during repository publish.
    [#2457](https://github.com/pulp/pulp_rpm/issues/2457)
-   Removed support for publishing repos with a checksum type of md5, sha1, or sha224
    [#2488](https://github.com/pulp/pulp_rpm/issues/2488)

### Misc

-   [#3345](https://github.com/pulp/pulp_rpm/issues/3345)

---

## 3.24.1 (2024-01-05) {: #3.24.1 }

### Bugfixes

-   Added support for preventing unquoted NSVCA numerical values (e.g. `"stream": 2.10`) of having zeros stripped on modulemd YAML files.
    [#3285](https://github.com/pulp/pulp_rpm/issues/3285)
-   Fixed server error when trying to create repository with deprecated gpgcheck and repo_gpgcheck.
    [#3357](https://github.com/pulp/pulp_rpm/issues/3357)

---

## 3.24.0 (2023-11-03) {: #3.24.0 }

### Features

-   Added pulpcore 3.40 compatibility.
-   Added ability to customize config .repo file.
    [#2295](https://github.com/pulp/pulp_rpm/issues/2295)
-   Added new json field repo_config that can be used to configure .repo file
    [#2902](https://github.com/pulp/pulp_rpm/issues/2902)
-   Added new json field `repo_config` that can be used to configure .repo file.
    [#2903](https://github.com/pulp/pulp_rpm/issues/2903)

### Bugfixes

-   Improved performance by reducing the number of small queries during exports.
    [#3286](https://github.com/pulp/pulp_rpm/issues/3286)

---

## 3.23.6 (2025-04-23) {: #3.23.6 }

#### Bugfixes {: #3.23.6-bugfix }

- Fix a memory consumption issue w/ syncing repositories that contain modules.
  [#3311](https://github.com/pulp/pulp_rpm/issues/3311)

---

## 3.23.5 (2025-03-18) {: #3.23.5 }

#### Bugfixes {: #3.23.5-bugfix }

- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)

---

## 3.23.4 (2024-06-16) {: #3.23.4 }


#### Bugfixes {: #3.23.4-bugfix }

- Fixed modulemd upload raising an error when "packages" parameter was passed.
  [#3427](https://github.com/pulp/pulp_rpm/issues/3427)
- Fixed modulemd_defaults create endpoint not setting the content digest.
  [#3495](https://github.com/pulp/pulp_rpm/issues/3495)
- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)
- Made sync more tolerant of poorly configured webservers.
  [#3599](https://github.com/pulp/pulp_rpm/issues/3599)

---

## 3.23.3 (2024-02-09) {: #3.23.3 }

### Bugfixes

-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.23.2 (2024-01-27) {: #3.23.2 }

No significant changes.

---

## 3.23.1 (2024-01-26) {: #3.23.1 }

### Bugfixes

-   Added support for preventing unquoted NSVCA numerical values (e.g. `"stream": 2.10`) of having zeros stripped on modulemd YAML files.
    [#3285](https://github.com/pulp/pulp_rpm/issues/3285)

---

## 3.23.0 (2023-10-13) {: #3.23.0 }

### Features

-   Added NOCACHE_LIST config to enable specifying files to be served with a no-cache header.

    By default, repomd.xml, repomd.key, and repomd.key.asc are served with
    Cache-control: no-cache.
    [#2947](https://github.com/pulp/pulp_rpm/issues/2947)

-   Added to the distribution generate_repo_config field specifying whether Pulp should generate
    `*.repo` files. Defaults to False.
    [#2985](https://github.com/pulp/pulp_rpm/issues/2985)

-   Added a `filename` filter to package list endpoint.
    [#3215](https://github.com/pulp/pulp_rpm/issues/3215)

-   Adjusted default access policies for new labels api.
    [#3243](https://github.com/pulp/pulp_rpm/issues/3243)

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)
-   Don't write invalid characters to a repo id, even if the distro name contains them.
    [#3170](https://github.com/pulp/pulp_rpm/issues/3170)
-   Made 0048 migration more robust in the face of unexpected data.
    [#3177](https://github.com/pulp/pulp_rpm/issues/3177)
-   Stopped package upload to parse the artifact twice.
    [#3183](https://github.com/pulp/pulp_rpm/issues/3183)
-   Remove the non functional `retrieve` logic from advisories upload, fixing a bug that appeared
    with pulpcore >= 3.29.
    [#3195](https://github.com/pulp/pulp_rpm/issues/3195)
-   Made 0049 migration more robust in the face of unexpected data.
    [#3196](https://github.com/pulp/pulp_rpm/issues/3196)
-   Adjust modules uniqueness to allow two modules with same NSVCA but different snippet content.
    [#3241](https://github.com/pulp/pulp_rpm/issues/3241)
-   Improved performance of exports significantly in some circumstances by optimizing a query.
    [#3259](https://github.com/pulp/pulp_rpm/issues/3259)
-   Fixed sporadic error due to to set domain on non-Content objects at sync time.
    [#3275](https://github.com/pulp/pulp_rpm/issues/3275)

### Misc

-   [#3217](https://github.com/pulp/pulp_rpm/issues/3217), [#3225](https://github.com/pulp/pulp_rpm/issues/3225), [#3226](https://github.com/pulp/pulp_rpm/issues/3226), [#3234](https://github.com/pulp/pulp_rpm/issues/3234), [#3254](https://github.com/pulp/pulp_rpm/issues/3254)

---

## 3.22.9 (2025-03-18) {: #3.22.9 }

#### Bugfixes {: #3.22.9-bugfix }

- Fixed stacktrace from create_modulemd() when trying to report an error.
  [#3756](https://github.com/pulp/pulp_rpm/issues/3756)

---

## 3.22.8 (2024-06-16) {: #3.22.8 }


#### Bugfixes {: #3.22.8-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)

---

## 3.22.7 (2024-02-09) {: #3.22.7 }

### Bugfixes

-   Added support for preventing unquoted NSVCA numerical values (e.g. `"stream": 2.10`) of having zeros stripped on modulemd YAML files.
    [#3285](https://github.com/pulp/pulp_rpm/issues/3285)
-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.22.6 (2023-10-16) {: #3.22.6 }

### Bugfixes

-   Fixed sporadic error due to to set domain on non-Content objects at sync time.
    [#3275](https://github.com/pulp/pulp_rpm/issues/3275)
-   Improved performance by reducing the number of small queries during exports.
    [#3286](https://github.com/pulp/pulp_rpm/issues/3286)

### Misc

-   [#3254](https://github.com/pulp/pulp_rpm/issues/3254)

---

## 3.22.5 (2023-09-29) {: #3.22.5 }

### Bugfixes

-   Improved performance of exports significantly in some circumstances by optimizing a query.
    [#3259](https://github.com/pulp/pulp_rpm/issues/3259)

---

## 3.22.4 (2023-09-18) {: #3.22.4 }

### Misc

-   [#3225](https://github.com/pulp/pulp_rpm/issues/3225), [#3226](https://github.com/pulp/pulp_rpm/issues/3226)

---

## 3.22.3 (2023-07-26) {: #3.22.3 }

### Bugfixes

-   Stopped package upload to parse the artifact twice.
    [#3183](https://github.com/pulp/pulp_rpm/issues/3183)
-   Remove the non functional `retrieve` logic from advisories upload, fixing a bug that appeared
    with pulpcore >= 3.29.
    [#3195](https://github.com/pulp/pulp_rpm/issues/3195)
-   Made 0049 migration more robust in the face of unexpected data.
    [#3196](https://github.com/pulp/pulp_rpm/issues/3196)

---

## 3.22.2 (2023-07-06) {: #3.22.2 }

### Bugfixes

-   Made 0048 migration more robust in the face of unexpected data.
    [#3177](https://github.com/pulp/pulp_rpm/issues/3177)

---

## 3.22.1 (2023-06-14) {: #3.22.1 }

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)
-   Don't write invalid characters to a repo id, even if the distro name contains them.
    [#3170](https://github.com/pulp/pulp_rpm/issues/3170)

---

## 3.22.0 (2023-06-12) {: #3.22.0 }

### Features

-   Added support for Domains.
    [#3008](https://github.com/pulp/pulp_rpm/issues/3008)

---

## 3.21.1 (2023-07-06) {: #3.21.1 }

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)
-   Made 0048 migration more robust in the face of unexpected data.
    [#3177](https://github.com/pulp/pulp_rpm/issues/3177)

---

## 3.21.0 (2023-05-17) {: #3.21.0 }

### Features

-   Declares (and requires at least) pulpcore/3.25 compatibility.
    [#3151](https://github.com/pulp/pulp_rpm/issues/3151)

### Improved Documentation

-   Fixed infinite loading when searching for specific terms.
    [#3150](https://github.com/pulp/pulp_rpm/issues/3150)

---

## 3.20.0 (2023-05-05) {: #3.20.0 }

### Features

-   The package upload feature was changed to allow the upload of packages which are already
    uploaded - in this scenario, the API will display the existing package as if it had just
    been created.
    [#2764](https://github.com/pulp/pulp_rpm/issues/2764)
-   Added the ability to replicate RPM distributions/repositories from an upstream Pulp instance.
    [#2995](https://github.com/pulp/pulp_rpm/issues/2995)
-   Added a new setting `RPM_METADATA_USE_REPO_PACKAGE_TIME` that will set the primary.xml timestamp
    of each package to when the package was added to the repo rather than when the package first
    appeared in Pulp.
    [#3009](https://github.com/pulp/pulp_rpm/issues/3009)
-   Added more filter options on the packages API.
    [#3135](https://github.com/pulp/pulp_rpm/issues/3135)

### Bugfixes

-   Publish all metadata with a stable sort order. This should reduce artifact churn when certain metadata files are published repeatedly unchanged.
    [#2752](https://github.com/pulp/pulp_rpm/issues/2752)
-   Fixed a failure that can occur during migration from 3.17 to 3.18
    [#2952](https://github.com/pulp/pulp_rpm/issues/2952)
-   Fix a minor module metadata parsing regression that broke Pulp-to-Pulp sync in some scenarios.
    [#2961](https://github.com/pulp/pulp_rpm/issues/2961)
-   Stopped publishing updateinfo.xml when there are no advisories.
    [#2967](https://github.com/pulp/pulp_rpm/issues/2967)
-   Fixed 0044_noartifact_modules migration that was failing with object storage.
    [#2988](https://github.com/pulp/pulp_rpm/issues/2988)
-   Loosen modulemd validation to allow version numbers that have string type but represent integers
    [#2998](https://github.com/pulp/pulp_rpm/issues/2998)
-   Fixed a regression in 3.19 which resulted in unintentional API changes and problems with "depsolving" repo copy.
    [#3012](https://github.com/pulp/pulp_rpm/issues/3012)
-   Fix import/export not importing modulemd_packages data with ManyToMany relationship.
    [#3019](https://github.com/pulp/pulp_rpm/issues/3019)
-   Fix relative path and location href mismatch of the uploaded rpm caused by filename and rpm header mismatch. Clients are getting HTTP 404 Not Found error when downloading the rpm.
    [#3039](https://github.com/pulp/pulp_rpm/issues/3039)
-   Fix a bug with copying modules with depsolving enabled - dependencies were not copied.
    [#3119](https://github.com/pulp/pulp_rpm/issues/3119)
-   Fix a bug for certain repos (e.g. mercurial) relating to how modules are handled.
    [#3121](https://github.com/pulp/pulp_rpm/issues/3121)
-   Fix an issue where the name of UpdateCollection is not defined and might affect import/export, and added a data repair script (pulpcore-manager rpm-datarepair 3127).
    [#3127](https://github.com/pulp/pulp_rpm/issues/3127)
-   Fixes an accidental change that was made to how "profiles" are formatted in the modulemd API.
    [#3131](https://github.com/pulp/pulp_rpm/issues/3131)

### Misc

-   [#2242](https://github.com/pulp/pulp_rpm/issues/2242), [#2867](https://github.com/pulp/pulp_rpm/issues/2867), [#2868](https://github.com/pulp/pulp_rpm/issues/2868), [#2869](https://github.com/pulp/pulp_rpm/issues/2869), [#2870](https://github.com/pulp/pulp_rpm/issues/2870), [#2871](https://github.com/pulp/pulp_rpm/issues/2871), [#2873](https://github.com/pulp/pulp_rpm/issues/2873), [#2874](https://github.com/pulp/pulp_rpm/issues/2874), [#2875](https://github.com/pulp/pulp_rpm/issues/2875), [#2876](https://github.com/pulp/pulp_rpm/issues/2876), [#2877](https://github.com/pulp/pulp_rpm/issues/2877), [#2878](https://github.com/pulp/pulp_rpm/issues/2878), [#2879](https://github.com/pulp/pulp_rpm/issues/2879), [#2880](https://github.com/pulp/pulp_rpm/issues/2880), [#2881](https://github.com/pulp/pulp_rpm/issues/2881), [#2882](https://github.com/pulp/pulp_rpm/issues/2882), [#2883](https://github.com/pulp/pulp_rpm/issues/2883), [#2884](https://github.com/pulp/pulp_rpm/issues/2884), [#2885](https://github.com/pulp/pulp_rpm/issues/2885), [#2887](https://github.com/pulp/pulp_rpm/issues/2887), [#3076](https://github.com/pulp/pulp_rpm/issues/3076), [#3077](https://github.com/pulp/pulp_rpm/issues/3077), [#3078](https://github.com/pulp/pulp_rpm/issues/3078), [#3079](https://github.com/pulp/pulp_rpm/issues/3079), [#3095](https://github.com/pulp/pulp_rpm/issues/3095)

---

## 3.19.13 (2025-03-18) {: #3.19.13 }

#### Bugfixes {: #3.19.13-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)

---

## 3.19.12 (2024-02-09) {: #3.19.12 }

### Bugfixes

-   Added support for preventing unquoted NSVCA numerical values (e.g. `"stream": 2.10`) of having zeros stripped on modulemd YAML files.
    [#3285](https://github.com/pulp/pulp_rpm/issues/3285)
-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.19.11 (2023-10-16) {: #3.19.11 }

### Bugfixes

-   Improved performance by reducing the number of small queries during exports.
    [#3286](https://github.com/pulp/pulp_rpm/issues/3286)

### Misc

-   [#3254](https://github.com/pulp/pulp_rpm/issues/3254)

---

## 3.19.10 (2023-09-29) {: #3.19.10 }

### Bugfixes

-   Improved performance of exports significantly in some circumstances by optimizing a query.
    [#3259](https://github.com/pulp/pulp_rpm/issues/3259)

### Misc

-   [#3225](https://github.com/pulp/pulp_rpm/issues/3225), [#3226](https://github.com/pulp/pulp_rpm/issues/3226)

---

## 3.19.9 (2023-07-24) {: #3.19.9 }

### Bugfixes

-   Made 0049 migration more robust in the face of unexpected data.
    [#3196](https://github.com/pulp/pulp_rpm/issues/3196)

---

## 3.19.8 (2023-07-06) {: #3.19.8 }

### Bugfixes

-   Made 0048 migration more robust in the face of unexpected data.
    [#3177](https://github.com/pulp/pulp_rpm/issues/3177)

---

## 3.19.7 (2023-06-14) {: #3.19.7 }

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)

---

## 3.19.6 (2023-05-05) {: #3.19.6 }

### Bugfixes

-   Fix an issue where the name of UpdateCollection is not defined and might affect import/export, and added a data repair script (ulpcore-manager rpm-datarepair 3127).
    [#3127](https://github.com/pulp/pulp_rpm/issues/3127)
-   Fixes an accidental change that was made to how "profiles" are formatted in the modulemd API.
    [#3131](https://github.com/pulp/pulp_rpm/issues/3131)

---

## 3.19.5 (2023-05-02) {: #3.19.5 }

### Bugfixes

-   Fix a bug with copying modules with depsolving enabled - dependencies were not copied.
    [#3119](https://github.com/pulp/pulp_rpm/issues/3119)
-   Fix a bug for certain repos (e.g. mercurial) relating to how modules are handled.
    [#3121](https://github.com/pulp/pulp_rpm/issues/3121)

---

## 3.19.4 (2023-04-10) {: #3.19.4 }

### Bugfixes

-   Fix import/export not importing modulemd_packages data with ManyToMany relationship.
    [#3019](https://github.com/pulp/pulp_rpm/issues/3019)

### Misc

-   [#2869](https://github.com/pulp/pulp_rpm/issues/2869), [#2873](https://github.com/pulp/pulp_rpm/issues/2873), [#2877](https://github.com/pulp/pulp_rpm/issues/2877), [#2880](https://github.com/pulp/pulp_rpm/issues/2880), [#2883](https://github.com/pulp/pulp_rpm/issues/2883), [#2884](https://github.com/pulp/pulp_rpm/issues/2884), [#2885](https://github.com/pulp/pulp_rpm/issues/2885), [#2887](https://github.com/pulp/pulp_rpm/issues/2887), [#3076](https://github.com/pulp/pulp_rpm/issues/3076)

---

## 3.19.3 (2023-03-29) {: #3.19.3 }

### Bugfixes

-   Fix relative path and location href mismatch of the uploaded rpm caused by filename and rpm header mismatch. Clients are getting HTTP 404 Not Found error when downloading the rpm.
    [#3039](https://github.com/pulp/pulp_rpm/issues/3039)

### Misc

-   [#2867](https://github.com/pulp/pulp_rpm/issues/2867), [#2868](https://github.com/pulp/pulp_rpm/issues/2868), [#2870](https://github.com/pulp/pulp_rpm/issues/2870), [#2871](https://github.com/pulp/pulp_rpm/issues/2871), [#2878](https://github.com/pulp/pulp_rpm/issues/2878), [#2879](https://github.com/pulp/pulp_rpm/issues/2879), [#2882](https://github.com/pulp/pulp_rpm/issues/2882)

---

## 3.19.2 (2023-03-20) {: #3.19.2 }

### Bugfixes

-   Loosen modulemd validation to allow version numbers that have string type but represent integers
    [#2998](https://github.com/pulp/pulp_rpm/issues/2998)
-   Fixed a regression in 3.19 which resulted in unintentional API changes and problems with "depsolving" repo copy.
    [#3012](https://github.com/pulp/pulp_rpm/issues/3012)

### Misc

-   [#2242](https://github.com/pulp/pulp_rpm/issues/2242), [#2876](https://github.com/pulp/pulp_rpm/issues/2876)

---

## 3.19.1 (2023-03-06) {: #3.19.1 }

### Bugfixes

-   Publish all metadata with a stable sort order. This should reduce artifact churn when certain metadata files are published repeatedly unchanged.
    [#2752](https://github.com/pulp/pulp_rpm/issues/2752)
-   Fixed a failure that can occur during migration from 3.17 to 3.18
    [#2952](https://github.com/pulp/pulp_rpm/issues/2952)
-   Fix a minor module metadata parsing regression that broke Pulp-to-Pulp sync in some scenarios.
    [#2961](https://github.com/pulp/pulp_rpm/issues/2961)
-   Stopped publishing updateinfo.xml when there are no advisories.
    [#2967](https://github.com/pulp/pulp_rpm/issues/2967)
-   Fixed 0044_noartifact_modules migration that was failing with object storage.
    [#2988](https://github.com/pulp/pulp_rpm/issues/2988)

### Misc

-   [#2874](https://github.com/pulp/pulp_rpm/issues/2874), [#2881](https://github.com/pulp/pulp_rpm/issues/2881)

---

## 3.19.0 (2023-02-06) {: #3.19.0 }

### Features

-   Add RBAC support for RPM plugin.
    [#2272](https://github.com/pulp/pulp_rpm/issues/2272)
-   Add documentation for RBAC.
    [#2506](https://github.com/pulp/pulp_rpm/issues/2506)
-   Enabled pulp_rpm to take advantage of "create_repositories" at PulpImport time.
    [#2585](https://github.com/pulp/pulp_rpm/issues/2585)
-   Added new condition on uploads to require `repository` field if user is not an admin.
    [#2588](https://github.com/pulp/pulp_rpm/issues/2588)
-   Added "treeinfo" to available skip_types at sync-time. This option
    allows the user to sync a repository without pulling down
    kickstart data and sub-repositories.
    [#2848](https://github.com/pulp/pulp_rpm/issues/2848)

### Bugfixes

-   Fixed concurrent-overlapping-sync of subrepos by making them repository-unique.

    This change is transparent to end-users.
    [#2278](https://github.com/pulp/pulp_rpm/issues/2278)

-   Perform a data repair during the sync process to address a couple of data quality issues. Namely: fix changelogs in some cases where what is saved no longer matches what is synced, and fix packages which were previously incorrectly marked as non-modular.
    [#2643](https://github.com/pulp/pulp_rpm/issues/2643)

-   Deduplicate file entries
    [#2719](https://github.com/pulp/pulp_rpm/issues/2719)

-   Fix recreation of modular snippet when missing.
    [#2735](https://github.com/pulp/pulp_rpm/issues/2735)

-   Allow syncing repos with a compressed comps.xml "group" metadata declared in repomd.xml.
    [#2753](https://github.com/pulp/pulp_rpm/issues/2753)

-   Fix migration from modular artifacts to db snippets.
    [#2777](https://github.com/pulp/pulp_rpm/issues/2777)

-   Fix metadata for users who already attempted to migrate to `3.18.1` unsuccessfully.
    [#2786](https://github.com/pulp/pulp_rpm/issues/2786)

-   Ensured unsupported metadata files are also handled during publish.
    [#2795](https://github.com/pulp/pulp_rpm/issues/2795)

-   Taught RPM how to handle duplicate-advisory-ids at repository-version-create time.
    [#2821](https://github.com/pulp/pulp_rpm/issues/2821)

-   Fix migration of modular snippets from filesystem to DB.
    [#2827](https://github.com/pulp/pulp_rpm/issues/2827)

-   Fix migrations to work on any storage backend.
    [#2843](https://github.com/pulp/pulp_rpm/issues/2843)

-   Fix syncing repos with missing epoch metadata for packages.
    [#2858](https://github.com/pulp/pulp_rpm/issues/2858)

-   Fix an issue where the public key (repomd.xml.key) files generated by Pulp would be empty.
    [#2892](https://github.com/pulp/pulp_rpm/issues/2892)

### Misc

-   [#2718](https://github.com/pulp/pulp_rpm/issues/2718), [#2791](https://github.com/pulp/pulp_rpm/issues/2791), [#2805](https://github.com/pulp/pulp_rpm/issues/2805), [#2832](https://github.com/pulp/pulp_rpm/issues/2832), [#2886](https://github.com/pulp/pulp_rpm/issues/2886), [#2905](https://github.com/pulp/pulp_rpm/issues/2905)

---

## 3.18.21 (2024-06-20) {: #3.18.21 }


#### Bugfixes {: #3.18.21-bugfix }

- Taught tests to find centos8 at vault.centos.org.
  [#3572](https://github.com/pulp/pulp_rpm/issues/3572)
- Fix a flaw that still allowed to add duplicate advisories to a repository version.
  [#3587](https://github.com/pulp/pulp_rpm/issues/3587)

---

## 3.18.20 (2024-02-09) {: #3.18.20 }

### Bugfixes

-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.18.19 (2023-10-16) {: #3.18.19 }

### Bugfixes

-   Improved performance by reducing the number of small queries during exports.
    [#3286](https://github.com/pulp/pulp_rpm/issues/3286)

### Misc

-   [#3254](https://github.com/pulp/pulp_rpm/issues/3254)

---

## 3.18.18 (2023-09-29) {: #3.18.18 }

### Bugfixes

-   Improved performance of exports significantly in some circumstances by optimizing a query.
    [#3259](https://github.com/pulp/pulp_rpm/issues/3259)

### Misc

-   [#3225](https://github.com/pulp/pulp_rpm/issues/3225), [#3226](https://github.com/pulp/pulp_rpm/issues/3226)

---

## 3.18.17 (2023-06-14) {: #3.18.17 }

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)

---

## 3.18.16 (2023-05-05) {: #3.18.16 }

### Bugfixes

-   Fix an issue where the name of UpdateCollection is not defined and might affect import/export, and added a data repair script (pulpcore-manager rpm-datarepair 3127).
    [#3127](https://github.com/pulp/pulp_rpm/issues/3127)

---

## 3.18.15 (2023-05-02) {: #3.18.15 }

### Bugfixes

-   Fix a bug with copying modules with depsolving enabled - dependencies were not copied.
    [#3119](https://github.com/pulp/pulp_rpm/issues/3119)

---

## 3.18.14 (2023-04-10) {: #3.18.14 }

### Bugfixes

-   Fix import/export not importing modulemd_packages data with ManyToMany relationship.
    [#3019](https://github.com/pulp/pulp_rpm/issues/3019)

### Misc

-   [#2869](https://github.com/pulp/pulp_rpm/issues/2869), [#2873](https://github.com/pulp/pulp_rpm/issues/2873), [#2877](https://github.com/pulp/pulp_rpm/issues/2877), [#2880](https://github.com/pulp/pulp_rpm/issues/2880), [#2885](https://github.com/pulp/pulp_rpm/issues/2885), [#2887](https://github.com/pulp/pulp_rpm/issues/2887), [#3076](https://github.com/pulp/pulp_rpm/issues/3076)

---

## 3.18.13 (2023-03-29) {: #3.18.13 }

### Bugfixes

-   Fix relative path and location href mismatch of the uploaded rpm caused by filename and rpm header mismatch. Clients are getting HTTP 404 Not Found error when downloading the rpm.
    [#3039](https://github.com/pulp/pulp_rpm/issues/3039)

### Misc

-   [#2242](https://github.com/pulp/pulp_rpm/issues/2242), [#2867](https://github.com/pulp/pulp_rpm/issues/2867), [#2868](https://github.com/pulp/pulp_rpm/issues/2868), [#2870](https://github.com/pulp/pulp_rpm/issues/2870), [#2871](https://github.com/pulp/pulp_rpm/issues/2871), [#2876](https://github.com/pulp/pulp_rpm/issues/2876), [#2878](https://github.com/pulp/pulp_rpm/issues/2878), [#2879](https://github.com/pulp/pulp_rpm/issues/2879), [#2882](https://github.com/pulp/pulp_rpm/issues/2882)

---

## 3.18.12 (2023-03-06) {: #3.18.12 }

### Bugfixes

-   Publish all metadata with a stable sort order. This should reduce artifact churn when certain metadata files are published repeatedly unchanged.
    [#2752](https://github.com/pulp/pulp_rpm/issues/2752)
-   Stopped publishing updateinfo.xml when there are no advisories.
    [#2967](https://github.com/pulp/pulp_rpm/issues/2967)
-   Fixed 0044_noartifact_modules migration that was failing with object storage.
    [#2988](https://github.com/pulp/pulp_rpm/issues/2988)

### Misc

-   [#2874](https://github.com/pulp/pulp_rpm/issues/2874), [#2881](https://github.com/pulp/pulp_rpm/issues/2881), [#2886](https://github.com/pulp/pulp_rpm/issues/2886)

---

## 3.18.11 (2023-02-15) {: #3.18.11 }

### Bugfixes

-   Allow syncing repos with a compressed comps.xml "group" metadata declared in repomd.xml.
    [#2753](https://github.com/pulp/pulp_rpm/issues/2753)

---

## 3.18.10 (2023-01-27) {: #3.18.10 }

### Bugfixes

-   Taught RPM how to handle duplicate-advisory-ids at repository-version-create time.
    [#2821](https://github.com/pulp/pulp_rpm/issues/2821)

### Misc

-   [#2848](https://github.com/pulp/pulp_rpm/issues/2848), [#2905](https://github.com/pulp/pulp_rpm/issues/2905)

---

## 3.18.9 (2022-11-21) {: #3.18.9 }

### Bugfixes

-   Fixed concurrent-overlapping-sync of subrepos by making them repository-unique.

    This change is transparent to end-users.
    [#2278](https://github.com/pulp/pulp_rpm/issues/2278)

-   Fix syncing repos with missing epoch metadata for packages.
    [#2858](https://github.com/pulp/pulp_rpm/issues/2858)

-   Fix an issue where the public key (repomd.xml.key) files generated by Pulp would be empty.
    [#2892](https://github.com/pulp/pulp_rpm/issues/2892)

---

## 3.18.8 (2022-11-07) {: #3.18.8 }

### Bugfixes

-   Fix migrations to work on any storage backend.
    [#2843](https://github.com/pulp/pulp_rpm/issues/2843)

### Misc

-   [#2791](https://github.com/pulp/pulp_rpm/issues/2791), [#2832](https://github.com/pulp/pulp_rpm/issues/2832)

---

## 3.18.7 (2022-10-12) {: #3.18.7 }

No significant changes.

---

## 3.18.6 (2022-10-12) {: #3.18.6 }

### Bugfixes

-   Deduplicate file entries
    [#2719](https://github.com/pulp/pulp_rpm/issues/2719)
-   Fix recreation of modular snippet when missing.
    [#2735](https://github.com/pulp/pulp_rpm/issues/2735)
-   Fix migration of modular snippets from filesystem to DB.
    [#2827](https://github.com/pulp/pulp_rpm/issues/2827)

---

## 3.18.5 (2022-09-30) {: #3.18.5 }

### Misc

-   [#2805](https://github.com/pulp/pulp_rpm/issues/2805)

---

## 3.18.4 (2022-09-29) {: #3.18.4 }

No significant changes.

---

## 3.18.3 (2022-09-27) {: #3.18.3 }

### Bugfixes

-   Perform a data repair during the sync process to address a couple of data quality issues. Namely: fix changelogs in some cases where what is saved no longer matches what is synced, and fix packages which were previously incorrectly marked as non-modular.
    [#2643](https://github.com/pulp/pulp_rpm/issues/2643)
-   Ensured unsupported metadata files are also handled during publish.
    [#2795](https://github.com/pulp/pulp_rpm/issues/2795)

---

## 3.18.2 (2022-09-19) {: #3.18.2 }

### Bugfixes

-   Fix migration from modular artifacts to db snippets.
    [#2777](https://github.com/pulp/pulp_rpm/issues/2777)

---

## 3.18.1 (2022-09-13) {: #3.18.1 }

### Deprecations and Removals

-   Removed "pulp_rpm to take advantage of "create_repositories" at PulpImport time" due to a compatibility issue - it will be shipped in 3.19.
    [#2585](https://github.com/pulp/pulp_rpm/issues/2585)

### Misc

-   [#2771](https://github.com/pulp/pulp_rpm/issues/2771)

---

## 3.18.0 (2022-09-12) {: #3.18.0 }

### Features

-   RPM metadata is now sorted by package name and version information, which slightly improves compression efficiency.
    [#2274](https://github.com/pulp/pulp_rpm/issues/2274)
-   Make `relative_path` optional when uploading a package.
    [#2440](https://github.com/pulp/pulp_rpm/issues/2440)
-   Shows modulemd profiles and description to user.
    [#2456](https://github.com/pulp/pulp_rpm/issues/2456)
-   Support Modulemd obsoletes.
    [#2570](https://github.com/pulp/pulp_rpm/issues/2570)
-   Enabled pulp_rpm to take advantage of "create_repositories" at PulpImport time.
    [#2585](https://github.com/pulp/pulp_rpm/issues/2585)
-   Keep modular metadata in database as a string instead of saving them to the disk.
    [#2621](https://github.com/pulp/pulp_rpm/issues/2621)

### Bugfixes

-   Fixed treeinfo processing to handle some very old treeinfo formats.
    [#2243](https://github.com/pulp/pulp_rpm/issues/2243)
-   Update installation dependencies.
    [#2289](https://github.com/pulp/pulp_rpm/issues/2289)
-   The use of skip_types while performing a sync under the mirror_complete sync policy is now disallowed. Previously it would be silently ignored instead.
    [#2293](https://github.com/pulp/pulp_rpm/issues/2293)
-   Substantial improvements to the memory consumption of syncs, with a modest improvement in time required to sync.
    [#2296](https://github.com/pulp/pulp_rpm/issues/2296)
-   Improved error reporting in one scenario where it could be highly confusing.
    [#2395](https://github.com/pulp/pulp_rpm/issues/2395)
-   Added an exception for a case where repository metadata is incorrect in such a way that it should not be "mirrored", and a warning in other cases. If these warnings / errors are encountered, the party which manages the repo should be contacted. If it is a public repo, an issue can be filed in our tracker, and we will follow up with that party following confirmation of the issue.
    [#2398](https://github.com/pulp/pulp_rpm/issues/2398)
-   Made sure that Pulp doesn't publish repos with duplicate NEVRA in some edge case scenarios.
    [#2407](https://github.com/pulp/pulp_rpm/issues/2407)
-   Taught advisory-conflict-resolution to handle just-EVR-differences in incoming advisory's
    package-list. This solves the case of repositories that update advisories to always have
    the newest versions of RPMs (looking at you, EPEL...).
    [#2422](https://github.com/pulp/pulp_rpm/issues/2422)
-   Fix ULN remote username and password fields which ought to have been write-only and hidden.
    [#2428](https://github.com/pulp/pulp_rpm/issues/2428)
-   Fix the behavior of gpgcheck and repo_gpgcheck options when specified on the repository.
    [#2430](https://github.com/pulp/pulp_rpm/issues/2430)
-   Fixed an issue that could cause orphan cleanup to fail for certain repos.
    [#2459](https://github.com/pulp/pulp_rpm/issues/2459)
-   Fix an issue where package requirements containing an ampersand character in the name might have their data parsed incorrectly, and added a data repair script (pulpcore-manager rpm-datarepair 2460).
    [#2460](https://github.com/pulp/pulp_rpm/issues/2460)
-   Changed the naming of the trim_rpm_changelogs management command to rpm-trim-changelogs to better match with other command names.
    [#2470](https://github.com/pulp/pulp_rpm/issues/2470)
-   Fixed instances of /tmp/ being used instead of the worker's working directory.
    [#2475](https://github.com/pulp/pulp_rpm/issues/2475)
-   Using retain_package_versions (with the required "additive" sync_policy) will now avoid downloading the older packages when synced with download_policy "on_demand", resulting in much faster and more efficient syncs.
    [#2479](https://github.com/pulp/pulp_rpm/issues/2479)
-   Converted RepoMetadataFile.data_type to TextField in order to drop the max_length restriction.
    [#2501](https://github.com/pulp/pulp_rpm/issues/2501)
-   Fixes ACS to not require `name` in bindings.
    [#2504](https://github.com/pulp/pulp_rpm/issues/2504)
-   Fix ACS to update last refreshed time.
    [#2505](https://github.com/pulp/pulp_rpm/issues/2505)
-   Fixed unix timestamps not being parsed correctly for issued and updated dates.
    [#2528](https://github.com/pulp/pulp_rpm/issues/2528)
-   Fix a small FD leak during complete mirror syncs
    [#2624](https://github.com/pulp/pulp_rpm/issues/2624)
-   Fix import/export of Alma linux repositories.
    [#2648](https://github.com/pulp/pulp_rpm/issues/2648)
-   Improved error message for Alternate Content Source refresh when it has insufficient permissions.
    [#2667](https://github.com/pulp/pulp_rpm/issues/2667)
-   Don't raise a fatal error when encountering mostly valid metadata that contains data we don't expect, or data in the wrong places, in situations where it doesn't really matter.
    [#2686](https://github.com/pulp/pulp_rpm/issues/2686)
-   Allow syncing repositories with duplicate NEVRA in mirror_complete mode, but make sure syncing those packages are skipped.
    [#2691](https://github.com/pulp/pulp_rpm/issues/2691)
-   Do not optimize sync if retain-package-versions was set/changed
    [#2704](https://github.com/pulp/pulp_rpm/issues/2704)
-   Fixed a bug were some SLES repos were publishing metadata with missing drpms.
    [#2705](https://github.com/pulp/pulp_rpm/issues/2705)
-   Fixed orphan cleanup error in case Addon(Variant) were pointing to same subrepo.
    [#2733](https://github.com/pulp/pulp_rpm/issues/2733)

### Improved Documentation

-   Added documentation steps to remove content.
    [#2303](https://github.com/pulp/pulp_rpm/issues/2303)

### Deprecations and Removals

-   sqlite metadata support is being deprecated. See [this discourse thread](https://discourse.pulpproject.org/t/planning-to-remove-a-feature-from-the-rpm-plugin-sqlite-metadata/418) for additional details, or to advocate for the continued support of the feature.
    [#2457](https://github.com/pulp/pulp_rpm/issues/2457)

### Misc

-   [#2245](https://github.com/pulp/pulp_rpm/issues/2245), [#2276](https://github.com/pulp/pulp_rpm/issues/2276), [#2302](https://github.com/pulp/pulp_rpm/issues/2302), [#2560](https://github.com/pulp/pulp_rpm/issues/2560), [#2565](https://github.com/pulp/pulp_rpm/issues/2565), [#2599](https://github.com/pulp/pulp_rpm/issues/2599), [#2620](https://github.com/pulp/pulp_rpm/issues/2620)

---

## 3.17.22 (2024-02-09) {: #3.17.22 }

No significant changes.

---

## 3.17.21 (2024-02-09) {: #3.17.21 }

### Bugfixes

-   Taught RPM how to handle duplicate-advisory-ids at repository-version-create time.
    [#2821](https://github.com/pulp/pulp_rpm/issues/2821)
-   Addressed some edge-cases involving advisory-collection-naming and imports.
    [#3380](https://github.com/pulp/pulp_rpm/issues/3380)

---

## 3.17.20 (2023-10-13) {: #3.17.20 }

### Bugfixes

-   Improved performance by reducing the number of small queries during exports.
    [#3286](https://github.com/pulp/pulp_rpm/issues/3286)

---

## 3.17.19 (2023-10-02) {: #3.17.19 }

### Bugfixes

-   Fixed a deadlock during concurrent syncs of rpm-repos that need data fixups.
    [#2980](https://github.com/pulp/pulp_rpm/issues/2980)
-   Improved performance of exports significantly in some circumstances by optimizing a query.
    [#3259](https://github.com/pulp/pulp_rpm/issues/3259)

---

## 3.17.18 (2023-05-16) {: #3.17.18 }

### Bugfixes

-   Fixed concurrent-overlapping-sync of subrepos by making them repository-unique.

    This change is transparent to end-users.
    [#2278](https://github.com/pulp/pulp_rpm/issues/2278)

---

## 3.17.17 (2023-04-10) {: #3.17.17 }

### Bugfixes

-   Fix import/export not importing modulemd_packages data with ManyToMany relationship.
    [#3019](https://github.com/pulp/pulp_rpm/issues/3019)

---

## 3.17.16 (2023-02-16) {: #3.17.16 }

### Bugfixes

-   Allow syncing repos with a compressed comps.xml "group" metadata declared in repomd.xml.
    [#2753](https://github.com/pulp/pulp_rpm/issues/2753)

---

## 3.17.15 (2022-11-21) {: #3.17.15 }

### Bugfixes

-   Fix syncing repos with missing epoch metadata for packages.
    [#2858](https://github.com/pulp/pulp_rpm/issues/2858)
-   Fix an issue where the public key (repomd.xml.key) files generated by Pulp would be empty.
    [#2892](https://github.com/pulp/pulp_rpm/issues/2892)

---

## 3.17.14 (2022-10-19) {: #3.17.14 }

### Bugfixes

-   Deduplicate file entries
    [#2719](https://github.com/pulp/pulp_rpm/issues/2719)

### Misc

-   [#2791](https://github.com/pulp/pulp_rpm/issues/2791), [#2832](https://github.com/pulp/pulp_rpm/issues/2832)

---

## 3.17.13 (2022-09-27) {: #3.17.13 }

### Bugfixes

-   Perform a data repair during the sync process to address a couple of data quality issues. Namely: fix changelogs in some cases where what is saved no longer matches what is synced, and fix packages which were previously incorrectly marked as non-modular.
    [#2643](https://github.com/pulp/pulp_rpm/issues/2643)
-   Fix import/export of Alma linux repositories.
    [#2648](https://github.com/pulp/pulp_rpm/issues/2648)
-   Do not optimize sync if retain-package-versions was set/changed
    [#2704](https://github.com/pulp/pulp_rpm/issues/2704)
-   Fixed a bug were some SLES repos were publishing metadata with missing drpms.
    [#2705](https://github.com/pulp/pulp_rpm/issues/2705)
-   Fixed orphan cleanup error in case Addon(Variant) were pointing to same subrepo.
    [#2733](https://github.com/pulp/pulp_rpm/issues/2733)
-   Ensured unsupported metadata files are also handled during publish.
    [#2795](https://github.com/pulp/pulp_rpm/issues/2795)

### Misc

-   [#2620](https://github.com/pulp/pulp_rpm/issues/2620)

---

## 3.17.12 (2022-08-16) {: #3.17.12 }

No significant changes.

---

## 3.17.11 (2022-08-15) {: #3.17.11 }

No significant changes.

---

## 3.17.10 (2022-08-08) {: #3.17.10 }

### Bugfixes

-   Made sure that Pulp doesn't publish repos with duplicate NEVRA in some edge case scenarios.
    [#2407](https://github.com/pulp/pulp_rpm/issues/2407)
-   Allow syncing repositories with duplicate NEVRA in mirror_complete mode, but make sure syncing those packages are skipped.
    [#2691](https://github.com/pulp/pulp_rpm/issues/2691)

---

## 3.17.9 (2022-08-03) {: #3.17.9 }

### Bugfixes

-   Don't raise a fatal error when encountering mostly valid metadata that contains data we don't expect, or data in the wrong places, in situations where it doesn't really matter.
    [#2686](https://github.com/pulp/pulp_rpm/issues/2686)

---

## 3.17.8 (2022-08-01) {: #3.17.8 }

### Bugfixes

-   Improved error reporting in one scenario where it could be highly confusing.
    [#2395](https://github.com/pulp/pulp_rpm/issues/2395)
-   Fix package temporary upload path.
    [#2403](https://github.com/pulp/pulp_rpm/issues/2403)
-   Using retain_package_versions (with the required "additive" sync_policy) will now avoid downloading the older packages when synced with download_policy "on_demand", resulting in much faster and more efficient syncs.
    [#2479](https://github.com/pulp/pulp_rpm/issues/2479)
-   Improved error message for Alternate Content Source refresh when it has insufficient permissions.
    [#2667](https://github.com/pulp/pulp_rpm/issues/2667)

### Misc

-   [#2565](https://github.com/pulp/pulp_rpm/issues/2565)

---

## 3.17.7 (2022-07-05) {: #3.17.7 }

### Bugfixes

-   Fixed an issue that could cause orphan cleanup to fail for certain repos.
    [#2459](https://github.com/pulp/pulp_rpm/issues/2459)
-   Fixed unix timestamps not being parsed correctly for issued and updated dates.
    [#2528](https://github.com/pulp/pulp_rpm/issues/2528)
-   Fix a small FD leak during complete mirror syncs
    [#2624](https://github.com/pulp/pulp_rpm/issues/2624)

### Misc

-   [#2276](https://github.com/pulp/pulp_rpm/issues/2276)

---

## 3.17.6 (2022-06-21) {: #3.17.6 }

### Features

-   RPM metadata is now sorted by package name and version information, which slightly improves compression efficiency.
    [#2274](https://github.com/pulp/pulp_rpm/issues/2274)

### Bugfixes

-   Fixed treeinfo processing to handle some very old treeinfo formats.
    [#2243](https://github.com/pulp/pulp_rpm/issues/2243)

---

## 3.17.5 (2022-04-12) {: #3.17.5 }

### Bugfixes

-   Substantial improvements to the memory consumption of syncs, with a modest improvement in time required to sync.
    [#2296](https://github.com/pulp/pulp_rpm/issues/2296)
-   Taught advisory-conflict-resolution to handle just-EVR-differences in incoming advisory's
    package-list. This solves the case of repositories that update advisories to always have
    the newest versions of RPMs (looking at you, EPEL...).
    [#2422](https://github.com/pulp/pulp_rpm/issues/2422)
-   Fix ULN remote username and password fields which ought to have been write-only and hidden.
    [#2428](https://github.com/pulp/pulp_rpm/issues/2428)
-   Fix the behavior of gpgcheck and repo_gpgcheck options when specified on the repository.
    [#2430](https://github.com/pulp/pulp_rpm/issues/2430)
-   Fix an issue where package requirements containing an ampersand character in the name might have their data parsed incorrectly, and added a data repair script (pulpcore-manager rpm-datarepair 2460).
    [#2460](https://github.com/pulp/pulp_rpm/issues/2460)
-   Fixed instances of /tmp/ being used instead of the worker's working directory.
    [#2475](https://github.com/pulp/pulp_rpm/issues/2475)
-   Changed the naming of the trim_rpm_changelogs management command to rpm-trim-changelogs to better match with other command names.
    [#2488](https://github.com/pulp/pulp_rpm/issues/2488)

---

## 3.17.4 (2022-02-24) {: #3.17.4 }

### Bugfixes

-   Added an exception for a case where repository metadata is incorrect in such a way that it should not be "mirrored", and a warning in other cases. If these warnings / errors are encountered, the party which manages the repo should be contacted. If it is a public repo, an issue can be filed in our tracker, and we will follow up with that party following confirmation of the issue.
    [#2398](https://github.com/pulp/pulp_rpm/issues/2398)

---

## 3.17.3 (2022-01-29) {: #3.17.3 }

### Bugfixes

-   Fixed a Directory not empty error during publication creation. Usually observed on NFS and during pulp-2to3-migration but any publication creation can be affected.
    [#2379](https://github.com/pulp/pulp_rpm/issues/2379)

---

## 3.17.2 (2022-01-22) {: #3.17.2 }

### Features

-   Added a debug option for greater visibility into dependency solving.
    [#2343](https://github.com/pulp/pulp_rpm/issues/2343)

### Bugfixes

-   Fixed an edge case with the changelog limit.
    [#2363](https://github.com/pulp/pulp_rpm/issues/2363)
-   Fixed downloading from addon repositories provided as a part of a distribution/kickstart tree.
    [#2373](https://github.com/pulp/pulp_rpm/issues/2373)

### Misc

-   [#2361](https://github.com/pulp/pulp_rpm/issues/2361)

---

## 3.17.1 (2022-01-18) {: #3.17.1 }

### Bugfixes

-   Fixed a migration to be able to upgrade to pulp_rpm 3.17.
    [#2356](https://github.com/pulp/pulp_rpm/issues/2356)

---

## 3.17.0 (2022-01-17) {: #3.17.0 }

### Features

-   Added API to allow uploading of a comps.xml file.
    [#2313](https://github.com/pulp/pulp_rpm/issues/2313)
-   Added a per-package changelog entry limit with a default value of 10, which is controlled by a setting named KEEP_CHANGELOG_LIMIT. This only impacts the output of [dnf changelog $package]{.title-ref} - it is always possible to get the full list of changelogs using [rpm -qa --changelog $package]{.title-ref} if the package is installed on the system. This limit can yield very substantial savings time and resources for some repositories.
    [#2332](https://github.com/pulp/pulp_rpm/issues/2332)
-   Added support for Alternate Content Sources.
    [#2340](https://github.com/pulp/pulp_rpm/issues/2340)

### Bugfixes

-   Fixed distribution tree sync for repositories with partial .treeinfo (e.g. most of CentOS 8 repositories).
    [#2305](https://github.com/pulp/pulp_rpm/issues/2305)
-   Fixed a regression dealing with downloads of filenames containing special characters.
    Specifically, synching Amazon linux repositories with RPMs like uuid-c++.
    [#2315](https://github.com/pulp/pulp_rpm/issues/2315)
-   Fixed a bug that could result in incomplete repo metadata when "mirror_complete" sync policy is combined with the "optimize" option.
    [#2316](https://github.com/pulp/pulp_rpm/issues/2316)
-   Ensured that RPM plugin uses only a worker working directory and not /tmp which could have caused the out-of-disc-space issue since it's not expected that Pulp uses /tmp.
    [#2317](https://github.com/pulp/pulp_rpm/issues/2317)
-   In case that only a subtree is synced, it can happen that the PRIMARY_REPO key does not exists in repo_sync_results and the sync failed with accessing a not existing key at the end.
    [#2318](https://github.com/pulp/pulp_rpm/issues/2318)
-   Fixed sync of repositories using 'sha' as an alias for the sha1 checksum-type.
    [#2319](https://github.com/pulp/pulp_rpm/issues/2319)
-   Fixed FileNotFoundError during sync and Pulp 2 to Pulp 3 migration when a custom repo metadata has its checksum as a filename.
    [#2321](https://github.com/pulp/pulp_rpm/issues/2321)
-   Fix HTTP-proxy support for ULN-remotes
    [#2322](https://github.com/pulp/pulp_rpm/issues/2322)
-   Fixed file descriptor leak during repo metadata publish.
    [#2331](https://github.com/pulp/pulp_rpm/issues/2331)

### Improved Documentation

-   Expanded the documentation to include examples using pulp-cli.
    [#2314](https://github.com/pulp/pulp_rpm/issues/2314)

### Misc

-   [#2320](https://github.com/pulp/pulp_rpm/issues/2320), [#2323](https://github.com/pulp/pulp_rpm/issues/2323)

---

## 3.16.2 (2021-12-22) {: #3.16.2 }

### Bugfixes

-   Fixed sync of repositories using 'sha' as an alias for the sha1 checksum-type.
    (backported from #9580)
    [#9624](https://pulp.plan.io/issues/9624)
-   In case that only a subtree is synced, it can happen that the PRIMARY_REPO key does not exists in repo_sync_results and the sync failed with accessing a not existing key at the end.
    (backported from #9565)
    [#9628](https://pulp.plan.io/issues/9628)
-   Ensured that RPM plugin uses only a worker working directory and not /tmp which could have caused the out-of-disc-space issue since it's not expected that Pulp uses /tmp.
    (backported from #9551)
    [#9629](https://pulp.plan.io/issues/9629)
-   Fixed FileNotFoundError during sync and Pulp 2 to Pulp 3 migration when a custom repo metadata has its checksum as a filename.
    (backported from #9636)
    [#9650](https://pulp.plan.io/issues/9650)
-   Fix HTTP-proxy support for ULN-remotes
    (backported from #9647)
    [#9653](https://pulp.plan.io/issues/9653)

### Misc

-   [#9626](https://pulp.plan.io/issues/9626)

---

## 3.16.1 (2021-10-27) {: #3.16.1 }

### Bugfixes

-   Fixed a bug that could result in incomplete repo metadata when "mirror_complete" sync policy is combined with the "optimize" option.
    (backported from #9535)
    [#9536](https://pulp.plan.io/issues/9536)
-   Fixed a regression dealing with downloads of filenames containing special characters.
    Specifically, synching Amazon linux repositories with RPMs like uuid-c++.
    (backported from #9529)
    [#9537](https://pulp.plan.io/issues/9537)

---

## 3.16.0 (2021-10-20) {: #3.16.0 }

### Features

-   Added a sync_policy parameter to the /sync/ endpoint which will replace the mirror parameter and provides additional options and flexibility about how the sync should be carried out. The mirror parameter is now deprecated but for backwards compatibility it will remain present.
    [#9316](https://pulp.plan.io/issues/9316)
-   Make sync optimization less sensitive to remote changes which wouldn't have any impact on the sync outcomes, and fix some situations where the sync should not be skipped.
    [#9398](https://pulp.plan.io/issues/9398)

### Bugfixes

-   Fixed metadata generation after changing ALLOWED_CONTENT_CHECKSUMS.
    [#8571](https://pulp.plan.io/issues/8571)

-   For certain repos which use a rare feature of RPM metadata, "mirroring" would lead to a surprising / suboptimal result for most Pulp users. We now reject syncing these repos with mirroring enabled.
    [#9303](https://pulp.plan.io/issues/9303)

-   Fix an error that could occur when performing a non-mirror sync while using the skip_types option.
    [#9308](https://pulp.plan.io/issues/9308)

-   For certain repos which use a rare feature of RPM metadata, "mirroring" would lead to a broken repo. We now reject syncing these repos with mirroring enabled.
    [#9328](https://pulp.plan.io/issues/9328)

-   Fixes a regression in support for syncing from mirrorlists.
    [#9329](https://pulp.plan.io/issues/9329)

-   Fix an edge case where the repo gpg key URL would be calculated incorrectly if CONTENT_PREFIX was set to "/".
    [#9350](https://pulp.plan.io/issues/9350)

-   Vastly improved copy-with-depsolving performance.
    [#9387](https://pulp.plan.io/issues/9387)

-   For certain repos which use Delta RPMs (which Pulp 3 does not and will not support) we now reject syncing these repos with mirroring enabled to avoid confusing clients with unusable Delta metadata.
    [#9407](https://pulp.plan.io/issues/9407)

-   Generated .repo file now includes the "name" field.
    [#9438](https://pulp.plan.io/issues/9438)

-   Use checksum type of a package for publication if it's not configured.
    [#9448](https://pulp.plan.io/issues/9448)

-   Restored the functionality of specifying basic-auth parameters in a remote's URL.

    NOTE: it's much better to specify username/pwd explcitly on the Remote, rather
    than relying on embedding them in the URL. This fix will probably be deprecated in
    the future.
    [#9464](https://pulp.plan.io/issues/9464)

-   Fixed an issue where some repositories were unnecessarily prevented from using mirror-mode sync.
    [#9486](https://pulp.plan.io/issues/9486)

-   Disallowed adding simultaneously multiple advisories with the same id to a repo.
    Resolved the case when two or more advisories were already in a repo version.
    [#9503](https://pulp.plan.io/issues/9503)

### Improved Documentation

-   Added a note about scheduling tasks.
    [#9147](https://pulp.plan.io/issues/9147)

### Misc

-   [#9135](https://pulp.plan.io/issues/9135), [#9189](https://pulp.plan.io/issues/9189), [#9402](https://pulp.plan.io/issues/9402), [#9467](https://pulp.plan.io/issues/9467)

---

## 3.15.0 (2021-08-27) {: #3.15.0 }

### Features

-   Enable reclaim disk space for packages. This feature is available with pulpcore 3.15+.
    [#9176](https://pulp.plan.io/issues/9176)

### Bugfixes

-   Taught pulp_rpm to be more lenient in the face of non-standard repos.
    [#7208](https://pulp.plan.io/issues/7208)
-   Fixed multiple bugs in distribution tree metadata generation regarding "variant" and "variants" metadata.
    [#8622](https://pulp.plan.io/issues/8622)
-   Fixed Pulp 3 to Pulp 2 sync for the package groups with empty packagelist, e.g. RHEL8 Appstream repository.
    [#8713](https://pulp.plan.io/issues/8713)
-   Taught downloader to be handle rpms with special characters in ways Amazon likes.
    [#8875](https://pulp.plan.io/issues/8875)
-   Fixed some errors that can occur on occasions when identical content is being synced from multiple sources at once.
    [#9029](https://pulp.plan.io/issues/9029)
-   Comply with orphan clean up changes introduced in pulpcore 3.15
    [#9151](https://pulp.plan.io/issues/9151)
-   Unpublished content is no longer available for consumption.
    [#9223](https://pulp.plan.io/issues/9223)
-   Fixed an issue where mirror-mode syncs would not provide all of the files described in the .treeinfo metadata.
    [#9230](https://pulp.plan.io/issues/9230)
-   Taught copy-depsolving to behave better in a multiarch environment.
    [#9238](https://pulp.plan.io/issues/9238)
-   Fixed bug where sync tasks would open a lot of DB connections.
    [#9253](https://pulp.plan.io/issues/9253)
-   Improved the parallelism of copy operations.
    [#9255](https://pulp.plan.io/issues/9255)
-   Taught copy/ API to only do depsolving once when asked for.
    [#9287](https://pulp.plan.io/issues/9287)

### Deprecations and Removals

-   Dropped support for Python 3.6 and 3.7. pulp_rpm now supports Python 3.8+.
    [#9033](https://pulp.plan.io/issues/9033)

### Misc

-   [#8494](https://pulp.plan.io/issues/8494), [#9279](https://pulp.plan.io/issues/9279)

---

## 3.14.20 (2022-08-08) {: #3.14.20 }

### Bugfixes

-   Made sure that Pulp doesn't publish repos with duplicate NEVRA in some edge case scenarios.
    [#2407](https://github.com/pulp/pulp_rpm/issues/2407)
-   Allow syncing repositories with duplicate NEVRA in mirror_complete mode, but make sure syncing those packages are skipped.
    [#2691](https://github.com/pulp/pulp_rpm/issues/2691)

---

## 3.14.19 (2022-08-04) {: #3.14.19 }

### Bugfixes

-   Using retain_package_versions (with the required "additive" sync_policy) will now avoid downloading the older packages when synced with download_policy "on_demand", resulting in much faster and more efficient syncs.
    [#2479](https://github.com/pulp/pulp_rpm/issues/2479)

### Misc

-   [#2565](https://github.com/pulp/pulp_rpm/issues/2565)

---

## 3.14.18 (2022-08-03) {: #3.14.18 }

### Bugfixes

-   Don't raise a fatal error when encountering mostly valid metadata that contains data we don't expect, or data in the wrong places, in situations where it doesn't really matter.
    [#2686](https://github.com/pulp/pulp_rpm/issues/2686)

---

## 3.14.17 (2022-08-02) {: #3.14.17 }

### Bugfixes

-   Substantial improvements to the memory consumption of syncs, with a modest improvement in time required to sync.
    [#2296](https://github.com/pulp/pulp_rpm/issues/2296)
-   Improved error reporting in one scenario where it could be highly confusing.
    [#2395](https://github.com/pulp/pulp_rpm/issues/2395)

### Misc

-   [#2274](https://github.com/pulp/pulp_rpm/issues/2274)

---

## 3.14.16 (2022-07-08) {: #3.14.16 }

### Bugfixes

-   Fixed an issue that could cause orphan cleanup to fail for certain repos.
    [#2459](https://github.com/pulp/pulp_rpm/issues/2459)
-   Fix a small FD leak during complete mirror syncs
    [#2624](https://github.com/pulp/pulp_rpm/issues/2624)

### Misc

-   [#2276](https://github.com/pulp/pulp_rpm/issues/2276)

---

## 3.14.15 (2022-04-12) {: #3.14.15 }

### Bugfixes

-   Fix an issue where package requirements containing an ampersand character in the name might have their data parsed incorrectly, and added a data repair script (pulpcore-manager rpm-datarepair 2460).
    [#2460](https://github.com/pulp/pulp_rpm/issues/2460)
-   Fixed instances of /tmp/ being used instead of the worker's working directory.
    [#2475](https://github.com/pulp/pulp_rpm/issues/2475)

---

## 3.14.14 (2022-03-25) {: #3.14.14 }

### Bugfixes

-   Taught advisory-conflict-resolution to handle just-EVR-differences in incoming advisory's
    package-list. This solves the case of repositories that update advisories to always have
    the newest versions of RPMs (looking at you, EPEL...).
    [#2422](https://github.com/pulp/pulp_rpm/issues/2422)
-   Fix the behavior of gpgcheck and repo_gpgcheck options when specified on the repository.
    [#2430](https://github.com/pulp/pulp_rpm/issues/2430)

---

## 3.14.13 (2022-03-08) {: #3.14.13 }

### Bugfixes

-   Added an exception for a case where repository metadata is incorrect in such a way that it should not be "mirrored", and a warning in other cases. If these warnings / errors are encountered, the party which manages the repo should be contacted. If it is a public repo, an issue can be filed in our tracker, and we will follow up with that party following confirmation of the issue.
    [#2398](https://github.com/pulp/pulp_rpm/issues/2398)

---

## 3.14.12 (2022-01-29) {: #3.14.12 }

### Bugfixes

-   Fixed a Directory not empty error during publication creation. Usually observed on NFS and during pulp-2to3-migration but any publication creation can be affected.
    [#2379](https://github.com/pulp/pulp_rpm/issues/2379)

---

## 3.14.11 (2022-01-22) {: #3.14.11 }

### Bugfixes

-   Fixed an edge case with the changelog limit.
    [#2363](https://github.com/pulp/pulp_rpm/issues/2363)
-   Fixed downloading from addon repositories provided as a part of a distribution/kickstart tree.
    [#2373](https://github.com/pulp/pulp_rpm/issues/2373)

---

## 3.14.10 (2022-01-17) {: #3.14.10 }

### Bugfixes

-   Fixed distribution tree sync for repositories with partial .treeinfo (e.g. most of CentOS 8 repositories).
    [#2327](https://github.com/pulp/pulp_rpm/issues/2327)
-   Fixed file descriptor leak during repo metadata publish.
    (backported from #2331)
    [#2347](https://github.com/pulp/pulp_rpm/issues/2347)
-   Added a per-package changelog entry limit with a default value of 10, which is controlled by a setting named KEEP_CHANGELOG_LIMIT. This only impacts the output of [dnf changelog $package]{.title-ref} - it is always possible to get the full list of changelogs using [rpm -qa --changelog $package]{.title-ref} if the package is installed on the system. This limit can yield very substantial savings time and resources for some repositories.
    (backported from #2332)
    [#2348](https://github.com/pulp/pulp_rpm/issues/2348)

---

## 3.14.9 (2021-12-21) {: #3.14.9 }

### Bugfixes

-   Added a sync_policy parameter to the /sync/ endpoint which will replace the mirror parameter and provides options for how the sync should be carried out. The mirror parameter is deprecated but will retain its current function.
    (backported from #9316)
    [#9620](https://pulp.plan.io/issues/9620)
-   Fixed sync of repositories using 'sha' as an alias for the sha1 checksum-type.
    (backported from #9580)
    [#9625](https://pulp.plan.io/issues/9625)
-   Ensured that RPM plugin uses only a worker working directory and not /tmp which could have caused the out-of-disc-space issue since it's not expected that Pulp uses /tmp.
    (backported from #9551)
    [#9630](https://pulp.plan.io/issues/9630)
-   Fixed FileNotFoundError during sync and Pulp 2 to Pulp 3 migration when a custom repo metadata has its checksum as a filename.
    (backported from #9636)
    [#9649](https://pulp.plan.io/issues/9649)
-   Fix HTTP-proxy support for ULN-remotes
    (backported from #9647)
    [#9652](https://pulp.plan.io/issues/9652)

### Misc

-   [#9626](https://pulp.plan.io/issues/9626)

---

## 3.14.8 (2021-10-27) {: #3.14.8 }

### Bugfixes

-   Fixed a regression dealing with downloads of filenames containing special characters.
    Specifically, synching Amazon linux repositories with RPMs like uuid-c++.
    (backported from #9529)
    [#9541](https://pulp.plan.io/issues/9541)

---

## 3.14.7 (2021-10-18) {: #3.14.7 }

### Bugfixes

-   Disallowed adding simultaneously multiple advisories with the same id to a repo.
    Resolved the case when two or more advisories were already in a repo version.
    (backported from #9503)
    [#9519](https://pulp.plan.io/issues/9519)

---

## 3.14.6 (2021-10-05) {: #3.14.6 }

### Bugfixes

-   Fixed an issue where some repositories were unnecessarily prevented from using mirror-mode sync.
    (backported from #9486)
    [#9487](https://pulp.plan.io/issues/9487)

---

## 3.14.5 (2021-09-29) {: #3.14.5 }

### Bugfixes

-   Generated .repo file now includes the "name" field.
    (backported from #9438)
    [#9439](https://pulp.plan.io/issues/9439)

-   Use checksum type of a package for publication if it's not configured.

    (backported from #9448)
    [#9449](https://pulp.plan.io/issues/9449)

-   Restored the functionality of specifying basic-auth parameters in a remote's URL.

    NOTE: it's much better to specify username/pwd explcitly on the Remote, rather
    than relying on embedding them in the URL. This fix will probably be deprecated in
    the future.
    (backported from #9464)
    [#9472](https://pulp.plan.io/issues/9472)

### Misc

-   [#9437](https://pulp.plan.io/issues/9437)

---

## 3.14.4 (2021-09-22) {: #3.14.4 }

### Bugfixes

-   Fixed metadata generation after changing ALLOWED_CONTENT_CHECKSUMS.
    (backported from #8571)
    [#9332](https://pulp.plan.io/issues/9332)
-   Vastly improved copy-with-depsolving performance.
    (backported from #9387)
    [#9388](https://pulp.plan.io/issues/9388)
-   For certain repos which use a rare feature of RPM metadata, "mirroring" would lead to a broken repo. We now reject syncing these repos with mirroring enabled.
    (backported from #9328)
    [#9392](https://pulp.plan.io/issues/9392)
-   Fixes a regression in support for syncing from mirrorlists.
    (backported from #9329)
    [#9394](https://pulp.plan.io/issues/9394)
-   For certain repos which use Delta RPMs (which Pulp 3 does not and will not support) we now reject syncing these repos with mirroring enabled to avoid confusing clients with unusable Delta metadata.
    (backported from #9407)
    [#9408](https://pulp.plan.io/issues/9408)
-   Fix an edge case where the repo gpg key URL would be calculated incorrectly if CONTENT_PREFIX was set to "/".
    (backported from #9350)
    [#9429](https://pulp.plan.io/issues/9429)

---

## 3.14.3 (2021-08-31) {: #3.14.3 }

### Bugfixes

-   Taught copy-depsolving to behave better in a multiarch environment.
    (backported from #9238)
    [#9293](https://pulp.plan.io/issues/9293)
-   Taught copy/ API to only do depsolving once when asked for.
    (backported from #9287)
    [#9298](https://pulp.plan.io/issues/9298)
-   Fix an error that could occur when performing a non-mirror sync while using the skip_types option.
    (backported from #9308)
    [#9312](https://pulp.plan.io/issues/9312)
-   For certain repos which use a rare feature of RPM metadata, "mirroring" would lead to a surprising / suboptimal result for most Pulp users. We now reject syncing these repos with mirroring enabled.
    (backported from #9303)
    [#9315](https://pulp.plan.io/issues/9315)

### Misc

-   [#9318](https://pulp.plan.io/issues/9318)

---

## 3.14.2 (2021-08-24) {: #3.14.2 }

### Bugfixes

-   Fixed some errors that can occur on occasions when identical content is being synced from multiple sources at once.
    (backported from #9029)
    [#9267](https://pulp.plan.io/issues/9267)
-   Fixed an issue where mirror-mode syncs would not provide all of the files described in the .treeinfo metadata.
    (backported from #9230)
    [#9270](https://pulp.plan.io/issues/9270)

### Misc

-   [#9281](https://pulp.plan.io/issues/9281)

---

## 3.14.1 (2021-08-11) {: #3.14.1 }

### Bugfixes

-   Taught pulp_rpm to be more lenient in the face of non-standard repos.
    (backported from #7208)
    [#9192](https://pulp.plan.io/issues/9192)
-   Fixed Pulp 3 to Pulp 2 sync for the package groups with empty packagelist, e.g. RHEL8 Appstream repository.
    (backported from #8713)
    [#9193](https://pulp.plan.io/issues/9193)
-   Taught downloader to be handle rpms with special characters in ways Amazon likes.
    (backported from #8875)
    [#9198](https://pulp.plan.io/issues/9198)
-   Fixed multiple bugs in distribution tree metadata generation regarding "variant" and "variants" metadata.
    (backported from #8622)
    [#9218](https://pulp.plan.io/issues/9218)
-   Unpublished content is no longer available for consumption.
    (backported from #9223)
    [#9226](https://pulp.plan.io/issues/9226)

---

## 3.14.0 (2021-07-24) {: #3.14.0 }

### Bugfixes

-   Taught pulp_rpm how to deal with timestamp and filename oddities of SUSE repos.
    [#8275](https://pulp.plan.io/issues/8275)
-   Updated the signing service code to be compatible with pulpcore 3.10+.
    [#8608](https://pulp.plan.io/issues/8608)
-   Fixed inclusion by package group of an additional version of packages already selected to be copied
    [#9055](https://pulp.plan.io/issues/9055)
-   User proxy auth credentials of a Remote when syncing content.
    [#9064](https://pulp.plan.io/issues/9064)
-   Fixed server error when accessing /config.repo while using auto-distribute
    [#9071](https://pulp.plan.io/issues/9071)
-   Fixed a SUSE sync-error involving repomd-extra files with '-' in their filename.
    [#9096](https://pulp.plan.io/issues/9096)
-   Fix repository "mirroring" for repositories with Kickstart metadata / "Distribution Trees".
    [#9098](https://pulp.plan.io/issues/9098)
-   The fix for a previous issue resulting in incorrect metadata (#8995) was still regressing in some circumstances. Implemented a complete fix and added tests to ensure it never recurs.
    [#9107](https://pulp.plan.io/issues/9107)
-   Fixed an issue where mirrored syncs could fail if extra_files.json declared a checksum of a type that was disallowed in the Pulp settings.
    [#9111](https://pulp.plan.io/issues/9111)

### Misc

-   [#7891](https://pulp.plan.io/issues/7891), [#8972](https://pulp.plan.io/issues/8972)

---

## 3.13.3 (2021-07-07) {: #3.13.3 }

### Bugfixes

-   [#9023](https://pulp.plan.io/issues/9023)
-   Restored ability to correctly handle complicated mirrorlist URLs.
    (backported from #8981)
    [#9026](https://pulp.plan.io/issues/9026)
-   Fix UnboundLocalException if Pulp receives a non-404 HTTP error code when attempting to download metadata.
    (backported from #8787)
    [#9027](https://pulp.plan.io/issues/9027)

### Misc

-   [#7350](https://pulp.plan.io/issues/7350)

---

## 3.13.2 (2021-06-23) {: #3.13.2 }

### Bugfixes

-   Taught sync to process modulemd before packages so is_modular can be known.
    (backported from #8952)
    [#8964](https://pulp.plan.io/issues/8964)

---

## 3.13.1 (2021-06-23) {: #3.13.1 }

### Bugfixes

-   Fix filelists and changelogs not always being parsed correctly.
    (backported from #8955)
    [#8961](https://pulp.plan.io/issues/8961)
-   Fix an AssertionError that could occur when processing malformed (but technically valid) metadata.
    (backported from #8944)
    [#8962](https://pulp.plan.io/issues/8962)

---

## 3.13.0 (2021-06-17) {: #3.13.0 }

### Features

-   A sync with mirror=True will automatically create a publication using the existing metadata downloaded from the original repo, keeping the repository signature intact.
    [#6353](https://pulp.plan.io/issues/6353)
-   Allow the checksum types for packages and metadata to be unspecified, and intelligently decide which ones to use based on context if so.
    [#8722](https://pulp.plan.io/issues/8722)
-   Auto-publish no longer modifies distributions.
    Auto-distribute now only requires setting a distribution's `repository` field.
    [#8759](https://pulp.plan.io/issues/8759)
-   Substantially improved memory consumption while processing extremely large repositories.
    [#8864](https://pulp.plan.io/issues/8864)

### Bugfixes

-   Fixed publication of a distribution tree if productmd 1.33+ is installed.
    [#8807](https://pulp.plan.io/issues/8807)
-   Fixed sync for the case when SRPMs are asked to be skipped.
    [#8812](https://pulp.plan.io/issues/8812)
-   Allow static_context to be absent.
    [#8814](https://pulp.plan.io/issues/8814)
-   Fixed a trailing slash sometimes being inserted improperly if sles_auth_token is used.
    [#8816](https://pulp.plan.io/issues/8816)

### Misc

-   [#8681](https://pulp.plan.io/issues/8681)

---

## 3.12.0 (2021-05-19) {: #3.12.0 }

### Features

-   Add support for automatic publishing and distributing.
    [#7622](https://pulp.plan.io/issues/7622)
-   Added the ability to synchronize Oracle ULN repositories using ULN remotes.
    You can set an instance wide ULN server base URL using the DEFAULT_ULN_SERVER_BASE_URL setting.
    [#7905](https://pulp.plan.io/issues/7905)

### Bugfixes

-   Fixed advisory upload-and-merge of already-existing advisories.
    [#7282](https://pulp.plan.io/issues/7282)
-   Taught pulp_rpm to order resources on export to avoid deadlocking on import.
    [#7904](https://pulp.plan.io/issues/7904)
-   Reduce memory consumption when syncing extremely large repositories.
    [#8467](https://pulp.plan.io/issues/8467)
-   Fix error when updating a repository.
    [#8546](https://pulp.plan.io/issues/8546)
-   Fixed sync/migration of the kickstart repositories with floating point build_timestamp.
    [#8623](https://pulp.plan.io/issues/8623)
-   Fixed a bug where publication used the default metadata checksum type of SHA-256 rather than the one requested by the user.
    [#8644](https://pulp.plan.io/issues/8644)
-   Fixed advisory-upload so that a failure no longer breaks uploads forever.
    [#8683](https://pulp.plan.io/issues/8683)
-   Fixed syncing XZ-compressed modulemd metadata, e.g. CentOS Stream "AppStream"
    [#8700](https://pulp.plan.io/issues/8700)
-   Fixed a workflow where two identical advisories could 'look different' to Pulp.
    [#8716](https://pulp.plan.io/issues/8716)

### Improved Documentation

-   Added workflow documentation for the new ULN remotes.
    [#8426](https://pulp.plan.io/issues/8426)

### Misc

-   [#8509](https://pulp.plan.io/issues/8509), [#8616](https://pulp.plan.io/issues/8616), [#8764](https://pulp.plan.io/issues/8764)

---

## 3.11.4 (2022-01-29) {: #3.11.4 }

### Bugfixes

-   Fixed file descriptor leak during repo metadata publish.
    [#2331](https://github.com/pulp/pulp_rpm/issues/2331)
-   Fixed a Directory not empty error during publication creation. Usually observed on NFS and during pulp-2to3-migration but any publication creation can be affected.
    [#2379](https://github.com/pulp/pulp_rpm/issues/2379)

---

## 3.11.3 (2022-01-06) {: #3.11.3 }

### Bugfixes

-   Fixed FileNotFoundError during sync and Pulp 2 to Pulp 3 migration when a custom repo metadata has its checksum as a filename.
    (backported from #2321) [#2310](https://github.com/pulp/pulp_rpm/issues/2310)
-   Fixed distribution tree sync for repositories with partial .treeinfo (e.g. most of CentOS 8 repositories)
    [#2326](https://github.com/pulp/pulp_rpm/issues/2326)

---

## 3.11.2 (2021-08-24) {: #3.11.2 }

### Bugfixes

-   Taught pulp_rpm how to deal with timestamp and filename oddities of SUSE repos.
    (backported from #8275)
    [#9113](https://pulp.plan.io/issues/9113)
-   Fixed Pulp 3 to Pulp 2 sync for the package groups with empty packagelist, e.g. RHEL8 Appstream repository.
    (backported from #8713)
    [#9195](https://pulp.plan.io/issues/9195)
-   Taught pulp_rpm to be more lenient in the face of non-standard repos.
    (backported from #7208)
    [#9285](https://pulp.plan.io/issues/9285)

### Misc

-   [#9228](https://pulp.plan.io/issues/9228)

---

## 3.11.1 (2021-05-31) {: #3.11.1 }

### Bugfixes

-   Fixed sync for the case when SRPMs are asked to be skipped.
    (backported from #8812)
    [#8813](https://pulp.plan.io/issues/8813)
-   Allow static_context to be absent.
    (backported from #8814)
    [#8815](https://pulp.plan.io/issues/8815)

---

## 3.11.0 (2021-05-18) {: #3.11.0 }

### Features

-   Taught sync/copy/publish to recognize the new static_context attribute of modules.
    [#8638](https://pulp.plan.io/issues/8638)

### Bugfixes

-   Fixed syncing XZ-compressed modulemd metadata, e.g. CentOS Stream "AppStream"
    (backported from #8700)
    [#8751](https://pulp.plan.io/issues/8751)
-   Fixed a bug where publication used the default metadata checksum type of SHA-256 rather than the one requested by the user.
    (backported from #8644)
    [#8752](https://pulp.plan.io/issues/8752)
-   Reduce memory consumption when syncing extremely large repositories.
    (backported from #8467)
    [#8753](https://pulp.plan.io/issues/8753)

---

## 3.10.0 (2021-03-25) {: #3.10.0 }

### Features

-   Added the ALLOW_AUTOMATIC_UNSAFE_ADVISORY_CONFLICT_RESOLUTION configuration option.

    When set to True, overrides Pulp's advisory-merge logic regarding 'suspect'
    advisory collisions at sync and upload time and simply processes the advisory.
    [#8250](https://pulp.plan.io/issues/8250)

### Bugfixes

-   Taught pulp_rpm how to handle remotes whose URLs do not end in '/'.

    Specifically, some mirrors (e.g. Amazon2) return remotes like this.
    [#7995](https://pulp.plan.io/issues/7995)

-   Caught remaining places that needed to know that 'sha' is an alias for 'sha1'.

    Very old versions of createrepo used 'sha' as a checksum-type for 'sha-1'.
    The recent ALLOWED_CHECKSUMS work prevented repositories created this way
    from being synchronized or published.
    [#8052](https://pulp.plan.io/issues/8052)

-   Fixed DistributionTree parsing for boolean fields which could cause a failure at sync or migration time.
    [#8245](https://pulp.plan.io/issues/8245)

-   Taught advisory-conflict-resolution how to deal with another edge-case.
    [#8249](https://pulp.plan.io/issues/8249)

-   Fixed regression in advisory-upload when pkglist included in advisory JSON.
    [#8380](https://pulp.plan.io/issues/8380)

-   Fixed the case when no package checksum type cofiguration is provided for publications created outside, not by RPM plugin endpoints. E.g. in pulp-2to3-migration plugin.
    [#8422](https://pulp.plan.io/issues/8422)

### Misc

-   [#7537](https://pulp.plan.io/issues/7537), [#8223](https://pulp.plan.io/issues/8223), [#8278](https://pulp.plan.io/issues/8278), [#8301](https://pulp.plan.io/issues/8301), [#8392](https://pulp.plan.io/issues/8392)

---

## 3.9.1 (2021-03-11) {: #3.9.1 }

### Bugfixes

-   Fixed DistributionTree parsing for boolean fields which could cause a failure at sync or migration time.
    [#8374](https://pulp.plan.io/issues/8374)

---

## 3.9.0 (2021-02-04) {: #3.9.0 }

### Features

-   Make creation of sqlite metadata at Publication time an option, and default to false.
    [#7852](https://pulp.plan.io/issues/7852)
-   Check allowed checksum types when publish repository.
    [#7855](https://pulp.plan.io/issues/7855)

### Bugfixes

-   Fixed content serialization so it displays content checksums.
    [#8002](https://pulp.plan.io/issues/8002)
-   Fixing OpenAPI schema for on demand Distribution Trees
    [#8050](https://pulp.plan.io/issues/8050)
-   Fix a mistake in RPM copy that could lead to modules being copied when they should not be.
    [#8091](https://pulp.plan.io/issues/8091)
-   Fixed a mistake in dependency calculation code which could result in incorrect copy results and errors.
    [#8114](https://pulp.plan.io/issues/8114)
-   Fixed a bug that occurs when publishing advisories without an "updated" date set, which includes SUSE advisories.
    [#8162](https://pulp.plan.io/issues/8162)

### Improved Documentation

-   Fixed a mistake in the RPM copy workflow documentation.
    [#7978](https://pulp.plan.io/issues/7978)
-   Fixed a mistake in the copy API documentation - dependency solving was described as defaulting to OFF when in fact it defaults to ON.
    [#8009](https://pulp.plan.io/issues/8009)

### Misc

-   [#7843](https://pulp.plan.io/issues/7843)

---

## 3.8.0 (2020-11-12) {: #3.8.0 }

### Features

-   Added new fields allowing users to customize gpgcheck signature options in a publication.
    [#6926](https://pulp.plan.io/issues/6926)

### Bugfixes

-   Fixed re-syncing of custom repository metadata when it was the only change in a repository.
    [#7030](https://pulp.plan.io/issues/7030)
-   User should not be able to remove distribution trees, custom repository metadata and comps if they are used in repository.
    [#7431](https://pulp.plan.io/issues/7431)
-   Raise ValidationError when other type than JSON is provided during Advisory upload.
    [#7468](https://pulp.plan.io/issues/7468)
-   Added handling of HTTP 403 Forbidden during DistributionTree detection.
    [#7691](https://pulp.plan.io/issues/7691)
-   Fixed the case when downloads were happening outside of the task working directory during sync.
    [#7698](https://pulp.plan.io/issues/7698)

### Improved Documentation

-   Fixed broken documentation links.
    [#6981](https://pulp.plan.io/issues/6981)
-   Added documentation clarification around how checksum_types work during the Publication.
    [#7203](https://pulp.plan.io/issues/7203)
-   Added examples how to copy all content.
    [#7494](https://pulp.plan.io/issues/7494)
-   Clarified the advanced-copy section.
    [#7705](https://pulp.plan.io/issues/7705)

### Misc

-   [#7414](https://pulp.plan.io/issues/7414), [#7567](https://pulp.plan.io/issues/7567), [#7571](https://pulp.plan.io/issues/7571), [#7650](https://pulp.plan.io/issues/7650), [#7807](https://pulp.plan.io/issues/7807)

---

## 3.7.0 (2020-09-23) {: #3.7.0 }

### Bugfixes

-   Remove distribution tree subrepositories when a distribution tree is removed.
    [#7440](https://pulp.plan.io/issues/7440)
-   Avoid intensive queries taking place during the handling of the "copy" API web request.
    [#7483](https://pulp.plan.io/issues/7483)
-   Fixed "Value too long" error for the distribution tree sync.
    [#7498](https://pulp.plan.io/issues/7498)

### Misc

-   [#7040](https://pulp.plan.io/issues/7040), [#7422](https://pulp.plan.io/issues/7422), [#7519](https://pulp.plan.io/issues/7519)

---

## 3.6.3 (2020-11-19) {: #3.6.3 }

### Bugfixes

-   Fixed duplicate key error after incomplete sync task.
    [#7844](https://pulp.plan.io/issues/7844)

---

## 3.6.2 (2020-09-04) {: #3.6.2 }

### Bugfixes

-   Fixed a bug where dependency solving did not work correctly with packages that depend on files, e.g. depending on /usr/bin/bash.
    [#7202](https://pulp.plan.io/issues/7202)
-   Fixed crashes while copying SRPMs with depsolving enabled.
    [#7290](https://pulp.plan.io/issues/7290)
-   Fix sync using proxy server.
    [#7321](https://pulp.plan.io/issues/7321)
-   Fix sync from mirrorlist with comments (like fedora's mirrorlist).
    [#7354](https://pulp.plan.io/issues/7354)
-   Copying advisories/errata no longer fails if one of the packages is not present in the repository.
    [#7369](https://pulp.plan.io/issues/7369)
-   Fixing OpenAPI schema for Variant
    [#7394](https://pulp.plan.io/issues/7394)

---

## 3.6.1 (2020-08-20) {: #3.6.1 }

### Bugfixes

-   Updated Rest API docs to contain only rpm endpoints.
    [#7332](https://pulp.plan.io/issues/7332)
-   Fix sync from local (on-disk) repository.
    [#7342](https://pulp.plan.io/issues/7342)

### Improved Documentation

-   Fix copy script example typos.
    [#7176](https://pulp.plan.io/issues/7176)

---

## 3.6.0 (2020-08-17) {: #3.6.0 }

### Features

-   Taught advisory-merge to proactively avoid package-collection-name collisions.
    [#5740](https://pulp.plan.io/issues/5740)
-   Added the ability for users to import and export distribution trees.
    [#6739](https://pulp.plan.io/issues/6739)
-   Added import/export support for remaining advisory-related entities.
    [#6815](https://pulp.plan.io/issues/6815)
-   Allow a Remote to be associated with a Repository and automatically use it when syncing the
    Repository.
    [#7159](https://pulp.plan.io/issues/7159)
-   Improved publishing performance by around 40%.
    [#7289](https://pulp.plan.io/issues/7289)

### Bugfixes

-   Prevented advisory-merge from 'reusing' UpdateCollections from the merging advisories.
    [#7291](https://pulp.plan.io/issues/7291)

### Misc

-   [#6937](https://pulp.plan.io/issues/6937), [#7095](https://pulp.plan.io/issues/7095), [#7195](https://pulp.plan.io/issues/7195)

---

## 3.5.1 (2020-08-11) {: #3.5.1 }

### Bugfixes

-   Handle optimize=True and mirror=True on sync correctly.
    [#7228](https://pulp.plan.io/issues/7228)
-   Fix copy with depsolving for packageenvironments.
    [#7248](https://pulp.plan.io/issues/7248)
-   Taught copy that empty-content means 'copy nothing'.
    [#7284](https://pulp.plan.io/issues/7284)

---

## 3.5.0 (2020-07-24) {: #3.5.0 }

### Features

-   Add a retention policy feature - when specified, the latest N versions of each package will be kept and older versions will be purged.
    [#5367](https://pulp.plan.io/issues/5367)
-   Add support for comparing Packages by EVR (epoch, version, release).
    [#5402](https://pulp.plan.io/issues/5402)
-   Added support for syncing from a mirror list feed
    [#6225](https://pulp.plan.io/issues/6225)
-   Comps types (PackageCategory, PackageEnvironment, PackageGroup) can copy its children.
    [#6316](https://pulp.plan.io/issues/6316)
-   Added support for syncing Suse enterprise repositories with authentication token.
    [#6729](https://pulp.plan.io/issues/6729)

### Bugfixes

-   Fixed the sync issue for repositories with the same metadata files but different filenames. E.g. productid in RHEL8 BaseOS and Appstream.
    [#5847](https://pulp.plan.io/issues/5847)
-   Fixed an issue with an incorrect copy of a distribution tree.
    [#7046](https://pulp.plan.io/issues/7046)
-   Fixed a repository deletion when a distribution tree is a part of it.
    [#7096](https://pulp.plan.io/issues/7096)
-   Corrected several viewset-filters to be django-filter-2.3.0-compliant.
    [#7103](https://pulp.plan.io/issues/7103)
-   Allow only one distribution tree in a repo version at a time.
    [#7115](https://pulp.plan.io/issues/7115)
-   API is able to show modular data on advisory collection.
    [#7116](https://pulp.plan.io/issues/7116)

### Deprecations and Removals

-   Remove PackageGroup, PackageCategory and PackageEnvironment relations to packages and to each other.
    [#6410](https://pulp.plan.io/issues/6410)
-   Removed the query parameter relative_path from the API which was used when uploading an advisory
    [#6554](https://pulp.plan.io/issues/6554)

### Misc

-   [#7072](https://pulp.plan.io/issues/7072), [#7134](https://pulp.plan.io/issues/7134), [#7150](https://pulp.plan.io/issues/7150)

---

## 3.4.2 (2020-07-16) {: #3.4.2 }

### Bugfixes

-   Fixed CentOS 8 kickstart repository publications.
    [#6568](https://pulp.plan.io/issues/6568)
-   Updating API to not return publications that aren't complete.
    [#6974](https://pulp.plan.io/issues/6974)

### Improved Documentation

-   Change fixtures URL in the docs scripts.
    [#6656](https://pulp.plan.io/issues/6656)

### Misc

-   [#6778](https://pulp.plan.io/issues/6778)

---

## 3.4.1 (2020-06-03) {: #3.4.1 }

### Bugfixes

-   Including requirements.txt on MANIFEST.in
    [#6892](https://pulp.plan.io/issues/6892)

---

## 3.4.0 (2020-06-01) {: #3.4.0 }

### Features

-   Distributions now serves a config.repo, and when signing is enabled also a public.key, in the base_path.
    [#5356](https://pulp.plan.io/issues/5356)

### Bugfixes

-   Fixed the duplicated advisory case when only auxiliary fields were updated but not any timestamp or version.
    [#6604](https://pulp.plan.io/issues/6604)
-   Fixed dependency solving issue where not all RPM dependencies were coped.
    [#6820](https://pulp.plan.io/issues/6820)
-   Make 'last_sync_revision_number' nullable in all migrations.
    [#6861](https://pulp.plan.io/issues/6861)
-   Fixed a bug where the behavior of RPM advanced copy with dependency solving differed depending
    on the order of the source-destination repository pairs provided by the user.
    [#6868](https://pulp.plan.io/issues/6868)

### Improved Documentation

-   Added documentation for the RPM copy API.
    [#6332](https://pulp.plan.io/issues/6332)
-   Updated the required roles names
    [#6759](https://pulp.plan.io/issues/6759)

### Misc

-   [#4142](https://pulp.plan.io/issues/4142), [#6514](https://pulp.plan.io/issues/6514), [#6536](https://pulp.plan.io/issues/6536), [#6706](https://pulp.plan.io/issues/6706), [#6777](https://pulp.plan.io/issues/6777), [#6786](https://pulp.plan.io/issues/6786), [#6789](https://pulp.plan.io/issues/6789), [#6801](https://pulp.plan.io/issues/6801), [#6839](https://pulp.plan.io/issues/6839), [#6841](https://pulp.plan.io/issues/6841)

---

## 3.3.2 (2020-05-18) {: #3.3.2 }

### Bugfixes

-   Fix edge case where specifying 'dest_base_version' for an RPM copy did not work properly
    in all circumstances.
    [#6693](https://pulp.plan.io/issues/6693)
-   Add a new migration to ensure that 'last_sync_revision_number' is nullable.
    [#6743](https://pulp.plan.io/issues/6743)

---

## 3.3.1 (2020-05-07) {: #3.3.1 }

### Bugfixes

-   Taught copy to always include specified packages.
    [#6519](https://pulp.plan.io/issues/6519)
-   Fixed the upgrade issue, revision number can be empty now.
    [#6662](https://pulp.plan.io/issues/6662)

### Misc

-   [#6665](https://pulp.plan.io/issues/6665)

---

## 3.3.0 (2020-04-21) {: #3.3.0 }

### Features

-   Add dependency solving for modules and module-defaults.
    [#4162](https://pulp.plan.io/issues/4162)
-   Add dependency solving for RPMs.
    [#4761](https://pulp.plan.io/issues/4761)
-   Add incremental update -- copying an advisory also copies the RPMs that it references.
    [#4768](https://pulp.plan.io/issues/4768)
-   Enable users to publish a signed Yum repository
    [#4812](https://pulp.plan.io/issues/4812)
-   Add a criteria parameter to the copy api that can be used to filter content to by copied.
    [#6009](https://pulp.plan.io/issues/6009)
-   Added REST API for copying content between repositories.
    [#6018](https://pulp.plan.io/issues/6018)
-   Add a content parameter to the copy api that accepts a list of hrefs to be copied.
    [#6019](https://pulp.plan.io/issues/6019)
-   Functional test using bindings.
    [#6061](https://pulp.plan.io/issues/6061)
-   Added the field 'sha256' to the public API and enabled users to filter content by this field
    [#6187](https://pulp.plan.io/issues/6187)
-   Added a config param to copy api which maps multiple sources to destinations.
    [#6268](https://pulp.plan.io/issues/6268)
-   Default publish type is alphabetical directory structure under 'Packages' folder.
    [#4445](https://pulp.plan.io/issues/4445)
-   Enabled checksum selection when publishing metadata
    [#4458](https://pulp.plan.io/issues/4458)
-   Advisory version is considered at conflict resolution time.
    [#5739](https://pulp.plan.io/issues/5739)
-   Added support for opensuse advisories.
    [#5829](https://pulp.plan.io/issues/5829)
-   Optimize sync to only happen when there have been changes.
    [#6055](https://pulp.plan.io/issues/6055)
-   Store the checksum type (sum_type) for advisory packages as an integer, but continue displaying it to the user as a string. This brings the internal representation closer to createrepo_c which uses integers.
    [#6442](https://pulp.plan.io/issues/6442)
-   Add support for import/export processing
    [#6473](https://pulp.plan.io/issues/6473)

### Bugfixes

-   Fix sync for repositories with modular content.
    [#6229](https://pulp.plan.io/issues/6229)
-   Properly compare modular content between the versions.
    [#6303](https://pulp.plan.io/issues/6303)
-   Deserialize treeinfo files in a scpecific order
    [#6322](https://pulp.plan.io/issues/6322)
-   Fixed the repo revision comparison and sync optimization for sub-repos
    [#6367](https://pulp.plan.io/issues/6367)
-   Fixed repository metadata that was pointing to wrong file locations.
    [#6399](https://pulp.plan.io/issues/6399)
-   Fixed modular advisory publication.
    [#6440](https://pulp.plan.io/issues/6440)
-   Fixed advisory publication, missing auxiliary fields were added.
    [#6441](https://pulp.plan.io/issues/6441)
-   Fixed publishing of module repodata.
    [#6530](https://pulp.plan.io/issues/6530)

### Improved Documentation

-   Documented bindings installation for a dev environment
    [#6395](https://pulp.plan.io/issues/6395)

### Misc

-   [#5207](https://pulp.plan.io/issues/5207), [#5455](https://pulp.plan.io/issues/5455), [#6312](https://pulp.plan.io/issues/6312), [#6313](https://pulp.plan.io/issues/6313), [#6339](https://pulp.plan.io/issues/6339), [#6363](https://pulp.plan.io/issues/6363), [#6442](https://pulp.plan.io/issues/6442), [#6155](https://pulp.plan.io/issues/6155), [#6297](https://pulp.plan.io/issues/6297), [#6300](https://pulp.plan.io/issues/6300), [#6560](https://pulp.plan.io/issues/6560)

---

## 3.2.0 (2020-03-02) {: #3.2.0 }

### Features

-   Add mirror mode for sync endpoint.
    [#5738](https://pulp.plan.io/issues/5738)
-   Add some additional not equal filters.
    [#5854](https://pulp.plan.io/issues/5854)
-   SRPM can be skipped during the sync.
    [#6033](https://pulp.plan.io/issues/6033)

### Bugfixes

-   Fix absolute path error when parsing packages stored in S3
    [#5904](https://pulp.plan.io/issues/5904)
-   Fix advisory conflict resolution to check current version first.
    [#5924](https://pulp.plan.io/issues/5924)
-   Handling float timestamp on treeinfo file
    [#5989](https://pulp.plan.io/issues/5989)
-   Raise error when content has overlapping relative_path on the same version
    [#6152](https://pulp.plan.io/issues/6152)
-   Fixed an issue causing module and module-default metadata to be stored incorrectly, and added a data migration to fix existing installations.
    [#6191](https://pulp.plan.io/issues/6191)
-   Fix REST API for Modulemd "Package" list - instead of returning PKs, return Package HREFs as intended.
    [#6196](https://pulp.plan.io/issues/6196)
-   Replace RepositorySyncURL with RpmRepositorySyncURL
    [#6204](https://pulp.plan.io/issues/6204)
-   Modulemd dependencies are now stored corectly in DB.
    [#6214](https://pulp.plan.io/issues/6214)

### Improved Documentation

-   Remove the pulp_use_system_wide_pkgs installer variable from the docs. We now set it in the pulp_rpm_prerequisites role. Users can safely leave it in their installer variables for the foreseeable future though.
    [#5992](https://pulp.plan.io/issues/5992)

### Misc

-   [#6030](https://pulp.plan.io/issues/6030), [#6147](https://pulp.plan.io/issues/6147)

---

## 3.1.0 (2020-02-03) {: #3.1.0 }

### Features

-   Advisory now support reboot_suggested info.
    [#5737](https://pulp.plan.io/issues/5737)
-   Skip unsupported repodata.
    [#6034](https://pulp.plan.io/issues/6034)

### Misc

-   [#5867](https://pulp.plan.io/issues/5867), [#5900](https://pulp.plan.io/issues/5900)

---

## 3.0.0 (2019-12-12) {: #3.0.0 }

### Bugfixes

-   Providing a descriptive error message for RPM repos with invalid metadata
    [#4424](https://pulp.plan.io/issues/4424)
-   Improve memory performance on syncing.
    [#5688](https://pulp.plan.io/issues/5688)
-   Improve memory performance on publishing.
    [#5689](https://pulp.plan.io/issues/5689)
-   Resolve the issue which disallowed users to publish uploaded content
    [#5699](https://pulp.plan.io/issues/5699)
-   Provide a descriptive error for invalid treeinfo files
    [#5709](https://pulp.plan.io/issues/5709)
-   Properly handling syncing when there is no treeinfo file
    [#5732](https://pulp.plan.io/issues/5732)
-   Fix comps.xml publish: missing group attributes desc_by_lang, name_by_lang, and default now appear properly.
    [#5741](https://pulp.plan.io/issues/5741)
-   Fix error when adding/removing modules to/from a repository.
    [#5746](https://pulp.plan.io/issues/5746)
-   Splitting content between repo and sub-repo
    [#5761](https://pulp.plan.io/issues/5761)
-   Allow empty string for optional fields for comps.xml content.
    [#5856](https://pulp.plan.io/issues/5856)
-   Adds fields from the inherited serializer to comps.xml content types' displayed fields
    [#5857](https://pulp.plan.io/issues/5857)
-   Assuring uniqueness on publishing.
    [#5861](https://pulp.plan.io/issues/5861)

### Improved Documentation

-   Document that sync must complete before kicking off a publish
    [#5006](https://pulp.plan.io/issues/5006)
-   Add requirements to docs.
    [#5228](https://pulp.plan.io/issues/5228)
-   Update installation docs to use system-wide-packages.
    [#5564](https://pulp.plan.io/issues/5564)
-   Remove one shot uploader references and info.
    [#5747](https://pulp.plan.io/issues/5747)
-   Add 'Rest API' to menu.
    [#5749](https://pulp.plan.io/issues/5749)
-   Refactor workflow commands to small scripts.
    [#5750](https://pulp.plan.io/issues/5750)
-   Rename 'Errata' to 'Advisory' for consistency.
    [#5751](https://pulp.plan.io/issues/5751)
-   Update docs to include modularity and comps support to features.
    Include core-provided browseable distributions in features.
    [#5752](https://pulp.plan.io/issues/5752)
-   Update docs to include Tech Preview section
    [#5753](https://pulp.plan.io/issues/5753)
-   Update Quickstart page
    [#5754](https://pulp.plan.io/issues/5754)
-   Rearrange installation page and add missing information
    [#5755](https://pulp.plan.io/issues/5755)
-   Rearrange workflows section to have individual menu items for each content type.
    [#5758](https://pulp.plan.io/issues/5758)
-   Add content type descriptions and their specifics.
    [#5759](https://pulp.plan.io/issues/5759)
-   Document python build dependencies that must be installed on CentOS / RHEL.
    [#5841](https://pulp.plan.io/issues/5841)

### Misc

-   [#5325](https://pulp.plan.io/issues/5325), [#5693](https://pulp.plan.io/issues/5693), [#5701](https://pulp.plan.io/issues/5701), [#5757](https://pulp.plan.io/issues/5757), [#5853](https://pulp.plan.io/issues/5853)

---

## 3.0.0rc1 (2019-11-19)

### Features

-   Support for advisory upload.
    [#4012](https://pulp.plan.io/issues/4012)

-   Ensure there are no advisories with the same id in a repo version.

    In case where there are two advisories with the same id, either
    one of them is chosen, or they are merged, or there is an error raised
    if there is no way to resolve advisory conflict.
    [#4295](https://pulp.plan.io/issues/4295)

-   No duplicated content can be present in a repository version.
    [#4898](https://pulp.plan.io/issues/4898)

-   Added sync and publish support for comps.xml types.
    [#5495](https://pulp.plan.io/issues/5495)

-   Add/remove RPMs when a repo's modulemd gets added/removed
    [#5526](https://pulp.plan.io/issues/5526)

-   Make repositories "typed". Repositories now live at a detail endpoint. Sync is performed by POSTing to {repo_href}/sync/ remote={remote_href}.
    [#5625](https://pulp.plan.io/issues/5625)

-   Adding sub_repo field to RpmRepository
    [#5627](https://pulp.plan.io/issues/5627)

### Bugfixes

-   Fix publication for sub repos
    [#5630](https://pulp.plan.io/issues/5630)
-   Fix ruby bindings for UpdateRecord.
    [#5650](https://pulp.plan.io/issues/5650)
-   Fix sync of a repo which contains modules and advisories.
    [#5652](https://pulp.plan.io/issues/5652)
-   Fix 404 when repo remote URL is without trailing slash.
    [#5655](https://pulp.plan.io/issues/5655)
-   Check that sections exist before parsing them.
    [#5669](https://pulp.plan.io/issues/5669)
-   Stopping to save JSONFields as String.
    [#5671](https://pulp.plan.io/issues/5671)
-   Handling missing trailing slashes on kickstart tree fetching
    [#5677](https://pulp.plan.io/issues/5677)
-   Not require ref_id and title for UpdateReference
    [#5692](https://pulp.plan.io/issues/5692)
-   Refactor treeinfo handling and fix publication for kickstarts
    [#5729](https://pulp.plan.io/issues/5729)

### Deprecations and Removals

-   Sync is no longer available at the {remote_href}/sync/ repository={repo_href} endpoint. Instead, use POST {repo_href}/sync/ remote={remote_href}.

    Creating / listing / editing / deleting RPM repositories is now performed on /pulp/api/v3/rpm/rpm/ instead of /pulp/api/v3/repositories/. Only RPM content can be present in a RPM repository, and only a RPM repository can hold RPM content.
    [#5625](https://pulp.plan.io/issues/5625)

-   Remove plugin managed repos
    [#5627](https://pulp.plan.io/issues/5627)

-   Rename endpoints for content to be in plural form consistently

    Endpoints removed -> added:

    /pulp/api/v3/content/rpm/modulemd/ -> /pulp/api/v3/content/rpm/modulemds/
    /pulp/api/v3/content/rpm/packagecategory/ -> /pulp/api/v3/content/rpm/packagecategories/
    /pulp/api/v3/content/rpm/packageenvironment/ -> /pulp/api/v3/content/rpm/packageenvironments/
    /pulp/api/v3/content/rpm/packagegroup/ -> /pulp/api/v3/content/rpm/packagegroups/
    [#5679](https://pulp.plan.io/issues/5679)

-   Rename module-defaults content endpoint for consistency

    Endpoints removed -> added:

    /pulp/api/v3/content/rpm/modulemd-defaults/ -> /pulp/api/v3/content/rpm/modulemd_defaults/
    [#5680](https://pulp.plan.io/issues/5680)

-   Remove /pulp/api/v3/rpm/copy/ endpoint

    Removed the /pulp/api/v3/rpm/copy/ endpoint. To copy all content now with typed repos, use the
    modify endpoint on a repository.
    [#5681](https://pulp.plan.io/issues/5681)

### Misc

-   [#3308](https://pulp.plan.io/issues/3308), [#4295](https://pulp.plan.io/issues/4295), [#5423](https://pulp.plan.io/issues/5423), [#5461](https://pulp.plan.io/issues/5461), [#5495](https://pulp.plan.io/issues/5495), [#5506](https://pulp.plan.io/issues/5506), [#5580](https://pulp.plan.io/issues/5580), [#5611](https://pulp.plan.io/issues/5611), [#5663](https://pulp.plan.io/issues/5663), [#5672](https://pulp.plan.io/issues/5672), [#5684](https://pulp.plan.io/issues/5684)

---

## 3.0.0b7 (2019-10-16)

### Features

-   Convert all the TextFields which store JSON content into Django JSONFields.
    [#5215](https://pulp.plan.io/issues/5215)

### Improved Documentation

-   Change the prefix of Pulp services from pulp-* to pulpcore-*
    [#4554](https://pulp.plan.io/issues/4554)
-   Docs update to use pulp_use_system_wide_pkgs.
    [#5488](https://pulp.plan.io/issues/5488)

### Deprecations and Removals

-   Change _id, _created, _last_updated, _href to pulp_id, pulp_created, pulp_last_updated, pulp_href
    [#5457](https://pulp.plan.io/issues/5457)
-   Removing repository from Addon/Variant serializers.
    [#5516](https://pulp.plan.io/issues/5516)
-   Moved endpoints for distribution trees and repo metadata files to /pulp/api/v3/content/rpm/distribution_trees/ and /pulp/api/v3/content/rpm/repo_metadata_files/ respectively.
    [#5535](https://pulp.plan.io/issues/5535)
-   Remove "_" from _versions_href, _latest_version_href
    [#5548](https://pulp.plan.io/issues/5548)

---

## 3.0.0b6 (2019-09-30)

### Features

-   Add upload functionality to the rpm contents endpoints.
    [#5453](https://pulp.plan.io/issues/5453)
-   Synchronize and publish modular content.
    [#5493](https://pulp.plan.io/issues/5493)

### Bugfixes

-   Add url prefix to plugin custom urls.
    [#5330](https://pulp.plan.io/issues/5330)

### Deprecations and Removals

-   Removing pulp/api/v3/rpm/upload/
    [#5453](https://pulp.plan.io/issues/5453)

### Misc

-   [#5172](https://pulp.plan.io/issues/5172), [#5304](https://pulp.plan.io/issues/5304), [#5408](https://pulp.plan.io/issues/5408), [#5421](https://pulp.plan.io/issues/5421), [#5469](https://pulp.plan.io/issues/5469), [#5493](https://pulp.plan.io/issues/5493)

---

## 3.0.0b5 (2019-09-17)

### Features

-   Setting code on ProgressBar.
    [#5184](https://pulp.plan.io/issues/5184)
-   Sync and Publish kickstart trees.
    [#5206](https://pulp.plan.io/issues/5206)
-   Sync and Publish custom/unknown repository metadata.
    [#5432](https://pulp.plan.io/issues/5432)

### Bugfixes

-   Use the field relative_path instead of filename in the API calls while creating a content from an artifact
    [#4987](https://pulp.plan.io/issues/4987)
-   Fixing sync task failure.
    [#5285](https://pulp.plan.io/issues/5285)

### Misc

-   [#4681](https://pulp.plan.io/issues/4681), [#5201](https://pulp.plan.io/issues/5201), [#5202](https://pulp.plan.io/issues/5202), [#5331](https://pulp.plan.io/issues/5331), [#5430](https://pulp.plan.io/issues/5430), [#5431](https://pulp.plan.io/issues/5431), [#5438](https://pulp.plan.io/issues/5438)

---

## 3.0.0b4 (2019-07-03)

### Features

-   Add total counts to the sync progress report.
    [#4503](https://pulp.plan.io/issues/4503)
-   Greatly speed up publishing of a repository.
    [#4591](https://pulp.plan.io/issues/4591)
-   Add ability to copy content between repositories, content type(s) can be specified.
    [#4716](https://pulp.plan.io/issues/4716)
-   Renamed Errata/Update content to Advisory to better match the terminology of the RPM/DNF ecosystem.
    [#4902](https://pulp.plan.io/issues/4902)
-   Python bindings are now published nightly and with each release as
    [pulp-rpm-client](https://pypi.org/project/pulp-rpm-client/). Also Ruby bindings are published
    similarly to rubygems.org as [pulp_rpm_client](https://rubygems.org/gems/pulp_rpm_client).
    [#4960](https://pulp.plan.io/issues/4960)
-   Override the Remote's serializer to allow policy='on_demand' and policy='streamed'.
    [#5065](https://pulp.plan.io/issues/5065)

### Bugfixes

-   Require relative_path at the content unit creation time.
    [#4835](https://pulp.plan.io/issues/4835)
-   Fix migraitons failure by making models compatible with MariaDB.
    [#4909](https://pulp.plan.io/issues/4909)
-   Fix unique index length issue for MariaDB.
    [#4916](https://pulp.plan.io/issues/4916)

### Improved Documentation

-   Switch to using [towncrier](https://github.com/hawkowl/towncrier) for better release notes.
    [#4875](https://pulp.plan.io/issues/4875)
-   Add a docs page about the Python and Ruby bindings.
    [#4960](https://pulp.plan.io/issues/4960)

### Misc

-   [#4117](https://pulp.plan.io/issues/4117), [#4567](https://pulp.plan.io/issues/4567), [#4574](https://pulp.plan.io/issues/4574), [#5064](https://pulp.plan.io/issues/5064)
`````

## File: pulp-docs/pulp_rpm/coverage.md
`````markdown
Functional Tests Coverage
=========================

This file contains list of features and their test coverage.

| Feature | Coverage | Notes |
|--|--|--|
| **Sync** |  |  |
| As a user, I can sync all yum content types ( NO drpm) with immediate policy | PART |  |
| As a user, I can sync all yum content types ( NO drpm) with on-demand policy | PART | only types contained in rpm-unsigned + kickstart fixture |
| As a user, I can sync all yum content types ( NO drpm) with cache-only policy | PART | only types contained in rpm-unsigned |
| As a user, I can sync all yum content types ( NO drpm) in a mirror mode | PART | only types contained in rpm-unsigned |
| As a user, I can sync all yum content types ( NO drpm) in additive mode (default) | PART | checking counts of packages and advisories |
| As a user, I can sync all yum content types ( NO drpm) with optimization in additive mode| PART
 | only types contained in rpm-unsigned |
  As a user, I can sync all yum content types ( NO drpm) with optimization in mirror mode| PART
   | only types contained in rpm-unsigned |
| As a user, my mirror-mode syncs are exactly identical to the upstream repo (checksums, metadata files, repomd signature, package locations, extra_files.json) | NO | Needs fixture https://pulp.plan.io/issues/8809 |
| As a user, I can sync an RPM repository from the local filesystem | PART | Only tested with basic fixture in immediate mode with mirroring enabled |
| As a user, I can sync and skip specific type (srpm) | YES |  |
| As a user, I can sync opensuse repository | NO |  |
| As a user, I can sync Oracle repository using ULN | NO | |
| As a user, I can sync from a mirror list | YES |  |
| As a user, I can sync from a mirror list with comments | YES |  |
| As a user, I can sync from CDN using certificates | YES |  |
| As a user, I can re-sync custom repository metadata when it was the only change in a repository | YES |  |
| As a user, I can sync an existing advisory whose dates are timestamps (as opposed to datetimes) | NO  | Example: https://updates.suse.com/SUSE/Updates/SLE-SERVER/12-SP5/x86_64/update/ |
| As a user, I can sync repos with repomd.xml files whose filenames contain dashes (e.g., app-icons.tar.gz) | NO  | Example: https://updates.suse.com/SUSE/Updates/SLE-SERVER/12-SP5/x86_64/update/ |
| As a user, the content metadata being saved to Pulp is correct | PART | Packages and distribution trees are covered. Modulemd, Updateinfo and Groups metadata is not covered. "Weird" cases not covered. |
| As a user, the metadata being produced by Pulp is correct | PART | Primary, Filelists, and Other metadata is covered, Distribution Tree (.treeinfo) metadata is covered, Updateinfo and Groups metadata is not covered. "Weird" cases not covered. |
| As a user, I can see a package from modular repository is marked as modular | YES | Using ``is modular`` field on a package |
| **Duplicates** |  |  |
| As a user, I have only one advisory with the same id in a repo version | YES |  |
| As a user, I have only one module with the same NSVCA in a repo version | NO |  |
| As a user, I have only one [S]RPM with the same NEVRA in a repo version | YES |  |
| As a user, I have only one distribution tree, custom metadata of a certain type in a repo version | NO |  |
| As a user, I have only one module-defaults, package groups, category or environment with the same name in a repo version. | NO |  |
| **Publish** |  |  |
| As a user, I can publish repodata with specific checksum type | PART | "on_demand is not covered, https://pulp.plan.io/issues/6503" |
| As a user, I have the published root directory containing the ‘Package’ directory and packages in alphabetical order inside it. | YES | testing with modularity and kickstarter repositories, contains test if no extra files are present |
| As a user, I can sign repository metadata using a signing service and publish such repo | PART |  |
| As a user, I can have a config.repo file generated for any distribution at runtime | YES |  |
| As a user I can set/update repo_gpgcheck and gpg_check options | YES | |
| **Upload** |  |  |
| As a user, I can upload rpm packages, advisories and modulemd[-defaults] content types and optionally add them to repository | NO |  |
| As a user, I can upload rpm packages, advisories and modulemd[-defaults] type of content in chunks | PART |  |
| **Copy** |  |  |
| As a user, I can copy any content by adding it to a repository with modify/ endpoint (but nothing is copied automatically, and invalid repositories will fail to validate for some definition of “invalid”) | NO |  |
| As a user, I can copy any content by href using Copy API | PART |  |
| As a user, I can copy RPM package and its dependencies (if depsolving=True) | YES | to empty and non-empty repository |
| As a user, I can copy Advisory and packages it refers to (and their dependencies if depsolving=True) by copying the Advisory | YES |  |
| As a user, I can copy PackageCategories, PackageEnvironments and PackageGroups (and their dependencies) | PART | no packageenvironment test |
| As a user, I can copy Modulemd and its artifacts by copying the Modulemd | NO |  |
| As a user, I can copy Modulemd with its artifacts and its module dependencies and artifacts’ dependencies (if depsolving=True). | NO |  |
| As a user, if the default Modulemd is copied, its module-default is copied as well (and vice-versa) | NO |  |
| As a user, I can copy content with dep solving on and specify multiple repositories to copy from/to | NO |  |
| As a user, all content that I directly specify to be copied should always be copied (obviously, but we need to test it, there have been dependency solving bugs where it didn’t happen for various reasons) | NO |  |
| Dependencies can be solved for RPM packages which depend on specific files (such as /usr/bin/bash) present only in filelists.xml | NO | needs a fixture change/improvement |
| **Remove** |  |  |
| As a user, when a module is removed, its packages are removed as well ( not referenced by other modules) | NO |  |
| As a user, I can't remove content when it is used in a repository | PART | covered list in test_crud_content |
| **Consumer cases** |  |  |
| As a user, I can use dnf to install all the content served by Pulp | PART | only covers rpm installation with DNF |
| **Retention** |  |  |
| As a user, I can have a repository option that retains the latest N packages of the same name | PART | No coverage of packages with differing arch in same repo (src, i686, x86_64), no coverage of non-sync repo modifications, no coverage of modular RPMs being exempted. |
| As a user, I can export RPM-repository content to be consumed by a downstream Pulp3 instance. | PART | basic pulp-export succeeds |
| As a user, I can import RPM-repository content exported from an upstream Pulp3 instance. | PART | basic pulp-import succeeds |
| As a user, I can export/import an RPM repository with a kickstart | PART | Need to use rpm-distribution-tree fixture and check content after import |
| As a user, I can use RBAC | PART | Basic CRUD of ACS/Repo/Remote/Publication/Distribution covered |
`````

## File: pulp-docs/pulp_rpm/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulp_rpm' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulp_rpm/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_rpm/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulp_rpm/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulp_rpm/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulp-cli/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{% if section %}### {{section}} {: #{{versiondata.version}}{{section_slug}} }

{% else %}
{%- set section_slug = "" %}
{% endif %}

{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}
#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}

{% else %}
- {{ sections[section][category]['']|join(', ') }}

{% endif %}
{% if sections[section][category]|length == 0 %}
No significant changes.

{% else %}
{% endif %}

{% endfor %}
{% else %}
No significant changes.


{% endif %}
{% endfor %}
---
`````

## File: pulp-docs/pulp-cli/cookiecutter/bootstrap/{{ cookiecutter.__project_name }}/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see)
[//]: # (https://docs.pulpproject.org/contributing/git.html#changelog-update)

[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)
`````

## File: pulp-docs/pulp-cli/cookiecutter/ci/{{ cookiecutter.__project_name }}/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{% if section %}### {{section}} {: #{{versiondata.version}}{{section_slug}} }

{% else %}
{%- set section_slug = "" %}
{% endif %}

{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}
#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}

{% else %}
- {{ sections[section][category]['']|join(', ') }}

{% endif %}
{% if sections[section][category]|length == 0 %}
No significant changes.

{% else %}
{% endif %}

{% endfor %}
{% else %}
No significant changes.


{% endif %}
{% endfor %}
---
`````

## File: pulp-docs/pulp-cli/docs/dev/guides/contributing.md
`````markdown
# Contributing to the CLI

There are many ways to contribute to this project, and all are welcome.

## Get in Touch

If you want to connect with the Pulp community, ask some not-so-frequently-asked-questions or just leave general feedback, you can reach us in different ways summed up on [pulpproject.org](site:help/community/get-involved/).


## Doc Contributions

If you see something wrong with the docs, we welcome [documentation PRs](https://github.com/pulp/pulp-cli).

If you are using the Pulp CLI and have written end-to-end steps for Pulp workflows, we would greatly appreciate if you would contribute docs to the relevant [plugins](site:help/).


## Code Conventions

If you are interested in contributing code,
note that we have styling and formatting conventions for both the code and our PRs:

- Code formatting is done with `isort` and `black`.

- Static analysis is performed with `flake8`.

- `pulp-cli` utilizes strict python type annotations, checked with `mypy`.

- Shell scripts must pass `shellcheck`.

- If your PR is in response to an open issue, add `fixes #<ISSUE-NUMBER>` as its own line in your commit message.
  You need to add a changelog entry for it.

- If you do not have an issue, consider adding an anonymous changelog entry anyway.
  You might be asked by the reviewer to file an issue anyway.

!!!note

    PRs need to pass these checks before they can be merged.

    We recommend running these before committing:
    ```bash
    pip install -r lint_requirements.txt  # setup, needed only once
    make format  # reformatting with isort & black
    make lint  # checking with shellcheck, isort, black, flake8 and mypy
    make format lint  # both in one command
    ```

Also please follow [The seven rules of a great Git commit message](https://chris.beams.io/posts/git-commit/).
And finally, for each new feature, we require corresponding tests.

## Testing

Tests are shell scripts in `tests/scripts` with names like `test_*.sh`.
They should focus on the cli operation and are not a replacement for pulp integration tests;
i.e. make sure the cli translates to the right api calls, but do not care about pulp internals.

## Running Tests

In order to run tests, a running instance of pulp with all necessary plugins installed must be
configured in `tests/cli.toml`.

To run tests:

```bash
make test                           # all tests
pytest -m pulp_file                 # tests for pulp_file
pytest -m pulp_file -k test_remote  # run tests/scripts/pulp_file/test_remote.sh
```
`````

## File: pulp-docs/pulp-cli/docs/dev/learn/architecture.md
`````markdown
# Pulp CLI Architecture

## Pulp Glue

Pulp CLI uses the [`pulp-glue`](site:pulp-glue/docs/dev/learn/architecture/) library as an abstraction layer to perform high-level operations in pulp.

## Deferred Api and Entity lookup

In order to be able to access every (sub-)command's help page,
it is necessary that no code outside of the final performing command callback accesses the `api` property of the `PulpContext`.
See `pulp-glue` section about [deferred lookup](site:pulp-glue/docs/dev/learn/architecture/#deferred-api-and-entity-lookup).

## Plugin System

The Pulp CLI is designed with a plugin structure. Plugins can either live in the pulp-cli package or be shipped independently.
By convention, all CLI plugins are modules in the open namespace `pulpcore.cli`.
A plugin must register itself with the main app by specifying its main module as a `pulp_cli.plugins` entrypoint.

=== "pyproject.toml"

    ```toml
    [project.entry-points."pulp_cli.plugins"]
    myplugin = "pulpcore.cli.myplugin"
    ```

=== "setup.py"

    ```python
    entry_points={
        "pulp_cli.plugins": [
            "myplugin=pulpcore.cli.myplugin",
        ],
    }
    ```

---

The plugin should then attach subcommands to the `pulpcore.cli.common.main` command by providing a `mount` method in the main module.

```python
from pulp_cli.generic import pulp_command

@pulp_command()
def my_command():
    pass


def mount(main: click.Group, **kwargs: Any) -> None:
    main.add_command(my_command)
```

## Contexts

In `click`, every subcommand is accompanied by a `click.Context`, and objects can be attached to them.
In this CLI we attach a [`PulpCLIContext`][pulp_cli.generic.PulpCLIContext] to the main command, which inherits from `pulp-glue`'s [`PulpContext`][pulp_glue.common.context.PulpContext].
This context handles the communication to the pulp server through its `api` property.

Further we encourage the handling of communication with certain endpoints by subclassing the [`PulpEntityContext`][pulp_glue.common.context.PulpEntityContext] or some of the resource-specific children, such as [PulpRepositoryContext][pulp_glue.common.context.PulpRepositoryContext].
Some examples of this can be found under `pulp_glue/{plugin-name}/context.py`.

By attaching them to the contexts of certain command groups, they are accessible to commands via the `pass_entity_context` decorator.
Those entity contexts should provide a common interface to the layer of `click` commands that define the user interaction.

```python
@pulp_group()
@pass_pulp_context
@click.pass_context
def my_command(ctx, pulp_ctx):
    ctx.obj = MyEntityContext(pulp_ctx)


@my_command.command()
@pass_entity_context
def my_sub_command(entity_ctx):
    entity_ctx.entity = {"name": "myentity")
    entity_ctx.destroy()
```

## Generics

For certain often repeated patterns like listing all entities of a particular kind,
we provide generic commands that use the underlying context objects.
The following example shows the use of the [`show_command`][pulp_cli.generic.show_command] generic.

```python
from pulp_cli.generic import name_option, show_command,

lookup_params = [name_option]
my_command.add_command(show_command(decorators=lookup_params))
```

To add options to these subcommands, pass a list of [`PulpOption`][pulp_cli.generic.PulpOption] objects to the `decorators` argument.
Preferably these are created using the [`pulp_option`][pulp_cli.generic.pulp_option] factory.

```python
from pulp_cli.generic import list_command,

filter_params = [
    pulp_option("--name"),
    pulp_option("--name-contains", "name__contains"),
]
my_command.add_command(list_command(decorators=filter_params))
```

## Version dependent code paths

Each Pulp CLI release is designed to support multiple Pulp server versions and the CLI itself is versioned independently of any version of the Pulp server components.
It is supposed to be able to communicate with different combinations of server component versions at the same time.
Because of this, it might be necessary to guard certain features and workarounds by checking against the available server plugin version.

As a rule of thumb, all necessary workarounds should be implemented in the corresponding `Context` objects.
To facilitate diverting code paths depending on plugin versions, the `PulpContext` provides the `needs_plugin` and `has_plugin` methods, both of which accept a [`PluginRequirement`][pulp_glue.common.context.PluginRequirement] object to describe dependencies on server components.

While `has_plugin` will evaluate immediately, `needs_plugin` can be seen as a deferred assertion.
It will raise an error, once the first access to the server is attempted.

```python
# In pulp_glue_my_plugin
class MyEntityContext(PulpEntityContext):
    def show(self, href):
        if self.pulp_ctx.has_plugin(PluginRequirement("my_content", specifier=">=1.2.3", inverted=True)):
            # Versioned workaroud
            # see bug-tracker/12345678
            return lookup_my_content_legacy(href)
        return super().show(href)


# In pulp_cli_my_plugin
@main.command()
@pass_pulp_context
@click.pass_context
def my_command(ctx, pulp_ctx):
    pulp_ctx.needs_plugin(PluginRequirement("my_content", specifier=">=1.0.0"))
    ctx.obj = MyEntityContext(pulp_ctx)
```

To declare version restrictions on *options*, the [`preprocess_entity`][pulp_glue.common.context.PulpEntityContext.preprocess_entity] method can be used to check if a given option is present in the request body and conditionally apply the requirements to the context.

In the following example, a guard is added because `my_option` was introduced to `MyPluginRepository` in version 3.24.0 of `"my_plugin"`:

```python
class PulpMyPluginRepositoryContext(PulpRepositoryContext):
    ...

    def preprocess_entity(self, body, partial) -> EntityDefinition:
        body = super().preprocess_entity(body, partial=partial)
        if "my_option" in body:
            self.pulp_ctx.needs_plugin(
                PluginRequirement("my_plugin", specifier=">=3.24.0", feature=_("my feature"))
            )
        return body
```

!!! note
    The specifier `>=x.y.z` doesn't include `x.y.z.dev` according to PEP 440.
    Therefore, when adapting to an unreleased feature change from a plugin, you need to specify the prerelease part of the version explicitly.
    However `>=x.y.z.dev` is never unambiguous in the current Pulp versioning practice.
    Once that change is released please reset the constraint to the plain `x.y.z` schema.
`````

## File: pulp-docs/pulp-cli/docs/dev/reference/generic.md
`````markdown
# pulp\_cli.generic

::: pulp_cli.generic
`````

## File: pulp-docs/pulp-cli/docs/user/guides/_SUMMARY.md
`````markdown
* [Installation](installation.md)
* [Configuration](configuration.md)
* [Advanced Features](advanced_features.md)
`````

## File: pulp-docs/pulp-cli/docs/user/guides/advanced_features.md
`````markdown
# Configure (advanced)

## Custom CA bundle

You can specify a custom CA bundle for the connection to a Pulp server by providing a path in one of the following environment variables (ordered by precedence):
`PULP_CA_BUNDLE` ,`REQUESTS_CA_BUNDLE` `CURL_CA_BUNDLE`

## Shell Completion

The CLI uses the click package which supports shell completion.
To configure this, check out [click's documentation](https://click.palletsprojects.com/shell-completion/).
As an example, here is what to add to your `~/.bashrc` file if you're using bash:

```bash
eval "$(LC_ALL=C _PULP_COMPLETE=bash_source pulp)"
```

!!! note

    When using `click<8.0.0` the command instead reads:

    `eval "$(LC_ALL=C _PULP_COMPLETE=source_bash pulp)"`

## Interactive shell mode

!!! note

    To use the shell mode, you need to install the the extra requirements tagged "shell".

Starting the CLI with "pulp shell" drops you into the shell:

```plain
(pulp) [vagrant@pulp3 ~]$ pulp shell
Starting Pulp3 interactive shell...
pulp> help

Documented commands (type help <topic>):
========================================
access-policy  config     export    group      orphans     rpm     task
ansible        container  exporter  importer   python      show    user
artifact       debug      file      migration  repository  status  worker

Undocumented commands:
======================
exit  help  quit

pulp> status
{
    ...
}

pulp> exit
(pulp) [vagrant@pulp3 ~]$
```
`````

## File: pulp-docs/pulp-cli/docs/user/guides/configuration.md
`````markdown
# Configure (basic)

The CLI can be configured by using a toml file.
By default the location of this file is `~/.config/pulp/cli.toml`.
However, this can be customized by using the `--config` option.
Any settings supplied as options to a command will override these settings.

Example file:

```
[cli]
base_url = "https://pulp.dev"
verify_ssl = false
format = "json"
```

## Config Profiles

The CLI allows you to configure additional profiles at the same time.
If you add a `[cli-server1]` section to your config,
you can use that set of settings by specifying the `--profile server1` on the pulp command line.
This can be helpful if you need to use different usernames for certain actions,
or if you need to interact with several different Pulp servers.

## Generating a new configuration

To generate a new configuration:

```
pulp config create --base-url "http://localhost"
pulp config create -e  # with an editor (e.g. vim)
pulp config create -i  # interactive prompts
```

## Validating the configuration

The easiest way to validate your config is to call a command that interacts with your Pulp server:

```
pulp status
```

To statically validate your config file (check that it exists, that it has not erroneous values,
etc) use the validate command:

```
pulp config validate
pulp config validate --strict  # validates that all settings are present
```

## Using netrc

If no user/pass is supplied either in the config file or as an option,
then the CLI will attempt to use `~/.netrc`.
Here is a `.netrc` example for localhost:

```
machine localhost
login admin
password password
```

## Tips for Katello Users

If you have a Katello environment and wish to use pulp-cli to connect to Pulp, you'll need to
configure client certificate authentication in your `~/.config/pulp/cli.toml`:

```toml
[cli]
base_url = "https://<your FQDN>"
cert = "/etc/pki/katello/certs/pulp-client.crt"
key = "/etc/pki/katello/private/pulp-client.key"
```

Katello content-proxy servers do not possess the certificates required to communicate with Pulp;
therefore you should install pulp-cli only on the primary server, and override the `base_url` setting on the command line when you need to connect to Pulp running on a content-proxy rather than Pulp on the primary Katello server: `--base-url https://capsule.example.com`
It can be helpful to use the `--profile` option here.

As Katello uses Pulp as a backend, all modifying actions in Pulp should be performed via Katello.
Therefore you are also strongly encouraged to set `dry_run = true`, to prevent accidentally calling into dangerous commands.
This setting can in turn be overwritten on the command-line with the `--force` flag.
`````

## File: pulp-docs/pulp-cli/docs/user/guides/installation.md
`````markdown
# Install

## TL;DR: Get Started Real Fast

=== "pip"

    ```bash
    pip install pulp-cli[pygments]
    pulp config create -e
    # insert your server configuration here
    pulp status
    ```

=== "pipx"

    ```bash
    pipx install pulp-cli[pygments]
    pulp config create -e
    # insert your server configuration here
    pulp status
    ```

---

The pulp-cli package can be installed from a variety of sources.
After installing, see the next section on how to [configure](configuration.md) pulp-cli.

## Using pipx

To install with `pipx` run:
```bash
pipx install pulp-cli
```

You can add optional dependencies in the usual way.
```bash
pipx install pulp-cli[pygments,shell]
```

[Additional plugins](site:pulp-cli/#cli-plugins) need to be injected into the apps virtual environment like this:
```bash
pipx inject pulp-cli pulp-cli-deb
```

## From PyPI using pip

!!!warning

    We highly recommend using virtual environments with pip.

To install with minimal dependencies:
```bash
pip install pulp-cli  # minimal dependencies
```

You can also include optional dependencies for [advanced features](advanced_features.md) with one of the following commands:
```bash
pip install pulp-cli[pygments]  # colorized output
pip install pulp-cli[shell]  # with interactive shell mode
```

If you want to install additional cli plugins, you can follow this example:
```bash
pip install pulp-cli-deb
```

## From a source checkout

If you intend to use unreleased features, or want to contribute to the CLI, you can install from source:
```bash
git clone git@github.com:pulp/pulp-cli.git
pip install -e ./pulp-cli -e ./pulp-cli/pulp-glue

# Optionally install plugins from source
git clone git@github.com:pulp/pulp-cli-deb.git
pip install -e ./pulp-cli-deb

git clone git@github.com:pulp/pulp-cli-maven.git
pip install -e ./pulp-cli-maven -e ./pulp-cli-maven/pulp-glue-maven
```
`````

## File: pulp-docs/pulp-cli/docs/user/reference/_SUMMARY.md
`````markdown
* [Using the CLI](using_the_cli.md)
* [Authentication Methods](authentication.md)
`````

## File: pulp-docs/pulp-cli/docs/user/reference/authentication.md
`````markdown
# Supported Authentication Methods

Pulp-CLI support some authentication methods to authenticate against a Pulp instance.
Some very simple and common, like HTTP Basic Auth, and some more complex like OAuth2.

## OAuth2 ClientCredentials grant

!!! warning

    This is an experimental feature. The support of it could change without any major warning.

    For more information, see [RFC6749 section 4.4].

Using this method the pulp-cli can request a token from an Identity Provider using a pair of 
credentials (client_id/client_secret). The token is then sent through using the `Authorization` header.
The issuer URL and the scope of token must be specified by the Pulp server through the OpenAPI scheme definition.

[RFC6749 section 4.4]: https://datatracker.ietf.org/doc/html/rfc6749#section-4.4
`````

## File: pulp-docs/pulp-cli/docs/user/reference/using_the_cli.md
`````markdown
# Using the CLI

## General command syntax

In general, a pulp cli command follows the following structure:

`pulp [<global_options>] <plugin> <resource_class> [--type <resource_type>] <action> [<action_options>]`

Note that pulpcore commands omit the `<plugin>` part.

!!! Tip
    **To learn about the structure of a command, you can use the `--help` option with any (in-)complete command.**

## Global options

Global options must be specified between `pulp` and the first subcommand.
Most of these can be represented by a corresponding configuration option.

| Option | Description | Comment |
| --- | --- | --- |
| --version | Show the version and exit. | No configuration option |
| --help | Show help message and exit. | No configuration option |
| --config PATH | Specify the path of a Pulp CLI settings file to use instead of the default location. | No configuration option |
| -p, --profile TEXT | Select a [config profile](site:pulp-cli/docs/user/guides/configuration/#config-profiles) to use. | No configuration option |
| --base-url TEXT | API base url of the pulp server. | |
| --api-root TEXT | Absolute API base path on server | not including 'api/v3/' |
| --domain TEXT | Domain to work in if feature is enabled | |
| --cid TEXT | Logging CID to send on requests | server configuration may require a valid GUID and ignore CIDs that aren't |
| --header TEXT | Custom header to add to each api call. Name and value are colon separated. | Can be specified multiple times. |
| --username TEXT | Username on pulp server. | |
| --password TEXT | Password on pulp server. | |
| --cert TEXT | Path to client certificate. | |
| --key TEXT | Path to client private key. Not required if client cert contains this. | |
| --verify-ssl / --no-verify-ssl | Verify SSL connection to the pulp server. | |
| --refresh-api | Invalidate cached API docs. | No configuration option |
| --dry-run / --force | Trace commands without performing any unsafe HTTP calls. | |
| -b, --background | Start tasks in the background instead of awaiting them. | No configuration option |
| -T, --timeout INTEGER | Time to wait for background tasks, set to 0 to wait infinitely. | |
| --format [json\|yaml\|none] | Select an output format for the response. | |
| -v, --verbose | Increase verbosity to explain api calls as they are made. | Repeat up to three times. |

## Example commands

`pulp status`

`pulp file repository list`

`pulp file repository create --name file_repo1`

`pulp file repository update --name file_repo1 --description "Contains plain files"`

`pulp file repository destroy --name file_repo1`
`````

## File: pulp-docs/pulp-cli/docs/index.md
`````markdown
# Pulp 3 CLI Docs

This is the documentation for Pulp 3's command line interface.

Here you can find information about how to install the Pulp 3 CLI, and general usage and syntax information.

Currently `pulp-cli` supports pulpcore and 6 of Pulp's plugins: `pulp_ansible`, `pulp-certguard`, `pulp_container`, `pulp_file`, `pulp_python` and `pulp_rpm`.
See section below for information on how to extend the CLI to support other Pulp plugins.

You can find workflow examples for the Pulp 3 CLI throughout the [plugin documentation](site:help/).
For example, [synchronizing a File repository](site:/pulp_file/docs/user/guides/sync/).

Use the links on the left to navigate.

## CLI Plugins

The CLI can be extended via external plugins.
See the [installation](docs/user/guides/installation/) instructions.

Known plugins include:

| Plugin | Description | Source Repository |
| --- | --- | --- |
| `pulp-cli-deb` | Provides the `deb` subcommand group to interact with `pulp_deb`. | [`pulp/pulp-cli-deb`](https://github.com/pulp/pulp-cli-deb) |
| `pulp-cli-gem` | Provides the `gem` subcommand group to interact with `pulp_gem`. | [`pulp/pulp-cli-gem`](https://github.com/pulp/pulp-cli-gem) |
| `pulp-cli-maven` | Provides the `maven` subcommand group to interact with `pulp_maven`. | [`pulp/pulp-cli-maven`](https://github.com/pulp/pulp-cli-maven) |
| `pulp-cli-ostree` | Provides the `ostree` subcommand group to interact with `pulp_ostree`. | [`pulp/pulp-cli-ostree`](https://github.com/pulp/pulp-cli-ostree) |
`````

## File: pulp-docs/pulp-cli/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see)
[//]: # (https://docs.pulpproject.org/contributing/git.html#changelog-update)

[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 0.33.0 (2025-06-02) {: #0.33.0 }



#### Features {: #0.33.0-feature }

- Added `profile-artifact-urls` subcommand to `task` command.
  [#1172](https://github.com/pulp/pulp-cli/issues/1172)
- Add "--header" option to remote create and update commands.
  [#1185](https://github.com/pulp/pulp-cli/issues/1185)
- Add support for click 8.2.
- Added support for the replicate policy options added in pulpcore 3.73.0.
- Added support for the replicate q-select option added in pulpcore 3.62.0.


#### Bugfixes {: #0.33.0-bugfix }

- Adjust click dependency constraints to breaking changes in y-releases.


#### Deprecations and Removals {: #0.33.0-removal }

- Removed legacy support and tests for the 2to3 migration plugin.
- Removed support for the old options `--package-checksum-type`, `--metadata-checksum-type`, `--gpgcheck`, and `--repo-gpgcheck` for newer version of pulp_rpm. These options have been deprecated for some time.


### Pulp GLUE {: #0.33.0-pulp-glue }


#### Features {: #0.33.0-pulp-glue-feature }

- Added `profile_artifact_urls` to `PulpTaskContext`.
  [#1172](https://github.com/pulp/pulp-cli/issues/1172)


#### Deprecations and Removals {: #0.33.0-pulp-glue-removal }

- Removed support for gpgcheck, repo_gpgcheck, package_checksum_type and metadata_checksum_type for the RPM plugin for version >=3.30.0


---

## 0.32.3 (2025-05-12) {: #0.32.3 }



No significant changes.


### Pulp GLUE {: #0.32.3-pulp-glue }


No significant changes.


---

## 0.32.2 (2025-05-12) {: #0.32.2 }



#### Bugfixes {: #0.32.2-bugfix }

- Adjust click dependency constraints to breaking changes in y-releases.


### Pulp GLUE {: #0.32.2-pulp-glue }


No significant changes.


---

## 0.32.1 (2025-04-07) {: #0.32.1 }



No significant changes.


### Pulp GLUE {: #0.32.1-pulp-glue }


No significant changes.


---

## 0.32.0 (2025-03-31) {: #0.32.0 }



#### Features {: #0.32.0-feature }

- Added support for checkpoint distributions and publications.
  [#1129](https://github.com/pulp/pulp-cli/issues/1129)
- Add support for content label commands, requires pulpcore 3.73.2 or later.
  [#1137](https://github.com/pulp/pulp-cli/issues/1137)


#### Bugfixes {: #0.32.0-bugfix }

- Fix a bug when header values weren't allowed to contain other than alphanumeric characters.
  Also combine the headers from setting and the commandline.
  [#1139](https://github.com/pulp/pulp-cli/issues/1139)


#### Improved Documentation {: #0.32.0-doc }

- Removed "supported workflows" from user reference material.
  [#1148](https://github.com/pulp/pulp-cli/issues/1148)


#### Deprecations and Removals {: #0.32.0-removal }

- The module `generic` moved from `pulpcore.cli.common.generic` to `pulp_cli.generic`.
  The old import path is still available for compatibility reasons.


### Pulp GLUE {: #0.32.0-pulp-glue }


No significant changes.


---

## 0.31.2 (2025-05-12) {: #0.31.2 }



#### Bugfixes {: #0.31.2-bugfix }

- Adjust click dependency constraints to breaking changes in y-releases.


### Pulp GLUE {: #0.31.2-pulp-glue }


No significant changes.


---

## 0.31.1 (2025-03-10) {: #0.31.1 }



#### Bugfixes {: #0.31.1-bugfix }

- Fix a bug when header values weren't allowed to contain other than alphanumeric characters.
  Also combine the headers from setting and the commandline.
  [#1139](https://github.com/pulp/pulp-cli/issues/1139)


### Pulp GLUE {: #0.31.1-pulp-glue }


No significant changes.


---

## 0.31.0 (2025-02-25) {: #0.31.0 }



#### Bugfixes {: #0.31.0-bugfix }

- Added "--base-repository" option to modify commands to allow creating a repository version from a different repository.
  [#618](https://github.com/pulp/pulp-cli/issues/618)


#### Misc {: #0.31.0-misc }

- Changed the upper version bound of `packaging` to the last available version according to CalVer.
  [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.31.0-pulp-glue }


#### Features {: #0.31.0-pulp-glue-feature }

- Improved validation to consume openapi 3.1 schemata also.


#### Bugfixes {: #0.31.0-pulp-glue-bugfix }

- Fixed validation failure with `additionalProperties`.


#### Misc {: #0.31.0-pulp-glue-misc }

- Changed the upper version bound of `packaging` to the last available version according to CalVer.
  [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.30.4 (2025-05-12) {: #0.30.4 }



#### Bugfixes {: #0.30.4-bugfix }

- Adjust click dependency constraints to breaking changes in y-releases.


### Pulp GLUE {: #0.30.4-pulp-glue }


No significant changes.


---

## 0.30.3 (2025-03-31) {: #0.30.3 }



#### Misc {: #0.30.3-misc }

- Changed the upper version bound of `packaging` to the last available version according to CalVer.
  [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.30.3-pulp-glue }


#### Bugfixes {: #0.30.3-pulp-glue-bugfix }

- Fixed validation failure with `additionalProperties`.


#### Misc {: #0.30.3-pulp-glue-misc }

- Changed the upper version bound of `packaging` to the last available version according to CalVer.
  [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.30.2 (2025-01-20) {: #0.30.2 }



No significant changes.


### Pulp GLUE {: #0.30.2-pulp-glue }


No significant changes.


---

## 0.30.1 (2025-01-20) {: #0.30.1 }



No significant changes.


### Pulp GLUE {: #0.30.1-pulp-glue }


No significant changes.


---

## 0.30.0 (2025-01-15) {: #0.30.0 }



#### Features {: #0.30.0-feature }

- Added `--file-url` option to file, python and rpm content create commands.
  [#file_url](https://github.com/pulp/pulp-cli/issues/file_url)


#### Bugfixes {: #0.30.0-bugfix }

- Fixed OAuth2 not using the provided CA bundle.
  [#1096](https://github.com/pulp/pulp-cli/issues/1096)
- Fixed the error message for `pulp config edit` to properly hint at `pulp config create`.


#### Improved Documentation {: #0.30.0-doc }

- Fixed formatting and removed a confusing part of advanced features.


#### Deprecations and Removals {: #0.30.0-removal }

- Drop support for the now unsupported Python version 3.8.


#### Misc {: #0.30.0-misc }

- Replaced python-toml dependency with a delicate combination of tomllib, tomli and tomli-w.
  [#1084](https://github.com/pulp/pulp-cli/issues/1084)
- Declare compatibility with Python 3.13.


### Pulp GLUE {: #0.30.0-pulp-glue }


#### Bugfixes {: #0.30.0-pulp-glue-bugfix }

- Fixes `from_config` call that messed up the headers attribute.


#### Deprecations and Removals {: #0.30.0-pulp-glue-removal }

- Drop support for the now unsupported Python version 3.8.


#### Misc {: #0.30.0-pulp-glue-misc }

- Declare compatibility with Python 3.13.


---

## 0.29.4 (2025-05-12) {: #0.29.4 }



#### Bugfixes {: #0.29.4-bugfix }

- Adjust click dependency constraints to breaking changes in y-releases.


### Pulp GLUE {: #0.29.4-pulp-glue }


No significant changes.


---

## 0.29.3 (2025-03-31) {: #0.29.3 }



#### Misc {: #0.29.3-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.29.3-pulp-glue }


#### Misc {: #0.29.3-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.29.2 (2024-09-23) {: #0.29.2 }



#### Bugfixes {: #0.29.2-bugfix }

- Fixes `from_config` call that messed up the headers attribute.


### Pulp GLUE {: #0.29.2-pulp-glue }


No significant changes.


---

## 0.29.1 (2024-09-17) {: #0.29.1 }



#### Misc {: #0.29.1-misc }

- Added experimental support for Python 3.13


### Pulp GLUE {: #0.29.1-pulp-glue }


#### Misc {: #0.29.1-pulp-glue-misc }

- Added experimental support for Python 3.13


---

## 0.29.0 (2024-09-17) {: #0.29.0 }



#### Features {: #0.29.0-feature }

- Added memoization to CLI auth provider. This helps to reuse a retrieved oauth token for the lifetime of the process.
- Changed the way OAuth2 Client Credentials are provided to give the user some choice over the authentication to use.
  The new parameters `--client-id` and `--client-secret` were added and `--username`, `--password` are now restricted to HTTP Basic.


#### Deprecations and Removals {: #0.29.0-removal }

- Removed the prompt for a username.
  Starting with this release the user needs to provide the username in the settings, or via `--username` to allow http basic auth.
  If no authentication is needed or another authentication mechanism should be used, it can be omitted.


### Pulp GLUE {: #0.29.0-pulp-glue }


#### Features {: #0.29.0-pulp-glue-feature }

- Added `from_config` constructor to `PulpContext` class.
  [#1060](https://github.com/pulp/pulp-cli/issues/1060)


#### Bugfixes {: #0.29.0-pulp-glue-bugfix }

- Fixed sending no scope instead an empty scope when using the `OAuth2ClientCredentialsAuth` authentication class.
  [#1050](https://github.com/pulp/pulp-cli/issues/1050)
- Fixed the "list" commands to show the notification about not displaying all items when it shouldn't and the other way around.
  [#1068](https://github.com/pulp/pulp-cli/issues/1068)
- Addressed some edge-case failures in the oauth2-client workflow.
- Fixed regressions in the auth selection algorithm of `AuthProviderBase`.
  In particular, proposals requiring multiple mechanisms are ignored for now instead of considering each constituent individually,
  "HTTP Bearer" and other IANA schemes are no longer interpreted as "HTTP Basic" and the empty proposal rightfully reflects no needed authentication.
- Use BasicAuth for token retrieval to comply with RFC6749.


---

## 0.28.5 (2025-03-31) {: #0.28.5 }



#### Misc {: #0.28.5-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.28.5-pulp-glue }


#### Misc {: #0.28.5-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.28.4 (2024-09-13) {: #0.28.4 }



No significant changes.


### Pulp GLUE {: #0.28.4-pulp-glue }


#### Bugfixes {: #0.28.4-pulp-glue-bugfix }

- Fixed the "list" commands to show the notification about not displaying all items when it shouldn't and the other way around.
  [#1068](https://github.com/pulp/pulp-cli/issues/1068)


---

## 0.28.3 (2024-09-12) {: #0.28.3 }



No significant changes.


### Pulp GLUE {: #0.28.3-pulp-glue }


No significant changes.


---

## 0.28.2 (2024-09-03) {: #0.28.2 }



No significant changes.


### Pulp GLUE {: #0.28.2-pulp-glue }


#### Bugfixes {: #0.28.2-pulp-glue-bugfix }

- Fixed regressions in the auth selection algorithm of `AuthProviderBase`.
  In particular, proposals requiring multiple mechanisms are ignored for now instead of considering each constituent individually,
  "HTTP Bearer" and other IANA schemes are no longer interpreted as "HTTP Basic" and the empty proposal rightfully reflects no needed authentication.


---

## 0.28.1 (2024-08-26) {: #0.28.1 }



No significant changes.


### Pulp GLUE {: #0.28.1-pulp-glue }


#### Bugfixes {: #0.28.1-pulp-glue-bugfix }

- Addressed some edge-case failures in the oauth2-client workflow.


---

## 0.28.0 (2024-08-22) {: #0.28.0 }



#### Features {: #0.28.0-feature }

- Added the following filters to `pulp rpm content list`:
    - `--arch-contains`
    - `--arch-startswith`
    - `--name-contains`
    - `--name-startswith`
    - `--release-contains`
    - `--release-startswith`
  [#687](https://github.com/pulp/pulp-cli/issues/687)
- Added support to OAuth2 ClientCredentials grant flow as authentication method.
  This is tech preview and may change without previous warning.
  [#926](https://github.com/pulp/pulp-cli/issues/926)
- Added commands for composite and header content guards.
  [#969](https://github.com/pulp/pulp-cli/issues/969)


#### Bugfixes {: #0.28.0-bugfix }

- Fix fake mode for uploading content.


### Pulp GLUE {: #0.28.0-pulp-glue }


#### Features {: #0.28.0-pulp-glue-feature }

- Added contexts for composite and header content guards.
  [#969](https://github.com/pulp/pulp-cli/issues/969)
- Added a batched `list_iterator` added to entity context.
- Added a repository scope to `PulpContentContext` to allow to operate on "content in a repository" in a natural way.
- Allow to pass limit=0 to EntityContext.list to fetch all entities.


#### Bugfixes {: #0.28.0-pulp-glue-bugfix }

- Fixed an error where safemode wrongly complained to be in `fake_mode`.
  [#1037](https://github.com/pulp/pulp-cli/issues/1037)
- Added missing `defaults` argument to `converge`.
- Fixed a bug where `create` always returned the first entry of created resources.
  Where possible, it now compares the results with `HREF_PATTERN` to select the resource to return.
- Fixed the api spec of the RPM copy command so it does not collide with other copy implementations.


---

## 0.27.4 (2025-03-31) {: #0.27.4 }



#### Misc {: #0.27.4-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.27.4-pulp-glue }


#### Misc {: #0.27.4-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.27.3 (2024-09-12) {: #0.27.3 }



No significant changes.


### Pulp GLUE {: #0.27.3-pulp-glue }


No significant changes.


---

## 0.27.2 (2024-08-15) {: #0.27.2 }



No significant changes.


### Pulp GLUE {: #0.27.2-pulp-glue }


#### Bugfixes {: #0.27.2-pulp-glue-bugfix }

- Fixed an error where safemode wrongly complained to be in `fake_mode`.
  [#1037](https://github.com/pulp/pulp-cli/issues/1037)


---

## 0.27.1 (2024-07-31) {: #0.27.1 }



#### Bugfixes {: #0.27.1-bugfix }

- Fix fake mode for uploading content.


### Pulp GLUE {: #0.27.1-pulp-glue }


#### Bugfixes {: #0.27.1-pulp-glue-bugfix }

- Fixed a bug where `create` always returned the first entry of created resources.
  Where possible, it now compares the results with `HREF_PATTERN` to select the resource to return.
- Fixed the api spec of the RPM copy command so it does not collide with other copy implementations.


---

## 0.27.0 (2024-07-17) {: #0.27.0 }



#### Features {: #0.27.0-feature }

- Expanded on options available to `rpm content -t package upload`.
  [#994](https://github.com/pulp/pulp-cli/issues/994)
  The user can now:
    - Upload an entire directory of RPMs.
    - Choose to have them added to their desired destination as a single new repository-version.
    - Choose to have a new Publication created at the end of the uploads.


#### Bugfixes {: #0.27.0-bugfix }

- Fixed the interactive config generation in the face of options allowing multiple values.
  [#1008](https://github.com/pulp/pulp-cli/issues/1008)


#### Improved Documentation {: #0.27.0-doc }

- Fixed some docs pages and improved the table of contents.


### Pulp GLUE {: #0.27.0-pulp-glue }


#### Features {: #0.27.0-pulp-glue-feature }

- Added `converge` to the `PulpEntityContext` to allow converging on a desired entity state.
- Implemented a `fake_mode` flag on the `PulpContext` that indicates to users of the context that modifying operations should not be carried out, but faked.
  This will imply the `safe_calls_only` flag in the `api_kwargs` that will serve as a safeguard for any POST, PUT, PATCH or DELETE that still made it through.
  A `NotImplementedFake` exception will be issued in that case.


---

## 0.26.1 (2025-03-31) {: #0.26.1 }



#### Bugfixes {: #0.26.1-bugfix }

- Fixed the interactive config generation in the face of options allowing multiple values.
  [#1008](https://github.com/pulp/pulp-cli/issues/1008)


#### Misc {: #0.26.1-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.26.1-pulp-glue }


#### Misc {: #0.26.1-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.26.0 (2024-07-01) {: #0.26.0 }



#### Features {: #0.26.0-feature }

- Added the "pulp rpm prune-packages" command to support new RPM feature.
  See [pulp\_rpm#2909](https://github.com/pulp/pulp_rpm/issues/2909) for details.
  [#979](https://github.com/pulp/pulp-cli/issues/979)
- Added "pulp rpm copy --config --dependency-solve" support.
  [#990](https://github.com/pulp/pulp-cli/issues/990)


#### Bugfixes {: #0.26.0-bugfix }

- Don't allow requests-2.32 due to https instability issues with that release.
  [#985](https://github.com/pulp/pulp-cli/issues/985)
- A provided "Authorization" header will no longer be overruled by other authentication mechanisms.
- Fixed "Cannot use both 'auth' and 'cert'" error when trying to use pulp-cli with cert auth.


#### Deprecations and Removals {: #0.26.0-removal }

- Deprecated `settings.toml` in favor of `cli.toml` in `$XDG_CONFIG_HOME` for settings.


#### Developer Notes {: #0.26.0-devel }

- Added `pass_view_set_context` decorator to lookup `PulpViewSetContext` objects.
- Added an automatic PR labeler for "no-issue", "no-changelog", "multi-commit", "wip" and "cherry-pick".
  It is no longer necessary to put the [noissue] tag in to commits without a link to an issue.
  Instead, the reviewer should take note of the "noissue"-label and decide whether to ask for one.


#### Misc {: #0.26.0-misc }

- [#932](https://github.com/pulp/pulp-cli/issues/932)


### Pulp GLUE {: #0.26.0-pulp-glue }


#### Bugfixes {: #0.26.0-pulp-glue-bugfix }

- Fixed the logic to use requests defaults for tls verification.


#### Deprecations and Removals {: #0.26.0-pulp-glue-removal }

- Removed unused (and undocumented) `isatty` attribute from `PulpContext`.


#### Developer Notes {: #0.26.0-pulp-glue-devel }

- Added a `PulpViewSetContext` to represent a view set not attached to a specific type of entity.
  Accordingly, `PulpEntityContext` should only be used when that API is defined by a `NamedModelViewset`.


---

## 0.25.8 (2025-03-31) {: #0.25.8 }



#### Misc {: #0.25.8-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.25.8-pulp-glue }


#### Misc {: #0.25.8-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.25.7 (2024-06-20) {: #0.25.7 }



No significant changes.


### Pulp GLUE {: #0.25.7-pulp-glue }


No significant changes.


---

## 0.25.6 (2024-06-17) {: #0.25.6 }



No significant changes.


### Pulp GLUE {: #0.25.6-pulp-glue }


No significant changes.


---

## 0.25.5 (2024-06-12) {: #0.25.5 }



#### Bugfixes {: #0.25.5-bugfix }

- Don't allow requests-2.32 due to https instability issues with that release.
  [#985](https://github.com/pulp/pulp-cli/issues/985)


### Pulp GLUE {: #0.25.5-pulp-glue }


No significant changes.


---

## 0.25.4 (2024-06-07) {: #0.25.4 }



No significant changes.


### Pulp GLUE {: #0.25.4-pulp-glue }


No significant changes.


---

## 0.25.3 (2024-06-03) {: #0.25.3 }



#### Bugfixes {: #0.25.3-bugfix }

- Fixed "Cannot use both 'auth' and 'cert'" error when trying to use pulp-cli with cert auth.


### Pulp GLUE {: #0.25.3-pulp-glue }


No significant changes.


---

## 0.25.2 (2024-05-22) {: #0.25.2 }



No significant changes.


### Pulp GLUE {: #0.25.2-pulp-glue }


#### Bugfixes {: #0.25.2-pulp-glue-bugfix }

- Fixed the logic to use requests defaults for tls verification.


---

## 0.25.1 (2024-04-30) {: #0.25.1 }



No significant changes.


### Pulp GLUE {: #0.25.1-pulp-glue }


No significant changes.


---

## 0.25.0 (2024-04-22) {: #0.25.0 }



#### Features {: #0.25.0-feature }

- Added CLI plugin information to `pulp --version` command.
- Added `pulp debug has-cli-plugin` command.
- Added `pulp debug ipython` command to drop into a python shell.


#### Bugfixes {: #0.25.0-bugfix }

- Added validation to see if `base_url` in the config looks useful.
  [#588](https://github.com/pulp/pulp-cli/issues/588)
- Fixed an issue where passing `usename=None` in `api_kwargs` was handled different than not providing it at all.


#### Improved Documentation {: #0.25.0-doc }

- Added the structure for `https://staging-docs.pulpproject.org` and populated it with existing content.
  [#903](https://github.com/pulp/pulp-cli/issues/903)


#### Deprecations and Removals {: #0.25.0-removal }

- Removed `--min` and `--max` parameters from `pulp debug has-plugin`.
  Use `--specifier` instead.
- Removed deprecated `--fields` and `--exclude-fields` options from `pulp ansible content list` command.
  Use the `--field` and `--exclude-field` options instead.
- Removed deprecated file and python content modification commands.
  Use the `pulp {file,python} content ...` commands.


#### Developer Notes {: #0.25.0-devel }

- CLI Plugins need to provide a `mount` function. This used to be an optional requirement.
- `pulpcore.cli.common.context` and `pulpcore.cli.core.context` are no longer available as a convenience export.
- `repository_option` has been removed. Please use `repository_lookup_option` instead.


### Pulp GLUE {: #0.25.0-pulp-glue }


#### Features {: #0.25.0-pulp-glue-feature }

- Added `add_user` and `remove_user` to `PulpGroupContext`.


#### Improved Documentation {: #0.25.0-pulp-glue-doc }

- Added the structure for `https://staging-docs.pulpproject.org` and populated it with existing content.
  [#903](https://github.com/pulp/pulp-cli/issues/903)
- Improve the docs split for the pulp-glue architecture documentation.


#### Deprecations and Removals {: #0.25.0-pulp-glue-removal }

- Removed `preprocess_body` from `PulpEntityContext` in favor of `preprocess_entity`.
- Removed deprecated `registered_repository_contexts`.
  Polymorpohic entity classes register themselves to the `TYPE_REGISTRY` when providing the `PLUGIN` and `RESOURCE_TYPE` class attributes.
- Removed optional `href` parameter from many verbs on `PulpEntityContext`.
  The methods rely on the `entity` or `href` properties to be preloaded.
  e.g. `entity_ctx.update(href, body=body)` should be changed to `entity_ctx.href = href; entity_ctx.update(body=body)`.
- Removed unused `format` parameter from `PulpContext`.


---

## 0.24.4 (2025-03-31) {: #0.24.4 }



#### Misc {: #0.24.4-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


### Pulp GLUE {: #0.24.4-pulp-glue }


#### Misc {: #0.24.4-pulp-glue-misc }

- [#1125](https://github.com/pulp/pulp-cli/issues/1125)


---

## 0.24.3 (2024-05-22) {: #0.24.3 }



No significant changes.


### Pulp GLUE {: #0.24.3-pulp-glue }


#### Bugfixes {: #0.24.3-pulp-glue-bugfix }

- Fixed the logic to use requests defaults for tls verification.


---

## 0.24.2 (2024-05-06) {: #0.24.2 }



No significant changes.


### Pulp GLUE {: #0.24.2-pulp-glue }


No significant changes.


---

## 0.24.1 (2024-03-18) {: #0.24.1 }


#### Bugfixes {: #0.24.1-bugfix }

- Fixed an issue where passing `usename=None` in `api_kwargs` was handled different than not providing it at all.


### Pulp GLUE {: #0.24.1-pulp-glue }


No significant changes.


---

## 0.24.0 (2024-03-11) {: #0.24.0 }


#### Features {: #0.24.0-feature }

- Add `plugins` configuration option to select which plugins to load.
  [#291](https://github.com/pulp/pulp-cli/issues/291)
- Added import export support of python content.
  [#609](https://github.com/pulp/pulp-cli/issues/609)
- Added support for the dbus secret service to make use of password managers.
  [#821](https://github.com/pulp/pulp-cli/issues/821)
- Added `--header` parameter to allow passing an arbitrary number of custom headers along with every request.
  [#889](https://github.com/pulp/pulp-cli/issues/889)


#### Bugfixes {: #0.24.0-bugfix }

- User-entered order of parameters no longer matters for repository version commands.
  [#650](https://github.com/pulp/pulp-cli/issues/650)
- Fixed a regression introduced in `get_translations`.
  [#874](https://github.com/pulp/pulp-cli/issues/874)
- Fixed the distribution of extra files with the package.
  This should fix both type annotations as well as translations.


#### Improved Documentation {: #0.24.0-doc }

- Better separate the concepts of cli and glue in the architecture docs.


#### Deprecations and Removals {: #0.24.0-removal }

- Dropped support for python 3.6 and 3.7.


### Pulp GLUE {: #0.24.0-pulp-glue }


#### Features {: #0.24.0-pulp-glue-feature }

- Added `auth` to `apikwargs` so you can plug in any `requests.auth.AuthBase`.
  [#821](https://github.com/pulp/pulp-cli/issues/821)
- Added `auth_provider` to `api_kwargs` to allow flexible authentication schemes driven by the openapi3 specs.


#### Bugfixes {: #0.24.0-pulp-glue-bugfix }

- Added a missing check for uniqueness on entity lookup.
  [#894](https://github.com/pulp/pulp-cli/issues/894)
- Fixed the distribution of extra files with the package.
  This should fix both type annotations as well as translations.


#### Improved Documentation {: #0.24.0-pulp-glue-doc }

- Fixed the style to display the type of objects in the code reference docs.


#### Deprecations and Removals {: #0.24.0-pulp-glue-removal }

- Dropped support for python 3.6 and 3.7.


---

## 0.23.2 (2024-01-22) {: #0.23.2 }


#### Bugfixes {: #0.23.2-bugfix }

- Fixed a regression introduced in `get_translations`.
  [#874](https://github.com/pulp/pulp-cli/issues/874)


### Pulp GLUE {: #0.23.2-pulp-glue }


No significant changes.


---

## 0.23.1 (2024-01-18) {: #0.23.1 }


#### Bugfixes {: #0.23.1-bugfix }

- Fixed the distribution of extra files with the package.
  This should fix both type annotations as well as translations.


### Pulp GLUE {: #0.23.1-pulp-glue }


#### Bugfixes {: #0.23.1-pulp-glue-bugfix }

- Fixed the distribution of extra files with the package.
  This should fix both type annotations as well as translations.


---

## 0.23.0 (2024-01-16) {: #0.23.0 }


#### Features {: #0.23.0-feature }

- Switched the buildsystem from using `setup.py` to using `pyproject.toml`.
- Ansible Collection upload now uses the Pulp V3 API and uploading directly to a repository with `--repository`.
  [#844](https://github.com/pulp/pulp-cli/issues/844)
- Added support for `--checksum-type` option (combination of `--package-checksum-type` and `--metadata-checksum-type`) when creating rpm publications and configuring rpm repository publish settings.
  [#850](https://github.com/pulp/pulp-cli/issues/850)


#### Bugfixes {: #0.23.0-bugfix }

- Fixed a bug where the filenames on uploads were not being sent.
  [#842](https://github.com/pulp/pulp-cli/issues/842)
- Remove dependency on `pkg_resources` that failed some installations but is deprecated anyway.
  [#865](https://github.com/pulp/pulp-cli/issues/865)


#### Improved Documentation {: #0.23.0-doc }

- Improved `Developer Material/Architecture` section by adding clarification about `pulp-glue`, version guards and `pulp_option` factory.
  [#836](https://github.com/pulp/pulp-cli/issues/836)
- Clarified how to handle version specifiers when testing the CLI for unreleased plugin versions (.dev).
  [#852](https://github.com/pulp/pulp-cli/issues/852)
- Added information how to use pipx for installation.


#### Deprecations and Removals {: #0.23.0-removal }

- Marked option `--sqlite-metadata` on `pulp rpm repository update/create` unavailable for `pulp_rpm>=3.25.0`, as it was removed there.
  [#831](https://github.com/pulp/pulp-cli/issues/831)


### Pulp GLUE {: #0.23.0-pulp-glue }


#### Deprecations and Removals {: #0.23.0-pulp-glue-removal }

- Added version restriction to prevent the use of `sqlite_metadata` attribute on Repository and Publication contexts for `pulp_rpm>=3.25.0`.
  [#831](https://github.com/pulp/pulp-cli/issues/831)
- Adjusted to `pulp_rpm>=3.25` no longer allowing publishing repositories with md5, sha1, or sha224 checksums.
  [#851](https://github.com/pulp/pulp-cli/issues/851)


---


## 0.22.0 (2023-12-04) {: #0.22.0 }


#### Features {: #0.22.0-feature }

- Added the ability to reclaim disk space (cmd: 'pulp repository reclaim').
  [#620](https://github.com/pulp/pulp-cli/issues/620)
- Added ``--repo-config`` option to the rpm repository and publication.


#### Bugfixes {: #0.22.0-bugfix }

- Arguments --gpgcheck and --repo-gpgcheck in creating a rpm repository no longer fail to convert to integer.
  [#677](https://github.com/pulp/pulp-cli/issues/677)
- Fixed a crash in `pulp domain` when a default value for `--domain` was provided in the config file.
  [#769](https://github.com/pulp/pulp-cli/issues/769)
- Fixed a bug where not all commands of a command group were listed in the help and available to the auto-completion.
  [#781](https://github.com/pulp/pulp-cli/issues/781)


#### Improved Documentation {: #0.22.0-doc }

- Added a version select widget to docs.
- Added reference docs for `pulpcore.cli.common.generic`.


### Pulp GLUE {: #0.22.0-pulp-glue }


#### Features {: #0.22.0-pulp-glue-feature }

- Added 'PulpGenericRepositoryContext' class to handle repository commands not available with subtypes.
  [#620](https://github.com/pulp/pulp-cli/issues/620)
- Added ``repo_config`` option PluginRequirement checks to the ``PulpRpmRepositoryContext``and ``PulpRpmPublicationContext``.
- Added parameter `pulp_href` to `PulpRepositoryVersionContext` and `number` to `PulpRepositoryContext.get_version_context`.
- Use the labels api starting with `pulpcore` 3.34.


#### Improved Documentation {: #0.22.0-pulp-glue-doc }

- Add API reference docs for pulp-glue.
  [#808](https://github.com/pulp/pulp-cli/issues/808)


#### Translations {: #0.22.0-pulp-glue-translation }

- Added translation files machinery for pulp-glue.
  [#634](https://github.com/pulp/pulp-cli/issues/634)


---


## 0.21.4 (2023-10-02) {: #0.21.4 }


#### Improved Documentation {: #0.21.4-doc }

- Added a version select widget to docs.


### Pulp GLUE {: #0.21.4-pulp-glue }


No significant changes.


---


## 0.21.3 (2023-09-22) {: #0.21.3 }


No significant changes.


### Pulp GLUE {: #0.21.3-pulp-glue }


No significant changes.


---


## 0.21.2 (2023-08-11) {: #0.21.2 }


#### Bugfixes {: #0.21.2-bugfix }

- Fixed a crash in `pulp domain` when a default value for `--domain` was provided in the config file.
  [#769](https://github.com/pulp/pulp-cli/issues/769)


### Pulp GLUE {: #0.21.2-pulp-glue }


No significant changes.


---


## 0.21.1 (2023-08-04) {: #0.21.1 }


No significant changes.


### Pulp GLUE {: #0.21.1-pulp-glue }


No significant changes.


---


## 0.21.0 (2023-08-03) {: #0.21.0 }


#### Features {: #0.21.0-feature }

- Added `role` subcommands to `rpm` commands.
  [#630](https://github.com/pulp/pulp-cli/issues/630)
- Added `upstream-pulp` command group.
  [#699](https://github.com/pulp/pulp-cli/issues/699)


#### Bugfixes {: #0.21.0-bugfix }

- Narrow down click version given a breaking change on 8.1.4.
  [#715](https://github.com/pulp/pulp-cli/issues/715)
- Pinnend PyYAML version to fix installation issues.
  [#724](https://github.com/pulp/pulp-cli/issues/724)
- Made api-quirks idempotent to prevent them from failing once the original api is fixed.
  [#752](https://github.com/pulp/pulp-cli/issues/752)


#### Misc {: #0.21.0-misc }

- [#726](https://github.com/pulp/pulp-cli/issues/726)


### Pulp GLUE {: #0.21.0-pulp-glue }


#### Features {: #0.21.0-pulp-glue-feature }

- Added role capability to rpm contexts.
  [#630](https://github.com/pulp/pulp-cli/issues/630)
- Added decorator `api_quirk` to declare version dependent fixes to the api spec.
  [#658](https://github.com/pulp/pulp-cli/issues/658)
- Added `PulpUpstreamPulpContext`.
  [#699](https://github.com/pulp/pulp-cli/issues/699)


---


## 0.20.7 (2024-01-15) {: #0.20.7 }


### Bugfixes {: #0.20.7-bugfix }

- Fixed a crash in `pulp domain` when a default value for `--domain` was provided in the config file.
  [#769](https://github.com/pulp/pulp-cli/issues/769)


---


## 0.20.6 (2023-10-02) {: #0.20.6 }


No significant changes.


---


## 0.20.5 (2023-10-02) {: #0.20.5 }


### Improved Documentation {: #0.20.0-doc }

- Added a version select widget to docs.



---


## 0.20.4 (2023-09-22) {: #0.20.4 }


No significant changes.


---


## 0.20.3 (2023-07-28) {: #0.20.3 }


### Bugfixes {: #0.20.3-bugfix }

- Made api-quirks idempotent to prevent them from failing once the original api is fixed.
  [#752](https://github.com/pulp/pulp-cli/issues/752)


---


## 0.20.2 (2023-07-19) {: #0.20.2 }


### Bugfixes {: #0.20.2-bugfix }

- Pinnend PyYAML version to fix installation issues.
  [#724](https://github.com/pulp/pulp-cli/issues/724)


---


## 0.20.1 (2023-07-07) {: #0.20.1 }


### Bugfixes {: #0.20.1-bugfix }

- Narrow down click version given a breaking change on 8.1.4.
  [#715](https://github.com/pulp/pulp-cli/issues/715)


---


## 0.20.0 (2023-06-28) {: #0.20.0 }


### Features {: #0.20.0-feature }

- Add '--metadata-signing-service' option to rpm.
  [#605](https://github.com/pulp/pulp-cli/issues/605)
- Added `PEP-440` version specifiers to `PluginRequirement` and `pulp debug has-plugin`.
  [#681](https://github.com/pulp/pulp-cli/issues/681)
- Added `--content-guard` option to distributions.
  [#697](https://github.com/pulp/pulp-cli/issues/697)


### Bugfixes {: #0.20.0-bugfix }

- Renamed `domains` command group to `domain` to follow the cli convention.
  [#685](https://github.com/pulp/pulp-cli/issues/685)
- Fixed some tests that made assumptions that worked, but were nonetheless incorrect.
  [#692](https://github.com/pulp/pulp-cli/issues/692)


### Deprecations and Removals {: #0.20.0-removal }

- Deprecate the use of `min` and `max` in `PluginRequirement`.
  [#681](https://github.com/pulp/pulp-cli/issues/681)


---


## 0.19.5 (2023-07-28) {: #0.19.5 }


### Bugfixes {: #0.19.5-bugfix }

- Made api-quirks idempotent to prevent them from failing once the original api is fixed.
  [#752](https://github.com/pulp/pulp-cli/issues/752)


---


## 0.19.4 (2023-07-19) {: #0.19.4 }


### Bugfixes {: #0.19.4-bugfix }

- Pinnend PyYAML version to fix installation issues.
  [#724](https://github.com/pulp/pulp-cli/issues/724)


---


## 0.19.3 (2023-07-10) {: #0.19.3 }


### Bugfixes {: #0.19.3-bugfix }

- Narrow down click version given a breaking change on 8.1.4.
  [#715](https://github.com/pulp/pulp-cli/issues/715)


---


## 0.19.2 (2023-05-22) {: #0.19.2 }


### Bugfixes {: #0.19.2-bugfix }

- Fixed some tests that made assumptions that worked, but were nonetheless incorrect.
  [#692](https://github.com/pulp/pulp-cli/issues/692)


---


## 0.19.1 (2023-05-02) {: #0.19.1 }


No significant changes.


---


## 0.19.0 (2023-04-14) {: #0.19.0 }


### Features {: #0.19.0-feature }

- Added a `pulp repository version list` command. This allows to find repository versions containing content.
  [#631](https://github.com/pulp/pulp-cli/issues/631)
- Added `HREF_PATTERN` to `PulpSigningServiceContext` class.
  [#653](https://github.com/pulp/pulp-cli/issues/653)
- Added more digests lookups to artifacts
  [#662](https://github.com/pulp/pulp-cli/issues/662)
- Added support for x509 and rshm cert guards.
  [#673](https://github.com/pulp/pulp-cli/issues/673)


### Bugfixes {: #0.19.0-bugfix }

- Fixed the generic-publications command.
  [#665](https://github.com/pulp/pulp-cli/issues/665)


### Improved Documentation {: #0.19.0-doc }

- Fixed the installation from source instructions to include the glue layer.
  [#654](https://github.com/pulp/pulp-cli/issues/654)
- Added `pulp-cli-maven` to the list of known plugins.
  [#656](https://github.com/pulp/pulp-cli/issues/656)


### Deprecations and Removals {: #0.19.0-removal }

- Removed deprecated commands `pulp orphans` and `pulp debug task-summary`.
  [#670](https://github.com/pulp/pulp-cli/issues/670)


---


## 0.18.2 (2023-07-30) {: #0.18.2 }


### Bugfixes {: #0.18.2-bugfix }

- Pinnend PyYAML version to fix installation issues.
  [#724](https://github.com/pulp/pulp-cli/issues/724)
- Made api-quirks idempotent to prevent them from failing once the original api is fixed.
  [#752](https://github.com/pulp/pulp-cli/issues/752)


---


## 0.18.1 (2023-07-10) {: #0.18.1 }


### Bugfixes {: #0.18.1-bugfix }

- Narrow down click version given a breaking change on 8.1.4.
  [#715](https://github.com/pulp/pulp-cli/issues/715)


---


## 0.18.0 (2023-03-09) {: #0.18.0 }


### Features {: #0.18.0-feature }

- Added support for 3.23 multi-tenancy feature Domains.
  [#642](https://github.com/pulp/pulp-cli/issues/642)
- Added known plugin requirements to the glue library layer.
  [#645](https://github.com/pulp/pulp-cli/issues/645)


### Bugfixes {: #0.18.0-bugfix }

- Reimport some missing symbols into their old location for compatibility.
  [#635](https://github.com/pulp/pulp-cli/issues/635)
- Fixed problem where rpm-repository-sync ignored --no-optimize.
  [#648](https://github.com/pulp/pulp-cli/issues/648)


---


## 0.17.1 (2023-02-17) {: #0.17.1 }


### Bugfixes {: #0.17.1-bugfix }

- Reimport some missing symbols into their old location for compatibility.
  [#635](https://github.com/pulp/pulp-cli/issues/635)


---


## 0.17.0 (2023-02-16) {: #0.17.0 }


### Features {: #0.17.0-feature }

- Updated the `--requirements` option for ansible remotes to handle both files and strings.
  [#230](https://github.com/pulp/pulp-cli/issues/230)
- Made all commands referencing entities accept both the HREF and name of the resource via the same command option.
  For example, users can additionally use the `--repository` option in ``repository show`` commands.
  [#475](https://github.com/pulp/pulp-cli/issues/475)
- Added remove-image command to pulp_container.
  [#566](https://github.com/pulp/pulp-cli/issues/566)
- Made the context layer independent of click to allow it being used like a library.
  [#597](https://github.com/pulp/pulp-cli/issues/597)
- Exposed `treeinfo` as an option for `sync --skip-type` for RPM repositories.
  [#614](https://github.com/pulp/pulp-cli/issues/614)
- Added the `pulp task summary` command as a replacement for `pulp debug task-summary`.
  [#625](https://github.com/pulp/pulp-cli/issues/625)
- Added new client library `pulp-glue` as a spin off of the `pulp-cli`.
  [#628](https://github.com/pulp/pulp-cli/issues/628)


### Bugfixes {: #0.17.0-bugfix }

- Deprecated `--fields` and `--exclude-fields` on `pulp ansible content list` in favor of `--[exclude-]field`.
  [#602](https://github.com/pulp/pulp-cli/issues/602)


### Deprecations and Removals {: #0.17.0-removal }

- Removed `pass_*_context` helpers from context layer. They moved to generic layer in 0.15.0.
  [#597](https://github.com/pulp/pulp-cli/issues/597)
- Deprecated `pulp debug task-summary` in favor of `pulp task summary`.
  [#625](https://github.com/pulp/pulp-cli/issues/625)


### Misc {: #0.17.0-misc }

- [#558](https://github.com/pulp/pulp-cli/issues/558), [#580](https://github.com/pulp/pulp-cli/issues/580)


---


## 0.16.0 (2022-11-10) {: #0.16.0 }


### Features {: #0.16.0-feature }

- Added `--max-retries` option to remotes.
  [#227](https://github.com/pulp/pulp-cli/issues/227)
- Added the ability to set labels directly on create and update.
  [#274](https://github.com/pulp/pulp-cli/issues/274)
- Added the `--repository` parameter to some upload commands.
  [#385](https://github.com/pulp/pulp-cli/issues/385)
- Introduced the option `--wait` for the `pulp task-group show` command.
  By using this option, details of the task group will be shown only after waiting for all related tasks to finish.
  [#459](https://github.com/pulp/pulp-cli/issues/459)
- Added `--optimize` and `--sync-options` to the `rpm repository sync` subcommand.
  [#462](https://github.com/pulp/pulp-cli/issues/462)
- Added `pulp debug openapi schema` and `pulp debug openapi schema-names` to investigate reusable schemas in the api.
  Renamed the original `pulp debug openapi schema` command to `pulp debug openapi spec`.
  [#534](https://github.com/pulp/pulp-cli/issues/534)
- Added support for adjusting list output: `--ordering`, `--field`, `--exclude-field`.
  [#542](https://github.com/pulp/pulp-cli/issues/542)
- Added task filtering options.
  [#543](https://github.com/pulp/pulp-cli/issues/543)
- Added `--cid` option and started reusing a recieved correlation id in all requests made by the same command.
  [#568](https://github.com/pulp/pulp-cli/issues/568)


### Bugfixes {: #0.16.0-bugfix }

- Allowed remote timeout and rate limiting parameters to be nulled by passing `""`.
  [#227](https://github.com/pulp/pulp-cli/issues/227)
- The `openapi` layer now handles all instances of `requests.RequestException`.
  This will help to give a better error message for e.g. missing schema in the `--base-url` parameter.
  [#466](https://github.com/pulp/pulp-cli/issues/466)
- Fixed an error raised when specifying no HREF value for some of the commands.
  [#545](https://github.com/pulp/pulp-cli/issues/545)
- Fixed an assertion error when canceling tasks by state.
  [#561](https://github.com/pulp/pulp-cli/issues/561)
- Fixed ``KeyError: 'missing_field'`` error when required fields are not supplied.
  [#572](https://github.com/pulp/pulp-cli/issues/572)
- Correctly identified base_path as required when creating a Distribution.
  (affected rpm, file, and python distribution create)
  [#574](https://github.com/pulp/pulp-cli/issues/574)


### Misc {: #0.16.0-misc }

- [#569](https://github.com/pulp/pulp-cli/issues/569), [#589](https://github.com/pulp/pulp-cli/issues/589)


---


## 0.15.0 (2022-07-20) {: #0.15.0 }


### Features {: #0.15.0-feature }

- Added `pulp_container` repository list/add/remove content commands.
  [#422](https://github.com/pulp/pulp-cli/issues/422)
- Added role management commands to file commands.
  [#454](https://github.com/pulp/pulp-cli/issues/454)
- Added role management to container subcommands.
  [#468](https://github.com/pulp/pulp-cli/issues/468)
- Added support for ULN remotes.
  [#470](https://github.com/pulp/pulp-cli/issues/470)
- Added ansible signature command.
  [#481](https://github.com/pulp/pulp-cli/issues/481)
- Added ansible signature list/read/upload commands.
  [#484](https://github.com/pulp/pulp-cli/issues/484)
- The `--type` option on the repository content subgroup has moved back one spot.
  To list all the content types in a repository use the `--all-types` flag on the list command.
  [#492](https://github.com/pulp/pulp-cli/issues/492)
- Added container repository copy-tag and copy-manifest commands.
  [#497](https://github.com/pulp/pulp-cli/issues/497)
- Extended "rpm content" to cover all of the RPM content-types.
  [#505](https://github.com/pulp/pulp-cli/issues/505)
- Added commands for the redirecting content guard.
  [#512](https://github.com/pulp/pulp-cli/issues/512)
- Started using uploads directly to create file content of a bigger size with pulpcore >= 3.20.
  [#514](https://github.com/pulp/pulp-cli/issues/514)
- Added global publication list command.
  Also, added new --repository filter for publication list available for pulpcore>=3.20.
  [#515](https://github.com/pulp/pulp-cli/issues/515)
- Added global distribution list command.
  [#517](https://github.com/pulp/pulp-cli/issues/517)
- Added global remote list command.
  [#518](https://github.com/pulp/pulp-cli/issues/518)
- Added `--repository` option to ansible collection signature upload and `--gpgkey` to ansible repository.
  [#532](https://github.com/pulp/pulp-cli/issues/532)


### Bugfixes {: #0.15.0-bugfix }

- Fixed bug, where the failure to load config file due to the lack of file permissions lead to a crash.
  Now those files are simply ignored.
  [#509](https://github.com/pulp/pulp-cli/issues/509)
- Fixed the heuristics for the `PARTIAL_UPDATE_ID` workaround.
  [#529](https://github.com/pulp/pulp-cli/issues/529)
- Fixed uploading content for files smaller than the chunk size.
  [#535](https://github.com/pulp/pulp-cli/issues/535)


### Deprecations and Removals {: #0.15.0-removal }

- Marked `group permission` command unusable with pulpcore 3.20.
  [#501](https://github.com/pulp/pulp-cli/issues/501)


### Misc {: #0.15.0-misc }

- [#499](https://github.com/pulp/pulp-cli/issues/499), [#520](https://github.com/pulp/pulp-cli/issues/520)


---


## 0.14.1 (2022-07-15) {: #0.14.1 }

### Bugfixes {: #0.14.1-bugfix }

- Fixed the heuristics for the `PARTIAL_UPDATE_ID` workaround.
  [#529](https://github.com/pulp/pulp-cli/issues/529)


---


## 0.14.0 (2022-03-02) {: #0.14.0 }

### Features {: #0.14.0-feature }

- Added content list/show commands for container blob/manifest/tag content types.
  [#421](https://github.com/pulp/pulp-cli/issues/421)
- Added tag/untag commands to add and remove tags from images in container repositories.
  [#423](https://github.com/pulp/pulp-cli/issues/423)
- Added a `--task-group` filter parameter to `task list`.
  [#451](https://github.com/pulp/pulp-cli/issues/451)
- Added the `api_root` setting to allow communicating with a pulp installation on a nonstandard path.
  [#453](https://github.com/pulp/pulp-cli/issues/453)
- Allow to fetch the config profile from the environment variable `PULP_CLI_PROFILE`.
  [#463](https://github.com/pulp/pulp-cli/issues/463)


### Bugfixes {: #0.14.0-bugfix }

- Fixed missing help text on path option for ACS create commands.
  [#446](https://github.com/pulp/pulp-cli/issues/446)
- Fixed a bug in reporting the failure of a task if the reason was not an exception in the task code.
  [#464](https://github.com/pulp/pulp-cli/issues/464)
- Fix rpm distribution update command failing when trying to enable/disable auto-distribute.
  [#472](https://github.com/pulp/pulp-cli/issues/472)


### Improved Documentation {: #0.14.0-doc }

- Add default help text for options taking a generic resource argument.
  [#387](https://github.com/pulp/pulp-cli/issues/387)


### Developer Notes {: #0.14.0-devel }

- Introduced `ID_PREFIX` on `PulpEntityContext` to generate most operation ids.
  [#444](https://github.com/pulp/pulp-cli/issues/444)
- Added `needs_capability` to `EntityContext` so context member function can require capabilities.
  [#465](https://github.com/pulp/pulp-cli/issues/465)


---


## 0.13.0 (2021-12-16) {: #0.13.0 }

### Features {: #0.13.0-feature }

- Allow path to certificate bundle to be specified via `PULP_CA_BUNDLE`, `REQUESTS_CA_BUNDLE` or `CURL_CA_BUNDLE` environment variables.
  Use proxy settings from environment.
  [#95](https://github.com/pulp/pulp-cli/issues/95)
- Users can now specify --client-cert, --ca-cert, and --client-key using @filepath.
  [#220](https://github.com/pulp/pulp-cli/issues/220)
- Added facilities to create, load and distribute translations.
  [#328](https://github.com/pulp/pulp-cli/issues/328)
- Added upload and show commands for Ansible Roles and Collection-Version content
  [#362](https://github.com/pulp/pulp-cli/issues/362)
- Added content management commands for Ansible repositories
  [#363](https://github.com/pulp/pulp-cli/issues/363)
- Added commands to manage roles and their association with users and groups.
  Added commands to add and remove users.
  [#382](https://github.com/pulp/pulp-cli/issues/382)
- Added `--content-hrefs` and `--protection-time` options to orphan cleanup command.
  [#398](https://github.com/pulp/pulp-cli/issues/398)
- Added support for the comps.xml upload to the rpm plugin.
  [#406](https://github.com/pulp/pulp-cli/issues/406)
- Added remote option for Python distributions.
  [#417](https://github.com/pulp/pulp-cli/issues/417)
- Added a customized user agent to api calls.
  [#426](https://github.com/pulp/pulp-cli/issues/426)
- Added support for "tasks purge".
  [#430](https://github.com/pulp/pulp-cli/issues/430)
- Added `reset` command to access policies.
  Changed `--permissions-assignment` to `--creation-hooks` to follow pulpcore 3.17 naming.
  [#438](https://github.com/pulp/pulp-cli/issues/438)
- Add a generic command group for object permission management.
  Added object permission management to tasks, groups and RBAC content guards.
  [#439](https://github.com/pulp/pulp-cli/issues/439)


### Bugfixes {: #0.13.0-bugfix }

- Fixed a bug where in the version lookup, where "--version 0" lead to latest.
  [#415](https://github.com/pulp/pulp-cli/issues/415)


### Improved Documentation {: #0.13.0-doc }

- Updated docs home page to reflect current plugin support of the CLI.
  [#394](https://github.com/pulp/pulp-cli/issues/394)
- Added Supported Worklows page to detail the workflows and features of the CLI.
  [#395](https://github.com/pulp/pulp-cli/issues/395)


### Translations {: #0.13.0-translation }

- Added some German translations.
  [#328](https://github.com/pulp/pulp-cli/issues/328)


---


## 0.12.0 (2021-10-06) {: #0.12.0 }
======================


### Features {: #0.12.0-feature }

- Chunked artifact and content uploads now allow unit specifier in ``--chunk-size`` option
  [#260](https://github.com/pulp/pulp-cli/issues/260)
- Added rpm package content commands support.
  [#284](https://github.com/pulp/pulp-cli/issues/284)
- Added the ability to pass an href to a resource option.
  [#315](https://github.com/pulp/pulp-cli/issues/315)
- Added pulp file acs command.
  [#324](https://github.com/pulp/pulp-cli/issues/324)
- Added `--all`, `--waiting` and `--running` flags to allow bulk task cancel.
  [#330](https://github.com/pulp/pulp-cli/issues/330)
- Added commands for CRUD RBAC Content Guards.
  [#352](https://github.com/pulp/pulp-cli/issues/352)
- Added the ability to delete tasks.
  [#376](https://github.com/pulp/pulp-cli/issues/376)
- Added refresh command for pulp\_file Alternate Content Sources.
  [#377](https://github.com/pulp/pulp-cli/issues/377)
- Added pulp\_rpm Alternate Content Source commands.
  [#378](https://github.com/pulp/pulp-cli/issues/378)
- Added the openapi command group to debug to ease reading the schema.
  [#384](https://github.com/pulp/pulp-cli/issues/384)


### Bugfixes {: #0.12.0-bugfix }

- Fixed the referenced version with the `--version` parameter.
  [#351](https://github.com/pulp/pulp-cli/issues/351)
- Fixed nullable fields for rpm remote.
  [#373](https://github.com/pulp/pulp-cli/issues/373)


### Improved Documentation {: #0.12.0-doc }

- Add installation instructions for plugins and a list of known plugins.
  [#331](https://github.com/pulp/pulp-cli/issues/331)
- Moved CHANGES.md to publish them along with the documentation.
  [#336](https://github.com/pulp/pulp-cli/issues/336)
- Reformatted CHANGES with Markdown syntax.
  [#337](https://github.com/pulp/pulp-cli/issues/337)
- Add a tabular view to the global options.
  [#357](https://github.com/pulp/pulp-cli/issues/357)


### Deprecations and Removals {: #0.12.0-removal }

- Bumped required pulpcore version to >=3.11 and removed legacy workarounds.
  [#380](https://github.com/pulp/pulp-cli/issues/380)


### Misc {: #0.12.0-misc }

- [#342](https://github.com/pulp/pulp-cli/issues/342)


---


## 0.11.0 (2021-08-10) {: #0.11.0 }

### Features {: #0.11.0-feature }

- Added support to specify skip-types on rpm sync.
  [#225](https://github.com/pulp/pulp-cli/issues/225)
- Added lookup for a global config file `/etc/pulp/cli.toml`.
  [#290](https://github.com/pulp/pulp-cli/issues/290)
- Changed default config location to `<app-dir>/cli.toml`. The old file will still be read.
  [#293](https://github.com/pulp/pulp-cli/issues/293)
- Enable exports for ansible repositories.
  [#302](https://github.com/pulp/pulp-cli/issues/302)
- Added --sles-auth-token to rpm remote commands.
  [#305](https://github.com/pulp/pulp-cli/issues/305)
- Added ansible content list command.
  [#327](https://github.com/pulp/pulp-cli/issues/327)


### Bugfixes {: #0.11.0-bugfix }

- Added validation to some json input parameters.
  [#255](https://github.com/pulp/pulp-cli/issues/255)
- Fixed a bug in the docs publishing workflow.
  [#286](https://github.com/pulp/pulp-cli/issues/286)
- Unconditionally add the fake not namespaced `pulp_cli` to the distribution on pypi to make it able to be consumed by `setuptools<40`.
  [#287](https://github.com/pulp/pulp-cli/issues/287)
- Deprecate orphans delete command in favor of orphan cleanup and use new rest interface on `pulpcore>=3.14`.
  [#297](https://github.com/pulp/pulp-cli/issues/297)
- Changed the name of retained-versions to retain-repo-versions.
  [#298](https://github.com/pulp/pulp-cli/issues/298)
- Improved a confusing error message around pulp components.
  [#299](https://github.com/pulp/pulp-cli/issues/299)
- Added minimum of 1 to `--limit` option.
  [#311](https://github.com/pulp/pulp-cli/issues/311)


---


## 0.10.1 (2021-06-30) {: #0.10.1 }

### Bugfixes {: #0.10.1-bugfix }

- Fixed a bug in the docs publishing workflow.
  [#286](https://github.com/pulp/pulp-cli/issues/286)
- Unconditionally add the fake not namespaced `pulp_cli` to the distribution on pypi to make it able to be consumed by `setuptools<40`.
  [#287](https://github.com/pulp/pulp-cli/issues/287)


---


## 0.10.0 (2021-06-30) {: #0.10.0 }

### Features {: #0.10.0-feature }

- Change resource options to accept plugin and type along with the name.
  [#158](https://github.com/pulp/pulp-cli/issues/158)
- Added missing search options to publication list commands.
  [#207](https://github.com/pulp/pulp-cli/issues/207)
- Add a timeout parameter to specify the duration how long to wait for background tasks.
  [#232](https://github.com/pulp/pulp-cli/issues/232)
- Python remote fields `--includes/--excludes` can now be specified with `requirements.txt` files
  [#240](https://github.com/pulp/pulp-cli/issues/240)
- Updated RPM commands to be compatible with new 3.13 auto-publish changes
  [#251](https://github.com/pulp/pulp-cli/issues/251)
- Added generic content list command.
  [#254](https://github.com/pulp/pulp-cli/issues/254)
- Update the click dependency to 8.0.1.
  [#256](https://github.com/pulp/pulp-cli/issues/256)
- Added feature to bypass chunk uploading if the chunk size exceeds the file size. This speeds up the upload by about 30-40%.
  [#262](https://github.com/pulp/pulp-cli/issues/262)
- Added `--cid` option to `task list` command to allow fitering by correlation id.
  [#269](https://github.com/pulp/pulp-cli/issues/269)
- Added allow-uploads/block-uploads option to python distribution commands
  [#271](https://github.com/pulp/pulp-cli/issues/271)


### Bugfixes {: #0.10.0-bugfix }

- Properly report timed out tasks.
  [#232](https://github.com/pulp/pulp-cli/issues/232)
- Use `find_packages` instead of `find_namespace_packages` in setup to be compatible with `setuptools<39.2.0`.
  [#248](https://github.com/pulp/pulp-cli/issues/248)


---


## 0.9.0 (2021-05-17) {: #0.9.0 }


### Features {: #0.9.0-feature }

- Disabled following of redirects and added better handling of response codes.
  [#221](https://github.com/pulp/pulp-cli/issues/221)
- Added `--force` as the inverse of `--dry-run` and started to allow `dry_run` in the settings.
  [#236](https://github.com/pulp/pulp-cli/issues/236)
- Added config validation to `config create` and `config edit`.
  [#239](https://github.com/pulp/pulp-cli/issues/239)


### Bugfixes {: #0.9.0-bugfix }

- Fixed extra request when using the repository version option.
  [#223](https://github.com/pulp/pulp-cli/issues/223)
- Fix requirements file option for ansible collection remote commands.
  [#226](https://github.com/pulp/pulp-cli/issues/226)
- Properly truncate file before saving settings in `config edit`.
  [#239](https://github.com/pulp/pulp-cli/issues/239)


### Misc {: #0.9.0-misc }

- [#235](https://github.com/pulp/pulp-cli/issues/235)


---


## 0.8.0 (2021-04-30) {: #0.8.0 }


### Features {: #0.8.0-feature }

- Added support for autopublish and autodistribute in `pulp_file` and `pulp_rpm`.
  [#155](https://github.com/pulp/pulp-cli/issues/155)
- Added a confirmation whether to continue with invalid config.
  [#156](https://github.com/pulp/pulp-cli/issues/156)
- Repository content commands are now nested under a new content subgroup.
  [#171](https://github.com/pulp/pulp-cli/issues/171)
- Added an interactive-shell mode to pulp-cli.
  [#181](https://github.com/pulp/pulp-cli/issues/181)
- Added `label` command to ansible distribution group.
  [#185](https://github.com/pulp/pulp-cli/issues/185)
- Added `signing-service` `list` and `show` commands.
  [#189](https://github.com/pulp/pulp-cli/issues/189)
- Added new pulp python 3.2 remote options.
  [#208](https://github.com/pulp/pulp-cli/issues/208)
- Added `retained_versions` option to repository commands.
  [#210](https://github.com/pulp/pulp-cli/issues/210)
- Added the `task-group` subcommand.
  [#211](https://github.com/pulp/pulp-cli/issues/211)
- Added `mirror` flag support for pulp rpm repository sync.
  [#212](https://github.com/pulp/pulp-cli/issues/212)
- Added support for file paths for plan argument for migration plan create command.
  [#213](https://github.com/pulp/pulp-cli/issues/213)


### Bugfixes {: #0.8.0-bugfix }

- Improved the error message, when a required server component is missing.
  [#184](https://github.com/pulp/pulp-cli/issues/184)


### Deprecations and Removals {: #0.8.0-removal }


- Repository add/remove/modify commands have now been deprecated. Please use the new content subgroup commands.
  [#215](https://github.com/pulp/pulp-cli/issues/215)


### Misc {: #0.8.0-misc }

- [#190](https://github.com/pulp/pulp-cli/issues/190)


---


## 0.7.0 (2021-03-15) {: #0.7.0 }


### Features {: #0.7.0-feature }

- Added the python command group.
  [#73](https:// github.com/pulp/pulp-cli/issues/73)
- Distributions can now be listed with options `--base-path` and `--base-path-contains`.
  [#134](https://github.com/pulp/pulp-cli/issues/134)
- Taught rpm/repository about the retain-package-versions attribute.
  [#172](https://github.com/pulp/pulp-cli/issues/172)
- Added the container namespace command group.
  [#176](https://github.com/pulp/pulp-cli/issues/176)


---


## 0.6.0 (2021-02-26) {: #0.6.0 }


### Features {: #0.6.0-feature }

- In pulpcore 3.11, the component names changed to fix a bug. This ported `pulp-cli` to use the new
  names and provides dictionary named `new_component_names_to_pre_3_11_names` in the
  `pulpcore.cli.common.context` module which provides new to old name mappings for a fallback
  support. `pulp-cli` plugins can add to this list by importing and modifying that dictionary also.
  [#153](https://github.com/pulp/pulp-cli/issues/153)


---


## 0.5.0 (2021-02-20) {: #0.5.0 }


### Features {: #0.5.0-feature }

- Made task state a choice option for pulp task list.
  [#115](https://github.com/pulp/pulp-cli/issues/115)
- Added support for pulp-2to3-migration.
  [#133](https://github.com/pulp/pulp-cli/issues/133)
- Added worker command.
  [#144](https://github.com/pulp/pulp-cli/issues/144)
- Added the ability to include multiple server profiles into the pulp cli config.
  [#145](https://github.com/pulp/pulp-cli/issues/145)


### Misc {: #0.5.0-misc }

- [#148](https://github.com/pulp/pulp-cli/issues/148)


---


## 0.4.0 (2021-02-10) {: #0.4.0 }


### Features {: #0.4.0-feature }

- Added config commands to manage pulp-cli's config.
  [#111](https://github.com/pulp/pulp-cli/issues/111)
- Added support for client certificate auth.
  [#122](https://github.com/pulp/pulp-cli/issues/122)
- Added `--href` options to address rpm resources.
  [#124](https://github.com/pulp/pulp-cli/issues/124)


### Bugfixes {: #0.4.0-bugfix }

- Improve handling of background option and ctrl-c with tasks.
  [#85](https://github.com/pulp/pulp-cli/issues/85)
- Added read capability to rpm remote.
  [#125](https://github.com/pulp/pulp-cli/issues/125)


### Deprecations and Removals {: #0.4.0-removal }

- Moved the location of `--repository` option after the last command for version commands.
  [#123](https://github.com/pulp/pulp-cli/issues/123)


### Misc {: #0.4.0-misc }

- [#91](https://github.com/pulp/pulp-cli/issues/91), [#118](https://github.com/pulp/pulp-cli/issues/118)


---


## 0.3.0 (2021-02-04) {: #0.3.0 }


### Features {: #0.3.0-feature }

- Added label commands.
  [#100](https://github.com/pulp/pulp-cli/issues/100)


### Bugfixes {: #0.3.0-bugfix }

- Fixed missing `READ_ID` error for pulp file remote show.
  [#107](https://github.com/pulp/pulp-cli/issues/107)


### Misc {: #0.3.0-misc }

- [#89](https://github.com/pulp/pulp-cli/issues/89)


---


## 0.2.0 (2021-01-26) {: #0.2.0 }


### Features {: #0.2.0-feature }

- Basic CRUD support for Ansible repositories
- Basic CRUD for Ansible role remotes, use `-t role` after remote to select type
- Basic CRUD for Ansible collection remotes, use `-t collection` after remote to select type
- Sync roles/collections with `pulp ansible repository sync --name {repo_name} --remote {remote_name}`
- Postponed all server calls to the point, where a command is ready to be performed.
  This allows to access all help screens even if there is no server available.
- Added subcommand to modify file repository with many content units in one command.
- Added update command for file distribution.


---


## 0.1.0 (2021-01-15) {: #0.1.0 }

Initial release of pulp-cli.


---
`````

## File: pulp-docs/pulp-cli/README.md
`````markdown
# Pulp command line interface

This is a command line interface for Pulp 3.

This software is in beta and future releases may include backwards incompatible changes.

Check out our [docs](https://docs.pulpproject.org/pulp_cli/) and the
[quickstart guide](https://pulpproject.org/pulp-cli/docs/user/guides/installation/#tldr-get-started-real-fast) to get started.
`````

## File: pulp-docs/pulp-cli/releasing.md
`````markdown
# Releasing (for internal use)

## New method (experimental)

### Create a new Y-Release Branch

  1. Trigger the "Create Release Branch" workflow on the "main" branch.
  1. Watch for the "Bump Version" PR, verify that it deletes all the changes snippets present on the new release branch, approve and merge it.

### Release from a Release Branch

  1. Trigger the "pulp-cli Release" workflow on the corresponding release branch.
  1. Lean back and see the magic happen.
  1. Wait for the "pulp-cli Publish" workflow to succeed.
  1. Verify that a new version appeared on PyPI.
  1. Verify that the docs have been updated.
  1. [only Y-releases] Announce the release at https://discourse.pulpproject.org/c/announcements/6.
  1. Look for the "Update Changelog" PR, approve and merge it.

If some thing goes wrong look at `.ci/scripts/create_release_branch.sh` and `.ci/scripts/release.sh` and follow the intentions encoded there.
`````

## File: pulp-docs/pulp-docs/docs/dev/guides/create-plugin-overviews.md
`````markdown
# Create plugin Overview Pages

There are two plugin overview pages:

- One for "User Manual" (e.g, `User Manual > Plugins > RPM`)
- One for "Developer Manual" (e.g, `Developer Manual > Plugins > RPM`)

These pages contains an introductory text for its target audicence and a generated ToC.
Also, note that:

- If no custom overview page is found, one will be generated.
- A ToC will always be appended this file, even if you provide a custom page.

## Create plugin overviews

Create files named `index.md` in the appropriate directories.

```bash
# "User Manual" Overview
touch docs/index.md

# "Dev Manual" Overview
touch docs/dev/index.md
```

## Writing style tips

Things to keep in mind:

- **Audience:** Target newcomers. Experienced users will probably use the ToC or the search.
- **Format:** Synopsis + Roadmap. Tell what your plugin is, what it does and a simple roadmap for starting.
- **Size:** Keep it brief. This should an easy win for the user before he starts this journey.
`````

## File: pulp-docs/pulp-docs/docs/dev/reference/architecture.md
`````markdown
# Architecture

In general, pulp-docs is a wrapper around mkdocs and use its hooks to get things working together.
It also leverages some plugins from the `mkdocs` ecosystem.

## How it works

Through a `mkdocs-macro-plugin` hook (called in early stages of mkdocs processing), we inject the following steps:

1. Read [`repolist.yml`](https://github.com/pulp/pulp-docs/blob/main/src/pulp_docs/data/repolist.yml) packaged with `pulp-docs` to know which repos/urls to use
1. Download and Place all source code required to dir under `tempfile.gettempdir()`
    - Uses `../{repo}` if available OR
    - Uses existing cached `{tmpdir}/{repo}` if available OR
    - Downloads from github
1. Configure `mkdocs` through a hook: fix `mkdocstrings` config, generate navigation structure, etc
`````

## File: pulp-docs/pulp-docs/docs/dev/reference/markdown-cheatsheet.md
`````markdown
# Markdown Cheatsheet

There are basic markdown features recommended for use in Pulp.

### Internal links

Adding absolute links is enabled by `mkdocs-site-urls`
(learn more [here](https://github.com/octoprint/mkdocs-site-urls)).
This is preferred over *relative* links because of our complex structure. See tradeoffs [here](https://github.com/pulp/pulp-docs/issues/2)

```markdown
# Template
[My Link](site:{repo-name}/docs/{persona}/{content-type}/some-page.md).

# Example
[My Link](site:pulp-docs/docs/dev/reference/markdown-cheatsheet.md).

# Rendered
[My Link](http://127.0.0.1:8000/pulp-docs/docs/dev/reference/markdown-cheatsheet/).
```

### Tabbed content

Having tabs for alternative content is enabled by mkdocs-material
(learn more [here](https://squidfunk.github.io/mkdocs-material/reference/content-tabs/#usage)).
It looks like this:

!!! example

    === "Run"

        ```bash
        cat myfile.txt
        ```

    === "Output"

        ```bash
        line1
        line2
        line3
        ```

The basic syntax is:

- Each tab title must be in quotes
- Each tab block must have 4 spaces of indent
- Put space around `=== "Title"`

```` title="sample-tabbed-content.md"
=== "Run"

    ```bash
    cat myfile.txt
    ```

=== "Output"

    ```bash
    line1
    line2
    line3
    ```
````


### Ordering Files

Ordering is enabled by `mkdocs-literate-nav`
(learn more [here](https://oprypin.github.io/mkdocs-literate-nav/reference.html)).

The basic setup is having a file in `{repo}/docs/{persona}/{doc_type}/_SUMMARY.md`.
In this file you should use the following syntax:

```markdown title="pulp_plugin/docs/user/guides/_SUMMARY.md"
# Basic
* [First list item](z-page.md)
* [Second list item](m-page.md)
* [Third list item](a-page.md)

# Subdirs
* [First list item](some-page.md)
* Subsection title
    * [Foo](subdirectory/foo.md)
    * [Bar](subdirectory/bar.md)

# Recursive Globs
* [I want this first](some-page.md)
* *.md
* [This last and recurse this dir](other/)
```

### Codeblocks

Mkdocs-material comes with builtin support for syntax highlighting in codeblocks.
You may use `python`, `bash`, `yaml`, `json`, `yaml` and most popular programming languages.

!!! example

    ```python
    serializer = mymodelserializer(data=data)
    serializer.is_valid(raise_exception=true)
    instance = serializer.create(serializer.validated_data)
    print(instance)
    ```

Markdown syntax:

````
```python
serializer = mymodelserializer(data=data)
serializer.is_valid(raise_exception=true)
instance = serializer.create(serializer.validated_data)
print(instance)
```
````

The codeblock can also have a title, which is useful if its a file:

!!! example

    ```bash title="sample-title-here.sh"
    pulp file repository update --name myrepo --retained-versions 1
    ```

Markdown syntax:

````
```bash title="sample-title-here.sh"
pulp file repository update --name myrepo --retained-versions 1
```
````

### Images

The image paths can be relative or absolute:

Simple:

```markdown
# Relative path. Image is in the same folder
![OperatorHub tab](1.png "Pulp on OperatorHub tab")

# Absolute path. Specify the path with 'site:'
![Pulp 101](site:pulpcore/docs/assets/images/pulp-101.png)
```

With subtitle:

```markdown
# Subtitle on top
<figure markdown="span">
  <figcaption>Find Pulp  at `OperatorHub > Integration & Delivery`.</figcaption>
  ![OperatorHub tab](1.png "Pulp on OperatorHub tab")
</figure>

# Subtitle at bottom
<figure markdown="span">
  ![OperatorHub tab](1.png "Pulp on OperatorHub tab")
  <figcaption>Find Pulp  at `OperatorHub > Integration & Delivery`.</figcaption>
</figure>
```

### Admonitions

[See mkdocs-material](https://squidfunk.github.io/mkdocs-material/reference/admonitions/#supported-types)

Use them wisely.
`````

## File: pulp-docs/pulp-docs/docs/dev/tutorials/getting-started.md
`````markdown
# Getting Started

## Install the package

Install it as any python package using your preferred method.

=== "pipx"

    ```bash
    pipx install git+https://github.com/pulp/pulp-docs --include-deps
    ```

=== "pip"

    ```bash
    pip --user install git+https://github.com/pulp/pulp-docs
    ```

## Start serving

By default, `pulp-docs` will try to use repos in the parent dir that matches on of the supported plugins.

Assure you are in a supported repo directory and run:

```bash
pulp-docs serve
```
`````

## File: pulp-docs/pulp-docs/docs/dev/index.md
`````markdown
# Overview

Pulp-Docs is a tool for serving and building the Pulp Project documentation
(see [The new Pulp "Unified Docs"](https://hackmd.io/eE3kG8qhT9eohRYbtooNww?view)).

The idea is that after installing `pulp-docs`, you'll imediatelly be able run the unified website and preview local changes as they will appear in this site.
Also, this is used for the production build.

To start using it, see the [Getting Started](site:pulp-docs/docs/dev/tutorials/getting-started/) section.
Before contributing, we recommend reading about the [Architecture](site:pulp-docs/docs/dev/reference/architecture/).
`````

## File: pulp-docs/pulp-docs/docs/sections/admin/index.md
`````markdown
---
hide:
  - toc
---

# Admin Guide {.hide-h1}

<div class="hero-header" markdown>

## This section is for **admins**

Common needs are to *configure, deploy and maintain Pulp instances*.



<div class="grid cards" markdown>

- **Build and deploy**

    ---

    Start developing your service or application by levaraging our powerful deployment setups.
    
- **Engage**

    ---

    Get and provide feedback from the peers to help our Project and your Product to grow.

</div>
</div>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2019-12-12-pulp-3-is-GA.md
`````markdown
---
date: 2019-12-12T20:55:50+00:00
title: Pulp 3.0 is Generally Available
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
The Pulp developer community is excited to announce the general availability of the following:

* [pulp_rpm 3.0](https://pulp-rpm.readthedocs.io/en/3.0/) to manage RPM content
* [pulp_container 1.0](https://pulp-container.readthedocs.io/en/1.0/) to manage Docker content
* [pulp_file 0.1](https://pulp-file.readthedocs.io/en/0.1.0/) to manage Files

These plugins are compatible with the [pulpcore 3.0.0](https://docs.pulpproject.org/) release which
is also Generally Available today!

### RPM Features

pulp_rpm can sync, organize, and distribute the following content types currently:

* RPMs
* SRPMs
* Advisory Content, i.e. Errata
* Distribution Trees (kickstart trees)
* Yum Metadata, e.g. comps.xml
* modularity content

You can upload the following to pulp_rpm:

* RPM content
* SRPM
* Advisory

### Container Features

pulp_container can sync, organize, and distribute Docker content.

### File Features

pulp_file can sync, organize, upload, and distribute File content.


## Installation

See the installation docs (links below) for each plugin on how to install. They all use the same
installer so they are very similar. Plugins are capable of being installed all together on one
installation.

* [pulp_rpm installation](https://pulp-rpm.readthedocs.io/en/3.0/installation.html)
* [pulp_container installation](https://pulp-container.readthedocs.io/en/1.0/installation.html)
* [pulp_file installation](https://pulp-file.readthedocs.io/en/0.1.0/installation.html)


## Quickstart

Pulp_rpm offers a [quickstart guide](https://pulp-rpm.readthedocs.io/en/3.0/quickstart.html) which
uses [pulplift](https://github.com/pulp/pulplift) to create a not-long-living installation just to
try it out. These same instructions can be adapted to the other plugins also.


## Migrating from Pulp2 -> Pulp3

A [Pulp 2 -> Pulp 3 migration tool is in-progress](https://github.com/pulp/pulp-2to3-migration),
but not fully available yet. Until it is, users are recommended to:

* **not** install Pulp3 on top of their Pulp2 system until it is available

We hope this tool will be available within a month or two to migrate the plugin types that are
released.


## Why these version numbers?

These Pulp plugins use [semantic versioning](https://semver.org/), so the different version numbers
have different meanings summarized below.

* pulp_rpm is 3.0 to indicate future releases will not contain API breaking changes, and it's the
  next major release after pulp_rpm 2.y
* pulp_container uses 1.0 to indicate future releases will not contain API breaking changes, but it
  is overall a new plugin.
* pulp_file uses 0.1 to indicate future Y-releases may contain API backwards incompatible breaking
  changes, and it is a new plugin.


## Getting Help or Reporting Bugs

Find where to get help or report bugs via the help page on the website
[here](https://pulpproject.org/help/). If you're unsure where to start, we recommend emailing your
question to the [Pulp user mailing list](https://www.redhat.com/mailman/listinfo/pulp-list).


## Feedback

Let us know what you think! Please send feedback to either the:

* [Pulp user mailing list](https://www.redhat.com/mailman/listinfo/pulp-list)
* [Pulp developer mailing list](https://www.redhat.com/mailman/listinfo/pulp-dev)


## Thanks!

Thank You to all the developers, integrators, testers, and users who have contributed to this
significant milestone for the Pulp project. The collaboration that created this has been excellent.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-01-20-pulp-3-GA-demos.md
`````markdown
---
date: 2020-01-20T20:55:50+00:00
title: Pulp 3.0 GA Demos
author: Dana Walker
tags:
  - "3.0"
---
<!-- more -->
To go along with Pulp 3.0 GA, we have prepared a playlist of demos to cover features in pulpcore on
the [Pulp YouTube Channel](https://www.youtube.com/pulpproject).

<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PLwm8_O6oKSS0C3zlo8gFkPqXpMkAI7rCD" frameborder="0" allowfullscreen></iframe>

Check it out and let us know if you find it useful.  Also, if there is any content you don't see but
would like a demo to cover, [please reach out](https://www.redhat.com/mailman/listinfo/pulp-list) to
us with that request.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-03-05-pulp-3-scale-testing.md
`````markdown
---
date: 2020-03-05T20:55:50+00:00
title: Pulp 3.2 Scale Testing to 27K Repositories and 173K Repository Versions
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
*Updated*: March 6, 2020 with correct worker count as 16, and additional resources in db section.

I recently did some Pulp3 scale testing, and I wanted to share the results along with how others
could reproduce them. I did this for [pulp_ansible](https://pulp-ansible.readthedocs.io/) which
manages Ansible Role and Collection content and is compatible with the
[`ansible-galaxy`](https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html) command line.


### Test Setup
 
A 16 CPU, 64 GB Ram Fedora 31 machine running on EC2 with pulpcore==3.2.0 and
pulp_ansible==0.2.0b11.dev and had 16 workers. It was loaded with:

* 27,237 Repositories
* 173,311 Repository Versions, (6.36 repo versions per Repository on average)
* 10,000 CollectionVersions spread across 100 namespaces, 20 collection names each
* 51,816,410 content memberships. The number of units tracked uniquely in a RepositoryVersion
* Average of 1902 units per repository, spread over 6.36 repo versions on average


### Deploying Pulp

I started 16 workers, one for each CPU. I installed Pulp to this Amazon machine using the [Pulp 3
Ansible Installer](https://github.com/pulp/pulp_installer). I used [this config for 16 workers and
pulp_ansible](https://gist.github.com/bmbouter/0db2bb326c784334f0c6a6d2cd0a10ea) and [the
installer's generic playbook](https://github.com/pulp/pulp_installer/blob/master/example-use/
playbook.yml).

Before running the installer, I:

* checked the keyless ssh access of my user, bmbouter
* verified my user's passwordless sudo capabilities on the remote machine
* created an inventory file named: `~/devel/pulp3/inventory` with the IP of my host machine in it 

I then installed Pulp using the following command:

```
ansible-playbook example-use/playbook.yml -u bmbouter -i ~/devel/pulp3/inventory
```


### Test Workload

After creating all of this content (see how below), I ran a test workload on it which simulates
adding a randomly selected CollectionVersion to a randomly selected 1000, 2000, 5000, 10000
repositories. The promotion workflow, is a two task workflow:

1. The [first task](https://github.com/pulp/pulp_ansible/blob/
24d49b2135c37042f20275a5606dba61a76918b3/pulp_ansible/app/tasks/test_tasks.py#L112-L148) selects an
existing CollectionVersion randomly, and the N random Repositories also. This first task uses no
locks.

2. The first task dispatches many [subtasks](https://github.com/pulp/pulp_ansible/blob/
24d49b2135c37042f20275a5606dba61a76918b3/pulp_ansible/app/tasks/test_tasks.py#L151-L163) each which
handle a batch of N Repositories. These subtasks lock on the set of N Repositories meaning that
other operations on any of the set of Repositories in the batch will not execute in parallel with
other Pulp workloads.

Each batch's set of Repositories are mutually exclusive with all other batches so these tasks are
fully parallelizable with each other. This means the more workers a Pulp system has the workload
should run faster and faster, assuming adequate hardware resources.

**NOTE**: Anytime we talk about Repository, we technically are talking about an
[`AnsibleRepository`](https://pulp-ansible.readthedocs.io/en/latest/restapi.html#operation/
repositories_ansible_ansible_read) since Pulp repositories are typed.


## Results

The measurement is for the completion of all tasks. I monitored this using the following command
with Django's `shell_plus` command until it shows 0 tasks:

```
Task.objects.filter(Q(state='waiting') | Q(state='running')).count()
```

Here are the results:

| repo_count | batch size | num_tasks | run1 (s) | run2 (s) | run3 (s) | avg time (s) | avg repos / second  |
|------------|------------|-----------|----------|----------|----------|--------------|---------------------|
| 1,000      | 63         | 16        | 34       | 34       | 34       | 34           | 29.4 repos / second |
| 2,000      | 125        | 16        | 63       | 63       | 63       | 63           | 31.7 repos / second |
| 5,000      | 157        | 32        | 150      | 151      | 154      | 151          | 33.1 repos / second |
| 10,000     | 157        | 64        | 310      | 318      | 326      | 318          | 31.4 repos / second |

* `batch size` - The number of repositories handled per task.
* `num_tasks` - The number of tasks to be handled by the Pulp workers. Note the batch sizes are
                selected to generate a number of tasks that is divisible by 16, the number of
                workers this system has.
* `run1` - The amount of time in seconds the first run took to process all tasks.
* `run2` - The amount of time in seconds the second run took to process all tasks.
* `run3` - The amount of time in seconds the third run took to process all tasks.
* `avg time` - The average amount of time from the three runs.
* `avg repos / second` - The average amount of RepositoryVersions created per second.


## Database and CPU Constrained

The system's load falls mostly onto the DB and is CPU bound. All 16 workers of Pulp were engaged
(as expected) and the postgresql processes auto-scales in terms of its processes, but it only has
so many CPU cores to serve 16 independent connections (one from each Pulp worker).

Here's a screenshot showing the postgresql processes heavily loading the CPU above 80% and 90% along
with the rq Pulp worker processes submitting the SQL to PostgreSQL. I interpret the rate-limiting
component to be the CPUs the database has access to.

![The ps -awfux output](../../../../images/pulp_ansible_scale_test/ps_output_showing_postgresql_and_rq.png)
 
 
## Database Query Analysis

I enabled [`auto_explain`](https://www.postgresql.org/docs/9.2/auto-explain.html) for postgresql
with these settings in my postgresql.conf:

```ini
session_preload_libraries = 'auto_explain'
auto_explain.log_min_duration = '1000ms'
auto_explain.log_analyze = 'true'
```

During promotion workflow testing, it shows slow queries like this one:
[https://explain.depesz.com/s/Wi2Q](https://explain.depesz.com/s/Wi2Q). Suggestions on how to
improve this are welcome, but it's overall a large database to query against. One unexpected part of
the query plan is [step #15](https://explain.depesz.com/s/Wi2Q#l15) which perform a sequential scan
against a table with an Index. After some discussion in #postgresql, other users there pointed out
that the postgresql query plan is optimized and in some cases a Seq Scan is faster depending on the
number of expected rows to be matched, e.g. 4950 in this case.

I confirmed the indexes were present, you can see [the databases indexes present](https://gist.
github.com/bmbouter/20e7743efb0906f25cbd4c45860cfd82). Additionally a single query by pk on
``core_content`` does show an INDEX SCAN to be used in [the explain output](https://gist.github.com
/bmbouter/4eff2c9376232a3c66340aeb248085d9).


## Bigger Batches are Better

All tasks have to flow through the resource manager to provide the locking guarantees Pulp workloads
require. This has a non-trivial overhead, and you can see that as the batch sizes get bigger
throughput increases a little bit.

We should look at benchmarking the maximum task throughput of the resource manager in a separate
blog post.


## Horizontal Scaling would go Faster!

This system used 16 Pulp workers and so the work was divided over 16 parallel processes. If the DB
has enough resources to keep up and Pulp had more cores it could start more workers and they could
also run in parallel.

This means that those with more resources can scale up as much as their PostgreSQL cluster will.
Also if you want to start a few workers Pulp will just work on the same workload over more time.

Based on all the runs in the table, an average rate of 31.4 RepositoryVersions created per second
was observed. With 16 workers, that is 1.96 repositories per worker per second, or roughly 2
repositories per worker per second. To estimate the capability of your Pulp system with N workers,
the expected number of repositories per second throughput is 2N. Note, you need another CPU core per
worker at all times.


## The Impact of RepositoryVersions

With each run more RepositoryVersions are created. Before the table was generated it was already
173,311. With each test run that number increased and for the 10,000 repo promotion test it was
increasing 5% each time (roughly). This causes a non-negligible slowdown which you can see in the
10,000 repository row, with each test taking an additional 8 seconds.


## Notes & Resources

To run this scale test I needed to develop some tools. I added these to pulp_ansible and documented
them [here](https://pulp-ansible.readthedocs.io/en/latest/testing.html#scale-testing-tools).

Each of these commands dispatches commands into the Pulp tasking system. This is a convenient way
to both have a direct connection to Pulp inside the task, but also to not have to write a custom
multiprocessing deployment for such large workloads.

There are two halves to this implementation. There are [dispatching commands](https:// github.com/
pulp/pulp_ansible/tree/master/pulp_ansible/tests/performance) which all use argparse so
you can inspect them for their options with `-h`, e.g. `python generate_collections.py -h`. Those
commands dispatch [these tasks](https://github.com/pulp/pulp_ansible/blob/master/pulp_ansible/app/
tasks/test_tasks.py) to Pulp workers which perform the workload. Below is a look at the commands
available.


#### Creating lots of Collection tarballs

This command created 10k collections in 29 min and 25 seconds. It dispatched 100 tasks to be handled
by the 16 workers. It uses the shared filesystem as storage.

```
python generate_collections.py --num-namespaces 100 --collections-per-namespace 20 --versions-per-collection 5 --base-path "/var/lib/pulp/collections"
```


#### Fast loading lots of CollectionVersions into pulp_ansible

This command imported 10k collections in 32 min 52 sec. It dispatched 10000 tasks to be handled by
the 16 workers. It reads from the shared filesystem as storage.

```
python fast_load_collections.py --collections-dir "/var/lib/pulp/collections/"
```


#### Create Repositories with RepsoitoryVersions and Collections

This command creates the Repositories, some number of RepositoryVersions for each Repository, and
the percentage of CollectionVersion objects already in the system to associate with each
RepositoryVersion. The command below creates 10000 repositories, with two RepositoryVersions per
Repository. Each RepositoryVersion is expected to have 10% of all Collections in the system included
so for the system with 10K collections, each RepositoryVersion would have 1000 CollectionVersions.

This command was started and stopped a lot, so I can't report on its runtime.
 

```
python create_repos_with_collections.py --num-repos 10000 --num-repo-versions-per-repo 2 --collection-percentage 0.1
```


#### Running the promotion workflow

This command runs the test itself for either 1000, 2000, 5000, or 10000 Repository updates. These
are handled by the 16 workers and the runtimes are in the table above.

```
python promote.py --repos-per-task 63 --num-repos-to-update 1000
python promote.py --repos-per-task 125 --num-repos-to-update 2000
python promote.py --repos-per-task 157 --num-repos-to-update 5000
python promote.py --repos-per-task 157 --num-repos-to-update 10000
```
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-03-15-pulp-fedora31-single-container.md
`````markdown
---
date: 2020-03-15T20:55:50+00:00
title: Pulp 3 in One Container
author: Dennis Kliban
tags:
  - "3.0"
---
<!-- more -->
Installing Pulp 3 and getting all the the services running can be challenging. In an effort to make
these steps optional, we have been working on creating a single container image that has all the
services needed to run Pulp 3. The initial version of this image is now available under the 'pulp'
namespace on Dockerhub. This image includes Ansible, Container, File, Maven, and RPM plugins. The
following commands can be used to start up Pulp 3.2.0 with `podman 1.8.0` (available on Fedora 31):

```
$ mkdir settings pulp_storage pgsql containers
$ echo "CONTENT_ORIGIN='http://$(hostname):8080'
ANSIBLE_API_HOSTNAME='http://$(hostname):8080'
ANSIBLE_CONTENT_HOSTNAME='http://$(hostname):8080/pulp/content'
TOKEN_AUTH_DISABLED=True" >> settings/settings.py
```

## With SELinux

For systems with SELinux in enforcing mode, use the following command:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume ./settings:/etc/pulp:Z \
             --volume ./pulp_storage:/var/lib/pulp:Z \
             --volume ./pgsql:/var/lib/pgsql:Z \
             --volume ./containers:/var/lib/containers:Z \
             --device /dev/fuse \
             pulp/pulp-fedora31
```

## Or Without SELinux

If your system is not running with SELinux enforcing, use the following command to start Pulp:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume ./settings:/etc/pulp \
             --volume ./pulp_storage:/var/lib/pulp \
             --volume ./pgsql:/var/lib/pgsql \
             --volume ./containers:/var/lib/containers \
             --device /dev/fuse \
             pulp/pulp-fedora31
```

In both cases you will see the following output. The last line will be the container ID that you
can use to execute commands inside the container.

```
Trying to pull docker.io/pulp/pulp-fedora31...
Getting image source signatures
Copying blob 67e3038dc3b7 done
Copying blob ff23023c8c8d done
Copying blob 8c32f98c5416 done
Copying blob f328d15d69fa done
Copying blob ffcb1be59aa1 done
Copying blob b9a1b34b38d0 done
Copying blob 443cb276d4ae done
Copying blob d4bcf1091bc0 done
Copying blob f8e0ce13e5f4 done
Copying blob 0c976302c80e done
Copying blob d69fddf60189 done
Copying blob dba42db3b9a9 done
Copying blob 63e0efa76d65 done
Copying blob 355e3ca36a59 done
Copying blob 9854ce01af4c done
Copying blob d2e7008e82d0 done
Copying blob 7d16b80a34a6 done
Copying blob 219dcbdc1826 done
Copying blob 62370638e9ec done
Copying blob 01ceabebb047 done
Copying blob a1881de732d0 done
Copying blob 0e76fdd96f40 done
Copying blob 673f8ea740ee done
Copying blob bfce4aba4f42 done
Copying blob eb6e7e68f0d6 done
Copying blob 0f6b1bb45cd3 done
Copying config 2692cc3736 done
Writing manifest to image destination
Storing signatures
f7044dec1e9d1b9dd66d44e0056280a4399d6eac5c258f03a3a8ccd2a7e6effc
```

Now use the container ID to reset the 'admin' user's password. `podman` also accepts the first part
of the ID for convenience.

```
$ podman exec -it pulp bash -c 'pulpcore-manager reset-admin-password'
Please enter new password for user "admin": 
Please enter new password for user "admin" again: 
Successfully set password for "admin" user.
```

At this point both the REST API and the content app will be available on your host's port 8080.

## References

The Containerfile and all other assets used to build the `pulp/pulp-fedora31` container image
are available on [GitHub](https://github.com/pulp/pulp-fedora31).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-07-09-pulp-3.5-installer-roles.md
`````markdown
---
date: 2020-07-09T20:55:50+00:00
title: Pulp Installer 3.5 new roles and new deployment scenarios
author: Mike DePaulo
tags:
  - "3.0"
---
<!-- more -->
There have been some big changes to Pulp Installer in 3.5.0, in terms of the Ansible role structure,
including breaking changes. Merely reading the release notes for individual changes does not paint
a complete or clear picture, hence why we are writing this blog post.

In short, we refactored the Pulp Installer roles to acheive an SOA (Service Oriented Architecture).

We now have 1 role for each service, and each can be installed to a server of its own.

This does mean that users who wrote custom playbooks need to update them for 3.5.0 with a new `roles:` list.

So we created 2 new meta roles as well, to prevent users from having to change their `roles:` list
again in the future:
* `pulp_all_services`
* `pulp_services`

The refactoring benefits every deployment scenario that users may have, 4 of which are explained
in greater detail with example playbooks below.
* Users that want a single "all-in-one" Pulp server (including database, redis & webserver).
* Users that want to install Pulp itself on a server, but want to use existing
  infrastructure (servers) for database, redis & webserver.
* Users that want to install Pulp itself on a server, and want to install database, redis &
  webserver on separate servers.
* User that wants to install each and every Pulp service on a separate server.

### "All-In-One" Pulp Server:

This is a single server, containing all Pulp services, including database, redis & webserver.

This is the new example playbook, almost identical to the one found in
pulp_installer/playbooks/example-use/playbook.yml and in the quickstart guide in the Pulp Installer
docs.

The benefits / differences from 3.4.1 are:
* The old `roles:` list (with 5 roles) will no longer work.
* The new `roles:` list is now 1 meta role: `pulp_all_services`
* The new `roles:` list is very unlikely to change again in the future.

```yaml
    ---
    - hosts: pulp1
      vars:
        pulp_default_admin_password: << YOUR PASSWORD FOR THE PULP APPLICATION HERE >>
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://{{ ansible_fqdn }}"
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_all_services
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings
```

### Pulp Server with Existing Infrastructure:

This is a single server, that relies on existing database, redis & webservers.

This example playbook is almost identical to the one found in the `pulp_services` documentation.

The benefits / differences from 3.4.1 are:
* The old `roles:` list (with 4 roles) will no longer work.
* The new `roles:` list is now 1 meta role: `pulp_services`.
* The new `roles:` list is unlikely to change again in the future.
* `pulp_redis` will no longer be applied on this server as a dependency
  of `pulp_workers` or `pulp_resource_manager`. This avoids an additional & unused redis service
  being pointlessly installed and running.
* Telling the installer to not install a postgres database server is now a function of the `roles:`
  list. The following variable which used to control that is now ignored: `pulp_install_db`.
* Therefore, you no longer need to set `pulp_install_db=false` in your `vars:`.

```yaml
    ---
    - hosts: pulp1
      vars:
        pulp_default_admin_password: << YOUR PASSWORD FOR THE PULP APPLICATION HERE >>
        pulp_content_bind: pulp1:24816
        pulp_api_bind: pulp1:24817
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          redis_password: << YOUR REDIS PASSWORD HERE >>
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_services
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings
```

Note the following hostnames:
* pulp1: The Pulp server
* webserver1.fqdn : An existing webserver, specified as FQDN, and with http:// or https://
* redis1: An existing redis server
* postgres1: An existing PostgreSQL database server

### Pulp Server + Separate Servers

Here the installer installs Pulp itself on a server, the database on a 2nd server, redis on
a 3rd server, and the webserver on a 4th server.

Note that the code for `hosts: pulp1` is identical to the above example.

We consider this to be a new deployment scenario for Pulp Installer, because although it may have
worked previously, odd settings/workarounds were involved (we listed the ones we noticed
below), and it was never tested or documented.

The benefits / differences from 3.4.1 are:
* The new `roles:` list for the main Pulp server is now 1 meta role: `pulp_services`.
* The new `roles:` list for the main Pulp server is also unlikely to change in the future.
* `pulp_redis` (and thus a redis server) will no longer be installed on the main Pulp server as a
  dependency of `pulp_workers` or `pulp_resource_manager`. This avoids a pointless service being
  installed and running on it.
* When you apply `pulp_database` to install the Posgres database server, it no longer installs the
  Pulp application on it (it no longer depends on `pulp_common`, formerly `pulp`.) This is because the
  functionality to configure the database itself is no longer in `pulp_database`. It is now
  in `pulp_database_config`, which is a dependency of `pulp_services`.
* You no longer need to set `pulp_install_api_service=false` and `pulp_install_db=false` on postgres1
  and webserver1.
* Because of the above change, the following variables are now ignored: `pulp_install_api_service`
  and `pulp_install_db`.

Note that the following non-SOA behavior still exists:
* `pulp_webserver` still depends on `pulp_common` (formerly `pulp`), so as to provide the
  per-plugin webserver snippets. So webserver1 will have pulpcore & all plugins installed on it.
  Now however, pulp-api is no longer running & listening by default
  (no need to set `pulp_install_api_service=false`.)

```yaml
    ---
    - hosts: postgres1
      vars:
        pulp_settings:
          databases:
            default:
              HOST: postgres1
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
      roles:
        - pulp_database

    - hosts: redis1
      vars:
        pulp_redis_bind: 'redis1:6379'
      roles:
        - pulp_redis

    - hosts: pulp1
      vars:
        pulp_default_admin_password: << YOUR PASSWORD FOR THE PULP APPLICATION HERE >>
        pulp_content_bind: pulp1:24816
        pulp_api_bind: pulp1:24817
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_services
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings

    - hosts: webserver1
      vars:
        pulp_content_bind: pulp1:24816
        pulp_api_bind: pulp1:24817
      roles:
        - pulp_webserver
```

Note the following hostnames:
* pulp1: The Pulp server
* webserver1.fqdn : The new webserver, specified as FQDN, and with http:// or https://
* webserver1: The same new webserver
* redis1: The new redis server
* postgres1: The new PostgreSQL database server

### Separate Servers for Each & Every service

Here every single service is on its own server.

And in the example playbook, there are actually 2 worker servers.

We consider this to be a new deployment scenario for Pulp Installer, because although it may have
worked previously, odd settings/workarounds were involved (we listed the ones we noticed
below), and it was never tested or documented.

`pulp_services` is expanded from the previous example 5 roles: `pulp_api`, `pulp_content`, `pulp_workers`,
`pulp_resource_manager` and  `pulp_database_config`. `pulp_database_config` is actually not a
service, but it does depend on `pulp_common` (which installs the Pulp application) and it only needs
to be run once. It can be run on any server (ideally one where `pulp_common` is being run for other
roles anyway), so we simply picked the API server.

The benefits / differences from 3.4.1 are:
* The new `roles:` list is 1 role per service and per server, plus `pulp_database_config`.
* `pulp-api` is now its own role. It is no longer part of `pulp` (now called `pulp_common`).
* `pulp_common` (formerly `pulp`) is not meant to be called directly anymore, either as an
  undeclared dependency or for the `pulp-api` service.
* `pulp_redis` (and thus a redis server) will no longer be installed on the pulp_workers servers or
  pulp-res-man1 server as a dependency of `pulp_workers` or `pulp_resource_manager`. This avoids a
  pointless service being installed and running on them.
* When you apply `pulp_database` to install the Posgres database server, it no longer installs the
  Pulp application on it (it no longer depends on `pulp_common`, formerly `pulp`.) This is because the
  functionality to configure the database itself is no longer in `pulp_database`. It is now
  in `pulp_database_config`, which is a dependency of `pulp_services`.
* You no longer need to set `pulp_install_api_service=false` on all the servers other than
  pulp-api1.
* You no longer need to set `pulp_install_db=false` on postgres1
* Because of the above changes, the following variables are now ignored: `pulp_install_api_service`
  and `pulp_install_db`.

Note that the following non-SOA behavior still exists:
* `pulp_webserver` still depends on `pulp_common` (formerly `pulp`), so as to provide the
  per-plugin webserver snippets. So webserver1 will have pulpcore & all plugins installed on it.
  Now however, pulp-api is no longer running & listening by default
  (no need to set `pulp_install_api_service=false`.)

```yaml
    ---
    - hosts: postgres1
      vars:
        pulp_settings:
          databases:
            default:
              HOST: postgres1
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
      roles:
        - pulp_database

    - hosts: redis1
      vars:
        pulp_redis_bind: 'redis1:6379'
      roles:
        - pulp_redis

    - hosts: pulp-api1
      vars:
        pulp_default_admin_password: << YOUR PASSWORD FOR THE PULP APPLICATION HERE >>
        pulp_api_bind: pulp-api1:24817
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_api
        - pulp_database_config
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings

    - hosts: pulp-content1
      vars:
        pulp_content_bind: pulp-content1:24816
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp-content
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings

    - hosts:
        - pulp-workers1
        - pulp-workers2
      vars:
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_workers
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings

    - hosts: pulp-res-man1
      vars:
        pulp_settings:
          secret_key: << YOUR SECRET HERE >>
          content_origin: "http://webserver1.fqdn"
          redis_host: redis1
          redis_port: 6379
          databases:
            default:
              HOST: postgres1
              ENGINE: django.db.backends.postgresql_psycopg2
              NAME: pulp
              USER: pulp
              PASSWORD: << YOUR DATABASE PASSWORD HERE >>
        pulp_install_plugins:
          pulp-container: {}
          pulp-rpm: {}
      roles:
        - pulp_resource_manager
      environment:
        DJANGO_SETTINGS_MODULE: pulpcore.app.settings

    - hosts: webserver1
      vars:
        pulp_content_bind: pulp1:24816
        pulp_api_bind: pulp1:24817
      roles:
        - pulp_webserver
```

Note the following hostnames:
* pulp-api1: The pulp-api server. We also chose this to run pulp_database_config.
* pulp-content1: The pulp-content server
* pulp-workers1, pulp-workers2: The pulp-workers servers
* pulp-res-man1: The pulp-resource-manager server
* webserver1.fqdn : The new webserver, specified as FQDN, and with http:// or https://
* webserver1: The same new webserver
* redis1: The new redis server
* postgres1: The new PostgreSQL database server
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-07-16-pulp-squeezer-0.0.1-available.md
`````markdown
---
date: 2020-07-16T20:55:50+00:00
title: Announcing Pulp Squeezer 0.0.1
author: Melanie Corr
tags:
  - release
---
<!-- more -->
Pulp Squeezer, formerly known as Pulp Ansible Modules, is a collection of Ansible modules that you can use to manage Pulp.

Previously, you could use Ansible modules only to manage File content in Pulp. With this 0.0.1 release, you can fetch, upload, organize, and distribute File, Ansible, and Python content.

Installing collections with `ansible-galaxy` is only supported in Ansible 2.9 and higher.

Check out Pulp Squeezer on [Ansible Galaxy](https://galaxy.ansible.com/pulp/squeezer).

## Available modules

For Ansible content:

*  `ansible_distribution`
*  `ansible_remote`
*  `ansible_repository`
*  `ansible_role`
*  `ansible_sync`

For File content:

*  `file_content`
*  `file_distribution`
*  `file_publication`
*  `file_remote`
*  `file_repository`
*  `file_sync`

For Python content:

*  `python_distribution`
*  `python_publication`
*  `python_remote`
*  `python_repository`
*  `python_sync`

Pulp general:

*  `artifact`
*  `delete_orphans`
*  `status`
*  `task`
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-07-30-july-newsletter.md
`````markdown
---
date: 2020-07-30T20:55:50+00:00
title: Pulp Community Update (July 2020)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
If you have any questions or updates you would like to share, write to us at pulp-list@redhat.com.

## 2020 Community Survey

If you are a Pulp user, please complete the [annual community survey](https://forms.gle/2Q3Ta2n1AKAHiev9A) so that the Pulp team can better understand how the community is using Pulp, what the community needs, and would like to see.

## Managing Pulp with Ansible - Pulp Squeezer

[Pulp Squeezer](/pulp-squeezer/), formerly known as Pulp Ansible Modules, is a collection of Ansible modules that you can use to manage Pulp. This month, versions 0.0.1 and a follow up 0.0.2 have been released.

<script id="asciicast-amFEhvEprDLB2UPgDcgJg4knz" src="https://asciinema.org/a/amFEhvEprDLB2UPgDcgJg4knz.js" async></script>

Check out Pulp Squeezer on [Ansible Galaxy](https://galaxy.ansible.com/pulp/squeezer).

## Pulp 3 at the Foreman Birthday Party

As part of the Foreman's 11th Birthday Party celebrations, Justin Sherrill spoke about the performance improvements Katello will enjoy by migrating from Pulp 2 to Pulp 3.

<iframe width="560" height="315" src="https://www.youtube.com/embed/b6HsSm10DLk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Pulpcore 3.5 is available

As well as a number of bug fixes, this release contains major updates to the Pulp installer to achieve Service Oriented Architecture (SOA). With this release, there is one role per service, which means that you can install each service on an individual server. Because of the scale of these changes, this release introduces some breaking changes. As part of the upgrade, you must also update existing playbooks.  For more information, see [Pulp Installer 3.5 new roles and new deployment scenarios](https://pulpproject.org/2020/07/09/pulp-3.5-installer-roles/)

The following features have been added to the REST API:

* By default, Pulp now provides a user agent with all `aiohttp` requests to identify itself.
* A `start_versions=`  has been added so export a specific set of repository versions. For more information, see [Exporting Incrementally](https://docs.pulpproject.org/en/3.5/workflows/import-export.html?highlight=start_versions#exporting-incrementally) in the Pulp documentation.
* GroupProgressReport has been added to track the progress of each task in that group. For more information, see *GroupProgressReport can* in the [Tasks](https://docs.pulpproject.org/plugins/plugin-writer/concepts/index.html#tasks) concept section of the Plugin Writers Guide

The following features have been added to the Plugin API:

* OpenAPI Tags have been added to group operations into logical categories. You can also customize tags. For more information. see [OpenAPI Tags](https://docs.pulpproject.org/plugins/reference/how-to-doc-api.html?highlight=group%20operations%20logically%20categories#openapi-tags)
* GroupProgressReport has been added to track the progress of each task in that group. For more information, see *GroupProgressReport can* in the [Tasks](https://docs.pulpproject.org/plugins/plugin-writer/concepts/index.html#tasks) concept section of the Plugin Writers Guide
* SingleContentArtifactField and PulpTemporaryUploadedFile have been exported to the Plugin API

For information about installing or updating to Pulpcore 3.5, see the [full announcement](https://www.redhat.com/archives/pulp-list/2020-July/msg00010.html).

## Pulp 2.21.3 is available

For more information about the issues addressed see the [release announcement](/2020/07/13/pulp-2.21.3-generally-available/).

Pulp 2 is in [maintenance mode](/2020/06/15/pulp-2-enters-maintenance-mode/). Start planning your [migration](/migrate-to-pulp-3/) to Pulp 3 today!

## Content Plugin Releases

### Pulp RPM 3.5 is available

After a 3.4.2 bug-fix-focussed release earlier this month, the Pulp RPM team has released a feature-packed Pulp RPM 3.5 plugin. As well as a number of bug fixes, this release provides the following features:

* A new retention policy feature that you can use to specify the latest _N_ versions of each package that you want to keep while purging older versions
* Support for comparing packages by epoch, version, release (EVR)
* Support for synchronizing from a mirror list feed
* The comps file types `PackageCategory`, `PackageEnvironment`, and `PackageGroup` can copy their children
* Support for synchronizing SUSE enterprise repositories with an authentication token

For more information, see the [changelog](https://pulp-rpm.readthedocs.io/en/3.5/changes.html#id1) and [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05832.html).


### Pulp File 1.1.0 is available

This bug fix release has added the `requirements.txt` file to the Pulp File 1.1.0 package that was not included in the Pulp File 1.0.0 package.

For more information, see the [changelog](https://pulp-file.readthedocs.io/en/latest/changes.html#id1) and the [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05832.html).


###  Pulp Container 1.4.2 is available

The Pulp Container team has produced a bug fix release of 1.4 that improves performance synchronization. For more information, see the [changelog](https://pulp-container.readthedocs.io/en/1.4/changes.html#id1) and the [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05841.html).

## Content Plugin Beta Releases

### Pulp Debian 2.5.0 Beta 1 is available

This release includes adding more metadata fields to published Release files, as well as some bug fixes.

For more information see the [changelog](https://docs.pulpproject.org/pulp_deb/changes.html#b1-2020-07-15) and the [release announcement](https://www.redhat.com/archives/pulp-list/2020-July/msg00015.html).

### Pulp Ansible Plugin 0.2.0 Beta 15 is available

This release provides the ability to enable token authentication for synchronizing Ansible Collections.

For more information, see the [changelog](https://pulp-ansible.readthedocs.io/en/latest/changes.html#b15-2020-07-14) and the [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05836.html).

### Pulp Container 2.0.0 Beta 3 is available

This beta update contains a number of bug fixes as well as the following features:

* Schema conversion, which was available in Container plugin 1.4, is now available in this beta release. This feature works with both the local filesystem and S3 storage backends.
* A new repository type `ContainerPushRepository` has been added to support writable container registries.
`ContentRedirectContentGuard` has been added to facilitate authentication.
* Push access has been restricted to an admin user.  

For more information, see the [changelog](https://pulp-container.readthedocs.io/en/2.0.0b3/changes.html#b3-2020-07-16) and [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05841.html).

## Pulp Certguard 1.0.0 is available

The Certguard plugin provides a X.509 capable `ContentGuard` that requires clients to submit a certificate proving their entitlement to content before receiving content from Pulp.

For more information, see [Certguard plugin](/certguard-plugin/)

## Pulp 3 Concurrency Testing

Syncing content into Pulp 3 is a time-consuming process. Grant Gainey conducted some evaluations of sync-performance at various concurrency settings. Read more in his [blog](/2020/07/31/concurrency-testing/).

## Work in Progress

### Role Based Access Control (RBAC) Proof of Concept is ready for review and feedback.

Brian Bouterse hosted an open meeting where he gave an overview of the RBAC Proof of Concept:

<iframe width="560" height="315" src="https://www.youtube.com/embed/tWEHGJmBqCk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### Import Export Keys

Grant Gainey hosted an open meeting where he outlined the issues around Pulp 3 import/export handling of entities without a ‘natural’ key. You can find the document that was discussed [here](https://hackmd.io/@ggainey/importexport_lowlevel_naturalkeys)

<iframe width="560" height="315" src="https://www.youtube.com/embed/Vk5qiM9yPHQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


If you have any feedback, submissions, or comments on anything discussed here, feel free to write to us at pulp-list@redhat.com
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-07-31-concurrency-testing.md
`````markdown
---
date: 2020-07-31T20:55:50+00:00
title: Pulp 3 Concurrency Testing
author: Grant Gainey
tags:
  - blog
---
<!-- more -->
Syncing content into Pulp 3 is a time-consuming process. Fortunately, you can specify that content-artifacts are retrieved in parallel to minimize time by maximizing bandwidth utilization. This parallelism is accomplished by specifying the `download_concurrency` value on a given Remote.

Pulp 3’s default value for `download_concurrency` is 20. This can put an undue burden on the server the remote is retrieving content from - sometimes to the point of causing such a server to begin throttling or outright failing Pulp 3’s requests.

Rather than blindly changing that default, we would like to have some idea of the performance impact of various settings of `download_concurrency`, as noted in Redmine issue [7212](https://pulp.plan.io/issues/7212)

This document describes a set of tests, their environment, and some results, in search of that impact.

## Methodology

* Pick a repository of significant size and complexity, for example, [https://mirror.fileplanet.com/centos/7/os/x86_64/](https://mirror.fileplanet.com/centos/7/os/x86_64/)
* Sync its content, using `sync-immediate`, into a ‘clean’ Pulp 3 instance, at `download_concurrency` values of 20, 15, 10, 7, 5, and 3
* For each level, repeat the sync at least three times to average out general Internet non-determinism
* Find the average sync-time for a given concurrency level

## Environment

### Hardware

* Intel Core i7-6700 (4Ghzx8)
* 32 GB memory
* 1 TB Western Digital 7200RPM drive
* Google Fibre network connection, ~900Mbps up/down
* Local network has frequent high internet use, for example, Twitch streaming, video, high-bandwidth gaming, etc.
* System under test was not dedicated to the test process, and was running other loads

### Software

* Fedora 31
* Tests run on the `pulplift` vagrant box, `pulp3-source-fedora31`
* `pulpcore` and `pulp_rpm master` as of 2020-07-25

## Caveats

* The higher the concurrency, the heavier the load on the Pulp 3 instance
* Connection-bandwidth of the Pulp 3 instance is a limiting factor no matter how high concurrency is set
* Connection-bandwidth of the source server is a limiting factor no matter how high concurrency is set
* Internet connectivity is subject to arbitrary changes

## Results

Runs were executed on 2020-07-25 and 07-26 and resulted in the following observations:

* Decreasing concurrency by a factor of four (from twenty to five) did not quite double the sync-time (10:39 to 18:15).
* Reducing it to three results in nearly tripling the sync-time (to 29:12)


![Concurrency Testing Graph](/images/concurrency-testing/pulp3-concurrency-testing-graph.png)

Horizontal axis ticks are 20/15/10/7/5/3 concurrency.

As can be seen from the chart, while reducing concurrency does impact performance, there is a distinct knee below `download_concurrency=5`.

## Conclusion

In the context of this specific test, on this specific weekend, with this specific hardware - it would seem that a concurrency of seven or five, while having an impact on sync-time, still results in acceptable results. Going below five starts to have a disproportionate effect.

It would therefore appear to be useful to reduce Pulp 3’s default concurrency to, but not lower than, five, based on these results.

## Further Experiments

* Repeat the experiment using on_demand instead of immediate
* Monitor the load-average of the Pulp 3 instance under various concurrency levels
* Monitor the Pulp 3 instance’s memory usage under different concurrency levels
* Monitor the performance of postgresql under different concurrency levels (although the load of moving the actual bits across the network is likely to swamp that metric)
* Test the same sync against different source sites, for example, what impact does latency have? are there source-bandwidth limitations?
* Test when syncing onto an SSD instead of HDD

## Raw Data

```
concurrency,avg duration,duration,start,finish
3,,0:29:07,2020-07-25 16:48:11,2020-07-25 17:17:18
3,,0:27:32,2020-07-25 17:21:37,2020-07-25 17:49:09
3,0:29:12,0:30:56,2020-07-25 19:00:45,2020-07-25 19:31:41
5,,0:18:29,2020-07-24 20:45:03,2020-07-24 21:03:32
5,,0:17:47,2020-07-24 21:41:11,2020-07-24 21:58:59
5,0:18:15,0:18:29,2020-07-25 13:07:23,2020-07-25 13:25:52
7,,0:15:00,2020-07-25 23:15:42,2020-07-25 23:30:42
7,,0:15:36,2020-07-26 0:45:38,2020-07-26 1:01:14
7,0:15:30,0:15:53,2020-07-26 3:01:19,2020-07-26 3:17:12
10,,0:11:56,2020-07-25 14:38:27,2020-07-25 14:50:23
10,,0:15:00,2020-07-25 15:01:04,2020-07-25 15:16:04
10,0:13:33,0:13:43,2020-07-25 15:53:02,2020-07-25 16:06:45
15,,0:12:46,2020-07-25 21:43:20,2020-07-25 21:56:06
15,,0:12:44,2020-07-25 22:20:47,2020-07-25 22:33:31
15,0:12:31,0:12:04,2020-07-25 22:37:57,2020-07-25 22:50:01
20,,0:10:36,2020-07-24 18:51:45,2020-07-24 19:02:21
20,,0:10:58,2020-07-24 20:14:53,2020-07-24 20:25:50
20,0:10:39,0:10:23,2020-07-24 20:27:51,2020-07-24 20:38:14
```
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-06-pulp-python-3.0.0b10-is-generally-available.md
`````markdown
---
date: 2020-08-06T20:55:50+00:00
title: Pulp Python Plugin 3.0.0 Beta 10 is Available
author: Gerrod Ubben
tags:
  - release
---
<!-- more -->
The latest Beta release of the Python plugin is available on [PyPI](https://pypi.org/project/pulp-python/3.0.0b10/). This version is compatible with Pulpcore 3.5.0.

This is mainly a Pulpcore 3.5.0 compatibility release. As well as a number of bug fixes, this release contains a new feature that allows users to create a Python Remote from [a Bandersnatch config file](https://pulp.plan.io/issues/6929). For a complete list of changes, see the [changelog](https://pulp-python.readthedocs.io/en/latest/changes.html#b10-2020-08-05).

[Python bindings](https://pypi.org/project/pulp-rpm-client/3.5.0/) and [Ruby bindings](https://rubygems.org/gems/pulp_python_client/versions/3.0.0b10) are available.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-13-pulp-3.6-is-generally-available.md
`````markdown
---
date: 2020-08-13T20:55:50+00:00
title: Pulp 3.6 is Generally Available!
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
The Pulp team is pleased to announce the release of Pulp 3.6.

This release contains a number of bug fixes as well as major enhancements to improve security and usability. If you are upgrading to Pulp 3.6, ensure that you pay particular attention to the **Installer HTTP -> HTTPS** and **Schema and Bindings Changes** sections. This blog outlines the most significant changes. For a full list of changes, see the [changelog](https://docs.pulpproject.org/en/3.6/changes.html).

Pulp 3.6 is available on [PyPI](https://pypi.org/project/pulpcore/3.6.0/).

Pulp File 1.2.0 has also been released and is available on [PyPI](https://pypi.org/project/pulp-file/1.2.0/).

## Installer HTTP -> HTTPS

This release introduces SSL to ensure the security of Pulp requests. As part of upgrading to using HTTPS, you must complete one of the following actions:

1. Have the Pulp Installer generate a CA certificate, create an SSL certificate that is signed by that CA, and configure the web server with that certificate.
2. Provide an SSL certificate and have the Pulp Installer configure the web server to use that certificate.
3. Use a role to request a LetsEncrypt SSL certificate or some other ACME protocol-compatible service. The installer can then configure the web server to use that SSL certificate.


## Schema and Bindings Changes

In 3.6, our REST API schema was updated from OpenAPI v2 to OpenAPI v3. This change was needed to fix a bug where `write_only` fields were not being handled properly in the schema and bindings. This will potentially affect bindings' users because some method parameters may change especially for endpoints that involve file parameters.

The Upload update() method now accepts the content_range as the first parameter and upload_href as the second.

## Repository Remote Association

A Remote can now be set on a Repository. This link provides a way to automatically sync from a Remote without having to specify which Remote you want to sync from when you sync.

```
http PATCH $BASE_ADDR$REPO_HREF remote=$REMOTE_HREF
http POST $BASE_ADDR$REPO_HREF'sync/'
```

## Default download_concurrency Value Changed from 20 to 10

Pulp 3’s default value for `download_concurrency` was `20`. This was found to put an undue burden on the server the remote is retrieving content from. As a result of some [concurrency testing](https://pulpproject.org/2020/07/31/concurrency-testing/), the default value has been adjusted to `10`. You can adjust this to suit your own deployment.

## Importing Split Files

Import functionality has been improved to better handle the import of split files using the new table of contents (TOC) file for exports and  `toc=` parameter for imports.

Using the new `toc=` parameter, the import API now finds and validates the checksums of any `chunk_files`, and reassembles them into a single .tar.gz file.

For more information see, [Pulp Import/Export](https://docs.pulpproject.org/workflows/import-export.html) documentation.

## Plugin Writers -- Role Based Access Control (RBAC)

While not available for users yet, significant role based access machinery was added in 3.6 for plugin writers to enable RBAC with. See [the new plugin writer docs](https://docs.pulpproject.org/plugins/plugin-writer/concepts/index.html#role-based-access-control) and Plugin API changelog for more details.

## Installation and Upgrade

Use the 3.6.0 release of [`pulp_installer`](https://galaxy.ansible.com/pulp/pulp_installer) to install or upgrade. This version of the installer will check compatibility of all installed plugins with pulpcore 3.6. The installer will abort if any plugin is incompatible.

The `pulp_installer` collection can be installed from Ansible Galaxy with the following command:

```
    ansible-galaxy collection  install --force pulp.pulp_installer
```

The `--force ` flag will upgrade the collection if you had a previous version installed.


## Plugin API

This version includes support for Role Based Access Control(RBAC). To see a full list of Plugin API changes, read [Plugin API changelog](https://docs.pulpproject.org/en/3.6/changes.html#plugin-api)

In keeping with the recommended strategy to pin plugins to a 3.y version of `pulpcore`, plugins should release compatibility releases with 3.6 as soon as they can. We recommend using "pulpcore>=3.6,<3.7".
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-18-pulp-container-2.0-is-generally-available.md
`````markdown
---
date: 2020-08-18T20:55:50+00:00
title: Pulp Container 2.0.0 is Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
The Pulp team is pleased to announce the release of Pulp Container 2.0.0.

This release features push API support for Docker and Podman clients. This enhancement greatly simplifies the workflow for managing containers in Pulp.

You can now push a container image to the repositories hosted by the Container Registry. For an example workflow see [Push content to a repository](https://pulp-container.readthedocs.io/en/latest/workflows/push.html#push-content-to-a-repository) in the Pulp Container plugin documentation. This release also includes security features and restrictions to ensure that you can manage container content in a secure manner.

For information about all Pulp Container workflows, see [workflows](https://pulp-container.readthedocs.io/en/latest/workflows/index.html).

You can find Pulp Container 2.0.0 on [PyPI](https://pypi.org/project/pulp-container/2.0.0/).

## Pulp Container 2.0.0 Features

* REST APIs have been added to handle Docker and Podman clients push functionality. [#5027](https://pulp.plan.io/issues/5027)
* A new `ContainerPushRepository` type has been added to support writeable container registries. [#6825](https://pulp.plan.io/issues/6825)
* Push functionality has been restricted to Pulp admin users. [#6976](https://pulp.plan.io/issues/6976)
* A new `ContentRedirectContentGuard` type has been added to support token authentication for Pulp Container. [#6894](https://pulp.plan.io/issues/6894)
* Schema conversion handling has been added for S3 storage backends. [#6824](https://pulp.plan.io/issues/6824)
* The ability to exclude tags during syncing has been added to allow users to skip tags they don't want to sync. This can save both time and disk space. [#6922](https://pulp.plan.io/issues/6922)
* Cleanup functionality has been added so that when a push repository is deleted, the associated distribution is also deleted. [#7172](https://pulp.plan.io/issues/7172)

## Bug Fixes

As part of this release and throughout the different beta iterations, the following bugs were captured and fixed:

* Fixed 500 error when pulling by tag. [#6776](https://pulp.plan.io/issues/6776)
* All relations between content models are properly created. [#6827](https://pulp.plan.io/issues/6827)
* Automatically create repositories and distributions for the container push. [#6878](https://pulp.plan.io/issues/6878)
* Fixed not being able to push tags with periods in them. [#6884](https://pulp.plan.io/issues/6884)
* Fixed problem with the `client_max_body_size` value in the nginx config. [#6916](https://pulp.plan.io/issues/6916)
* Refactored `token_authentication` so that it now happens in the `pulpcore-api` app. [#6894](https://pulp.plan.io/issues/6894)
* Fixed a crash when trying to access content with an unparseable token. [#7124](https://pulp.plan.io/issues/7124)
* Fixed a runtime error which was triggered when a registry client sends an accept header with an inappropriate media type for a manifest and the conversion failed. [7125](https://pulp.plan.io/issues/7125)
* Updated the sync machinery to not store an image manifest as a tag’s artifact. [#6816](https://pulp.plan.io/issues/6816)
* Added a validation, that a push repository cannot be distributed by specifying a version. [#7012](https://pulp.plan.io/issues/7012)
* Restrict the REST API methods PATCH and PUT so as to prevent changes to repositories created via docker/podman push requests. [#7013](https://pulp.plan.io/issues/7013)
* Fixed error rendering in the container registry API. [#7054](https://pulp.plan.io/issues/7054)
* Repaired broken registry with `TOKEN_AUTH_DISABLED=True`. [#7304](https://pulp.plan.io/issues/7304)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-19-pulp-ansible-0.2.0-is-generally-available.md
`````markdown
---
date: 2020-08-19T20:55:50+00:00
title: Pulp Ansible 0.2.0 is Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
The Pulp team is pleased to announce the release of the Pulp Ansible 0.2.0 plugin.

## About the Pulp Ansible content plugin

If you’re an Ansible user and do not want to host your private content on Ansible Galaxy, you can add the Pulp Ansible plugin to Pulp. You can then mirror the public Ansible content that you require and use Pulp as an on-premise platform to manage and distribute a scalable blend of public and private Ansible roles and collections across your organization.

With the Pulp Ansible plugin, you can complete the following workflows via the Pulp API. Ansible content includes both roles and collections:

* Mirror a subset of Ansible content on-premise
* Mirror all of Ansible Galaxy’s content on-premise
* Create a distribution and use the `ansible-galaxy` command to install content from this distribution

For more information, see the [roles](https://pulp-ansible.readthedocs.io/en/latest/workflows/roles.html) and [collections](https://pulp-ansible.readthedocs.io/en/latest/workflows/collections.html) workflows in the Pulp Ansible documentation.

The Pulp Ansible plugin also has the following features:

* Store private Ansible collections on-premise using the `ansible-galaxy collection publish` command
* Version Ansible content over time and roll back if necessary
* Support for the new multi-role content type from Ansible Galaxy

## Release Features

In this release, which is compatible with Pulp 3.6, the following functionality has been added:

* Users can now associate a remote with a repository and automatically use this remote when syncing the repository. [#7194](https://pulp.plan.io/issues/7194)

As part of this release, artifacts are no longer persisted when importing collections [#6718](https://pulp.plan.io/issues/6718)

For more information, see the [Ansible plugin docs](https://pulp-ansible.readthedocs.io/en/latest/index.html).

For more information about work in progress, see the [Pulp Ansible redmine ](https://pulp.plan.io/projects/ansible_plugin/).

## Get Pulp Ansible 0.2.0

* PyPI: [https://pypi.org/project/pulp-ansible/0.2.0/](https://pypi.org/project/pulp-ansible/0.2.0/)
* Python bindings: [https://pypi.org/project/pulp-ansible-client/0.2.0/](https://pypi.org/project/pulp-ansible-client/0.2.0/)
* Ruby bindings: [https://rubygems.org/gems/pulp_ansible_client/versions/0.2.0](https://rubygems.org/gems/pulp_ansible_client/versions/0.2.0)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-26-pulp-2-to-3-migration-0.3.0-is-available.md
`````markdown
---
date: 2020-08-26T20:55:50+00:00
title: The pulp-2to3-migration 0.3.0 plugin is Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
The Pulp team is pleased to announce the release of the 0.3.0 version of the Pulp 2-to-3 Migration plugin.

You can use this plugin to migrate content from Pulp 2 into Pulp 3. At the moment, the migration plugin covers the following scenarios:

* Pulp 2 ISO content can be migrated into Pulp 3 File.
* Pulp 2 Docker content can be migrated into Pulp 3 Container.
* Pulp 2 RPM content can be migrated into Pulp 3 RPM.

This release is compatible with Pulpcore 3.6 and the following content plugins:

* Pulp File 1.2
* Pulp Container 2.0
* Pulp RPM 3.6

You can migrate plugin by plugin, or all plugins together.

## Release Features

This release includes the following features:

* A `GroupProgressReport` entry has been added so that users can track the progress of the migration. [#6769](https://pulp.plan.io/issues/6769)
* Compatibility changes were added to match the recent release of Pulp Container 2.0 plugin. [#7365](https://pulp.plan.io/issues/7365)

## Bug Fixes

* Added significant performance improvements to partial migrations of additional content. [#6111](https://pulp.plan.io/issues/6111)
* Fixed a problem that caused a migration failure for a distribution tree if it has a treeinfo and not `.treeinfo` . [#6951](https://pulp.plan.io/issues/6951)
* Fixed an issue with the labeling of Pulp 2 Lazy Content catalog entries to prevent false negatives and migration failures on re-migration. [#7260](https://pulp.plan.io/issues/7260)

## Warning

You must migrate Pulp 2 content to a Pulp 3 instance that has not been used for the content plugin that you want to migrate. The migration process can remove some Pulp 3 data related to the plugin that is being migrated. Naming and distribution paths of migrated and Pulp 3 content can clash.

#### Safe Example

If you use Pulp 3 with the `pulp_file` plugin and now want to migrate RPM content from Pulp 2 to Pulp 3. If you haven't used the Pulp 3 RPM plugin, then you can safely migrate and start using the RPM plugin.

#### Unsafe Example

If you use Pulp 3 with the RPM plugin (version 3.x) and decide to migrate Pulp 2 RPM content to Pulp 3, you will encounter problems.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-28-august-community-update.md
`````markdown
---
date: 2020-08-28T20:55:50+00:00
title: Pulp Community Update (August 2020)
author: Melanie Corr
tags:
  - news
---
<!-- more -->
_If you have any questions or updates you would like to share, write to pulp-list@redhat.com._

## 2020 Community Survey

Thanks to everyone who has taken the time to complete the survey so far. If you haven't yet, please complete the [annual community survey](https://forms.gle/2Q3Ta2n1AKAHiev9A) so that the Pulp team can better understand how you are using Pulp, what you need and what you would like to see.

## PulpCon 2020 - Save the Date

The first virtual PulpCon will take place during **the week of September 14th**. The sessions will be held over five half-days, Mon-Fri mornings in EST and afternoons in CET. The [full agenda](https://hackmd.io/@pulp/pulpcon2020_schedule) has been published. Attending PulpCon has never been easier. Block off your calendar and join us from the comfort of your own home!  

## Verifying Contributions to pulp.plan.io

Because of a high volume of spam, Pulp intern Lubos Mjachky has added some checks to ensure that [pulp.plan.io](pulp.plan.io) remains a space for easy collaboration on Pulp features and issues. Users whose contributions contain untrusted outbound links will be required to perform additional follow-up actions to verify their identity.

## Pulpcore 3.6 is Generally Available

This release contains a number of major enhancements:

* Introduction of SSL to ensure the security of Pulp requests.
* Update of the REST API schema from OpenAPI v2 to OpenAPI v3.
* Addition of significant Role Based Access Control (RBAC) machinery plugin writers to enable RBAC in their plugins.  
* Remotes can be associated with a Repository and automatically used when syncing the Repository.
* Improvements to import functionality to better handle the import of split files.

For more information, see the [release announcement](https://pulpproject.org/2020/08/13/pulp-3.6-is-generally-available/).

A [Pulp File plugin 1.2](https://pulp-file.readthedocs.io/en/latest/changes.html#id1) release accompanied the Pulp 3.6 release, and a flurry of other plugin compatibility releases followed.

## Python Plugin Updates

Over the last month, there have been two beta updates to the Pulp Python plugin - [pulp_python 3.0.0b10](https://pulpproject.org/2020/08/06/pulp-python-3.0.0b10-is-generally-available/) and [pulp_python 3.0.0b11](https://www.redhat.com/archives/pulp-list/2020-August/msg00018.html). For the most part, these betas were compatibility releases with Pulpcore 3.5 and 3.6 respectively.

Gerrod Ubben, a Pulp intern, has spent the last number of months working with the Pulp Python team to give the Pulp Python content plugin some much needed TLC. This work involved contributing to the Python Bandersnatch community. For an overview of the improvements coming in an upcoming release of the Pulp Python plugin, watch Gerrod's demo:

<iframe width="560" height="315" src="https://www.youtube.com/embed/dEgyufQLuFA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Pulp RPM Plugin 3.6.1 is Generally Available

This month, Pulp RPM 3.6 and an update 3.6.1 were released. As well as a number of bug fixes, this release includes the following features and enhancements:

* Up to 40% performance improvement around publishing. [#7289](https://pulp.plan.io/issues/7289)
* Added the ability for users to import and export distribution trees. [#6739](https://pulp.plan.io/issues/6739)
* Added import/export support for remaining advisory-related entities. [#6815](https://pulp.plan.io/issues/6815)
* Added the ability to associate a Remote with a Repository and automatically use when syncing the Repository. [#7159](https://pulp.plan.io/issues/7159)

For more information, see the [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05865.html).

## Pulp Container 2.0.0 is Generally Available

The central feature of this release includes new REST APIs to handle Docker and Podman clients push functionality. [#5027](https://pulp.plan.io/issues/5027)

This release also includes the following features:

* A new `ContainerPushRepository` type has been added to support writeable container registries. [#6825](https://pulp.plan.io/issues/6825)
* Push functionality has been restricted to Pulp admin users. [#6976](https://pulp.plan.io/issues/6976)
* A new `ContentRedirectContentGuard` type has been added to support token authentication for Pulp Container. [#6894](https://pulp.plan.io/issues/6894)
* Schema conversion handling has been added for S3 storage backends. [#6824](https://pulp.plan.io/issues/6824)
* The ability to exclude tags during syncing has been added to allow users to skip tags they don't want to sync. This can save both time and disk space. [#6922](https://pulp.plan.io/issues/6922)
* Clean-up functionality has been added so that when a push repository is deleted, the associated distribution is also deleted. [#7172](https://pulp.plan.io/issues/7172)

For more information, see the [release announcement](https://pulpproject.org/2020/08/18/pulp-container-2.0-is-generally-available/).

## Pulp Ansible 0.2.0 is Generally Available

In this release, the following functionality has been added:

* Added the ability to associate a Remote with a Repository and automatically use when syncing the Repository. [#7194](https://pulp.plan.io/issues/7194)

For more information, see the [release announcement](https://pulpproject.org/2020/08/19/pulp-ansible-0.2.0-is-generally-available/)


## Pulp 2-to-3 Migration Plugin 0.3.0 is Generally Available

This release includes the following features:

* A `GroupProgressReport` entry has been added so that users can track the progress of the migration. [#6769](https://pulp.plan.io/issues/6769)
* Compatibility changes were added to match the recent release of Pulp Container 2.0 plugin. [#7365](https://pulp.plan.io/issues/7365)

For more information, see the [release announcement](https://pulpproject.org/2020/08/26/pulp-2-to-3-migration-0.3.0-is-available/)

## Pulp Article on opensource.com

If this newsletter isn't enough reading for you, read the latest [article](https://opensource.com/article/20/8/manage-repositories-pulp) about Pulp on [opensource.com](www.opensource.com).

## Get Involved

The Pulp team is happy to answer any questions or receive any feedback sent to pulp-list@redhat.com.

You are also welcome to connect with the team to discuss general Pulp topics on the #pulp channel on Freenode IRC.

The Pulp team also hold regular open meetings:

* **Bug Triage** - every Tuesday and Friday 10:30 ET (either EST or EDT) in #pulp-meeting on Freenode (IRC). Come and
participate in real-time. See the [triage process](https://docs.pulpproject.org/bugs-features.html#triage) for
more details. You can also read through the [triage archives](https://logs.pulpproject.org/pulp-meeting/)
* **Open Floor** - every Tuesday and Friday immediately after Bug Triage in #pulp-meeting on Freenode
(IRC). It's a time for developer discussion, feedback, and decisions on code/issues/PRs/process
relating to pulpcore or plugins. To particiapte, put a topic on
[the agenda](https://hackmd.io/@pulp/triage/edit). Minutes will be sent to the pulp-dev mailing
list.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-08-5-pulpcon-date-announcement.md
`````markdown
---
date: 2020-08-05T20:55:50+00:00
title: PulpCon 2020 - save the date and vote for topics!
author: Tanya Tereshchenko
tags:
  - announcement
---
<!-- more -->
We are glad to announce that PulpCon will take place during the week of September 14th.
The sessions will be held over 5 half-days, Mon-Fri mornings in EST and afternoons in CET.

Currently, we are collecting potential topics to discuss and voting on them. Please add topics you are interested in to [this doc](https://hackmd.io/@pulp/pulpcon2020/) or add your +1 to the existing ones.

If you would like to present your own work related to Pulp, your own plugin or any tooling around Pulp, feel free to add your name and project as a topic. We'll be happy to hear about your experience and allocate a slot for you in the schedule.

The topic submission and voting will close on August 15, 2020.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-09-04-pulp-winter-plan.md
`````markdown
---
date: 2020-09-04T20:55:50+00:00
title: Pulp Roadmap Update
author: Melanie Corr
tags:
  - planning
---
<!-- more -->
Over the coming months, the Pulp team will focus on the following areas. As with all plans, these are subject to change. Many of the items in this plan factor into [Katello](https://community.theforeman.org/t/new-katello-release-schedule-pulp-3-migration-update/19884?u=mcorr) and [Galaxy NG](https://github.com/ansible/galaxy_ng/blob/master/ROADMAP.rst) plans.  

Further updates will be announced on Pulp blog and mailing lists. If you have any questions or feedback, feel free to write to pulp-list@redhat.com

## Pulpcore

* Implementing Role Based Access Control (RBAC)
* Working towards making Pulp multi-user safe
* Working towards making Pulp FIPS-compliant
* Improving import/export functionality

## Pulp Installer

* Pulp in a single CentOS 8 container
* SELinux - installer integration & EL8 Policy Fixes
* Cluster installations
* Pulp operator

## Pulp 2-to-3 Migration Plugin

* Migrating in parallel when a simplified migration plan is selected
* Performance testing for Pulp Container and File migration
* Test writing

## Pulp File Plugin

* Implementing Role Based Access Control (RBAC)

## Pulp RPM Plugin

* Implementing Role Based Access Control (RBAC)
* Adding the ability to set and update `repo_gpgcheck` `gpg_check` options [#6926](https://pulp.plan.io/issues/6926)

## Pulp Ansible & Galaxy_NG Plugin

* Finalizing features to demo at Ansiblefest
* Further planning

## Pulp Container Plugin

* Implementing Role Based Access Control (RBAC)
* Finalizing OCI Image Builder
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-09-14-debian-2.6.1-ga.md
`````markdown
---
date: 2020-09-14T20:55:50+00:00
title: Pulp Debian plugin 2.6.1
author: Melanie Corr
tags:
  - release
---
<!-- more -->
Recently, the Pulp 3 Debian plugin 2.6.1 was released. After eight beta versions, this is the first GA release.

Let's take a look at the Debian plugin's main features:

* Ability to synchronize all or a subset of an upstream repository
* Support for the manual upload of files to a `pulp_deb` repository
* A public GPG key can be used to verify upstream `Release` files
* Simple and structured publishing options
* Use a signing service to sign your simple and/or structured publications
* Verbatim publishing to recreate the synchronized subset of an upstream repository exactly
* Support for various Debian content types. Each content type has its own [REST API endpoint](https://docs.pulpproject.org/pulp_deb/restapi.html)

The Pulp 3 Debian [documentation](https://docs.pulpproject.org/pulp_deb/) is robust and contains example workflows.

## Workflow

There are two options in the workflow:
1. Create a remote and repository and then synchronize the Debian content from the remote to the repository.
2. Create a repository and manually upload a file to that repository.

After this, you can create a publication and a distribution so that your content is consumable by a package manager.

## Install

You can find the Debian plugin on [PyPI](https://pypi.org/project/pulp-deb/2.6.1/).

Check out the [installation instructions](https://docs.pulpproject.org/pulp_deb/installation.html).

You can find all the bindings [here](https://docs.pulpproject.org/pulp_deb/bindings.html).

Any questions, comments, or feedback, please write to `pulp-list@redhat.com` or join us on the #pulp channel on Freenode IRC.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-09-20-pulp-3.7.0-is-generally-available.md
`````markdown
---
date: 2020-09-20T20:55:50+00:00
title: Pulp 3.7.0 is Generally Available!
author: Melanie Corr
tags:
  - release
---
<!-- more -->
The Pulp team are pleased to announce the release of Pulp 3.7.0!


## Export enhancements

There have been a number of enhancements to the export process:

* A progress report has been added to export tasks. [#6541](https://pulp.plan.io/issues/6541)

* Improved handling of failed exports. Previously, when an export failed, the export's tarball was left on the filesystem. This has now been cleaned up so that nothing remains and there is a clean slate. [#7246](https://pulp.plan.io/issues/7246)

* A table of contents information (`TOC_info`) file has been added to point to the location of the TOC file during the export process. [#7221](https://pulp.plan.io/issues/7221)

## Managing checksums

`ALLOWED_CONTENT_CHECKSUMS` have been introduced so that users can specify and limit unwanted checksums in their environment. Note that plugins might not yet support `ALLOWED_CONTENT_CHECKSUMS` and that users should check plugin's release notes/docs for support before setting `ALLOWED_CONTENT_CHECKSUMS`. [#5216](https://pulp.plan.io/issues/5216)

## Enabling automatic file deletion for Filefield

Pulp has added [django-cleanup](https://pypi.org/project/django-cleanup/) to automatically cleanup files for models with `FileFields`. This also applies to models in plugins. Plugin writers can decorate their models with `@cleanup.ignore` to disable this. [#7316](https://pulp.plan.io/issues/7316)

## Managing the Installation of Optional Dependences

To make it easier to install optional dependencies such as S3 and Promethious support, as well as some test dependencies, an [**extras_require**](https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies) argument has been added. [#6844](https://pulp.plan.io/issues/6844)

## REST API Bug Fixes

For a full list of bug fixes, see the [bug fixes](https://docs.pulpproject.org/pulpcore/changes.html#bugfixes) section of the changelog.

## Plugin API Documentation

There have been a number of enhancements to the plugin API documentation:

* An [example](https://docs.pulpproject.org/pulpcore/plugins/plugin-writer/concepts/index.html#validating-models) has been added to show how to use a serializer to create validated objects.
* Information about [serializers and OpenAPI schema](https://docs.pulpproject.org/pulpcore/plugins/reference/how-plugins-work.html?highlight=urlfield#serializer-and-openapi-schema) and constraints in this area have been added.
*  A [Plugin API stability and deprecation policy](https://docs.pulpproject.org/pulpcore/plugins/plugin-writer/concepts/index.html?highlight=plugin%20api%20stability%20deprecation%20policy#plugin-api-stability-and-deprecation-policy) has been added.
* An [Overriding the Reverse Proxy Route Configuration](https://docs.pulpproject.org/pulpcore/plugins/plugin-writer/concepts/index.html#overriding-the-reverse-proxy-route-configuration) section has been added.
* The [custom installation tasks](https://docs.pulpproject.org/pulpcore/plugins/plugin-writer/concepts/index.html#custom-installation-tasks) section has been updated to reflect that plugin writers can contribute their custom installation needs directly to the installer.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-09-28-pulp-3-cli-poc-call-for-feedback.md
`````markdown
---
date: 2020-09-28T20:55:50+00:00
title: Pulp 3 CLI - Call for Feedback
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
On the `pulp-dev` mailing list, we have [discussed](https://www.mail-archive.com/pulp-dev@redhat.com/msg04004.html) how the lack of a CLI might be a limitation or potential blocker to using Pulp 3. In our recent community survey, many community members expressed the need for a Pulp 3 CLI. At PulpCon 2020, there was a session dedicated to a Pulp 3 CLI discussion. In that session, there was a demo the initial PoC for the Pulp 3 CLI. At this point, we need your help to progress with the development of a Pulp 3 CLI.

<script id="asciicast-vu3qzlzmpDEFV5SCz2WDO1psb" src="https://asciinema.org/a/vu3qzlzmpDEFV5SCz2WDO1psb.js" async></script>

We want to build a Pulp 3 CLI to suit the needs and requirements of the wider Pulp community. To do this, we need your feedback, thoughts, and suggestions on what we have put together so far. We want to avoid developing features without knowing if it will help you and your use cases.

If you're willing to install and test the current Pulp 3 CLI PoC and let us know your feedback, for example, whether this would suit your deployment or whether there are specific gaps or pitfalls etc, this would greatly help shape the future direction of the Pulp 3 CLI development. For anyone who participates and provides feedback on the Pulp 3 CLI PoC, we would be very happy to ship some Pulp SWAG as a thank you!

## How to Help

To install the Pulp 3 CLI, complete the following instructions. If you spot any bugs or would like to request certain features, please [submit an issue](https://pulp.plan.io/projects/pulp-cli/issues). Please submit your [feedback](https://forms.gle/Qc3TDDuL6zeART649) and SWAG information in this form.

The source code for the Pulp CLI PoC is [here](https://github.com/pulp/pulp-cli).

## Install the Pulp 3 CLI

Ensure that you are running Python 3.6 or higher and have the [virtual environment wrapper](https://pypi.org/project/virtualenvwrapper/).

Ensure that you are running Pulp 3.6 or higher.

To install the Pulp 3 CLI PoC, complete the following steps.

Clone the pulp-cli git repository:

```
git clone https://github.com/pulp/pulp-cli.git
```

Create a virtual environment:

```
mkvirtualenv pulp-cli
```

Install the CLI in edit mode in that virtual environment:

```
pip install -e .
```

At this point, you should be able to use the `pulp` command.

## Pulp 3 CLI PoC at PulpCon

If you're interested, you can watch the discussion of the Pulp CLI at PulpCon 2020 for more information:

<iframe width="560" height="315" src="https://www.youtube.com/embed/5bovhlosrPA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-09-30-pulp-community-update-september-2020.md
`````markdown
---
date: 2020-09-30T20:55:50+00:00
title: Pulp Community Update (September 2020)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
This month was extra eventful for Pulp, with the first ever virtual PulpCon, the release of Pulp 3.7, the first set of Pulpcore SELinux policies, the first GA release of the Pulp 3 Debian plugin, and a call for feedback on the Pulp 3 CLI PoC.

_If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`._


## Pulp winter roadmap update

This month, we published an outline about where the core Pulp developers are focusing their attention over the next few months. You can take a look at the Pulp Roadmap [here](https://pulpproject.org/2020/09/04/pulp-winter-plan/).

## Pulp needs your help! A Pulp 3 CLI PoC is here!

The lack of a Pulp 3 CLI has been a pain point for Pulp 3 users and a potential blocker for Pulp 2 users looking to migrate to Pulp 3.
At PulpCon, we had a discussion and demo of the first [Pulp 3 CLI PoC](https://youtu.be/5bovhlosrPA). We want to gather as much feedback as possible to make the Pulp 3 CLI a robust and useful  addition to using Pulp 3. Please [download and evaluate](https://pulpproject.org/2020/09/28/pulp-3-cli-poc-call-for-feedback/), and let us know your thoughts!

## First release of the Pulp 3 Debian plugin

After a long beta phase, the first Pulp 3 Debian plugin went GA! You can read all about it here, and if you don't like reading, you can listen to Quirin Pamp talk about it at PulpCon:

<iframe width="560" height="315" src="https://www.youtube.com/embed/dXFCiDGJqxY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Pulp 3.7 has been released!

Over the past month, z-streams [Pulp 3.6.1, 3.6.2](https://www.mail-archive.com/pulp-list@redhat.com/msg05906.html), [3.6.3](https://www.mail-archive.com/pulp-list@redhat.com/msg05911.html), and [3.6.4](https://www.mail-archive.com/pulp-list@redhat.com/msg05926.html) were released.

Pulp 3.7 was released, with a number of enhancements to the export workflow, as well as improvements to installing optional dependencies, and much more. For more information, see [Pulp 3.7](https://pulpproject.org/2020/09/20/pulp-3.7.0-is-generally-available/) release announcement. There was a later z-stream release of [3.7.1](https://www.mail-archive.com/pulp-list@redhat.com/msg05950.html).

As part of the Pulp 3.7 release, there were a number of plugin-compatibility releases:

* [Pulp Ansible 0.4.0](https://www.mail-archive.com/pulp-list@redhat.com/msg05929.html)
* [Pulp Container 2.1.0](https://www.mail-archive.com/pulp-list@redhat.com/msg05930.html)
* [Pulp RPM 3.7.0](https://www.mail-archive.com/pulp-list@redhat.com/msg05931.html)
* [Pulp Certguard 1.0.3](https://www.mail-archive.com/pulp-list@redhat.com/msg05932.html)
* [Pulp Debian 2.7.0](https://www.mail-archive.com/pulp-list@redhat.com/msg05939.html)

## PulpCon 2020

For the Pulp community's first online PulpCon, the diversity of speakers and topics was matched only by the diversity of head accessories on display. Who knew that the Pulp community possessed so many hats, wigs, and helmets! A brave person might ask _why_ and _how_? If you are wondering how you can justify the purchase of something outlandish to wear on your head over the next year, tell yourself that you're just getting ready for PulpCon 2021!

The virtual format allowed greater participation from the wider Pulp community, who popped in and out of the sessions and were active in their contributions. Over the next year, we are looking for ways to build a more open and accessible structure into our regular meetings. If you have any ideas or suggestions for this or questions about any of the sessions, please write to us at `pulp-list@redhat.com`. Thank you to everyone who presented, attended, and contributed to the discussions!

All of the PulpCon sessions are available on YouTube. The [full agenda and meeting notes](https://hackmd.io/@pulp/pulpcon2020_schedule) are still online for your perusal.

<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PLwm8_O6oKSS1G6XPS8n0udXd8UD9hqdK5" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## The first release of Pulpcore SELinux

Last but not least, the first release of set of SELinux policies for Pulp 3 dropped this month. Check out the [release announcement](https://www.mail-archive.com/pulp-list@redhat.com/msg05936.html) for more information!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-10-05-announcing-pulp-community-manager.md
`````markdown
---
date: 2020-10-05T20:55:50+00:00
title: Pulp has a Community Manager!
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
Hello,

You might have seen my name popping up on the Pulp blog or on the mailing list. I want to take some time to introduce myself.

Since April, I have been helping out with both the Pulp and Foreman communities. Previous to this, Brian Bouterse and Ina Panova had led all Pulp community related activities on top of their engineering work. I’ve been working with Brian and Ina to take over all community-related aspects of Pulp so that they can focus full time on their engineering duties.

In the Foreman community, I have some set tasks like running community demos, organizing virtual events, putting together the community newsletter, as well as unblocking community members and making sure that people get answers to their questions on a daily basis. For both the Foreman and Pulp communities, I am particularly interested in lowering the barrier of entry for users.

Over the past number of years, Pulp community efforts focused on enabling community contributions. Recently, this has manifested in a robust plugin API and plugin template so that community members have a clear path to making contributions and extending Pulp to meet their needs. At PulpCon 2020, there were several sessions that focused on the community and how we can grow as a community and increase community interaction. For the foreseeable future, the Pulp community strategy will focus on the user experience and making Pulp easier to use and to interact with, with the overall aim to grow the number of Pulp users.

Since I started with the Pulp community, I’ve been working on building out the web content on this site so that new and existing Pulp users can find the information they need. I’m committed to making the Pulp blog an up-to-date source of information related to Pulp. On this blog, I will endeavour to increase transparency and provide clear information related to Pulp releases and roadmaps, as well as requests for community feedback for different ideas and proof of concepts that the Pulp team are working on. I’ve also started monthly summaries of all releases and discussions going on in the Pulp community. I’ll be paying attention to ways of enhancing the channels of communication so that people can find us and get the information they need. If you have any ideas about how I could extend this, let me know!

During the Pulp team’s first ever [virtual PulpCon](https://www.youtube.com/playlist?list=PLwm8_O6oKSS1G6XPS8n0udXd8UD9hqdK5), I was delighted to meet community members who dropped by to say hello and tell the Pulp team about their experiences using Pulp. While a 2020 of travel restrictions has meant that we have not had the opportunity to meet in person, PulpCon 2020 showed us how there are advantages to hosting open meetings in a virtual space where community members can become part of the conversation without leaving their homes.

Brian and Ina, as well as the wider Pulp team, have been very generous with their time and knowledge as I get up to speed with Pulp as a project as well as the needs and concerns of the Pulp community. I would like to thank the entire Pulp team for their patience and generosity over the last few months.

The team is always hoping to hear from you, either on the `pulp-list@redhat.com` or on the `#pulp` channel on Freenode IRC.

Feel free to reach out to and say hi  at `mcorr` on Freenode IRC. I am based in Cork, Ireland, which is in the GMT timezone.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-10-20-3.8.0-release-announcement.md
`````markdown
---
date: 2020-10-20T20:55:50+00:00
title: Pulp 3.8.0 is Generally Available!
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
The Pulp team are pleased to announce the release of Pulp 3.8.0!

## Updates to Django settings

* The Django `admin` site URL is now configurable using the new `ADMIN_SITE_URL` settings parameter [7637](https://pulp.plan.io/issues/7637).

* As a follow up to [#7179](https://pulp.plan.io/issues/7179), which provided a default `DJANGO_SETTINGS_MODULE` variable, in this release, the default `DJANGO_SETTINGS_MODULE` variable is now set everywhere. This simplifies configuration because the **systemd** service no longer has to set this value [#7720](https://pulp.plan.io/issues/7720).

## Allowed Content Checksums Validation

In the previous release `ALLOWED_CONTENT_CHECKSUMS` variable was introduced so that users can specify and limit unwanted checksums in their environment.

In this release, validation has been added so that if a user has Artifacts in their database and adds checksums to `ALLOWED_CONTENT_CHECKSUMS` that do not match the existing Artifacts, the error `ImproperlyConfigured` is thrown [#7487](https://pulp.plan.io/issues/7487).

## Dynaconf Version Requirement

Earlier versions of dynaconf had some known issues. In this release, the required dynaconf version is 3.1.2. [#7682](https://pulp.plan.io/issues/7682).

## Installer Updates

In this release, there are a number of enhancements to pulp_installer:

* pulp_installer now compiles and installs the **pulpcore-selinux** policy on CentOS/RHEL/Fedora [#7574](https://pulp.plan.io/issues/7574).
* When installing from distro packages (`pulp_install_source==packages`), from a repo (`pulp_pkg_repo`), and upgrading them (`pulp_pkg_upgrade_all==true`), pulp_installer now upgrades all the packages from the repo. This addresses any incorrect dependency declarations in the repo, which might cause pulp_installer to fail on `collectstatic`.[#7646](https://pulp.plan.io/issues/7646).
* Users can customize webserver ports that Pulp listen on via `pulp_webserver_http_port` (defaults to 80) and `pulp_webserver_https_port` (defaults to 443) [#7662](https://pulp.plan.io/issues/7662).
* pulp_installer now uses the new libexec wrappers from the RPM packages for rq and gunicorn to run them in the correct SELinux context [#7667](https://pulp.plan.io/issues/7667).

### Installer Deprecations and Removals

This release contains the following changes to the pulp_installer:

* pulp_installer no longer sets SELinux to enabled, permissive and enforcing (casually referred to as "disabled") on CentOS/RHEL/Fedora.
  [#7573](https://pulp.plan.io/issues/7573)
* pulp_installer no longer supports installing from older RPM packages that lack the wrapper scripts `/usr/libexec/pulpcore/{rq,gunicorn}`.
  [#7667](https://pulp.plan.io/issues/7667)


## Plugin_template Update

Plugin template now contains a `check-manifest` script that is run in Travis and checks if all expected files are included in the MANIFEST.in [#7656]( https://pulp.plan.io/issues/7656).

## Bug Fixes

* When a task was cancelled, it was logging as a failed task [#4559](https://pulp.plan.io/issues/4559)
* When a task was cancelled, the status of all incomplete "progress reports" was remaining in an in-progress state [#4921](https://pulp.plan.io/issues/4921)
* A fix has been added to handle duplicate content during synchronization and migration from Pulp 2 to Pulp 3 [#7147](https://pulp.plan.io/issues/7147)
* Content streaming has been enabled for Distributions that use Repository Versions instead of Publications [#7568](https://pulp.plan.io/issues/7568)
* The `urlize_quoted_links` filter in Django Rest Framework was dropped because Django's `urlize` filter does the same action [#7634](https://pulp.plan.io/issues/7634)


## Doc Improvements

* Updated examples of auto-distribution  [#5247](https://pulp.plan.io/issues/5247).
* Improved testing section in Pulp contributor doc [#7475](https://pulp.plan.io/issues/7475).
* Fix an erroneous API endpoint in the "upload and publish" workflow documentation [#7655](https://pulp.plan.io/issues/7655).
* Documented that Pulp doesn't support backporting migrations [#7657](https://pulp.plan.io/issues/7657).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-11-03-pulp-community-update-october-2020.md
`````markdown
---
date: 2020-11-03T20:55:50+00:00
title: Pulp Community Update (October 2020)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
_If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`._


## Pulp 3 CLI PoC

A reminder that there's an open call for feedback on the Pulp 3 CLI proof of concept. As a thank you, we will gladly send some Pulp SWAG to anyone who [downloads and evaluates](https://pulpproject.org/2020/09/28/pulp-3-cli-poc-call-for-feedback/) the Pulp 3 CLI. Let us know your thoughts!

## Pulp 3.8 is Generally Available!

In Pulp 3.8.0, there were a number of updates to pulpcore, pulp_installer, and the plugin_template. You can read a summary of the main changes in the [release announcement](https://pulpproject.org/2020/10/20/3.8.0-release-announcement/).

Pulp 3.8.1 was released to add a fix for a bug that could [silently delete an Artifact from the filesystem](https://docs.pulpproject.org/pulpcore/en/3.8.1/changes.html#id1).

If any repositories were affected by this, please use the [repo version repair](https://docs.pulpproject.org/pulpcore/en/3.8.1/workflows/repairing-repository-versions.html?highlight=repo%20version%20repair) feature.

## Pulp 3.7.3 is Generally Available

This release added a critical update to Pulp 3.7 to fix an issue that could [silently delete an Artifact from the filesystem](https://docs.pulpproject.org/pulpcore/en/3.7/changes.html#id1).

## Pulp 2-to-3 Migration plugin 0.5 is Generally Available

In the past month, 0.5.0 and 0.5.1 releases of the Pulp 2-to-3 migration plugin have been made available. These releases included a number of significant performance improvements. You can read details in the [changelog](https://pulp-2to3-migration.readthedocs.io/en/0.5/changes.html).

The 0.5.1 release includes a fix for an [issue](https://pulp-2to3-migration.readthedocs.io/en/latest/changes.html#id1) related to migration of RPM content. Prior to this release, the RPM content metadata was migrated incorrectly. Users that have migrated RPM content using pulp-2to3-migration prior to 0.5.1 will need to remove the migrated RPM content from their Pulp 3 system and run the migration again using pulp-2to3-migration 0.5.1.


## Pulp Ansible 0.5.0 is Generally Available

After an earlier update to [0.4.2](https://www.redhat.com/archives/pulp-list/2020-October/msg00019.html) this month, Pulp Ansible 0.5.0 was released. This release contains a number of bug fixes, as well as adding a new /pulp/api/v3/ansible/copy/ endpoint allowing content to be copied from one AnsibleRepository version to a destination `AnsibleRepository`. For more information, see the full [changelog](https://docs.pulpproject.org/pulp_ansible/en/master/nightly/changes.html#id1).

## Pulp 2 updates

### Pulp 2.21.4 is Generally Available

This release includes bug fixes for Debian Support, Docker Support, Pulp, and RPM Support.
For more information, see the [release announcement](https://pulpproject.org/2020/10/31/pulp-2.4.1-is-generally-available/).

A reminder that Pulp 2 is in [maintenance mode](https://pulpproject.org/2020/06/15/pulp-2-enters-maintenance-mode/). After almost one year of general availability, Pulp 3 is more robust and stable than ever. If you haven't started planning your [migration](https://pulpproject.org/migrate-to-pulp-3/), there's never been a better time.

### pulp-docker 3.2.7 and python-nectar 1.6.2   

Because of an issue with syncing large docker repos from [registry.redhat.io](registry.redhat.io), there was an out-of-band release of pulp-docker 3.2.7 and python-nectar 1.6.2. You can download the updated repositories from [repos.fedorapeople.org/repos/pulp/pulp/stable/2.21/](https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.21/).

## Pulplift has been merged into pulp_installer

During the installer discussions at PulpCon 2020, one of the conclusions was to consolidate the pulplift repository as part of the pulp_installer repository. As a result, pulplift has been archived. This means, you can still use your already provisioned boxes in pulplift, but they will fall out of maintenance shortly, and we encourage you to redeploy all you sandbox and source installations within pulp_installer soon.

For more information, see [Matthias's announcement](https://www.redhat.com/archives/pulp-list/2020-October/msg00040.html).

## opensource.com's Pulp Debian article

As a follow-up to last month's Pulp Debian plugin release, Maximilian Kolb has an article on [opensource.com](https://opensource.com/) entitled [Manage content using Pulp Debian](https://opensource.com/article/20/10/pulp-debian).

## Pulp open floor meetings & communication channels

Every Tuesday and Friday 10:30 ET (either EST or EDT), there is an open meeting in #pulp-meeting on Freenode (IRC).
It's a time for developer discussion, feedback, and decisions on code/issues/PRs/process relating to pulpcore or plugins.
If you have any questions, comments, or feedback relating to Pulp, feel free to put a topic on [the agenda](https://hackmd.io/@pulp/triage/edit) and come along and discuss it with us there.

If you're a Matrix user, you can find a list of Pulp channels [here](https://riot.im/app/#/group/+pulp:matrix.org).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-11-25-pulp-community-survey-results-2020.md
`````markdown
---
date: 2020-11-25T20:55:50+00:00
title: Pulp Community Survey Results 2020
author: Melanie Corr
tags:
  - survey
---
<!-- more -->
The Pulp community survey was open to submissions during August and September of 2020.
In the survey, we looked at the release of Pulp 3, as well as those who continue to use Pulp 2.

In total, **20** Pulp users participated in the survey.

## General Pulp Usage

Of the respondents, there was an even 50/50 split of those using Pulp 2 and Pulp 3. If respondents were using Pulp 2, they were asked some additional migration-related questions, while Pulp 3 users were asked specifically about their Pulp 3 experience.

At the beginning of the survey, participants were asked a number of general Pulp questions before we delved into the different versions.


![Which version of Pulp is your main deployment?](/images/communitysurvey/2020/pulp2vpulp3.png)

![Which operating system have you installed Pulp on?](/images/communitysurvey/2020/operating-system-pulp.png)


### Workflows

* Mirroring and syncing of repos to promote through the different stages of the content lifecycle environment
* Distributing custom content from different sources throughout an organization
* Content Management with Katello.

### Where does your content come from and how do you get it into Pulp (e.g. sync/upload/etc)?

* Synced content from repositories.
* Mirroring repositories.
* The additional respondents uploaded content from internal systems.

### Do you horizontally scale (cluster) Pulp and if so, which components?

The overwhelming majority answered no to this question.
Of the few that answered yes, said only for HA for a fail-over partner, clustering for resilience not performance.

### How big is your /var/lib/pulp directory?

The `/var/lib/pulp `directory ranged from 250 GB to 2.5 TB in size.

### What type of storage do you use for /var/lib/pulp? For example, NFS.

There were somewhat diverse answers to this question:

* NFS
* XFS
* SAN
* Ext4 FS
* Virtual disk with LVM

![](/images/communitysurvey/2020/upgrade-frequency.png)


## Pulp 2 users

Those whose primary deployment is Pulp 2 were asked a number of Pulp 2-specific and Pulp 2-to-3 migration related questions.

### Pulp 2 plugins


Of the Pulp 2 respondents:
* 100% use the Pulp 2 RPM plugin.
* 60% of respondents use more than one plugin.
* As well as the RPM plugin, the most popular plugin is the Python plugin, with 30% of respondents using it in addition to RPM.

Pulp 2 users reported also using the Debian and Docker plugins.


### Do you rely on the Pulp 2 CLI or API? If so, can you explain why?

80% of Pulp 2 respondents reported that they use the Pulp 2 CLI exclusively and depend on it for daily tasks. Some users wrote that they script against it and find it essential.

10% said that they use both the CLI and API.

10% said that they use only the Pulp 2 API.

![Pulp 2 is now in maintenance mode. When do you plan to upgrade to Pulp 3?](/images/communitysurvey/2020/migration-plans.png)


![To what extent have you tried Pulp 3?](/images/communitysurvey/2020/experience-with-pulp3.png)

### Are there any other obstacles or problems that would prevent you from upgrading to Pulp 3 soon, for example, the lack of a plugin or particular feature?

There were many reasons cited as challenges to migrating from Pulp 2 to Pulp 3, but most responses were not related to the actual process of migrating.
The largest grouping, which included 30% of users, reported that the lack of a Pulp 3 CLI was a blocker for them.

Other than the CLI, the following reasons were cited:
* The lack of a production-ready Pulp 3 container image.
* A perception that there was a much broader skillset required to use Pulp 3, with references in the documentation, for example, to Ansible and Python.
* A lack of a Puppet plugin.
* On-premise installation via RPMs because of security restrictions.
* Migrating required the complete rewrite of internal tooling.


### Reason for not planning to migrate to Pulp 3

100% answered the lack of a Pulp 3 CLI, with an additional response, as above, that the lack of on-premise RPMs was also a blocker.

![Do you have enough information to migrate from Pulp 2 to Pulp 3?](/images/communitysurvey/2020/migration-information.png)


Of the 33% who reported no, the following reasons were cited:

* No CLI
* Can the migration work with Pulp 3 in a container?


### Have you tried the Pulp 2 to 3 Migration plugin?

* 56% reported that they had yet to try the migration plugin.
* 20% reported that they plan to do "clean-slate" installations of Pulp 3.
* Additional respondents reported having done provisional testing and are waiting for additional features. These features were not named.

The [migration plugin](https://pulpproject.org/migrate-to-pulp-3/) is still in a beta phase, so these results are not surprising.

It'll be interesting to measure this against the results of next year's survey.

## Pulp 3 users

Those who selected that their primary deployment was Pulp 3 were asked specific questions about their Pulp 3 experience.

Of the Pulp 3 users, none reported migrating from Pulp 2 to Pulp 3. All deployments were fresh Pulp 3 installations.
None reported using an Amazon S3 storage backend for their Pulp 3 deployment, with one user reporting that they plan to move to S3 soon.

![How did you install Pulp 3?](/images/communitysurvey/2020/pulp3-installation-method.png)

![Which version of Pulp 3 are you using?](/images/communitysurvey/2020/pulp3version.png)

The latest version of Pulp 3 at that time was 3.5, with 3.6 being released during the weeks that the survey was open.


## Which Pulp 3 plugins do you use?

* 91% reported using the Pulp RPM plugin.
* Over half of Pulp 3 respondents use 3 or more plugins.
* Of the respondents who use only one plugin, they use only the RPM plugin.
* After RPM, the most popular plugins are File and Container plugins.

## Which plugin is Pulp missing and you would like to see developed?

All questions in the form were optional, and users did not widely respond to this question. One user replied that they were content with what is available.
The answers to this question were in single figures, with a small majority saying a Debian plugin, which is great because a Debian plugin is now available.

Other responses were as follows:

* StackStorm exchange
* An updated Pulp Python plugin
* A "working" Pulp Container plugin. A respondent reported problems with the Container plugin when used with a custom Docker image.

### Pulp 3 provides a plugin API and a plugin template that makes it easier to write plugins. Are you interested in writing a plugin?

* 81.8% reported no desire to write a plugin.
* 21.2 reported that they are interested.

Of the 21.2% that is interested in writing a plugin, the main obstacle to writing one was "time".

### Would any potential feature(s) make it easier for you to run and maintain Pulp?

50% cited a Pulp 3 CLI would make their Pulp 3 experience easier. Users reported having to write 1000s of lines of script just for basic Pulp 3 functionality.

Of the other responses, here are what Pulp users cited:

* Easier installation process
* A Stackstorm content pack for maintaining Pulp via StackStorm workflows
* An Ansible plugin (what this means is unclear)
* A web UI

![Do you need multiple users on your Pulp 3 installation?](/images/communitysurvey/2020/multi-users.png)

![Do you need to run Pulp 3 on Kubernetes or Openshift?](/images/communitysurvey/2020/kube-or-openshift.png)

![What existing identity management do you want to integrate with Pulp 3?](/images/communitysurvey/2020/pulp-idm.png)

### If a full deployment of Pulp in one container was available, would that be useful for you?

66% of respondents answered yes to this question.

### Is there another storage service backend that you want to use with Pulp 3? If so, which one?

The answers to this question were diverse:

* A Container data store.
* Azure blob storage
* NFS
* Ceph


### A note on need versus want in 2020

For some of the questions in the 2020 survey, "need" was used to ask questions about potential features. For example, do you need a web UI, do you need a Pulp 3 CLI.
In previous surveys, the word "want" was used. For example, do you want a web UI, do you want a Pulp 3 CLI.
As with many aspects of life, what one needs and what one wants can be very different things. This change of verbiage might have caused a sharp reversal on some answers between 2019 and 2020.
On discussing this issue with a data analyst, these types of questions might be best avoided altogether in future surveys. Surveys are most useful when measuring the lived experiences of the community.

![Do you need a Pulp 3 CLI for your environment?](/images/communitysurvey/2020/pulpcli-requirement.png)

![Do you need a Pulp 3 web UI for your environment?](/images/communitysurvey/2020/pulp-web-ui.png)

### If you answered Yes to the previous questions, please provide any information about the workflows that would improve with access to a CLI and/or Web UI.

* Sync external report, promote copies through dev->QA->prod life cycle.
* Updating/syncing current repositories
* Configuration, and quick status queries. It is not convenient to craft the queries with httpie, and the squeezer modules only cover a limited set of APIs.
* Integrating / triggering jobs via Ansible.

![Have you ever found it difficult to find the information you needed about a Pulp feature you were trying to use?](/images/communitysurvey/2020/finding-information.png)

### Feedback on difficulties with docs/information

From reviewing the answers, some of the users have not interacted recently with Pulp docs.
Although their feedback was accurate, things might have improved over the last year or so.

Some of the reasons cited were:

* Documentation very developer-focused
* Getting started was very hard
* API documentation vague in places
* Documentation difficult to find

![Have you contributed to Pulp?](/images/communitysurvey/2020/contributing-to-pulp.png)

![Interested in contributing to Pulp?](/images/communitysurvey/2020/interest-in-contributing.png)

A big thank to everyone who participated in the Pulp Community Survey this year!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2020/2020-11-27-pulp-community-update-november-2020.md
`````markdown
---
date: 2020-11-27T20:55:50+00:00
title: Pulp Community Update (November 2020)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
_If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`._


## Pulp Community Survey Results

This Autumn, we requested feedback from the Pulp community to learn what matters to you and how your Pulp experience has been. A summary of the survey results is [now available](/2020/11/25/pulp-community-survey-results-2020/). Even if there isn't a live survey, feedback is always welcome. Feel free to start a discussion any time over on `pulp-list@redhat.com`.

## Python project to manage Pulp repos: pulp_operations

Community member [Erik Whitesides](https://github.com/ewhitesides) shared [pulp_operations](https://github.com/ewhitesides/pulp_operations) - a Python project that you can use to help manage many aspects of Pulp repositories. Thank you, Erik!

## Pulp 3.9 Release Date Update

The preliminary release date for Pulp 3.9 was moved forward to December 7th to allow for the migration from Travis. GitHub Actions will be used for future Pulp releases.

## Plugin Updates

### Pulp RPM 3.8 is now Generally Available

As well as a number of bug fixes, this release adds new fields so that users can customize `gpgcheck` signature options in a publication.
For more information, check out the [changelog](https://pulp-rpm.readthedocs.io/en/latest/changes.html#id1).

### Pulp Ansible 0.5.2

This month, there have been two z-stream updates to the Pulp Ansible plugin.

These updates bring a number of bug fixes, which include providing better error messages.

For more information, see the [changelog](https://pulp-ansible.readthedocs.io/en/0.5.2/changes.html#id1)

Many of these changes factor into the [Ansible Galaxy_NG](https://github.com/ansible/galaxy_ng) project.

### Pulp Python 3.0.0's 12th Beta is Available!

We are edging closer to the release of the Pulp Python 3.0, and this beta release demonstrates some of the major features that Pulp Python users have to look forward to.

Here is some information from Daniel Alley in the release announcement:

* It is now possible to perform a mirror sync of all of PyPI, without specifying any packages up-front. As a complete clone of PyPI would take multiple terabytes of disk space, we recommend that this option be used in conjunction with "on_demand" syncing, and we have made this the default for the Python plugin, differentiating it from many other plugins.
* A basic PyPI-like JSON API for package metadata has been implemented. It should be considered a "tech preview" and does not currently provide the full set of metadata that PyPI does.

For more information, check out the [Pulp Python changelog](https://pulp-python.readthedocs.io/en/latest/changes.html).

## Katello Pulp 3 - Applicability Differences & Troubleshooting

If you're interested in following the progress of the Katello project and its migration from Pulp 2 to Pulp 3, you can watch a recent update here:

<iframe width="560" height="315" src="https://www.youtube.com/embed/qxJ4sPV3FVE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-01-13-pulp-python-3.0-release.md
`````markdown
---
date: 2021-01-13T20:55:50+00:00
title: Manage Your Python Content with the Pulp Python plugin
author: Melanie Corr
tags:
  - release
---
<!-- more -->
The long awaited, Pulp Python 3.0 has been released!

With this release, it is now possible to [mirror the whole of PyPI](https://docs.pulpproject.org/pulp_python/workflows/sync.html#creating-a-remote-to-sync-all-of-pypi) in just under one hour.

To celebrate this release, let's take a look at how the Pulp Python plugin can help you manage your Python content.

## Break the dependency on connectivity

Interacting with content on a platform like PyPI requires internet access. If PyPI or your own network connection drops for any reason, you lose access to the content you need. Your business might require restrictive downloading policies or an air-gapped environment. Using the Pulp Python plugin, you can mirror and manage an on-premise version of your Python content, and distribute the content you need throughout your organization.

## Manage all your content in one place

With Pulp, you are in full control of all the content your project depends on. If you develop in-house Python content and want to control and secure the distribution of that content, you can use Pulp to upload and distribute that content throughout your organization. If you also mirror public content from a platform like PyPI, you can distribute a blend of public and private content throughout your organization.  

## Never lose anything you need

Python packages that you rely on can disappear from a remote source. Losing access to the package version can cause dependency issues. When you manage content with Pulp, you have full control over the repository versions that your systems might depend upon.

## Manage dependencies

Dependencies for your software can change very often. Package compatibility issues can lead to breaking changes. While you might need to work through these problems in the development stage, if package-compatibility issues creep into your production environment, you might face unwanted downtime. Pulp ensures that you can curate your content to maintain a safe and stable production environment.

## Roll back whenever you need

Develop software safe in the knowledge that every time you add or remove content, Pulp creates an immutable repository version. If something doesn’t work out, you can roll back to the earlier version and continue, guaranteeing the safety and stability of your operation. Pulp maintains a record of all changes to help with troubleshooting and monitoring.

## Distribute and promote content with ease

Depending on your setup, content distribution can be laden with difficulties and require more than one tool. Pulp has been built with package distribution and promotion in mind. When the content that you’ve been developing is ready, you can easily distribute this content to a new environment for testing, staging and production.

## Try Pulp Python 3.0 now!

Pulp Python can be installed from [PyPI](https://pypi.org/project/pulp-python/3.0.0/) or [source](https://github.com/pulp/pulp_python/), click [here](https://docs.pulpproject.org/pulp_python/installation.html#) for installation instructions. Client bindings for [Python](https://pypi.org/project/pulp-python-client/3.0.0/) and [Ruby](https://rubygems.org/gems/pulp_python_client/versions/3.0.0) are also available.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-02-04-pulpcore-3.10-is-now-generally-available.md
`````markdown
---
date: 2021-02-04T20:55:50+00:00
title: Pulp 3.10 is now Generally Available!
author: Melanie Corr
tags:
  - release
---
<!-- more -->
We are happy to announce the release of Pulpcore 3.10!

Let’s take a look at some of the main features of this release. For a list of bug fixes, see the [changelog](https://docs.pulpproject.org/en/3.10/changes.html)

## Pre-validation import parameters

A synchronous **import-check** command has been added to validate a number of possible causes of import/export failure. This command does not do tests that require database access or long-running tasks such as verifying checksums. All parameters are optional. [#7549](https://pulp.plan.io/issues/7549)

For more information, check out the [Pulp Import and Export workflow](https://docs.pulpproject.org/pulpcore/en/3.10/workflows/import-export.html) documentation.

## Update to the default Pulp deployment layout

`MEDIA_ROOT` is now its own directory. This change has the advantage of limiting the file permissions and the SELinux file contexts in a shared Pulp 2 and Pulp 3 deployment. This also adds compatibility with the `django_extensions' unreferenced_files` command, which lists all files in `MEDIA_ROOT` that are not in the database.

Other paths are kept on the same absolute paths.

The settings and logging documentation has been updated to reflect these changes. [#7178](https://pulp.plan.io/issues/7178)

## New generic list endpoint

This release includes new endpoints that you can use to list all `Content`, `ContentGuards`, and `Repositories`. [#7204](https://pulp.plan.io/issues/7204)

## Update to the SigningService

A new `public_key` field has been added to the **SigningService**. This field preserves the value of the public key. A new `pubkey_fingerprint` field was introduced as well, which identifies the
public key. [#7700](https://pulp.plan.io/issues/7700)

As a result of this, the following deprecation notice has been added for this release:

`The public key needs to be specified during the new instance creation.
Other ways of providing the public key are considered deprecated as of the release.`


## New name filtering options

In previous versions, you could only query the API to search for exact names. With this release, new querying parameters have been added, such as `name__icontains`, `name__contains`, and `name__startswith`, to make searching for objects easier. [#8094](https://pulp.plan.io/issues/8094)


## New filter capability for user and group endpoints

You can now filter lists of users and groups.  [#7975](https://pulp.plan.io/issues/7975)

The users endpoint now has the following filter options:         

```
fields = {
     "username": ["exact", "iexact", "in", "contains", "icontains"],
     "first_name": ["exact", "iexact", "in", "contains", "icontains"],
     "last_name": ["exact", "iexact", "in", "contains", "icontains"],
     "email": ["exact", "iexact", "in", "contains", "icontains"],
     "is_active": ["exact"],
     "is_staff": ["exact"],
 }

```

The group endpoint now has the following filter options:

```
fields = {
         "id": ["exact", "in"],
         "name": ["exact", "iexact", "in", "contains", "icontains"],
     }
```


## Add your own labels to objects

With the addition of the `pulp_labels` field, you can create labels to add your own key/data for your resources in Pulp. You can also modify and remove these labels if needed.  

The `pulp_label_select` filter was added so that you can now filter by the labels you assign.

The `Label` and `LabelSerializer` have also been added to the Plugin API. [#8065](https://pulp.plan.io/issues/8065)


For more information, see the [Labels](https://docs.pulpproject.org/pulpcore/workflows/labels.html) documentation.

## New optional Header field added for aiohttp ClientSession

You now have the option to specify headers in aiohttp ClientSession. Headers must be
provided as a dictionary or a JSON field. You can set headers for an entire
client session or per request. [#8083](https://pulp.plan.io/issues/8083)

## RBAC

There have been a number of features added that relate to the ongoing effort to add role based access control (RBAC) functionality to Pulp.

* Users with view group permissions can view groups. [#8159](https://pulp.plan.io/issues/8159)
* Users with change group permissions can modify groups. [8160](https://pulp.plan.io/issues/8160)
* Authenticated users can create and view artifacts. [#8193](https://pulp.plan.io/issues/8193)
* Filtering has been added for access policies.  [#8189](https://pulp.plan.io/issues/8189)


### New AccessPolicy.customized field.

The `AccessPolicy.customized` field is a read-only field that defaults to `False`.
If `True`, this indicates that the user has modified the default access policy. [#8182](https://pulp.plan.io/issues/8182)

This will be useful for:

* Users to see how a system's RBAC has been modified
* Plugin writers who want to ship changes or bugfixes to default policies they previously shipped and don't want to overwrite a user's custom policy.

## Mandatory version attributes for plugins

Plugins are required to define a `version` attribute on their subclass of `PulpPluginAppConfig`. Starting with `pulpcore==3.10`, if the `version` attribute is undefined while Pulp loads, Pulp will refuse to start. [#7930](https://pulp.plan.io/issues/7930)

## New Plugin API features

* You can use the `rate_limit` option to specify the rate limit, in seconds, for a remote. [#7965](https://pulp.plan.io/issues/7965)
* `DistributionFilter` is now accessible to plugin writers. [#8059](https://pulp.plan.io/issues/8059)
* `Label` and `LabelSerializer` are now available in the Plugin API. [#8065](https://pulp.plan.io/issues/8065)
* `LabelSelectFilter` has been added to filter resources by labels.
 [#8067](https://pulp.plan.io/issues/8067)
* The `NAME_FILTER_OPTIONS` has been added to the Plugin API to gain more consistency across plugins when filtering by name or similar CharFields.
[#8117](https://pulp.plan.io/issues/8117)
* A `ReadOnlyRepositoryViewset` has been added to the plugin API. This allows only a `GET` method to be used on a repository type that is not managed by the user.
 [#8103](https://pulp.plan.io/issues/8103)
* The `has_repo_attr_obj_perms` and `has_repo_attr_model_or_obj_perms` checks have been added to the list of global access checks that are available for all plugins to use. [#8161](https://pulp.plan.io/issues/8161)

## Removals

The default permission class changed from `IsAuthenticated` to `IsAdminUser`. Any endpoints that should be accessible by all known to the system users need to specify the `permission_classes` accordingly [#8018](https://pulp.plan.io/issues/8018)

As part of [#7908](https://pulp.plan.io/issues/7908) in the Pulpcore 3.9 release, `UnsupportedDigestValidationError` was added to `pulpcore.plugin.exceptions` but still accessible via `pulpcore.plugin.models`. With this release `UnsupportedDigestValidationError` has been removed from `pulpcore.plugin.models` and exists only in `pulpcore.plugin.exceptions`.

## Deprecations

As part of the changes mentioned [above](/update-to-the-signingservice/) around the **SigningService**, access to the path of the public key of a signing service was deprecated. The value of the public key is now expected to be saved in the model instance as `SigningService.public_key`. [7700](https://pulp.plan.io/issues/7700)

The `pulpcore.plugin.storage.get_plugin_storage_path()` method has been present for some time but is not used anywhere. It is now deprecated. [#7935](https://pulp.plan.io/issues/7935)

## Try Pulp 3.10 now!

* [Pulpcore on PyPI](https://pypi.org/project/pulpcore/3.10.0/)
* [Pulp Installer on PyPI](https://galaxy.ansible.com/pulp/pulp_installer)
* [Pulpcore Full Changelog* Bugfixes](https://docs.pulpproject.org/pulpcore/changes.html#id1)
* [Pulp Installer Changelog](https://pulp-installer.readthedocs.io/en/latest/CHANGES/#3100-2021-02-04)
* [Plugin API Changelog](https://docs.pulpproject.org/pulpcore/changes.html#plugin-api)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-02-08-pulp-squeezer-0.0.7.md
`````markdown
---
date: 2021-02-08T20:55:50+00:00
title: Automating Pulp Debian workflows with Pulp Squeezer
author: Melanie Corr, Matthias Dellweg
tags:
  - release
---
<!-- more -->
We are happy to announce the release of Pulp Squeezer 0.0.7!

With the [Pulp 3 Debian](https://docs.pulpproject.org/pulp_deb/installation.html) plugin, you can take full control over the management and distribution of your Debian and Ubuntu packages. With this release of [Pulp Squeezer](https://galaxy.ansible.com/pulp/squeezer), you can automate many aspects of the Pulp Debian workflow using Ansible.

[Pulp Squeezer](https://galaxy.ansible.com/pulp/squeezer) is a growing collection of Ansible modules that you can use to manage Pulp.

As part of this release, you can now use Pulp Squeezer to automate workflows with the following new modules:

* `deb_distribution`
* `deb_publication`
* `deb_remote`
* `deb_repository`
* `deb_sync`

The first four in the list, associated with actual resources, provide the `state` parameter to allow for idempotent playbooks the ansible way.
The `deb_sync` module however, being an action module, you might want to register as a [handler](https://docs.ansible.com/ansible/latest/user_guide/playbooks_handlers.html).

This release also includes the automatic refreshing of the API docs in the status module if version discrepancies are detected.

If you’re new to Pulp and looking for a better way to manage your Debian content, take a look at the [introduction to Pulp Debian](https://opensource.com/article/20/10/pulp-debian) article. This article contains an example workflow of how to get started with managing Debian content in Pulp. For more detail, see the [Pulp Debian documentation](https://docs.pulpproject.org/pulp_deb/installation.html).

## Try Pulp Squeezer today

You can find Pulp Squeezer on [Ansible Galaxy](https://galaxy.ansible.com/pulp/squeezer).

You can install with the following command:

```
ansible-galaxy collection install pulp.squeezer
```

If you’ve any questions or feedback, we would love to hear from you on our pulp-list@redhat.com mailing list!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-02-1-pulp-community-update.md
`````markdown
---
date: 2021-02-01T20:55:50+00:00
title: Pulp Community Update (Dec-Jan 2021)
author: Melanie Corr
tags:
  - release
---
<!-- more -->
_If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`._

## Pulp @ FOSDEM

[FOSDEM 2021](https://fosdem.org) takes place over Feb 6th and 7th. There will be three Pulp-related talks in the [Infra Management devroom](https://fosdem.org/2021/schedule/track/infra_management/) that you can watch from the comfort of your home:

* [Registry native delivery of software content with Pulp 3](https://fosdem.org/2021/schedule/event/registrynativedeliverysoftwarecontentpulp3/)
* [Don't get stuck on Pulp 2!](https://fosdem.org/2021/schedule/event/dontgetstuckonpulp2/)
* [Host your own on-premise Ansible Galaxy](https://fosdem.org/2021/schedule/event/hostyourownansiblegalaxy/)

There will be time after the talks for discussion, so please join us and ask any questions you might have.

Throughout the conference, Pulp will have a presence in the [FOSDEM stands](https://stands.fosdem.org/) area. There is also a Matrix chatroom where some of us will hang out for the day. Come by and talk to us!

## Pulp @ DevConf.cz

Pulp will also have a presence at [DevConf.CZ 2021](https://devconfcz2021.sched.com/):

* [Host your own on-premise Ansible Galaxy](https://devconfcz2021.sched.com/event/gmSh/host-your-own-on-premise-ansible-galaxy) (Thursday, February 18)
* [Host your own PyPI](https://devconfcz2021.sched.com/event/gmIF/host-your-own-pypi) (Saturday, February 20)

We will also have a stand presence with some information about Pulp. So do join us there too!

## Pulp 3 CLI beta releases

Progress continues on the Pulp 3 CLI. Currently, the CLI supports Pulpcore and `pulp_file`; it also provides some basic support for `pulp_ansible`, `pulp_container`, and `pulp_rpm`.

The 0.2.0 release also features a repository modify command, and the ability to call `--help` without having to connect to a server.

If you're interested in evaluating the Pulp 3 CLI, you can find instructions [here](https://github.com/pulp/pulp-cli#pulp-command-line-interface). If you do try the CLI and provide [feedback](https://forms.gle/KFWknXSzxHK7qUR9A), as a thank you, we can ship you some SWAG. You are also welcome to submit PRs for new CLI commands if there are commands that would improve your Pulp workflows.  

## Pulp Container Image Update

The Fedora 31 Pulp container image will be updated to a [CentOS 8 based single container](https://hub.docker.com/r/pulp/pulp). The Fedora image will be removed on Feb 5th, and instructions for the Centos 8 image will be added shortly.

## Pulp 3.9

In December, Pulpcore 3.9 was released. Work is well in progress for 3.10, and should be with us in early February.

Here's an overview of some of the main features of Pulpcore 3.9:

* Chunked uploads are now stored separately in the default storage. With this change, all nodes can now access these chunks in shared storage.
* Progress reporting has been added for Pulp imports.
* The `aiohttp.ClientTimeout` fields in Remote, such as `connect_timeout`, `sock_connect_timeout`, `sock_read_timeout`, and `total_timeout` are no longer hard-coded and can be set to suit your requirements.
* Added support for repairing Pulp by detecting and redownloading missing or corrupted artifact files.
* Users can add checksums to `ALLOWED_CONTENT_CHECKSUMS` by allowing them to populate checksums with the `handle-artifact-checksums` command.

In tech preview in Pulpcore 3.9:

* Debugging has been made easier with a correlation id that can either be autogenerated or passed in with a Correlation-ID header.

For a full list of features and bug fixes, check out the [changelog](https://docs.pulpproject.org/pulpcore/en/3.9/changes.html).

The [3.9.1 release](https://docs.pulpproject.org/pulpcore/en/3.9.1/changes.html#id1) contained a fix for a bug that was encountered by users that set a custom CHUNKED_UPLOAD_DIR setting. The value for this setting must now be a relative path inside MEDIA_ROOT.

[Pulp Certguard](https://docs.pulpproject.org/pulp_certguard/changes.html#id1) and [Pulp File](https://docs.pulpproject.org/pulp_file/changes.html) compatibility releases were made for Pulpcore 3.9 and 3.10.

## Pulp Python 3.0.0

The long-awaited update to the Pulp Python plugin is now generally available. This release adds substantial enhancements to managing your Python content in Pulp. Over twelve beta releases, functionality was added so you can mirror the whole of PyPI in just under one hour, as well as the ability to upload your own Python content, among many other changes. To get started and learn more about the Pulp Python workflows, see the [Pulp Python documentation](https://pulp-python.readthedocs.io/en/latest/).

## Pulp 2-to-3 Migration 0.6.0

Pulp 2 will sunset in 2022. If you haven't started planning your [migration](https://pulpproject.org/migrate-to-pulp-3/) yet, there's never been a better time.

In this release, there is a tech preview available for migrating Debian packages.
As well as this, this release adds a reset endpoint. If you want, you can now start a migration from scratch.
You can also skip corrupted or missing Pulp 2 content.

If you're interested in learning more about migrating to Pulp 3, take a look at the [migration documentation](https://pulp-2to3-migration.readthedocs.io/en/latest/index.html).

## Pulp Container 2.2.0

As well as a number of bug fixes, this release adds the ability to define namespaces for container group repositories and distributions. Uploaded chunked files are now stored in shared storage rather than `/var/lib/pulp,`.

This release is compatible with Pulpcore 3.9 and the future release 3.10.

For more information about Pulp Container and its workflows, see the [Pulp Container documentation](https://docs.pulpproject.org/pulp_container/index.html).

## Pulp Debian 2.8 & 2.9

Some `APT` repositories store their release files in the repository root. The main feature of this release adds the capability to synchronize repositories using this alternative repository format.

For a full look at this release, check out the [changelog](https://pulp-deb.readthedocs.io/en/latest/changes.html#id1).

Pulp Debian 2.9 was released purely to update Pulpcore compatibility for future releases of Pulpcore.

## Pulp Ansible 0.6.0

Pulp Ansible users can now filter Ansible Collections by name and namespaces on a Collections V3 endpoint.
The 0.6.1 release contained some small bug fixes. For more information, see [Changelog](https://docs.pulpproject.org/pulp_ansible/changes.html).

## Pulp 2.21.5

Pulp 2.21.5 [is now available](https://www.redhat.com/archives/pulp-list/2021-January/msg00019.html). However, [Pulp 2 entered maintenance mode](https://pulpproject.org/2020/06/15/pulp-2-enters-maintenance-mode/), so please consider planning your migration.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-02-25-pulp-community-update.md
`````markdown
---
date: 2021-02-25T20:55:50+00:00
title: Pulp Community Update (February 2021)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
_If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`._

## FOSDEM & Devconf

The Pulp community had a sizeable presence at both FOSDEM and DevConf, giving talks and workshops, as well as welcoming questions from anyone in the community at our virtual booths. We created some video content for people new to Pulp and about updates in the Pulp community over the last year. If you miss attending conferences, and want a quick summary of the main headlines in the Pulp community since we last met, take a look at this video:

<iframe width="560" height="315" src="https://www.youtube.com/embed/Gcr2lslMny8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

While DevConf was hosted using the hopin platform, FOSDEM was an entirely self-hosted experience that demonstrated the might of open source tooling. Matrix have an interesting [blog post](https://matrix.org/blog/2021/02/15/how-we-hosted-fosdem-2021-on-matrix) about hosting FOSDEM. We enjoyed our day in the Infra management devroom!

### Host Your Own Ansible Galaxy

In an on-premise environment, discovering and sharing Ansible content between different parts of your organization is a major problem. At FOSDEM, Pulp's Brian Bouterse delivered a talk on how the Galaxy_NG plugin can take the pain away from self-hosting Ansible Galaxy:

<iframe width="560" height="315" src="https://video.fosdem.org/2021/D.infra/hostyourownansiblegalaxy.mp4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

If this video isn't loading for you, click [here](https://video.fosdem.org/2021/D.infra/hostyourownansiblegalaxy.mp4). The FOSDEM talks and servers are still processing all of the content and a refresh should load the video for you.

Brian also hosted a workshop at DevConf on the same topic. When that video becomes available, you will find a link to it on our new [Media](https://pulpproject.org/media/) page on the Pulp website.

### Registry Native Delivery of Software Content

With containers becoming an increasingly popular method for software content delivery, Pulp's Ina Panova talked about how Pulp can help you manage not only the different software components you use to build your container images, but also the entire container management workflow that includes hosting a local cache of a container registry, building OCI images from containerfiles, curating container content, and distributing containers throughout your organization:

<iframe width="560" height="315" src="https://video.fosdem.org/2021/D.infra/registrynativedeliverysoftwarecontentpulp3.mp4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

If this video isn't loading for you, click [here](https://video.fosdem.org/2021/D.infra/registrynativedeliverysoftwarecontentpulp3.mp4). The FOSDEM talks and servers are still processing all of the content and a refresh should load the video for you.

For more information about Pulp Container, see the [Pulp Container documentation](https://docs.pulpproject.org/pulp_container/role-based-access-control.html).

### Don’t Get Stuck on Pulp 2!

Each month, we do our best to draw attention to the fact that [Pulp 2 is in maintenance mode](https://pulpproject.org/migrate-to-pulp-3/) and Pulp 3 is growing more powerful and robust with every passing week. If you're still unconvinced, let Pulp's Tanya Tereshchenko walk you through several reasons why it's a good idea to get off Pulp 2 as soon as possible, and how you can do that:

<iframe width="560" height="315" src="https://video.fosdem.org/2021/D.infra/dontgetstuckonpulp2.mp4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

If this video isn't loading for you, click [here](https://video.fosdem.org/2021/D.infra/dontgetstuckonpulp2.mp4). The FOSDEM talks and servers are still processing all of the content and a refresh should load the video for you.

If you have any questions or concerns about migrating, please write to us at `pulp-list@redhat.com`.


### Host Your Own PyPI

At DevConf, Pavel Picka and Daniel Alley hosted a workshop that went through the main workflows involved in hosting your own PyPI using the Pulp Python plugin.
At the time of writing this newsletter, the video of this workshop has not been made available, but we have a new [Media](https://pulpproject.org/media/) page on the website, where you can check for the latest talks and if you'd like to submit a talk or workshop recording of your own, please write to `pulp-list@redhat.com`.   

If you want to read more about Pulp Python, check out the [Manage Your Python Content with the Pulp Python plugin](https://pulpproject.org/2021/01/13/pulp-python-3.0-release/) post on our blog from earlier this year.

## Pulp Squeezer Debian modules

Over the weekend at FOSDEM, and somewhat as part of a discussion we had at our virtual booth, there has been a release of Pulp Squeezer, now with added Debian modules!
You can read all about this release in our [Automating Pulp Debian workflows with Pulp Squeezer](https://pulpproject.org/2021/02/08/pulp-squeezer-0.0.7/) post.

## Pulp 3.10 release

In February, Pulpcore 3.10 was released. You can read more about the headline features in our [release announcement](https://pulpproject.org/2021/02/04/pulpcore-3.10-is-now-generally-available/).

## Pulp 3 CLI progress

Development of the Pulp 3 CLI is progressing rapidly. In the last month alone, there have been three beta releases. These releases include adding support for the new [Labels](https://docs.pulpproject.org/pulpcore/workflows/labels.html) feature from Pulpcore 3.10, easier handling of config files and support for SSL client certificates, as well as Pulp 2-to-3 migration support, multiple config support, a worker command, and better validation of task states when filtering.

For more information on the latest updates to the Pulp 3 CLI, check out the Pulp 3 CLI [changelog](https://github.com/pulp/pulp-cli/blob/develop/CHANGES.rst).

If you take the time to evaluate the current Pulp 3 CLI in its beta form, [we would love to hear from you](https://docs.google.com/forms/d/121M3w_dyDkSWSh8YI2EGVVW483CzXPYBV5-ecEtnJc4/edit), and send you some SWAG as a thank you.

## Pulp 2.3.0/2.3.1 Container release

With this release, every Pulp Container and Container Registry API call is covered by a default access policy. For the moment, RBAC functionality is in tech preview mode.

Shortly after the 2.3.0 release, 2.3.1 was released with an important bug fix that prevents pulp_container from crashing when running alongside other pulp plugins that override the default user authentication models.

For more information about RBAC in Pulp Container, check out the [role based access control](https://docs.pulpproject.org/pulp_container/role-based-access-control.html) section of the Pulp Container documentation.

## Pulp 2-to-3 Migration releases

In February, there were two releases of the Pulp 2-to-3 Migration plugin, which include performance improvements and bug fixes as a result of extensive testing:

With the 0.7.0 release, here are some highlights:
* performance improvements for simple migration plans, some parts run in multiple tasks in parallel
* improved reliability of the re-migration in case of any interruptions or problems at early stages
* bug fixes for RPM plugin migration, mostly related to modular or distribution tree content
* documentation moved to docs.pulpproject.org, see the link below
* improved test coverage

And for the 0.8.0 release:
 * added the ability to migrate additional Debian content types needed for structured publishing.
 * performance improvements for migration re-runs
 * provided a default configuration for `ALLOWED_CONTENT_CHECKSUMS` setting
 * various bug fixes for re-migration cases

For more information about the Pulp 2-to-3 Migration plugin, check out the [Pulp 2-to-3 Migration documentation](https://docs.pulpproject.org/pulp_2to3_migration/index.html).

## Pulp Ansible 0.7.0 release

The latest Ansible plugin released is as feature-packed as ever. Here are some of the highlights:


* Ansible export/import is now available as a tech preview feature
* Improve sync performance with no-op when possible. To disable the no-op optimization use the optimize=False option on the sync call.
* Efficient sync with unpaginated metadata endpoints if they are available.

New endpoints:

* a `v3/` endpoint returning publication time
* a `v3/collections/all/` endpoint returning all collections unpaginated
* a `v3/collection_versions/all/` endpoint returning all collections versions unpaginated

Modified/improved endpoints:
* Expose `MANIFEST.json` and `FILES.json` at `CollectionVersion` endpoint
* Adds the `requires_ansible` attribute to the Galaxy V3 `CollectionVersion` APIs. This documents the version of Ansible required to use the collection.
* Field `updated_at` from Galaxy v3 Collections endpoint using latest instead of highest version


## Interning with Pulp during a pandemic

In early 2020, Pulp's Gerrod Ubben internship plans were derailed by the pandemic. He took some time to write about his experiences working as a remote intern and working in both the Pulp Python and Python Bandersnatch communities over on [opensource.com](https://opensource.com/article/21/2/python-pulp-internship).

## Get Involved

### Meetings

**Open Floor** - every Tuesday and Friday 10:30 ET (either EST or EDT) in #pulp-meeting on Freenode (IRC). It’s a time for developer discussion, feedback, and decisions on code/issues/PRs/process relating to pulpcore or plugins. To participate, put a topic on the [agenda](https://hackmd.io/@pulp/triage/edit). Minutes will be sent to the `pulp-dev` mailing list.

**Bug Triage** - every Tuesday and Friday immediately after Open Floor in #pulp-meeting on Freenode (IRC). Come and participate in real-time. See the triage process for more details. You can also read through the triage archives.

### Make Sure You’re Registered On IRC

If you want to chat with us on any of the channels on Freenode IRC, please be aware that you must register your username with Freenode. If you're not getting any answers from us, it could be because we are not seeing your messages.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-03-15-pulpcore-3.11-is-now-generally-available.md
`````markdown
---
date: 2021-03-15T20:55:50+00:00
title: Pulp 3.11 is now Generally Available!
author: Melanie Corr
tags:
  - release
---
<!-- more -->
For a full list of bug fixes and changes that occurred as part of this release, see the [changelog](https://docs.pulpproject.org/pulpcore/changes.html) for this release in the Pulpcore documentation.

## New in Pulp 3.11

Let's take a look at the main features of this release.

### New Artifacts Checksum Reports [#7986](https://pulp.plan.io/issues/7986)

You can now evaluate how many content units are affected by a checksum type change by using the 'pulpcore-manager handle-artifact-checksums --report' command.

You can simply run this command, or run it with the `--checksums` and include a comma-sseparated list of the checksums that you want to use.

With this report, you can preview the impact of any change you want to make before you change the setting.

This new feature is currently a tech preview.


### Proxy Authorization Updates [#8167](https://pulp.plan.io/issues/8167)
In previous versions of Pulp, the only way to specify a proxy username and password was to append them in the `proxy_url` fields.

With this release, there are two new fields: `proxy_username` and `proxy_password` for remotes that you can use to enter your credentials. As a result of this change, you can no longer specify credentials as part of the `proxy_url` field.
A data migration will move the proxy authentication information on existing remotes to the new fields.

### Worker timeout is now configurable [#8291](https://pulp.plan.io/issues/8291)

In previous versions of Pulp, worker timeout was hardcoded as 30 seconds. Depending on the system, and the I/O of Postgresql, this hardcoded value caused problems.

As part of this release, a new setting `WORKER_TTL` has been added. You can specify the interval, in seconds, that you consider a worker as missing after its last heartbeat. The default value is 30 seconds.

You can edit the `WORKER_TTL` setting in `settings.py`.


### QueryExistingArtifacts now enforces ALLOWED_CONTENT_CHECKSUMS [#7854](https://pulp.plan.io/issues/7854)

An error will now occur if you sync content that includes a checksum that is not part of `ALLOWED_CONTENT_CHECKSUMS`.

### handle-artifact-checksums - now fully supported [#7928](https://pulp.plan.io/issues/7928)

 The `handle-artifact-checksums`, command, which was introduced as a tech preview is now a fully-supported part of Pulp 3.

### Update to `/pulp/api/v3/status/`

In earlier versions of Pulp plugins, `/pulp/api/v3/status/` listed Python package names instead of Django app names.

With this release, the `component` field of the `versions` section of the status API `/pulp/api/v3/status/` now lists the Django app name, not the Python package name. Similarly the OpenAPI schema at `/pulp/api/v3` does also. To support this change, plugins are required to supply their label and version in the `PulpPluginAppConfig` since 3.10. [#8198](https://pulp.plan.io/issues/8198)


## Removals

The following items have been removed from Pulpcore as part of this release:


### Sensitive data removed from Remote responses [#8202](https://pulp.plan.io/issues/8202)
Removed sensitive fields `username`, `password`, and `client_key` from Remote responses. You can still set and update these fields, but they will no longer be readable.

### Removed `md5` and `sha1` from ALLOWED_CONTENT_CHECKSUMS [#8246](https://pulp.plan.io/issues/8246)

The `md5` and `sha1` checksums have been removed from the`ALLOWED_CONTENT_CHECKSUMS` setting because they are insecure.

With this release, the default `ALLOWED_CONTENT_CHECKSUMS` contain `sha224`, `sha256`,`sha384`, and `sha512`.

#### Systems with existing Artifacts will undergo an automatic update as part of this release [#8322](https://pulp.plan.io/issues/8322)

Due to the removal of `md5` and `sha1` from the `ALLOWED_CONTENT_CHECKSUMS` setting, every system that had any Artifacts synced prior to Pulpcore 3.11 will have to run the `pulpcore-manager handle-content-checksums` command. This release provides an automatic data migration that will run the command automatically as part of the ``pulpcore-manager migrate`` command all upgrades must run anyway.


### The key field of SigningService [#8398](https://pulp.plan.io/issues/8398)

The `key` field from the **SigningService** response has been removed. The **SigningService** contains the key information in the `public_key` field already.

## Addressing AccessPolicy via the viewset's classname[#8397](https://pulp.plan.io/issues/8397)

The ability to address `AccessPolicy` using the viewset's classname. Use the Viewset's `urlpattern` instead.

## Plugin developer updates [#7815](https://pulp.plan.io/issues/7815)

This release includes the following updates to the plugin API.

Plugin developers now have the flexibility to use more than one `WorkingDirectory()` within a task, which includes nested calls. Tasks will also now use a temporary working directory by default.

### Use `pulpcore.app.pulp_hashlib` instead of `hashlib.new` [#7984](https://pulp.plan.io/issues/7984)

A new `pulpcore.app.pulp_hashlib` module has been added, which provides the `new` function and ensures that only allowed hashes listed in `ALLOWED_CONTENT_CHECKSUMS` can be instantiated. Plugin writers should use this instead of ``hashlib.new`` to generate checksum hashers.


### New method for querying content [#8375](https://pulp.plan.io/issues/8375)

Add a ``get_content`` method to `pulpcore.plugin.models.RepositoryVersion` that accepts a queryset and returns a list of content in that repository using the given queryset.
This allows for specific content type to be returned by executing `repo_version.get_content(content_qs=MyContentType.objects)`.


## Plugin API Removals

* Adjusted the ``ALLOWED_CONTENT_CHECKSUMS`` setting to remove ``md5`` and ``sha1`` because they are insecure. Now, by default, the `ALLOWED_CONTENT_CHECKSUMS` contain `sha224`, `sha256`, `sha384`, and `sha512`. [#8246](https://pulp.plan.io/issues/8246)
* Removed the unused `get_plugin_storage_path` method. [#8343](https://pulp.plan.io/issues/8343)


### Plugin API Deprecations

The `pulpcore.plugin.tasking.WorkingDirectory` has been deprecated. [#8231](https://pulp.plan.io/issues/8231)


If you have any questions or comments about anything in this release, don't hesitate to write to us at `pulp-list@redhat.com`.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-03-22-pup-installer-overview.md
`````markdown
---
date: 2021-03-22T20:55:50+00:00
title: Pulp Installer - Information & Overview
author: Melanie Corr, Mike DePaulo, Brian Bouterse
tags:
  - update
---
<!-- more -->
Over on the #pulp channel on IRC, a user asked about how the Pulp community came to the decision to move towards using an Ansible installer for Pulp 3 rather than RPM system packages that were used for Pulp 2 installations. He wanted to understand why Pulp took this direction so that he could explain the advantages of such an approach to the community of another project he was involved in.

Since our code and community is open, we thought it might be useful to post about the advantages of replacing system packages with a pulp-installer tool, so that if any other community is thinking of doing the same, they might benefit from the answer to this question.

If you’ve ever any questions or feedback about Pulp, feel free to write to `pulp-list@redhat.com`

## What is the Pulp installer?

The Pulp installer is a collection of Ansible roles that you can use to install or upgrade Pulp 3, as well as install additional content plugins that you need. The Pulp installer also changes the installation experience for Pulp users that just want to install Pulp on one node. The introduction of the Pulp installer was one of the many user-experience improvements when compared to Pulp 2.

## What motivated Pulp to change the primary installation method?

In planning Pulp 3, we looked at Pulp 2 and realized a few problems stemmed from using an RPM-based installation method:

* Pulp was installable only in the Red Hat ecosystem. It could not be cross-distribution. Users wanted to deploy Pulp on other operating systems.
* Pulp ended up being on the delivery path of large portions of our dependency tree. This was, practically speaking, taking a lot of Pulp developer time.
* Pulp had to repackage CVEs in the dependency tree of Pulp, for example, Django. This lowered the security of user environments. In many cases, we would only deliver these CVE-patched dependencies to the __latest__ one or two Pulp repositories, leaving older Pulpcore user environments totally exposed.
* We could not automate the upgrade process because applying migrations to the database was not a good fit for packaged RPMs.
* Configuring Pulp’s dependencies was mostly beyond our control via RPM methods. For example, the database. We didn’t own the database RPMs, yet we needed to apply configurations onto it.
* We could not handle clustered installations.
* We could not use the RPMs to the right components on different machines. If the RPMs declared a dependency on mongod for example it would get installed on every node in clustered installations. If we did not declare a dependency on mongod, single node installs would not even receive mongod automatically.
* Maintaining config files across the cluster was not practical when every RPM declares a configuration file and tries to apply changes to it over time.
* There was a lot of divergence between developer systems and user systems because user systems used the RPM packaging, but developer systems never did.

## What is the main difference for the user between Pulp installer and system package installation?

Previously, users installed packages, but then had to determine which commands to run afterwards, and which config files to modify and how, which was overall more complex.

Now, the Pulp installer automates these parts of the installation process that would otherwise have been left to the user to complete.

## How do I customize my Pulp deployment?

While the Pulp installer handles the automation of the installation, if you want to customize your deployment, you must determine which variables to provide before running the installer. However, once this is done, running the installer once completely performs the installation in an automated fashion.

Using variables makes the process much more repeatable. For example, if you install Pulp in your test environment, and want to repeat this installation in production, you can copy the Ansible variable file, adjust one or two variables for the environment, and re-run the installer.

For every Ansible role in the Pulp installer, there is a list of variables that you can use to customize the installation. Each Ansible role documents its own variables. You can also find this information in the [Pulp installer documentation](https://pulp-installer.readthedocs.io). For example, if you want to customize your firewall settings, you can do so using the `pulp_configure_firewall` variable in the [pulp_webserver](https://pulp-installer.readthedocs.io/en/latest/roles/pulp_webserver/#role-variables) role.

## What do you think of the Pulp installer?

Have you tried the installer? Have you customized your deployment using Ansbile variables? Let us know what you think at `pulp-list@redhat.com`
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-04-01-pulp-community-update-march2021.md
`````markdown
---
date: 2021-04-01T20:55:50+00:00
title: Pulp Community Update (March 2021)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
__If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`.__


## DevConf.cz videos are now available!

While DevConf.cz took place at the end of February, it took a while for the videos from the sessions to be added to YouTube.

If you didn't get a chance, you can watch Pavel and Daniel host a workshop on hosting your own on-premise PyPI.

<iframe width="560" height="315" src="https://www.youtube.com/embed/yxPHEHNJwO4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### Host your own on-premise Ansible Galaxy

Brian also hosted a workshop where he demoed how you can host your very own on-premise Ansible Galaxy. Throughout the workshop, Brian also demoed the power of the new Pulp 3 CLI.

<iframe width="560" height="315" src="https://www.youtube.com/embed/GjrWYMfjGrs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Pulpcore 3.11 has been released!

The headline features from this release include New Artifacts Checksum Reports, Proxy Authorization Updates, and many more updates and enhancements to existing functionality.

For more information about the new features and removals as part of this release, see the [release announcement blog](https://pulpproject.org/2021/03/15/pulpcore-3.11-is-now-generally-available/).

## Pulp 3 CLI now has Pulp Python commands!

Pulp 3 CLI 0.7.0 was released, and includes CLI commands for Pulp Python. The Pulp Python documentation has been updated to include CLI commands in their [workflows](https://pulp-python.readthedocs.io/en/latest/workflows/index.html)

As part of the Pulp 3 CLI release, the Container namespace command has also been added.
For more information, check out the [0.7.0 changelog](https://github.com/pulp/pulp-cli/blob/develop/CHANGES.rst#070-2021-03-15).

#### Want some SWAG?

As always, if you have tried the Pulp 3 CLI and would like to tell us your thoughts, [complete the survey](https://forms.gle/zUwcVf9i9erxm9Zr5) and we'll send you some SWAG as a thank you!

## Pulp Container 2.4.0

As well as the 2.4.0 release, this month there were some minor releases of Pulp Container versions [2.2.1](https://listman.redhat.com/archives/pulp-list/2021-March/msg00039.html) and [2.1.1](https://listman.redhat.com/archives/pulp-list/2021-March/msg00012.html).

Some 2.4.0 release highlights:
* The registry API has been updated to include pagination for the `_catalog` and the `tags/list` endpoint.
* Users have a new API endpoint they can use to remove an image using a digest from a push repository.
* Functionality has been added so that admins can allow users without permissions to create the namespace that matches their login.

For for a full list of changes, see the [changelog](https://docs.pulpproject.org/pulp_container/en/2.4.0/changes.html)


## Pulp 2-to-3 Migration plugin updates

In the last month, versions 0.9.0 and 0.10.0 of the Pulp 2-to-3 migration plugin have been released.

As well as performance improvements and bug fixes mainly for migration reruns, the example documentation have been updated to include Pulp 3 CLI examples. You can see the new Pulp CLI in action in the [workflow documentation](https://docs.pulpproject.org/pulp_2to3_migration/workflows.html).

For more information, check out the [changelog](https://docs.pulpproject.org/pulp_2to3_migration/changes.html).

And remember, Pulp 2 will sunset in late 2022, so [migrate to Pulp 3](//migrate-to-pulp-3/) today!

## Pulp RPM 3.10.0

This release fixes several bugs related to Advisories (Errata) as well as a bug relating to "sha" used as an alias for "sha1"

For a full list of changes, see the [changelog](https://pulp-rpm.readthedocs.io/en/latest/changes.html#id1).


## Pulp Debian updates

This month, Pulp Debian 2.10.0 and 2.11.0 were released.

Version 2.11.0 is compatible with Pulpcore 3.11.

The most important Debian update is that starting with Pulpcore 3.11, the MD5 checksum algorithm will be disabled by default.
Providing MD5 checksums in repository metadata is almost universal practice within the APT ecosystem.
For information about re-enabling MD5, or otherwise handling this change, see the new [workflow documentation](https://docs.pulpproject.org/pulp_deb/workflows/checksums.html).

## Pulp Ansible updates

This month, there were several minor updates to Pulp Ansible with the releases of [0.5.7](https://listman.redhat.com/archives/pulp-list/2021-March/msg00002.html), [0.5.8](https://listman.redhat.com/archives/pulp-list/2021-March/msg00010.html), [0.6.2](https://listman.redhat.com/archives/pulp-list/2021-March/msg00003.html), and [0.7.1](https://listman.redhat.com/archives/pulp-list/2021-March/msg00004.html).

Each of these releases contained several bugfixes. For more information, check out the release announcements and the [changelog](https://docs.pulpproject.org/pulp_ansible/en/0.7.1/changes.html#id1).

## PulpCon 2021

PulpCon 2021 will be held online. As sad as we are not to meet for another year, hosting PulpCon online has proven to open the floor to more community members than ever before. The tentative date for PulpCon 2021 is November 8-12. Please keep an eye on our mailing list `pulp-list@redhat.com` for further updates.

## The evolution of the Pulp installer

As a result of questions asked in the community this month, we put together a post outlining the rationale behind investing time and energy in an Ansible installer to automate the installation of Pulp 3. If you want to learn more about our installer, read [Pulp Installer - Information & Overview](https://pulpproject.org/2021/03/22/pup-installer-overview/).

## Get Involved

### Meetings

**Open Floor** - every Tuesday and Friday 10:30 ET (either EST or EDT) in #pulp-meeting on Freenode (IRC). It’s a time for developer discussion, feedback, and decisions on code/issues/PRs/process relating to pulpcore or plugins. To participate, put a topic on the agenda. Minutes will be sent to the pulp-dev mailing list.

**Bug Triage** - every Tuesday and Friday immediately after Open Floor in #pulp-meeting on Freenode (IRC). Come and participate in real-time. See the triage process for more details. You can also read through the triage archives.

### Make Sure You’re Registered On IRC

If you want to chat with us on any of the channels on Freenode IRC, please be aware that you must register your username with Freenode. If you’re not getting any answers from us, it could be because we are not seeing your messages.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-04-08-pulp-3.12-is-generally-available.md
`````markdown
---
date: 2021-04-08T20:55:50+00:00
title: Pulp 3.12.0 is Generally Available!
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
Let's take a look at the main updates and enhancements as part of this release.

This release also includes a plethora of bugfixes as well as some nice enhancements to Pulpcore and the Plugin API. For a full overview of changes, check out the [changlog](https://docs.pulpproject.org/pulpcore/changes.html).

## Support added for automatic publishing and distributing [#7626](https://pulp.plan.io/issues/7626)

Functionality has been added to Pulpcore so that when the content of a repository is updated, the repository can be automatically published and redistributed. This feature paves the way for future content plugin releases to add support for automatically publishing or distributing the new repository version after it has been created. Check the release notes of upcoming content plugins to see when this feature becomes supported. 

## New Checksum validation steps

Pulp can prohibit or allow checksums by setting the `ALLOWED_CONTENT_CHECKSUMS` setting.

As part of this release, a number of validation steps have been added to help to ensure that you can debug and manage content checksums that are synched as part of the on-demand sync process.

New documenation has been also added for the [ALLOWED_CONTENT_CHECKSUMS setting](https://docs.pulpproject.org/pulpcore/en/master/nightly/settings.html#allowed-content-checksums).

A new warning has been added to the on-demand sync process to check if remote artifacts are detected with checksums that do not correspond with the `ALLOWED_CONTENT_CHECKSUMS`. [#7985](https://pulp.plan.io/issues/7985)

During a sync of on-demand content, a new check is performed and throws an error if forbidden checksums are detected. [#8423](https://pulp.plan.io/issues/8423)

As part of [#7989](https://pulp.plan.io/issues/7989) more enhancements updates were made to handle the exception that gets raised on the client side.

## Increased flexibility with deleting repository versions [#8454](https://pulp.plan.io/issues/8454)

With this release, it is now possible to delete the original repository version (`RepoVersion 0`). As long as you have more than one repository version, you can now delete `RepoVersion 0`.

## Breaking changes and behavior changes

### PulpExporter: Update and Delete become asynchronous [#7438](https://pulp.plan.io/issues/7438)

The Update and Delete endpoints of `PulpExporter` have been changed to become asynchronous. This change provides proper locking on resources.

Note that this is a breaking change.

### Deprecation warnings added to log level WARNING. [#8499 ](https://pulp.plan.io/issues/8499)

In previous versions of Pulp, no one could see deprecation warnings for features. With this release, if the log level is set to `WARNING`, you'll now find deprecation warnings included in your logs.

You can disable this by adjusting the log level of `pulpcore.deprecation`.

## Updates to the Plugin API

This release includes the following updates to the Plugin API.

### New callback method for autopublishing [#7626](https://pulp.plan.io/issues/7626)

A new callback method ``on_new_version()`` has been added to ``Repository``. This runs when a new repository version has been created. The addition of this method paves the way for future plugin releases to add support for automatically publishing or distributing the new repository version after it has been created.

### New logging options for ``DigestValidationError`` and ``SizeValidationError`` [#8357](https://pulp.plan.io/issues/8357)

A `url` option has been added as a possible argument to ``DigestValidationError`` and ``SizeValidationError`` exceptions, so that you can better locate the url of the requested files.

### A new Distribution MasterModel [#8384](https://pulp.plan.io/issues/8384)

This release provides a new MasterModel `pulpcore.plugin.models.Distribution` that replaces the BaseDistribution `pulpcore.plugin.models.BaseDistribution` model.
You will have to define a migration to move your data from `pulpcore.plugin.models.BaseDistribution` to `pulpcore.plugin.models.Distribution`. See the `pulp_file` migration 0009 as a reference example.[#8385](https://pulp.plan.io/issues/8385)

This new model now contains the `repository`, `repository_version`, and `publication` fields that are supposed to move off of the detail models where they are located with `pulpcore.plugin.models.BaseDistribution`.

* A new serializer `pulpcore.plugin.serializer.DistributionSerializer` has been added to use with `pulpcore.plugin.models.Distribution`.
* The viewset `pulpcore.plugin.viewset.DistributionViewSet`  replaces the deprecated `pulpcore.plugin.viewset.BaseDistributionViewSet`.
* The new `pulpcore.plugin.viewset.NewDistributionFilter` filter pairs with the `Distribution` model.

### Object deprecations as part of this change

|BaseDistribution object|Replaced by|
| --- | --- |
|`pulpcore.plugin.models.BaseDistribution` |`pulpcore.plugin.models.Distribution` |
|`pulpcore.plugin.viewset.BaseDistributionViewSet`|`pulpcore.plugin.viewset.DistributionViewSet` |
|`pulpcore.plugin.serializer.BaseDistributionSerializer`|`pulpcore.plugin.serializer.DistributionSerializer`|
|`pulpcore.plugin.serializer.PublicationDistributionSerializer`|`pulpcore.plugin.serializer.DistributionSerializer` |
|`pulpcore.plugin.serializer.RepositoryVersionDistributionSerializer` | Define the `publication` field directly on your detail distribution object.|
|`pulpcore.plugin.viewset.DistributionFilter` |`pulpcore.plugin.viewset.NewDistributionFilter`|


### Checksum type enforcement for downloader

As part of this release, checksum filtering in `Remote.get_downloader` has been removed and checksum type enforcement has been added to BaseDownloader itself.

[#8435](https://pulp.plan.io/issues/8435)

### New Dispatch API [#8496](https://pulp.plan.io/issues/8496)

A new `pulpcore.plugin.tasking.dispatch` endpoint has been added . This replaces the
`pulpcore.plugin.tasking.enqueue_with_reservation` endpoint.

The functionality is the same except for the following:
  * It returns a `pulpcore.plugin.models.Task` instead of an RQ object
  * It does not support the `options` keyword argument

Additionally the `pulpcore.plugin.viewsets.OperationPostponedResponse` has been updated to support both
  the ``dispatch`` and `enqueue_with_reservation` endpoints.


## Removals

Checksum type filtering has been removed from `pulpcore.plugin.models.Remote.get_downloader` and `pulpcore.plugin.stages.DeclarativeArtifact.download`[#8435](https://pulp.plan.io/issues/8435).


## Plugin API Deprecations

The usage of non-JSON serializable types of `args` and `kwargs` to tasks is deprecated. Future releases of pulpcore may discontinue accepting complex argument types. Note, UUID objects are not JSON serializable.

A deprecated warning is logged if a non-JSON serializable is used[#8505](https://pulp.plan.io/issues/8505).

### Tasking object `enqueue_with_reservation` deprecation [#8496](https://pulp.plan.io/issues/8496)

As part of a future move away from RQ, the `pulpcore.plugin.tasking.enqueue_with_reservation` object has been deprecated.
Instead use the `pulpcore.plugin.tasking.dispatch` interface.

__If you have any comments or questions about anything you read here, we'd be happy to hear from you at `pulp-list@redhat.com`.__
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-05-04-april-community-news.md
`````markdown
---
date: 2021-05-04T20:55:50+00:00
title: Pulp Community Update (April 2021)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
__If you have any questions or updates you would like to share, we would be delighted to hear from you at `pulp-list@redhat.com`.__


## Pulpcore 3.12 is Generally Available!

One of the headline features of this release is an enhancement to Pulpcore so that when the content of a repository is updated, the repository can be automatically published and redistributed. This feature paves the way for future content plugin releases to add support for automatically publishing or distributing the new repository version after it has been created. Soon after the release of 3.12, the Pulp File plugin was updated to enable this feature.

Autopublish and autodistribute support has since been added to the Pulp CLI 0.8.0 release for Pulp RPM and Pulp File content.

One minor release followed that adds a missing field `RepositoryVersionRelatedField` in the plugin API that plugin writers need when moving from RepositoryVersionDistribution to the new Distribution model.

For a full list of headline features, see the [release announcement](https://pulpproject.org/2021/04/08/pulp-3.12-is-generally-available/)

Pulp 3.12.1 is available on [PyPI](https://pypi.org/project/pulpcore/3.12.1)
You can find the latest version of the Pulp installer [on Ansible Galaxy](https://galaxy.ansible.com/pulp/pulp_installer).

This month, there was also a backport to Pulpcore 3.7.6 that fixes the handling of repositories with non-sha256 checksums. For more information, see the [release announcement](https://listman.redhat.com/archives/pulp-list/2021-April/msg00058.html).


## Pulp 2-to-3 Migration plugin

With the 0.11.0 release, some performance improvements have been added as well as a new  `CONTENT_PREMIGRATION_BATCH_SIZE` option that you can use to adjust the content batch size, so that you have better control while fine tuning a slow migration or if you've been dealing with timeout issues.

The default value is set to `1000`. If you're working with a slow system, consider readjusting the batch size to somewhere in the 50-100 range.

A reminder that you can use the Pulp 3 CLI with the migration plugin, so that its easier and faster than ever to progress through the workflows. The [docs](https://docs.pulpproject.org/pulp_2to3_migration/workflows.html) have also been updated with CLI examples.

You can download the latest release from [PyPI](https://pypi.org/project/pulp-2to3-migration/0.11.0/) and find the latest [Python bindings](https://pypi.org/project/pulp-2to3-migration-client/0.11.0) and [Ruby bindings](https://rubygems.org/gems/pulp_2to3_migration_client/versions/0.11.0)

## Pulp 3 CLI 0.8.0

The Pulp 3 CLI effort has been going from strength to strength, and the latest release is no exception.
The 0.8.0 release is packed with features.

Among the new features of this release are added support for autopublish and autodistribute in pulp_file and pulp_rpm, as well as a new interactive-shell mode to pulp-cli. For a full list, check out the [changelog](https://github.com/pulp/pulp-cli/blob/develop/CHANGES.rst)

The Pulp 3 CLI is still considered beta, and we would very much like to know what you think about the effort so far. If you have any feedback, please [let us know](https://forms.gle/fmh2wgfarjrqWDkf6) and we'd be glad to send some SWAG as a thank you!

## Pulp Python 3.2.0

The Pulp Python release contains three new sync filters. With the `package_types` and `exclude_platforms`, you can refine the package types you want to sync from a remote source. With the `keep_latest_packages` filter, you can specify how many latest versions of packages you want to retain. This is another method of optimizing disk space on your deployment.

For more information about the new sync workflows, check out the [A More Complex Remote](https://pulp-python.readthedocs.io/en/latest/workflows/sync.html#a-more-complex-remote) in the Pulp Python documentation. These workflows have also been incorporated into the Pulp 3 CLI support for Pulp Python.

You can find this release on [PyPI](https://pypi.org/project/pulp-python/3.2.0/)
as well as the [Python bindings](https://pypi.org/project/pulp-python-client/3.2.0/) and
[Ruby bindings](https://rubygems.org/gems/pulp_python_client/versions/3.2.0).

## Pulp Container 2.5.0

As well as some enhancements and bug fixes, RBAC is no longer in tech-preview mode!
Also with this release, users and groups who are authorized can now access repositories they have permissions for in the catalog endpoint. For more information, check out the [full changelog](https://docs.pulpproject.org/pulp_container/en/2.5.0/changes.html).

You can find the latest release on [PyPI](https://pypi.org/project/pulp-container/2.5.0), as well as
[Python bindings](https://pypi.org/project/pulp-container-client/2.5.0/). You can also find [Ruby bindings](https://rubygems.org/gems/pulp_container_client/versions/2.5.0/).


## Pulp Debian

Several versions of the Pulp Debian plugin were updated to fix a bug that was preventing synchronization of repositories containing translation files (as well as the synchronization of the translation files themselves).

The following versions have been updated: 2.9.1, 2.10.1, and 2.11.1.

For more information, see the [release announcement](https://listman.redhat.com/archives/pulp-list/2021-April/msg00032.html).

## PulpCon 2021 - Save the Date!

PulpCon 2021 will be held online. As sad as we are not to meet for another year, hosting PulpCon online has proven to open the floor to more community members than ever before. The tentative date for PulpCon 2021 is November 8-12. Please keep an eye on our mailing list `pulp-list@redhat.com` for further updates.


## Thank You!

Thank you to everyone who came along to our virtual booth at Red Hat Summit, asked questions and provided feedback on the Pulp mailing list and Freenode IRC over the last few weeks. We love hearing how you're using Pulp, and are looking forward to more questions and insights!

## Get Involved!

As well as the mailing lists, there are a number of ways to get involved in the Pulp community!

### Meetings

**Open Floor** - every Tuesday and Friday 10:30 ET (either EST or EDT) in #pulp-meeting on Freenode (IRC). It’s a time for developer discussion, feedback, and decisions on code/issues/PRs/process relating to pulpcore or plugins. To participate, put a topic on the agenda. Minutes will be sent to the pulp-dev mailing list.

**Bug Triage** - every Tuesday and Friday immediately after Open Floor in #pulp-meeting on Freenode (IRC). Come and participate in real-time. See the triage process for more details. You can also read through the triage archives.

### Make Sure You’re Registered On IRC

If you want to chat with us on any of the channels on Freenode IRC, please be aware that you must register your username with Freenode. If you’re not getting any answers from us, it could be because we are not seeing your messages.

### Matrix users

If you're accessing the #pulp channel on Freenode using the Element client for Matrix, [this article](https://amitosh.medium.com/staying-always-online-in-irc-using-riot-the-right-way-d4c4ff2f43d0) helps get setup so that everyone can see your messages.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-05-19-freenode-and-the-pulp-community.md
`````markdown
---
date: 2021-05-19T20:55:50+00:00
title: Freenode IRC & the Pulp Community
author: Melanie Corr
tags:
  - update
---
<!-- more -->
One of our main communication channels as a community has been Freenode IRC.
We maintain a Matrix bridge to Freenode but require all users to register with Freenode because of spam and to ensure that both Matrix and Freenode users see each other's messages.

As you're probably aware, there have been mass resignations from the Freenode board, first leaked last week but made official today [1], as well as the announcement that they are creating another network [2].

As far as I can tell, all open source communities are currently reviewing their options. I wanted to open a conversation here to see what you all think about our potential options. I have been monitoring the Ansible [3] and Fedora [4] community threads to inform myself of other group's thought processes.

Most importantly, I want to know what Pulp users think.
I am of the opinion that because we already maintain a presence on Matrix, it makes sense to stick with Matrix. However, I know that others don't like Matrix as much as I do, so I am hoping we can discuss and weigh our options. Please write to `pulp-list@redhat.com` and let us know what you think.

Thanks,

Melanie

* [1] [https://fuchsnet.ch/freenode-resign-letter.txt](https://fuchsnet.ch/freenode-resign-letter.txt)
* [2] [https://libera.chat/chanreg](https://fuchsnet.ch/freenode-resign-letter.txt)
* [3] [https://github.com/ansible-community/community-topics/issues/19](https://github.com/ansible-community/community-topics/issues/19)
* [4] [https://pagure.io/Fedora-Council/tickets/issue/371](https://pagure.io/Fedora-Council/tickets/issue/371)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-05-24-pulp-at-community-central.md
`````markdown
---
date: 2021-05-24T20:55:50+00:00
title: Pulp @ Community Central
author: Melanie Corr
tags:
  - update
---
<!-- more -->
Last week, Brian Bouterse gave a talk entitled **Using Pulp 3 - Simpler and Faster**, which included a comprehensive overview of Pulp 3, as well as a demo of some of the main Pulp workflows for different content types using our brand new Pulp 3 CLI. The [Pulp 3 CLI](https://github.com/pulp/pulp-cli) is evolving fast, and we're hoping that it improves your experience with Pulp. We have an open call for feedback on the [Pulp 3 CLI](https://github.com/pulp/pulp-cli), so if you'd like to tell us about it, complete [this survey](https://forms.gle/NbPgrjErxCPaEkQJ8)!

You can rewatch Brian's talk on YouTube:

<iframe width="560" height="315" src="https://www.youtube.com/embed/yXrS652k70c" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-05-24-pulpcore-3.13-is-generally-available.md
`````markdown
---
date: 2021-05-24T20:55:50+00:00
title: Pulp 3.13 is now Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
As well as a myriad of bugfixes and documentation improvements, this release contains some notable new features and enhancements. Let's take a look at the headline items of this release.

## Control how many repo versions you retain [#8368](https://pulp.plan.io/issues/8368)

Repository versioning was one of the main features introduced with Pulp 3. Every time you add or remove content from a repository, a new version is created. While this feature has its advantages, you might want to set some constraints to reduce the cleanup and maintenance job of retaining a large volume of repository versions in your database.

With this release, you can now set limits to the number of repository versions you retain. You can apply this on a per-repository basis, so that you can still retain as many versions of one repository while constraining the number of versions that are kept for another.

Here is a demo of how you can specify the number of versions to retain. This demo uses our lovely new [Pulp 3 CLI](https://github.com/pulp/pulp-cli)!

<a href="https://asciinema.org/a/412393" target="_blank"><img src="https://asciinema.org/a/412393.svg" /> </a>

## New repository version and publication endpoints [#4832](https://pulp.plan.io/issues/4832)

Two new endpoints (`/api/v3/repository_versions/` and `/api/v3/publications/`) have been added to allow you to view repository versions and publications across plugins. These endpoints also have content filters to help identify whether content belongs to a repository version or a publication. These endpoints and filters can help to provide clarity so that if you need to delete a content unit, you can be precise.

## Enhanced repoversion messaging [#6068](https://pulp.plan.io/issues/6068)

When you go to list repository versions, the repository field itself is also returned in the response. This makes it clearer to which repository a repository version belongs.

## Updates to the signing service workflow [#8609](https://pulp.plan.io/issues/8609)

The signing service workflow has been updated to account for the new **add-signing-service** argument that has been added for the **pulpcore-manager** command. You can use this argument to add a signing service.

You can view the [updated workflow](https://docs.pulpproject.org/pulpcore/workflows/signed-metadata.html).


## Updates to pulpcore-worker [#8721](https://pulp.plan.io/issues/8721)

There are ongoing efforts to improve the tasking system so that it is specific to Pulp but agnostic to the queuing technology. With this release workers should no longer be started through **rq** but by the native command **pulpcore-worker**. This affects users who do manual installations of Pulp 3. For more specific instructions, see the [updated documentation](https://docs.pulpproject.org/pulpcore/installation/instructions.html#pypi-installation).

For a full list of bug fixes and changes, see the [changlog](https://docs.pulpproject.org/pulpcore/changes.html).

For any questions, feel free to write to us on `pulp-list@redhat.com`.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-06-08-pulp-leaving-freenode.md
`````markdown
---
date: 2021-06-08T20:55:50+00:00
title: Pulp Community is Leaving Freenode
author: Melanie Corr
tags:
  - update
---
<!-- more -->
A few weeks ago, we [asked for feedback about the Freenode situation](https://pulpproject.org/2021/05/19/freenode-and-the-pulp-community/), since then, we've been discussing this on `pulp-list@redhat.com` and also on our new [GitHub Discussions community area](https://github.com/pulp/community/discussions/2).

Matrix is now our main channel of communication. You can find all of our Matrix channels here:

* [**pulp** on Matrix](https://matrix.to/#/!HWvLQmBGVPfJfTQBAu:matrix.org?via=libera.chat&via=matrix.org&via=ctrl-c.liu.se) for User support.
* [**pulp-dev** on Matrix](https://matrix.to/#/!aVApiNMtnstWbwDcVU:matrix.org?via=libera.chat&via=matrix.org&via=ctrl-c.liu.se) for Pulp developer discussion.

* [**pulp-rpm** on Matrix](https://matrix.to/#/#pulp-rpm.:matrix.org?via=libera.chat&via=matrix.org) for RPM plugin developer discussion.

* [**pulp-ansible** on Matrix](https://matrix.to/#/!cbADstEIkixyOUTCtO:matrix.org?via=libera.chat&via=matrix.org) for Pulp Ansible plugin developer discussion.

* [**pulp-container** on Matrix](https://matrix.to/#/#pulp_container:matrix.org?via=libera.chat&via=matrix.org) for Pulp Container plugin developer discussion.

* [**pulp-python** on Matrix](https://matrix.to/#/#pulp-python:matrix.org?via=libera.chat&via=matrix.org) for Pulp Python plugin developer discussion.

### Libera.Chat

If you prefer IRC, we have bridged our Matrix rooms with Libera.Chat, so you can find the corresponding room names on Libera.Chat also. Ensure that your nick is registered. 

A reminder that if you prefer more asynchronous communication, we welcome you to open a new discussion on [GitHub Discussions](https://github.com/pulp/community/discussions/).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-06-14-pulp-community-update.md
`````markdown
---
date: 2021-06-14T20:55:50+00:00
title: Pulp Community Update (May/June 2021)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
## 7 Questions for you!

We know your time is precious, so this year we thinned out our survey to comprise of only seven questions. The seventh question is just an open box, where we hope you can tell us anything that you might think is useful to help us improve Pulp.

[Take the survey now](https://forms.gle/r7qrbgE8RsxjdmCT8)!

## Pulp is Leaving Freenode

This probably isn't the first time you're hearing that many FOSS communities have left Freenode IRC and moved elsewhere. Pulp is no different. We now consider Matrix our Primary channel for communication. If you'd like to hang out and chat with the Pulp community, you can do so on the following Matrix channels:

If you want to use IRC, you can find corresponding rooms on Libera.Chat that are bridged to our new Matrix rooms.

You can find an up-to-date list of our channels and their purpose on our [Chat to us](/help/#chat-to-us) page.

## GitHub Discussions

After a recent Pulp Open Floor meeting, we decided to test the possibility of retiring our mailing lists. User feedback has suggested that the barrier of entry is high (you need to join the list to ask one question) and the mode of communication is outdated. We want to remove as many barriers of entry for users and contributors as possible. For these reasons, we are centralizing all of our discussions and meeting notes on a [Community Github Discussions](https://github.com/pulp/community/discussions). We would love to know what you think about it! If it works out, we might decommission our mailing lists.

## Move to GitHub Issues?

In a further effort to incorporate feedback from the Pulp community about our contribution process, we plan to migrate from our Pulp Redmine to GitHub Issues. We hope that with this move, we will reduce some of the overhead of contributing to Pulp. If you'd like to join in the discussion and share your experience, see [Github Issues migration meeting](https://github.com/pulp/community/discussions/9).

## Installing Pulp on Openshift

Fabricio has shared an end-to-end demo of how you can set up and deploy Pulp on Openshift. You can also find corresponding documentation for this process [here](https://pulp-operator.readthedocs.io/en/latest/). If you're interested to see this in action, you can watch here:

<iframe width="560" height="315" src="https://www.youtube.com/embed/quUdQ1j56I4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

If you've any questions or feedback, [start a discussion](https://github.com/pulp/community/discussions).

## 5 reasons to host your container registry with Pulp

If you're looking for a better way to manage your containers, check out this [opensource.com article](https://opensource.com/article/21/5/container-management-pulp) about how Pulp can help you take control of your container management!

## Latest Releases

### Pulpcore 3.13

3.13 contained several bugfixes and the ability to control how many repo versions are retained. You can watch a demo here, and read all about the [release announcement](https://pulpproject.org/2021/05/24/pulpcore-3.13-is-generally-available/).

<a href="https://asciinema.org/a/412393" target="_blank"><img src="https://asciinema.org/a/412393.svg" /></a>

The Pulpcore 3.14 release is scheduled for the end of June. You can find updates on releaste dates and progress [here](https://github.com/pulp/community/discussions/22).

### Pulp RPM 3.12.0

The main feature of this release is support for automatic publishing and distributing. As well as this, the Pulp RPM plugin now has support for synching **Oracle ULN** repositories using ULN remotes. You can set an instance wide ULN server base URL using the `DEFAULT_ULN_SERVER_BASE_URL` setting.  

Earlier in the month, 3.11 was released and included support for the new changes in modularity (`static_context`), as well as some important bug fixes, such as a fix that was causing high memory consumption during syncs of large repositories. An update, 3.11.1, came later in the month and provided additional bugfixes. For more information, see the [changelog](https://docs.pulpproject.org/pulp_rpm/en/3.11.1/changes.html#id1).

### Pulp Debian 2.13.0

Pulp Debian 2.13.0 was primarily a compatibility release for Pulpcore 3.13 and for the future Pulpcore 3.14 release. 2.13.0 also contains some bug fixes. For more information, see the [changelog](https://docs.pulpproject.org/pulp_deb/changes.html#id2).

This month, translation file synchronization was disabled from the Debian plugin. The feature was incomplete and the cause of various sync failures  This update was ported to and released in the following versions: 2.9.2, 2.10.2, 2.11.2, and 2.12.1.

Translation file synchronization may be reintroduced in the future.

### Pulp Python 3.3.0

The 3.3.0 release adds support for automatic publishing and distributing. You can find the full [changelog here](https://pulp-python.readthedocs.io/en/latest/changes.html). [Python](https://pypi.org/project/pulp-python-client/3.3.0/) and [Ruby](https://rubygems.org/gems/pulp_python_client/versions/3.3.0) bindings are also available.

### Pulp Container 2.6.0

The 2.6.0 release adds support for adding a default remote to a repository for syncing, as well as a slew of bug fixes. For more information, see the [changlog](https://docs.pulpproject.org/pulp_container/en/2.6.0/changes.html).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-06-21-a-new-tale.md
`````markdown
---
date: 2021-06-21T20:55:50+00:00
title: A new Tale - Pulp gets queueless distributed task workers
author: Matthias Dellweg
tags:
  - tasking
  - performance
  - high availability
  - scalability
---
<!-- more -->
Pulp is about to introduce a new replacement for its tasking system.
This complete redesign comes with a much simpler architecture that will drop the need for the
resource-manager, the last singleton in the Pulp 3 infrastructure.
Additionally, the distributed nature of the new task worker type drops the use of `Redis Queue`
(`rq`).
With this simplification there is no longer a need to replicate task data accross two databases.
The main Postgres Pulp database will therefore be the single source of truth about tasks.
Last but not least, the new worker type will use Postgres advisory locks to ensure exclusive access
to tasks.
This is a much more lightweight approach than storing access locks in a separate table.
Also it simplifies the cleanup process vastly if a worker dies as postgres will clean the locks
with its connection.

Benefits and Performance
------------------------

With all these simplifications, the new tasking system is more reliable.
Without the resource-manager as the single point of failure, it will be fully high available.
Also with the resource-manager seen as the choke point in task processing, the new distributed
system will scale much better in performance with the number of parallel running workers.

<figure markdown="span">
  ![Tasking system benchmark](scale_workers.png "Tasking system benchmark")
  <figcaption>Tasking system benchmark</figcaption>
</figure>

> This image shows the benchmark of the old and new tasking system with a single thread bursting
  256 tasks that need a random 2 out of a pool of 128 abstract resources and need 0.5 s to
  complete.
  In the first panel, the average time the foreground thread needs per task is plotted, and in the
  second, the average time a task needs from being available in the system to when it's picked up
  by a worker.
  It can be seen in the old system that the `resource-manager` is able to deliver about 2 tasks per
  second, and that providing more than two workers does not yield additional speedup.
  In the new tasking system however the task throughput scales up with the number of workers
  provided.
  However starting with 32 workers, the database load of concurrent processes polling the tasks
  table will slow down the insertion of new tasks into the system by a factor of about 5.

The removal of the queueing system brings another nontrivial benefit to the table.
Tasks are no longer assigned to workers before actually starting, and therefore no tasks will be
canceled that are already pending in the task queue on a worker restart.

Deploying the new Tasking System
--------------------------------

This new system will be introduced in the upcoming 3.14 release of Pulpcore as a drop in
replacement and activated by default.
If you want to stay with the traditional tasking system for longer, we advise that prior to
upgrading, you set the `USE_NEW_WORKER_TYPE` setting to `False`.
That is adding `use_new_worker_type: false` to `pulp_settings` if you use the Ansible pulp
installer.
To activate the new system later, you just need to set the `USE_NEW_WORKER_TYPE` setting to `True`
and restart your Pulp services.
If you decide to go back, it is basically the same process, where you flip the setting to `False`.
For production environments, however, we recommend that you first drain your task queues by
shutting down the api-workers first.
While this process introduces a downtime on the api side, the content delivery side is not affected
by this change and does not necessarily need to be restarted.
The current plan is to deprecate the old tasking system, to be removed one or two minor releases
later.

A note for integrators:
  While this infers that Redis can eventually be dropped from Pulp's architecture, it is likely to
  be reintroduced again soon for caching access on the content delivery side.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-06-28-tasking-event-blog.md
`````markdown
---
date: 2021-06-28T20:55:50+00:00
title: New Tasking System Event
author: Melanie Corr
tags: [event]
---
<!-- more -->
## Pulp Community YouTube Live Event

Last week, Matthias Dellweg posted a blog about the [new tasking system](https://pulpproject.org/2021/06/21/a-new-tale/) that will be introduced with the release of Pulpcore 3.14

Tomorrow, June 29, we will host an information session about the new tasking system. This event will stream live on YouTube and we welcome any questions or feedback that you might have.

Here is a link to the YouTube livestream. If can only watch back at a later stage and have questions, feel free to [contact us](/chat-to-us/).

<iframe width="560" height="315" src="https://www.youtube.com/embed/YWKw4RYluPM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Looking forward to hearing what you think about the new tasking system!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-07-01-pulpcore-3.14-release-announcement.md
`````markdown
---
date: 2021-07-01T20:55:50+00:00
title: Pulp 3.14 is now Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
# 3.14 - headline features

We are happy to announce the release of Pulpcore 3.14!

This release contains a number of bug fixes and enhancements. In this blog, we'll take a look at
the headline features.

A gentle reminder that the [Community Survey](https://forms.gle/KJDoSdqWf5ajut5f6) is open,
and we would love to hear from you.

## Pulp has a new queueless tasking system! [#8501](https://pulp.plan.io/issues/8501)  

The largest and most significant change introduced with this release is the new tasking system.
 With this change, Pulp no longer needs a resource manager.

If you'd like an in-depth look at the motivations, benefits, and details of the new tasking system,
read [Matthias Dellweg's blog post](https://pulpproject.org/2021/06/21/a-new-tale/) and also watch
 a YouTube livestreamed interview with Matthias conducted by Pulp's Brian Bouterse:

<iframe width="560" height="315" src="https://www.youtube.com/embed/YWKw4RYluPM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

As part of the work to implement this feature, this release also introduces a new more "graceful" shutdown for Pulpcore
workers [#8930](https://pulp.plan.io/issues/8930)

Note that for the moment, this feature is in tech-preview.
Please [let us know what you think](https://pulpproject.org/help/#github-discussions).

### Sticking with the old tasking system?
If you intend to keep using the old tasking system, you should configure the `USE_NEW_WORKER_TYPE`
setting to `False` before upgrading. For more information about how to enable or disable the new
tasking system, see the [documentation](https://docs.pulpproject.org/pulpcore/configuration/settings.html#use-new-worker-type).


## New Orphan Cleanup Endpoint [#8658](https://pulp.plan.io/issues/8658)

This release introduces the `/pulp/api/v3/orphans/cleanup/` endpoint.
When you call this endpoint with `POST` and no parameters, it is the equivalent of calling.
`DELETE /pulp/api/v3/orphans/`. Note that as part of this release,
`DELETE /pulp/api/v3/orphans/` has been deprecated.

You can specify a list of `content_hrefs` to delete using the optional parameter `content_hrefs`
with list of content hrefs. In this case, only the specified content units will be deleted by the
orphan cleanup.

## Increased Retries on Failed Downloads [#8881](https://pulp.plan.io/issues/8881)

The default behavior for retrying downloads from remote sources after an error occurs has been
updated. Downloads will now be retried on a wider range of errors, for example, HTTP 500 and
websocket errors. The default number of retries is 3.

If you're a plugin writer, you also have the option to configure the number of retries for your
plugin with the new `DEFAULT_MAX_RETRIES` field that has been added to the ``Remote`` base class.

## Filter the task list with correlation ID [#8891](https://pulp.plan.io/issues/8891)

When using the task list endpoint, you can now filter the list by correlation ID to see all tasks being emitted by a single user action.

## Changes to Download Concurrency [#8897](https://pulp.plan.io/issues/8897)

Previously, `download_concurrency` would be set to a default value upon creation. With this release,
the default value is set to `NULL` and returns `NULL` when queried. However, a default value will
still be used. This value comes from the Pulp global settings or can be set by the plugin writer.

## Updates to the Plugin API

Here is a summary of changes to the Plugin API in this release:

*  ``pulpcore.plugin.viewsets.DistributionFilter`` has been added. Use this instead of  
``pulpcore.plugin.viewsets.NewDistributionFilter``.
  [#8480](https://pulp.plan.io/issues/8480)

* ``user_hidden`` field has been added to ``Repository``, with which you can hide repositories from users.
  [#8487](https://pulp.plan.io/issues/8487)

* ``timestamp_of_interest`` field has been added to Content and Artifacts.
This field can be updated by calling a new method ``touch()`` on Artifacts and Content.
Plugin writers should call this method whenever they deal with Content or Artifacts.
For example, this includes places where Content is uploaded or added to Repository Versions.
This will prevent Content and Artifacts from being cleaned up when orphan cleanup becomes a
non-blocking task in pulpcore 3.15.
  [#8823](https://pulp.plan.io/issues/8823)

* ``AsyncUpdateMixin`` has been exposed through ``pulpcore.plugin.viewsets``.
  [#8844](https://pulp.plan.io/issues/8844)

* ``DEFAULT_MAX_RETRIES`` field to the ``Remote`` base class - plugin writers can override
the default number of retries attempted when file downloads failed for each type of remote.
The default value is 3.
  [#8881](https://pulp.plan.io/issues/8881)

* ``DEFAULT_DOWNLOAD_CONCURRENCY`` field has been added to the Remote base class - plugin writers can
override the number of concurrent downloads for each type of remote. The default value is 10.
  [#8897](https://pulp.plan.io/issues/8897)

### Plugin API Removals


Using non-JSON serializable types of ``args`` and ``kwargs`` to tasks is no longer supported.
`uuid.UUID` objects however will silently be converted to ``str``.
  [#8501](https://pulp.plan.io/issues/8501)

The `versions_containing_content` method has been removed from the `pulpcore.plugin.models.RepositoryVersion`
object. Instead use `RepositoryVersion.objects.with_content()`.
  [#8729](https://pulp.plan.io/issues/8729)

The `pulpcore.plugin.stages.ContentUnassociation` has been removed from the plugin API.
  [#8827](https://pulp.plan.io/issues/8827)


### Plugin API deprecations

The ``pulpcore.plugin.viewsets.NewDistributionFilter`` is deprecated and will be removed from a
  future release. Instead use ``pulpcore.plugin.viewsets.DistributionFilter``.
  [#8480](https://pulp.plan.io/issues/8480)

Deprecate the use of the `reserved_resources_record__resource` in favor of
`reserved_resources_record__contains`. Tentative removal release is pulpcore==3.15.
  [#8501](https://pulp.plan.io/issues/8501)

Plugin writers who create custom downloaders by subclassing ``HttpDownloader`` no longer need to
wrap the ``_run()`` method with a ``backoff`` decorator. Consequntly the ``http_giveup`` handler for the
 sake of the ``backoff`` decorator is no longer needed and has been deprecated.
 It is likely to be removed in pulpcore 3.15.
  [#8881](https://pulp.plan.io/issues/8881)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-07-07-pulp-community-update-june-2021.md
`````markdown
---
date: 2021-07-07T20:55:50+00:00
title: Pulp Community Update (June 2021)
author: Melanie Corr
tags:
  - release
---
<!-- more -->
This is a summary of the Pulp community goings-on  over the last few weeks!

## Pulp Community Survey

This year, we decided to pare the survey down to seven simple open questions. We've been delighted with the responses so far. We don't collect usage data on the project, so the more information you share with us, the more we can factor your scenarios and considerations into our plans. Given the size of the Pulp project, your feedback can have a very real impact on the future of Pulp, so please take the time to [complete the short survey](https://forms.gle/C3QwT9SVncXETipu9).

## Pulpcore 3.14 has been released!

The major feature of this release was the move to the new tasking system. In the lead-up to this release, Matthias Dellweg and Brian Bouterse hosted an information session in the form of a YouTube livestream, you can rewatch the event here:

<iframe width="560" height="315" src="https://www.youtube.com/embed/YWKw4RYluPM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

For a look at the main headline features of the release, you can check out the [release announcement blog](https://pulpproject.org/2021/07/01/pulpcore-3.14-release-announcement/).

For a comprehensive list of all bugfixes, deprecations, removals, and enhancements, see the [Pulpcore changelog](https://docs.pulpproject.org/pulpcore/changes.html#id1).

The following plugins are compatible with Pulpcore 3.14:

* pulp_file 1.8.1
* pulp_rpm 3.13.2
* pulp_container 2.7.0
* pulp_ansible 0.8.0
* pulp_certguard 1.4.0
* pulp_2to3_migration 0.12.0


## Pulp Container 2.7.0

With this update, it's now possible for users to update their container push repositories.

As well as this, there was a number of bug fixes around RBAC functionality.

For a full list of updates, check out the [changelog](https://docs.pulpproject.org/pulp_container/en/2.7.0/changes.html).

## Pulp Certguard 1.4.0

As well as compatibility with 3.14, this release has extended the CertGuard.ca_certificate to accept a cert-bundle in addition to a single cert.

For more information, see the [changelog](https://docs.pulpproject.org/pulp_certguard/en/1.4.0/changes.html#id1)

## Pulp Ansible Tests

Pulp's Brian Bouterse hosted a session on adding tests for any additions to the Pulp Ansible plugin. You can rewatch on our YouTube channel:

<iframe width="560" height="315" src="https://www.youtube.com/embed/gqxqvQ5dKlY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Pulp 3 session for Katello users

At the Foreman Birthday Party on July 1, Matthias Dellweg gave a presentation entitled **Pulp 3 introduction for Katello users - exploring the backend and tracing issues**. This session was the most popular event at the Foreman birthday party probably because the Foreman community are either in the midst of migrating from Pulp 2 to 3, or are now using Pulp 3. If you use Pulp through Katello, this session might be of interest to you.

<iframe width="560" height="315" src="https://www.youtube.com/embed/k7YOvCZmX0U?start=3716" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## GitHub Discussions

Over the last few weeks, we have been trialing moving away from mailing lists and towards a more modern and accessible forum for discussing issues related to the Pulp community. For the last while, we have tried [GitHub Discussions](https://github.com/pulp/community/discussions/).

Here are some conversations of note going on over the last few weeks:

* [Dropping support for Python 3.6 and Django 2](https://github.com/pulp/community/discussions/3)
* [Making pulp logging more configurable](https://github.com/pulp/community/discussions/20)
* [Optimizing the database fields key generation](https://github.com/pulp/community/discussions/47)


We've asked for opinions on using GitHub Discussions and heard that Pulp users might struggle to keep up to date because GitHub notifications are quite noisy and filtering notification emails can be hard. We're looking into other trial options, like Discourse. We will update our website and blog this happens! We would love to hear what you think. If you have any opinions, feedback or suggestions, let us know!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-08-09-pulp-community-update-july-2021.md
`````markdown
---
date: 2021-08-09T20:55:50+00:00
title: Pulp Community Update (July 2021)
author: Melanie Corr
tags:
  - newsletter
---
<!-- more -->
## Pulp Community Survey 2021

Thank you so much for your responses to the Pulp Community Survey.

Based on trends among survey comments, I have already opened several documentation-related bugs.

I have started a [discussion](https://github.com/pulp/community/discussions/66) about how we can provide better _Getting Started_ information about Pulp's Architecture.

We have some work to do to make Pulp more accessible and will use your feedback to guide us as much as possible.

In the coming weeks, I will publish a summary of what we have learned from your responses on our blog. Just because the survey is closed does not mean that you cannot send us feedback. It means a lot to us when people get in touch and tell us about their experiences with Pulp. The more we know, the better decisions we can make! [Get in touch!](https://pulpproject.org/help/#chat-to-us)

## Pulpcore 3.14 and High Availability

With the release of Pulpcore 3.14 last month brought new high availability capabilities.

In this video, Brian explains the changes to the Pulp architecture, including the new tasking system that has been introduced in Pulpcore 3.14.

Brian gave a presentation on the high availability options that became available last month.

Brian talks through the new architecture and the options that you can use to build out your HA infrastructure.

Watch the full talk here:

<iframe width="560" height="315" src="https://www.youtube.com/embed/vjRvCuo7p4I?start=82" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


## Plugin releases

Here's a roundup of the plugin releases since last time.


### Pulp Container 2.8.0

Exciting times for the Pulp Container plugin!

With the completion of [#6636](https://pulp.plan.io/issues/6636), the plugin now has support for native importing and exporting to facilitate disconnected and air-gapped environment scenarios for synced container repositories.

This release also prepares the Pulp Container plugin for a feature that will be available with Pulpcore 3.15: once you upgrade to that release, you can reclaim disk space for blobs and manifests [#9169](https://pulp.plan.io/issues/9169).

This release is compatible with Pulpcore 3.14 and the forthcoming Pulpcore 3.15.

For more information, see the [release annoucement](https://github.com/pulp/community/discussions/81).

### Pulp Certguard 1.5.0

This release dropped support for Python 3.6 and 3.7. pulp-certguard now supports Python 3.8 and higher. It is compatible with Pulpcore 3.10 through to 3.15.

For more information, see the [release announcement](https://github.com/pulp/community/discussions/79)

### Pulp Debian 2.14.1

The release is compatible with pulpcore 3.14 and the future 3.15 release.

2.14.1 contains two important bug fixes:
* Added a missing **Size** field in publications
* Fixed an `arch=all` package indices that were not syncing when filtering by architecture

The 2.14.0 release initially dropped support for Python 3.6 and 3.7, but this caused problems that were then corrected in the 2.14.1 release with Python 3.6 and 3.7 re-enabled. Pulp Debian plugin now also supports versions Python 3.8 and higher.

For more information, see the [release announcement](https://github.com/pulp/community/discussions/71).

## Pulp Ansible 0.9.0

This release renames bindings to be compatible with Pulpcore 3.14 and higher. For more information, see the [release announcement](https://github.com/pulp/community/discussions/68).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-08-26-pulpcore-3.15-is-generally-available.md
`````markdown
---
date: 2021-08-26T20:55:50+00:00
title: Pulp 3.15 is now generally available!
author: Melanie Corr
tags:
  - release
---
<!-- more -->
We are happy to announce the release of Pulpcore 3.15!

In this blog, we will look at the headline features of the release. However, as well as the headline features, this release contains a myriad of bugfixes, enhancements, as well as a host of new features for the plugin API. for a full list of changes, take a look at the [changelog](https://docs.pulpproject.org/pulpcore/changes.html)

Plugin writers: there are substantial changes made in this release that your plugins will need to be adjusted to accomodate. For more information and further discussion, see [Plugin Adjustents for 3.15](https://discourse.pulpproject.org/t/plugin-adjustments-for-3-15/94).

## Pulpcore 3.15 Features

Here's what's new in this release.

### Encryption for remote database keys [#8192](https://pulp.plan.io/issues/8192)

Although authentication and authorization mechanisms in Pulp keep credentials safe, if the database was compromised, secrets could have been read in plain text.

In this release, encryption has been added for the following fields in the database: ``Remote`` fields ``username``, ``password``,
  ``proxy_username``, ``proxy_password``, and ``client_key``.

### Reclaiming disk space [#8459](https://pulp.plan.io/issues/8459)   

With this new feature, you have more control about how to manage disk space. You now have options to reclaim disk space for:

  * content that you no longer need to serve but want to keep in the repo for historical reasons.
  * repos that were synced with the **on_demand** download policy and contain downloaded files that you want to clear.

For more information, see the [documentation](https://docs.pulpproject.org/pulpcore/en/master/nightly/workflows/reclaim-disk-space.html).

### Customize how you export files [#8695](https://pulp.plan.io/issues/8695)

Previously, the `FileSystemExporter` encountered errors because of differences in file system structures on different operating systems.

With this release, users can now use the `method` field to customize how they export files to filesystem exporters, using hardlinks or symlinks.

With the

### Improvements to the orphan cleanup process [#8824](https://pulp.plan.io/issues/8824)

The orphan cleanup task has been changed and is now a non-blocking task that can be run at any time.
With the new `ORPHAN_PROTECTION_TIME` setting, you can configure the time interval that you want to keep orphan Content and Artifacts before they become candidates for deletion by the orphan cleanup task.

### New Filesystem exporter endpoint [#8860](https://pulp.plan.io/issues/8860)

A new endpoint: `/v3/exporters/core/filesystem/`  for exporting publications or repository versions to the filesystem has been added.

### Keeping things clean [#8931](https://pulp.plan.io/issues/8931)

With the introduction of the new tasking system, all workers that are considered offline are automatically removed from the database periodically to keep the `Worker` table clean.

### Content app authentication [#8951](https://pulp.plan.io/issues/8951)

With this release, authentication has been added to the content app so that plugins writers can require authentication to access and download content.  

### Temporary `ALLOW_SHARED_TASK_RESOURCES` setting [#9148](https://pulp.plan.io/issues/9148)

This temporary option takes effect when using the queue-less worker type. This option allows plugins to use specific resources concurrently, during task execution. In this release, the default setting is `False`. In the 3.16 release, the default setting will change to `True` with 3.16, and in a later release, this setting will eventually be removed.

## Removals

### Python Support Update [#8855](https://pulp.plan.io/issues/8855)

Dropped support for Python 3.6 and 3.7. Pulp now supports Python version 3.8 and higher.

### Update field name for consistency [#9030](https://pulp.plan.io/issues/9030)

The `retained_versions` field on repositories has been renamed to `retain_repo_versions`.


## Deprecations

### Legacy Tasking System [#9159](https://pulp.plan.io/issues/9159)

The legacy tasking system, the former default in previous versions of Pulpcore, is deprecated and will be removed in `pulpcore==3.16`. If you have configured your deployment with  `USE_NEW_WORKER_TYPE=False`, this setting will no longer give you the legacy tasking system starting with ``pulpcore==3.16``.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-09-08-pulp-community-roadmap-update.md
`````markdown
---
date: 2021-09-08T20:55:50+00:00
title: Pulp Community Roadmap Update
author: Melanie Corr
tags:
  - roadmap
---
<!-- more -->
Over the coming months, the Pulp team will focus on the following areas. As with all plans, this roadmap is subject to change. Many of the items in this plan factor into Katello and GalaxyNG roadmaps.
Further updates will be announced on the Pulp blog and community. If you have any questions or feedback, feel free to write or post to our community channels!

### OSTree plugin

While Pulp 2 had an OSTree plugin, Pulp 3 was released without any OSTree functionality.
We are happy to announce that a basic proof-of-concept OSTree plugin is now in the works.
The initial release of the plugin will focus on providing functionality for the basic Pulp workflow that includes synchronizing, importing, and consuming OSTree content in Pulp.
We will publish updates on this blog as the plugin takes shape.
If you would like to contribute to our efforts, or would like to see what we’re working on, you can take a look at our [github repo](https://github.com/pulp/pulp_ostree).

### Pulpcore

* RBAC - roles for Pulp Container and File plugins
* RBAC - content guard
* Alternate Content Sources - [check out the epic](https://pulp.plan.io/issues/7832) to learn more about what this involves
* Performance & Hardening
* Removing the legacy tasking system in favor of the distributed one introduced in Pulpcore 3.14
* Content signing and evaluating Sigstore integration


### RPM Plugin

* Alternate Content Sources -  [check out the epic](https://pulp.plan.io/issues/7832) to learn more about what this involves.

### Ansible Plugin

* Import/export functionality for disconnected environments
* Token support
* RBAC support
* Moving sync lists to the client side

### Pulp Container

* Continuing the efforts to enhance import/export workflow
* Token support enhancements

### Pulp CLI

* Improving documentation
* Alternate Content Source support

### Pulp Installer

* Better support for High Availability deployments
* Python 3.8 installation (EL8 module, Debian 11)
* pulp_installer 3.16.z plans to support installing any Pulpcore 3.16.z release

### Community/CI

* Planning Virtual PulpCon Meetup in Nov 2021
* Redmine → GitHub Issues migration
* [Discourse evaluation](https://discourse.pulpproject.org/) as a replacement for mailing list discussions on design, decision, and support topics
* Conference Prep (DevConf.us/cz, ConfigMgmtCamp, etc.)
* Container and OSTree related community articles
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-10-06-pulp-3-16-is-now-generally-available.md
`````markdown
---
date: 2021-10-06T20:55:50+00:00
title: Pulpcore 3.16 is now Generally Available!
author: Melanie Corr
tags:
  - release
---
<!-- more -->
We are happy to announce the release of Pulpcore 3.16!

In this blog, we will look at the headline features of the release. However, as well as the headline features, this release contains a myriad of bugfixes, enhancements, as well as a host of new features for the plugin API. for a full list of changes, take a look at the [changelog](https://docs.pulpproject.org/pulpcore/changes.html#id1).

## Pulpcore 3.16 features

Let's take a look at what's new in Pulpcore 3.16.

## Support for Alternative Content Sources [#8749](https://pulp.plan.io/issues/8749), [#9375](https://pulp.plan.io/issues/9375)

While the 3.15 release introduced some basic modeling, with 3.16 we now see support added for Alternative Content Sources.

Alternate Content Sources provide a way to sync content from an alternate source so you can sync from a remote repository but use a faster or more reliable source of content such as your local file system. This release provides the functionality to prioritize remote content provided by Alternate Content Sources over regular content when syncing and in the content application.

Validation has also been added to ensure that  the remote type can be used with the Alternative Content Source.

At the moment, this functionality is supported in `pulp_file 1.10` and `pulp_rpm 3.16` plugins. Support is also available in the CLI.

### Tasking system performance improvements [#9326](https://pulp.plan.io/issues/9326)

To improve performance, read-only task resources are now shared for concurrent use.

## Removals

## Bye bye old tasking system [#9157](https://pulp.plan.io/issues/9157)

A new tasking system was introduced in Pulpcore 3.14. Since then, the old tasking system was deprecated and has now been removed.
This also included the removal of the `USE_NEW_WORKER_TYPE` setting.

## OpenAPI schema view removal [#9322](https://pulp.plan.io/issues/9322)

The browseable OpenAPI schema view had sub-optimal performance issues. It had multiple dependencies, and often displayed errors rather than the expected information. For this reason, it was removed and replaced with a less costly, clearer schema view available at `/pulp/api/v3/`.

## pulp import endpoint change [#9382](https://pulp.plan.io/issues/9382)

Previous to this release, the endpoint returned a task. This left the user with the added step of finding the task group based on the task. With this update, the endpoint returns the task group.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-11-23-increasing-pulpcore-compatibility-with-plugin-versions.md
`````markdown
---
date: 2021-11-23T20:55:50+00:00
title: Increasing Pulpcore Compatibility with Plugin Versions
author: Brian Bouterse
---
<!-- more -->
## Tightly coupled plugins and pulpcore

One challenge users and plugin maintainers face is a close coupling between plugin releases and the
corresponding pulpcore versions. For example, pulp_rpm 3.15.z supports pulpcore 3.15 and 3.16, but
not 3.17. Users wanting to upgrade to pulpcore 3.17 need to upgrade pulp_rpm too which makes
upgrades harder. For plugin maintainers, e.g. pulp_rpm maintainers when pulpcore 3.17 is released
they must release a pulp_rpm even if it has no meaningful changes, it has to be done in order to
declare its safe to use with 3.17.

## Solution
At pulpcon 2021 we discussed various options and summarized them in [this discourse thread](https://discourse.pulpproject.org/t/what-to-do-to-reduce-unecessary-plugin-compatibility-releases/236/).
As a solution, we want to try including breaking changes to the Plugin API only in specific pulpcore
releases. We're going to try this idea out with pulpcore==3.20 and hold any breaking changes until
that release.

The next pulpcore release is 3.17, and this time instead of plugins declaring safety with 3.17 and
3.18, they can declare compatibility with 3.17, 3.18, and 3.19.

## Benefits

There are likely three benefits:

* Users can stay on plugin versions for longer and safely upgrade to newer pulpcore
versions when they come out.

* Plugin maintainers can avoid putting out so many releases simply to declare pulpcore
  compatibility.

* Users will enjoy more meaningful plugin releases with new releases containing new features, not
  just "compatibility declarations".

## Downsides

The main downside is that the plugin API cannot remove deprecated interfaces as quickly. This will
be a bit more painful for the pulpcore team.

## What happens after 3.20?

We'll pick another release, e.g. 3.25 perhaps, that will be the next pulpcore release that can
contain breaking Plugin API changes. We'll evaluate this more based on what we've learned between
now and 3.20.

## Feedback

Please send feedback to https://discourse.pulpproject.org/ You can also consider posting directly
on [this thread](https://discourse.pulpproject.org/t/what-to-do-to-reduce-unecessary-plugin-compatibility-releases/236).
Additionally, feedback can be [given via Matrix channels](https://pulpproject.org/help/#chat-to-us).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2021/2021-12-15-pulpcore-3.17-is-ga.md
`````markdown
---
date: 2021-12-15T20:55:50+00:00
title: Pulpcore 3.17 is now Generally Available
author: Melanie Corr
tags:
  - release
---
<!-- more -->
# Pulpcore 3.17 release announcement

We are happy to announce the release of Pulpcore 3.17!

Let's take a look at the key features of this release.

For a full list of bugfixes, as well as Plugin API enhancements and bugfixes, see the [changelog](https://docs.pulpproject.org/pulpcore/changes.html)

### New compatibility process

This is the first release where we will trial our  attempt to increase plugin compatibility. For plugin maintainers, please read [increasing Pulpcore compatibility with plugin versions](https://pulpproject.org/2021/11/23/increasing-pulpcore-compatibility-with-plugin-versions/) for more information.

## RBAC enhancements ([#9411](https://pulp.plan.io/issues/9411), [#9413](https://pulp.plan.io/issues/9413), [#9415](https://pulp.plan.io/issues/9415), [#9498](https://pulp.plan.io/issues/9498), [#9604](https://pulp.plan.io/issues/9604))

RBAC functionality in Pulp now has a new Roles model. To introduce and support roles in RBAC, it was necessary to introduce some supporting functions as well as rework existing functionality to use roles.

Here is a summary of the main introductions and changes to RBAC:

* A viewset to manage roles (as a set of permissions) was added. System defined locked roles appear read only.
* New views have been added to assign model-level and object-level roles to users and groups.
* Plugins can define locked system roles with their viewsets.
* New ``assign_role`` and ``remove_role`` functions have been added to the Plugin API.
* Existing access policies on viewsets were also rewritten to use roles.

RBAC's Content Guards have also been reworked to use roles.
The following new endpoints were added to the RBAC capable viewsets to manage object-level role assignments:

* ``add_roles``
* ``remove_roles``
* ``list_roles``
* ``my_permissions``

This currently includes groups, tasks and RBAC content guard.
 
If you ever want to revert a modified access policy to the default settings, a new `reset` endpoint has been added to provide for this. This will clear the customized flag, too, so updates from the plugin will be received again.

#### Related deprecations

The ``permissions_assignment`` field of the access policies has been renamed to ``creation_hooks``.

A compatibility patch has been added to be removed with pulpcore=3.20. The ``permissions`` argument to ``creation_hooks`` has been deprecated to be removed with pulpcore=3.20, as per our new process.


##  [#8554](https://pulp.plan.io/issues/8554) Bulk deletion support

Over time, the database can fill with task-records. In the past, you had to manually delete individual tasks.

With this release, a new ``/tasks/purge/`` API  has been added with which you can bulk-delete old tasks records based on their completion timestamps.


## [#9459](https://pulp.plan.io/issues/9459) Restricting username and passwords in remote URLs

For security purposes, validation has been added  to prevent credentials being used in remote URLs.

This effort also includes adding data migration to ensure that existing credentials are moved from remote urls and into remote ``username``/``password`` fields for existing remotes.


## [#9518](https://pulp.plan.io/issues/9518) Update to storage.url

It's now possible to send Content-type and Content-disposition headers in the `AzureStorage.url`.

## [#9532](https://pulp.plan.io/issues/9532) Metadata signing update

Administrators can add signing services to Pulp using the command line tools.

With this release, Signing service scripts can now access the public key fingerprint using the ``PULP_SIGNING_KEY_FINGERPRINT`` environment variable.

This allows for more generic scripts that do not need to "guess" (hardcode) what key they should use.


## Removals

## [#9327](https://pulp.plan.io/issues/9327) Resource manager flag

The ``pulpcore-worker`` binary no longer accepts the ``--resource-manager`` flag. There is no resource manager anymore, so this flag is no longer needed.

## [#9498](https://pulp.plan.io/issues/9498) RBAC permission endpoints removed

Removed tech previewed ``assign_permission`` and ``remove_permission`` endpoints from RBAC content guard viewset.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2022/2022-02-10-pulp-documentation-sig-findings-and-suggestions.md
`````markdown
---
date: 2022-02-10T20:55:50+00:00
title: Pulp Docs SIG Findings & Conclusions
author: Melanie Corr
tags:
  - community, documentation, workflows
---
<!-- more -->
Over the last few weeks, a few of us have been meeting to discuss Pulp's documentation.

## Problem statement

The Pulp project currently has no user path into the project apart from our user documentation.

The way our documentation is currently organized means that users have to jump back and forth from Pulpcore docs, installation docs, to Plugin docs.

Our Pulpcore documentation provides general content and feature descriptions to remain plugin-neutral. This lack of specificity does not help the users get what they need.  

Our Pulpcore documentation talks about workflows without any indication if they apply to specific plugins or not.

Because of the current state of our documentation, we have blocked off the front door into our project from all but those who are skilled enough install and run Pulp in spite of the status quo.

Our current documentation blocks further growth of our community, which means that we do not get to take advantage of the benefits of being a FOSS project.

### Solution

We need to shift away from documenting general workflows in Pulpcore to specific, tutorial style  workflows for each plugin.

The desired end state would mean that post-installation, the users would have everything they need to work with every workflow of that content type within each set of plugin documentation.

The plugin documentation would become the single source of truth for everything relating to the concept type.

This would require increasing the workflow documentation for each Pulp plugin.

The Pulpcore documentation would be whittled away to provide only high level Pulpcore conceptual docs and high-level generic use cases, and links to where the user can provide specific docs by content type.

### Lessons Learned: Good docs pay dividends

Think of docs as an investment. We can also think of them as a snowball, rolling downhill, getting bigger and bigger.

Whatever time we save in not writing docs, we repay in answering support questions from the community, supporting colleagues in the projects Pulp feeds into, and in the bugs we need to fix months later when enterprise solutions that integrate Pulp in their products encounter them for the first time during upgrades or in production environments.

### What can we do?

Here are a few ideas for prioritizing docs as part of our everyday workflows.

#### Incorporate workflow docs into feature completion

Instead of simply describing it when a new feature is implemented in a plugin, the developer walks through the user scenario recording the steps end to end, completing the
"As a user, I want to achieve x" workflow, and documents the workflow as part of the closure process for the feature.

#### Look at all future doc work as if it were a recipe.

1. Define what are their needs before the user begins.
2. Write end to end steps to achieve this.

#### Perform a gap analysis of plugin workflows vs pulpcore workflows

As a mini team, look at the workflows defined in Pulpcore and make a list of those available for the plugin you support.

Check whether CLI commands exist for any documentation that references API calls. If so, replace with the CLI.

If any missing workflow docs can be paired with current feature work, use the opportunity to refactor and improve that docset.

#### Your suggestions please

We would love to hear any feedback or suggestions that you might have for us to make the necessary improvements.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2022/2022-03-28-how-stack-hpc-uses-pulp.md
`````markdown
---
date: 2022-03-28T20:55:50+00:00
title: StackHPC Pulp Use Case
author: Melanie Corr
tags:
  - community, StackHPC, workflows, centos
---
<!-- more -->
StackHPC have written a very comprehensive case study about how the Centos Stream announcement impacted them and motivated them to prioritize a project to improve their "release train".

Pulp plays a critical role in ensuring the stability and repeatability of their deployment.

If you're looking to understand how all the pieces fit together, check out Mark Goddard's article [All Aboard the Release Train](https://stackhpc.com/all-aboard-the-release-train.html)

StackHPC have built upon Pulp Squeezer and have an [Ansible collection](https://galaxy.ansible.com/stackhpc/pulp) that you can use to build out your own solution.

Let us know what you think!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2022/2022-09-19-pulp-2-eol.md
`````markdown
---
date: 2022-09-19T20:55:50+00:00
title: Pulp 2 End of Life Announcement
author: Ina Panova
tags:
  - pulp2, eol
---
<!-- more -->
## Pulp 2 End of Life Announcement


After over 2 years of maintenance mode, Pulp 2 will End of Life on **November 30, 2022.**

The milestone events, descriptions, and dates for the affected Pulp 2 project are shown below:


| Event | Description| Date |
| -------- | -------- | -------- |
| Maintenance Mode | The date when Pulp 2 entered maintenance mode. | June 15, 2020|
| End Of Life Announcement | The date this announcement is being made public. | September 19, 2022|
| End Of Life | The last date after which Pulp 2 project support will no longer be available. Bugs and security issues will no longer be fixed. Releases will no longer be issued. Changes of any kind will no longer be accepted.| November 30, 2022 |

### Pulp 2 Migration/Upgrade Options

An existing Pulp 2 installation can use the Migration plugin to migrate from Pulp 2 to Pulp 3. For more information how to use the Migration plugin see the [documentation](https://docs.pulpproject.org/pulp_2to3_migration/).

If you have any questions or feedback, write to the https://discourse.pulpproject.org/
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2022/2022-11-01-pulpcon-2022-schedule.md
`````markdown
---
date: 2022-11-01T20:55:50+00:00
title: Pulpcon 2022 Schedule
author: Dennis Kliban
tags:
  - pulpcon, community
---
<!-- more -->
## Virtual Pulpcon - November 7-11, 2022 Schedule

Pulpcon is going to take place virtually from November 7 to 11, 2022. The schedule and information about joining can be found [here](https://hackmd.io/@pulp/pulpcon2022_schedule).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2023/2023-02-14-rpm-redirect-serving-perf-scale-testing.md
`````markdown
---
date: 2023-02-14T20:55:50+00:00
title: RPM Content Service Performance and Scale Testing
author: Brian Bouterse
tags:
  - pulp_rpm, performance
---

## Goals

1. Help pulp_rpm users plan the number of pulp-content apps to serve a given traffic rate for their 
   object-storage backed installation.

2. Determine what the architectural scalability limit is for pulp_rpm content serving.

To achieve these goals in this blog post, I'll be doing two things:

* Characterize the relationship between sustained requests / sec to the pulp-content app and the 
  number of pulp-content apps without increases in latency.

* Identify rate limiting components in various test scenarios.

<!-- more -->

## Conclusions

We'll unpack how I reached these conclusions, but for those interested in just those, let's get them
stated right up front:

1. Using Redis caching for Pulp should allow for a cluster to horizontally scale to the size most if
   not all req / sec rates.
    * In doing so, just add more CPU for additional pulp-content processes
    * Make sure your Redis also doesn't run out of CPU. You could horizontally scale this component
      too.

2. The response times in all tests are well within the 2 second yum/dnf response timeout, which
   should ensure their redirects at least without any issue.


## Results - With Redis Caching

* Each pulp-content gunicorn worker process having exclusive access to an idle 2.50GHz Xeon CPU can
  serve 625 req / sec.
* The pulp-content gunicorn worker process uses a stable 16MB each.
* The pulp-content gunicorn worker is CPU bound with CPU directly correlating to req / sec.
* A single container Redis was able to serve about 3K req / sec with 20% CPU in use.
* postgreSQL was almost entirely unloaded and never spawned more than 1 process and never registered
  with `top` during any caching-enabled run.
* The maximum median response time in almost all runs was 25ms.
* The 95th percentile response time in almost all runs was 70ms.


## Results - Without Redis Caching

* Each pulp-content gunicorn worker process having exclusive access to an idle 2.50GHz Xeon CPU can
  serve 108 req / sec.
* The pulp-content gunicorn worker process uses a stable 16MB each.
* The pulp-content gunicorn worker is both 3/4 CPU and 1/4 DB bound with both resources closely
  correlating to req / sec.
* postgreSQL forked workers and began loading them.
* The maximum median response time in almost all runs was 16ms.
* The 95th percentile response time in almost all runs was 28ms.


## System Under Test

Now that we've seen the results, let's go through the system that produced them...

### Physical hardware All on AWS in EU-West-2

1 Load generator - m4.2xlarge instance:

* 8 64-bit CPUs, Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz
* 32GB Ram

1 Pulp test machine - m4.2xlarge instance:

* 8 64-bit CPUs, Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz
* 32GB Ram

Minio providing artifact storage also running on the system under test.


### Software Under Test

Pulp will be deployed as containers on the "Pulp Test Machine" hardware above. This was done using
the generic [docker-compose scale](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose#running-with-docker-and-scaling)
feature.

* 1 container for pulp-api
* N containers for pulp-content
* 2 containers for pulp-worker
* 1 redis container
* 1 postgresql container

Pulp was deploying with commands like:

```shell
sudo docker-compose up --scale pulp_content=1 -d --force-recreate
sudo docker-compose up --scale pulp_content=2 -d --force-recreate
sudo docker-compose up --scale pulp_content=4 -d --force-recreate
```

Minio was deployed using its [docker-compose example](https://github.com/minio/minio/blob/master/docs/orchestration/docker-compose/docker-compose.yaml)
on the same machine as the system under test. Deploying minio separately as it is not actually under
test would have been better, however, these artifacts aren't going to actually be served during
testing, so running effectively unused containers should use a minimum amount of hardware resources
on the system under test.

The Pulp settings were configured to connect to minio by applying the diff below to [this file](https://github.com/pulp/pulp-oci-images/blob/latest/images/compose/assets/settings.py).
These changes are mostly taken from [these docs](https://docs.pulpproject.org/pulpcore/installation/storage.html#amazon-s3).
Note you need to manually create the Minio bucket named `pulp3` as specified by the config.

```diff
diff --git a/images/compose/assets/settings.py b/images/compose/assets/settings.py
index 54fcfbf..651873b 100644
--- a/images/compose/assets/settings.py
+++ b/images/compose/assets/settings.py
@@ -16,3 +16,16 @@ PUBLIC_KEY_PATH = "/etc/pulp/keys/container_auth_public_key.pem"
 PRIVATE_KEY_PATH = "/etc/pulp/keys/container_auth_private_key.pem"
 TELEMETRY = False
 STATIC_ROOT = "/var/lib/operator/static/"
+
+DEFAULT_FILE_STORAGE = "storages.backends.s3boto3.S3Boto3Storage"
+MEDIA_ROOT = ""
+AWS_ACCESS_KEY_ID = 'minioadmin'
+AWS_SECRET_ACCESS_KEY = 'minioadmin'
+AWS_S3_REGION_NAME = "eu-central-1"
+AWS_S3_ADDRESSING_STYLE = "path"
+S3_USE_SIGV4 = True
+AWS_S3_SIGNATURE_VERSION = "s3v4"
+AWS_STORAGE_BUCKET_NAME = "pulp3"
+AWS_S3_ENDPOINT_URL = 'http://nginx:9000'
+AWS_DEFAULT_ACL = "@none None"
```

The versions under test are: pulpcore 3.22.0 and pulp_rpm 3.18.9


### Architecture

Locust ---HTTP-Requests---> pulp-content

Locust <---302-Redirect--- pulp-content

Components:

* The load generator ([locust](https://locust.io/) with fasthttp backend)
* The pulp-content processes

Notes:

* The Locust test script will not follow the redirect. Minio is not the software under test, only 
  pulp-content is.
* The reverse proxy is entirely bypassed as we do not want to test nginx, only Pulp.


## Metrics

* sustained requests / sec - The number of redirects issued per second.
* latency median - Pulp's typical 302 redirect response time.
* latency 95th percentiles paired with the requests / sec - Pulp's majority case 302 redirect
  response time.
* redis container CPU percentage - Indicates how heavily loaded Redis is.
* PostgreSQL Process count - Indicates how heavily loaded PostgreSQL is. It forks more when
  postgreSQL is processing more load.
* PostgreSQL average CPU usage across all PostgreSQL processes. - Indicates how heavily loaded 
  postgreSQL is.
* Number of pulp-content Gunicorn workers. In practice, how many did gunicorn fork. - Indicates the
  actual number of processes handling requests.
* Average pulp-content Gunicorn workers CPU. Averaged across all the pulp-content gunicorn
  workers. - Indicates how heavily loaded the pulp-content processes are.


## Scenarios

For each scenario increase the number of Locust users until the pulp-content app no longer shows
increases in req/sec with additional increases in locust users.

1. 1 pulp-content process (2 gunicorn processes when heavily loaded). Redis caching enabled.
2. 2 pulp-content process (4 gunicorn processes when heavily loaded). Redis caching enabled.
3. 4 pulp-content process (8 gunicorn processes when heavily loaded). Redis caching enabled. This is
   the maximum number of cpus on the machine.
4. 2 pulp-content process (4 gunicorn processes when heavily loaded). Redis caching disabled. This
   is useful for comparing against scenario (2) to determine the impact of caching.


## Data Collected

See [this spreadsheet](resources/sheet.html)
for the raw data collected.

A few comments on the data:

* The number of requests per CPU is computed in Column T as (req / sec) / process count / CPU load
  coefficient. For example cell T2 is computed as `=M2/I2/(J2/100)`. This is what drives the
  conclusions of 625 and 108 req / sec for cache-enabled and cache-disabled respectively.
* The tests with up to 2 or 4 actual gunicorn workers (rows 2-25) are able to push the CPU averages
  a lot higher than 8 gunicorn workers (rows 27 - 34) because other services like docker overhead,
  Redis, etc. are able to run on the remaining 4 unused processors. Thus, the rows 2-25 are likely a
  better test because pulp isn't competing for hardware resources in those scenarios. The overall
  conclusions are built on these as these are expected to generalize to other systems more
  accurately.
* Postgresql percentage is missing in many places. `top` did not even register in these scenarios,
  so it's effectively zero.
* I didn't track Redis percentage initially, but given the direction relationship between traffic
  volume and Redis cpu %, and a maximum in testing of 22% at max req/sec, we can deduce the unfilled
  columns are lower than that.
* Locust users make a request, wait for a response, and the make another request. Keep in mind that
  as user count increases, latency also likely increases, and so linear increases in Locust user
  count produce sublinear increases in req / sec.
* The load generator hardware is never the rate limiting component. The low CPU percentage and
  memory fields confirm this.


### Appendix A: Test Setup

Sync with policy="immediate" a RHEL9 baseos. To do this:

1. Create a debug CDN cert with [these instructions](https://source.redhat.com/groups/public/release-engineering/release_engineering_rcm_wiki/how_to_generate_cdn_debug_certs).

2. Create and sync rhel9 baseos with these commands

```
pulp rpm remote create --name rhel9_baseos --url https://cdn.redhat.com/content/dist/rhel9/9/x86_64/baseos/os/ --policy immediate --client-cert @cdn_1056.pem --client-key @cdn_1056.pem --ca-cert @redhat-uep.pem
pulp rpm repository create --name rhel9_baseos --autopublish --remote rhel9_baseos
pulp rpm distribution create --base-path rhel9_baseos --name rhel9_baseos --repository rhel9_baseos
pulp rpm repository sync --name rhel9_baseos
```



### Appendix B: Locust Configuration

Locust is deployed on the load generator maching using its [docker-compose documentation](https://docs.locust.io/en/stable/running-in-docker.html)
and run with the command: `sudo docker-compose up --scale worker=16`.

The urls from the RHEL9 baseos are gathered into a text file using this script:

```
import argparse
import requests
from bs4 import BeautifulSoup
from urllib.parse import urljoin

def process_page(url):
    page = requests.get(url)
    soup = BeautifulSoup(page.content, "html.parser")
    links = soup.find_all("a")
    for link in links:
        if link.text == "../":
            continue
        link_url = urljoin(url, link["href"])
        if link_url.endswith(".rpm"):
            print(link_url)
        elif "://" in link_url:
            process_page(link_url)

parser = argparse.ArgumentParser(description='Get the full URLs of .rpm files at a specific url.')
parser.add_argument('base_url', help='The base url to fetch links from')
args = parser.parse_args()

base_url = args.base_url
process_page(base_url)
```

Here is the locustfile.py

```
import random
import re
import time

from locust import FastHttpUser, task


NUM_CONTENT_APPS = 2

START_PORT = 24737
END_PORT = START_PORT + NUM_CONTENT_APPS


class QuickstartUser(FastHttpUser):

    def on_start(self):
        with open("/mnt/locust/urls.txt") as file:
            self.urls = file.readlines()

    @task
    def random_rpm(self):
        original_url = random.choice(self.urls)
        new_port = str(random.randint(START_PORT, END_PORT - 1))
        new_url = re.sub(r':\d+', ':' + new_port, original_url)
        self.client.get(
            new_url,
            allow_redirects=False
        )
```


### Appendix C: Notes

#### Commands on system under test

1. Install docker https://docs.docker.com/engine/install/fedora/#install-using-the-repository
2. `sudo dnf install docker-compose git`
3. Setup portainer via docker-compose
4. Setup pulp via docker compose
5. Install minio and configure pulp to talk to it
6. Make sure to create the bucket manually for pulp to use also


#### Commands on load generator

1. Install docker https://docs.docker.com/engine/install/fedora/#install-using-the-repository
2. `sudo dnf install docker-compose`
3. Setup portainer via docker-compose
4. Setup locust via docker-compose  https://docs.locust.io/en/stable/running-in-docker.html
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2024/2024-11-06-pulp-ui-beta.md
`````markdown
---
date: 2024-11-11T08:55:50+00:00
title: Pulp UI Beta out now in Pulp images
author: Gerrod Ubben
tags:
  - announcement
---

Pulp-UI (beta) is now available in the latest `pulp/pulp` image. This was a huge effort over the 
last two months to get the beta into the hands of our users. Big thanks to Martin Hradil, Zita 
Nemeckova and everyone who helped us get here. Check out the demo below:
<!-- more -->
### Demo

<iframe width="560" height="315" src="https://www.youtube.com/embed/RwNA4EiR-rs?si=-hTHys2RCuEjuuEY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

### Test it out

[Follow the quickstart guide](site:pulp-oci-images/docs/admin/tutorials/quickstart/) with the 
`latest` tag and visit the `/ui/` endpoint in a browser to check it out. If you wish to disable 
the UI then set the env `PULP_UI=false` when starting the container.

### Want to help out?

Come join us in developing the new UI at [https://github.com/pulp/pulp-ui/](https://github.com/pulp/pulp-ui/).
We appreciate any feedback and help.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2025/checkpoint.md
`````markdown
---
date: 2025-03-11T08:30:00+00:00
title: Checkpoint Support - A Journey Towards Predictable and Consistent Deployments
author: Moustafa Moustafa
tags:
  - announcement
---

In the ever-evolving landscape of software development, ensuring predictability and consistency in
deployments has always been a challenge.
Our team faced similar hurdles, especially when managing historical versions of repositories.
We needed a solution that could help us recreate environments from specific points in time, ensure
reproducible deployments, and track changes in package behavior over time.

Inspired by the success stories of [Ubuntu Snapshots on Azure](https://ubuntu.com/blog/ubuntu-snapshots-on-azure-ensuring-predictability-and-consistency-in-cloud-deployments) and the
[increased security and resiliency of Canonical workloads on Azure](https://techcommunity.microsoft.com/blog/linuxandopensourceblog/increased-security-and-resiliency-of-canonical-workloads-on-azure---now-in-previ/3970623), we
embarked on a journey to develop a feature that could address these challenges.

<!-- more -->

## The Problem

Imagine working on a project where you need to ensure that your deployment environment is consistent
with a specific point in time.
This is crucial for debugging, testing, and even for compliance purposes. However, without a robust
system in place, managing and accessing historical versions of repositories can be a daunting task.

## The Solution: Checkpoint

After weeks of brainstorming, development, and testing, we are thrilled to announce the release of
the Checkpoint feature in Pulp!
Think of it as similar to [snapshot.debian.org](https://snapshot.debian.org/) or [snapshot.ubuntu.com](https://snapshot.ubuntu.com/).
This new addition allows you to manage and access historical versions of repositories, enhancing
your content management capabilities.
**This feature is available as a tech-preview starting from Pulp version 3.74.0.**

## Key Benefits

* **Historical Version Management:** Easily recreate environments from specific points in time.
This is particularly useful for debugging and compliance purposes.
* **Reproducible Deployments:** Ensure consistent replication of validated environments.
This means that you can deploy the same environment multiple times with the same results.
* **Structured Update Workflow:** Track changes in package behavior over time.
This helps in understanding how updates affect your environment and in planning future updates.

## How It Works

The Checkpoint feature integrates seamlessly with Pulp, allowing you to create and manage
checkpoints for your repositories.
These checkpoints act as snapshots, capturing the state of your repository at a specific point in time.
You can then use these checkpoints to recreate environments, ensuring that they are consistent with
the state of the repository at the time the checkpoint was created.

For more details on how plugins can enable the checkpoint feature, check out [this guide](https://pulpproject.org/pulpcore/docs/dev/learn/subclassing/checkpoint/).

For repo admins looking to manage checkpoints for their repos, [this guide](https://pulpproject.org/pulpcore/docs/user/guides/checkpoint/) provides all the necessary steps.

## Example Usage with Pulp CLI

Here's a step-by-step example of how to use the checkpoint feature with the pulp CLI.

### Setting Up the Repository, Remote, and Distributions

First, set up the repository, remote, and distributions:

```shell
pulp file remote create --url https://fixtures.pulpproject.org/file/PULP_MANIFEST --name myfile
pulp file repository create --name myfile --remote myfile
pulp file distribution create --name myfile --repository myfile --base-path myfile  # regular distro
pulp file distribution create --checkpoint --name myfile-snapshot --repository myfile --base-path checkpoints/myfile  # checkpoint distro
```

### Creating an Empty Publication for Testing

Next, create an empty publication for testing purposes:

```shell
pulp file publication create --checkpoint --repository myfile  # use "--checkpoint" to create the publication
http ${CONTENT_ADDR}/pulp/content/checkpoints/myfile/  # one checkpoint

HTTP/1.1 200 OK
Content-Length: 296
Content-Type: text/html
Date: Tue, 18 Mar 2025 14:04:11 GMT
Server: Python/3.10 aiohttp/3.8.1
X-PULP-CACHE: MISS
<html>
<head><title>Index of </title></head>
<body bgcolor="white">
<h1>Index of </h1>
<hr><pre><a href="../">../</a>
<a href="20250318T140338Z/">20250318T140338Z/</a>                                                                                   18-Mar-2025 14:03
</pre><hr></body>
</html>
```

### Syncing the Repository and Creating Another Checkpoint Publication

Sync the repository and create another checkpoint publication:

```shell
pulp file repository sync --name myfile
pulp file publication create --checkpoint --repository myfile
http ${CONTENT_ADDR}/pulp/content/checkpoints/myfile/

HTTP/1.1 200 OK
Content-Length: 448
Content-Type: text/html
Date: Tue, 18 Mar 2025 14:05:04 GMT
Server: Python/3.10 aiohttp/3.8.1
X-PULP-CACHE: MISS
<html>
<head><title>Index of </title></head>
<body bgcolor="white">
<h1>Index of </h1>
<hr><pre><a href="../">../</a>
<a href="20250318T140338Z/">20250318T140338Z/</a>                                                                                   18-Mar-2025 14:03
<a href="20250318T140442Z/">20250318T140442Z/</a>                                                                                   18-Mar-2025 14:04
</pre><hr></body>
</html>


http ${CONTENT_ADDR}/pulp/content/checkpoints/myfile/20250318T140442Z/

HTTP/1.1 200 OK
Content-Length: 835
Content-Type: text/html
Date: Tue, 18 Mar 2025 14:06:31 GMT
Server: Python/3.10 aiohttp/3.8.1
X-PULP-CACHE: MISS
<html>
<head><title>Index of /pulp/content/checkpoints/myfile/20250318T140442Z/</title></head>
<body bgcolor="white">
<h1>Index of /pulp/content/checkpoints/myfile/20250318T140442Z/</h1>
<hr><pre><a href="../">../</a>
<a href="1.iso">1.iso</a>                                                                                               18-Mar-2025 14:04  1.0 kB
<a href="2.iso">2.iso</a>                                                                                               18-Mar-2025 14:04  1.0 kB
<a href="3.iso">3.iso</a>                                                                                               18-Mar-2025 14:04  1.0 kB
<a href="PULP_MANIFEST">PULP_MANIFEST</a>                                                                                       18-Mar-2025 14:04  228 Bytes
</pre><hr></body>
</html>
```

### Testing the Redirect

Finally, test the redirect by attempting to access a timestamp for which no checkpoint exists. The system will automatically redirect you to the nearest checkpoint created at or before the specified timestamp in the URL.

```shell
$ http ${CONTENT_ADDR}/pulp/content/checkpoints/myfile/20250318T140340Z/

HTTP/1.1 301 Moved Permanently
Content-Length: 22
Content-Type: text/plain; charset=utf-8
Date: Tue, 18 Mar 2025 14:09:19 GMT
Location: /pulp/content/checkpoints/myfile/20250318T140338Z/
Server: Python/3.10 aiohttp/3.8.1
301: Moved Permanently
```

## Moving Towards SDP

The introduction of the Checkpoint feature is a significant step towards achieving Safe Deployment
Practices (SDP).
By ensuring that deployments are predictable and consistent, we can reduce the risk of errors and
improve the overall quality of our software.

We are excited about the possibilities that the Checkpoint feature brings and look forward to seeing
how it helps you in your projects.

Happy coding!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2025/pulp_at_microsoft.md
`````markdown
---
date: 2025-06-04T00:00:00Z
title: "Using Pulp at Microsoft: Coming Full Circle"
author: David Davis
tags:
  - community
---

Hi, I’m David. If you've been using Pulp for long enough, there's a good chance you may have
encountered a bug I contributed. I worked on Pulp for many years while at Red Hat, from the
beginning of the Pulp 3 back when it was just a proof of concept. Those early days were full of
whiteboarding and discussions around which technologies to use (e.g. futures or asyncio?), whether
to create a CLI or Web UI, and how to integrate Pulp 3 with products like Satellite and Ansible
Galaxy.

Fast-forward to today, I now work at Microsoft on the Azure Core Linux team. And in a really
interesting bit of serendipity, we've spent the past few years using Pulp to overhaul
[packages.microsoft.com](https://packages.microsoft.com), Microsoft's service for Linux package
repositories. I've gone from developing Pulp full-time to running it as a user.

<!-- more -->

It's been a wild and rewarding ride. Our project — a critical part of Microsoft's support for Linux
— distributes packages for Microsoft's Linux distro (Azure Linux), VS Code, Edge, and more.
When we started overhauling the old infrastructure, we knew we wanted something flexible,
extensible, and built with modern architecture in mind, and Pulp fit the bill perfectly.

Using Pulp we were able to leverage several cloud-based Azure services such as Azure Kubernetes
Service (AKS) for orchestrating containers, Azure Blob Storage to store artifacts, and Azure Front
Door to handle global content delivery. This gave us a highly scalable and reliable platform to
serve Linux packages to Microsoft customers around the globe.

We even got to contribute back to Pulp along the way — adding features like checkpoint support and
[apt-by-hash](https://wiki.ubuntu.com/AptByHash) in pulp_deb. If you're interested to learn more
about how we use Pulp at Microsoft, today we've published a blog post detailing our use of Pulp:

["How Pulp powers Microsoft's Linux Software
Repositories"](https://techcommunity.microsoft.com/blog/linuxandopensourceblog/how-pulp-powers-microsofts-linux-software-repositories/4420257)
by Colin Mixon.

Huge thanks to the Pulp project for making this possible. I believe Pulp’s greatest strength is its
passionate, dedicated community, and it’s been a real pleasure to collaborate with everyone.
Watching the project grow and thrive has been incredible — and using it in a whole new context has
been even more rewarding.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2025/release_whenever.md
`````markdown
---
date: 2025-01-03T00:00:00Z
title: Whenever, Whatever-based Release Cycle
author: Matthias Dellweg
tags:
  - CI/CD
  - security
  - automation
---

"Release fast, release often!" is not a metaphor, it is a mantra.

Pulp used to be a service mainly running on-premises as part of products with extremely long release cycles.
About two years ago, we heard rumors to add highly volatile cloud service style installations to the mix.
Because releasing a new version of pulpcore or any of its many plugins was a herculean task, the rumors were accompanied by very concerning sentences like:
_"We will run this service off of main branches of all the plugins."_
If that does not make you shiver, you can just stop reading here and go on with your happy life.

<!-- more -->

So I started to realize the only way we can both serve the fast and volatile cloud service world as well as the established slow longterm stable on premises product world is to be able to release whatever component of pulp within the blink of an eye.

Back on 2022 Dec 7th I wrote down these lines (verbatim) in a simple file as a conversation starter.

```
# Continuous Delivery for Pulp

We want to deliver pulp continuously:
- Deploy from `main` branch(es).
- Release whatever whenever.
  - All main branches must be ready to release at all times.
  - Git dependencies and dependencies on pre-release versions should fail a ready-to-ship check and prevent merging.

We need to get rid of "Required-PR". You can install with pip from a git branch.
Plugins need to depend on released versions of Pulpcore.
When a plugin needs a core feature, make a release. (Don't make a fuzz about it. Is releasing every tuesday too much?)
```

And I started having conversations, first small, then with increasing audience.
Until one day I decided the idea was ripe to be presented at the Pulp team all hands meeting.
A big shoutout to my peers there. They were just about the right amount of wary.
They asked exactly the right questions and let me shatter a fair amount of unspoken but gridlocked assumptions.
Fast forward to now, they have fully adopted the idea and actively supported the effort to ultimate success.

But to set the stage right, we didn't start from nothing.
Our project ecosystem already had the so called plugin template, that helps us to keep all the CI/CD infrastructure in a dozen git repositories in sync.
Also a huge amount of work has been done to turn the manual half a day per version release process into a completely automated one.

So standing on the shoulders of these giants, we needed to adjust the following things:

- Pull requests against plugins must be developed against the last released version of pulpcore, as you would do with any other library.
    - Not only do we not use the main branch of pulpcore in a plugin's CI anymore, but also stopped using the `Required-PR` feature that, for the benefit to run against uncommitted changes, required fragile coordination of merges spanning multiple repositories.
    - In fact, this policy forces us to better coordinate the deprecation schedules for breaking changes and make sure other changes are additive in nature.
- Since `pulp_file` and `pulp_certguard` are poster children for `pulpcore` tests having a circular test dependency, these three components were merged into a single repository.
- All tests must be run on pull requests (for code changes) and nightly on main (for unexpected changes in the environment).
    - Performance tests are the exception here, because developer experience is very important too.
- The criterion for inclusion in the main branch must be "shippable". No dependencies on unreleased code are allowed. The pull request review therefore is the last gate to inclusion in the next release.
- The test workflow should contain as much of the release process as possible up to but not including the point where packages are uploaded to PyPi / Rubygems.
- The actual release process should contain only the steps necessary to build and publish the final packages.
    - i.e. there's no need to repeat running the tests, because the code passed that gate already.
- The release of a version should be fully automated to the end from the click of a button.
    - Since there is no way to test the release process, running it more often (creating more releases) is better.
- We needed to adjust our deprecation policy slightly (from 5 releases to 15 between breaking changes).
- The results of the nightlies must be made aware to the team. Being red must lead to an all hands on deck call.

The most astonishing side effect in all of this is, when we realized, we stopped spending about six engineer hours per week in a crowded meeting on discussing whether performing the next release is worth doing or we should delay once more.
We now simply release a new Y-release of Pulpcore every Tuesday given a feature is pending in main, and a Z-release on all the supported branches that received any backports or dependency updates.
We can also release a new bugfix release at any time if asked to do so.
Another sign of the team fully supporting the idea is the prompt contribution of a `check_release` script to replace the manual examination of these conditions.
We even automated preparing a new release branch (y-stream) and managing the patchback-labels for supported branches.

For plugins we deliberately did not impose these rules as they all have their respective maintainer.
However, they all receive the automating facilities via the plugin template.

We picked up the new release cadence in May 2023 with the pulpcore 3.25.0 release.
The frequency of y-releases increased instantaneously from about one in two to three months to roughly two per month (not every week a new feature release was necessary).
Also we still allow ourselves to delay a breaking change release (recurring every 15 y-releases) by a couple of weeks for carefully selected release blockers.

![Histogram of Pulpcore releases](version_hist.png)

Nothing comes for free though.
The fact that we produce so many y-Releases now made it an absolute necessity to reduce the number of supported release branches.
But we managed to negotiate with our downstream products that we keep a small set of them alive for their lifetime in a supported product.
i.e. we keep these branches up to date with the plugin template and allow backporting bugfixes.
When the stars are properly alinged this allows us to get a security bugfix released on an old branch in twenty minutes.
The branches in between are simply abandoned.

Once again I want to express a heartfelt thank you to my team, including management, and end with reciting two very reassuring, quoteworthy and related phases I came accross on the way:

*Quote from [Opensource Security Podcast](https://opensourcesecurity.io/2024/03/17/episode-420-whats-going-on-at-nvd/):*
> I don't care about vulnerability management for as much as for example your ability to ship an update.
  Like if you can't ship an update no amount of vulnerability management matters." (00:31:29)

*Quote from Grant Gainey (in a private message):*
> If we want to release early, often, automatically, and reliably - and especially if we want to be responsive to things like "prod services are down we need this fix ASAP to restart them" - then every minute we spend on making the CI better, is going to be repaid.
```


### References:

- <https://discourse.pulpproject.org/t/need-to-reduce-the-number-of-release-branches-aka-we-need-an-lts-strategy/449>
- <https://discourse.pulpproject.org/t/switching-pulpcore-to-calendar-versioning-scheme/771>
- <https://discourse.pulpproject.org/t/pulpcore-3-25-is-on-the-horizon-and-upcoming-changes-in-release-cadence/840>
- <https://discourse.pulpproject.org/t/discussion-pulp-release-process-improvements/860>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/2025/writing_docs_with_ai.md
`````markdown
---
date: 2025-05-22T00:00:00Z
title: Writing Docs with AI - An Experiment in Workflow
author: Brian Bouterse
tags:
  - documentation
  - AI
  - workflow
  - NotebookLM
---

Writing documentation can often be a significant effort. Recently, I needed to document a new feature, the "Alternate Content Source". But where to start? The core information existed in a user conversation on Matrix. How could I turn that scattered information into structured, usable documentation efficiently? I decided to experiment with an AI tool, specifically NotebookLM, to see if it could streamline the process.

The starting point was straightforward. I took the raw Matrix conversation and uploaded it as a source into NotebookLM. I also added the existing pulpproject.org website as another source, hoping it would provide context and stylistic examples (Note: this specific detail about adding the pulpproject.org site comes from my process description, not the provided source text). My initial prompt was simple: "write me markdown docs from this user conversation". It produced the content for [this pull requested](https://github.com/pulp/pulpcore/pull/6610).

<!-- more -->

### Experimenting with Conversation Styles

NotebookLM offers different "conversation styles" which seem to influence the tone and structure of the output. I tried two main styles for this task to see which was best suited for generating technical documentation:

*   **Default Style:** This was my first attempt. The output was mostly usable markdown documentation. It extracted the key points from the conversation and presented them in a relatively coherent structure, suitable for integration into our existing documentation.

*   **Guide Style:** Hoping for a more pedagogical approach, I switched to the "Guide" style. However, this proved less suitable for generating technical documentation. The output adopted a first-person narrative, often reading like an author explaining the topic directly to the reader. It also included numerous links, often to general concepts or external resources, which were unnecessary and cluttered the output for the specific task of writing concise project documentation. It became clear that the "Guide" style is **not ideal for generating straightforward reference or how-to documentation**.

### The Iterative Rewriting Challenge and Solution

My initial thought for refinement was to use NotebookLM's conversational interface for iterative feedback. The first draft wasn't perfect, so I tried telling NotebookLM what needed changing and asking it to rewrite parts while retaining the markdown formatting.

This approach **did not work well**. Any subsequent generations after the first often failed to retain the markdown formatting, even when explicitly requested to do so in my feedback. The output would revert to plain text or inconsistent formatting, making it unusable without significant manual cleanup.

A much more effective method emerged: **Clear the chat history**. Instead of having a back-and-forth conversation, I found it worked best to clear the existing chat with NotebookLM, keep the uploaded sources, and then refine my *original* prompt by appending my feedback to it. For instance, I might change the prompt from "write me markdown docs..." to "write me markdown docs... focusing on X and excluding Y, ensure Z is covered...". Keeping the revised prompt as a single, comprehensive instruction and re-prompting from a clean slate consistently produced markdown-formatted output based on the updated requirements.

### Results and Necessary Refinements

Using the "clear history and re-prompt" strategy with the "Default" conversation style, I was able to generate very usable documentation drafts quickly. The output required some hand-editing, primarily to remove links that seemed specific to the NotebookLM environment and didn't make sense in the final documentation, and a few minor content rewrites for clarity or flow. Any content issues were entirely due to a lack of content from the original user discussion on Matrix.

It generated the content for [this pull request](https://github.com/pulp/pulpcore/pull/6610).

Overall, the process was **significantly quicker and yielded higher quality initial drafts** compared to starting from scratch with direct authorship. It allowed me to rapidly structure the information from the Matrix conversation and get a solid base document ready for final polish and integration.

### Acknowledging the AI Assistant

In the spirit of exploring AI-assisted workflows, it feels appropriate to reveal something about *this* blog post itself.

This blog post you've just read was also drafted with the help of NotebookLM. I provided it with my notes on the documentation writing process and used an existing blog post from the Pulp project, like the one detailing the "Whenever, Whatever-based Release Cycle", as a formatting example source. The aim was to see if it could follow a specific markdown structure and incorporate the described content points accurately.

The process mirrored the successful method used for the documentation: clear history, provide the notes and the formatting example source, and use a single, clear prompt. The result is what you see before you, demonstrating another application of AI in streamlining content creation, from technical docs to blog posts explaining the process.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-17-introduction.md
`````markdown
---
date: 2011-05-17T20:55:50+00:00
id: 229
title: Introduction
date: 2011-05-17T19:32:11+00:00
author: Jay Dobies
layout: post
guid: http://pulp.noopenblockers.com/?p=229
permalink: /2011/05/17/introduction/
categories:
  - Uncategorized
---
<!-- more -->
We like Pulp. A lot.

We also like our users. We like them a lot too.

We like them so much that we wanted a way to combine the two. A way to freely and frequently share Pulp information, news, tips, and demos. That&#8217;s where this developer blog comes in.

The intention of this blog is to keep the community informed of Pulp progress and advances. Things such as&#8230;

  * Pulp Feature &#8220;Spotlights&#8221;, focusing on demonstrating various Pulp features to meet user needs.
  * Release information, including release notes and bug fixes.
  * Developer-centric articles discussing implementation and opportunities for contributors
  * And more&#8230;

If by some chance you stumbled here without knowing what Pulp is, here is the obligatory series of links to various related project sites:

  * [Pulp Project Site](http://pulpproject.org)
  * [User Guide](http://pulpproject.org/ug/)
  * [Installation Instructions](http://pulpproject.org/ug/UGInstallation.html#installation)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-18-pulp-protected-repositories.md
`````markdown
---
date: 2011-05-18T20:55:50+00:00
id: 20
title: 'Spotlight: Pulp Protected Repositories'
date: 2011-05-18T15:42:27+00:00
author: Todd Sanders
layout: post
guid: http://pulp.noopenblockers.com/?p=20
permalink: /2011/05/18/pulp-protected-repositories/
enclosure:
  - |
    |
        http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/repoauth.ogv
        21017578
        video/ogg
        
categories:
  - Spotlight
---
<!-- more -->
Have you ever wanted to control access to your yum repositories?  Well, with Pulp you can!  This entry will explore the steps necessary to configure the Pulp Server and Consumer for [Repository Authentication](http://www.pulpproject.org/ug/UGRepoAuth.html "Repository Authentication"); including creating the necessary PKI infrastructure.

## Steps:

### 1.  Enable Repo Auth on Pulp Server

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span><span style="color: #c20cb9; font-weight: bold;">vi</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>pulp<span style="color: #000000; font-weight: bold;">/</span>repo_auth.conf</pre>
      </td>
    </tr>
  </table>
</div>

This is essentially the on/off switch for protected repos. If this is set to false, **all** repositories on the Pulp Server will be available publicly for consumption.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>main<span style="">&#93;</span></span>
enabled:  true
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>repos<span style="">&#93;</span></span>
cert_location: /etc/pki/content/
global_cert_location: /etc/pki/content/
protected_repo_listing_file: /etc/pki/content/pulp-protected-repos</pre>
      </td>
    </tr>
  </table>
</div>

### 2. Create a CA Certificate

A Certificate Authority is required for issuing and validating entitlement certificates.  I will use openssl to create my CA. First the key, then the CA itself.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ openssl genrsa <span style="color: #660033;">-out</span> caPulp.key <span style="color: #000000;">2048</span>
&nbsp;
Generating RSA private key, <span style="color: #000000;">2048</span> bit long modulus
....+++
......................+++
e is <span style="color: #000000;">65537</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span>0x10001<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ openssl req -new -x509 -days 365 -key caPulp.key -out caPulp.crt
&nbsp;
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:US
State or Province Name (full name) []:North Carolina
Locality Name (eg, city) [Default City]:Raleigh
Organization Name (eg, company) [Default Company Ltd]:Red Hat Inc
Organizational Unit Name (eg, section) []:Engineering
Common Name (eg, your name or your server's hostname) []:Pulp Server CA
Email Address []:tsanders@redhat.com</pre>
      </td>
    </tr>
  </table>
</div>

### 3. Create the Entitlement Certificate

The Entitlement Certificate is the credential that will be used by yum clients for accessing the protected repository. Again, the first step here is to create a key for signing.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ openssl genrsa <span style="color: #660033;">-out</span> client.key <span style="color: #000000;">2048</span>
&nbsp;
Generating RSA private key, <span style="color: #000000;">2048</span> bit long modulus
......................................+++
.....................................+++
e is <span style="color: #000000;">65537</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span>0x10001<span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

Next we need to create the [extensions](https://fedorahosted.org/pulp/wiki/RepoAuth#Extensions "Extensions") file that contains the entitlements you wish to include. The most import oid is 1.3.6.1.4.1.2312.9.2.0000.1.6. This oid contains the relative path of the pulp repository that you intend to protect.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span><span style="color: #c20cb9; font-weight: bold;">vi</span> extensions.txt</pre>
      </td>
    </tr>
  </table>
</div>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>myRepo<span style="">&#93;</span></span>
<span style="color: #000099;">basicConstraints</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">CA:FALSE</span>
1.3.6.1.4.1.2312.9.2.0000.1.1<span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">ASN1:UTF8:Pulp Production MyRepo x86_64</span>
1.3.6.1.4.1.2312.9.2.0000.1.2<span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">ASN1:UTF8:pulp-prod-myrepo-64</span>
1.3.6.1.4.1.2312.9.2.0000.1.6<span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">ASN1:UTF8:repos/myRepo/</span></pre>
      </td>
    </tr>
  </table>
</div>

And finally we create the entitlement certificate .csr and sign it.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ openssl req -new -key client.key -out client.csr
&nbsp;
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:US
State or Province Name (full name) []:North Carolina
Locality Name (eg, city) [Default City]:Raleigh
Organization Name (eg, company) [Default Company Ltd]:Red Hat Inc
Organizational Unit Name (eg, section) []:Engineering
Common Name (eg, your name or your server's hostname) []:Pulp Entitlement Certificate
Email Address []:tsanders@redhat.com
&nbsp;
Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:</pre>
      </td>
    </tr>
  </table>
</div>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ openssl x509 -req -days 365 -CA caPulp.crt -CAkey caPulp.key -CAcreateserial -extfile extensions.txt 
  -extensions myRepo -in client.csr -out client.crt
&nbsp;
Signature ok
subject=/C=US/ST=North Carolina/L=Raleigh/O=Red Hat Inc
/OU=Engineering/CN=Pulp Entitlement Certificate/emailAddress=tsanders@redhat.com
Getting CA Private Key</pre>
      </td>
    </tr>
  </table>
</div>

**Notes:** 
  
1. The name in the extensions.txt file [ ] is what is passed to the -extensions argument when signing the request. This allows you to pick which batch of entitlements to include.
  
2. The -CAcreateserial option will create a serial number file to allow openssl to manage the serial number incrementing for each successive signing. In this case the file will be caPulp.srl. Once this file exists, use the -CAserial option to supply this file when signing.

### 4. Create the Repository

We are now ready to create our repository using the CA and Entitlement Certificate that we created above.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ pulp-admin repo create <span style="color: #660033;">--id</span>=myRepo <span style="color: #660033;">--name</span>=myRepo --consumer_ca=caPulp.crt  --consumer_cert=client.crt  
   --consumer_key=client.key
&nbsp;
Successfully created repository <span style="color: #7a0874; font-weight: bold;">&#91;</span> myRepo <span style="color: #7a0874; font-weight: bold;">&#93;</span></pre>
      </td>
    </tr>
  </table>
</div>

### 5. Upload Content

In our case I am choosing to upload an rpm that I created locally, however, this could have also easily as been a feeded repository mirroring content from a remote location.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin content upload --repoid=myRepo --nosig pulp-demo-1.0-1.fc14.x86_64.rpm
&nbsp;
* Starting Content Upload operation. See /var/log/pulp/client.log for more verbose output
&nbsp;
* Performing Content Uploads to Pulp server
&nbsp;
* Performing Repo Associations 
&nbsp;
* Content Upload complete.</pre>
      </td>
    </tr>
  </table>
</div>

### 6. Create Consumer and Bind to Repository

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-client -u admin -p admin consumer create --id=myConsumer
&nbsp;
Successfully created consumer [ myConsumer ]</pre>
      </td>
    </tr>
  </table>
</div>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-client consumer bind --repoid=myRepo
&nbsp;
Successfully subscribed consumer [myConsumer] to repo [myRepo]</pre>
      </td>
    </tr>
  </table>
</div>

### 7. Manually update /etc/yum.repos.d/pulp.repo on Consumer

Currently, Pulp doesn&#8217;t handle automatically setting the appropriate PKI attributes in the yum.repos.d configuration during bind. This is coming in a future sprint, so for now we&#8217;ll make these mods by hand. Without this added configuration, as you&#8217;ll see in the demo below, yum will not be able to access the repository.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #666666;">$ </span><span style="color: #c20cb9; font-weight: bold;">vi</span> <span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>yum.repos.d<span style="color: #000000; font-weight: bold;">/</span>pulp.repo</pre>
      </td>
    </tr>
  </table>
</div>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;">#
# Pulp Repositories
# Managed by Pulp client
#
&nbsp;
<span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>myRepo<span style="">&#93;</span></span>
<span style="color: #000099;">name</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> myRepo</span>
<span style="color: #000099;">enabled</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 1</span>
<span style="color: #000099;">sslverify</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 0</span>
<span style="color: #000099;">gpgcheck</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> 0</span>
<span style="color: #000099;">baseurl</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> https://localhost/pulp/repos/myRepo</span></pre>
      </td>
    </tr>
  </table>
</div>

Next you need to copy the ca, entitlement certificate and key (from steps 2 & 3) to the /etc/pki/content directory on the consumer. Then add the following three attributes to the [myRepo] section:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000099;">sslclientkey</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/etc/pki/content/client.key</span>
<span style="color: #000099;">sslclientcert</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/etc/pki/content/client.crt</span>
<span style="color: #000099;">sslcacert</span><span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;">/etc/pki/content/caPulp.crt</span></pre>
      </td>
    </tr>
  </table>
</div>

That&#8217;s it! You should now be able to yum install packages from the authenticated repository on your pulp server.

## Demo

A simple screen-cast walking you through steps 4-7 from above.

<embed width="640" height="480" src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/repoauth.ogv" autostart="false">
</embed>


  
[Open in New Window](http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/repoauth.ogv)

&nbsp;
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-18-spotlight-content-delivery-server-basics.md
`````markdown
---
date: 2011-05-18T20:55:50+00:00
id: 727
title: 'Spotlight: Content Delivery Server Basics'
date: 2011-05-18T15:23:30+00:00
author: Jay Dobies
layout: post
guid: http://pulp.noopenblockers.com/?p=80
permalink: /2011/05/18/spotlight-content-delivery-server-basics/
enclosure:
  - |
    |
        http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/cds-spotlight.ogv
        7604658
        video/ogg
        
categories:
  - Spotlight
---
<!-- more -->
One of the more recent features in Pulp is the ability to use the Pulp server to push repositories out to be hosted on external servers. These Content Delivery Servers (CDS) can be used to distribute content across firewalls and geographic locations, as well as providing an added layer of security by selectively deploying only a subset of the Pulp server&#8217;s content to a specific instance.

## Installation and Configuration

A server is configured to run as a CDS by first installing the Pulp CDS package and its dependencies:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost<span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #c20cb9; font-weight: bold;">yum install</span> pulp-cds</pre>
      </td>
    </tr>
  </table>
</div>

If not already installed, httpd will be installed as part of the installation process. The virtual host for the CDS is also installed through the `/etc/httpd/conf.d/pulp-cds.conf` file.

The CDS will need to be able to resolve the hostname of the Pulp server in order to be able to download content from it. This will typically be done through DNS, but in development environments this often means needing to edit `/etc/hosts` to add an entry for the Pulp server.

Additionally, the CDS will have to be configured to use the messaging broker on the Pulp server so it can be manipulated from the server itself. This is done through the `/etc/pulp/cds.conf` file:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>server<span style="">&#93;</span></span>
<span style="color: #000099;">host</span> <span style="color: #000066; font-weight:bold;">=</span><span style="color: #660066;"> pulp.example.com</span></pre>
      </td>
    </tr>
  </table>
</div>

Like the Pulp server itself, the CDS uses Apache to host its repositories. The typical steps to configure the Apache instance with an SSL certificate should be taken at this point.

Once the configuration changes have been made, the CDS processes are started through the init script:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> service pulp-cds start
Starting goferd                                            <span style="color: #7a0874; font-weight: bold;">&#91;</span>  OK  <span style="color: #7a0874; font-weight: bold;">&#93;</span>
Starting httpd:                                            <span style="color: #7a0874; font-weight: bold;">&#91;</span>  OK  <span style="color: #7a0874; font-weight: bold;">&#93;</span></pre>
      </td>
    </tr>
  </table>
</div>

## Usage

Once the CDS server is running, it must be registered to a Pulp server. A CDS may only be registered to one Pulp server at a given time. Once registered, the CDS will only accept commands from the Pulp server that it is currently registered to. When a CDS is unregistered from a Pulp server, it is once again open to be registered by a different Pulp server.

### Registration

Registration is done through the `pulp-admin cds` commands. The registration command requires the hostname of the CDS as identification. Keep in mind, however, that the Pulp server itself does not need to be able to resolve the CDS hostname to an IP address. Rather, the hostname is used to determine the unique message bus ID for that CDS. A display name can also be specified using the `--name` argument.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> pulp-admin cds register <span style="color: #660033;">--hostname</span> cds.example.com
Successfully registered CDS <span style="color: #7a0874; font-weight: bold;">&#91;</span>cds.example.com<span style="color: #7a0874; font-weight: bold;">&#93;</span></pre>
      </td>
    </tr>
  </table>
</div>

Registered CDS instances can be displayed through `pulp-admin cds list` command:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> pulp-admin cds list
+------------------------------------------+
                CDS Instances
+------------------------------------------+
&nbsp;
Name                	cds.example.com           
Hostname            	cds.example.com           
Description         	None                     
Repos               	None                     
Last Sync           	Never                    
Status:
   Responding       	Yes                      
   Last Heartbeat   	<span style="color: #000000;">2011</span>-05-<span style="color: #000000;">12</span> <span style="color: #000000;">17</span>:07:<span style="color: #000000;">21.834959</span>+00:00</pre>
      </td>
    </tr>
  </table>
</div>

### Repository Association

A registered CDS is neat, but not very useful. Repositories are _associated_ with a CDS to customize the content they serve. Repositories that are protected on the Pulp server using repository authentication will also be protected on any CDS instance they are associated with (more on that in a future blog).

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> pulp-admin cds associate_repo <span style="color: #660033;">--hostname</span> cds.example.com <span style="color: #660033;">--repoid</span> demo
Successfully associated CDS <span style="color: #7a0874; font-weight: bold;">&#91;</span>cds.example.com<span style="color: #7a0874; font-weight: bold;">&#93;</span> with repo <span style="color: #7a0874; font-weight: bold;">&#91;</span>demo<span style="color: #7a0874; font-weight: bold;">&#93;</span></pre>
      </td>
    </tr>
  </table>
</div>

### CDS Synchronization

Repository association configures the server&#8217;s knowledge of which repositories belong on which CDS instances. In order to get the bits to the CDS instance, it must be synchronized. The `pulp-admin cds sync` command is used to trigger this process and the `pulp-admin cds status` command is used to check its progress (in the future, this will be enhanced to more closely resemble the abilities for monitoring repo syncs).

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> pulp-admin cds <span style="color: #c20cb9; font-weight: bold;">sync</span> <span style="color: #660033;">--hostname</span> cds.example.com
Sync <span style="color: #000000; font-weight: bold;">for</span> CDS <span style="color: #7a0874; font-weight: bold;">&#91;</span>rhino.marvel.u<span style="color: #7a0874; font-weight: bold;">&#93;</span> started
Use <span style="color: #ff0000;">"cds status"</span> to check on the progress
&nbsp;
<span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost ~<span style="color: #7a0874; font-weight: bold;">&#93;</span> pulp-admin cds status <span style="color: #660033;">--hostname</span> cds.example.com
+------------------------------------------+
                 CDS Status
+------------------------------------------+
&nbsp;
Name                	cds.example.com           
Hostname            	cds.example.com           
Description         	None                     
Repos               	demo                     
Last Sync           	<span style="color: #000000;">2011</span>-05-<span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">20</span>:<span style="color: #000000;">35</span>-04:00
Status:
   Responding       	Yes                      
   Last Heartbeat   	<span style="color: #000000;">2011</span>-05-<span style="color: #000000;">12</span> <span style="color: #000000;">17</span>:<span style="color: #000000;">23</span>:<span style="color: #000000;">54.328154</span>+00:00</pre>
      </td>
    </tr>
  </table>
</div>

Repository contents are stored in the `/var/lib/pulp-cds` directory on the CDS instance:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost<span style="color: #7a0874; font-weight: bold;">&#93;</span> ll <span style="color: #660033;">-R</span> <span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>pulp-cds<span style="color: #000000; font-weight: bold;">/</span>
<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>pulp-cds<span style="color: #000000; font-weight: bold;">/</span>:
total <span style="color: #000000;">8</span>
-rw-r--r--. <span style="color: #000000;">1</span> root root    <span style="color: #000000;">5</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> cds_repo_list
drwxr-xr-x. <span style="color: #000000;">3</span> root root <span style="color: #000000;">4096</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> demo
&nbsp;
<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>pulp-cds<span style="color: #000000; font-weight: bold;">/</span>demo:
total <span style="color: #000000;">8</span>
-rw-r--r--. <span style="color: #000000;">1</span> root root <span style="color: #000000;">2184</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> pulp-demo-<span style="color: #000000;">1.0</span>-<span style="color: #000000;">1</span>.fc14.x86_64.rpm
drwxr-xr-x. <span style="color: #000000;">2</span> root root <span style="color: #000000;">4096</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> repodata
&nbsp;
<span style="color: #000000; font-weight: bold;">/</span>var<span style="color: #000000; font-weight: bold;">/</span>lib<span style="color: #000000; font-weight: bold;">/</span>pulp-cds<span style="color: #000000; font-weight: bold;">/</span>demo<span style="color: #000000; font-weight: bold;">/</span>repodata:
total <span style="color: #000000;">28</span>
-rw-r--r--. <span style="color: #000000;">1</span> root root  <span style="color: #000000;">745</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> filelists.sqlite.bz2
-rw-r--r--. <span style="color: #000000;">1</span> root root  <span style="color: #000000;">308</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> filelists.xml.gz
-rw-r--r--. <span style="color: #000000;">1</span> root root  <span style="color: #000000;">736</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> other.sqlite.bz2
-rw-r--r--. <span style="color: #000000;">1</span> root root  <span style="color: #000000;">357</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> other.xml.gz
-rw-r--r--. <span style="color: #000000;">1</span> root root <span style="color: #000000;">1721</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> primary.sqlite.bz2
-rw-r--r--. <span style="color: #000000;">1</span> root root  <span style="color: #000000;">662</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> primary.xml.gz
-rw-r--r--. <span style="color: #000000;">1</span> root root <span style="color: #000000;">2685</span> May <span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">23</span> repomd.xml</pre>
      </td>
    </tr>
  </table>
</div>

Repositories on a CDS are hosted at the same URL as for the Pulp server itself:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #7a0874; font-weight: bold;">&#91;</span>root<span style="color: #000000; font-weight: bold;">@</span>localhost<span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #c20cb9; font-weight: bold;">wget</span> <span style="color: #660033;">--no-check-certificate</span> https:<span style="color: #000000; font-weight: bold;">//</span>cds.example.com<span style="color: #000000; font-weight: bold;">/</span>pulp<span style="color: #000000; font-weight: bold;">/</span>repos<span style="color: #000000; font-weight: bold;">/</span>demo<span style="color: #000000; font-weight: bold;">/</span>pulp-demo-<span style="color: #000000;">1.0</span>-<span style="color: #000000;">1</span>.fc14.x86_64.rpm
HTTP request sent, awaiting response... <span style="color: #000000;">200</span> OK
Length: <span style="color: #000000;">2184</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span>2.1K<span style="color: #7a0874; font-weight: bold;">&#41;</span> <span style="color: #7a0874; font-weight: bold;">&#91;</span>text<span style="color: #000000; font-weight: bold;">/</span>plain<span style="color: #7a0874; font-weight: bold;">&#93;</span>
Saving to: “pulp-demo-<span style="color: #000000;">1.0</span>-<span style="color: #000000;">1</span>.fc14.x86_64.rpm”
&nbsp;
<span style="color: #000000;">100</span><span style="color: #000000; font-weight: bold;">%</span><span style="color: #7a0874; font-weight: bold;">&#91;</span>==============================================================<span style="color: #000000; font-weight: bold;">&gt;</span><span style="color: #7a0874; font-weight: bold;">&#93;</span> <span style="color: #000000;">2</span>,<span style="color: #000000;">184</span>       --.-K<span style="color: #000000; font-weight: bold;">/</span>s   <span style="color: #000000; font-weight: bold;">in</span> 0s      
&nbsp;
<span style="color: #000000;">2011</span>-05-<span style="color: #000000;">12</span> <span style="color: #000000;">13</span>:<span style="color: #000000;">28</span>:<span style="color: #000000;">21</span> <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">24.3</span> MB<span style="color: #000000; font-weight: bold;">/</span>s<span style="color: #7a0874; font-weight: bold;">&#41;</span> - “pulp-demo-<span style="color: #000000;">1.0</span>-<span style="color: #000000;">1</span>.fc14.x86_64.rpm” saved <span style="color: #7a0874; font-weight: bold;">&#91;</span><span style="color: #000000;">2184</span><span style="color: #000000; font-weight: bold;">/</span><span style="color: #000000;">2184</span><span style="color: #7a0874; font-weight: bold;">&#93;</span></pre>
      </td>
    </tr>
  </table>
</div>

### Binding and Distribution

When a consumer is bound to a repository, the Pulp server takes into account any CDS instances that host the repository in question. A list of all locations at which the repository is hosted is returned to the consumer and used as a mirror list for the repository. The Pulp server keeps track of these distributions and will organize these mirror lists to distribute consumer load across all hosts of a given repository. In the future, this distribution can be enhanced to take into account other factors than simple round-robin distribution and make the determination of the &#8220;best&#8221; CDS for a given repository for each consumer.

## Demo

<embed src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/cds-spotlight.ogv" autostart="false" width="640" height="480" />


  
[Open in New Window](http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/cds-spotlight.ogv)

## Conclusion

In the middle of writing this, my boss pinged me to tell me he set up a demo environment using a Pulp server in Boston and a CDS instance in Tel Aviv. Geographic issues are just one of the issues addressed by the CDS functionality. CDS instances can be configured with only a subset of repositories to better control which content is available to which clients.

The next big CDS related feature on the horizon is the introduction of CDS groups. The implications extend beyond the simple administration benefits of being able to affect more than a single CDS at a time. The intention is that CDS instances will be able to use other CDS instances in their same group for load balancing and fail over scenarios.

In the meantime, the basic story for Content Delivery Servers is implemented and available in Pulp. This story includes the ability to register CDS instances, associate and synchronize repositories on a per-CDS basis, and passing this information to consumers when they are bound to balance repository accesses across all possible sources.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-23-configuring-the-pulp-server-for-ssl.md
`````markdown
---
date: 2011-05-23T20:55:50+00:00
id: 253
title: Configuring the Pulp Server for SSL
date: 2011-05-23T12:55:24+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=253
permalink: /2011/05/23/configuring-the-pulp-server-for-ssl/
categories:
  - Uncategorized
---
<!-- more -->
Almost everyone has used SSL at one point. What&#8217;s less common is the need to set it up on a server of your own. Since Pulp uses HTTPS for both its API access and repository hosting, most Pulp admin users quickly find themselves with the need to configure their Apache instance beyond the defaults established at installation. This article describes the process of doing so.

I tried to write this in a way that if you know what you&#8217;re doing, you can just skim the article for the pre-formatted sections as command reference. If you&#8217;re new to the concepts, the text should guide you through some high level knowledge to get you oriented.

## What&#8217;s the Issue?

On the surface, it looks like there is nothing to do. When Apache and mod_ssl are installed, HTTPS &#8220;just works.&#8221;

The problem revolves around what SSL really is. An SSL certificate is a pairing of a user&#8217;s (or server&#8217;s) public key with identity information. Clients to that server use the public key in the SSL certificate to encrypt data. The server uses its private key to decrypt that data.

What&#8217;s to stop another server from claiming someone&#8217;s identity? When I get a certificate that says &#8220;Hi, I&#8217;m the server for redhat.com&#8221;, how do I know it&#8217;s telling the truth?

That&#8217;s where the certificate authority (or CA) comes in. A CA _signs_ an SSL certificate to indicate that it has validated the identity of the public key&#8217;s owner. Some CAs, such as VeriSign or GeoTrust, are considered trusted. So if VeriSign signed an SSL certificate, the client can be confident that the certificate is legitimate.

Ever go to a website and get a pop-up from your browser that says the site is using an untrusted SSL certificate? That means it wasn&#8217;t signed by one of the trusted CA certificates included by default in the browser. For example, in Firefox you can view these defaults through Preferences -> Advanced -> View Certificates -> Authorities tab. Notice how you have VeriSign and GeoTrust authorities without having to have installed them manually.

For development purposes, it often doesn&#8217;t make sense to go to an established CA to get every SSL certificate signed. Nor is it economical; I don&#8217;t need to pay for certificates for the half-dozen guests I use for development purposes. In those cases, we can generate our own public key infrastructure (PKI), with its own CA certificates used to sign our SSL certificates.

One last piece of information that often trips people up. Remember that the SSL certificate pairs a public key with an identity. Part of that identity is expressed through the _common name_ (or CN) of the certificate. The CN value of the certificate must match the hostname of the server on which it is used. In other words, if I attempt to connect to foo.com but the SSL certificate it presents to me says it is bar.com, I probably shouldn&#8217;t trust it.

## Let&#8217;s Make Some Certificates

Armed with a high-level understanding of the pieces, it&#8217;s actually pretty simple to create them.

### CA Certificate

We start with making a fake CA. Again, in a production environment we would skip this step and use an established CA. But for development and testing purposes, simulating our own CA is a pretty simple solution.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ openssl genrsa <span style="color: #660033;">-out</span> ca.key <span style="color: #000000;">2048</span>
$ openssl req <span style="color: #660033;">-new</span> <span style="color: #660033;">-x509</span> <span style="color: #660033;">-days</span> <span style="color: #000000;">365</span> <span style="color: #660033;">-key</span> ca.key <span style="color: #660033;">-out</span> ca.crt</pre>
      </td>
    </tr>
  </table>
</div>

Let&#8217;s break that down&#8230;

The first command generates a private key. This key is used when signing the SSL certificate that we&#8217;ll generate later. This should be kept secret; if someone gets access to your CA certificate and private key, they can sign certificates on your behalf. That&#8217;s bad.

The second command generates the CA certificate itself. This command will prompt you for a number of different things. The only thing to be careful of is that the CN **cannot** be the same as the server for any SSL certificates you will create. This isn&#8217;t a hard requirement so much as a convention; many clients will assume that if the CA and SSL certificate CNs are the same, it&#8217;s probably someone signing it on their own and shouldn&#8217;t be trusted. Otherwise, the CN can be anything you want, for example &#8220;pulp-ca&#8221;.

When that&#8217;s finished, we have our fake certificate authority. The ca.crt will be used both to sign SSL certificates and by clients to verify that a trusted CA has signed them. Keep in mind that multiple SSL certificates can be signed by the same CA. So given an environment of one Pulp server and multiple CDS instances, all of their SSL certificates can be signed by the same CA.

### SSL Certificates

Generating an SSL certificate is a very similar process, just with an extra step in the middle. The process is as follows:

  * Generate a private key. Ideally this should be unique for each server but isn&#8217;t a technical requirement.
  * Generate a _certificate signing request_. This request uses the public key for the above private key and pairs identity information with it. The term &#8220;signing request&#8221; is important; it&#8217;s not a real certificate yet, just a request for one.
  * Give the signing request to the CA to sign. The CA will do some magic to ensure that you are who you said you are in the signing request. If the CA is happy with that, they will use their CA certificate and private key to sign the request, producing a full-blown certificate.
  * Install the SSL certificate given to you by the CA and the private key (remember to keep the private key) into the web server.

For this example, we&#8217;re going to play the part of the CA, using the CA certificate and private key generated above to do the signing.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ openssl genrsa <span style="color: #660033;">-out</span> server.key <span style="color: #000000;">2048</span>
$ openssl req <span style="color: #660033;">-new</span> <span style="color: #660033;">-key</span> server.key <span style="color: #660033;">-out</span> server.csr
$ openssl x509 <span style="color: #660033;">-req</span> <span style="color: #660033;">-days</span> <span style="color: #000000;">365</span> <span style="color: #660033;">-CA</span> ca.crt <span style="color: #660033;">-CAkey</span> ca.key -set_serial 01 <span style="color: #660033;">-in</span> server.csr <span style="color: #660033;">-out</span> server.crt</pre>
      </td>
    </tr>
  </table>
</div>

The first step generates the private key. It&#8217;s possible to encrypt this with a password, however doing so will require you to specify that password each time it&#8217;s used (read: each time you start the web server). That&#8217;s cumbersome, especially in a development environment, so we&#8217;ll leave it unprotected.

The second is the signing request generation. It will prompt you for many of the same fields as before. The extremely important part is that the CN specified matches the server on which the certificate will be installed. Bad mojo happens if they don&#8217;t.

The last step is the process of actually signing the request by the CA. That will produce the certificate itself (server.crt) which we&#8217;ll install in Apache in a bit. One thing to keep in mind is that the `-set_serial` argument is used to uniquely identify each certificate signed by the CA. Be careful to use a different number for each certificate. There are other ways of managing serial numbers that I won&#8217;t get into here.

These three steps need to be repeated for each server that&#8217;s going to be using SSL, supplying the correct CN each time.

## Configuring Apache

Technically speaking, we only need the server&#8217;s SSL certificate and private key to configure Apache. Before we get to that, let me explain why you can&#8217;t just throw away your CA certificate.

When a server hands a client an SSL certificate, the client needs to make sure it&#8217;s legit. The client can use a CA certificate to verify that the SSL certificate was signed by it. In other words, if I were to try to impersonate redhat.com, the client can verify that my SSL certificate is fake since it wasn&#8217;t signed by the CA they expected it to be signed by. Most clients bundle in the trusted CA certificates by default, but since we&#8217;re using a custom CA, we&#8217;ll likely need to provide it to our client.

When mod_ssl is installed, it generates a self-signed SSL certificate using &#8220;localhost&#8221; as the CN. We want to replace that with our custom created SSL certificates by editing `/etc/httpd/conf.d/ssl.conf`

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">SSLCertificateFile /etc/pki/example/server.crt
SSLCertificateKeyFile /etc/pki/example/server.key</pre>
      </td>
    </tr>
  </table>
</div>

In the above example, I&#8217;ve taken the server SSL certificate and private key we generated and put them in `/etc/pki/example`. When Apache is restarted, it will use those files for its end of the SSL handshake.

## Wrapping Up

At this point, our Apache server is configured to use a CA-signed SSL certificate whose CN is scoped to the machine&#8217;s hostname instead of simply localhost. Depending on the client being used, our CA certificate may need to be made available. An example of how to do this in a yum repo definition can be found at the end of the [Pulp Protected Repositories Spotlight](/2011/05/18/pulp-protected-repositories/) elsewhere on this blog.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-27-pulp-community-release-12.md
`````markdown
---
date: 2011-05-27T20:55:50+00:00
id: 294
title: Pulp Community Release 12
date: 2011-05-27T19:15:40+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=294
permalink: /2011/05/27/pulp-community-release-12/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/05/cr-12-2.png" alt="" title="cr-12-2" width="451" height="167" class="alignnone size-full wp-image-295" srcset="http://www.pulpproject.org/wp-content/uploads/2011/05/cr-12-2-300x111.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/05/cr-12-2.png 451w" sizes="(max-width: 451px) 100vw, 451px" />

The Pulp team is proud to announce the availability of Community Release 12.

## Enhancements

  * [Repo Discovery](http://pulpproject.org/ug/UGRepo.html#discovery) feature added which includes new APIs to schedule repository discovery and check discovery status. Functionality added to the CLI as well through the `pulp-admin repo discovery` command.
  * Feed URLs for managing repositories [have been changed](http://pulpproject.org/ug/UGRepo.html#crud) to remove the `type:url` format. The feed type is inferred from the URL itself.
  * Legacy RHN support removed from Pulp.
  * Added support for text only errata.
  * Enhanced errata delete to check for references before allowing the delete to take place.
  * [Package details](https://fedorahosted.org/pulp/wiki/PackageDetails) enhanced to track more metadata.
  * Standardized date/time input and output to [ISO8601 format](https://fedorahosted.org/pulp/wiki/DateAndTimeFormats)
  * Server/Agent communications secured by a [shared secret authorization scheme.](https://fedorahosted.org/pulp/wiki/Agent#Authorization)
  * Over 30 Bugs resolved, accessible through [bugzilla.](https://bugzilla.redhat.com/buglist.cgi?target_release=Sprint%2023&#038;query_format=advanced&#038;product=Pulp&#038;classification=Other)

## Upgrade Notes

  * Run `pulp-migrate` to upgrade to latest DB after upgrading the Pulp packages and before running the `pulp-server` script.

## Build Versions

  * Pulp: 0.181
  * Grinder: 0.99
  * Gofer: 0.37

## Where&#8217;s the Fedora 15 Support?

It&#8217;s coming. We were too far into QE by the Fedora 15 release and didn&#8217;t have the time to verify the build to our satisfaction. Starting with next week&#8217;s testing releases, builds should be available for Fedora 15 as well. Pulp&#8217;s policy is to support the current and current &#8211; 1 Fedora releases, so this Community Release is the last Pulp Fedora 13 builds that will be supported.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-05-28-spotlight-repository-discovery.md
`````markdown
---
date: 2011-05-28T20:55:50+00:00
id: 271
title: 'Spotlight: Repository Discovery'
date: 2011-05-28T14:06:24+00:00
author: Todd Sanders
layout: post
guid: http://blog.pulpproject.org/?p=271
permalink: /2011/05/28/spotlight-repository-discovery/
categories:
  - Spotlight
---
<!-- more -->
Community Release 12 introduces [Repository Discovery](http://pulpproject.org/ug/UGRepo.html#discovery). This is a simple and fast way of identifying all of the yum repositories in a given tree, and importing them into Pulp. Let&#8217;s explore this feature through a simple example; mirroring the Pulp Project repositories.

Let&#8217;s take a look at the **repo discovery** command:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo discovery --help
Usage: pulp-admin  repo discovery 
&nbsp;
Options:
  -h, --help            show this help message and exit
  -u URL, --url=URL     root url to perform discovery (required)
  -g GROUPID, --groupid=GROUPID
                        groupids to associate the discovered repos (optional)
  -y, --assumeyes       assume yes; automatically create candidate repos for
                        discovered urls (optional)
  -t TYPE, --type=TYPE  content type to look for during discovery(required);
                        supported types: ['yum',]</pre>
      </td>
    </tr>
  </table>
</div>

Now let&#8217;s run repo discovery for Pulp; we&#8217;ll use the -g option to add any repositories we import to a &#8220;pulp&#8221; group.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo discovery -u http://repos.fedorapeople.org/repos/pulp/ -g pulp -t yum
Discovering urls with yum metadata, This could take some time...
Waiting /
+------------------------------------------+
 Repository Urls discovered @ [http://repos.fedorapeople.org/repos/pulp/]
+------------------------------------------+
(-)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-14/x86_64
(-)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-14/i386
(-)  [3] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-13/x86_64
(-)  [4] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-13/i386
(-)  [5] http://repos.fedorapeople.org/repos/pulp/pulp/testing/6Server/x86_64
(-)  [6] http://repos.fedorapeople.org/repos/pulp/pulp/testing/6Server/i386
(-)  [7] http://repos.fedorapeople.org/repos/pulp/pulp/testing/5Server/x86_64
(-)  [8] http://repos.fedorapeople.org/repos/pulp/pulp/testing/5Server/i386
(-)  [9] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/x86_64
(-)  [10] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/i386
(-)  [11] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-13/x86_64
(-)  [12] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-13/i386
(-)  [13] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/test_bandwidth_repo_smaller
(-)  [14] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/test_bandwidth_repo
(-)  [15] http://repos.fedorapeople.org/repos/pulp/pulp/6Server/x86_64
(-)  [16] http://repos.fedorapeople.org/repos/pulp/pulp/6Server/i386
(-)  [17] http://repos.fedorapeople.org/repos/pulp/pulp/5Server/x86_64
(-)  [18] http://repos.fedorapeople.org/repos/pulp/pulp/5Server/i386
&nbsp;
Select urls for which candidate repos should be created; use `y` to confirm (h for help):</pre>
      </td>
    </tr>
  </table>
</div>

Then it is as simple as selecting the repositories I want to import. In this case, I am interested in Fedora only; both testing and community releases. We&#8217;ll select 1:4 and 9:12.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">(+)  [1] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-14/x86_64
(+)  [2] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-14/i386
(+)  [3] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-13/x86_64
(+)  [4] http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-13/i386
(-)  [5] http://repos.fedorapeople.org/repos/pulp/pulp/testing/6Server/x86_64
(-)  [6] http://repos.fedorapeople.org/repos/pulp/pulp/testing/6Server/i386
(-)  [7] http://repos.fedorapeople.org/repos/pulp/pulp/testing/5Server/x86_64
(-)  [8] http://repos.fedorapeople.org/repos/pulp/pulp/testing/5Server/i386
(+)  [9] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/x86_64
(+)  [10] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-14/i386
(+)  [11] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-13/x86_64
(+)  [12] http://repos.fedorapeople.org/repos/pulp/pulp/fedora-13/i386
(-)  [13] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/test_bandwidth_repo_smaller
(-)  [14] http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/test_bandwidth_repo
(-)  [15] http://repos.fedorapeople.org/repos/pulp/pulp/6Server/x86_64
(-)  [16] http://repos.fedorapeople.org/repos/pulp/pulp/6Server/i386
(-)  [17] http://repos.fedorapeople.org/repos/pulp/pulp/5Server/x86_64
(-)  [18] http://repos.fedorapeople.org/repos/pulp/pulp/5Server/i386
&nbsp;
Select urls for which candidate repos should be created; use `y` to confirm (h for help):y
&nbsp;
Creating candidate repos for selected urls..
Successfully created repo [repos-pulp-pulp-testing-fedora-14-x86_64]
Successfully created repo [repos-pulp-pulp-testing-fedora-14-i386]
Successfully created repo [repos-pulp-pulp-testing-fedora-13-x86_64]
Successfully created repo [repos-pulp-pulp-testing-fedora-13-i386]
Successfully created repo [repos-pulp-pulp-fedora-14-x86_64]
Successfully created repo [repos-pulp-pulp-fedora-14-i386]
Successfully created repo [repos-pulp-pulp-fedora-13-x86_64]
Successfully created repo [repos-pulp-pulp-fedora-13-i386]</pre>
      </td>
    </tr>
  </table>
</div>

That&#8217;s it. Now all that&#8217;s left to be done is sync content from the remote feeds. Currently, Pulp is limited in it&#8217;s Repository Group operations; only supporting listing by group. For example to list the repos we just created:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo list --groupid=pulp</pre>
      </td>
    </tr>
  </table>
</div>

In the future, we will be expanding the set of group operations to support update, setting re-occurring sync schedules, sync, etc.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-06-01-fedora-15-qe-builds-available.md
`````markdown
---
date: 2011-06-01T20:55:50+00:00
id: 313
title: Fedora 15 QE Builds Available
date: 2011-06-01T13:38:50+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=313
permalink: /2011/06/01/fedora-15-qe-builds-available/
categories:
  - Releases
---
<!-- more -->
We finished setting up our build process and have started producing Fedora 15 RPMs for our Wednesday/Friday QE builds. With this change, Fedora 13 builds are no longer provided in the QE releases.

As usual with the QE builds, they are not tested to the same level as community releases. The next community release (which is estimated to be the third week in June) will be built on Fedora 14 and Fedora 15 (and RHEL 5 and 6, no change there).

The QE builds can be found at <http://repos.fedorapeople.org/repos/pulp/pulp/testing>. The [fedora-pulp.repo](http://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo) file that is used for community release installations already has a repo definition for the QE builds. Simply enable the repo and the QE build versions will be used instead of the community releases.

As usual, feel free to contact us through the normal channels (Freenode: #pulp or [mailing list](https://www.redhat.com/mailman/listinfo/pulp-list)) if you run into any issues.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-06-07-candlepin.md
`````markdown
---
date: 2011-06-07T20:55:50+00:00
id: 319
title: Candlepin
date: 2011-06-07T14:47:32+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=319
permalink: /2011/06/07/candlepin/
categories:
  - Uncategorized
---
<!-- more -->
[<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/06/candlepin-128.png" alt="" title="candlepin-128" width="128" height="128" class="alignleft size-full wp-image-327" />](http://website-pulp.rhcloud.com/wp-content/uploads/2011/06/candlepin-128.png)

Pulp is one of the projects in the [Katello](http://www.katello.org/) family of applications. Candlepin&#8217;s subscription and entitlement management is a natural complement to Pulp&#8217;s content focus. More information on Candlepin can be found at their newly launched site:

<a href="http://candlepinproject.org/" target="new">http://candlepinproject.org/</a>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-06-16-katello.md
`````markdown
---
date: 2011-06-16T20:55:50+00:00
id: 335
title: Katello
date: 2011-06-16T21:30:40+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=335
permalink: /2011/06/16/katello/
categories:
  - Uncategorized
---
<!-- more -->
[<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/06/katello-logo1.png" alt="" title="katello-logo" class="alignleft size-full wp-image-336" style="margin-top: 30px; padding-bottom: 30px;" />](http://website-pulp.rhcloud.com/wp-content/uploads/2011/06/katello-logo.png)

As alluded to previously, although Pulp is fully functional as a standalone application, it is also integral in a new systems management initiative. The [Katello](http://www.katello.org) project combines concepts such as software updates, subscription management, provisioning, and configuration into a single front end including both web and CLI interfaces. Their newly launched site provides more information on the underlying projects it unites as well as screenshots and contact information:

<http://www.katello.org>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-06-20-pulp-community-release-13.md
`````markdown
---
date: 2011-06-20T20:55:50+00:00
id: 351
title: Pulp Community Release 13
date: 2011-06-20T14:17:02+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=351
permalink: /2011/06/20/pulp-community-release-13/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/06/cr-13-2.png" alt="" title="cr-13-2" width="442" height="161" class="alignnone size-full wp-image-352" srcset="http://www.pulpproject.org/wp-content/uploads/2011/06/cr-13-2-300x109.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/06/cr-13-2.png 442w" sizes="(max-width: 442px) 100vw, 442px" />

## Installation

Installation instructions can be found [in the Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org)

## Enhancements

  * [Errata enhancements](https://fedorahosted.org/pulp/wiki/PulpCli#ErrataActions) including: 
      * Ability to search errata using various parameters such as id, type, and repository association.
      * Ability to list all errata including orphaned errata filtered by type.
  * Tasks are now persisted to the database instead of simply being stored in memory. 
      * Unscheduled tasks will now resume if interrupted by a Pulp crash or restart.
      * Task history for repository and CDS syncs available.
      * Administrative transparency into the task subsystem can be found in the `pulp-admin`. To enable support for this command, edit `/etc/pulp/client.conf` and set `[admin] expose_task_command = True`. </ul> 
      * Repository discovery enhancements from the previous sprint&#8217;s implementation: 
          * Support added for discovering authenticated repositories.
          * Support added for discovering mirror lists and redirected URLs.
          * Increased process visibility through incremental feedback.
      * A yum plugin has been added to automatically update consumer profile information in the Pulp server after all yum transactions.
      * [CDS Clusters](http://pulpproject.org/ug/UGCDS.html#clusters) have been added, which will automatically maintain consistency of repository associations across all CDS instances in the cluster, allowing for one-step provisioning of CDS instances to support high load scenarios.
      * Consumers now have support for protected repositories. When a consumer certificate is specified for a repository in Pulp, it is downloaded to the consumer and referenced in the repository definition.
      * Fixed 22 bugs, accessible through [bugzilla.](https://bugzilla.redhat.com/buglist.cgi?target_release=Sprint%2024&#038;query_format=advanced&#038;product=Pulp&#038;classification=Other)
    ## Upgrade Notes
    
      * Run `pulp-migrate` to upgrade to the latest database changes.
      * Fedora 13 is no longer supported.
      * The x.509 private key and certificates were consolidated to be stored as a single, combined file. Any x.509 `--key` CLI options are optional so long as the file referenced in `--cert` option contains both the private key and certificate. After upgrading Pulp, existing certificates stored on the file system will no longer be valid unless the private key and certificates are combined. This has the following effects on upgraded systems: 
          * Repositories that have been defined with feed or consumer certificates will need to be updated with the certificate information again. Even if the optional `--key` support is used, this step needs to occur again so the Pulp server will correctly combine and store the certificate and private key on the server.
          * Consumer certificates may be manually combined (alternatively, the consumer can be deleted and re-registered). To manually upgrade a consumer, combine the `key.pem` and `cert.pem` files in the `/etc/pki/consumer` directory into a single file named `cert.pem`.
          * Users will need to regenerate their user certificate by logging out and then logging back in (`pulp-admin auth logout` and `pulp-admin auth login -u [user] -p [password]` respectively.
    ## Fedora 15 Support
    
    The Fedora 15 build requires mongo 1.7.5 due to an issue in version 1.8 that can cause the mongo shell to hang. Users installing or upgrading pulp on an F15 instance that already has mongo 1.8 installed will need to manually downgrade to mongo 1.7.5.
    
    ## Build Versions
    
      * Pulp: 0.191
      * Grinder: 0.103
      * Gofer: 0.41
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-06-23-sprint-25.md
`````markdown
---
date: 2011-06-23T20:55:50+00:00
id: 365
title: Sprint 25
date: 2011-06-23T14:42:40+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=365
permalink: /2011/06/23/sprint-25/
categories:
  - Uncategorized
---
<!-- more -->
Now that [Community Release 13](http://blog.pulpproject.org/2011/06/20/pulp-community-release-13/) is available, we&#8217;ve begun work on our next sprint of Pulp development. We want to start being more visible as the sprint progresses rather than just at community release time, so the following is a quick summary of what&#8217;s planned over the next few weeks. Since this if the first post about it, there&#8217;s also some information on how we do things; future blogs should hopefully only be a few links and some feature summaries.

Assume the normal disclaimer about how this is just the plans and are subject to change based on how development progresses, random outside influence, zombie apocalypse, and so on.

## Duration and Community Release

The sprint runs until July 11th. Our community release candidate build is cut around that time and handed to QE for sanity testing. Depending on how that goes, the community release itself should be out at some point near the end of that week.

## Tracking Wiki

The high level details of each sprint are tracked on individual pages on the Pulp wiki. The tracker page for sprint 25 [can be found here.](https://fedorahosted.org/pulp/wiki/Sprint25) We&#8217;re still deciding on a format for these pages and what we track, but for now we&#8217;re using the following sections:

  * **Deep Dives** &#8211; The Pulp team is almost completely remote from each other, so twice a week we choose topics (mostly related to what we&#8217;re working on) to demo/code review/discuss/whatever with the rest of the team. Currently, these are internal-only, but we&#8217;re looking into ways of opening these up, either through a recording or potentially by holding the meetings publicly. More information on those initiatives as we figure it out.
  * **Feature Checklists** &#8211; A few sprints ago we came up with a checklist of things to keep in mind when working on a feature. It&#8217;s proven very useful for the team members themselves to make sure the non-code aspects such as the user guide and release notes don&#8217;t get missed. They are also a great place to find a summary of links about a particular feature.
  * **Bugs** &#8211; Each sprint we align a handful of bugs to be fixed during that sprint. The sprint tracker page has a link to bugs aligned to the given sprint.
  * **Release Notes** &#8211; A running summary of things to keep in mind for the upcoming community release. At the end of the sprint, this is populated with feature summaries to be included in the announcement e-mail/blog. During the sprint, this section usually houses any information users will need to know during an upgrade. For instance, if midway through the sprint a new dependent library version is needed, the release notes section will usually reflect that.

Like I said, the tracker wiki page is still a work in progress. We&#8217;re still refining what it is we&#8217;re including and reorienting ourselves to remember to keep it updated. 

## Sprint 25 Features

The following is a quick summary of what we&#8217;re aiming to accomplish during this sprint. For more information, check the sprint tracker wiki page. For input, hop in #pulp on Freenode and let us know what you think.

  * **Generic Content Support** &#8211; The initial phase for Pulp was to handle RPM content, but it was always expected to branch out and support a wider array of types. We&#8217;re beginning the push towards this support in this sprint by flushing out what we want to be able to do with content, selecting some initial non-RPM types to include, and beginning the migration of the existing code base to the new model.
  * **REST API Documentation** &#8211; The goal is to finish/clean up the API documentation for our packages and CDS subsystems, as well as set something up internally to automatically generate and publish the documentation.
  * **Stronger Repository Sync Cancel** &#8211; When cancelling a repo sync, any packages currently being downloaded are allowed to finish (the rest of the repository is not syncced). With our growing focus on non-RPM content, we need to rework this to be able to cancel midway through a file (for instance, cancelling a 4GB ISO download without waiting for it to complete).
  * **Advanced Collection Queries** &#8211; There are a number of fields that can be used in Pulp queries. This feature is looking to increase the syntax for specifying them to allow the caller to specify things such as the union or intersection across fields.
  * **Errata Enhancement Tasks** &#8211; The continuation from previous work on errata, we&#8217;re looking to increase the parameters that can be used in errata searches.
  * **Repository Group Operations** &#8211; This sprint will see the beginning of supporting repository operations on groups. The focus for this sprint is on repository update, such as the ability to batch set a sync schedule. Future sprints will address more complicated features such as sync.
  * **LDAP Enhancements** &#8211; There&#8217;s actually not much to do in this area. We received a patch from the community that fixed up our LDAP support that was added a while ago and will be incorporating it into Pulp.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-07-14-pulp-community-release-14.md
`````markdown
---
date: 2011-07-14T20:55:50+00:00
id: 373
title: Pulp Community Release 14
date: 2011-07-14T15:09:54+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=373
permalink: /2011/07/14/pulp-community-release-14/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/07/cr-14.png" alt="" title="Community Release 14" width="442" height="161" class="alignnone size-full  wp-image-374" srcset="http://www.pulpproject.org/wp-content/uploads/2011/07/cr-14-300x109.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/07/cr-14.png 442w" sizes="(max-width: 442px) 100vw, 442px" />

## Installation &#038; Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org)

As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes.

### mod_wsgi

We&#8217;ve known for a while that we&#8217;ve been pushing our luck using both mod\_wsgi and mod\_python. As of this release, we&#8217;ve removed the dependency on mod_python, which was previously used for our repository authentication.

The caveat is that the current mod\_wsgi version doesn&#8217;t support access to the client&#8217;s SSL certificate, which we need. To get around this, we&#8217;re building a patched version of mod\_wsgi (`mod_wsgi-3.2-3.sslpatch`) which is available in our repository. The Pulp RPMs have a dependency on this version and should upgrade it automatically for you.

## Enhancements

The majority of the team was focused on an internal project that uses Pulp as the backend. We also revisited our unit tests and cleaned up the testing framework. That resulted in a number of (in many cases very tricky) bug fixes and less focus on new features. That said, we were still able to make progress on new features:

  * Added the infrastructure to support union and intersection for queries that specify more than one parameter. Support for this has been added to repository-related queries and will be extended across the rest of Pulp in the future.
  * Errata search has been enhanced to provide queries based on CVE and BZ number.
  * Fixes LDAP support and updated to interact with Pulp&#8217;s authentication subsystem. Full changes can be found in the [bugzilla entry 712859](https://bugzilla.redhat.com/show_bug.cgi?id=712859#c3) (patch submitted by contributor, see below).
  * Pulp&#8217;s sync library, Grinder, now uses a process-based approach instead of thread-based to correct a number of concurrency issues dealing with the underlying security libraries.
  * Support added for custom yum metadata files to be included in repositories. More information on the extent of this feature can be found [on the wiki design page](https://fedorahosted.org/pulp/wiki/CustomMetadata).
  * Design and planning for the next major evolution of Pulp which will support non-RPM content (more on that in an upcoming post).
  * 30 bug fixes, accessible through [bugzilla.](https://bugzilla.redhat.com/buglist.cgi?target_release=Sprint%2025&#038;query_format=advanced&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;bug_status=VERIFIED&#038;product=Pulp&#038;classification=Community)

## Contributors

Special thanks to Chris St. Pierre for his contributions to Pulp. In addition to feedback on usage and direction for the product, he submitted a number of patches to the Pulp team. Beefy patches too, not just fixing a typo here or there, but things like significant fixes to our LDAP support.

## Build Versions

  * Pulp: 0.206
  * Grinder: 0.105
  * Gofer: 0.42
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-08-01-pulp-in-production.md
`````markdown
---
date: 2011-08-01T20:55:50+00:00
id: 387
title: Pulp in Production
date: 2011-08-01T14:32:43+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=387
permalink: /2011/08/01/pulp-in-production/
categories:
  - Uncategorized
---
<!-- more -->
Last Friday, Red Hat Update Infrastructure (RHUI) 2.0 went GA. This release marks a huge step forward for Pulp as the RHUI codebase has been rebased on Pulp in this version. Naturally this has been a source of pride for the Pulp team, but it&#8217;s also been a huge benefit to Pulp as a project due to the increased focus on QA and bug fixing.

As a quick summary, the [Red Hat Update Infrastructure](http://docs.redhat.com/docs/en-US/Red_Hat_Update_Infrastructure/2.0/html/Installation_Guide/index.html) is a product (currently) available to certified cloud providers for the management and distribution of Red Hat and custom content within the cloud. RHUI offers load balancing and fail over capabilities that allow the cloud provider to meet increasing client demand. All of these features are built on top of Pulp as the backend and a custom CLI using Pulp&#8217;s REST APIs.

Now that this release is finished, the next big focus for the team will be moving to support non-RPM content (I&#8217;ll be blogging more about that in the next few days).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-08-08-generic-content-support.md
`````markdown
---
date: 2011-08-08T20:55:50+00:00
id: 393
title: Generic Content Support
date: 2011-08-08T19:12:33+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=393
permalink: /2011/08/08/generic-content-support/
categories:
  - Uncategorized
---
<!-- more -->
The aspirations for Pulp have always been larger than simply RPM-related content (&#8220;related&#8221; meaning kickstart trees, errata, etc). Now that we have a strong base of functionality in Pulp, we&#8217;re starting to look at how we can refactor things to make it easier to add support for non-RPM content.

The primary driving need for this is to support [Katello](http://katello.org/) use cases. Of these, the most complicated is the ability to store Puppet modules which consist of a set directory structure and multiple child types. More long-term, however, is the is the goal of supporting user-defined content types. For example, being able to use all of Pulp&#8217;s functionality to support Debian package-based flavors of Linux.

To support all of this, Pulp&#8217;s architecture is changing to a plugin-supported model:

[<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/08/pulp-arch.png" alt="" title="Pulp Architecture" width="604" height="242" class="aligncenter size-full wp-image-394" srcset="http://www.pulpproject.org/wp-content/uploads/2011/08/pulp-arch-300x120.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/08/pulp-arch.png 604w" sizes="(max-width: 604px) 100vw, 604px" />](http://website-pulp.rhcloud.com/wp-content/uploads/2011/08/pulp-arch.png)

There&#8217;s a lot going on in that picture, so let&#8217;s start with the colors.

  * Blue or White &#8211; Areas written and supported by the Pulp team. These fall into two categories: the general Pulp platform and the RPM-centric type support.
  * Orange &#8211; The main touch points for developers looking to leverage Pulp for their needs. These include custom administrative tasks through our REST API, custom content retrieval (not necessarily limited to just client systems, but potentially to other systems looking to retrieve Pulp-managed content), and type support.
  * Green &#8211; Interfaces from the outside into the Pulp server.

Starting in the middle, the bulk of Pulp&#8217;s subsystems remain untouched, such as auth and tasking (concurrency, scheduling, etc). The root of the new architecture is found in the type definitions. These indicate to the Pulp server the types of content that will be supported along with some metadata as to what the type represents. The other plugin pieces support one or more different types and together define the scope of what a Pulp installation will do.

The repository handling gets shifted around and split into two main concepts:

  * Import &#8211; The process of taking content and getting it into Pulp. This includes both the ability to load from an external source (whatever that may be) as well as how to process user-uploaded content.
  * Distribution &#8211; The process of taking content from the Pulp server and exposing it. The most easily understood use case is serving content over HTTP, but it&#8217;s also possible to add in a hook that would write to an ISO or be leveraged for use in image creation.

These two pieces function as adapters between Pulp and&#8230; wherever. The importers/distributors can speak whatever protocols are necessary to the outside world and use specific APIs to interact with the Pulp server.

A similar piece is the concept of a Tracker. Much like the importers/distributors provide content management functionality for types, the trackers provide client-side knowledge of types. For instance, the RPM tracker will understand how to read a package profile report for an RPM based system. Another example could be a JBoss-related tracker that understands how to inventory a JBoss installation and its components (JARs, EARs, etc).

The Pulp team plans on providing two admin CLIs. The Reference Implementation (RI) is driven by the types indicated by the Pulp server. This isn&#8217;t intended to be the most efficient UI into using any one particular set of types but rather to showcase the Pulp APIs and functionality.

The RPM Specific CLI is a custom CLI that assumes the default installation of Pulp with RPM support. This CLI expects RPM-related types to be supported and thus will be a much more streamlined UI for RPM needs.

The Katello team is using Pulp&#8217;s APIs to provide a rich front-end experience on top of Pulp&#8217;s backend. And for example purposes, if Debian package type support was added, the same APIs could be used to provide a highly customized experience for managing those packages.

The consumer side of things is similar. The Pulp consumer is being refactored to be a general framework for interacting with the Pulp server. Specific type support can be added depending on what content types should be supported. This support includes things like profiling and installation. And since Pulp&#8217;s APIs are open, the giant &#8220;Other&#8221; block is meant to represent any other wacky usage people can come up with.

These are high aspirations and we recognize that. We&#8217;re not naive to the point of thinking one person drawing an architecture diagram is going to get it all right on the first try. Anything is subject to change as things progress and we&#8217;re continuing to support the current codebase as we work towards getting this in place. The nice part is that we have a number of teams interested in using this for a variety of purposes, so we have a pretty robust pool of use cases to test it out on as we go.

More information can be found on the [Pulp wiki](https://fedorahosted.org/pulp/) near the bottom under &#8220;Generic Content&#8221;.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-08-15-pulp-community-release-15.md
`````markdown
---
date: 2011-08-15T20:55:50+00:00
id: 410
title: Pulp Community Release 15
date: 2011-08-15T14:22:02+00:00
author: Todd Sanders
layout: post
guid: http://blog.pulpproject.org/?p=410
permalink: /2011/08/15/pulp-community-release-15/
categories:
  - Releases
---
<!-- more -->
## Installation & Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org)

As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes.

### Client Tools

As mentioned below, the client tools have been refactored. This affects the client configuration files in /etc/pulp which have to be fixed manually after you upgrade.

### SELinux

After the upgrade,  SELinux no longer has to be set to permissive/disabled. Although, no change is required.

## Enhancements

  * File Based Syncs
  * Support to sync file based content repos. Requires a PULP-MANIFEST metadata file
  * New option content_type added to repo creation cli and api. default is &#8216;yum&#8217;; supported types: &#8216;yum&#8217; & &#8216;file&#8217;
  * Pulp synchronizer has been re-architected to support generic content model
  * Interrupt/Resume Downloads
  * Pulp and Grinder now supports resuming partial download files

  * Client Refactoring
  * Split the pulp-client tool into logical components:
  * pulp-consumer &#8211; Consumer client tool
  * pulp-admin &#8211; Admin client tool
  * pulp-client-lib &#8211; Common client libraries

  * Since the pulp-client package has been renamed, pulp-admin and/or pulp-consumer will have to be installed, not updated. These new packages obsolete pulp-client, so it will be removed when the new packages are installed.
  * The previous client config file has been split into a pulp-consumer specific config file and a pulp-admin specific config file. Any values that were set in /etc/pulp/client.conf will need to be manually reset in the new config files:
  * /etc/pulp/consumer/consumer.conf &#8211; pulp-consumer config
  * /etc/pulp/admin/admin.conf &#8211; pulp-admin config

  * Added SELinux rules
  * Pulp will run with SELinux enabled on RHEL-6 and Fedora
  * Pulp and SELinux will not be supported on RHEL-5

  * Improved cancel of repository synchronization
  * Previous implementation required pulp wait for the current item to finish downloading before synchronization would be interrupted.
  * New implementation will interrupt a transfer, useful for interrupting transfer of larger ISOs.

  * Added support for jobs which are a collection of tasks.
  * The REST API was expanded to include job queries. Also, pulp-admin CLI contains job command. To enable, edit /etc/pulp/admin/job.conf and change: enabled=True.
  * All consumer group operations updated to use jobs for better status and result feedback for each consumer.
  * Install package on consumer group returns job instead of task.
  * Install errata on consumer group return job instead of task.

## Known Issues

Years and months can not be used when specifying timeout values in the cli, due to an incompatibility in a library and will be fixed in a future release. See <https://bugzilla.redhat.com/show_bug.cgi?id=729496> for a workaround if they are specified and pulp-server can&#8217;t be restarted.

## Build Versions

  * Pulp: 0.223-4
  * Grinder: 0.110
  * Gofer: 0.44
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-09-06-pulp-rearchitecture-sprint-update.md
`````markdown
---
date: 2011-09-06T20:55:50+00:00
id: 426
title: 'Pulp Rearchitecture &#8211; Sprint Update'
date: 2011-09-06T18:20:38+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=426
permalink: /2011/09/06/pulp-rearchitecture-sprint-update/
categories:
  - Uncategorized
---
<!-- more -->
As much as I wish the new architecture would be in place overnight, it&#8217;s not gonna happen. So instead of living in a silo for multiple sprints, I wanted to give a quick update of where we got in the last sprint and how Pulp is going to look in the future.

<p align="center">
  <a href="http://website-pulp.rhcloud.com/wp-content/uploads/2011/09/pulp-2-arch-sprint-1.png"><img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/09/pulp-2-arch-sprint-1.png" alt="" title="Pulp Rearchitecture - Sprint 1"class="aligncenter size-full wp-image-430" /></a>
</p>

The above graphics shows things at a few levels, ranging from internal guts to plugin-developer interaction to client. The scope feels a bit odd, but it was the simplest way to summarize the work for the sprint.

## Type Definitions

We decided on a first pass at a [type definition format](https://fedorahosted.org/pulp/wiki/TypeDescriptor). The idea was not to include a ton of things we _may_ need eventually, but rather to get the infrastructure in place to load the definitions and begin to configure the server accordingly.

For instance, one area we went back and forth on was defining the metadata that will be tracked for units of a given type. Eventually I can see a use case for it in terms of type discovery, but for now it was omitted. We will flush it out in a future iteration.

The important part about the current implementation is that it provides clues to the server on how to configure the database to help optimize queries. I won&#8217;t go into the detail here but will post something in the future.

## Importers &#038; Distributors

The basics of the importer and distributor plugins were implemented this sprint, including a first pass at their APIs and the server-side code to load and track them. Each importer/distributor consists of Python code implementing the necessary APIs and an optional JSON configuration file for the plugin as a whole.

The consumer-side of things, tentatively called &#8220;trackers&#8221;, still needs some whiteboard time and is not included.

## Repository Functions

The biggest changes coming to Pulp in terms of public-facing APIs revolve around repository lifecycle. The client box on the right side of the graphic above describes some of the new calls available which illustrate the new approach to repository creation.

The following describes the new workflow for the creation of a new repository. Keep in mind that this workflow is at the API level; the CLI will eventually simplify this for the end user.

  * A new Pulp repository is created with minimal metadata (unique ID, display name, description, etc.). At this point, the repository is largely a placeholder in Pulp as it doesn&#8217;t have any type-specific functionality attached to it.
  * An importer is configured for the repository. The type of importer and its configuration are associated with the repository. This effectively governs what content types a repository can contain. The current thinking is to limit a repository to a single importer due to the sheer amount of potential complications a multiple-importer model would introduce (that said, we&#8217;ll see how things go over the next few sprints).
  * One or more distributors are configured for the repository. These indicate the means through which content in the repository will be published. The common example I keep citing here is that a repository may have an HTTP-based distributor to make the content available through the web and an ISO-based distributor that will package up the contents of the repository for offline distribution.

The other major change is that previous concept of &#8220;repo sync&#8221; is now split into two concepts: sync and publish. It&#8217;s still possible to combine the two at execution time, but conceptually there is a much bigger divide between the idea of bringing content into a repository (sync) and making it available to end users or other systems (publish).

## REST APIs

Ya, so, they&#8217;re on the picture, but not exposed yet. All of the above functionality is implemented in the server code but I didn&#8217;t quite get around to wiring up the REST APIs for them yet. That part should be reasonably simple and should be addressed next sprint, at which point I can actually demo all of this new functionality in action.

That said, the graphic does highlight a few conceptual areas the APIs are focusing on in the near future:

  * Repository lifecycle (create, set\_importer, add\_distributor) have already been discussed in this post. The only note to make is that set\_importer versus add\_distributor was intentional to convey a single importer per repository v. multiple distributors.
  * Repository sync and distribute. Again, these were discussed previously so I won&#8217;t go into any more detail.
  * Query functionality is becoming a highly requested feature in Pulp. Both the repository and content unit search capabilities are being looked at for flexibility and performance in the coming sprints.
  * Ultimately a Pulp server will have an array of discovery APIs to determine the sorts of capabilities installed on it, such as type definitions and importer/distributor plugins loaded.

## Conclusion

There&#8217;s still much work to be done which means now is the perfect time to help guide Pulp towards your needs. We&#8217;re always looking for feedback at any of the normal channels ([mailing list](https://www.redhat.com/mailman/listinfo/pulp-list), #pulp on freenode).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-09-09-pulp-community-release-16.md
`````markdown
---
date: 2011-09-09T20:55:50+00:00
id: 444
title: Pulp Community Release 16
date: 2011-09-09T20:23:41+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=444
permalink: /2011/09/09/pulp-community-release-16/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/09/cr-16.png" alt="" title="Pulp Community Release 16" width="442" height="161" class="aligncenter size-full wp-image-445" srcset="http://www.pulpproject.org/wp-content/uploads/2011/09/cr-16-300x109.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/09/cr-16.png 442w" sizes="(max-width: 442px) 100vw, 442px" />

## Installation &#038; Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org)

As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes.

### M2Crypto

Pulp now provides a patched version of m2crypto (`m2crypto-0.21.1.pulp-3.*.rpm`). The changes within are required for the newly added certificate revocation list support. The RPM can be found in the Pulp repositories along side the rest of the Pulp RPMs.

## Enhancements

  * Certificate revocation lists (CRLs) are now available for protected repositories. CRLs can be installed on a per-CA basis as necessary given the authenticated repository setup. Instructions for configuring a Pulp server to use a CRL can be found in the [Repository Authentication](http://pulpproject.org/ug/UGRepoAuth.html) section of the user guide.
  * Support has been added for installing a package group to a consumer group.
  * Custom metadata types can now be removed from existing repository metadata (only in Fedora 14 and 15; RHEL support requires a change to createrepo that is in progress).

## Build Versions

  * Pulp: 0.230-3
  * Grinder: 0.112
  * Gofer: 0.47
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-10-12-pulp-community-release-17.md
`````markdown
---
date: 2011-10-12T20:55:50+00:00
id: 454
title: Pulp Community Release 17
date: 2011-10-12T13:23:18+00:00
author: Todd Sanders
layout: post
guid: http://blog.pulpproject.org/?p=454
permalink: /2011/10/12/pulp-community-release-17/
categories:
  - Releases
---
<!-- more -->
[<img class="size-full wp-image-457 aligncenter" title="Pulp Community Release 17" src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/10/cr-17.png" alt="Pulp Community Release 17" width="447" height="161" srcset="http://www.pulpproject.org/wp-content/uploads/2011/10/cr-17-300x108.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/10/cr-17.png 447w" sizes="(max-width: 447px) 100vw, 447px" />](http://website-pulp.rhcloud.com/wp-content/uploads/2011/10/cr-17.png)

## Installation & Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org)

As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes.

## Enhancements

### Pulp Exporter

  * Ability to export repository content (rpms, errata, packagegroups, distributions and custom metadata) 
  * User facing API to invoke exports on a repository
  * CLI support to invoke exports via \`pulp-admin repo export\`
  * Ability to cancel on going exports on a repository

### Distributions

  * New fields added to distribution model &#8211; &#8220;Family&#8221;, &#8220;Variant&#8221; and &#8220;Version&#8221;

### Cancel Clone

  * Ability to gracefully cancel a running clone using &#8216;pulp-admin repo cancel_clone&#8217; command 
  * Ability to snapshot and restart a running clone in case of server restart 

## Build Versions

  * Pulp: 0.237-4
  * Grinder: 0.119
  * Gofer: 0.50
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-01-pulp-v1-0-plans.md
`````markdown
---
date: 2011-11-01T20:55:50+00:00
id: 470
title: Pulp v1.0 Plans
date: 2011-11-01T17:15:26+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=470
permalink: /2011/11/01/pulp-v1-0-plans/
categories:
  - Releases
---
<!-- more -->
Over the course of the next few sprints we&#8217;ll be gearing up for an official 1.0 release. The bulk of the desired functionality is already in place, leaving most of the remaining work to the normal release housekeeping and bug fixing tasks.

The remainder of the bugs aligned to the 1.0 release can be found <a href="https://bugzilla.redhat.com/buglist.cgi?query_format=advanced&#038;order=Importance&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;version=1.0&#038;classification=Community&#038;product=Pulp" target="new">using this Bugzilla query.</a> That&#8217;s not set in stone; bugs may still be added to the list either by request or depending on how the QE process goes.

The goal is to have a 1.0 release by mid-January (by FUDCon 2012 would be ideal), so now is the time to request any nagging issues be addressed. Feel free to let us know what you&#8217;d like to see included in 1.0 through any of the normal channels (chat room, mailing list, etc).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-02-preview-creating-a-pulp-plugin.md
`````markdown
---
date: 2011-11-02T20:55:50+00:00
id: 473
title: 'Preview: Creating a Pulp Plugin'
date: 2011-11-02T15:46:53+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=473
permalink: /2011/11/02/preview-creating-a-pulp-plugin/
categories:
  - "2.0"
  - Uncategorized
---
<!-- more -->
Buried in Community Release 17 is the first working implementation of the new plugin mechanism for Pulp 2.0. I didn&#8217;t make a big deal about it since, well, it&#8217;s still really, really early. I figured I&#8217;d wait to start to highlight it until we got some more work done.

That changed with the introduction of the <a href="http://www.boredomandlaziness.org/search/label/pulpdist" target="new">pulpdist</a> project which is looking to leverage Pulp for synchronizing and publishing mirrors within Red Hat. It&#8217;s awesome to have such a flushed out use case for Pulp that&#8217;s going to be written at the same time we&#8217;re designing the features and should prove really helpful in getting an outside contributors view on our approach.

Since I needed to write up some information for the pulpdist team on how to get started writing a plugin, I figured I&#8217;d do it here in case others are interested in playing with the new architecture as it takes shape. Again, it&#8217;s still really early in terms of code and API stability, so realize things are likely to still be tweaked. Feedback is appreciated if you do start to poke around.

This post will cover the basics in terms of creating and installing Pulp plugins. A later post will go into more details on the plugin and conduit APIs with some examples of the sorts of things I&#8217;ve done as demo plugins.

# Type Definitions

The first step is to make sure _type definitions_ exist for the types of content you are looking to manage with Pulp. A type definition informs Pulp of the details of how to store and manage _content units_ of that type. This metadata can be user-focused (display name, description) or used by Pulp to optimize storage of a content unit&#8217;s metadata (search indexes). A type definition may also reference other types to establish an aggregate relationship. For instance, the errata type will reference the RPM type to express that an errata may contain one or more RPM units.

Type definitions are written in _type descriptors_ which are located in `/var/lib/pulp/plugins/types`. A type descriptor may contain more than one definition; the intention is that related definitions will be defined in the same file for ease of managing them. Type descriptors are JSON documents.

Let&#8217;s start with an example and break it down. To be clear, this is a slimmed down version of what RPM and errata definitions would look like, so don&#8217;t get caught up in what may be missing.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{"types": [
    {"id" : "rpm",
     "display_name" : "RPM",
     "description" : "RPM Package",
     "unique_indexes" : ["name", "version"],
     "search_indexes" : [
         ["name", "epoch", "version", "release", "architecture"]
      ]},
    {"id" : "errata",
     "display_name" : "Errata",
     "description" : "Errata",
     "unique_indexes" : "id",
     "search_indexes" : [
         "title",
         "type",
         "severity"
      ],
     "child_types" : ["rpm"]}
   ]}</pre>
      </td>
    </tr>
  </table>
</div>

The above example contains two type definitions. When the Pulp server is started, it will parse the type definitions and ensure syntax validity and integrity (e.g. does a type reference a child type that doesn&#8217;t exist). Pulp will alter its database accordingly to be able to store units of these types.

The fields in a type definition are as follows:

  * **id** &#8211; Programmatically identifies the content type. This must be unique across all type definitions.
  * **display_name** &#8211; User-friendly name for the type.
  * **description** &#8211; User-friendly details on what the type represents.
  * **unique_indexes** &#8211; Identifies the set of fields that dictate uniqueness for units of this type. This may be either a single field (e.g. &#8220;name&#8221;) or a compound index for uniqueness when paired together (e.g. &#8220;name&#8221;, &#8220;version&#8221;). Pulp will configure the database with unique indexes on these fields and will enforce uniqueness accordingly when handling units of this type.
  * **search_indexes** &#8211; A list of additional indexes to create for units of this type. This allows the type definition to optimize Pulp&#8217;s storage of units for expected queries. Again, entries in here may either be a single list or a list of indexes for a compound index.
  * **child_types** &#8211; _(optional)_ List of type IDs that may be referenced from units of this type. Pulp uses this information to create the necessary links in the database to track this relationship.

The `unique_indexes` and `search_indexes` fields map pretty closely to the same concepts in MongoDB. More information on how compound indexes are handled in MongoDB can be found in their documentation and should be consulted when defining these indexes in a type definition.

If a type definition cannot be parsed or loaded, the Pulp application will fail to start. Information on what went wrong can be found in `/var/log/httpd/error_log` rather than the Pulp logs.

# Plugins

Writing importers and distributors follow a similar model; the most notable difference is the use of different APIs depending on what you want to do. For the purpose of this post, I&#8217;ll describe how to write an importer and add a note at the end as to the differences in writing a distributor.

## Importers

Each importer is a separate directory located in `/var/lib/pulp/plugins/importers`. This directory must be a Python package (simply drop `__init__.py` in the directory). Pulp will attempt to load the plugin by looking for a file in that directory named `importer.py`. The Pulp hook into the plugin must be located in that module; all other code can be organized into separate modules and packages.

Pulp will look in `importer.py` for any classes that subclass the `pulp.server.content.plugins.importer.Importer` class. The `Importer` class defines the API the plugin may implement (I still have to go back in and clean up the docs in there).

At very least, subclasses must implement the class method `metadata` to allow Pulp to retrieve the required metadata describing the importer. This method must return a dictionary containing the following information:

  * **id** &#8211; Programmatically identifies the importer. This must be unique across all importers.
  * **display_name** &#8211; User-friendly identification of the importer.
  * **types** &#8211; List of type IDs to inform Pulp of the types of content handled by the plugin. Pulp application boot will fail if a plugin references a type ID that does not exist.

Below is the metadata implementation for example importer:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">class</span> LocalRpmImporter<span style="color: black;">&#40;</span>Importer<span style="color: black;">&#41;</span>:
&nbsp;
    <span style="color: #66cc66;">@</span><span style="color: #008000;">classmethod</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> metadata<span style="color: black;">&#40;</span>cls<span style="color: black;">&#41;</span>:
        metadata <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span>
            <span style="color: #483d8b;">'id'</span>           : <span style="color: #483d8b;">'local-rpm'</span><span style="color: #66cc66;">,</span>
            <span style="color: #483d8b;">'display_name'</span> : <span style="color: #483d8b;">'Local RPM Importer'</span><span style="color: #66cc66;">,</span>
            <span style="color: #483d8b;">'types'</span>        : <span style="color: black;">&#91;</span><span style="color: #483d8b;">'rpm'</span><span style="color: black;">&#93;</span><span style="color: #66cc66;">,</span>
        <span style="color: black;">&#125;</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> metadata</pre>
      </td>
    </tr>
  </table>
</div>

At that point, the only thing left to do is override the base class methods to provide the actual functionality of the plugin. Again, I&#8217;ll cover those APIs more thoroughly in a future post. For now, the documentation in the plugin base classes themselves should be consulted for more information. These classes may be viewed <a href="http://git.fedorahosted.org/git/?p=pulp.git;a=tree;f=src/pulp/server/content/plugins;h=93b7ed68ef0d99493c3b78eb1e1a4d891fd19569;hb=HEAD" target="new">in our git repository here.</a>

## Distributors

Distributor plugins follow the same model as importers. A distributor must also implement the `metadata` class method and the same fields are required. The following differences are probably self-explanatory, but I&#8217;ll list them for completeness:

  * Distributors are installed to </code>/var/lib/pulp/plugins/distributors</code>.
  * The distributor package must include a file named `distributor.py`.
  * Distributors must subclass `pulp.server.content.plugins.distributor.Distributor`.

One last note, since each plugin directory is itself a Python package that will be loaded into the classpath, an importer and distributor may not share the exact same plugin package name even though they are stored in separate directories.

## Summary

I tend to get long-winded when I write, so for reference here is the short version of the above wall of text:

  * Create type definitions 
      * Installed to `/var/lib/pulp/plugins/types/` (file name and extension do not matter).
      * JSON documents; see explanation above for required fields.
  * Create importer plugins 
      * Each plugin is a python package under `/var/lib/pulp/plugins/importers/`.
      * Each plugin module must contain a file named `importer.py`.
      * The `importer.py` module must define a class that subclasses `pulp.server.content.plugins.importer.Importer`.
      * The importer subclass must implement the class method `metadata` (required fields can be found above).
      * The plugin implementation is provided by overriding the methods in the Importer base class.
  * Create distributor plugins 
      * Each plugin is a python package under `/var/lib/pulp/plugins/distributors/`.
      * Each plugin module must contain a file named `distributor.py`.
      * The `distributor.py` module must define a class that subclasses `pulp.server.content.plugins.distributor.Distributor`.
      * The distributor subclass must implement the class method `metadata` (required fields can be found above).
      * The plugin implementation is provided by overriding the methods in the Distributor base class.

# Next Steps

I&#8217;ll be flushing out the documentation in the plugin base classes over the next few days. When I do, I&#8217;ll do another post that outlines the sorts of hooks provided to plugins.

Currently, none of the functionality for creating v2.0 repositories is exposed through the CLI. REST APIs exist for repository creation and configuration, triggering synchronize and publish operations, and querying for content units in Pulp. Unfortunately, none of that is documented yet, so I&#8217;ll be posting on that in the next few days as well.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-04-preview-pulp-v2-0-repository-apis.md
`````markdown
---
date: 2011-11-04T20:55:50+00:00
id: 492
title: 'Preview: Pulp v2.0 Repository APIs'
date: 2011-11-04T20:29:33+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=492
permalink: /2011/11/04/preview-pulp-v2-0-repository-apis/
categories:
  - "2.0"
  - Uncategorized
---
<!-- more -->
[Last post](/2011/11/02/preview-creating-a-pulp-plugin/) talked about the process of adding a v2.0 plugin to a Pulp server. This post will provide an overview of the currently available APIs. These APIs were developed with the focus of a sprint demo, so there are some holes in functionality. There is a story this sprint to revisit these and flush them out (along with correcting some conventions), but for now I wanted to provide a quick list for those interested in playing around with the plugin model.

The APIs can be found after the jump.
  
<!--more-->

# Repository Create, Delete, Retrieve, and Configure

## Create Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      POST
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; uniquely identifies the repository (specified in the URL)
        </li>
        <li>
          <strong>display_name</strong> &#8211; (optional) user-friendly name of the repository
        </li>
        <li>
          <strong>description</strong> &#8211; (optional) user-friendly description of the repository
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      True if the repository was created
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">{"display_name": "Demo 1 Repository"}</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">True</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>

## Delete Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      DELETE
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; identifies the repository (specified in the URL)
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      True if the repository was deleted
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">True</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>

## List Repositories

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      GET
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      List of repositories and their details
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">[{'content_unit_count': 0,
  'description': None,
  'display_name': 'Demo 1 Repository',
  'id': 'demo-1-repo',
  'notes': {}}]</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>

## Add an Importer to a Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      POST
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/importers/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; identifies the repository (specified in the URL)
        </li>
        <li>
          <strong>importer_type_id</strong> &#8211; identifies the type of importer being added; corresponds to the ID of the importer plugin
        </li>
        <li>
          <strong>importer_config</strong> &#8211; dictionary of configuration values to pass to the importer that will be used only for the given repository; the contents will vary depending on the type of importer being added
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      True if the importer was added
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">{"importer_type_id": "local-rpm",
 "importer_config": {"rpm_dir": "/pulp-gc-demo/rpms"}
}</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">True</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>

## Add an Distributor to a Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      POST
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/distributors/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; identifies the repository (specified in the URL)
        </li>
        <li>
          <strong>distributor_type_id</strong> &#8211; identifies the type of distributor being added; corresponds to the ID of the distributor plugin
        </li>
        <li>
          <strong>distributor_config</strong> &#8211; dictionary of configuration values to pass to the distributor that will be used only for the given repository; the contents will vary depending on the type of distributor being added
        </li>
        <li>
          <strong>auto_publish</strong> &#8211; boolean; if true, this distributor will be published at the end of every successful sync; if false, the only way to publish this distributor is through an explicit call
        </li>
        <li>
          <strong>distributor_id</strong> &#8211; (optional) since more than one distributor may be added to a repository, this is used to uniquely identify the distributor being added; if not specified Pulp will automatically generate one
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      True if the distributor was added
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">{"distributor_id": "http",
 "distributor_type_id": "http-rpm",
 "distributor_config": {},
 "auto_publish": true
}</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">True</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>

# Repository Actions

## Synchronize Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      POST
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/sync/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; identifies the repository (specified in the URL)
        </li>
        <li>
          <strong>override_config</strong> &#8211; (optional) if specified, values within will override the importer_config specified when it was added to the repository; these values will take effect <em>only</em> for this sync operation
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">{"override_config": {"rpm_dir": "/pulp-gc-demo/override"}}</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
</table>

## Publish Repository

<table class="api">
  <tr>
    <td>
      <strong>Method</strong>
    </td>
    
    <td>
      POST
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Path</strong>
    </td>
    
    <td>
      <code>/v2/repositories/[id]/publish/[distributor_id]/</code>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Parameters</strong>
    </td>
    
    <td>
      <ul>
        <li>
          <strong>id</strong> &#8211; identifies the repository (specified in the URL)
        </li>
        <li>
          <strong>distributor_id</strong> &#8211; identifies which distributor assigned to the repository should be published
        </li>
        <li>
          <strong>override_config</strong> &#8211; (optional) if specified, values within will override the distributor_config specified when it was added to the repository; these values will take effect <em>only</em> for this publish operation
        </li>
      </ul>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Return</strong>
    </td>
    
    <td>
      None
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Request Body</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">{"override_config": {"publish_option_1": "override_value"}}</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
  
  <tr>
    <td>
      <strong>Sample Response</strong>
    </td>
    
    <td>
      <div class="wp_syntax">
        <table>
          <tr>
            <td class="code">
              <pre class="json" style="font-family:monospace;">True</pre>
            </td>
          </tr>
        </table>
      </div>
    </td>
  </tr>
</table>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-08-pulp-community-release-18.md
`````markdown
---
date: 2011-11-08T20:55:50+00:00
id: 521
title: Pulp Community Release 18
date: 2011-11-08T18:24:23+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=521
permalink: /2011/11/08/pulp-community-release-18/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/11/cr-18.png" alt="" title="Pulp Community Release 18" width="444" height="161" class="aligncenter size-full wp-image-522" />

## Installation &#038; Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org) As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes.

### Upgrade Database Migration

The `pulp-migrate` script might warn about repositories with the same relative paths. Relative paths need to be unique across repositories in Pulp. Please make sure to clean up these repositories as this functionality is deprecated and will be unsupported in upcoming releases.

### Server Configuration

The configuration option:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>tasking<span style="">&#93;</span></span>
max_concurrent</pre>
      </td>
    </tr>
  </table>
</div>

has changed to:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="ini" style="font-family:monospace;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>tasking<span style="">&#93;</span></span>
concurrency_threshold</pre>
      </td>
    </tr>
  </table>
</div>

This is in preparation for the administrator to &#8220;weight&#8221; tasks. Currently, the semantics of the property have not changed. Details can be found here <a href="https://fedorahosted.org/pulp/wiki/WeightedTasks" target="new">on the weighted tasks design wiki.</a>

### Consumers

The pulp consumer certificate location is now configurable. As part of this change, the default location was changed from:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>pki<span style="color: #000000; font-weight: bold;">/</span>consumer<span style="color: #000000; font-weight: bold;">/</span></pre>
      </td>
    </tr>
  </table>
</div>

to:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">/</span>etc<span style="color: #000000; font-weight: bold;">/</span>pki<span style="color: #000000; font-weight: bold;">/</span>consumer<span style="color: #000000; font-weight: bold;">/</span>pulp</pre>
      </td>
    </tr>
  </table>
</div>

to avoid collisions with RHSM certificates. After upgrading Pulp on consumer systems, the `pulp-agent` daemon must be restarted and the consumer re-registered. Alternatively, the certificate may be manually migrated to the new directory.

## Features &#038; Changes

  * Added support for package uninstallation through the API and CLI.
  * Added support for package group uninstallation through the API and CLI.
  * Enhanced progress reporting of repository synchronization. Progress is now reported on each individual item being downloaded.
  * Exporter (continued from last sprint): 
      * Added Support for deltarpms and prestodelta metadata export.
      * Added ability to export repository groups to target location.
  * Distribution Enhancements: 
      * Distributions now use a new id format: `ks-$family-$variant-$version-$arch`
      * New selective sync support to add and remove distributions between repositories.
      * Added new timestamp field to distribution model to capture when the treeinfo was last updated.
      * Pulp now stores distributions in a central location (`/var/lib/pulp/distribution`) for space optimization and to allow a distribution to be associated with multiple repositories.
      * The distribution `relativepath` to be path of the distro location.
      * The distribution URL will now use the repository&#8217;s relative path. A distribution can be associated to multiple repositories using same distribution ID.
  * Local Discovery: Support to discover repositories from a local file based URL paths.
  * Selective operations such as add/remove packages or errata on a repository will not automatically trigger a metadata generation task. Users need to manually trigger by calling the generate metadata on the repository after the associations are complete (`pulp-admin repo generate_metadata`).
  * Repository Notes: Repository notes are similar to key-value pairs on consumers. The ability to add, update and delete notes from a repository has been added. Repositories may also be queried on note data. For more information, see the <a href="https://pulpproject.org/ug/UGRepo.html#notes" target="new">repository section of the user guide.</a>
  * Repo Synchronization Schedule 
      * REST API changed to separate sync schedule management from repository creation and update. A new sub-collection has been added (`/pulp/api/repositories/<id>/schedules/sync/`) that accepts `GET`, `PUT`, and `DELETE` calls. Details can be found inthe <a href="https://pulpproject.org/ug/UGRepo.html" target="new">repository section of the user guide.</a>
      * The `pulp-admin` script has been changed to utilize the new REST API. Schedule creation and update are no longer part of the `pulp-admin repo create` and `pulp-admin repo update` actions. Repository scheduled syncs can now be viewed and managed with the `pulp-admin repo sync` action. The `--help` flag should be used for more details. Details can be found here: https://fedorahosted.org/pulp/wiki/UGRepo#sync
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-09-pulp-fedora-16-builds.md
`````markdown
---
date: 2011-11-09T20:55:50+00:00
id: 529
title: Pulp Fedora 16 Builds
date: 2011-11-09T21:08:37+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=529
permalink: /2011/11/09/pulp-fedora-16-builds/
categories:
  - Releases
---
<!-- more -->
I forgot to mention in the last announcement that [Community Release 18](http://blog.pulpproject.org/2011/11/08/pulp-community-release-18/) will be the last build of Pulp offered on Fedora 14. Going forward support will continue on Fedora 15 and 16.

The latest testing build for Pulp is available on Fedora 16 and can be found <a href="http://repos.fedorapeople.org/repos/pulp/pulp/testing/fedora-16/" target="new">in our testing repositories.</a> Instructions for using our testing repositories can be found <a href="http://pulpproject.org/ug/UGInstallation.html#latest" target="new">in the installation portion of our user guide.</a> As you can imagine by the term &#8220;testing build&#8221;, we make no guarantees as to its stability. <img src="https://www.pulpproject.org/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" />
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-11-21-importer-sync-apis.md
`````markdown
---
date: 2011-11-21T20:55:50+00:00
id: 535
title: Importer Sync APIs
date: 2011-11-21T22:05:32+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=535
permalink: /2011/11/21/importer-sync-apis/
categories:
  - "2.0"
---
<!-- more -->
One of my stories for the sprint is to revisit the the APIs for interacting back and forth between a plugin and the Pulp server during a sync operation. The goal is too make sure they are not only sufficient from a functionality perspective, but designed in such a way as to not absolutely destroy performance. As you can imagine, that last part takes a little bit of thought and creativity. I want to avoid making an API that is awesome for RPMs and near unusable for everything else (I had to work with a guy once who wrote APIs that only he would want to use, I&#8217;m not getting back into that situation again), so I figured I&#8217;d lay out how I see most sync operations taking place and use that as a starting point to talk with current plugin writers on their needs.

Below is what I imagine is a rough outline of what most importer plugins will look like. It will reference how the APIs from importer back into Pulp* look today, but realize the driving force behind this is refining those APIs, so they&#8217;ll be changing in the next few days as I digest this.

_* The term &#8220;conduit&#8221; is used to refer to the object passed to the plugin that exposes the Pulp functionality it will want to use. Each conduit instance is scoped to the repository being synchronized, so don&#8217;t be surprised to not see the repository ID in any of the conduit signatures below._

## Step 1: Query External Feed

I figure the first step just about any importer will want to do is query the external source from which units will be imported. Already in place is the ability for each importer type to accept a custom set of configuration options on a per repo basis, so the importer should already have everything it needs to find out what work it has to do.

In the RPM world, this involves fetching the repository&#8217;s metadata and starting to break down the file list.

## Step 2: Current State of the Repository

Once we know what the external source says the repository should look like, we need to know what the repository _currently_ looks like. On first sync this will be empty, but the common case is incremental updates to a previously synchronized repository.

**Conduit Call: get\_unit\_keys\_for\_repo**
  
A unit key is a dictionary of key-value pairs that uniquely identifies a content unit in the context of its content type. The keys contained within will vary by content type depending on what makes sense. I suppose you could call it the &#8220;natural&#8221; key as compared to the unit ID which is talked about later.

This is a single call the plugin will use to determine the unit keys of all units currently associated with the repository. The &#8220;single call&#8221; part of that is important since I&#8217;m trying to keep plugin writers from having to utterly smash the database, a theme you&#8217;ll see repeated throughout this write up.

## Step 3: Resolve Repository Changes

Using the above two pieces of information (what should be in the repository and what currently is), the plugin will want to resolve the differences. It should be noted that I&#8217;m expecting this to happen almost entirely in memory at this point and not incur massive amounts of Pulp database hits (this is the driving reason behind the single call in step 2 rather than giving the plugin writer calls to the database to test units on a case by case basis).

In some cases, I expect this to be an early exit. If you know there&#8217;s no chance of content metadata changing and needing to update the unit&#8217;s metadata, you can punch out early if there are no new units.

By now, I expect the plugin writer to have two lists: content units to be added (and updated, you&#8217;ll see what I mean in a minute) in the repository and units to be unassociated from the repository.

## Step 4: Add or Update Units

My gut reaction* is that in most cases, the plugin won&#8217;t care if a unit is being added or updated. It just wants the correct metadata in the database and the unit associated to the repository. So the current API has a single idempotent call that does either and add or update; the Pulp server makes the call and the plugin writer&#8217;s life is easier.

_* My gut may be totally wrong, so feel free to argue this point._

I suspect I&#8217;ll be changing this to provide both fine-grained semantics as well as this sort of utility combination call. For now though, the idea is that the plugin will:

  1. Add (or update) the unit to Pulp. This will create an entry in the database for the unit if one didn&#8217;t already exist, but it is orphaned (doesn&#8217;t belong to a repository) by default.
  2. Associate the unit to the repository being synchronized.

Even now as I look at the above list I wonder why I didn&#8217;t just take the extra step of adding another aggregate call that will add/update and associate all in one, leveraging the fact that they are all idempotent so the plugin writer only really needs to concern themselves with the post-conditions and not the correct incantation of conduit calls to get there.

The other big operation taking place in this step is the downloading of the unit&#8217;s bits. This is left entirely to the plugin itself to implement, though in the future if there are any utilities we can provide they may be in some form of supplemental package.

The noteworthy part of the download operation is that the plugin asks Pulp for the final say on where to store the unit. The plugin determines the relative path that will keep one unit&#8217;s bits from conflicting with another&#8217;s (segregated by type), but Pulp is asked for the actual location on disk.

Also notice that the download bits part is optional. If a plugin wants to use Pulp strictly for cataloging content and not actually doing any bits movement, that&#8217;s totally possible with these APIs.

This area is my biggest concern in terms of Pulp overhead&#8217;s influence on the overall performance. So far it seems like the add/update call can&#8217;t cleanly be batched, but I&#8217;m also ok with the concept of 2 database hits per unit being added (at some point we&#8217;re going to have to actually use the database). What we have batched are the associate calls, which means that until that uber add/update/associate call exists, it&#8217;s only a single call to associate the running list of added/updated units to the repository.

**Conduit Call: request\_unit\_filename(content\_type, relative\_path)**
  
Not much else to explain here. This prevents the plugin from having to care where the admin configured Pulp to store content and lets the plugin focus on the important part: uniquely storing unit bits without duplication.

**Conduit Call: add\_or\_update\_content\_unit(type\_id, unit\_key, filename, custom\_unit\_data)**
  
(This isn&#8217;t exactly how it appears in git right now, but the git version is definitely busted, so I&#8217;ll talk to where I want to go with it.)

The unit\_key has been discussed earlier. The custom\_unit_data field is a dictionary containing whatever metadata the plugin wants to store for that unit; there is no set schema for what goes in here. The filename may seem odd, but I&#8217;m expecting the purging of orphaned packages to be a Pulp operation (in other words, not contacting a plugin). That means Pulp needs to know where on disk the bits are stored. In the case of metadata-only units, this will be None and Pulp will simply remove the database entry on orphaned unit cleanup.

**Conduit Call: associate\_content\_unit(type\_id, unit\_id)**
  
The unit ID is Pulp&#8217;s unique ID for the content unit (as compared to the unit key which is the natural key). This is returned from the add/update call which gives that method the side effect of translating unit_key into database-level ID. Again, a batch operation will reduce the database hits for making all of these associations.

## Step 5: Unassociate Removed Units

Using the data from early on, the plugin will know which units are in the repository that are not in the external source. I still have to figure out a solution for how to handle units manually associated with a repository; either the plugin should support a flag that says do not unassociate unknown units or the manually associated units will have a flag indicating they were explicitly associated and the plugin should use that information and not undo user-initiated changes.

**Conduit Call: unassociate\_content\_unit(type\_id, unit\_id)**
  
As I write this I realize that, given my explanation, the plugin writer doesn&#8217;t have the unit\_id for units that are supposed to be removed at this point. My expectation is that they used the get\_unit\_keys\_for\_repo to determine which units need to be removed, but that doesn&#8217;t include the database IDs. So I either need to enhance these APIs to be able to unassociate by unit\_key or give an explicit ID lookup call (that call has the smell of giving a plugin writer enough rope to hang himself with). Like I said, this is a work in progress and I&#8217;m half using this to think out loud <img src="https://www.pulpproject.org/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" />

## Step 6: Return a Report

A successful sync_repo call is expected to return an instance of SyncReport. That&#8217;s stored in the newly added sync history tracking on the repository and can be accessed through the REST API. The sync report currently includes three pieces of data specified by the plugin:

  * Number of units added
  * Number of units removed
  * Arbitrary log of the sync

The log is meant to give the user visibility into the sync process itself. Added/removed counts are meant to, among other things, be used as triggers for other things that may need to happen when a repository&#8217;s contents change.

## Other: Repository Working Directory

I didn&#8217;t know where to fit this in, but Pulp will provide each importer with a working directory for each repository. This is meant to store temporary files needed during the synchronize process. For instance, our current RPM sync operation utilizes the repository metadata which can be downloaded and unpacked to this directory. Pulp will take care of cleaning up this directory on repository delete.

# Next Steps

I&#8217;m focused on this for the next day or so, depending on how early I mentally check out for Thanksgiving. I can&#8217;t stress enough how any input is appreciated. Ping me in chat (jdob @ #pulp on Freenode), e-mail pulp-list, comment to this blog, send me a carrier pigeon&#8230; whatever it takes to let me know what you think.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2011-12-15-pulp-community-release-19.md
`````markdown
---
date: 2011-12-15T20:55:50+00:00
id: 548
title: Pulp Community Release 19
date: 2011-12-15T18:02:39+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=548
permalink: /2011/12/15/pulp-community-release-19/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2011/12/cr-19.png" alt="" title="Pulp Community Release 19" width="442" height="161" class="aligncenter size-full wp-image-550" srcset="http://www.pulpproject.org/wp-content/uploads/2011/12/cr-19-300x109.png 300w, http://www.pulpproject.org/wp-content/uploads/2011/12/cr-19.png 442w" sizes="(max-width: 442px) 100vw, 442px" />

## Installation &#038; Upgrade

Installation instructions can be found in the [Pulp User Guide](http://pulpproject.org/ug/UGInstallation.html#installation) at the [Pulp project web site.](http://www.pulpproject.org) As usual, upgraded environments must run `pulp-migrate` to upgrade to the latest database changes. This release includes upgraded versions of both the server and client RPMs (admin and consumer) and should be upgraded in conjunction with each other.

### Upgrade Database Migration

Last release, changes were made with respect to requiring the relative path of a repository to be unique. This sprint saw further refinements that prevent one repository from being nested within another. For example, hosting a repository at &#8220;/foo/bar&#8221; and another at &#8220;/foo/bar/baz&#8221; causes a number of issues and will be prevented going forward. However, repositories &#8220;/foo/bar/wombat&#8221; and &#8220;/foo/bar/zombie&#8221; are valid as long as &#8220;/foo/bar&#8221; is not itself a repository.

If your installation contains repositories with relative paths that violate this rule, the `pulp-migrate` script will display a warning. The migration will complete and the Pulp server will continue to run, however the repositories in question should be manually fixed as soon as possible.

### Custom Built Dependencies

Due to a bug in python-oauth, the Pulp repositories now contain a patched version: `python-oauth2-1.5.170-2.pulp.fc16.noarch.rpm`. This version is a dependency on the Pulp RPM and the version from the Fedora repositories (1.5.170-2.fc16) will be upgraded during the Pulp installation. Appropriate care should be taken for systems using this library.

Additionally, the Pulp built version of python-isodate has been upgraded to `ython-isodate-0.4.4-4.pulp.fc16.noarch.rpm`.

### Supported Platforms

In keeping with Pulp&#8217;s policy of building for Fedora&#8217;s current and previous releases, builds for Fedora 14 will no longer be provided. Builds for this Community Release are provided for Fedora 15 and Fedora 16 (RHEL builds remain unchanged).

## Features &#038; Changes

  * Updated SELinux Policy 
      * Improved upon security rules from previous releases.
      * Pulp files are now labled with the `httpd_sys_content_t` context.
      * Renamed semodule name from `pulp` to `pulp-server`.
      * More details can be found on <a href="https://fedorahosted.org/pulp/wiki/SELinux" target="new">the SELinux design wiki page.</a>
  * Repository Filters Enahncements 
      * Repository filters are now applied to manually uploaded content in addition to synchronized content.
  * Bulk Repository Status APIs 
      * Added API calls to retrieve sync status and history for all or a specified set of repositories in a single API call.
      * More details can be found on <a href="https://fedorahosted.org/pulp/wiki/RepoBulkAPIEnhancements" target="new">the Repository Bulk API wiki page.</a>
  * Repository Enhancements &#038; Changes 
      * Added the ability to update checksum type on a repository. Doing so will cause the repository metadata to be regenerated.
      * Added uniqueness constraint to ensure relative paths are unique across repositories.
      * Added checks to ensure that the relative path of a new repository will not allow the repository to be nested within another repository. See the user guide for more information.
  * Repository Clone Enhancements &#038; Changes 
      * Overall performance tweaks to greatly improve the speed of the clone operation.
      * Cloning now has the ability to resolve duplicate packages, distribution tree missing sub-directories, and metadata checksum mismatches between filesystem and database.
      * Changed cloned repository symlinks to refer to the central package location instead of the parent repository.
      * Added the clone operation to the persistent task framework, allowing an in process clone to be resumed on server restart.
  * Distribution Enhancements 
      * Added an `arch` field to the distribution model.
      * Distribution API root changed from `/distribution` to `/distributions` to be consistent with the Pulp API conventions.
      * A number of changes have been made to the distribution API to be more REST-like.
  * Added a new AMQP event that is raised when a task is dequeued. Currently, this only applies to tasks related to repository synchronization. More information can be found on <a href="https://fedorahosted.org/pulp/wiki/QpidEvents" target="new">the Pulp&#8217;s AMQP events wiki page.</a>
  * Added support for updating packages on a consumer. Package update is modeled after yum behavior in that when packages are specified, only those packages are updated. When no packages are specified, all upgradable pacakges are updated. See the User Guide and API documentation for more details.
  * <a href="https://bugzilla.redhat.com/buglist.cgi?target_release=Sprint%2030&#038;query_format=advanced&#038;bug_status=VERIFIED&#038;product=Pulp&#038;classification=Community" target="new">Fixed 21 bugs.</a>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-01-10-unit-associations.md
`````markdown
---
date: 2012-01-10T20:55:50+00:00
id: 563
title: Unit Associations
date: 2012-01-10T15:27:48+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=563
permalink: /2012/01/10/unit-associations/
categories:
  - "2.0"
---
<!-- more -->
I spent the bulk of last sprint working on the relationship (read: association) between a content unit and a repository. A lot of the changes and functionality were driven by community feedback. Given their use cases, in 2.0 we&#8217;ll be able to support a lot of queries that aren&#8217;t capable in the 1.0 architecture.

## Association Metadata

In 1.0, the association between a repository and a package is maintained by a simple list of packages on the repository. In 2.0, this relationship is its own entity, allowing us to capture metadata about the association itself. This metadata can be easily expanded in the future, but for now we track the following:

### Association Creation Timestamp

Timestamp of when the association between repository and unit was first created.

### Association Update Timestamp

The methods to create an association is idempotent; if the association already exists, a second isn&#8217;t created and no error is raised. The one change that occurs is that the &#8220;updated&#8221; field on the association is changed to reflect when the association call was made.

This can be used as a mechanism for tracking the last time an association was confirmed, which can then be used to ask questions such as &#8220;Show me all units that have not been present in the external source in the last 3 months.&#8221;

### Owner

I&#8217;m starting to work through the scenarios surrounding user associations v. those created through an importer. User associations can be either by a unit upload or by copying the associations from an existing repository. I wanted to be able to track both the type of owner (user v. importer) and the ID of the owner for auditing purposes.

This has other implications as well. An importer can only affect its own associations, preventing the possibility that the importer will undo explicit repository additions made by a user. It is possible that a unit will be associated multiple times with a single repository, each time by a different owner. The unit association query provides the ability to filter on owner metadata or to have Pulp remove the duplicate associations before returning the results.

## Unit Association Query

The unit association query, or more specifically the criteria that drives the query, is used in a number of places beyond showing a user the contents of a repository. At very least, the query is used in the following places:

  * Providing users with the ability to list or search for specific units in a repository.
  * Accessible to importers through the sync conduit to be used when determining the current state of the repository during a sync.
  * Similarly, accessible to distributors through the publish conduit to give the plugin the flexibility it needs to get the data necessary to publish the repository.
  * The criteria document is used in the 2.0 evolution of repository cloning to let users select a custom set of units to migrate to the new repository.

I&#8217;ve mentioned the criteria a number of times now. The criteria refers to a JSON document passed to Pulp in the unit association query to drive the query and returned results. The following capabilities are provided:

  * **Filtering** &#8211; Filtering can be done on both the association metadata as well as the unit metadata itself. MongoDB syntax is used directly in the criteria document, giving users access to useful constructs such as $and, $or, $in, $gt, $lt &#8212; you get the idea. If you can filter on it using Mongo, you can filter on it for the unit association query too.
  * **Sorting** &#8211; Sorting can be done on either the association metadata or the unit metadata; within a particular metadata category, however, multiple sort fields can be provided.
  * **Skip &#038; Limit** &#8211; Used in conjunction with each other, the skip and limit fields can be used to achieve server-side pagination driven at the database level.
  * **Field Limiting** &#8211; A list of association metadata and/or unit metadata fields can be provided to limit the returned data to save on bandwidth and memory costs.

### Examples

While the above list describes the supported functionality, I&#8217;ve found it&#8217;s often easier to think in terms of the sorts of questions that can be supported by it. Below are a few of the query use cases (and the respective JSON criteria document) I wanted to answer with the query functionality.

The NEVRA for all RPMs in the repository, sorted by name (a basic web UI for RPMs in a repo):

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "type_ids" : ["rpm"],
  "fields" : { "unit" : ["name", "epoch", "version", "release", "arch"] },
  "sort" : { "unit" : { "name" : "ascending"} }
}</pre>
      </td>
    </tr>
  </table>
</div>

All units added to the repository more than a month ago, regardless of type (too lazy to type out the date subtraction code):

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "filters" : { "association" : {"created" : {"$lt" : &lt;now - 30 days&gt;}}} }</pre>
      </td>
    </tr>
  </table>
</div>

Basic pagination (on page 4 showing 25 items per page):

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "limit" : 25, "skip" : "75" }</pre>
      </td>
    </tr>
  </table>
</div>

All noarch RPMs:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "type_ids" : ["rpm"],
  "filters" : { "unit" : { "arch" : "noarch" }}
}</pre>
      </td>
    </tr>
  </table>
</div>

User selected multiple sort columns to sort RPMs by name with the most recent version first:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "type_ids" : ["rpm"],
  "sort" : { "unit" : {"name" : 1, "version" : -1, "epoch" : -1}}
}</pre>
      </td>
    </tr>
  </table>
</div>

All user-uploaded RPMs in a repository, showing the most recently uploaded ones first:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "type_ids" : ["rpm"],
  "filter" : { "association" : { "owner_type" : "user" }},
  "sort" : { "association" : { "owner_type" : "descending" }}
}</pre>
      </td>
    </tr>
  </table>
</div>

Units uploaded by a system admin sometime in November:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "filters" : { "association" : { "owner_type" : "user", "created" { "$gte" : "November 1", "$lte" : "November 30"}}}}</pre>
      </td>
    </tr>
  </table>
</div>

Units uploaded by a rogue system admin:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="json" style="font-family:monospace;">{ "filters" : { "association" : "owner_id" : "evil-jdob" } }</pre>
      </td>
    </tr>
  </table>
</div>

## Association from Repository

Let&#8217;s get this out of the way now: I haven&#8217;t thought of a good name for this feature. It&#8217;s a new spin on cloning, allowing the user to specify a criteria document to dictate which units from a source repository should be imported into a destination repository. I&#8217;m open to suggestions <img src="https://www.pulpproject.org/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" />

As I&#8217;ve mentioned a few times now, the criteria document format is the same as for the unit association query. This lets a user tweak the criteria and see matching units in the source repository. Once the criteria is acceptable, the same document is then fed back into Pulp to be used to associate those units into a new repository.

It&#8217;s important to note that the destination repository&#8217;s importer is notified of the new associations. This gives the importer a hook to do whatever setup work it needs to do to accomodate the newly associated units. I won&#8217;t go into the details of the plugin implementation here, but the docstrings for the `Importer` base class should provide enough guidance if you&#8217;re curious.

## Next Steps

When I get the time, it really shouldn&#8217;t take long to add the infrastructure to be able to save named copies of criteria documents to the database. Once that is in place, adapting the query to accept a previously saved criteria document instead of respecifying it each time should be a pretty trivial change.

At that point, I&#8217;d like to add some small variable support to the criteria document. This is mostly necessary for any searches that focus around dates. A saved query that shows all units added since January 1st starts to lose its usefulness over time. However, the ability to specify &#8220;in the last 30 days&#8221; and have Pulp resolve that at execution time is much more useful.

I haven&#8217;t gotten any of this on the Pulp backlog yet, much less scheduled for a sprint, but it&#8217;s definitely functionality that&#8217;s in my head and pretty achievable given the way the current code is written.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-02-24-pulp-v1-0-release.md
`````markdown
---
date: 2012-02-24T20:55:50+00:00
id: 576
title: Pulp v1.0 Release
date: 2012-02-24T19:58:31+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=576
permalink: /2012/02/24/pulp-v1-0-release/
categories:
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/02/v1.png" alt="" title="Pulp v1.0" width="295" height="161" class="alignnone size-full wp-image-577" />

The team is proud to announce the availability of the Pulp 1.0 release.

## Quick Links

  * [Installation Instructions](http://pulpproject.org/ug/UGInstallation.html#installation)
  * [User Guide](http://pulpproject.org/ug/index.html)
  * [Project Site](http://pulpproject.org/)
  * [Mailing List](https://www.redhat.com/mailman/listinfo/pulp-list)
  * Chat: #pulp on Freenode

## What is Pulp?

Pulp is a repository and consumer management system. On the repository management side of things, the Pulp server will synchronize yum repositories from external sources, either manually initiated or at recurring scheduled intervals. Repositories can be manually created and populated with user-uploaded content as well in the case there is no external source. These repositories are then hosted by either the Pulp server directly or synchronized to an external server (called a Content Deliver Server or &#8220;CDS&#8221;) to better control the bandwidth required for the repository. Repositories can be made available to anybody or secured, requiring yum clients to present a valid x.509 certificate to be granted access.

Pulp also provides a number of features designed to facilitate the management of clients (called &#8220;consumers&#8221;) using Pulp-provided repositories. Using the Pulp consumer scripts, a client machine registers itself with the Pulp server and uploads a profile describing its installed packages. As the consumer binds itself to Pulp repositories, the server keeps track and can then provide information to administrators about applicable errata available to a given consumer. Each consumer is connected to a message bus that the Pulp server can use to remotely trigger operations on the consumer such as package installations and updates.

## Going Forward

As with any release, we recognize issues are going to arise. We&#8217;ve already set up a <a href="https://bugzilla.redhat.com/buglist.cgi?query_format=advanced&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=POST&#038;bug_status=CLOSED&#038;version=1.1.0&#038;product=Pulp&#038;classification=Community" target="new">1.1 version in bugzilla</a> so we can begin to plan out what support for the v1 stream will look like.

Outside of that, the team is focused on the re-architecting of Pulp for v2. The theme for v2 is &#8220;Pulp as a Platform&#8221; providing mechanisms for developers to use Pulp infrastructure for non-RPM content types. Of course, Pulp v2 will this architecture to continue to handle its existing content types, including RPMs and errata, as well as many refinements to its existing subsystems. More information and progress on the v2 stream can be found [in the 2.0 category of this blog.](/category/2-0/)

## Thank You

The pulp.spec file was first committed to git on May 20, 2010, which I suppose represents as good a birth date for Pulp as any. In the time since that commit our small 4 person team has over doubled in size. But more importantly, a community has sprung up in the process. Today, the chat room and mailing list are buzzing with comments ranging from using Pulp as a standalone product to embedding Pulp as part of a larger initiative (see below) to hacking up the pieces of Pulp to meet more specific needs.

It&#8217;s been awesome to watch it all take shape. I hesitate to thank individuals by name for fear of missing any, but realize that all contributions, from feature requests to bug reports (and everything in between), are greatly appreciated by the team. The community has helped Pulp become a better product; that&#8217;s simply a fact and there&#8217;s no disputing it. So thank you to everyone for your interest in Pulp, feedback on what you like (and don&#8217;t), keeping us company in the chat room, and general patience as so few balance the needs of so many. Y&#8217;all rock.

### Powered by Pulp

Below are a few examples of projects using Pulp as part of the back end:

  * <a href="https://fedorahosted.org/pulpdist/" target="new">PulpDist</a>
  * <a href="https://github.com/stpierre/sponge" target="new">Sponge</a>
  * <a href="http://katello.org/" target="new">Katello</a>

## Upgrades from Community Releases

Upgrading a Community Release to the 1.0 release is supported. Be sure to run `pulp-migrate` and restart Apache once the new packages are installed.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-04-03-pulp-beyond-1-0.md
`````markdown
---
date: 2012-04-03T20:55:50+00:00
id: 600
title: Pulp Beyond 1.0
date: 2012-04-03T14:12:03+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=600
permalink: /2012/04/03/pulp-beyond-1-0/
categories:
  - "2.0"
---
<!-- more -->
With Pulp 1.0 a few weeks old now, I wanted to send out an update on the next steps for the project.

## Version 1.0.x

Our recent work on the v1 stream has been bug fixes for a related project in Red Hat (Katello). Our current (internal-only for now) v1 release is 1.0.2 and contains about a dozen bug fixes. The current plan is to move that into the v1/stable repository sometime next week. More information, including a list of bug fixes, coming in the next few days.

## Version 1.1

This may or may not even exist <img src="https://www.pulpproject.org/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" />

The original thought was that we&#8217;d be a few months out from being able to do a version 2.0 release and would probably want to do an interim release with critical bug fixes. That role seems to have been filled with the 1.0.x builds. As a team we&#8217;re not exactly swimming in free time, so it&#8217;s possible that we may push forward to get version 2.0 in an alpha state and skip 1.1 entirely. We should have a clearer idea of this in the next few weeks as Katello gets closer to a release.

## Version 2.0

Not surprisingly, our big push as a team is to get the 2.0 release to a usable state as quickly as possible. It&#8217;s been talked about on this site before but never as an overall checklist of features and goals. Now that 1.0 is out and in use, it makes sense to start to look to what&#8217;s coming in 2.0.

  * New architecture to allow for user-defined content types to be managed.
  * Plugin-based architecture allows content synchronization from non-yum external sources. Plugins are able to leverage Pulp&#8217;s platform capabilities such as concurrency management, sync scheduling, permissions, and more.
  * A more clear distinction between external content synchronization and the publishing of that content from the Pulp server. As with sync, the architecture revolves around a plugin model which allows new publishing mechanisms to be easily added to the platform.
  * Revamped concurrency layer to ensure safety across multiple requests through postponing or outright rejecting conflicting requests.
  * Closer adherence to REST practices including the proper usage of HTTP response codes and consistent data and format for exception conditions.
  * Rewritten client using an extension mechanism to easily add new commands by leveraging the client&#8217;s pre-configured server bindings. Not happy with Pulp client output? In 5 minutes you can write a new extension that formats the data however you see fit.

The above list is already implemented, just not quite in a totally clean state yet. The following are planned changes for version 2.0 but obviously may change over the next few months:

  * Separation of the server->consumer communications, allowing the existing consumer agent infrastructure to be used outside of Pulp for custom needs.
  * Revamped CDS functionality. There are a lot of ideas here, many revolving around allowing the CDS to function as more than a simple repository mirror. One such ability is to act as a proxy to the Pulp server in the case of large geographic differences between server and consumers or firewall and security considerations.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-04-11-pulp-v1-0-4-release.md
`````markdown
---
date: 2012-04-11T20:55:50+00:00
id: 611
title: Pulp v1.0.4 Release
date: 2012-04-11T20:55:50+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=611
permalink: /2012/04/11/pulp-v1-0-4-release/
categories:
  - Releases
---
<!-- more -->
A bug fix release has been built to the v1 stable repository (<a href="http://repos.fedorapeople.org/repos/pulp/pulp/v1/stable/" target="new">http://repos.fedorapeople.org/repos/pulp/pulp/v1/stable/</a>). The fixed bug list can be found below.

## Upgrade

One of the bug fixes present in this release is to address a situation that may arise when two similarly named packages have similar checksums (a small chance however we actually managed to run into it). As part of that fix, existing packages need to be migrated to a new directory structure. This release contains a script to perform that migration. Instructions on running that script can be found [on the Pulp wiki.](https://fedorahosted.org/pulp/wiki/PackagePathUpdate#Howtorunmigration)

**The migration script must be run before attempting to run a sync with the new release to avoid duplicating content.**

## Quick Links

  * [Installation Instructions](http://pulpproject.org/ug/UGInstallation.html#installation)
  * [User Guide](http://pulpproject.org/ug/index.html)
  * [Project Site](http://pulpproject.org/)
  * [Mailing List](https://www.redhat.com/mailman/listinfo/pulp-list)
  * Chat: #pulp on Freenode

## Bug Fixes

  * [809628](https://bugzilla.redhat.com/show_bug.cgi?id=809628) &#8211; fixed error message formatting
  * [809195](https://bugzilla.redhat.com/show_bug.cgi?id=809195) &#8211; added post_sync dequeue hook to scheduled syncs
  * [807332](https://bugzilla.redhat.com/show_bug.cgi?id=807332) &#8211; the continuing story of the post sync url firing off actuall POST
  * [807516](https://bugzilla.redhat.com/show_bug.cgi?id=807516) &#8211; deleting a repository does not affect repoids associated with a package
  * [806976](https://bugzilla.redhat.com/show_bug.cgi?id=806976) &#8211; fix overlap in /etc/pulp files between main and sub-packages
  * [805740](https://bugzilla.redhat.com/show_bug.cgi?id=805740) &#8211; generate metadata on re-promotion with filters
  * [805922](https://bugzilla.redhat.com/show_bug.cgi?id=805922) &#8211; adding sync logic to look for server directory during clone/local
  * [802454](https://bugzilla.redhat.com/show_bug.cgi?id=802454) &#8211; added post\_sync\_url and post_sync dequeue hook for POSTing task
  * [798656](https://bugzilla.redhat.com/show_bug.cgi?id=798656) &#8211; include full checksum when constructing package paths
  * [801184](https://bugzilla.redhat.com/show_bug.cgi?id=801184) &#8211; error messages when installing selinux RPM after its already been installed
  * [799120](https://bugzilla.redhat.com/show_bug.cgi?id=799120) &#8211; added package filtering at package import stage
  * [797929](https://bugzilla.redhat.com/show_bug.cgi?id=797929) &#8211; add requirement on semanage command
  * [795819](https://bugzilla.redhat.com/show_bug.cgi?id=795819) &#8211; account for the relativepath from the metadata location field

## Version 1.1 In Development

Bug/RFE triage and planning for our 1.1 release has completed and work will begin this sprint towards the included fixes. Aligned bugs can be found [using this bugzilla query](https://bugzilla.redhat.com/buglist.cgi?query_format=advanced&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;version=1.1.0&#038;product=Pulp&#038;classification=Community) and while there are no known changes to be made to that list, it is, as always, subject to change. Current plans are to target a June 1 release date. More information will be available on this blog as it becomes available.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-05-24-pulp-v1-1-10-release.md
`````markdown
---
date: 2012-05-24T20:55:50+00:00
id: 626
title: Pulp v1.1 Release
date: 2012-05-24T19:28:11+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=626
permalink: /2012/05/24/pulp-v1-1-10-release/
categories:
  - Releases
---
<!-- more -->
A bug fix and minor feature enhancement release has been built to the v1 stable repository (<http://repos.fedorapeople.org/repos/pulp/pulp/v1/stable/>). The fixed bug list is available below.

## Upgrades Prior to 1.0.4

The package structure on disk changed in the 1.0.4 release. A script was provided in that release to migrate existing content. If upgrading from a 1.0.4 instance this script **does not need to be run again.**

Upgrading from versions prior to 1.0.4 however **must run the migration script** to avoid duplicating content on disk. Instructions on running that script can be found [on the Pulp wiki.](https://fedorahosted.org/pulp/wiki/PackagePathUpdate#Howtorunmigration)

## Quick Links

  * [Installation Instructions](http://pulpproject.org/ug/UGInstallation.html#installation)
  * [User Guide](http://pulpproject.org/ug/index.html)
  * [Project Site](http://pulpproject.org/)
  * [Mailing List](https://www.redhat.com/mailman/listinfo/pulp-list)
  * Chat: #pulp on Freenode

## Bug Fixes

The list of bug fixes and implemented feature requests can be found [using this bugzilla query.](https://bugzilla.redhat.com/buglist.cgi?list_id=31503&#038;classification=Community&#038;query_format=advanced&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=CLOSED&#038;version=1.1.0&#038;product=Pulp)

## v2 Community Releases

We&#8217;re nearing the point of being able to release a preview build of the v2 codebase. It won&#8217;t be complete (for instances, CDS support is entirely missing at the moment and will be undergoing a pretty drastic redesign) but it should give some transparency into what is planned for Pulp&#8217;s future. My current plan for this release is to target July 1st. More news to follow as it gets closer.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-06-13-pulp-v1-1-on-fedora-17.md
`````markdown
---
date: 2012-06-13T20:55:50+00:00
id: 639
title: Pulp v1.1 on Fedora 17
date: 2012-06-13T14:42:51+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=639
permalink: /2012/06/13/pulp-v1-1-on-fedora-17/
categories:
  - Releases
---
<!-- more -->
The Pulp v1.1 release is now available for Fedora 17. The existing repo file (<http://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo>) will correctly substitute in the running version of Fedora.

The only difference in this version is that the python-simplejson package must be updated for Pulp to work. The update already exists in the Fedora repositories (python-simplejson-2.5.2-1.fc17), just make sure to update it before running Pulp.

## Quick Links

  * [Installation Instructions](http://pulpproject.org/ug/UGInstallation.html#installation)
  * [User Guide](http://pulpproject.org/ug/index.html)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-06-15-pulp-v2-preview-unit-copy.md
`````markdown
---
date: 2012-06-15T20:55:50+00:00
id: 644
title: 'Pulp v2 Preview: Unit Copy'
date: 2012-06-15T15:37:10+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=644
permalink: /2012/06/15/pulp-v2-preview-unit-copy/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
<div style="font-style:italic">
  The Pulp team is gearing up for the first community release of the v2 code base. Over the next few weeks I&#8217;ll be highlighting some of the new features in the v2 release. As with any blog entry, this is scoped to a point in time and the specific details are subject to some change before release. The overall concepts, however, should remain consistent despite any tweaks we make.
</div>

# Introduction

The cloning and filtering functionality is one of the most used features in Pulp v1. In v2, I wanted to expand on the capabilities based on feedback I&#8217;ve been hearing from the community and their use of cloning. The result is that the v1 notion of cloning is gone entirely.

The v2 model supports a much less tight coupling to the yum repository on the filesystem. Instead of having a single working area on disk where changes are instantly made visible, the driving operation in Pulp has been split between the process of importing RPMs into a repository (synchronization) and the process by which they are made available to outside consumers (publishing).

This split provides an opportunity for a significant manipulation of the contents of a repository before it is ever made live. RPMs imported into the server can be treated as building blocks that are easily manipulated in the database to quickly build up entirely new repositories before they are published.

Additionally, the v2 model has a stronger understanding of the relationship between a package and a repository, allowing us to track metadata about the association itself, such as when it was associated to a repository. This model comes into play in the unit copy feature and gives us a basis for more advanced association management in the future (for instance, the ability to version a repository at a point in time).

The unit copy functionality works by specifying a source repository and criteria to use to match packages in it. Matching packages will be associated with a specified destination directory. Unlike v1 cloning, there is no restriction on the source repository; multiple copy calls can be issued against different source repositories to populate the destination repository. Criteria can be specified as regular expressions or greater than/less than comparisons against any field in the package, everything from the name and version fields to vendor and license values. Once the destination repository is fully populated, it can be published to make the repository contents publicly accessible.

Before I go on it&#8217;s important to highlight that the idea of unit copy refers to its association with a repository. Pulp will still maintain a single storage on the filesystem of an RPM; what is copied is only the database&#8217;s understanding of which packages are associated with which repositories.

# Demo Setup

For this demo, I created two repositories.

The &#8220;pulp-f17&#8221; repository was created using Pulp&#8217;s testing repository for Fedora 17 as the feed. It has been synchronized multiple times over the course of a few days. The pulp-* RPMs had new versions released in that time, however the dependencies (for example, python-okaara) have not changed.

The &#8220;dest&#8221; repository was created without a feed. It doesn&#8217;t need one; it will be populated by units selectively copied from the pulp-f17 repository and then manually published to make its contents available.

Below is a list of the names and versions of packages in the pulp-f17 repository for reference.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">gofer-0.69
gofer-package-0.69
grinder-0.1.3
m2crypto-0.21.1.pulp
m2crypto-debuginfo-0.21.1.pulp
mod_wsgi-3.3
mod_wsgi-debuginfo-3.3
pulp-0.0.295
pulp-admin-0.0.295
pulp-cds-0.0.295
pulp-client-lib-0.0.295
pulp-common-0.0.295
pulp-consumer-0.0.295
pulp-selinux-server-0.0.295
python-gofer-0.69
python-isodate-0.4.4
python-oauth2-1.5.170
python-okaara-1.0.18
python-qpid-0.7.946106
python-rhsm-0.96.4
python-webpy-0.32</pre>
      </td>
    </tr>
  </table>
</div>

# Usage

Unit copies are done through the `pulp-admin repo copy` commands. Beneath the copy section is a separate command by type of unit being copied. At the time of this article, only RPMs, SRPMs, and DRPMs are supported, but in the future errata and potentially kickstart trees will be supported.

At minimum there are two required parameters: the source repository (`--from-repo-id`) and the destination (`--to-repo-id`). Without any criteria, this will have the effect of copying all of the RPMs in the source into the destination. If an RPM to be copied already exists in the destination, it is ignored.

That&#8217;s not terribly interesting in and of itself. The power of this feature comes in the criteria available to select units to copy. Before I get to that, the `--dry-run` or `-d` flag will display a list of packages that match the criteria without actually performing the copy. Also keep in mind that packages can be copied from multiple different source repositories using multiple calls to the copy commands; for expediency this demo will only cover a single source repository.

## Regular Expression Matching

The simplest form of criteria is a regular expression match against a field in each RPM. The format of this argument is to pass in the field name and associated regular expression. For instance, to match on RPM names that start with &#8220;p&#8221;, the full argument string would be `--match "name=^p.*"`.

Multiple fields can be matched by specifying as many arguments as necessary. For example, to match on names that start with &#8220;p&#8221; whose architecture is &#8220;noarch&#8221;, two arguments would be specified: `--match "name=^p.*" --match "arch=noarch"`. A full (dry run) example of this can be seen below:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ pulp-admin repo copy rpm <span style="color: #660033;">--from-repo-id</span> pulp-f17 <span style="color: #660033;">--to-repo-id</span> dest <span style="color: #660033;">-d</span> <span style="color: #660033;">--match</span> <span style="color: #ff0000;">"name=^p.*"</span> <span style="color: #660033;">--match</span> <span style="color: #ff0000;">"arch=noarch"</span>
+----------------------------------------------------------------------+
                             Matching Units
+----------------------------------------------------------------------+
&nbsp;
Filename: pulp-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-admin-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-cds-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-client-lib-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-common-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-consumer-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-selinux-server-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-gofer-<span style="color: #000000;">0.69</span>-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-isodate-0.4.4-<span style="color: #000000;">4</span>.pulp.fc17.noarch.rpm
Filename: python-oauth2-1.5.170-<span style="color: #000000;">2</span>.pulp.fc17.noarch.rpm
Filename: python-okaara-1.0.18-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-qpid-0.7.946106-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-rhsm-0.96.4-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-webpy-<span style="color: #000000;">0.32</span>-<span style="color: #000000;">8</span>.fc17.noarch.rpm</pre>
      </td>
    </tr>
  </table>
</div>

Selecting packages that do **not** match a regular expression uses the same syntax to the `--not` argument. For example, to list all packages in the repository that are dependencies of Pulp but not actually part of Pulp itself:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ pulp-admin repo copy rpm <span style="color: #660033;">--from-repo-id</span> pulp-f17 <span style="color: #660033;">--to-repo-id</span> dest <span style="color: #660033;">-d</span> <span style="color: #660033;">--not</span> <span style="color: #ff0000;">"name=^pulp.*"</span>
+----------------------------------------------------------------------+
                             Matching Units
+----------------------------------------------------------------------+
&nbsp;
Filename: gofer-<span style="color: #000000;">0.69</span>-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: gofer-package-<span style="color: #000000;">0.69</span>-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: grinder-0.1.3-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: m2crypto-0.21.1.pulp-<span style="color: #000000;">7</span>.fc17.x86_64.rpm
Filename: m2crypto-debuginfo-0.21.1.pulp-<span style="color: #000000;">7</span>.fc17.x86_64.rpm
Filename: mod_wsgi-<span style="color: #000000;">3.3</span>-<span style="color: #000000;">3</span>.pulp.fc17.x86_64.rpm
Filename: mod_wsgi-debuginfo-<span style="color: #000000;">3.3</span>-<span style="color: #000000;">3</span>.pulp.fc17.x86_64.rpm
Filename: python-gofer-<span style="color: #000000;">0.69</span>-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-isodate-0.4.4-<span style="color: #000000;">4</span>.pulp.fc17.noarch.rpm
Filename: python-oauth2-1.5.170-<span style="color: #000000;">2</span>.pulp.fc17.noarch.rpm
Filename: python-okaara-1.0.18-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-qpid-0.7.946106-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-rhsm-0.96.4-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: python-webpy-<span style="color: #000000;">0.32</span>-<span style="color: #000000;">8</span>.fc17.noarch.rpm</pre>
      </td>
    </tr>
  </table>
</div>

## Comparisons

RPM fields can be compared against a value as well. The client supports greater than (`--gt`), greater than or equal to (`--gte`), less than (`--lt`), and less than or equal to (`--lte`) comparisons. The format is the same, specifying both the field name and the value to use as the comparison.

For example, to copy only packages whose version is at least 1.0:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">$ pulp-admin repo copy rpm <span style="color: #660033;">--from-repo-id</span> pulp-f17 <span style="color: #660033;">--to-repo-id</span> dest <span style="color: #660033;">-d</span> <span style="color: #660033;">--gt</span> <span style="color: #ff0000;">"version=1.0"</span>
+----------------------------------------------------------------------+
                             Matching Units
+----------------------------------------------------------------------+
&nbsp;
Filename: mod_wsgi-<span style="color: #000000;">3.3</span>-<span style="color: #000000;">3</span>.pulp.fc17.x86_64.rpm
Filename: mod_wsgi-debuginfo-<span style="color: #000000;">3.3</span>-<span style="color: #000000;">3</span>.pulp.fc17.x86_64.rpm
Filename: python-oauth2-1.5.170-<span style="color: #000000;">2</span>.pulp.fc17.noarch.rpm
Filename: python-okaara-1.0.18-<span style="color: #000000;">1</span>.fc17.noarch.rpm</pre>
      </td>
    </tr>
  </table>
</div>

## Association Criteria

As I mentioned above, we have a much stronger understanding of the association between a repository and a package. Part of that is tracking when it was added to the repository. This allows us to specify criteria such as &#8220;Copy all packages added in the last 30 days.&#8221;

In my demo setup, the Pulp version was updated on June 8th, however many of the dependencies did not have new versions released in that build. For the purposes of this demo, let&#8217;s assume that I promote content from the live repository (pulp-f17) into an unstable repository (dest) once a month. To see what qualifies for promotion in June, I&#8217;d run:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">pulp-admin repo copy rpm <span style="color: #660033;">--from-repo-id</span> pulp-f17 <span style="color: #660033;">--to-repo-id</span> dest <span style="color: #660033;">-d</span> <span style="color: #660033;">--after</span> <span style="color: #000000;">2012</span>-06-01
+----------------------------------------------------------------------+
                             Matching Units
+----------------------------------------------------------------------+
&nbsp;
Filename: pulp-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-admin-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-cds-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-client-lib-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-common-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-consumer-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm
Filename: pulp-selinux-server-0.0.295-<span style="color: #000000;">1</span>.fc17.noarch.rpm</pre>
      </td>
    </tr>
  </table>
</div>

Again, that example matches packages added to the repository after June 1st. New versions of a package qualify as new packages and will be picked up as part of this criteria. The format to `--after` (and its opposite, `--before`) is an iso8601 formatted timestamp; I simply omitted the time component.

## Finishing Up

Once the desired packages have been copied (don&#8217;t forget to remove the `-d` flag to actually commit the copy), the destination repository can be published to build and expose the new repository (or simply update the repository if it was already published). I&#8217;ll cover publishing in v2 in a separate post, but for completeness the command is: `pulp-admin repo publish run --repo-id dest`.

# Future Work

As usual, don&#8217;t quote me on any of this. I don&#8217;t have an idea yet on where any of this would fit in to our priorities, but I can at least say a few words about how I want to see this evolve.

The first step would be adding the ability for the server to saved named criteria. While this can somewhat be achieved by client-side scripts (or a CLI extension, but again, more on that in a separate article), I think it makes sense as a server-side concept. The idea would be to define regular criteria values and use an identifier to run that criteria again in the future.

Our scheduler in v2 is significantly more flexible in terms of the amount of work it takes on the server to use it, so I&#8217;d like to see copy calls get scheduled and incorporated into a normal scheduled sync workflow. Along the same lines, I&#8217;d like to be able to batch the copy call at the end of a sync, which would greatly aid in automation. The idea would be to tell the Pulp server to sync a repository, for example, every Sunday at 1am and then copy all newly synchronized packages into an unstable repository.

# References

The user guide entry for unit copy can be found at: <a href="http://pulpproject.org/v2/rpm-user-guide/admin-client/repo/units.html#copy-packages-between-repositories" target="new">http://pulpproject.org/v2/rpm-user-guide/admin-client/repo/units.html#copy-packages-between-repositories</a>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-06-24-pulp-v2-preview-client-extensions.md
`````markdown
---
date: 2012-06-24T20:55:50+00:00
id: 668
title: 'Pulp v2 Preview: Client Extensions'
date: 2012-06-24T17:21:54+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=668
permalink: /2012/06/24/pulp-v2-preview-client-extensions/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
<div style="font-style:italic">
  The Pulp team is gearing up for the first community release of the v2 code base. Over the next few weeks I&#8217;ll be highlighting some of the new features in the v2 release. As with any blog entry, this is scoped to a point in time and the specific details are subject to some change before release. The overall concepts, however, should remain consistent despite any tweaks we make.
</div>

# Introduction

While the separation of content types makes for a significantly more flexible Pulp installation, it also makes the user experience trickier to handle. Without a priori knowledge of the types supported by a Pulp server, any client provided with the Pulp platform will inevitably lack the usability a custom client would provide. At the same time, it&#8217;s cumbersome to require an entirely new client customized for each content type.

The v2 client supports an extension mechanism for adding new functionality to the client. Extensions benefit from the setup and configuration performed by the client, allowing them to focus directly on the UI functionality. Extensions are normal Python code and benefit from all of the abilities of the language.

A side effect of this architecture is that it allows users to augment the client for their specific needs. These additions can be as simple as how data are rendered or as complex as scripting multiple REST API calls into a single client command.

Before I go on, let me start with some simple terminology. A &#8220;command&#8221; is the actual executable portion of a client call. Commands are organized into &#8220;sections&#8221;, where sections can be nested for more fine grained organization. Commands can accept &#8220;options&#8221; from the user to drive its execution. So given the following command:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">pulp-admin repo sync run --repo-id demo</pre>
      </td>
    </tr>
  </table>
</div>

The &#8220;repo&#8221; and &#8220;sync&#8221; portions represent sections; sync is a subsection of repo. The &#8220;run&#8221; component is the actual command that is invoked. The execution method for that command will be handed a dictionary mapping &#8220;repo-id&#8221; to &#8220;demo&#8221; to indicate the user&#8217;s intentions.

The remainder of this article describes a simple extension. More information will be avaliable in a separate extension development guide as v2 gets closer to release.

# CSV Support Demo

One of the simplest extension examples revolves around new display formats for data in the Pulp server. While the built in extensions attempt to format data returned from queries against the server in a reasonable fashion, inevitably there are desired views that aren&#8217;t supported out of the box. One of the driving use cases around the extension mechanism is to provide a simple way for the end user to provide such views.

## Creating the Extension

Extensions for the admin client are found under `/usr/lib/pulp/admin/extensions`. Each subdirectory within there is a Python package (the simplest way to achieve this is to add an empty file named `__init__.py` in the directory).

There is a single entry point into the extension, a file named `pulp_cli.py` (evntually a different entry point will be provided when we provide an interactive shell, but I&#8217;m getting ahead of myself). The client will load that module and call the method with the following signature:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> initialize<span style="color: black;">&#40;</span>context<span style="color: black;">&#41;</span>:
   <span style="color: #808080; font-style: italic;"># Extension implementation here</span></pre>
      </td>
    </tr>
  </table>
</div>

## The Context

A copy of the client context is provided to each extension when it is initialized. The context is meant to provide the extension with everything it needs to function. For example, below are a few of the things available in the context:

  * Server Bindings &#8211; Bindings, pre-configured from the client configuration, used to make calls against the server.
  * CLI &#8211; The CLI framework itself, allowing new sections/commands to be added or existing ones to be removed, allowing user-written extensions to appear and act in the same fashion as Pulp provided functionality.
  * Prompt &#8211; A utility for reading user input and formatting data with Pulp&#8217;s common look and feel.

## Adding Commands to an Existing Section

While entirely new sections and subsections can be added to the CLI, the simplest example is adding a command to an existing section. This demo will add a &#8220;csv&#8221; command to the existing search section of commands (found at &#8220;repo units&#8221;). The command will require a single option to indicate the repository being searched. The relevant code is below:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">repo_section <span style="color: #66cc66;">=</span> context.<span style="color: black;">cli</span>.<span style="color: black;">find_section</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'repo'</span><span style="color: black;">&#41;</span>
units_section <span style="color: #66cc66;">=</span> repo_section.<span style="color: black;">find_subsection</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'units'</span><span style="color: black;">&#41;</span>
&nbsp;
command <span style="color: #66cc66;">=</span> units_section.<span style="color: black;">create_command</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'csv'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'repo contents in csv format'</span><span style="color: #66cc66;">,</span> display_csv<span style="color: black;">&#41;</span>
command.<span style="color: black;">create_option</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'--repo-id'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'repository to search'</span><span style="color: #66cc66;">,</span> required<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

In the above example, the &#8220;display_csv&#8221; argument refers to the method that will be invoked when the command is run. For now, that method is stubbed out:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> display_csv<span style="color: black;">&#40;</span>**kwargs<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">pass</span></pre>
      </td>
    </tr>
  </table>
</div>

The kwargs is used to capture the user specified options; in this case, &#8220;repo-id&#8221;.

At this point, the command is installed and accessible to the client. The `pulp-admin --map` command can be used to display the full structure of sections and commands available and should reflect the csv command:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">...
  units: list/search for RPM-related content in a repository
    rpm:          search for RPMs in a repository
    srpm:         search for SRPMs in a repository
    drpm:         search for DRPMs in a repository
    errata:       search errata in a repository
    distribution: list distributions in a repository
    csv:          repo contents in csv format
    all:          search for all content in a repository
...</pre>
      </td>
    </tr>
  </table>
</div>

The client framework will take care of rendering an appropriate usage based on the command&#8217;s configuration (for instance, the `--repo-id` argument is described and flagged as required):

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo units csv --help
Command: csv
Description: repo contents in csv format
&nbsp;
Available Arguments:
&nbsp;
  --repo-id - (required) repository to search</pre>
      </td>
    </tr>
  </table>
</div>

## Server Calls

The display_csv method will need access to the context (more specfically, the server bindings) to retrieve the server data. There are a number of ways to do this; the command base class could be subclassed and handed the context on instantiation for a cleaner approach. For simplicity in this demo, the context is stored in a global variable in the module:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">CONTEXT <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> initialize<span style="color: black;">&#40;</span>context<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">global</span> CONTEXT
    CONTEXT <span style="color: #66cc66;">=</span> context</pre>
      </td>
    </tr>
  </table>
</div>

This call will use the unit associations API. To be honest, I&#8217;m not terribly happy with how these calls look currently, but even with some API tweaks the concept will remain the same.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">repo_id <span style="color: #66cc66;">=</span> kwargs<span style="color: black;">&#91;</span><span style="color: #483d8b;">'repo-id'</span><span style="color: black;">&#93;</span>
units <span style="color: #66cc66;">=</span> CONTEXT.<span style="color: black;">server</span>.<span style="color: black;">repo_search</span>.<span style="color: black;">search</span><span style="color: black;">&#40;</span>repo_id<span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>.<span style="color: black;">response_body</span></pre>
      </td>
    </tr>
  </table>
</div>

The empty dictionary passed to this call is the query criteria; for this demo, all units in the repository will be returned.

## Displaying the Data

At this point, it&#8217;s up to the extension writer&#8217;s imagination. The data have been retrieved from the server and the extension is normal Python code, so anything is possible. Below is a simple CSV implementation that will contain the RPM&#8217;s name and version:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">for</span> u <span style="color: #ff7700;font-weight:bold;">in</span> units:
    name <span style="color: #66cc66;">=</span> u<span style="color: black;">&#91;</span><span style="color: #483d8b;">'metadata'</span><span style="color: black;">&#93;</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'name'</span><span style="color: black;">&#93;</span>
    version <span style="color: #66cc66;">=</span> u<span style="color: black;">&#91;</span><span style="color: #483d8b;">'metadata'</span><span style="color: black;">&#93;</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'version'</span><span style="color: black;">&#93;</span>
    CONTEXT.<span style="color: black;">prompt</span>.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s,%s'</span> % <span style="color: black;">&#40;</span>name<span style="color: #66cc66;">,</span> version<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

## Putting It All Together

Below is the full body of the `pulp_cli.py` module written during this demo:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">CONTEXT <span style="color: #66cc66;">=</span> <span style="color: #008000;">None</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> initialize<span style="color: black;">&#40;</span>context<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">global</span> CONTEXT
    CONTEXT <span style="color: #66cc66;">=</span> context
&nbsp;
    repo_section <span style="color: #66cc66;">=</span> context.<span style="color: black;">cli</span>.<span style="color: black;">find_section</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'repo'</span><span style="color: black;">&#41;</span>
    units_section <span style="color: #66cc66;">=</span> repo_section.<span style="color: black;">find_subsection</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'units'</span><span style="color: black;">&#41;</span>
&nbsp;
    command <span style="color: #66cc66;">=</span> units_section.<span style="color: black;">create_command</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'csv'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'repo contents in csv format'</span><span style="color: #66cc66;">,</span> display_csv<span style="color: black;">&#41;</span>
    command.<span style="color: black;">create_option</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'--repo-id'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'repository to search'</span><span style="color: #66cc66;">,</span> required<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> display_csv<span style="color: black;">&#40;</span>**kwargs<span style="color: black;">&#41;</span>:
    repo_id <span style="color: #66cc66;">=</span> kwargs<span style="color: black;">&#91;</span><span style="color: #483d8b;">'repo-id'</span><span style="color: black;">&#93;</span>
    units <span style="color: #66cc66;">=</span> CONTEXT.<span style="color: black;">server</span>.<span style="color: black;">repo_search</span>.<span style="color: black;">search</span><span style="color: black;">&#40;</span>repo_id<span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>.<span style="color: black;">response_body</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">for</span> u <span style="color: #ff7700;font-weight:bold;">in</span> units:
        name <span style="color: #66cc66;">=</span> u<span style="color: black;">&#91;</span><span style="color: #483d8b;">'metadata'</span><span style="color: black;">&#93;</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'name'</span><span style="color: black;">&#93;</span>
        version <span style="color: #66cc66;">=</span> u<span style="color: black;">&#91;</span><span style="color: #483d8b;">'metadata'</span><span style="color: black;">&#93;</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'version'</span><span style="color: black;">&#93;</span>
        CONTEXT.<span style="color: black;">prompt</span>.<span style="color: black;">write</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'%s,%s'</span> % <span style="color: black;">&#40;</span>name<span style="color: #66cc66;">,</span> version<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

To test this, the Pulp server has a repository named &#8220;pulp&#8221; which contains the RPMs found in Pulp&#8217;s Fedora 17 v2 testing repository. Sample usage of the CSV command for this repository is as follows:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo units csv --repo-id pulp
python-pulp-common,0.0.305
gofer,0.70
python-pulp-rpm-common,0.0.305
pulp-builtins-admin-extensions,0.0.305
pulp-rpm-yumplugins,0.0.305
mod_wsgi-debuginfo,3.3
grinder,0.1.4
pulp-rpm-consumer-client,0.0.305
pulp-server,0.0.305
python-isodate,0.4.4
python-qpid,0.7.946106
python-pulp-client-lib,0.0.305
mod_wsgi,3.3
python-pulp-agent-lib,0.0.305
pulp-admin-client,0.0.305
python-oauth2,1.5.170
pulp-builtins-consumer-extensions,0.0.305
pulp-consumer-client,0.0.305
python-webpy,0.32
pulp-rpm-handlers,0.0.305
gofer-package,0.70
pulp-rpm-admin-client,0.0.305
pulp-rpm-server,0.0.305
python-okaara,1.0.18
m2crypto-debuginfo,0.21.1.pulp
pulp-rpm-consumer-extensions,0.0.305
python-gofer,0.70
python-pulp-bindings,0.0.305
pulp-rpm-admin-extensions,0.0.305
python-rhsm,0.96.4
pulp-agent,0.0.305
pulp-rpm-plugins,0.0.305
m2crypto,0.21.1.pulp
pulp-rpm-agent,0.0.305</pre>
      </td>
    </tr>
  </table>
</div>

# Summary

This demonstration is a small subset of the possibilities of the client&#8217;s extension framework. All of the functionality in the v2 client is based on the extension framework and uses the features available in the client context. Both the admin and consumer clients use this framework, allowing the consumer client experience to be customized in the same way.

By release, the goal is to provide a more complete extensions guide, including extensions accessing the client&#8217;s configuration, a description of the client&#8217;s exception middleware for handling common server errors, and API documentation for all of the server bindings. In the meantime, feel free to ping me (jdob in #pulp on Freenode) with any questions.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-07-02-pulp-1-1-11-bug-fix-release.md
`````markdown
---
date: 2012-07-02T20:55:50+00:00
id: 691
title: Pulp 1.1.11 Bug Fix Release
date: 2012-07-02T14:19:27+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=691
permalink: /2012/07/02/pulp-1-1-11-bug-fix-release/
categories:
  - Releases
---
<!-- more -->
A new release of Pulp has been built to the v1 stable repositories to fix the following critical bug involving CDS sync (<https://bugzilla.redhat.com/show_bug.cgi?id=836640>). There are no extra steps involved in upgrading to this version, simply update the RPMs and restart the `pulp-cds` daemon.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-07-02-pulp-v2-preview-the-coordinator.md
`````markdown
---
date: 2012-07-02T20:55:50+00:00
id: 687
title: 'Pulp v2 Preview: The Coordinator'
date: 2012-07-02T19:18:39+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=687
permalink: /2012/07/02/pulp-v2-preview-the-coordinator/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
<div style="font-style:italic">
  The Pulp team is gearing up for the first community release of the v2 code base. Over the next few weeks I&#8217;ll be highlighting some of the new features in the v2 release. As with any blog entry, this is scoped to a point in time and the specific details are subject to some change before release. The overall concepts, however, should remain consistent despite any tweaks we make.
</div>

# Introduction

One of the most important new additions to Pulp v2 is also one of the least visible. Pulp has a number of challenges in handling incoming requests related to both its support of multiple, concurrent users and the fact that there is the potential for very long running operations on the server (repo sync, for instance). We needed a way to prevent users from issuing commands that could corrupt the server without completely locking them out from making any changes until the resource became free.

The coordinator is a layer on top of our tasking subsystem that understands user requests and ensures that conflicting requests do not execute concurrently. In most cases, when a resource is locked, an incoming request will be postponed until it is safe to run. For example, while a repository is executing a sync, an incoming configuration update on that repository will be postponed until after the sync completes. The server still stores the update request and will automatically execute it when it is safe to do so; the user does not need to come back later and re-issue the request.

In rare cases, the coordinator will outright reject a request if it will never safely execute. The common example is if a request on a resource, for instance a repo sync or configuration update, is made while a delete request is queued for the resource. Since the coordinator will execute requests in the order in which they are made, the delete will execute before the newly requested operation. In such a case, the coordinator knows the second request will fail and will reject it entirely at request time rather than queueing it up.

Conflicts are not the only reason a task may not immediately execute. In the event the Pulp server is overly busy, a task may be postponed until the server has the available resources to complete it. The server is configured in such a way that this should only occur for intensive operations such as repository sync.

# Effect on the Client

What this translates to in terms of a user experience is the possibility that calls to the client will not execute immediately but rather be queued to run in the future. For example, if the repository named &#8220;demo&#8221; is in the process of synchronizing and an attempt is made to update its configuration, the following is displayed in the client:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo update --repo-id demo --only-newest false
Repository update postponed due to another operation. Progress on this task can
be viewed using the commands under "repo tasks".
&nbsp;
Resource:  repository - demo
Operation: update</pre>
      </td>
    </tr>
  </table>
</div>

It is possible that an operation will be blocked by more than one resource or resources of different types. In this case, the request is blocked because the repository &#8220;demo&#8221; is executing an operation that is performing some sort of &#8220;update&#8221; on the repository.

Given the same scenario, the following is displayed when an attempt is made to delete the repository:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo delete --repo-id demo                                  
Repository delete postponed due to another operation. Progress on this task can
be viewed using the commands under "repo tasks".
&nbsp;
Resource:  repository - demo
Operation: update</pre>
      </td>
    </tr>
  </table>
</div>

Again, the delete is blocked because the &#8220;demo&#8221; repository is in the process of updating the repository in some way.

At this point, the task queue for the repository contains, in order, a configuration update and a repository delete. If another operation is requested on the repository, such as a configuration update or another sync request, the server will outright reject the request; it is impossible for it to run because the delete will resolve before the new request would be fielded. The client output is below:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo update --repo-id demo --display-name "Rejected Update"
The requested operation conflicts with one or more operations already queued for
the resource. The following operations on the specified resources caused the
request to be rejected:
&nbsp;
Resource:  repository - demo
Operation: delete</pre>
      </td>
    </tr>
  </table>
</div>

This is considered an error condition to the client and a non-zero exit code will be returned. The error message indicates the operation was rejected because there is a task in the queue for repository &#8220;demo&#8221; that will execute an operation with &#8220;delete&#8221; permissions.

# Viewing Queued Tasks

While ensuring the integrity of the Pulp server, this functionality also complicates the user experience. With the possibility to queue up multiple operations to execute on a repository, it becomes necessary to view and potentially cancel queued tasks. The `repo tasks` section of commands provides these abilities.

From the earlier example, below is the output of the task list for the repository:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo tasks list --repo-id demo                
+----------------------------------------------------------------------+
                                 Tasks
+----------------------------------------------------------------------+
&nbsp;
Operations:  sync
Resources:   demo (repository)
State:       Running
Start Time:  2012-07-02T14:49:55Z
Finish Time: Incomplete
Result:      Incomplete
Task Id:     300046b3-c455-11e1-93f1-72d46940eff3
&nbsp;
Operations:  update
Resources:   demo (repository)
State:       Waiting
Start Time:  Unstarted
Finish Time: Incomplete
Result:      Incomplete
Task Id:     3001afa3-c455-11e1-93fa-72d46940eff3
&nbsp;
Operations:  delete
Resources:   demo (repository)
State:       Waiting
Start Time:  Unstarted
Finish Time: Incomplete
Result:      Incomplete
Task Id:     30029630-c455-11e1-9400-72d46940eff3</pre>
      </td>
    </tr>
  </table>
</div>

The first entry is the running task. The remainder of the tasks are listed in the order in which they will execute. Completed tasks are removed from this list.

More details on a task can be viewed by passing its task ID to the `repo tasks details` command. The extra information is primarily in the form of the progress report on the task (not all tasks support this). The sync task, for instance, will include its progress report when viewed through the details command:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin repo tasks details --task-id bbb155d4-c473-11e1-8312-72d46940eff3
+----------------------------------------------------------------------+
                              Task Details
+----------------------------------------------------------------------+
&nbsp;
Operations:   sync
Resources:    demo (repository)
State:        Running
Start Time:   2012-07-02T18:28:34Z
Finish Time:  Incomplete
Result:       Incomplete
Task Id:      bbb155d4-c473-11e1-8312-72d46940eff3
Progress:     
  Importer: 
    Content:  
      Details:       
        Delta Rpm: 
          Items Left:  0
          Items Total: 0
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
        File:      
          Items Left:  0
          Items Total: 0
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
        Rpm:       
          Items Left:  2731
          Items Total: 3107
          Num Error:   0
          Num Success: 376
          Size Left:   3147523487
          Size Total:  3455015673
        Tree File: 
          Items Left:  6
          Items Total: 6
          Num Error:   0
          Num Success: 0
          Size Left:   0
          Size Total:  0
      Error Details: 
      Items Left:    2737
      Items Total:   3113
      Num Error:     0
      Num Success:   376
      Size Left:     3147523487
      Size Total:    3455015673
      State:         IN_PROGRESS
    Errata:   
      State: NOT_STARTED
    Metadata: 
      State: FINISHED</pre>
      </td>
    </tr>
  </table>
</div>

Any non-running task may be cancelled by passing its task ID to the `repo tasks cancel` command as well.

# Summary

There are two important lessons from this article:

  1. Pulp is awesome and is smart enough to prevent you from screwing your server up.
  2. Most operations in the client may not run immediately but instead queue up a task on the server. The progress of these tasks can be viewed using the <core>repo tasks list</code> command.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-07-09-pulp-on-openshift.md
`````markdown
---
date: 2012-07-09T20:55:50+00:00
id: 706
title: Pulp on OpenShift
date: 2012-07-09T18:11:50+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=706
permalink: /2012/07/09/pulp-on-openshift/
categories:
  - Uncategorized
---
<!-- more -->
James Slagle posted about his experience getting Pulp running on OpenShift. The entry can be found <a href="http://blog-slagle.rhcloud.com/?p=13" target="new">on his blog.</a>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-07-17-pulp-v2-preview-general-enhancements.md
`````markdown
---
date: 2012-07-17T20:55:50+00:00
id: 712
title: 'Pulp v2 Preview: General Enhancements'
date: 2012-07-17T18:20:21+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=712
permalink: /2012/07/17/pulp-v2-preview-general-enhancements/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
<div style="font-style:italic">
  The Pulp team is gearing up for the first community release of the v2 code base. Over the next few weeks I&#8217;ll be highlighting some of the new features in the v2 release. As with any blog entry, this is scoped to a point in time and the specific details are subject to some change before release. The overall concepts, however, should remain consistent despite any tweaks we make.
</div>

## HTTP and HTTPS Support

Pulp now supports serving repositories over both HTTP and HTTPS. This is selected on a per repository basis as part of its configuration and can be changed at any time. Repositories can be served over HTTP, HTTPS, or both (only repositories served over HTTPS can be configured as protected repositories due to the protection scheme used).

## Feed URL Changing

A fix that has already gotten a lot of good karma for Pulp, the restrictions on changing a feed URL have been removed. The feed URL can be changed at any time regardless of whether or not the repository has been synchronized.

## Multiple Schedule Support

Pulp&#8217;s sync schedule support has been modified to support multiple sync schedules per repository. Intervals can still be specified (now including increments of months or years), however for desired behavior that can not be broken down into intervals, multiple schedules may be created. For example, synchronizing a repository on the 7th and 21st of every month can now be achieved by defining two schedules: 2012-01-07T00:00:00Z/P1M and 2012-01-21T00:00:00Z/P1M.

## REST API Improvements

The REST APIs in v2 follow REST conventions much more closely than in the past. The REST API documentation has been rewritten using reST and Sphinx and is significantly more flushed out, including example request and response bodies. The REST API documentation can be found at: <a href="http://pulpproject.org/v2/rest-api/" target="new">http://pulpproject.org/v2/rest-api/</a>

## Improved Metadata Regeneration

To be clear, this is not scheduled to be included in the initial community release but will be in a subsequent release. We have investigated replacing our usage of createrepo with a new, faster implementation named <a href="http://kojipkgs.fedoraproject.org/packages/createrepo_c/0.1.5/" target="new">createrepo_c</a>. The new implementation is nearly complete and, once it is, Pulp will integrate support for it to greatly increase metadata generation tasks.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-07-26-pulp-v2-community-release-1.md
`````markdown
---
date: 2012-07-26T20:55:50+00:00
id: 722
title: Pulp v2 Community Release 1
date: 2012-07-26T13:27:28+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=722
permalink: /2012/07/26/pulp-v2-community-release-1/
categories:
  - "2.0"
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/07/cr-1.png" alt="" title="Pulp v2 Community Release 1" width="410" height="161" class="alignnone size-full wp-image-726" />

The first community release of the v2 codebase is now available. It can be accessed by enabling the pulp-v2-stable repository in the *-pulp.repo files (due to the versioning scheme, all other repositories should be disabled to ensure the v2 builds are installed).

# What It Is

Pulp has been completely rearchitected from its v1 releases. Instead of a tight coupling to RPM-related content, the v2 architecture has been redesigned around an open plugin model. The result is the ability to use the inventorying, searching, and repository and consumer management features with custom defined types of content. Plugins are provided for RPM concepts (RPM, errata, kickstart trees, etc.) on top of the core Pulp Platform to provide functional parity with the v1 releases.

This release is the work thus far on the v2 architecture. It is intended as a preview for what the eventual 2.0 release will be in order to solicit input from the community.

# What It Is Not

First and foremost, this community release is not meant for production. It is the first release on a nearly entirely new codebase and, as such, has not been subject to the levels of QA the 1.x releases have been. Furthermore, it&#8217;s not yet 100% feature complete with respect to what was offered in v1. Work continues on reaching that goal, but in the meantime don&#8217;t be surprised to find certain features missing from this release (most notably, CDS support is missing entirely).

# Installation &#038; Upgrade

## Installation

Installation has changed slightly in the 2.x versions. The short explanation is that the packages to install have been renamed. Installation instructions can be found in our <a href="http://pulpproject.org/v2/rpm-user-guide/installation.html" target="new">Pulp+RPM User Guide</a>.

The 2.0 and 1.x releases cannot be installed at the same time.

In this release, the SELinux policy RPM is not installed automatically with the server. SELinux support can be added once the server is installed by installing the `pulp-selinux` RPM.

## Upgrades

Upgrades from 1.x are not currently supported. This will be added in a future release.

# Features

Over the past few weeks, I&#8217;ve written about a number of new features in 2.0. These articles include:

  * The 1.x notion of cloning has been removed in favor of the more flexible and powerful [unit copy](http://blog.pulpproject.org/2012/06/15/pulp-v2-preview-unit-copy/) functionality.
  * The client has been rearchitected to support easily installed [extensions](http://blog.pulpproject.org/2012/06/24/pulp-v2-preview-client-extensions/) to customize and specialize it&#8217;s behavior.
  * The server now employs a [significantly stronger mechanism](http://blog.pulpproject.org/2012/07/02/pulp-v2-preview-the-coordinator/) for ensuring integrity across concurrent requests and queuing operations requested on busy resources.
  * A number of other [general enhancements](http://blog.pulpproject.org/2012/07/17/pulp-v2-preview-general-enhancements/) have been made based on community feedback.

The [v2 user guide](http://pulpproject.org/v2/rpm-user-guide/), which continues to be flushed out, contains more information on using this release.

# Support

Any and all comments, suggestions, and bug reports are appreciated. In the coming months we&#8217;ll be working to polish the new codebase and every bit helps. As usual we can be reached on our [mailing list](https://www.redhat.com/mailman/listinfo/pulp-list) and in #pulp on Freenode.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-08-07-pulp-in-github.md
`````markdown
---
date: 2012-08-07T20:55:50+00:00
id: 736
title: Pulp in github
date: 2012-08-07T19:09:56+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=736
permalink: /2012/08/07/pulp-in-github/
categories:
  - Uncategorized
---
<!-- more -->
The Pulp source has been migrated to a github repository. The project can be found at:

<a href="https://github.com/pulp/pulp" target="new">https://github.com/pulp/pulp</a>

The wiki will continue to be hosted at its current location for now (<a href="https://fedorahosted.org/pulp/" target="new">https://fedorahosted.org/pulp/</a>).

I&#8217;m very excited about the possibilities. In particular, github&#8217;s pull request support should provide a much friendlier interface for the community to contribute to the codebase.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-08-10-community-contribution-pulp-console.md
`````markdown
---
date: 2012-08-10T20:55:50+00:00
id: 744
title: 'Community Contribution: pulp-console'
date: 2012-08-10T14:16:20+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=744
permalink: /2012/08/10/community-contribution-pulp-console/
categories:
  - Uncategorized
---
<!-- more -->
A member of the community (stpierre in #pulp) has written an interactive shell on top of the v1 client-side APIs. The script initializes a connection to the Pulp server and makes accessible our client-side stub objects for running commands on the server. The source and README can be found on his github project:

<https://github.com/stpierre/pulp-console>

Warm fuzzy feelings to stpierre for writing this. Unless, of course, it breaks your Pulp server, in which case: &#8220;Bad stpierre&#8221;.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-08-29-mirroring-puppet-forge-with-pulp.md
`````markdown
---
date: 2012-08-29T20:55:50+00:00
id: 751
title: Mirroring Puppet Forge with Pulp
date: 2012-08-29T01:50:47+00:00
author: Jay Dobies
layout: post
guid: http://blog.pulpproject.org/?p=751
permalink: /2012/08/29/mirroring-puppet-forge-with-pulp/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
# Introduction

One of the biggest changes in Pulp v2 is the ability to manage non-RPM content types. The first use case we had in mind for this is to inventory Puppet modules and serve them from the Pulp server. This includes both uploading modules into the Pulp server as well as selectively downloading and keeping up to date modules served at <a href="http://forge.puppetlabs.com/" target="new">Puppet Forge</a>.

Keep in mind that this is an early preview of code I&#8217;m still working on and is subject to changes in the coming weeks.

# Repository Creation & Configuration

Pulp organizes content into _repositories_. The granularity of a repository is up to the user. A typical usage is to stage content from a live stream (such as Puppet Forge), to a testing environment, ultimately migrating the tested modules into a production usage. This paradigm can be modeled using separate Pulp repositories and copying the modules between them as appropriate.

Pulp will use the modules.json file located at Puppet Forge to determine which modules should be downloaded. Technically speaking, there is nothing that limits Pulp to using Puppet Forge. Any host can be used so long as the modules.json format is supported. Additionally, modules.json offers a limited query syntax for scoping which modules are included in its metadata. Pulp uses this query syntax to limit a repository to contain only certain modules.

For existing Pulp users, the pulp-admin client is undergoing some changes to support both RPM and Puppet content (and any further additions we support in the future). All of the Puppet repository related commands are located under the `puppet` section in the root of the client.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo
Usage: pulp-admin repo [SUB_SECTION, ..] COMMAND
Description: repository lifecycle commands
&nbsp;
Available Sections:
  copy    - copy modules from one repository into another
  group   - repository group lifecycle commands
  publish - run, schedule, or view the status of publish tasks
  remove  - remove copied or uploaded modules from a repository
  sync    - run, schedule, or view the status of sync tasks
  uploads - upload modules into a repository
&nbsp;
Available Commands:
  create - creates a new repository
  delete - deletes a repository
  list   - lists repositories on the Pulp server
  search - searches for Puppet repositories on the server
  update - changes metadata on an existing repository</pre>
      </td>
    </tr>
  </table>
</div>

Creating a repository is done, not surprisingly, through the `create` command. This command requires a ID to be specified to uniquely identify the repository in Pulp. While all other configuration is optional, when mirroring Puppet Forge there are two options in particular of interest:

The `feed` option is used to indicate the URL of the host from which to download modules. This must refer to the location in which the modules.json file resides. For Puppet Forge, this is simply `http://forge.puppetlabs.com`.

The `query` argument is used to limit which modules are downloaded into the repository. It may be specified multiple times if a single query is not enough to fully describe all of the desired modules.

For example, the following command will create a repository that will download Apache and MySQL related modules:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo create --repo-id blog-repo --feed http://forge.puppetlabs.com/ --query httpd --query mysql
Successfully created repository [blog-repo]</pre>
      </td>
    </tr>
  </table>
</div>

There are two options related to the serving of Puppet modules from the Pulp server itself. The `serve-http` and `serve-https` options are used to indicate which of these protocols the Pulp server will make the repository available over. These may be enabled individually or both may be active at once (technically, none can be active in the event a repository should contain modules for use in copying to other repositories but never itself be exposed). By default, Puppet repositories will be served over HTTP but not HTTPS.

The list of repositories is retrieved using the `list` command. A more advanced repository search is supported but I won&#8217;t cover it here.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo list
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
&nbsp;
Id:                 blog-repo
Display Name:       blog-repo
Description:        None
Content Unit Count: 0</pre>
      </td>
    </tr>
  </table>
</div>

The repository reflects that there are zero content units (where &#8220;unit&#8221; is the generic Pulp term for a piece of content it manages) because the modules have not been downloaded yet. This is done through the Pulp &#8220;sync&#8221; process.

# Sync and Publish

A repository sync operation is the process through which the external feed for a repository is contacted to check for changes to its content. On the initial sync, all modules (matching any queries if specified) will be downloaded to the Pulp server and inventoried into its database. On subsequent sync operations, only new modules and new versions of existing modules will be downloaded. Additionally, any modules that were once present in the feed but have been removed will be removed from the Pulp repository as well.

The publish process is the opposite. When Pulp publishes a Puppet repository, it takes the current modules in the repository and serves them over HTTP and/or HTTPS from the Pulp server. This includes modules added to a repository from a sync operation as well as those uploaded by a user or copied from another Pulp repository.

By default, this publish operation happens automatically on the tail end of a successful sync operation. Users may trigger a publish explicitly in cases where only local changes to a repository have been made (upload, copy) or if there is no external feed configured for the repository.

A sync can be run immediately using the `sync run` command. By default, the command will continue to poll the Pulp server and display the progress as it synchronizes and publishes the repository. This output can be skipped using the `--bg` command or simply by pressing ctrl+c; the sync will continue on the Pulp server.

Below is a sample output from the sync command. Remember that the repository was configured with two queries (httpd and mysql) and is set to only publish the modules over HTTP.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo sync run --repo-id blog-repo
+----------------------------------------------------------------------+
                  Synchronizing Repository [blog-repo]
+----------------------------------------------------------------------+
&nbsp;
This command may be exited by pressing ctrl+c without affecting the actual
operation on the server.
&nbsp;
Downloading metadata...
[==================================================] 100%
Metadata Query: 2/2 items
... completed
&nbsp;
Downloading new modules...
[==================================================] 100%
Module: 20/20 items
... completed
&nbsp;
Publishing modules...
[==================================================] 100%
Module: 20/20 items
... completed
&nbsp;
Generating repository metadata...
[-]
... completed
&nbsp;
Publishing repository over HTTP...
... completed
&nbsp;
Publishing repository over HTTPS...
... skipped</pre>
      </td>
    </tr>
  </table>
</div>

Each repository has a separate location under `/pulp/puppet`. Within that directory, the published repository will use the same format as Puppet Forge. Modules are located under a directory with the first letter of the author&#8217;s name and then futher under the author&#8217;s name. The module name will be&#8211;.tar.gz. Additionally, Pulp will generate a modules.json file in the root of the repository, allowing systems that use this for parsing to use a Pulp server instead of Puppet Forge. The modules.json file will be customized to include only modules in the repository when it was published.

Below are some screenshots of navigating the published repository. Firefox hides the &#8220;http&#8221; portion, but the port 80 line shows the serve-http flag was honored.

<img class="alignnone size-full wp-image-763" title="repo-root" src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/08/repo-root.png" alt="" width="770" height="601" srcset="http://www.pulpproject.org/wp-content/uploads/2012/08/repo-root-300x234.png 300w, http://www.pulpproject.org/wp-content/uploads/2012/08/repo-root.png 770w" sizes="(max-width: 770px) 100vw, 770px" />

Digging into the system and releases directories shows the breakdown by the first character of each author name:

<img class="alignnone size-full wp-image-765" title="authors" src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/08/authors.png" alt="" width="770" height="601" srcset="http://www.pulpproject.org/wp-content/uploads/2012/08/authors-300x234.png 300w, http://www.pulpproject.org/wp-content/uploads/2012/08/authors.png 770w" sizes="(max-width: 770px) 100vw, 770px" />

Finally, digging all the way down the hierarchy reveals the modules themselves:

<img class="alignnone size-full wp-image-771" title="modules" src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/08/modules.png" alt="" width="770" height="601" srcset="http://www.pulpproject.org/wp-content/uploads/2012/08/modules-300x234.png 300w, http://www.pulpproject.org/wp-content/uploads/2012/08/modules.png 770w" sizes="(max-width: 770px) 100vw, 770px" />

# Conclusion

This article only covered the basic concepts for mirroring Puppet Forge: repository creation, configuration, and synchronization/publishing. Pulp offers a number of other features in the areas of searching for modules, uploading user-defined modules, and copying modules between repositories. Future work will involve registering a puppet master with the Pulp server and using Pulp to control the deployment of modules to the puppet master.

This functionality is not yet available in a released version of Pulp (to be honest, I just finished writing the bulk of it in the past few days). However, there are options for playing with this functionality before it makes it into a formal Community Release. See the <a href="http://repos.fedorapeople.org/repos/pulp/pulp" target="new">repository definition files in our repositories</a> for information on how to enable the weekly testing builds or Community Release candidate builds. This early in the feature development, all input is welcome and will likely be incorporated.

For more information, see <a href="https://www.redhat.com/mailman/listinfo/pulp-list" target="new">the Pulp mailing lists</a> or ping me in our chat room (jdob in #pulp on Freenode).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-09-25-customizing-puppet-module-repositories-in-pulp.md
`````markdown
---
date: 2012-09-25T20:55:50+00:00
id: 792
title: Customizing Puppet Module Repositories in Pulp
date: 2012-09-25T14:34:04+00:00
author: Jay Dobies
layout: post
guid: http://website-pulp.rhcloud.com/?p=792
permalink: /2012/09/25/customizing-puppet-module-repositories-in-pulp/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
In my last post, I covered [mirroring Puppet Forge modules in Pulp.](/2012/08/29/mirroring-puppet-forge-with-pulp/) Pulp offers much more than the simple mirroring of content. This article covers creating custom repositories from both existing and newly uploaded content.

# Uploading Puppet Modules

The ability to synchronize modules from an external source such as Puppet Forge is extremely useful in a number of use cases. However, there are also situations where a module does not exist in a source containing the proper structure to be imported by Pulp. In those cases, Pulp offers the ability to upload modules into a repository.

All upload-related commands are found under the `pulp-admin puppet repo uploads` section of the admin client. In addition to the upload command itself, that section contains commands to pause an upload and resume it at a later time or see a list of in progress and paused uploads.

Uploading a module is done through the `pulp-admin puppet repo uploads` command. The ID of the repository into which the modules will be uploaded is required. Modules to upload are indicated either by individual file (`--file`) or by directory (`--dir`). Either argument may be specified more than once and may be used in conjunction with each other. In the case of uploading a directory, only files ending in `.tar.gz` will be uploaded, so it is safe to have non-module content in the directory as well.

For the example below, a new repository is created to house the uploaded modules. Note that it does not have a feed; this repository cannot be synchronized against an external source, however it may still have modules uploaded or copied into it.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo create --repo-id upload-repo
Successfully created repository [upload-repo]</pre>
      </td>
    </tr>
  </table>
</div>

A directory of modules will be uploaded as an example. The output updates in regular intervals as the upload proceeds. At any time, the upload may be paused by pressing `ctrl+c`. The queued files that have not completed uploading will be remembered and can be resumed at a later point. Files that have been partially uploaded will retain the offset and begin uploading where they left off.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ ll /home/jdob/vault/code/data/puppet-modules
total 12
-rw-rw-r--. 1 500 500 1895 Aug 30 14:21 adob-good-2.0.0.tar.gz
-rw-rw-r--. 1 500 500 1949 Aug 30 14:22 jdob-valid-1.0.0.tar.gz
-rw-rw-r--. 1 500 500 1952 Aug 30 14:22 jdob-valid-1.1.0.tar.gz
&nbsp;
$ pulp-admin puppet repo uploads upload --repo-id upload-repo --dir /home/jdob/vault/code/data/puppet-modules
+----------------------------------------------------------------------+
                          Puppet Module Upload
+----------------------------------------------------------------------+
&nbsp;
Extracting necessary metdata for each file...
[==================================================] 100%
Analyzing: jdob-valid-1.1.0.tar.gz
... completed
&nbsp;
Creating upload requests on the server...
[==================================================] 100%
Initializing: jdob-valid-1.1.0.tar.gz
... completed
&nbsp;
Starting upload of selected packages. If this process is stopped through ctrl+c,
the uploads will be paused and may be resumed later using the resume command or
cancelled entirely using the cancel command.
&nbsp;
Uploading: adob-good-2.0.0.tar.gz
[==================================================] 100%
1895/1895 bytes
... completed
&nbsp;
Importing into the repository...
... completed
&nbsp;
Deleting the upload request...
... completed
&nbsp;
Uploading: jdob-valid-1.0.0.tar.gz
[==================================================] 100%
1949/1949 bytes
... completed
&nbsp;
Importing into the repository...
... completed
&nbsp;
Deleting the upload request...
... completed
&nbsp;
Uploading: jdob-valid-1.1.0.tar.gz
[==================================================] 100%
1952/1952 bytes
... completed
&nbsp;
Importing into the repository...
... completed
&nbsp;
Deleting the upload request...
... completed</pre>
      </td>
    </tr>
  </table>
</div>

Displaying the list of repositories reflects the three modules that have been uploaded:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">pulp-admin puppet repo list
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
&nbsp;
Id:                 upload-repo
Display Name:       upload-repo
Description:        None
Content Unit Count: 3</pre>
      </td>
    </tr>
  </table>
</div>

# Searching for Puppet Modules in a Repository

Before covering copying modules between repositories, it makes sense to explain Pulp&#8217;s query syntax.

Pulp isn&#8217;t merely meant as a pass through for content as it comes into and leaves the system. Pulp provides an extremely powerful and flexible query syntax for analyzing content in the system.

One usage of this query capability is seen when searching for modules in a repository. The simplest example is to list all modules in the repository (excuse the lame data, these are some test modules I threw together for unit tests):

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo modules --repo-id upload-repo
Name:         good
Version:      2.0.0
Author:       adob
Dependencies: 
Description:  Good Module Description
License:      Apache License, Version 2.0
License :     None
Project Page: http://example.org/adob-good
Source:       http://example.org/adob-good/source
Summary:      Good Module Summary
Tag List:     None
Types:        
&nbsp;
Name:         valid
Version:      1.0.0
Author:       jdob
Dependencies: 
  Name:                jdob/dep-alpha
  Version Requirement: &gt;= 1.0.0
  Name:                ldob/dep-beta
  Version Requirement: &gt;= 2.0.0
Description:  Valid Module Description
License:      Apache License, Version 2.0
License :     None
Project Page: http://example.org/jdob-valid
Source:       http://example.org/jdob-valid/source
Summary:      Valid Module Summary
Tag List:     None
Types:        
&nbsp;
Name:         valid
Version:      1.1.0
Author:       jdob
Dependencies: 
  Name:                jdob/dep-alpha
  Version Requirement: &gt;= 1.1.0
  Name:                ldob/dep-beta
  Version Requirement: &gt;= 2.1.0
Description:  Valid Module Description
License:      Apache License, Version 2.0
License :     None
Project Page: http://example.org/jdob-valid
Source:       http://example.org/jdob-valid/source
Summary:      Valid Module Summary
Tag List:     None
Types:</pre>
      </td>
    </tr>
  </table>
</div>

All of the fields in the module&#8217;s Moduleinfo file are inventoried in Pulp (checksums are there as well, but hidden to make the client more readable). The tag list is not found in the Moduleinfo; my plan is to eventually support specifying these at upload time. The tag list is, however, captured when synchronizing modules from Puppet Forge and is a candidate for querying against with Pulp.

Before going into the query abilities, the examples will read better if the output data is limited. The `--fields` option can be used to indicate which fields should be displayed:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo modules --repo-id upload-repo --fields name,version
Name:    good
Version: 2.0.0
&nbsp;
Name:    valid
Version: 1.0.0
&nbsp;
Name:    valid
Version: 1.1.0</pre>
      </td>
    </tr>
  </table>
</div>

Any field in the module&#8217;s metadata is available for searching. Values to match can be expressed in a number of ways:

  * Literals: &#8220;name is httpd&#8221;
  * Regular Expressions: &#8220;name matches mysql.*&#8221;
  * Enumerated Values (including negation): &#8220;author is one of &#8216;jdob&#8217; or &#8216;adob'&#8221;
  * Comparisons: &#8220;version is greater than 1.0.0&#8221;
  * Association Information: &#8220;modules added to the repository since August 1, 2012&#8221;

Any of the above can be combined to form more complex queries. A few examples are as follows:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo modules --repo-id upload-repo --fields name,version --str-eq "name=valid"
Name:    valid
Version: 1.0.0
&nbsp;
Name:    valid
Version: 1.1.0
&nbsp;
$ pulp-admin puppet repo modules --repo-id upload-repo --fields name,version --gt "version=1.0.0"
Name:    good
Version: 2.0.0
&nbsp;
Name:    valid
Version: 1.1.0
&nbsp;
$ pulp-admin puppet repo modules --repo-id upload-repo --fields name,version,author --match "author=.*dob$"
Name:    good
Version: 2.0.0
Author:  adob
&nbsp;
Name:    valid
Version: 1.0.0
Author:  jdob
&nbsp;
Name:    valid
Version: 1.1.0
Author:  jdob</pre>
      </td>
    </tr>
  </table>
</div>

# Copying Modules Between Repositories

Puppet Modules in Pulp are meant to serve as building blocks for repositories. Once a module is in Pulp, be it via a sync from an external feed or uploaded, it can be copied or moved between repositories freely. The term &#8220;copying&#8221; is slightly misleading; to save disk space, the module is only ever stored once on the filesystem, it is simply associated with more than one repository.

A common usage of this ability is the promotion of content through a live -> unstable -> stable workflow (or dev -> qa -> prod depending on your terminology). Since each repository is served at its own URL, modules can be kept separate from production environments until they are tested and copied to the production repositories in Pulp.

The syntax for specifying which modules to copy is identical to the search syntax above, providing both the ability to easily copy an entire repository as well as specifically choosing a subset of modules for inclusion. Copied modules are not available at the hosted repository URL until the repository is explicitly published, allowing users to make a number of changes and validate the new contents before the modules are ever made available to the repository&#8217;s consumers.

For the example below, a new repository (again, feedless) is created as the destination for the copied modules. This new repository can be thought of as a higher repository in the workflow chains described above. Only a subset of modules &#8212; those written by jdob &#8212; will be promoted to the newly created repository. The final command in the example is used to verify only the desired modules have been copied.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin puppet repo create --repo-id dest-repo   
Successfully created repository [dest-repo]
&nbsp;
$ pulp-admin puppet repo list                      
+----------------------------------------------------------------------+
                              Repositories
+----------------------------------------------------------------------+
&nbsp;
Id:                 upload-repo
Display Name:       upload-repo
Description:        None
Content Unit Count: 3
&nbsp;
Id:                 dest-repo
Display Name:       dest-repo
Description:        None
Content Unit Count: 0
&nbsp;
$ pulp-admin puppet repo copy --from-repo-id upload-repo --to-repo-id dest-repo --str-eq "author=jdob"
Progress on this task can be viewed using the commands under "repo tasks".
&nbsp;
$ pulp-admin puppet repo modules --repo-id dest-repo --fields name,version,author
Name:    valid
Version: 1.0.0
Author:  jdob
&nbsp;
Name:    valid
Version: 1.1.0
Author:  jdob</pre>
      </td>
    </tr>
  </table>
</div>

I won&#8217;t go into too much detail on the &#8220;repo tasks&#8221; message in the example above. The short version is that the Pulp server has a number of checks to ensure the integrity of a repository is maintained. In this case, the copy will execute asynchronously as soon as the repository is available. This is to prevent, for instance, conflicts that could arise if the repository was currently in the process of synchronizing with the external source. A link to an article with more information on this functionality, called the Pulp Coordinator, can be found in the References section below.

# References

None of the above functionality is specific to Puppet. Pulp (the platform) is a framework that supports all of these features. Puppet is merely the latest type of content the team is flushing out support for. I&#8217;ve written about a number of these features in more detail with regard to their usage in the RPM support in Pulp. These articles, despite their RPM focus, provide more detail on the capabilities of Pulp.

  * [Unit Copy](/2012/06/15/pulp-v2-preview-unit-copy/)
  * [Coordinator](/2012/07/02/pulp-v2-preview-the-coordinator/)
  * [Writing Custom Client Extensions](/2012/06/24/pulp-v2-preview-client-extensions/)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-10-09-pulp-v2-community-release-2.md
`````markdown
---
date: 2012-10-09T20:55:50+00:00
id: 832
title: Pulp v2 Community Release 2
date: 2012-10-09T19:31:59+00:00
author: Jay Dobies
layout: post
guid: http://website-pulp.rhcloud.com/?p=832
permalink: /2012/10/09/pulp-v2-community-release-2/
categories:
  - "2.0"
  - Releases
---
<!-- more -->
<img src="http://website-pulp.rhcloud.com/wp-content/uploads/2012/10/cr-2.png" alt="" title="Pulp Community Release 2" width="410" height="161" class="alignnone size-full wp-image-838" />

The second community release of the v2 codebase is now available. It can be accessed by enabling the pulp-v2-stable repository in the *-pulp.repo files (due to the versioning scheme, all other repositories should be disabled to ensure the v2 builds are installed).

# Overview

By now I&#8217;ve talked pretty extensively about how the Pulp&#8217;s v2 codebase is a radical shift from our v1 offering. This release is the second milestone in our reworking of Pulp from its humble beginnings as an RPM repository manager into a much more powerful and extensible platform (while still maintaining its RPM support).

There are a number of new features and bug fixes, but as with [the last community release](/2012/07/26/pulp-v2-community-release-1), this is intended more as a preview release rather than production level responsibilities.

# Installation &#038; Upgrade

## Installation

Installation instructions can be found in our <a href="http://pulp-rpm-user-guide.readthedocs.org/en/latest/installation.html" target="new">Pulp User Guide</a>.

The 2.0 and 1.x releases cannot be installed at the same time.

In this release, the SELinux policy RPM is not installed automatically with the server. SELinux support can be added once the server is installed by installing the `pulp-selinux` RPM.

## Upgrades

Upgrades from 1.x are not currently supported. This will be added in a future release, most likely Community Release 4.

# Features

_I&#8217;ll be completely honest, we cut this branch a few weeks ago. QE took some time to test and there was a period of about a week and a half where it sat ready to be released but was held up for dumb reasons. As such, I&#8217;m a bit fuzzy on what made it into CR-2 v. what will be in CR-3. There&#8217;s a ton of work that&#8217;s been done, all of it awesome, it&#8217;s just a matter of this release coming in the middle of a change to how we want to handle releases which made these release notes tricky to write. We&#8217;re cleaning up our release notes tracking process and this will get better, I promise. &#8211; jdob_

  * **Event Notification System** &#8211; The Pulp server can be configured to send events based on activities within the system. This release includes the basis for that framework as well as the ability to configure events to be sent to a REST API. The next release will include notifications sent by e-mail or posted to an AMQP message bus.
  * **Profiler Plugin Framework** &#8211; A profiler is a server-side plugin that provides type-specific support for operations related to consumers. This release includes the definition, framework, and hooks into the appropriate places in the Pulp server workflows to enhance the capabilities of Pulp&#8217;s remote installation functionality. Also included is the first usage of these plugins in the form of server-side translation of errata installation requests into the appropriate RPM upgrades based on the consumer&#8217;s latest reported package profile. The profiler also includes the ability to calculate applicable errata on a given set of consumers, however this ability is only accessible through the REST APIs and has yet to be exposed in the CLI.
  * **Increased Installation Options** &#8211; In addition to the previously supported installation of RPMs, the client now supports installation of errata and package groups on a consumer.
  * **Repository Group Support** &#8211; Repository groups have been added back to Pulp. In this iteration, Pulp&#8217;s criteria system is supported to greatly enhance the interface for manipulating group membership. Work continues in this area to flush out the operational features around groups.
  * **Standardized Criteria UI** &#8211; In v2, Pulp exposes a strong query syntax for all types of resources in what is referred to as a Pulp criteria. Criteria can include anything from a direct field matching to regular expressions. This release includes the beginning of standardizing the client&#8217;s format for defining a criteria when searching in Pulp.
  * **Client Support for Users** &#8211; Pulp&#8217;s user and roles system has been reworked. The v2 incarnation is included in this release.
  * **Performance and Stability Enhancements** &#8211; I realize this sounds like a generic catch-all, but given the newness of the code and QE&#8217;s ability to settle in and hammer on CR-1, there really was an impressive amount of bug fixes. A number of problem areas, for example the performance of retrieving a large number of repositories, were identified and addressed.

# Future Work

Work has already begun on Community Release 3. That release will include the Puppet support written about in the past few articles. Another notable change is the removal of createrepo from the metadata generation process, greatly increasing the performance of publishing yum repositories. This release should be available within the next two months to get these two major features, along with many others, in the community&#8217;s hands.

# Support

Any and all comments, suggestions, and bug reports are appreciated. In the coming months we&#8217;ll be working to polish the new codebase and every bit helps. As usual we can be reached on our [mailing list](https://www.redhat.com/mailman/listinfo/pulp-list) and in #pulp on Freenode.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-10-22-email-notifications.md
`````markdown
---
date: 2012-10-22T20:55:50+00:00
id: 847
title: Email Notifications
date: 2012-10-22T14:36:26+00:00
author: Michael Hrivnak
layout: post
guid: http://website-pulp.rhcloud.com/?p=847
permalink: /2012/10/22/email-notifications/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
# Introduction

Did you know that Pulp has an event system? You can subscribe to specific events and be notified in several ways. This has been a popular feature because it allows other projects to integrate with Pulp, and in cases like email notification, it allows humans to monitor Pulp&#8217;s server activity. Today we are going to look at receiving notifications by email.

# Diving In

Let&#8217;s take a look at the event listener system in the command line interface.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin event listener --help
Usage: pulp-admin listener [SUB_SECTION, ..] COMMAND
Description: manage server-side event listeners
&nbsp;
Available Sections:
  amqp    - manage amqp listeners
  email   - manage email listeners
  restapi - manage rest-api listeners
&nbsp;
Available Commands:
  delete - delete an event listener
  list   - list all of the event listeners in the system</pre>
      </td>
    </tr>
  </table>
</div>

Next week I will write about the AMQP notification type, but today we will focus on email. From this section, you can list all event listeners and delete specific listeners. To create and update, we drill down by type.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin event listener email create --help
Command: create
Description: create a listener
&nbsp;
Available Arguments:
&nbsp;
  --event-type - (required) one of "repo.sync.start", "repo.sync.finish",
                 "repo.publish.start", "repo.publish.finish". May be specified
                 multiple times. To match all types, use value "*"
  --subject    - (required) text of the email's subject
  --addresses  - (required) this is a comma separated list of email addresses
                 that should receive these notifications. Do not include spaces.</pre>
      </td>
    </tr>
  </table>
</div>

To add an email notifier, you must specify what types of events to listen to, what the email subject should be, and who should receive the emails. Let&#8217;s create an email listener now.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin event listener email create --event-type="repo.sync.start" --subject="pulp notification" --addresses=someone@redhat.com
Event listener successfully created
&nbsp;
$ pulp-admin event listener list
Event Types:       repo.sync.start
Id:                5081a42ce19a00ea4300000e
Notifier Config:   
  Addresses: someone@redhat.com
  Subject:   pulp notification
Notifier Type Id:  email</pre>
      </td>
    </tr>
  </table>
</div>

# Settings

Take a look in /etc/pulp/server.conf at the &#8220;email&#8221; section, and read the comments. For testing, I use port 1025 on localhost and run the python command as suggested to run a dummy MTA. (see below for example)

In production, it is strongly recommended that Pulp submit email to an MTA on localhost, or at least a highly available MTA on the local network. Like many applications, Pulp makes no effort to retry if the MTA is unavailable or rejects a message.

# Email Content

The emails themselves are bare-bones and not designed for luxury. In fact, the body of the email is simply a pretty-printed JSON representation of the actual event body. The messages have all of the relevant information that is available, but don&#8217;t expect a friendly greeting. That said, we want to improve this in the future, and we would love to hear about your use case. Let us know what format would be valuable to you.

In another window I ran:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">pulp-admin rpm repo sync run --repo-id=pulp2</pre>
      </td>
    </tr>
  </table>
</div>

When the sync started, an email was sent whose output looked like this:

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ python -m smtpd -n -c DebuggingServer localhost:1025
---------- MESSAGE FOLLOWS ----------
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: pulp notification
From: no-repy@your.domain
To: someone@redhat.com
X-Peer: 127.0.0.1
&nbsp;
{
  "call_report": {
    "task_group_id": "aaa8f2ec-964c-4d62-bba9-3191aad9c3ea", 
    "exception": null, 
    "task_id": "79be77a8-1a20-11e2-aeb9-1803731e94c4", 
    "tags": [
      "pulp:repository:pulp2", 
      "pulp:action:sync"
    ], 
    "reasons": [], 
    "start_time": "2012-10-19T19:09:16Z", 
    "traceback": null, 
    "schedule_id": null, 
    "finish_time": null, 
    "state": "running", 
    "result": null, 
    "progress": {}, 
    "principal_login": "admin", 
    "response": "accepted"
  }, 
  "event_type": "repo.sync.start", 
  "payload": {
    "repo_id": "pulp2"
  }
}
------------ END MESSAGE ------------</pre>
      </td>
    </tr>
  </table>
</div>

# Summary

Notification by email is a useful way to integrate Pulp with other systems, and it is the method of choice for notifying humans. For more powerful integration options, be sure to read my next post about our AMQP notifier.

Are notification features valuable to you? Tell us about your use case in a comment here, on our [email list](https://www.redhat.com/mailman/listinfo/pulp-list), or on IRC (#pulp on freenode).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-11-02-amqp-notifications.md
`````markdown
---
date: 2012-11-02T20:55:50+00:00
id: 873
title: AMQP Notifications
date: 2012-11-02T17:37:33+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=873
permalink: /2012/11/02/amqp-notifications/
categories:
  - "2.0"
  - Spotlight
---
<!-- more -->
# Introduction

[Last week](/2012/10/22/email-notifications/) I talked about Pulp&#8217;s ability to send notifications via email upon occurrence of specified events. This week I am going to show you how Pulp can send those same notifications to an AMQP message broker.

# How Is This Valuable?

[AMQP](http://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol) is an industry standard for integrating separate systems, applications, or even components within an application through asynchronous messages. If you want to take programmatic action based on an event that happened inside Pulp, this feature is for you.

# How It Works

  1. When an event fires inside Pulp, the notification system applies whatever handlers have been setup for it. One of those handlers is for AMQP. The body of the event becomes the body of an AMQP message, and the type of the event becomes the &#8220;subject&#8221; (that&#8217;s AMQP lingo) of that message. The message is then sent over the network to a message broker.
  2. The message broker delivers the message to a [topic exchange](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_MRG/1.1/html/Messaging_User_Guide/chap-Messaging_User_Guide-Exchanges.html#sect-Messaging_User_Guide-Exchange_Types-Topic_Exchange) (later I will show you how to specify a named exchange to use).
  3. The message is then sent to any clients that are subscribe to this exchange through queues.

# Setup

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ pulp-admin event listener amqp create --help
Command: create
Description: create a listener
&nbsp;
Available Arguments:
&nbsp;
  --event-type - (required) one of "repo.sync.start", "repo.sync.finish",
                 "repo.publish.start", "repo.publish.finish". May be specified
                 multiple times. To match all types, use value "*"
  --exchange   - optional name of an exchange that overrides the setting
                 from server.conf</pre>
      </td>
    </tr>
  </table>
</div>

We have already talked about how to specify an event type, but here you can also specify an exchange name. If you don&#8217;t specify one, it will default to the value pulled from /etc/pulp/server.conf in the &#8220;[messaging]&#8221; section. If you don&#8217;t set one there either, Pulp will default to &#8220;amq.topic&#8221;, which is an exchange guaranteed to be available on any broker. Regardless of what name you choose (we suggest &#8220;pulp&#8221; as a reasonable choice), you do not need to create the exchange or take any action on the AMQP broker. Pulp will automatically create the exchange if it does not yet exist.

As for selecting event types, if you are unsure, I suggest going with &#8220;*&#8221; to select all of them. The client can choose which types of messages they want to subscribe to based on hierarchically matching against the event type (called a &#8220;subject&#8221; in AMQP). It is cheap and fast to send a message to a broker, so I like to fire and forget. Let the clients decide which subjects they care about. More on subject matching [here](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_MRG/1.1/html/Messaging_User_Guide/chap-Messaging_User_Guide-Exchanges.html#sect-Messaging_User_Guide-Exchange_Types-Topic_Exchange).

Pulp already uses [Qpid](http://qpid.apache.org/) as an AMQP message broker for communication with consumers, so your Pulp installation probably has a broker setup and ready to go.

# Listening In

In the playpen of the Pulp repository, I created a [small utility](https://github.com/pulp/pulp/blob/master/playpen/qpid/listen.py) that lets you connect to a topic exchange and print messages to stdout.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ ./listen.py -h
usage: listen.py [-h] [-e EXCHANGE] [-s SUBJECT] [-a ADDRESS] [-p PORT] [-q]
&nbsp;
print messages sent to a qpid exchange
&nbsp;
optional arguments:
  -h, --help            show this help message and exit
  -e EXCHANGE, --exchange EXCHANGE
                        name of a qpid exchange (default: amq.topic)
  -s SUBJECT, --subject SUBJECT
                        message subject to bind to
  -a ADDRESS, --address ADDRESS
                        hostname to connect to (default:localhost)
  -p PORT, --port PORT  port to connect to (default: 5672)
  -q, --quiet           show message subject only</pre>
      </td>
    </tr>
  </table>
</div>

Let&#8217;s fire up the listener and see some messages come across. For our purposes, I am going to use quiet mode which will only show the subjects. Event bodies can get very detailed, and they haven&#8217;t changed since you saw them in my last post. After starting listen.py, I will start a repo sync, and then we will see events come across the topic exchange.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ ./listen.py -e pulp -q
pulp.server.repo.sync.start
pulp.server.repo.sync.finish
pulp.server.repo.publish.start
pulp.server.repo.publish.finish</pre>
      </td>
    </tr>
  </table>
</div>

All four events fired. What if we only care about publish events? Let&#8217;s specify a subject with a wildcard.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ ./listen.py -e pulp -q -s pulp.server.repo.publish.*
pulp.server.repo.publish.start
pulp.server.repo.publish.finish</pre>
      </td>
    </tr>
  </table>
</div>

All four events still hit the &#8220;pulp&#8221; exchange, but the client&#8217;s subscription only matched these two. Now let&#8217;s get fancy and only match &#8220;finish&#8221; events, whether for sync or publish.

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="none" style="font-family:monospace;">$ ./listen.py -e pulp -q -s pulp.server.repo.*.finish
pulp.server.repo.sync.finish
pulp.server.repo.publish.finish</pre>
      </td>
    </tr>
  </table>
</div>

As you can see, wildcard matching within a topic exchange could be very valuable.

# Summary

This feature allows the community to integrate their own systems and applications with Pulp in ways we might not even imagine using an open industry-standard protocol. As with last time, I invite you to please share with us if you have a use case for AMQP messaging with Pulp. Leave a comment here, post on our [email list](https://www.redhat.com/mailman/listinfo/pulp-list), or catch us on IRC (#pulp on freenode).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2012-12-12-pulp-in-2013.md
`````markdown
---
date: 2012-12-12T20:55:50+00:00
id: 912
title: Pulp in 2013
date: 2012-12-12T15:13:20+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=912
permalink: /2012/12/12/pulp-in-2013/
categories:
  - Uncategorized
---
<!-- more -->
With both 2012 winding down and Pulp 2.0 approaching release, I wanted to lay out some information on where Pulp will be going in the new year.

## Pulp 2.0 Release

For the past few weeks, we have been focusing on getting the next version of Pulp in a releasable state. The release is nearly complete and the final beta build should be available before the end of this week.

This is a good time to mention another house keeping item. The entire team will be on vacation starting on December 24th and extending until January 2nd, so don&#8217;t be surprised to find the chat room quieter than usual. That said, the community itself is rather helpful, so any questions will likely still be answered.

Following that, the release should be during the first week of January. However, anyone looking to get an early start over the holiday should feel free to use the release candidate build which will be located in our beta repository. This build will very likely become the final release when we return in January.

## Pulp 2.0.x Release

When the 2.0 release becomes available, it will unfortunately not support upgrading from a 1.1 Pulp installation. That functionality is largely finished but still needs some polish and testing. I&#8217;m looking to release a minor update in mid-February containing this functionality.

Alongside this release will be the Pulp Developer Guide. That guide will contain:

  * Documentation on our REST APIs
  * Documentation for integrating with Pulp&#8217;s event notification system over HTTP or AMQP.
  * Guides for using the plugin infrastructure, including information on writing server-side plugins, client-side extensions to the client, and agent handlers to field requests for new content types.

## Pulp 2.x Releases

Going forward, I&#8217;m looking to have a much more regular release cycle. The plan is to have a new point release every three months. Each release will feature a handful of marquee features, minor tweaks and improvements, and, of course, bug fixes. The 2.1 release is planned for early April and will feature the first pass at the v2 implementation of CDS functionality.

I&#8217;ve even gone so far as to start putting together a roadmap to facilitate this release cycle. I have every intention of making the roadmap visible, I&#8217;m just still trying to figure out the best way to do that. I&#8217;ll post more about it when I come to a decision.

## Beyond

Once 2.0 is released, one of the main focuses will be adding support for new content types. As a team, we have plans for what we want to support. In addition to that, we want to encourage contributions from the community. Interest has already been expressed by a number of people for writing support for Debian packages. The Developer Guide is the first major step in this direction. Future work will also focus on providing libraries to facilitate the more mechanical parts of plugins, such as components to support more robust downloading of files (throttling, proxy support, duplicate file detection) from an external source.

Alongside the point releases, I&#8217;m looking into setting up a demo of sorts to talk about the new features and give the community a chance to provide feedback directly with the team. I&#8217;m still figuring out the technology (conference call, google hangout, etc.) and I&#8217;ll have more information in the future.

## Wrapping Up

This is probably a good time to both thank and congratulate the team on an impressive year. The work on 2.0 has set us up to greatly increase the capabilities of Pulp well beyond simply supporting RPMs and errata. I&#8217;m excited to see where we go from here.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-01-03-pulp-v2-0-released.md
`````markdown
---
date: 2013-01-03T20:55:50+00:00
id: 927
title: Pulp v2.0 Released
date: 2013-01-03T14:41:24+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=927
permalink: /2013/01/03/pulp-v2-0-released/
categories:
  - Releases
---
<!-- more -->
<img src="http://www.pulpproject.org/wp-content/uploads/2013/01/v2.png" alt="v2" width="309" height="161" class="alignnone size-full wp-image-928" srcset="http://www.pulpproject.org/wp-content/uploads/2013/01/v2-300x156.png 300w, http://www.pulpproject.org/wp-content/uploads/2013/01/v2.png 309w" sizes="(max-width: 309px) 100vw, 309px" />

I am extremely excited to announce the immediate availability of Pulp 2.0. This version of Pulp represents an entirely new approach, evolving Pulp into an extendable framework for content management. No longer limited to RPM-related content, users have the ability to customize their Pulp installation to handle their specific content management needs. This release sees the first usage of this ability, providing support for both RPM-related content (RPMs, errata, etc.) as well as handling Puppet modules, including synchronizing all or a subset of modules hosted at Puppet Forge. 

## Quick Links

  * [Documentation Home](http://www.pulpproject.org/docs/)
  * [Mailing List](https://www.redhat.com/mailman/listinfo/pulp-list)
  * Chat: #pulp on Freenode

## Existing Users

Pulp v2 beta users can upgrade to the release version. The .repo files have been updated with the v2 stable repository as the default enabled repository. Alternatively, simply enable the `[pulp-v2-stable]` repository definition in your existing copy.

Unfortunately, this release does not support upgrading from a Pulp v1 installation. Work is being done to support this in the next two months, but it didn&#8217;t make it into this release.

## What is Pulp?

<span style="font-style: italic">(I shamelessly copied this directly from www.pulpproject.org, so don&#8217;t be surprised if this looks familiar)</span>

Pulp is a platform for managing repositories of content, such as software packages, and pushing that content out to large numbers of consumers. If you want to locally mirror all or part of a repository, host your own content in a new repository, manage content from multiple sources in one place, and push content you choose out to large numbers of clients in one simple operation, Pulp is for you!

Pulp has a well-documented REST API and command line interface for management.

Pulp is completely free and open-source, and we invite you to join us on GitHub!

### With Pulp Server, you can&#8230;

  * Pull in content from existing repositories to the Pulp server. Do it manually one-time-only or on a recurring schedule.
  * Upload new content to the Pulp server.
  * Mix and match uploaded and imported content to create new repositories, then publish and host them with Pulp.
  * Publish your content as a web-based repository, to a series of ISOs, or in any other way that meets your needs.

### Pulp Consumers can&#8230;.

  * Register with Pulp server, bind to a repository, then have their installed content managed from the server.
  * Pulp server centrally manages and reports on what content is on each consumer.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-01-11-roadmap.md
`````markdown
---
date: 2013-01-11T20:55:50+00:00
id: 961
title: Roadmap
date: 2013-01-11T21:18:28+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=961
permalink: /2013/01/11/roadmap/
categories:
  - Releases
---
<!-- more -->
## Roadmap

With Pulp 2.0 out, it&#8217;s time to start looking ahead to where we go from here. The release at the start of the year made for a clean break to align future releases against calendar quarters. The current state of the roadmap depicts the releases and rough feature alignment for the rest of this year.

And I do mean rough, especially once you get past the 2.2 release in July. We have our ideas on what we want to accomplish, but with our close ties to Red Hat projects, we have a number of outside influences that have the potential to keep most planning from being written in stone. That also means that things may be shuffled around due to community request. What I&#8217;m getting at is the expected disclaimer that everything on there is subject to change. As a particular release draws closer, the aligned features will stabilize, so this will very much be a living document.

The roadmap can be found <a href="/roadmap" target="new">here</a>.

## Release 2.0.7

While I&#8217;m talking releases, there will be a critical bug fix release to the 2.0 release in the next week or so. The list of bugs aligned to it can be found <a href="https://bugzilla.redhat.com/buglist.cgi?list_id=1006896&#038;classification=Community&#038;target_release=2.0.7&#038;query_format=advanced&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=POST&#038;bug_status=CLOSED&#038;product=Pulp" target="new">here</a>.

## Release 2.1.0

In addition to the features mentioned in the roadmap, the list of bugs aligned to the 2.1.0 release in early April can be found <a href="https://bugzilla.redhat.com/buglist.cgi?list_id=1006896&#038;classification=Community&#038;target_release=2.1.0&#038;query_format=advanced&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=POST&#038;bug_status=CLOSED&#038;product=Pulp" target="new">here</a>.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-01-24-pulp-2-0-7-released.md
`````markdown
---
date: 2013-01-24T20:55:50+00:00
id: 974
title: Pulp 2.0.7 Released
date: 2013-01-24T17:43:12+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=974
permalink: /2013/01/24/pulp-2-0-7-released/
categories:
  - Releases
---
<!-- more -->
The Pulp team would like to announce the availability of its 2.0.7 release. This is a bug fix release for the initial 2.0 release earlier this year.

The release can be found in our stable repositories (`pulp-v2-stable` in the .repo file if you&#8217;ve downloaded it).

The full list of bugs included in this release <a href="https://bugzilla.redhat.com/buglist.cgi?list_id=1040457&#038;classification=Community&#038;target_release=2.0.7&#038;query_format=advanced&#038;bug_status=NEW&#038;bug_status=ASSIGNED&#038;bug_status=POST&#038;bug_status=MODIFIED&#038;bug_status=ON_DEV&#038;bug_status=ON_QA&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=CLOSED&#038;product=Pulp" target="new">can be found here.</a>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-02-22-developer-guide-released.md
`````markdown
---
date: 2013-02-22T20:55:50+00:00
id: 982
title: Developer Guide Released
date: 2013-02-22T19:59:43+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=982
permalink: /2013/02/22/developer-guide-released/
categories:
  - Releases
---
<!-- more -->
Today we are happy to present the official and mostly-new Pulp Developer Guide, available from our [documentation page](/docs/). The most notable addition is a detailed guide on how to add support for new content types, including examples. The Developer Guide also includes sections on Pulp&#8217;s architecture, how to integrate with Pulp, as well as the policies and conventions used by the Pulp Team.

This release is a continuation of the Pulp Team&#8217;s commitment to providing documentation that is comprehensive, accurate, and above-all: useful. Please have a look, and as always, your feedback is valued and appreciated.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-03-22-pulp-presentation-on-youtube.md
`````markdown
---
date: 2013-03-22T20:55:50+00:00
id: 991
title: Pulp Presentation on YouTube
date: 2013-03-22T19:40:08+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=991
permalink: /2013/03/22/pulp-presentation-on-youtube/
categories:
  - Spotlight
---
<!-- more -->
On March 14, I presented Pulp to the <a href="http://trilug.org" title="Triangle Linux User Group" target="_blank">Triangle Linux User Group</a> in Raleigh, NC. In addition to an overview of what Pulp does and how its pieces fit together, I talked about some of the upcoming 2.1 features such as Pulp Nodes. I also included a demo of the new Puppet consumer features.

You can watch a video of the presentation <a href="http://www.youtube.com/watch?feature=player_detailpage&#038;v=DlBQW2TZcZc#t=1577s" title="Pulp Presentation to TriLUG" target="_blank">here</a>. Skip ahead to 26 minutes for my portion of the meeting.

TriLUG is a very active user group with a wide variety of impressively-talented people and consistently well-attended meetings. The TriLUG email list has been a tremendous resource for me over the years, and it was a pleasure to be this month&#8217;s presenter. If you would like to watch future meetings online, look for the &#8220;Triangle Linux User Group&#8221; on <a href="https://plus.google.com/u/0/100966474210194014634/" title="Triangle Linux User Group" target="_blank">Google+</a> and join the live Hangout.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-04-05-pulp-2-1-0-released.md
`````markdown
---
date: 2013-04-05T20:55:50+00:00
id: 1001
title: Pulp 2.1.0 Released
date: 2013-04-05T15:54:46+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=1001
permalink: /2013/04/05/pulp-2-1-0-released/
categories:
  - Releases
---
<!-- more -->
The Pulp team is proud to announce the availability of its 2.1.0 release. Highlights from this release include&#8230;

  * Pulp Nodes functionality, allowing one Pulp server to manage and push content to other Pulp servers (previously known as a CDS in Pulp v1).
  * Support for Puppet Master consumers to have modules remotely installed and upgraded through the Pulp admin client.
  * Significant speed and memory consumption improvements when synchronizing yum repositories.
  * Support for upgrading from Pulp 1.1 installations.
  * A number of <a href="https://bugzilla.redhat.com/buglist.cgi?resolution=---&#038;resolution=CURRENTRELEASE&#038;classification=Community&#038;target_release=2.1.0&#038;query_format=advanced&#038;bug_status=VERIFIED&#038;bug_status=CLOSED&#038;component=admin-client&#038;component=bindings&#038;component=consumer-client%2Fagent&#038;component=consumers&#038;component=coordinator&#038;component=documentation&#038;component=events&#038;component=nodes&#038;component=okaara&#038;component=rel-eng&#038;component=repositories&#038;component=rest-api&#038;component=selinux&#038;component=upgrade&#038;component=users&#038;component=z_other&#038;product=Pulp&#038;list_id=1253761" target="new">bug fixes</a>. </ul> 
    The [full release notes](https://pulp-user-guide.readthedocs.org/en/pulp-2.1/release-notes.html#pulp-2-1-0) can be found in our user guide. 
    
    The release can be found in our stable repositories (pulp-v2-stable in the .repo file if you’ve downloaded it). Installation and upgrade instructions can be found in the [installation section of the user guide](https://pulp-user-guide.readthedocs.org/en/pulp-2.1/installation.html). All of our documentation can be accessed from [this list](/docs/).
    
    ## Pulp 2.1.1
    
    Work is nearing completion for our 2.1.1 release. This release is primarily to support an upcoming <a href="http://katello.org" target="new">Katello</a> release. Of particular interest will be the inclusion of another round of performance improvements when synchronizing yum repositories. Beta builds for this release are scheduled to begin next week with the release coming in early May.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-05-08-pulp-2-1-1-released.md
`````markdown
---
date: 2013-05-08T20:55:50+00:00
id: 1021
title: Pulp 2.1.1 Released
date: 2013-05-08T13:03:16+00:00
author: Jay Dobies
layout: post
guid: http://www.pulpproject.org/?p=1021
permalink: /2013/05/08/pulp-2-1-1-released/
categories:
  - Releases
---
<!-- more -->
The Pulp team is proud to announce the availability of its 2.1.1 release. This is a minor release containing the following:

  * Another round of performance improvements to the yum repository sync process. Our testing saw the following changes: 
      * Sync time reduced from ~65 mins to ~35 mins. In Pulp 2.1.0 there is a significant delay as the yum metadata is transferred from Grinder to Pulp. To the user this appeared as if the process was frozen. The metadata retrieval is now done in Pulp itself, greatly reducing this initial metadata processing step.
      * Resyncing an existing repository reduced from ~25-30 mins to ~6-10 mins.
      * Memory footprint reduced by 30%.
  * Enhancements to our applicability API to support the next iteration of <a href="http://www.katello.org/" target="new">Katello</a>.
  * Additional <a href="https://bugzilla.redhat.com/buglist.cgi?list_id=1346169&#038;classification=Community&#038;target_release=2.1.1&#038;query_format=advanced&#038;bug_status=VERIFIED&#038;bug_status=RELEASE_PENDING&#038;bug_status=CLOSED&#038;product=Pulp" target="new">bug fixes and enhancements.</a>

The release can be found in our stable repositories (pulp-v2-stable in the .repo file if you’ve downloaded it). Installation and upgrade instructions can be found in the [installation section of the user guide](https://pulp-user-guide.readthedocs.org/en/pulp-2.1/installation.html). All of our documentation can be accessed from [our documentation summary page](/docs/).

## Pulp 2.2.0

Our May sprint is the our last feature and development sprint for the 2.2.0 release. Starting the first week in June, beta builds for this release will be available. I&#8217;ll provide more of a preview on what to expect when I have a bit more time.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-06-28-pulp-goes-to-puppet-camp.md
`````markdown
---
date: 2013-06-28T20:55:50+00:00
id: 1029
title: Pulp Goes to Puppet Camp
date: 2013-06-28T13:43:11+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1029
permalink: /2013/06/28/pulp-goes-to-puppet-camp/
categories:
  - Uncategorized
---
<!-- more -->
Last month I was invited to Puppet Camp Raleigh to do a presentation on how to manage Puppet modules and repositories using Pulp. Thank to Puppet Labs for the invitation, and for putting on a very nice event in Raleigh. It was an all-day event featuring speakers from Puppet Labs, Citrix, Juniper, Red Hat, and GitHub presenting to a crowd of about 150.

Video of my presentation is available [here](https://www.youtube.com/watch?v=ryxXFFYQqLI "Hosting a Custom Forge with Pulp").
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-08-16-new-repository-layout.md
`````markdown
---
date: 2013-08-16T20:55:50+00:00
id: 1040
title: New Repository Layout
date: 2013-08-16T19:34:15+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1040
permalink: /2013/08/16/new-repository-layout/
categories:
  - Uncategorized
---
<!-- more -->
In preparation for the upcoming release of Pulp 2.2, we have deployed a new layout for our yum repository. The new layout will make it much easier for us to make multiple releases of Pulp available at the same time, and it will give users the ability to choose what level of updates to receive. This also means that stable Pulp releases starting from 2.1 will continue to be available in our repository indefinitely.

We also will be making source RPMs available in our repository for all new releases.

The base of our stable repository is <a href="http://repos.fedorapeople.org/repos/pulp/pulp/stable/" target="_blank">here</a>.

We do our best to follow <a href="http://semver.org/" target="_blank">semantic versioning.</a> Thinking about versions in terms of X.Y.Z components, to stay on the current X.Y stable release and only receive Z updates (which should be bug fixes only), you would use the `2.1/` path.

To stay on the current X stable release and get major new releases such as 2.2 and 2.3 when they come out, you would use the `2/` path. This lets you automatically get major new features in the v2 line, but will stop short of moving you to v3 until you are ready.

To be on the latest stable release all the time, and even get updates to 3.0 and beyond, you would use the `latest/` path.

Beta releases will have a similar layout, but without the upgrade options. So for example we may have 2.3 and 2.4 beta builds available at the same time in `beta/2.3/` and `beta/2.4/`, but there will never be a `beta/2/` or `beta/latest/`. Beta releases are not guaranteed to persist for any period of time and will definitely get trimmed.

The old `v2/stable/` link will continue to work. It will mirror the behavior of the new `stable/2/` link. However, this is a great time to re-evaluate what upgrades you want to receive automatically, and choose a new repository link to match your expectations.

Our repo files have been updated, so please head over to our <a href="https://pulp-user-guide.readthedocs.org/en/pulp-2.1/installation.html#repositories" target="_blank">installation docs</a> to get the new file.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2013-11-20-pulp-2-2-1-released.md
`````markdown
---
date: 2013-11-20T20:55:50+00:00
id: 1062
title: Pulp 2.2.1 Released
date: 2013-11-20T19:03:19+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1062
permalink: /2013/11/20/pulp-2-2-1-released/
categories:
  - Uncategorized
---
<!-- more -->
The Pulp team is pleased to announce the release of Pulp 2.2.1, which includes a number of important bug fixes. New packages are in our 2.2 stable repository, and we recommend that all users upgrade.

Please see release notes at the following links:

[Platform Changes](http://pulp-user-guide.readthedocs.org/en/pulp-2.2/release-notes/2.2.x.html#pulp-2-2-1 "Platform Changes")

[RPM Changes](http://pulp-rpm-user-guide.readthedocs.org/en/pulp-2.2/release-notes/2.2.x.html#pulp-2-2-1 "RPM Changes")
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-02-19-making-pulp-scalable-and-highly-available.md
`````markdown
---
date: 2014-02-19T20:55:50+00:00
id: 1070
title: Making Pulp Scalable and Highly Available
date: 2014-02-19T20:42:13+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1070
permalink: /2014/02/19/making-pulp-scalable-and-highly-available/
categories:
  - Uncategorized
---
<!-- more -->
Something very exciting is going to happen today to Pulp. We have been working for months to make Pulp scalable (more details below), and recently it has been an all-hands effort to prepare a beta build of 2.4. We have completely replaced the asynchronous tasking system, re-written the scheduled task system, and re-written large portions of our web request handlers and their underlying logic. The sum of that effort is going to be merged into our master branch on <a href="https://github.com/pulp/pulp" target="_blank">GitHub</a> today, because we have finally reached a point where the new code is stable and feature-complete.

In previous releases of Pulp, the REST API has been limited to running in one apache process. No more! Pulp 2.4 will let you handle web requests with multiple processes scaled out to as many machines as you like.

Long-running tasks, like publishing a repository, have previously been performed by the same process that was handling web requests. In 2.4, those jobs have been moved to dedicated &#8220;worker&#8221; processes. You&#8217;ll be able to scale apache processes and worker processes separately based on what type of load your deployment receives.

By scaling out apache processes and worker processes to multiple machines, you&#8217;ll be able to make a single Pulp deployment (mostly) highly-available with the same techniques used for any data-driven web application. (There is one area remaining that includes a single point of failure; more about that later.)

This is all made possible by using the best-in-class <a href="http://www.celeryproject.org/" target="_blank">Celery</a> project, which is a mature management framework for asynchronous and distributed job queues. We&#8217;ve been working closely with the Celery community to add support for Apache Qpid (our preferred messaging broker) using AMQP 1.0, which is another exciting development that we&#8217;ll post more about separately.

There are many additional improvements going into 2.4 such as an all-new yum distributor, support for puppet 3.3+, and more consistent error reporting across the REST API (this will be an ongoing effort). Likewise, some very interesting engineering took place to guarantee the same resource locking we had in previous releases. The reason Pulp has been limited to one process is that it is difficult to guarantee that only one operation (such as a sync or publish) happens at a time on any particular resource. Doing this in a distributed system is even more complex! We came up with an interesting solution that we&#8217;ll post more about separately.

Stay tuned, and we will follow up with more details on the 2.4 release schedule as well as additional posts going into more detail about these changes. Keep an eye out for 2.4 beta builds, and please share your feedback.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-08-31-deploying-pulp-in-containers.md
`````markdown
---
date: 2014-08-31T20:55:50+00:00
id: 1079
title: Deploying Pulp in Containers
date: 2014-08-31T15:01:20+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1079
permalink: /2014/08/31/deploying-pulp-in-containers/
categories:
  - Uncategorized
---
<!-- more -->
Mark Lamourine has started an excellent series of blog posts on deploying Pulp in containers using <a href="http://docker.io" target="_blank">docker</a> and <a href="https://github.com/GoogleCloudPlatform/kubernetes" target="_blank">kubernetes</a>. He starts with an <a href="http://cloud-mechanic.blogspot.com/2014/08/intro-to-containerized-applications.html" target="_blank">intro</a> and goes on to describe in detail how to <a href="http://cloud-mechanic.blogspot.com/2014/08/docker-simple-service-container-example.html" target="_blank">deploy mongodb with docker</a>.

Keep your eye out for the rest of this series.

I am especially interested in seeing qpid deployed in a container. Since the qpid-cpp server does not have support for vhosts, running multiple qpid instances is the only way to achieve full isolation between separate components or applications that require a message broker. Docker has the potential to make that very easy to manage. Even within one Pulp deployment, there would be a lot of value in isolating the celery workers&#8217; messaging traffic from consumer messaging traffic by using two qpid instances. Stay tuned for more on that.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-11-19-upcoming-pulp-releases.md
`````markdown
---
date: 2014-11-19T20:55:50+00:00
id: 1094
title: Upcoming Pulp Releases
date: 2014-11-19T19:31:46+00:00
author: Brian Bouterse
layout: post
guid: http://www.pulpproject.org/?p=1094
permalink: /2014/11/19/upcoming-pulp-releases/
categories:
  - Uncategorized
---
<!-- more -->
2.5.0 <&#8211; A release candidate is available in Pulp&#8217;s beta repo in the 2.5 release stream.

2.6.0 <&#8211; Not yet built, but an alpha should be available soon.

**Why is the release after 2.5.0 going to be 2.6.0 and not 2.5.1?**
  
Since the version 2.4.0 release, Pulp is working to adhere to <a href="http://semver.org/" target="_blank">semantic versioning</a>. Semantic versioning is important so that users can upgrade to a given version and have a correct expectation about what is in that new version ie: bugfix, features, or backwards incompatible changes. There are new features that are ready to be included in a release, so the next release planned will be 2.6.0.

**Will 2.6.0 fix bugs that that exist in 2.5.0?**
  
Yes. There are some new features but also a lot of bugfixes. One of the main bugs resolved is that 2.6.0 should work with RabbitMQ.

**I integrate against Pulp (ie: HTTP API, plugin API), is it safe for me to upgrade from 2.5.0 -> 2.6.0?**
  
Yes, any Pulp release that starts with a 2 should be backwards compatible from an API perspective. Sometimes there are good reasons (ie: security) that cause a X.Y release to be incompatible, but 2.5.0 -> 2.6.0 should be completely backwards compatible. 2.4.Z -> 2.5.Z should also be completely reverse compatible.

**I develop or contribute to Pulp or Pulp plugins; how does this affect me?**
  
You should do one thing. Go delete 2.5-dev from your fork and local checkouts of pulp, pulp\_rpm, and pulp\_puppet. We made sure nothing was lost when we deleted 2.5-dev, but you still need to delete your versions of those branches.

Send questions or thoughts to pulp-list; you can also discuss on #pulp on freenode
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-11-25-pulp-2-5-0-is-released.md
`````markdown
---
date: 2014-11-25T20:55:50+00:00
id: 1101
title: Pulp 2.5.0 is released!
date: 2014-11-25T15:15:07+00:00
author: Chris Duryee
layout: post
guid: http://www.pulpproject.org/?p=1101
permalink: /2014/11/25/pulp-2-5-0-is-released/
categories:
  - Uncategorized
---
<!-- more -->
The Pulp team is pleased to announce general availability of Pulp 2.5.0.

This release includes the following new features:

  * Improved SELinux policy
  * pulp-admin bash tab completion
  * SSL support for MongoDB connections

Numerous bugs were fixed in 2.5.0. All users are encouraged to upgrade.

Additionally, a &#8220;tech preview&#8221; release of pulp-docker ships with Pulp 2.5.0. This plugin allows management of Docker repositories. This is not installed by default.

&nbsp;
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-11-25-pulp-2-6-0-0-1-alpha-is-available.md
`````markdown
---
date: 2014-11-25T20:55:50+00:00
id: 1103
title: Pulp 2.6.0-0.1.alpha is available
date: 2014-11-25T15:16:13+00:00
author: Chris Duryee
layout: post
guid: http://www.pulpproject.org/?p=1103
permalink: /2014/11/25/pulp-2-6-0-0-1-alpha-is-available/
categories:
  - Uncategorized
---
<!-- more -->
Pulp 2.6.0-0.1.alpha is available in the testing repositories.

This alpha release includes bugfixes and support for RabbitMQ.

Starting with Pulp 2.6.0 alpha, releases will be GPG signed by the Pulp team. If you use the repo files from the <a href="http://pulp.readthedocs.org/en/latest/user-guide/installation.html" target="_blank">installation page</a> and enable the _pulp-2.6-testing_ repo, this should be configured correctly by default.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2014-12-23-pulp-presentation-at-tripython-on-january-22-2015.md
`````markdown
---
date: 2014-12-23T20:55:50+00:00
id: 1109
title: Pulp presentation at TriPython on January 22, 2015
date: 2014-12-23T20:01:38+00:00
author: Chris Duryee
layout: post
guid: http://www.pulpproject.org/?p=1109
permalink: /2014/12/23/pulp-presentation-at-tripython-on-january-22-2015/
categories:
  - Uncategorized
---
<!-- more -->
Randy Barlow will be presenting at TriPython on January 22nd on Pulp and Pulp&#8217;s Python package plugin.

If you are in North Carolina&#8217;s Triangle area, feel free to attend! More information is available at the the [TriPython website](http://tripython.org/Members/cbc/jan-15-mtg).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2015-01-02-pulp-in-the-new-year.md
`````markdown
---
date: 2015-01-02T20:55:50+00:00
id: 1115
title: Pulp in the New Year
date: 2015-01-02T18:21:58+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1115
permalink: /2015/01/02/pulp-in-the-new-year/
categories:
  - Development
---
<!-- more -->
2015 will bring some exciting under-the-hood changes to Pulp that I&#8217;d like to share with you.

# Django

Pulp has used [web.py](http://webpy.org/ "web.py") as its web framework for a long time, but unfortunately that project has gone dormant. Since Pulp only uses a small set of web.py&#8217;s features (essentially using it as a thin WSGI adapter), replacing it is a reasonably straight-forward task. This gave us an opportunity to re-evaluate what we want out of a web framework and consider several compelling options.

We ultimately chose [Django](https://djangoproject.com/ "Django"), a powerful and mature web framework that offers a lot of added value beyond just being a WSGI adapter. To start, I expect that Django will enable (and motivate) us to replace a lot of repeated boilerplate code in Pulp&#8217;s web handlers with reusable pieces. Longer-term, Pulp could take advantage of Django&#8217;s auth framework, notification facilities, form processing, and integration with a data-access layer (see below).

Work is already in-progress for converting from web.py to Django, and this will be part of a future release **after Pulp 2.6.x**.

# MongoEngine

Pulp&#8217;s data access layer is all-custom, using the pymongo library to talk directly to MongoDB. There is a lot of boilerplate code that gets duplicated from one collection to the next, with variations, and this has become a substantial headwind for development. That is all being replaced by use of [MongoEngine](http://mongoengine.org/ "MongoEngine"), a document-object mapper that feels very similar to Django&#8217;s built-in ORM. MongoEngine is mature, stable, and will give us one consistent and reliable way to access documents in our database. Defining each collection&#8217;s schema with MongoEngine will be especially valuable.

Work is in-progress to begin using MongoEngine. We will convert one collection at a time until the job is done, so the transition is likely to span several Pulp releases. The first baby steps will be included in Pulp 2.6.0, but substantial changes won&#8217;t be present until a future release **after Pulp 2.6.x**.

# Tastypie

Looking further into the future, once the conversions to Django and MongoEngine are complete, [Tastypie](http://tastypieapi.org/ "Tastypie") offers an enticing way to combine those two frameworks to auto-generate a REST API. Pulp&#8217;s current REST API involves a lot of custom code with custom documentation that is separate from the code. Using a framework like Tastypie to generate the REST API and associated documentation could save a lot of development time, improve API stability, improve guarantees about accuracy of documentation, and improve standards-compliance.

Pulp is not yet committed to using Tastypie, but we will consider it carefully as the conversions to Django and MongoEngine are finished. If we do move forward with Tastypie, it would likely involve enough changes to the API itself to warrant a major new release of Pulp.

# Summary

These three frameworks together open up great possibilities. They replace a lot of boilerplate code and let Pulp developers focus on core functionality. Django especially offers a lot of potential added value, and Tastypie is a great demonstration of what becomes possible when using advanced frameworks like Django and MongoEngine.

Stay tuned for more updates on these efforts, and let us know if you would like to contribute in any way. Testing, feedback, war stories, improving documentation, trying betas, and packaging are all helpful ways to contribute besides just writing code.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2015-03-24-pulp-2-6-0-is-available.md
`````markdown
---
date: 2015-03-24T20:55:50+00:00
id: 1143
title: Pulp 2.6.0 is available!
date: 2015-03-24T18:13:06+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1143
permalink: /2015/03/24/pulp-2-6-0-is-available/
categories:
  - Releases
---
<!-- more -->
The Pulp team is very happy to announce the release of Pulp 2.6.0!

**Highlights:**

  * Full support for managing docker repositories and images
  * Full support for RabbitMQ as a message broker
  * Many other improvements and bug fixes

**Release notes:**

  * [Pulp](https://pulp.readthedocs.org/en/latest/user-guide/release-notes/2.6.x.html "Pulp")
  * [Pulp-RPM](https://pulp-rpm.readthedocs.org/en/latest/user-guide/release-notes/2.6.x.html "Pulp-RPM")
  * [Pulp-Puppet](https://pulp-puppet.readthedocs.org/en/latest/user-guide/release-notes/2.6.x.html "Pulp-Puppet")

Thank you to everyone who helped test the betas and release candidates.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2015-05-21-use-docker-to-try-pulp.md
`````markdown
---
date: 2015-05-21T20:55:50+00:00
id: 1156
title: Use Docker to Try Pulp
date: 2015-05-21T17:20:21+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1156
permalink: /2015/05/21/use-docker-to-try-pulp/
categories:
  - Development
---
<!-- more -->
Using Docker, you can now easily and quickly stand up a demo deployment of Pulp. Excluding the time it takes Docker to download the images, it takes only a few seconds to have a brand new deployment running.

    
    $ wget https://raw.githubusercontent.com/pulp/packaging/docker/dockerfiles/centos/start.sh
    $ sudo source start.sh /path/to/lots/of/storage/
    

The [README](https://github.com/pulp/packaging/tree/docker/dockerfiles/centos) explains a variety of security and other concerns that prevent this containerization of pulp from being production-worthy. But it is a great way to try Pulp for the first time, try a new release, or experiment with new features in a throw-away environment.

I&#8217;ve been using these Docker images for a few months to do demos, reproduce bugs, and verify that each Pulp process can be run in isolation. They&#8217;ve been very stable and easy to work with, but let me know what your experience is.

The images themselves are built on CentOS 7. You have the best chance at a good experience if you run them on a distribution in the Red Hat, CentOS and Fedora &#8220;family&#8221;, but I have also had success running them on Ubuntu. There were a couple of hurdles to overcome (for example, for reasons I don&#8217;t understand, qpid&#8217;s persistent message store would not work), and I am interested to know if you encounter any problems running these images on a different distribution.

Just run the `start.sh` script mentioned in the README, and it will get everything configured and running. Then you can log in and start using it. The following shows an rpm sync, which under-the-hood makes use of a container running apache, and at least two containers running worker processes:

    
    $ sudo docker run -it --rm --link pulpapi:pulpapi pulp/admin-client bash
    [root@6610af58a341 /]# pulp-admin login -u admin
    Enter password:
    Successfully logged in. Session certificate will expire at May 19 02:50:16 2015 GMT.
    
    [root@6610af58a341 /]# pulp-admin rpm repo create --repo-id=zoo --feed=https://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/zoo/
    Successfully created repository [zoo]
    
    [root@6610af58a341 /]# pulp-admin rpm repo sync run --repo-id=zoo
    +----------------------------------------------------------------------+
    Synchronizing Repository [zoo]
    +----------------------------------------------------------------------+
    
    This command may be exited via ctrl+c without affecting the request.
    
    Downloading metadata...
    [|]
    ... completed
    
    Downloading repository content...
    [==================================================] 100%
    RPMs: 32/32 items
    Delta RPMs: 0/0 items
    
    ... completed
    
    <snip>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2015-12-09-syncing-and-publishing-suse-repositories-with-pulp.md
`````markdown
---
date: 2015-12-09T20:55:50+00:00
id: 1216
title: Syncing and publishing SUSE repositories with Pulp
date: 2015-12-09T14:06:07+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1216
permalink: /2015/12/09/syncing-and-publishing-suse-repositories-with-pulp/
categories:
  - Uncategorized
---
<!-- more -->
I was recently [looking](https://pulp.plan.io/issues/927) [into](https://pulp.plan.io/issues/928) Pulp&#8217;s ability to sync and publish SUSE repositories, including those from openSUSE, SLES 11, and (after a little bit of [work](https://pulp.plan.io/issues/1358)) SLES 12.

If you&#8217;re interested, I put together a quick demo of the features and their usage with Pulp. Enjoy!



[PULP & SUSE Repositories: Syncing and Publishing](https://vimeo.com/151559399) from [Sean Myers](https://vimeo.com/rhatsmyers) on [Vimeo](https://vimeo.com).

With the exception of SLES 12 support, these features are available in pulp now. SLES 12 support is Coming Soon™ in the next non-hotfix release of pulp 2.7.

If the video above fails to load, it is also available <a href="https://www.youtube.com/watch?v=Yzvv1OpEb5I" target="_blank">on youtube</a>.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-01-06-screencasting-with-open-tools.md
`````markdown
---
date: 2016-01-06T20:55:50+00:00
id: 1223
title: Screencasting with Open Tools
date: 2016-01-06T16:17:17+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1223
permalink: /2016/01/06/screencasting-with-open-tools/
enclosure:
  - |
    |
        https://people.redhat.com/~semyers/screencasts/screencast.webm
        165892557
        video/webm
        
categories:
  - Uncategorized
---
<!-- more -->
I [recently posted](http://www.pulpproject.org/2015/12/09/syncing-and-publishing-suse-repositories-with-pulp/) a screencast about using Pulp to synchronize openSUSE and SLES repositories, which sparked interest in the tools I used to create the screencast. This video (the Screencast Screencast™) gives a brief rundown of those tools, with particular focus on using my current video editor of choice, OpenShot.

<video controls="controls" width="848" height="477"><source src="https://people.redhat.com/~semyers/screencasts/screencast.webm" type="video/webm" /></video>

If the video above fails to load, it is also available <a href="https://www.youtube.com/watch?v=7HN1l1s9lTk" target="_blank">on youtube</a>.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-03-07-how-to-safely-test-your-data-for-2-8-upgradability.md
`````markdown
---
date: 2016-03-07T20:55:50+00:00
id: 1237
title: How to Safely Test Your Data for 2.8 Upgradability
date: 2016-03-07T04:09:24+00:00
author: Michael Hrivnak
layout: post
guid: http://www.pulpproject.org/?p=1237
permalink: /2016/03/07/how-to-safely-test-your-data-for-2-8-upgradability/
categories:
  - Uncategorized
---
<!-- more -->
Help us help you! The Pulp team added stronger data validation in 2.8. To ensure that everyone has a smooth upgrade experience, we want your help testing your data in advance. In case there is any data &#8220;in the wild&#8221; that does not meet the stronger validation requirements, we want to know now so we can adjust the validation before release.

All we need you to do is use `mongodump` to export a copy of your data, and then run the [small script that we are providing](https://github.com/pulp/pulp/tree/master/playpen/mongoengine).

See the [README](https://raw.githubusercontent.com/pulp/pulp/master/playpen/mongoengine/README) for full details. The script will start two docker images; one running mongodb, and the other to run the upgrade test itself. The test will automatically load your data into the mongodb container, run the 2.8 migrations, and then attempt to read and save each record. At the end, both containers are cleaned up, and you&#8217;re left with a log of what happened.

Please let us know that you ran the tests, and especially if you encountered any problems. Leave a comment here, [send an email](https://www.redhat.com/mailman/listinfo/pulp-list), or [file a bug report](https://pulp.plan.io/projects/pulp/issues/new).

We are hoping to release 2.8.0 very soon, so your prompt feedback is appreciated. Thank you in advance for your help!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-04-05-pulp-2-8-1-has-been-released.md
`````markdown
---
date: 2016-04-05T20:55:50+00:00
id: 1251
title: Pulp 2.8.1 has been released!
date: 2016-04-05T20:39:44+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1251
permalink: /2016/04/05/pulp-2-8-1-has-been-released/
categories:
  - Uncategorized
---
<!-- more -->
Pulp 2.8.1 has been published to the stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.8/>

## Changes

The following Redmine (pulp.plan.io) issues are addressed in 2.8.1:

  * Pulp 
      * 1734 The Pulp streamer logs a traceback when a ConnectionError occurs.
      * 1764 SELinux denial on Celery attempting to read resolv.conf
      * 1737 The checksum/checksum_type is not being included in the lazy catalog
      * 1735 Downloading the CentOS base repository fails with lazy and &#8211;verify-all
      * 1776 sync_complete response has changed
  * Puppet Support 
      * 1607 Puppet install distributor fails when deleting repository if not published
  * RPM Support 
      * 1138 Install applicable errata consumer task does not report kernel packages were updated
      * 1366 Advisory package list doesn&#8217;t match packages in the repository
      * 1548 published errata contain packages not in repo
      * 1789 Sync fills up <i class="moz-txt-slash"><span class="moz-txt-tag">/</span>var/cache/pulp<span class="moz-txt-tag">/</span></i> with rpms

More details regarding these issues can be found in Redmine at the following URL: <http://bit.ly/1LHtwWp>{.moz-txt-link-freetext}
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-04-06-pulp-2-8-2-has-been-released.md
`````markdown
---
date: 2016-04-06T20:55:50+00:00
id: 1254
title: Pulp 2.8.2 has been released!
date: 2016-04-06T21:39:58+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1254
permalink: /2016/04/06/pulp-2-8-2-has-been-released/
categories:
  - Uncategorized
---
<!-- more -->
Pulp 2.8.2 has been published to the stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.8/>

## Changes

Pulp 2.8.2 addresses a security vulnerability that was found after the
  
announcement of the 2.8.1 release candidate. More information about this
  
vulnerability, including upgrade instructions, can be found at
  
the following address:

<http://www.openwall.com/lists/oss-security/2016/04/06/3>

Satellite users are unaffected by this vulnerability:

<https://access.redhat.com/security/cve/cve-2016-3095>

(It&#8217;s currently in the reserved state, but should be opened up shortly.)

From the access.redhat.com CVE page:

&#8220;This issue did not affect the versions of pulp as shipped with Red Hat
  
Satellite 6.x and Red Hat Update Infrastructure 2.x as they did not include
  
support for pulp-gen-ca-certificate.&#8221;

## Notes

This was discovered after the 2.8.1 release candidate was published, so
  
the fastest way for us to get this out the door was a rapid-fire hotfix
  
release. This is a unique situation; two releases of the same pulp minor
  
version in two days is exceptional and should not become the norm.</pre>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-05-05-langpacks-support-added-to-pulp-2-9-0.md
`````markdown
---
date: 2016-05-05T20:55:50+00:00
id: 1258
title: Langpacks Support added to Pulp 2.9.0
date: 2016-05-05T19:07:26+00:00
author: Brian Bouterse
layout: post
guid: http://www.pulpproject.org/?p=1258
permalink: /2016/05/05/langpacks-support-added-to-pulp-2-9-0/
categories:
  - Uncategorized
---
<!-- more -->
Pulp 2.9.0 is still in development, but since [langpacks support](https://pulp.plan.io/issues/1367) has been merged, here is a video highlighting this up-and-coming feature.

Langpacks are metadata snippets for RPM repos that allow yum to identify which additional package will provide a specific language support for a package of interest. For example, package gimp-help could have packages gimp-help-en for English or gimp-help-fr for French. Yum has the ability to fetch the langpack for your specific language, but it needs help from the langpacks metadata stored in the repository&#8217;s comps.xml file. Pulp 2.9 will be able to manage that extra metadata in RPM repositories.

Here is a langpacks example snippet:

> <div class="line">
>   <span class="html-tag"><langpacks></span>
> </div>
> 
> <div class="collapsible-content">
>   <div class="line">
>     <span class="html-tag"><match<span class="html-attribute"> <span class="html-attribute-name">install</span>=&#8221;<span class="html-attribute-value">firefox-langpack-%s</span>&#8220;</span><span class="html-attribute"> <span class="html-attribute-name">name</span>=&#8221;<span class="html-attribute-value">firefox</span>&#8220;</span>/></span>
>   </div>
>   
>   <div class="line">
>     <span class="html-tag"><match<span class="html-attribute"> <span class="html-attribute-name">install</span>=&#8221;<span class="html-attribute-value">gimp-help-%s</span>&#8220;</span><span class="html-attribute"> <span class="html-attribute-name">name</span>=&#8221;<span class="html-attribute-value">gimp-help</span>&#8220;</span>/></span>
>   </div>
>   
>   <div class="line">
>     <span class="html-tag"><match<span class="html-attribute"> <span class="html-attribute-name">install</span>=&#8221;<span class="html-attribute-value">libreoffice-langpack-%s</span>&#8220;</span><span class="html-attribute"> <span class="html-attribute-name">name</span>=&#8221;<span class="html-attribute-value">libreoffice-core</span>&#8220;</span>/></span>
>   </div>
>   
>   <div class="line">
>     <span class="html-tag"><match<span class="html-attribute"> <span class="html-attribute-name">install</span>=&#8221;<span class="html-attribute-value">man-pages-%s</span>&#8220;</span><span class="html-attribute"> <span class="html-attribute-name">name</span>=&#8221;<span class="html-attribute-value">man-pages</span>&#8220;</span>/></span>
>   </div>
>   
>   <div class="line">
>     <span class="html-tag"><match<span class="html-attribute"> <span class="html-attribute-name">install</span>=&#8221;<span class="html-attribute-value">mythes-%s</span>&#8220;</span><span class="html-attribute"> <span class="html-attribute-name">name</span>=&#8221;<span class="html-attribute-value">mythes</span>&#8220;</span>/></span>
>   </div>
> </div>
> 
> <div class="line">
>   <span class="html-tag"></langpacks></span>
> </div>

&nbsp;

See the video below for more info on Pulp&#8217;s ability to maintain and manage langpacks on your RPM repositories.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-05-17-pulp-2-8-3-released-security-bug-fixes.md
`````markdown
---
date: 2016-05-17T20:55:50+00:00
id: 1273
title: 'Pulp 2.8.3 Released: Security &#038; Bug fixes'
date: 2016-05-17T19:03:53+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1273
permalink: /2016/05/17/pulp-2-8-3-released-security-bug-fixes/
tags: [release]
categories:
  - Uncategorized
---
<!-- more -->
Pulp has been updated, along with the Puppet (pulp\_puppet) and RPM (pulp\_rpm) plugins.

This release also includes updates for OSTree plugin (pulp_ostree) version
  
1.1.1, the Docker plugin (pulp_docker) version 2.0.1, and the Python plugin
  
(pulp_python) version 1.1.1.

The release is available in the pulp beta repository for 2.8:
  
 <https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.8/>

Migrations will need to be run for this release. See the Upgrade Instructions
  
below for more details.

## Security Issues Addressed

**CVE-2016-3111** (Low Impact):
  
pulp.spec generates its RSA keys for message signing insecurely
  
 <https://pulp.plan.io/issues/1837>

**CVE-2016-3112** (Moderate Impact):
  
Pulp consumer private keys are world-readable
  
 <https://pulp.plan.io/issues/1834>

**CVE-2016-3107** (Moderate Impact):
  
Node certificate containing private key stored in world-readable file
  
 <https://pulp.plan.io/issues/1833>

**CVE-2016-3108** (Moderate Impact):
  
Insecure temporary file used when generating certificate for Pulp Nodes
  
 <https://pulp.plan.io/issues/1830>

**CVE-2016-3106** (Low Impact):
  
Insecure creation of temporary directory when generating new CA key
  
 <https://pulp.plan.io/issues/1827>

Additionally, **CVE-2013-7450** was announced during this release cycle, even
  
though it was fixed in Pulp 2.3.0. Users who have upgraded from Pulp < 2.3.0
  
may still be vulnerable, action may be required (see below).
  
 <https://bugzilla.redhat.com/show_bug.cgi?id=1003326>

See the upgrade instructions below for more information on addressing these
  
vulnerabilities.

## Known Issues

Changes to the squid package in fedora 22 are causing selinux denials to prevent squid
  
from starting on systems using pulp&#8217;s lazy download features. At this time, all other
  
platforms appear to be working normally: only fedora 22 is affected.

This issue is being tracked in our tracker. Links to upstream issues and workarounds
  
can be found there:

<https://pulp.plan.io/issues/1904>

## Issues Addressed

Docker Support

  * 1818 Add migration &#8211; content units to standard storage path.

Nectar

  * 1820 Fix checking for config.proxy_username

OSTree Support

  * 1106 relative_path should be checked for url collision

Pulp

  * 1576 content type mongo id searches not working
  * 1764 SELinux denial on Celery attempting to read resolv.conf
  * 1771 requests or urllib3 can&#8217;t read a file which causes Nectar to fail mysteriously
  * 1801 Pulp celery\_beat and resource\_manager are running, but logs say they are not running
  * 1802 Pulp 2.8 client no longer supports sha1 RPM checksum type
  * 1809 python 2.6 incompatibility during set_importer
  * 1747 Import upload task has unexpected/missing information on error
  * 1784 regression: &#8220;pulp-admin rpm repo search&#8221; with filters does not work as expected
  * 1834 CVE-2016-3112: Pulp consumer private keys are world-readable
  * 1837 CVE-2016-3111: pulp.spec generates its RSA keys for message signing insecurely
  * 1791 After upgrading from 2.7.1 to pulp 2.8.0 getting 403 error&#8217;s on all my Pulp repo&#8217;s.
  * 1794 A Pulp unit test is failing to find a certificate to be valid
  * 1824 iso repo publish fails for file in subdirectories
  * 1827 CVE-2016-3106: Insecure creation of temporary directory when generating new CA key
  * 1830 CVE-2016-3108: Insecure temporary file used when generating certificate for Pulp Nodes
  * 1833 CVE-2016-3107: Node certificate containing private key stored in world-readable file
  * 1601 Migrate /var/lib/pulp/content to new 2.8 storage paths.
  * 1815 Create a common 2.8 storage path migration to be used by plugins

Puppet Support

  * 1780 PLP0000: Update failed (The dotted field &#8216;thomasmckay-rsync-0.4.1-thomasmckay&#8217;
  * 1817 Add migration &#8211; content units to standard storage path.

Python Support

  * 1855 Upload broken
  * 1819 Add migration &#8211; content units to standard storage path.

RPM Support

  * 1869 Resynchronizing rhel repos seems to be failing after upgrade
  * 1768 Unable to sync RHEL 5 repositories with a distribution
  * 1792 recursive and depsolving unit copy results in PulpExecutionException
  * 1843 Pulp publishes invalid PULP_DISTRIBUTION.xml metadata
  * 1778 Switching a repository to immediate from on_demand doesn&#8217;t download its packages
  * 1828 pulp doesn&#8217;t sync reference title correctly from errata
  * 1835 export fails when units are not downloaded
  * 1782 None in generated XML for unit with no &#8216;reboot_suggested&#8217;
  * 1808 exporting a sufficiently large repo with &#8216;on_demand&#8217; policy results in BSON error
  * 1812 Comps.xml upload succeeds but units are not associated to the repo.
  * 1813 Handle duplicate key error in comps.xml upload
  * 1856 publishing kickstart repo fails on EL6
  * 1816 Add migration &#8211; content units to standard storage path.

Details on these issues can be found [in Redmine](https://pulp.plan.io/issues?c[]=subject&f[]=status_id&f[]=cf_4&f[]=&group_by=project&op[cf_4]=%3D&op[status_id]=%3D&per_page=50&set_filter=1&utf8=%E2%9C%93&v[cf_4][]=2.8.3&v[status_id][]=1&v[status_id][]=2&v[status_id][]=3&v[status_id][]=4&v[status_id][]=5&v[status_id][]=6).

## Upgrade instructions

Some of the CVEs require user interaction to remedy. Begin by upgrading to
  
Pulp 2.8.3, and running migrations:

<pre style="padding-left: 30px;">$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat goferd</pre>

### CVE-2016-3112 (Part I)

The client certificate for consumers
  
(/etc/pki/pulp/consumer/consumer-cert.pem) was installed world-readable. This
  
issue has been fixed for new certificates issued to consumers, but upgrading
  
to 2.8.3 does not modify the permissions of old certificates. It is
  
recommended that users regenerate the certificates by unregistering and
  
re-registering all consumers. However, the consumers cannot be re-registered
  
until CVE-2013-7450, CVE-2016-3095, CVE-2016-3106, and CVE-2016-3111 have
  
been addressed below. Thus, start by unregistering each of your consumers (we
  
will return to this CVE later to re-register them):

<pre style="padding-left: 30px;">$ sudo pulp-consumer unregister</pre>

### CVE-2013-7450, CVE-2016-3095, and CVE-2016-3106

There are two reasons that you may wish to regenerate Pulp&#8217;s internal
  
certificate authority key and certificate. First, if your Pulp installation
  
started off as a version lower than 2.3.0 and you are still using the default
  
CA certificate and key that was distributed with those versions of Pulp, then
  
you are still vulnerable to CVE-2013-7450 and it is crucial that you generate
  
a new unique CA.

Additionally, CVE-2016-3095 and CVE-2016-3106 made it possible for local
  
attackers to read the CA key during generation (which happens during the
  
initial installation of Pulp or any time an admin ran
  
pulp-gen-ca-certificate). If you are concerned that a local user may have
  
read that CA key during the brief window that it was visible it is
  
recommended that you regenerate the key and cert.

To regenerate the certificate, you should remove the old one and then you may
  
use the provided utility:

<pre style="padding-left: 30px;"># First remove the old files so that the new files get the correct SELinux context.
$ sudo rm /etc/pki/pulp/ca.*
$ sudo pulp-gen-ca-certificate</pre>

If you choose not to perform the CA regeneration, you may wish to apply the
  
correct SELinux type to your existing CA files as versions of Pulp < 2.8.3
  
generated this file with an incorrect SELinux type. You don&#8217;t need to do this
  
if you removed the old file and regenerated it with pulp-gen-ca-certificate.
  
You can run restorecon recursively on the /etc/pki/pulp folder to fix the
  
SELinux label on your existing CA certificate:

<pre style="padding-left: 30px;"># You only need to do this if you didn't regenerate the CA above.
$ sudo restorecon -R /etc/pki/pulp</pre>

### CVE-2016-3107 and CVE-2016-3108

For Nodes users, the /etc/pki/pulp/nodes/node.crt file was installed
  
world-readable. Users are recommended to remove this file and regenerate it
  
by running pulp-gen-nodes-certificate:

<pre style="padding-left: 30px;"># It is important to remove the file so that the new file has the correct permissions.
$ sudo rm /etc/pki/pulp/nodes/node.crt
$ sudo pulp-gen-nodes-certificate</pre>

### CVE-2016-3111

Both the RSA key pair for the Pulp server and RSA key pair for each Pulp
  
consumer was generated during installation in an insecure directory. This
  
vulnerability allowed a local attacker to read the private key portion of the
  
key pair. These keys are used for message authentication between the Pulp
  
server and the Pulp consumers. If you are concerned that a local attacker was
  
able to read these keys, you can regenerate them. We do not ship a script to
  
perform this, but the process is straight-forward. For the Pulp server, do
  
the following as root:

<pre style="padding-left: 30px;">$ cd /etc/pki/pulp/
$ rm rsa.key rsa_pub.key
$ umask 077
$ openssl genrsa -out rsa.key # should be at least 2048
$ openssl rsa -in rsa.key -pubout &gt; rsa_pub.key
$ chgrp apache rsa.key rsa_pub.key
$ chmod 640 rsa.key # Apache must be able to read the private key
$ chmod 644 rsa_pub.key # The public key is world-readable as it is served via Apache</pre>

The Pulp consumer key is similar:

<pre style="padding-left: 30px;">$ cd /etc/pki/pulp/consumer/
$ rm rsa.key rsa_pub.key
$ umask 077
$ openssl genrsa -out rsa.key # should be at least 2048
$ openssl rsa -in rsa.key -pubout &gt; rsa_pub.key</pre>

### CVE-2016-3112 (Part II)

Now that we have regenerated the server&#8217;s CA certificate, we can finish
  
re-registering each consumer to Pulp:

<pre style="padding-left: 30px;">$ sudo pulp-consumer -u register --consumer-id=</pre>

### Restart

Pulp services are now ready to be restarted again to pick up the new
  
certificates. For systemd users:

<pre style="padding-left: 30px;">$ sudo systemctl restart httpd pulp_workers pulp_resource_manager pulp_celerybeat goferd</pre>

### Troubleshooting

Regenerating the CA certificate will invalidate all client certificates that
  
were issued by the old CA. All users will need to login to Pulp again to
  
obtain a new client certificate. If you forget a step, you may see one of the
  
following error messages:

&#8220;pulp.server.managers.auth.authentication:ERROR: Auth certificate with CN
  
[admin:admin:57155b83e779896cb3d634a4] is signed by a foreign CA&#8221; (or
  
similar) in the server log can indicate that httpd has not been restarted
  
since the CA was replaced.
  
&#8220;The specified user does not have permission to execute the given
  
command&#8221; from pulp-admin can mean that the user has not logged in since the
  
new CA was present, or that httpd has not been restarted since the
  
certificate was replaced. More generally, this error message can also mean
  
that the user is not authorized to perform the given action.
  
&#8220;An error occurred attempting to contact the server. More information may
  
be found using the -v flag.&#8221; may be output by pulp-admin if you have
  
restarted httpd but have not logged in again to get a new CA certificate. If
  
you provide that -v flag and see &#8220;ConnectionException: (None, &#8216;tlsv1 alert
  
decrypt error&#8217;, None)&#8221;, this is likely the issue.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-06-06-charting-pulps-issues-stories-etc.md
`````markdown
---
date: 2016-06-06T20:55:50+00:00
id: 1287
title: 'Charting Pulp&#8217;s Issues, Stories, etc'
date: 2016-06-06T20:21:02+00:00
author: Brian Bouterse
layout: post
guid: http://www.pulpproject.org/?p=1287
permalink: /2016/06/06/charting-pulps-issues-stories-etc/
categories:
  - Uncategorized
---
<!-- more -->
Redmine&#8217;s charting capabilites make it easy to visualize bug counts, story counts, and other metrics on our community issue tracker at [pulp.plan.io](https://pulp.plan.io/). Below is a video showing off the charting capabilities and some simple interpretation about what these charts mean. Here is a [link to the charting area](https://pulp.plan.io/agile/charts) so you can check it out for yourself.



[Pulp Community Issue Charts](https://vimeo.com/169586452) from [Brian Bouterse](https://vimeo.com/user51881283) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-06-21-new-documentation-site.md
`````markdown
---
date: 2016-06-21T20:55:50+00:00
id: 1294
title: New Documentation Site
date: 2016-06-21T14:21:37+00:00
author: Brian Bouterse
layout: post
guid: http://www.pulpproject.org/?p=1294
permalink: /2016/06/21/new-documentation-site/
categories:
  - Uncategorized
---
<!-- more -->
The Pulp team is happy to announce the availability of a new documentation site for Pulp and its plugins: <https://docs.pulpproject.org/>

**Improvements**

  * Finding the documentation you need is easier with everything on one site. Previously the Pulp platform and plugin docs each lived on its own site.
  * GA, RC, Beta, and Nightly documentation is now available.
  * Trimmed down the top-level content allows new users to find their way easier.

**Old Sites**

The readthedocs.com (RTD) sites will go offline on June 27th. Unfortunately RTD does not provide site-wide redirection so we are relying on search engines to make our new site&#8217;s content findable. Many thanks to ReadTheDocs for hosting our docs for so long.

**Content and URLs**

The new site contains 2.8+ documentation.

GA releases for x.y will live at:   https://docs.pulpproject.org/en/x.y/

The current, stable GA release will also live at https://docs.pulpproject.org/

A given x.y version could have either a Beta or an RC but not both, so those are hosted at the same place:  https://docs.pulpproject.org/en/x.y/testing/

Nightlies for a given x.y line are available at:  https://docs.pulpproject.org/en/x.y/nightly/

**Legacy Docs**

Archived versions of 2.7 docs are available here: https://docs.pulpproject.org/en/2.7/
  
Archived versions of 2.6 docs are available here: https://docs.pulpproject.org/en/2.6/

Pre 2.6 docs are available via source.

**How It Works?**

Platform and each plugin have their own Sphinx project, which can continue to be built, standalone on their own. The docs source lives in the same repos as before; for example, the [pulp_rpm source docs live here](https://github.com/pulp/pulp_rpm/tree/master/docs) and the [pulp_python source docs live here](https://github.com/pulp/pulp_python/tree/master/docs). The Pulp Jenkins infrastructure uses the [platform Sphinx project](https://github.com/pulp/pulp/tree/master/docs) as the single sphinx project to build all documentation. The Jenkins job clones all repos and creates symlinks which cause the plugin documentation source to become discovered by the platform Sphinx project at build time on Jenkins. The Jenkins job adds some [additional content is added](https://github.com/pulp/pulp-ci/tree/master/ci/docs) to provide more structure for the top level landing pages. The Jenkins job is managed by a [Jenkins Job builder template](https://github.com/pulp/pulp-ci/blob/master/ci/jobs/docs.yaml). By default the jobs build the active branches each night, but it can also be triggered manually.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-01-pulp-smash-introduction.md
`````markdown
---
date: 2016-07-01T20:55:50+00:00
id: 1321
title: Pulp Smash Introduction
date: 2016-07-01T14:24:51+00:00
author: Ichimonji10
layout: post
guid: http://www.pulpproject.org/?p=1321
permalink: /2016/07/01/pulp-smash-introduction/
categories:
  - Uncategorized
---
<!-- more -->
[Pulp Smash](http://pulp-smash.readthedocs.io/en/latest/index.html) is a functional test suite for Pulp. It&#8217;s used by the Pulp developers and Pulp QE team on a daily basis. It&#8217;s implemented as a GPL licensed pure Python library, and getting started is as simple as installing Python and executing the following:

    pip install pulp-smash
    python -m pulp_smash  # follow the instructions
    

The video below is an introduction to Pulp Smash. It demonstrates how to install Pulp, demonstrates how to install, configure and run Pulp Smash, shows where to find more information, and covers some additional topics. It&#8217;s designed to be viewed full-screen.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-05-getting-started-on-pulp-and-pulp-smash-a-pulpqe-intern-summary.md
`````markdown
---
date: 2016-07-05T20:55:50+00:00
id: 1328
title: 'Getting Started on Pulp and Pulp Smash &#8211; A PulpQE Intern Summary'
date: 2016-07-05T21:31:44+00:00
author: Chongrui Zhang
layout: post
guid: http://www.pulpproject.org/?p=1328
permalink: /2016/07/05/getting-started-on-pulp-and-pulp-smash-a-pulpqe-intern-summary/
categories:
  - Uncategorized
tags:
  - pulpqe-intern
---
<!-- more -->
# Getting started with Pulp and Pulp-smash

<p dir="ltr">
  This summer, I have joined the PulpQE team in Red Hat as a summer internship. My main job is to contribute automated CLI/API-based tests through <a href="https://github.com/PulpQE/pulp-smash">Pulp-Smash</a>, a test suite for Pulp. Through the summer, I’d like to record what I have learned from a perspective of “newbie”, thus providing a fresh idea to young developers like me for learning Pulp and Pulp-Smash. This post will cover how I install pulp and pulp-smash in a step-by-step process.
</p>

# Install the development environment

<p dir="ltr">
  The very first step is to install Pulp on my host. I’m using Fedora 23, and I want to setup a virtual machine for Pulp to avoid messing up my local environment. It’s great that the Pulp team has already provided a Vagrantfile that can “automatically deploy a virtual machine on your host with a Pulp development environment configured”. The reference of the Developer Setup Documentation is here on the official documentation:
</p>

<p dir="ltr">
  <a href="http://docs.pulpproject.org/dev-guide/contributing/dev_setup.html">http://docs.pulpproject.org/dev-guide/contributing/dev_setup.html</a>
</p>

<p dir="ltr">
  Here I just extracted out the commands from that doc as my notes for installation:
</p>

  1. <span dir="ltr">Install vagrant, ansible, and nfs-utils. NFS will be used to share your code directory with the deployed virtual machine:<br /> </span></p> 
    > <span dir="ltr">$ sudo dnf install &#8211;best &#8211;allowerasing ansible nfs-utils vagrant-libvirt</span>

  2. <span dir="ltr">Grant the nfsnobody user rx access to the folder to check out code with, especially in Fedora; since $HOME typically does not allow such access to other users. So in the future, the working directory will become $HOME/devel or similar in the vm, which is sharable to my local filesystem. For example, the path to my folder of Pulp is /home/<user>/Documents/pulp, so in vm it is actually /home/vagrant/devel/pulp. This is really nice and convenient for development.<br /> </span></p> 
    > <span dir="ltr">$ setfacl -m user:nfsnobody:r-x $HOME</span><span dir="ltr"><br /> </span>

  3. <span dir="ltr">Start and enable the nfs-server service:<br /> </span></p> 
    > <span dir="ltr">$ sudo systemctl enable nfs-server && sudo systemctl start nfs-server</span><span dir="ltr"><br /> </span>

  4. <span dir="ltr">Allow NFS services through your firewall:<br /> </span></p> 
    > <span dir="ltr">$ sudo firewall-cmd &#8211;permanent &#8211;add-service=nfs</span><span dir="ltr"><br /> $ sudo firewall-cmd &#8211;permanent &#8211;add-service=rpc-bind<br /> $ sudo firewall-cmd &#8211;permanent &#8211;add-service=mountd<br /> $ sudo firewall-cmd &#8211;reload</span>

<ol start="5">
  <li>
    <span dir="ltr">Check out the Pulp code<br /> </span></p> <blockquote>
      <p>
        <span dir="ltr">$ cd $HOME/devel</span><span dir="ltr"><br /> $ git clone <a href="mailto:git@github.com">git@github.com</a>:pulp/pulp.git</span>
      </p>
    </blockquote>
  </li>
  
  <li>
    <span dir="ltr">Change the Vagrantfile in the pulp directory<br /> The Pulp project provides an example Vagrantfile that you can use as a starting point by copying it. Change<a href="https://github.com/pulp/pulp/blob/master/Vagrantfile.example#L40"> this line</a> to something like this:<br /> </span></p> <blockquote>
      <p>
        <span dir="ltr">config.vm.provision &#8220;shell&#8221;, inline: &#8220;sudo dnf upgrade -y || sudo dnf upgrade -y&#8221;</span><span dir="ltr"><br /> </span>
      </p>
    </blockquote>
  </li>
  
  <li>
    <span dir="ltr">Begin provisioning your Vagrant environment. We will finish by running vagrant reload. This allows the machine to reboot after provisioning<br /> </span></p> <blockquote>
      <p>
        <span dir="ltr">$ cd pulp</span><span dir="ltr"><br /> $ cp Vagrantfile.example Vagrantfile<br /> $ vagrant up<br /> $ vagrant reload<br /> # Reboot the machine at the end to apply kernel updates</span>
      </p>
    </blockquote>
  </li>
</ol>

<ol start="8">
  <li>
    ssh into your Vagrant environment:<br /> <blockquote>
      <p>
        $ vagrant ssh
      </p>
    </blockquote>
  </li>
  
  <li>
    <span dir="ltr">Verify the installation through the status of Pulp admin and Pulp API:<br /> </span></p> <blockquote>
      <p>
        <span dir="ltr">$ pulp-admin status<br /> +&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+<br /> Status of the server<br /> +&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+</span>
      </p>
      
      <p>
        Api Version:           2<br /> Database Connection:<br /> Connected: True<br /> ……<br /> Messaging Connection:<br /> Connected: True<br /> Versions:<br /> Platform Version: 2.9.0b1  # Note the Pulp’s version here.
      </p>
    </blockquote>
    
    <blockquote>
      <p>
        <span dir="ltr">$ phttp <a href="/external-link.jspa?url=https%3A%2F%2Fdev%2Fpulp%2Fapi%2Fv2%2Fstatus%2F" target="_blank" rel="nofollow">https://dev/pulp/api/v2/status/</a></span>
      </p>
    </blockquote>
  </li>
  
  <li>
    <span dir="ltr">You can migrate the database after a fresh install:<br /> </span></p> <blockquote>
      <p>
        <span dir="ltr">$ sudo -u apache pulp-manage-db</span>
      </p>
    </blockquote>
  </li>
  
  <li>
    The Pulp development environment also provides a `pclean` to restore database. But it will destroy all user data. You can refer to the man page of it through phelp. It will also provide several other useful commands such as phttp, pjournal, prestart, etc.
  </li>
</ol>

<p dir="ltr">
  And now you have a running deployed Pulp development machine! Pretty easy and convenient to deploy Pulp in such an automatic way. Please take note that every time you halt the vm you need to `vagrant up` again. So I just played around in the Pulp with the help of official docs. And some of the excerpts will be listed in the next section.
</p>

* * *

## Start Pulp and Related Services manually.

<p dir="ltr">
  Several services can be accessed through systemctl manually, according to the developer’s setup doc:
</p>

> <p dir="ltr">
>   Start the broker:          sudo systemctl start qpidd
> </p>
> 
> <p dir="ltr">
>   Start the agent:           sudo systemctl start goferd
> </p>
> 
> <p dir="ltr">
>   Start the database:        sudo systemctl start mongod
> </p>
> 
> <p dir="ltr">
>   Synchronize db:            sudo -u apache pulp-manage-db
> </p>
> 
> <p dir="ltr">
>   Start the server:          sudo systemctl start httpd
> </p>
> 
> <p dir="ltr">
>   Start pulp workers:        sudo systemctl start pulp_workers;
> </p>
> 
> <p dir="ltr">
>   Start pulp celerybeat:     sudo systemctl start pulp_celerybeat;
> </p>
> 
> <p dir="ltr">
>   Start pulp resource manager: sudo systemctl start pulp_resource_manager
> </p>

<p dir="ltr">
  Well, are these pulp services’ names the major components for Pulp? Yes, and here’s a detailed introduction to some the components listed: <a href="https://docs.pulpproject.org/user-guide/server.html">https://docs.pulpproject.org/user-guide/server.html</a>
</p>

## How to Install a plugin

<p dir="ltr">
  Pulp has a feature called Pulp Platform, which can manage content/software packages extensible to nearly any type of digital content. Here’s the excerpt from <a href="http://docs.pulpproject.org/user-guide/introduction.html#plugins">here</a>:
</p>

<p dir="ltr">
  Pulp manages content, and its original focus was software packages such as RPMs and Puppet modules. The core features of Pulp, such as syncing and publishing repositories, have been implemented in a generic way that can be extended by plugins to support specific content types. We refer to the core implementation as the Pulp Platform. With this flexible design, Pulp can be extended to manage nearly any type of digital content.
</p>

<p dir="ltr">
  And here’s an example of installing pulp-rpm. At least one plugin must be installed for every pulp instance.
</p>

> <p dir="ltr">
>   $ git clone <a href="/external-link.jspa?url=https%3A%2F%2Fgithub.com%2Fpulp%2Fpulp_rpm.git" target="_blank" rel="nofollow">https://github.com/pulp/pulp_rpm.git</a><br /> $ cd pulp_rpm<br /> $ sudo yum install pulp-rpm-plugins<br /> $ sudo ./manage_setup_pys.sh develop<br /> $ sudo python ./pulp-dev.py -I<br /> $ sudo -u apache pulp-manage-db
> </p>

## Issues after installing pulp-rpm plugin

<p dir="ltr">
  I encountered an error “The importer type yum_importer does not exist” after the fresh install of pulp.
</p>

<p dir="ltr">
  To solve this, I tried to execute a pclean to restore the database. However, another error came up as “ImportError: No module named createrepo”&#8230;
</p>

<p dir="ltr">
  Finally I got a clue from <a href="https://www.redhat.com/archives/pulp-list/2015-June/msg00013.html">https://www.redhat.com/archives/pulp-list/2015-June/msg00013.html</a>. It looks like there’s a missing yum package on the Vagrant’s system. After installing the package through `sudo yum install pulp-rpm-plugins`, everything is ok now. I have also added this command into the above code snippet. Please change to pulp-puppet-plugins in order to install pulp-puppet plugin.
</p>

<p dir="ltr">
  You can test the repo’s functionality manually through this snippet FYI:
</p>

> <p dir="ltr">
>   $ pulp-admin -u admin -p admin rpm repo create &#8211;repo-id repo1 &#8211;relative-url zoo &#8211;feed \<br /> <a href="/external-link.jspa?url=http%3A%2F%2Frepos.fedorapeople.org%2Frepos%2Fpulp%2Fpulp%2Fdemo_repos%2Frepo1" target="_blank" rel="nofollow">http://repos.fedorapeople.org/repos/pulp/pulp/demo_repos/repo1</a><br /> $ pulp-admin -u admin -p admin rpm repo sync run &#8211;repo-id repo1<br /> $ pulp-admin -u admin -p admin rpm repo delete &#8211;repo-id repo1
> </p>

<p dir="ltr">
  Note that a newer version of pclean automatically creates a repository called zoo with the same feed. Please check that with `pulp-admin repo list`. Now that I have successfully deployed a Pulp on my vm, it is time to further install pulp-smash. The next section of this blog covers how to configure the pulp-smash after a fresh installation of Pulp under the Vagrant environment.
</p>

* * *

&nbsp;

# Introduction to Pulp Smash

<p dir="ltr">
  Before installation, I will briefly give an introduction to Pulp Smash. All tests in Pulp Smash are automated and suited for use in a continuous integration environment, providing both CLI- and API-based test cases for the Pulp platform. It can thus talk to multiple systems via their API and CLI, and it can stop and start system services, drop databases, delete files from their filesystems, and so on.
</p>

<p dir="ltr">
  According to the comments <a href="https://github.com/PulpQE/pulp-smash/issues/311#issuecomment-227759897">here</a>, users can tell Pulp Smash what system(s) are available via (by default) a `~/.config/pulp_smash/settings.json` file, and Pulp Smash can choose which tests to run based on what&#8217;s available via `python -m unittest2 pulp_smash.tests`. Pulp Smash can be executed on any types of target systems, such as VMs backed by libvirt, virtualbox, vmware, xen, etc, or docker containers, or bare-metal systems, or the local system, or even a mixture of these. This imparts a great deal of flexibility.
</p>

# Install the Pulp-Smash on the VM

## Step 1. Check out pulp-smash from github and install required packages.

> <p dir="ltr">
>   $ sudo pip install -r requirements.txt -r requirements-dev.txt<br /> $ # After fresh install of pulp-smash, run the following command to see guidance:<br /> $ python -m pulp_smash
> </p>

## Step 2. Create a configuration file in the vm environment.

<p dir="ltr">
  The configuration file at /home/vagrant/.config/pulp_smash/settings.json will be automatically created after the execution of `python -m pulp_smash`. The configuration file should have this structure:
</p>

> <p dir="ltr">
>   {
> </p>
> 
> <p dir="ltr">
>       &#8220;pulp&#8221;: {
> </p>
> 
> <p dir="ltr">
>           &#8220;base_url&#8221;: &#8220;<a href="/external-link.jspa?url=https%3A%2F%2Fpulp.example.com" target="_blank" rel="nofollow">https://pulp.example.com</a>&#8220;,
> </p>
> 
> <p dir="ltr">
>           &#8220;auth&#8221;: [&#8220;username&#8221;, &#8220;password&#8221;],
> </p>
> 
> <p dir="ltr">
>           &#8220;verify&#8221;: true,
> </p>
> 
> <p dir="ltr">
>           &#8220;version&#8221;: &#8220;2.7.5&#8221;,
> </p>
> 
> <p dir="ltr">
>           &#8220;cli_transport&#8221;: &#8220;local&#8221;
> </p>
> 
> <p dir="ltr">
>       },
> </p>
> 
> <p dir="ltr">
>       &#8220;pulp agent&#8221;: {
> </p>
> 
> <p dir="ltr">
>           &#8220;base_url&#8221;: &#8220;<a href="/external-link.jspa?url=https%3A%2F%2Fpulp-agent.example.com" target="_blank" rel="nofollow">https://pulp-agent.example.com</a>&#8220;
> </p>
> 
> <p dir="ltr">
>       }<br /> }
> </p>

<p dir="ltr">
  My only responsibility as a user is to put the right information (including version) in ~/.config/pulp_smash/settings.json. And here’s my working example of that file:
</p>

> <p dir="ltr">
>   [vagrant@dev ~]$ cat .config/pulp_smash/settings.json<br /> {
> </p>
> 
> <p dir="ltr">
>       &#8220;pulp&#8221;: {
> </p>
> 
> <p dir="ltr">
>               &#8220;base_url&#8221;: &#8220;<a href="/external-link.jspa?url=https%3A%2F%2Fdev" target="_blank" rel="nofollow">https://dev</a>&#8220;,
> </p>
> 
> <p dir="ltr">
>               &#8220;auth&#8221;: [&#8220;admin&#8221;, &#8220;admin&#8221;],
> </p>
> 
> <p dir="ltr">
>               &#8220;verify&#8221;: true,
> </p>
> 
> <p dir="ltr">
>               &#8220;version&#8221;: &#8220;2.9.0b1&#8221;,
> </p>
> 
> <p dir="ltr">
>               &#8220;cli_transport&#8221;: &#8220;local&#8221;
> </p>
> 
> <p dir="ltr">
>       }
> </p>
> 
> <p dir="ltr">
>   }
> </p>

## Step 3. Call python -m unittest2 discover pulp_smash.tests.

<p dir="ltr">
  This step may take a while to execute. Have a cup of coffee :  )
</p>

* * *

## Get handy with automated scripts

<p dir="ltr">
  In this section, I’ll also list some useful excerpts from the official documentation. The author was very nice to provide a starting point to learn pulp-smash:
</p>

<p dir="ltr">
  <a href="http://pulp-smash.readthedocs.io/en/latest/about.html#learning-pulp-smash">http://pulp-smash.readthedocs.io/en/latest/about.html#learning-pulp-smash</a>
</p>

<p dir="ltr">
  For example, to verify the sanity of your development environment, cd into the Pulp Smash source code directory and execute `make all`. The author has also suggested to me that, before sending out a Pull Request on github, it is useful to execute this command again to pass Travis CI tests. Also, please copy & paste the output from the test run as a comment in the GitHub pull request: `python -m unittest2 pulp_smash.tests`
</p>

<p dir="ltr">
  In case that you are not familiar with Python’s unittest module, its official documentation would be another good material to learn:
</p>

<p dir="ltr">
  <a href="https://docs.python.org/3/library/unittest.html#command-line-interface">https://docs.python.org/3/library/unittest.html#command-line-interface</a>
</p>

<p dir="ltr">
  This is also suggested by the author that I may run a single test case such as `python -m unittest2 pulp_smash.tests.platform.api_v2.test_login`; and I can consult the source code to see which other test modules are available.
</p>

## Package Structure

<p dir="ltr">
  From the doc, I also found it helpful to read through all commented code on this module:
</p>

<p dir="ltr">
  <a href="http://pulp-smash.readthedocs.io/en/latest/introductory-module.html">http://pulp-smash.readthedocs.io/en/latest/introductory-module.html</a>
</p>

# Errors encountered for Beginners of Pulp-Smash

<p dir="ltr">
  There’s no doubt that I’ll meet several errors by the first time I install pulp-smash. But it really matters how you view/treat those barriers. Do you just feel frustrated by being blocked for couple of hours? Sure it is&#8230;but when you finally solved it, it is also a good chance to improve, right? And more importantly, don’t miss the chance to consult the authors on IRC’s freenode!
</p>

## MissingSchema

> <p dir="ltr">
>   requests.exceptions.MissingSchema: Invalid URL &#8216;/pulp/api/v2/plugins/types/&#8217;: No schema supplied. Perhaps you meant<a href="http://pulp/api/v2/plugins/types/"> http://pulp/api/v2/plugins/types/</a>
> </p>

<p dir="ltr">
  How it is solved: without that <a href="/external-link.jspa?url=https%3A%2F%2F" target="_blank" rel="nofollow">https://</a>, Pulp Smash doesn&#8217;t know whether to contact Pulp on port 80, 443, or what.
</p>

## ConnectionError

> <p dir="ltr">
>   requests.exceptions.ConnectionError: HTTPSConnectionPool(host=&#8217;127.0.0.1&#8242;, port=443): Max retries exceeded with url: /pulp/api/v2/plugins/types/ (Caused by NewConnectionError(&#8216;<requests.packages.urllib3.connection.VerifiedHTTPSConnection object at 0x7f22e8f0c510>: Failed to establish a new connection: [Errno 111] Connection refused&#8217;,))
> </p>

<p dir="ltr">
  How it is solved: First I’ll check if pulp is running:
</p>

> <p dir="ltr">
>   $ systemctl status &#8216;*pulp*&#8217;
> </p>

<p dir="ltr">
  It turns out that I need to start httpd service manually after the vm is halted: sudo systemctl start httpd
</p>

## SSLError

> <p dir="ltr">
>   requests.exceptions.SSLError: hostname &#8216;localhost&#8217; doesn&#8217;t match either of &#8216;dev&#8217;, &#8216;<a href="http://dev.example.com/">dev.example.com</a>&#8216;
> </p>

<p dir="ltr">
  How it is solved:<br /> 1. My solution 1 is to execute `sudo hostnamectl set-hostname &#8220;localhost&#8221;` in order to change the hostname. However, changing hostname only doesn&#8217;t help since it still needs default hostname of dev.
</p>

<p dir="ltr">
  2. My solution 2 is to set &#8220;<a href="/external-link.jspa?url=https%3A%2F%2Fdev" target="_blank" rel="nofollow">https://dev</a>&#8221; as base_url for the configuration. I found out what&#8217;s happening here is that we&#8217;re telling our client to make an SSL-secured connection to the &#8220;localhost&#8221; domain (as configured). The client starts doing that, but when it discovers that the server&#8217;s SSL certificate isn&#8217;t valid for the &#8220;localhost&#8221; domain, but is instead valid for &#8220;dev&#8221; and &#8220;<a href="http://dev.example.com/">dev.example.com</a>&#8221; (by default), the client freaks out.
</p>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-07-sprint-demo-4-july-7-2016.md
`````markdown
---
date: 2016-07-07T20:55:50+00:00
title: Sprint Demo 4
author: Brian Bouterse
layout: post
permalink: /2016/07/07/sprint-demo-4-july-7-2016/
tags:
  - demo
---
<!-- more -->
See some of the fine features that are going into Pulp 2.10. Below is the agenda and a video from Sprint 4, which is the first sprint of 2.10 work.

  * Welcome (0:00)
  * State of Pulp (1:08)
  * Demo of new pulpproject.org (7:53)
  * Pulp Python 2.0 (15:21)
  * GPG signature on RPMs (27:07)
  * RPM rsync distributor (31:02)

<iframe src="https://player.vimeo.com/video/173801521" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 4 &#8212; 7\_7\_2016](https://vimeo.com/173801521) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-12-pulp-2-9-0-generally-available.md
`````markdown
---
date: 2016-07-12T20:55:50+00:00
id: 1400
title: Pulp 2.9.0 Generally Available
date: 2016-07-12T20:38:48+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1400
permalink: /2016/07/12/pulp-2-9-0-generally-available/
categories:
  - Releases
---
<!-- more -->
The Pulp 2.9.0 is now available, and can be downloaded from the 2.9 stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.9/>

The Pulp &#8220;2&#8221; and &#8220;latest&#8221; repositories have also been updated to point to 2.9.0:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2/>
  
<https://repos.fedorapeople.org/repos/pulp/pulp/stable/latest/>

This release includes many new features, as well as bug fixes. Owing to the more rapid time-based release of 2.9, this release should consist of fewer new features compared to the release of 2.8.

This release was slightly delayed by two blocking issues (2035 and 2037, seen below) which were fixed in Beta 2. The release timeline of 2.10 has not been impacted by these delays.

More information about our release schedule can be found on the Pulp wiki:
  
<https://pulp.plan.io/projects/pulp/wiki/Release_Schedule>

# Known Issues

## Possible Errata Sync Failure

Several issues were reported against Pulp 2.8 that were not included in the Pulp 2.9.0 release as a result of release timing. The [list of issues fixed in 2.8.6](http://bit.ly/29vs1bE) outlines these bugs, but there is one issue in particular that can potentially break RPM repository syncing after upgrading: <https://pulp.plan.io/issues/2048>

This issue is related to resyncing errata from some repositories, and in a pulp-admin sync operation looks like this:

<pre>Task Failed
Could not parse errata `updated` field: expected format '%Y-%m-%d %H:%M:%S'.
 Fail to update the existing erratum SOME_ERRATUM_ID.</pre>

As a workaround, you can choose to skip errata in the feed repository. To do this, you can update the repo to skip errata:

<pre>pulp-admin rpm repo update --repo-id  --skip=erratum</pre>

This will be fixed in Pulp 2.9.1. If you require errata to be synced from a feed repository, consider delaying an upgrade to Pulp 2.9 until 2.9.1 is released.

## RPM Publish Directory

[A story](https://pulp.plan.io/issues/1976) related to specifying different package publish directories inside an RPM repo, e.g. packages go in a configured packages dir, was included in previous betas and the release candidate for 2.9.0. Testing revealed that the feature didn&#8217;t perform as expected, so that feature has been pulled from this release. It is likely to return in a future release.

# Upgrading

The Pulp 2 stable repository (pulp-2-stable) is included in the pulp repo files:

  * <https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 22 & 23
  * <https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the pulp-2-stable repository, you&#8217;ll want to follow the standard
  
upgrade path, with migrations, to get to 2.9:

<pre style="padding-left: 30px;">$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat</pre>

# Supported Fedora Versions

Fedora 22 is no longer a supported Fedora release. We will not be supporting Fedora 22 for Pulp 2.9 and onward. Supported Fedora 24 builds will be starting as soon as possible.

We&#8217;ll be updating [our docs](http://docs.pulpproject.org/user-guide/installation/index.html#supported-operating-systems) soon with more details about our Fedora support policy than what&#8217;s currently there[2]. In the meantime, Pulp users on Fedora 22 are encouraged to upgrade to Fedora 23 to continue to receive supported releases.

# New Features

New features for Pulp 2.9 include optimizations in publishing, repoview support for yum repos, langpacks support for yum repos, and more:

## Pulp

  * 1724 Publish should be a no-op if no units and no settings have changed since the last successful publish

## RPM Support

  * 1716 As a user, I can have better memory performance on Publish by using SAX instead of etree for comps and updateinfo XML production
  * 1543 As a user, I would like incremental export to be the same format as full export
  * 1367 comps langpacks support
  * 1158 As a user, I can force full/fresh publish of rpms and not do an incremental publish
  * 1003 As a user, I can use pulp-admin to upload of package_environment
  * 189 Repoview-like functionality for browsing repositories via the web interface

View this list [in redmine](http://bit.ly/1XXtIps).

More information about these new features can be found in the release notes:
  
<http://docs.pulpproject.org/en/2.9/user-guide/release-notes/2.9.x.html>
  
<http://docs.pulpproject.org/en/2.9/plugins/pulp_rpm/user-guide/release-notes/2.9.x.html>

# Issues Addressed

All bug fixes from Pulp 2.8.5 and earlier are included in Pulp 2.9.

Here are the bug fixes specific to 2.9:

## Pulp

  * 2015 rpm repo publish fails with &#8220;Incorrect length of data produced&#8221; error
  * 1928 Publish should be operational if override config values were specified
  * 1844 pulp-admin &#8211;config and/or api_prefix option appears to be ignored

## RPM Support

  * 2037 Migration failing after 2.9 upgrade
  * 2035 Errata are published incrementally
  * 2001 Make sure sqlite files are generated if repoview is enabled
  * 1969 as user, I can export a repo with a specified checksum type
  * 1938 force\_full is not supported by export\_distributor
  * 1876 Add example on how to generate PULP_MANIFEST file
  * 1787 None in comps.xml
  * 1619 as user, I can export repo groups with different checksum than sha256
  * 1618 &#8211;checksum-type is broken

View this list [in redmine](http://bit.ly/1Q5bSOs).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-18-pulp-2-8-6-generally-available.md
`````markdown
---
date: 2016-07-18T20:55:50+00:00
id: 1409
title: Pulp 2.8.6 Generally Available
date: 2016-07-18T19:47:54+00:00
author: Sean Myers
layout: post
guid: http://www.pulpproject.org/?p=1409
permalink: /2016/07/18/pulp-2-8-6-generally-available/
categories:
  - Releases
---
<!-- more -->
Pulp 2.8.6 is now Generally Available in the stable repositories with bug fixes:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.8/>

This release includes a small number of fixes to severe bugs in Pulp Platform,
  
the RPM plugin, and the Docker plugin.

Of particular interest to RPM users are issues #1949 and #2048, two issues
  
that were severely impacting errata-related syncing and publishing. See the
  
list of issues below for more details.

# Upgrading

The Pulp 2 and Pulp stable repositories are included in the pulp repo files:
  
<https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 22 & 23
  
<https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the desired repository (pulp-stable or pulp-2-stable), you&#8217;ll want
  
to follow the standard upgrade path, with migrations:

<pre>$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
 $ sudo yum upgrade
 $ sudo -u apache pulp-manage-db
 $ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat</pre>

# Issues Addressed

Pulp

  * 2056 Distribution storage path migration re-links .treeinfo files incorrectly.
  * 2012 alternate content source refresh fails with json serialization error
  * 2031 possible incorrect URL param parsing by streamer

RPM Support

  * 2048 Errata update failure during sync or upload
  * 1949 re-publish takes longer than expected
  * 2032 pulp sets reboot_suggested to True for all errata when syncing from published repo

View the full list in Redmine:
  
<http://bit.ly/29vs1bE>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-28-community-testing-day-on-20160805.md
`````markdown
---
date: 2016-07-28T20:55:50+00:00
title: Community Testing Day on August 5th
layout: post
author: Chongrui Zhang
---
<!-- more -->
The Pulp 2.10 GA is [scheduled for Aug 16,
2016](https://pulp.plan.io/projects/pulp/wiki/Release_Schedule). To deliver a robust Pulp release,
the Pulp QE and Pulp team have organized a Community Test day where the Pulp community can come
together to test Pulp. This post further details the event and how to participate it.

# What is a Community Testing Day and why host it?

According to the [Fedora blog](https://communityblog.fedoraproject.org/hosting-fedora-test-day/),
organizing a test day "is a great way to help expose your project and bring more testers to try a
new update before it goes live".

The main objective of hosting this Pulp Test Day is to identify as many issues with 2.10 as possible
early on with the help of the community. Once identified, important issues can be fixed before the
GA releases leading to a more stable release.

# What to test?

The focus of the test day will be the new features included in Pulp 2.10. The issues fixed in 2.10
can also be verified that day. A list of these features will be provided, and participants can sign
up for the features they want to test. The attendees are welcomed to test existing features as well.
Members can also participate in the test day by adding tests to our automation test suite (Pulp
Smash) or by submitting fixes to the reported bugs. All issues and bugs will be filed and triaged to
prepare for 2.10 GA.

# When?

The Pulp QE team has tentatively decided to host the day on **Aug 05, 9am-5pm EDT**.

# Where?

The major communication approach will be through IRC. Participants are encouraged to join **channels
#pulp and #pulp-dev on [irc.freenode.net](https://freenode.net/)**. The **Pulp email list
pulp-list@redhat.com** can also be used for communications. In order to expand the audience of this
Test Day, members of both the open source community as well as downstream users will be notified via
email.

# Getting Ready

Here are some instructions for you to install or update your Pulp.

- Install a fresh Pulp 2.10 beta according to the [official documentation](http://docs.pulpproject.org/user-guide/installation/index.html).

- Optionally, you can use Ansible to install Pulp onto Fedora 23 by the following commands:

  ```bash
  #!/usr/bin/bash
  set -euo pipefail
  dnf update -y
  dnf install -y git vim ansible python-dnf libselinux-python
  mkdir code
  cd code
  git clone https://github.com/pulp/pulp-ci
  cd pulp-ci
  echo localhost > hosts
  ansible-playbook -i hosts --connection local -e pulp_version='2.9' \
      ci/ansible/pulp_server.yaml
  ```

- You can also update your current, non-production Pulp to Pulp 2.10 beta. Here is a link about how
  to upgrade to 2.8. You can follow the [instructions](http://docs.pulpproject.org/user-guide/release-notes/2.8.x.html#upgrade-instructions) to upgrade to 2.10.

- If you don't have your own instance of Pulp on hand, for internal Red Hat associates, we can
  provide you with a system. Just check in with preethi or chongrui on IRC.

- It is important to not use a production envrionment. Also note, Pulp does not support upgrading
  from a beta or RC to a newer beta, RC, or GA version. In other words you'll end up deleting your
Pulp testing envrionment after you are done.

# How to test

Now that you have a running instance of Pulp 2.10, you can start testing the new features and look
into the existing issues that can be verified.

## Sign up to test a new feature

Please enter your name, targeting features and OS/platform information on the spreadsheet. After
your tests, you can put the results on the
[spreadsheet](https://docs.google.com/spreadsheets/d/1XgD43QI7ELYWFI_eeZdWqHwtCZDywMX-uGTrSZJvPX0/edit#gid=12432565) as well.

# Automate tests

The Pulp QE team uses a python-based testing framework to automate testing features and and
regression testing. This framework is called Pulp Smash, and if you're interested in contributing
with your own automated tests for some of the new features, here's how to get started:

## Install Pulp Smash

Pulp Smash can be easily installed onto your system. Simply follow the [official documentation found
here](http://pulp-smash.readthedocs.io/en/latest/index.html). If you want a different approach to
how to install it, you can also read [this
post](http://www.pulpproject.org/2016/07/05/getting-started-on-pulp-and-pulp-smash-a-pulpqe-intern-summary/)
from our intern.

## Run the tests

Once you have Pulp Smash installed and configured, we highly recommend that you read through
[this](http://pulp-smash.readthedocs.io/en/latest/about.html#contributing) for a quick introduction
to the process of contributing with automated tests. Then you can:

- Manually test on Pulp 2.10 beta with API/CLI features.
- Develop Pulp Smash tests to help automated testing.
- Choose one of the existing test cases that need to be automated
  [here](https://github.com/PulpQE/pulp-smash/issues).

# Reporting bugs and issues

While playing with Pulp 2.10 Beta, you may encounter an issue or something that does not quite match
your expectations or the existing documentation. For these cases we kindly ask that you help us by:

- Opening a Pulp issue: <https://pulp.plan.io/projects/pulp/issues>
- Opening a Pulp Smash issue: <https://github.com/PulpQE/pulp-smash/issues>

# Test Day Report

After the completion of Test Day, Pulp QE  will deliver a summary via email containing information
about:

- What new features were tested?
- What existing features were tested?
- Number of Pulp issues opened
- Number of Pulp Smash issues created
- Number of PR/automation submitted
- Number of Pulp issues closed/reopened

Also, there will be a follow-up blog post on pulpproject.org with this summary.


# Who's available

The following PulpQE members will be available on IRC/freenode to provide help and guidance with any
questions you may have, as well as help with your tests, inform of known workarounds, or just chat
about the awesome new features:

- Chongrui Zhang (chongrui)
- Preethi Thomas (preethi)

The following  PulpQE members can help out with Pulp Smash automation as well:

- Chongrui Zhang (chongrui)
- Elyezer Rezende (elyezer)

The Pulp Development team will also help out by answering questions on IRC.

**We expect that Pulp 2.10 will be an amazing new release, and we look forward to seeing you join
us this Test Day!**

**Pulp QE Team**
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-07-28-sprint-demo-5-july-28-2016.md
`````markdown
---
date: 2016-07-28T20:55:50+00:00
title: Sprint Demo 5
date: 2016-07-28T18:28:49+00:00
author: Brian Bouterse
layout: post
guid: http://www.pulpproject.org/?p=1453
permalink: /2016/07/28/sprint-demo-5-july-28-2016/
categories:
  - Uncategorized
---
<!-- more -->
See some of the great features going into Pulp 2.10. This is a sprint demo of Sprint 5, which is the second sprint of 2.10 work.

Welcome (0:00)
  
State of Pulp (1:07)
  
Resource Manager Failover (4:28)
  
Sync from Private Docker Repository using Basic Auth (14:39)
  
Docker Rsync Demos (17:39)
  
Custom Checksum Type in updateinfo.xml (26:34)
  
RPM Sync &#8211;force-full flag (30:50)


<iframe src="https://player.vimeo.com/video/176636191" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 5 — 7\_28\_2016](https://vimeo.com/176636191) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-08-15-pulp-2-9-2-generally-available.md
`````markdown
---
date: 2016-08-15T20:55:50+00:00
title: Pulp 2.9.2 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
categories:
  - Releases
---
<!-- more -->
The Pulp 2.9.2 is now available, and can be downloaded from the 2.9 stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.9/>

This release includes fixes to Pulp Platform and the RPM Plugin.

## Issues Addressed

These critical issues are fixed in Pulp 2.9.2:

### Pulp
- 1863    Exception using regex in filters against associate endpoint
- 1894    unassociate rpms API request using unit_ids removes all rpm from repo
- 1728    Please relax input validation on --login for 'pulp-admin user create'

###  RPM Support
- 2135    Repo publish error Unclosed tags: endverbatim
- 2093    errors importing some rpms after upgrading to pulp 2.9
- 2077    publish fails if Django Template Syntax in changelog

View this list [in Redmine](http://bit.ly/2aygdsB).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-08-18-sprint-demo-6-august-18-2016.md
`````markdown
---
date: 2016-08-18T20:55:50+00:00
title: Sprint Demo 6
author: Brian Bouterse
layout: post
permalink: /2016/08/18/sprint-demo-6-august-18-2016/
tags:
  - demo
---
<!-- more -->
See some of the great features going into Pulp 2.10 and 2.11. This is a sprint demo of Sprint 6,
which is the third sprint of 2.10 work and includes some 2.11 work.

Welcome (0:00)

State of Pulp (1:02)

Signature Checking Feature (4:17)

Mention bot enabled for incoming Pull Requests (15:49)

Docker Rsync Distributor as a pre-distributor for Docker Web Distributor (17:00)

DRPM Upload Feature (30:15)

Automated Tests for Signature Checking Feature (33:48)

<iframe src="https://player.vimeo.com/video/179374047" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 6 — 8\_18\_2016](https://vimeo.com/179374047) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-09-08-sprint-demo-7-sept-08-2016.md
`````markdown
---
date: 2016-09-08T20:55:50+00:00
title: Sprint Demo 7
author: Brian Bouterse
layout: post
permalink: /2016/09/08/sprint-demo-7/
tags:
  - demo
---
<!-- more -->
See some of the great features going into Pulp 2.10 and 2.11. This is a sprint demo of Sprint 7,
which is primarily 2.11 and some 2.10 work.

Welcome (0:00)

State of Pulp (0:22)

Re-Using Files On Disk When DB Is Lost (3:17)

Rsync Distributor Incremental Publish: Docker/ISO (5:51)

Atomic Kickstart Sync (12:11)

<iframe src="https://player.vimeo.com/video/181947286" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 7 — 9\_08\_2016](https://vimeo.com/groups/pulp/videos/181947286) from [Michael Hrivnak](https://vimeo.com/user56416113) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-09-15-pulp-2-10-0-generally-available.md
`````markdown
---
date: 2016-09-15T20:55:50+00:00
title: Pulp 2.10.0 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - docker
categories:
  - Releases
---
<!-- more -->
Pulp 2.10.0 is now generally available, and can be downloaded from the Pulp 2.10 stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.10/>

New features for Pulp 2.10 include the new rsync distributor, new high-availability
features for resource managers, as well as some improvements to RPM publishing and
package validation. Several bugs were also fixed; all the details can be found later
in this announcement.

More information about these new features can be found in the release notes:

- <http://docs.pulpproject.org/en/2.10/testing/user-guide/release-notes/2.10.x.html>
- <http://docs.pulpproject.org/en/2.10/testing/plugins/pulp_rpm/user-guide/release-notes/2.10.x.html>
- <http://docs.pulpproject.org/en/2.10/testing/plugins/pulp_docker/user-guide/release-notes/2.1.x.html>

Try out the new features, and let us know how they work for you!

These two issues were listed as blockers for release candidate 1, and fixed in release
candidate 2. Upgrade testing to 2.10.0 from earlier versions of pulp is complete and has
verified that these issues do not affect 2.10.0:

- [2234](https://pulp.plan.io/issues/2234)
  Upgrading to pulp 2.9 causes sync of repos with SRPM's with a filelist field to fail.

- [2236](https://pulp.plan.io/issues/2236)
  Upgrading hto pulp 2.9 causes sync of repos with DRPM' with a "relativepath" field to fail.

No other blocking issues have been identified, which clears 2.10.0 to become generally
available a little earlier than I indicated in my previous announcement for this release.


## Upgrading

The 2.10 stable repositories are included in the pulp repo files:
https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo for fedora 23 & 24
https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo for RHEL 6 & 7

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow
the standard upgrade path, with migrations, to get to 2.10.0:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat
```


## New Features

Here are the specific stories done for 2.10.0:

### Docker Support
- 1887	As a user, I can use the rsync predistributor with docker web distributor
- 1291	As a user, I can sync feeds that require username/password authentication

### Pulp
- 1990	Rsync distributor
- 1963	As a user, I can use rsync distributor to publish iso repositories
- 1759	As a user, I can use rsync distributor to publish RPM repositores
- 898	As a user I can run multiple pulp_resource_managers concurrently with all of them actively participating

### RPM Support
- 1991	As a user, uploaded units which don't pass the signature check are not imported
- 1982	As a user, I can force a full sync
- 1878	Support for choosing the checksum type in updateinfo
- 1156	As a user, I can have an "signature" attribute stored for RPMs, SRPMs, and DRPMs

View this list in [redmine](http://bit.ly/2axDGKA).


## Issues Addressed

Here are the bug fixes specific to 2.10.0:

### Pulp
- 2082	Cannot add importer to the repository
- 1948	Upgrading RPMs on EL6 sometimes fails during pre script
- 2187	rsync as predistributor logic is wrong
- 2202	predistributor logic in platform does not account for force_full and updated distributor configs
- 2030	importer config is not validated during the update
- 2039	Not full importer config is validated in the update call
- 2118	Reduce runtime of file path migration
- 1606	API call to install consumers raises 500 if body contains wrong data type
- 2106	Pin to flake8 2.6.2

### RPM Support
- 2188	Make GPG signature checking is called "filtering"
- 2042	updateinfo.xml is missing checksums
- 2199	The RPM rsync distributor breaks when SELinux is enabled
- 2115	The 'skip_fast_forward' in RPM rsync config should be renamed to 'force_full'

All bug fixes from Pulp 2.9.2 and earlier are included in Pulp 2.10, as well as the fixes
for the two blockers mentioned above.

View this list in [redmine](http://bit.ly/2awB1h4).


## Fedora Support

Fedora 22 has reached its end-of-life. As a result Pulp 2.10 is being built for (and tested on)
Fedoras 23 and 24.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-09-19-pulp-2-9-3-generally-available.md
`````markdown
---
date: 2016-09-19T20:55:50+00:00
title: Pulp 2.9.3 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - docker
categories:
  - Releases
---
<!-- more -->
Pulp 2.9.3 is now Generally Available in the stable repositories:

<https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.9/>

This release includes bug fixes to Pulp Platform, the RPM Plugin,
and the Docker plugin.

No changes have taken place between 2.9.3 Beta 2 and this release.


## Upgrading

The 2.9 stable repositories are not included in the pulp repo files, and must be
installed manually with the following repository baseurls.

Fedora 23: `https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.9/fedora-$releasever/$basearch/`
RHEL/Centos 6 & 7: `https://repos.fedorapeople.org/repos/pulp/pulp/stable/2.9/$releasever/$basearch/`

After enabling the pulp 2.9 repository for your distribution, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat
```


## Issues Addressed

These issues are fixed in Pulp 2.9.3:

### Docker Support

- 2198: Timestamp not updated for changed docker_tag
- 2142: Units created with 0-byte files when sync runs out of disk space

### Pulp

- 2121: Requires: selinux-policy is broken in spec files
- 2112: Status API does not log Qpid errors
- 2047: directory creation race condition during publish

### RPM Support

- 2236: Upgrading to pulp 2.9 causes sync of repos with DRPM' with a "relativepath" field to fail.
- 2234: Upgrading to pulp 2.9 causes sync of repos with SRPM's with a filelist field to fail.
- 2197: Error report for file size verification is not generated correctly
- 2134: Updating a repo without specifying checksum_type causes KeyError
- 1926: package without epoch in the erratum pkglist is not handled correctly during publish
- 1881: pulp-admin fails to display the erratum if not all metadata is present
- 236: Don't re-download rpms if they exist on disk

View this list in [Redmine](http://bit.ly/2bPVEca).


## Fedora Support

Fedora 22 packages are incidentally included in this release, but are not
supported due to Fedora 22 reaching its end-of-life.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-10-27-sprint-demo-9.md
`````markdown
---
date: 2016-10-27T20:55:50+00:00
title: Sprint 9 Demo
author: Brian Bouterse
layout: post
tags:
  - demo
  - "3.0"
---
<!-- more -->
The Sprint 9 demo is available, which highlights 2.11 features and 3.0 work.

Welcome (0:00)

State of Pulp (1:40)

2.11 Feature: pulp-manage-db can't be run with workers running (3:21)

Celerybeat in 3.0, MVP (6:00)

Pulp 3 tasking system converted to Django models (9:48)

Pulp Fixtures (13:27)

<iframe src="https://player.vimeo.com/video/189172600" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 9](https://vimeo.com/groups/pulp/videos/189172600) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-10-31-pulp-2-10-1-generally-available.md
`````markdown
---
date: 2016-10-31T20:55:50+00:00
title: Pulp 2.10.1 ROLLED BACK
author: Sean Myers
tags:
  - release
  - rpm
  - ostree
categories:
  - Releases
---
<!-- more -->
## <span style="color: red;">ROLLED BACK</span>

> Pulp 2.10.1 was found to have multiple fatal flaws, most
> notably [this issue](https://pulp.plan.io/issues/2378). As a result, the
> release was rolled back.
> Pulp 2.10.2 is [now available]({% post_url 2016-11-17-pulp-2.10.2-generally-available %}) and
> addresses these fatal flaws. Our apologies for the inconvenience.

Pulp 2.10.1 (<span style="color: darkorange" title="Happy Halloween!">Spooky Edition</span>)
is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes to Pulp Platform, the RPM Plugin,
and the OSTree plugin.

Pulp 2.10.1 includes a variety of bug fixes to the Pulp Platform, as well
as the OSTree and RPM plugins, outlined below.


## Upgrading

The Pulp stable repositories are included in the pulp repo files:

* <https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 23 & 24
* <https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the `pulp-stable` or `pulp-2-stable` repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat
```


## Issues Addressed

These issues are fixed in Pulp 2.10.1:

### OSTree Support

* 2237 Published repositories are copied instead of linked
* 2213 Proxy URL for remotes not properly constructed.

### Pulp

* 2344 Streamer PulpHTTPAdapter does not configure the proxy pool manger with certificates resulting in 503s.
* 2328 Repository syncs show all units updated even when there are no changes
* 2287 Cannot get docker v2 repo tags list
* 2278 Remove checksum_type from the srpm and drpm collections
* 2277 Content published using move (instead of copy) causes 404 due to selinux denial.
* 2221 rsync distributor doesn't remove files from remote when rsyncing empty repository with --delete
* 2049 Django RemovedInDjango110Warning in logs for missing TEMPLATES setting
* 1766 Pulp API is incompatible with Django 1.10
* 1392 Misleading nodes quickstart howto

### RPM Support

* 2326 Publishes fail
* 2257 unit test failure: "AppRegistryNotReady: Apps aren't loaded yet."
* 2242 Package signature ID checking is broken when syncing in packages
* 2227 Only first pkglist is synced for erratum even if multiple are present
* 2190 Unit is associated with the repo before it is copied to the final location

View this list [in Redmine](http://bit.ly/2eqCCZe)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-10-31-pulp-3.0-mvp.md
`````markdown
---
date: 2016-10-31T20:55:50+00:00
title: Pulp Celerybeat and the Pulp 3.0 Minimum Viable Product (MVP)
layout: post
author: Dennis Kliban
tags:
  - "3.0"
---
<!-- more -->
Last week during our [sprint 9 demo]({% post_url 2016-10-27-sprint-demo-9 %}) I gave an update on
the work I did on Pulp Celerybeat for Pulp 3.0. This post highlights those changes in written form.

Pulp 3.0 is a complete rewrite of Pulp. To accomplish the work in a reasonable amount of time, we
put together a description of the [Minimum Viable Product (MVP) for the Pulp
3.0.0](https://pulp.plan.io/projects/pulp/wiki/Pulp_3_Minimum_Viable_Product) release. This MVP is
a subset of the functionality offered with Pulp 2.y. Please have a look at the MVP and provide
feedback based on your workflows and how the MVP affects you. It is possible that we have
overlooked something critical to your usage of Pulp, so please send feedback to
[pulp-list@redhat.com](mailto:pulp-list@redhat.com).

Looking through the MVP description, there is no mention of users being able to
schedule operations such as a sync or a publish. This is one of the features that is omitted from
the initial 3.0.0 release. Users can continue to schedule tasks using other tools such as cron.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-11-14-yum-repo-layout-changes.md
`````markdown
---
date: 2016-11-14T20:55:50+00:00
title: Yum Repository Layout Changes
layout: post
author: Brian Bouterse
tags:
  - rpm
---
<!-- more -->
The upcoming 2.12 release will change the layout of published Yum repositories. In 2.11 or earlier,
when publishing a Yum repository you will get something like the following snippet from a locally
synced [zoo repository](https://repos.fedorapeople.org/repos/pulp/pulp/fixtures/rpm/):

```
[vagrant@dev zoo]$ tree
.
├── bear-4.1-1.noarch.rpm
├── camel-0.1-1.noarch.rpm

<snip>

├── repodata
│   ├── 12c9a3187bccbcbc3d0e1edf0163bfdc6eff1d65fdd5f1353cdcdeb70ed6728f-primary.xml.gz
│   ├── 3d46903cd04e68284f18067ce8c710571eb75ecc3d247686cea1e3326cf9ed6f-filelists.xml.gz
│   ├── 829355cb5d6bb74be7ddc01f04413af713a7780382ad2f0b7c3c77943a7b7c75-other.xml.gz
│   ├── 87cfcf84fbe80f2f8593194797744d0a9256c8769c0d1d74f4ba0337c0e387b5-comps.xml
│   ├── e358bb4bce6b743c0feca58214a4a54b82a9184163e8325c830d8dd0db2c6e4c-updateinfo.xml.gz
│   └── repomd.xml

<snip>

├── walrus-0.71-1.noarch.rpm
├── walrus-5.21-1.noarch.rpm
├── whale-0.2-1.noarch.rpm
├── wolf-9.4-2.noarch.rpm
└── zebra-0.1-2.noarch.rpm
```

The 2.12+ published rpm repository will be different in a few ways:

1. Packages will be published in the `Packages` directory and will no longer be published in the
   root of the repository.

2. Packages will be placed in a folder by the first character of the package name.

3. Metadata files in the `repodata` directory will reference the new relative paths allowing Yum and
   similar clients to continue discovering packages.

Here is the same example from above organized using the new layout:

```
[vagrant@dev zoo]$ tree
.
├── Packages   
│   ├── a
│   ├── b
│   │   └── bear-4.1-1.noarch.rpm
│   ├── c
│   │   ├── camel-0.1-1.noarch.rpm

<snip>

│   ├── w
│   │   ├── walrus-0.71-1.noarch.rpm
│   │   ├── walrus-5.21-1.noarch.rpm
│   │   ├── whale-0.2-1.noarch.rpm
│   │   └── wolf-9.4-2.noarch.rpm
│   ├── x
│   ├── y
│   └── z
│       └── zebra-0.1-2.noarch.rpm
└── repodata
    ├── 12c9a3187bccbcbc3d0e1edf0163bfdc6eff1d65fdd5f1353cdcdeb70ed6728f-primary.xml.gz
    ├── 3d46903cd04e68284f18067ce8c710571eb75ecc3d247686cea1e3326cf9ed6f-filelists.xml.gz
    ├── 829355cb5d6bb74be7ddc01f04413af713a7780382ad2f0b7c3c77943a7b7c75-other.xml.gz
    ├── 87cfcf84fbe80f2f8593194797744d0a9256c8769c0d1d74f4ba0337c0e387b5-comps.xml
    ├── e358bb4bce6b743c0feca58214a4a54b82a9184163e8325c830d8dd0db2c6e4c-updateinfo.xml.gz
    └── repomd.xml
```


### Motivation

* Having all of the packages in one folder limits the ability to publish or copy Pulp repositories 
  on some filesystems.

* The `Packages` folder is a common convention and keeps the repository organized. For example, see
  the [Fedora](http://download.fedoraproject.org/pub/fedora/linux//releases/24/Server/x86_64/os/)
  or [CentOS](http://mirror.centos.org/centos/7/os/x86_64/) repositories.


### Backwards Compatibility

Yum and similar clients are expected to have no interruption with this change. The repository
metadata is consistent with the packages available in both the old and new layout. Repositories
already published prior to 2.12 will retain the old layout with 2.12+ until they are republished. 

Users who have hard-coded package urls to Pulp published repositories should update their urls to
use the new locations. This impact should be minimal with most users using Puppet,
[Ansible's package module](https://docs.ansible.com/ansible/package_module.html), Yum bindings, or
similar.


### Get Involved

If this impacts a use case you have for Pulp, please describe it via
[pulp-list](https://www.redhat.com/mailman/listinfo/pulp-list) or post on
[Issue #1976](https://pulp.plan.io/issues/1976).

It would be great to have a few users test this feature in one of the 2.12 betas or release
candidates.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-11-17-django14-epel6-retirement.md
`````markdown
---
date: 2016-11-17T20:55:50+00:00
title: Django14 Retirement From EPEL 6
layout: post
author: Brian Bouterse
tags:
  - platform
  - rpm
---
<!-- more -->
Running Pulp on EL6 depends on the `Django14` package provided by the Extra Packages for Enterprise
Linux (EPEL) 6. It was recently decided that this package will be retired no earlier than Jan 1 2017
and no later than March 31, 2017.

This was decided at a EPEL steering commitee meeting on Nov 9. It did not make
[the offical minutes](https://meetbot.fedoraproject.org/fedora-meeting/2016-11-09/epel.2016-11-09-18.29.html)
but it is in [the full log](https://meetbot.fedoraproject.org/fedora-meeting/2016-11-09/epel.2016-11-09-18.29.log.html).

Please give feedback via pulp-list in
[this thread](https://www.redhat.com/archives/pulp-list/2016-November/msg00022.html).


### Impact on Pulp EL6 Users

Once `Django14` is removed from EPEL6, Pulp EL6 packages will no longer install without the
`Django14` package being manually installed first. This will mostly affect new installations since
existing EL6 installations already have the `Django14` from before it was retired. Users can receive
the reitred `Django14` bits directly from
[the Koji build](http://koji.fedoraproject.org/koji/buildinfo?buildID=744751).

At some point, upstream Pulp will stop being built for EL6. This will be discussed on pulp-list to
identify a coordinated timeline with the Pulp user community. When this occurs, running Pulp on EL6
will be unsupported.

Pulp will continue to support managing packages for EL6, but the Pulp Server cannot itself be run on
EL6.


### Why is it being retired?

It's being retired due to support and security concerns: 

* Upstream Django is no longer maintaining Django 1.4.z. When an upstream community stop supporting
  an EPEL package, the responsibility falls to the EPEL maintainer to decide if they want to support
  it. The `Django14` package maintainer recommends retiring the package due to security concerns.

* There are several CVEs against Django 1.4 that are unfixed. Additionally, since it's no longer
  supported there are likely additional CVEs that are applicable but not being tracked.


### Preparation

Proactively upgrading your Pulp server OS to EL7 is the recommendation.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-11-17-pulp-2.10.2-generally-available.md
`````markdown
---
date: 2016-11-17T20:55:50+00:00
title: Pulp 2.10.2 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - ostree
categories:
  - Releases
---
<!-- more -->
Pulp 2.10.2 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This is a critical hotfix addressing a issues that resulted in 2.10.1 being
rolled back. This release also includes all of the bug fixes to Pulp Platform,
the RPM Plugin, and the OSTree plugin originally released with 2.10.1.

All hotfix issues (listed below) are tested and verified as fixed.


## Upgrading

The Pulp stable repositories are included in the pulp repo files:

* <https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 23 & 24
* <https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the `pulp-2-stable` repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat
```

## Hotfix Issues

This hotfix release addresses errors caused by a merge issue introduced prior to
the release of 2.10.1, tracked [in Redmine](https://pulp.plan.io/issues/2378).

While that fix was being verified, it was discovered that publishing fails on el6,
tracked [in Redmine](https://pulp.plan.io/issues/2387).

## Known Issues

- Upgrading on EL 7.3 can take longer than on other platforms. pulp-selinux package unnecessarily
  runs restorecon on /var/lib/pulp. The duration of upgrade depends on the amount of content in
  that directory.
- As part of fixing the above issue, it was also discovered that upgrading from 2.10.0 can take
  longer than from 2.9.1 and earlier versions. The fix for this issue will be released with 2.10.3.

## Issues Addressed

These issues are fixed in Pulp 2.10.2:

### OSTree Support

* 2237 Published repositories are copied instead of linked
* 2213 Proxy URL for remotes not properly constructed.

### Pulp

* 2344 Streamer PulpHTTPAdapter does not configure the proxy pool manger with certificates resulting in 503s.
* 2328 Repository syncs show all units updated even when there are no changes
* 2287 Cannot get docker v2 repo tags list
* 2278 Remove checksum_type from the srpm and drpm collections
* 2277 Content published using move (instead of copy) causes 404 due to selinux denial.
* 2221 rsync distributor doesn't remove files from remote when rsyncing empty repository with --delete
* 2049 Django RemovedInDjango110Warning in logs for missing TEMPLATES setting
* 1766 Pulp API is incompatible with Django 1.10
* 1392 Misleading nodes quickstart howto

### RPM Support

* 2326 Publishes fail
* 2257 unit test failure: "AppRegistryNotReady: Apps aren't loaded yet."
* 2242 Package signature ID checking is broken when syncing in packages
* 2227 Only first pkglist is synced for erratum even if multiple are present
* 2190 Unit is associated with the repo before it is copied to the final location

View this list [in Redmine](http://bit.ly/2eqCCZe)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-11-18-sprint-10-demo.md
`````markdown
---
date: 2016-11-18T20:55:50+00:00
title: Sprint 10 Demo
author: Brian Bouterse
tags:
  - demo
  - "3.0"
---
<!-- more -->
The Sprint 10 demo is available, which highlights the current state of Pulp, a 2.11 feature for
improved memory performance, and an update on 3.0 work.

Welcome (0:25)

State of Pulp (1:07)

Process recycling feature for better memory performance (2.11 feature) (6:05)

User model and authentication in 3.0 (14:32)

3.0 Docs Reboot (20:21)

3.0 API Docs! (26:01)

<iframe src="https://player.vimeo.com/video/191984686" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 10](https://vimeo.com/191984686) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-12-01-pulp-2.10.3-generally-available.md
`````markdown
---
date: 2016-12-01T20:55:50+00:00
title: Pulp 2.10.3 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
categories:
  - Releases
---
<!-- more -->
Pulp 2.10.3 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for the Pulp Platform, and the RPM Plugin.


## Upgrading

The Pulp stable repositories are included in the pulp repo files:

* <https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 23 & 24
* <https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the `pulp-2-stable` repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat
```


## Issues Addressed

### Pulp

* 2436 pulp-selinux RPM fails to run restorecon statements post install
* 2195 can't sync unit that was previously uploaded
* 2424 restorecon runs unecessarily for all 2.10+ upgrades

### RPM Support

* 2354 Incorrect URL on lazy catalog entries created for existing RPM content units
* 2372 updating importer ssl_client_cert to null fails with error
* 2362 applicability calculation wastes time scanning a list
* 2374 Can't skip distribution content during sync

View this list [in Redmine](http://bit.ly/2gai8Ue)


## el6 Known Issue Update

In the beta announcement for this release, I mentioned that the el6 test suite
was indicating that this release might be unstable for that platform.

The el6 release has since been verified as working and cleared for release, as
[reported here](https://pulp.plan.io/projects/pulp/wiki/Pulp_2_10_3_Test_Result_Summary).

Thanks to everyone involved in this investigation.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-12-05-contributing-blog-post-to-pulpproject.org.md
`````markdown
---
date: 2016-12-05T20:55:50+00:00
title: Contributing a Blog Post to pulpproject.org
author: Dennis Kliban
---
<!-- more -->
Quickstart Guide
----------------

1. Fork the pulpproject.org repository on GitHub.
   [https://github.com/pulp/pulpproject.org/](https://github.com/pulp/pulpproject.org/)

1. Clone your fork locally and checkout the `gh-pages` branch.

1. Create a new file in the `_posts` directory. The name for the file should be in the following
   format: `YYYY-MM-DD-title-of-post.md` e.g.
   `2016-11-30-contributing-blog-post-to-pulpproject.org.md`

1. Write a blog post in the new file.

1. Commit your changes to the `gh-pages` branch. By committing directly onto the `gh-pages` branch,
   you can preview it using Github.

1. Push your `gh-pages` branch to your fork.

1. Preview the blog at `https://<username>.github.io/pulpproject.org/blog/`. Another option to
   preview your blog post (without GitHub) is to [build the site
   locally](https://github.com/pulp/pulpproject.org/blob/gh-pages/README.md).

1. Create a Pull Request against the `gh-pages` branch of [pulproject.org
   repository](https://github.com/pulp/pulpproject.org/).

Writing the Blog Post
---------------------

Pulpproject.org is a [GitHub Pages](https://pages.github.com/) site. Each page is created using
[GitHub flavored Markdown](https://help.github.com/articles/basic-writing-and-formatting-syntax/).
Each blog post begins with the [YAML Front Matter](http://jekyllrb.com/docs/frontmatter/). Front
Matter specifies metadata such as the `author` and `title`. Here is an example of Front Matter for
a blog post:

    ---
    title: Django14 Retirement From EPEL 6
    author: Brian Bouterse
    tags:
      - platform
      - rpm
    ---

`tags` may be specified optionally, and the list of available tags is
[here](https://github.com/pulp/pulpproject.org/tree/gh-pages/tags). Including a tag or [multiple
tags](https://raw.githubusercontent.com/pulp/pulpproject.org/gh-pages/_posts/2016-11-17-django14-epel6-retirement.md)
makes the post discoverable by looking at posts organized by tag. More detailed documentation on
creating blog posts is available [here](http://jekyllrb.com/docs/posts/).

Previewing the HTML Site on GitHub
----------------------------------

Your fork of the pulpproject.org repository should already be configured to serve the `gh-pages`
branch at `http://<username>.github.io/pulpproject.org`. Once you push your changes to the
`gh-pages` branch, the blog can be viewed at `https://<username>.github.io/pulpproject.org/blog/`.
It may take a few minutes for the pages to be regenerated.

Previewing the HTML Site Locally
--------------------------------

Another option for previewing your blog entry is to build it locally. The simplest way to prepare
an environment for generating the Jekyll site is to use the Pulp development environment
provisioned using Vagrant. The documentation on provisioning using Vagrant can be found in the
[Pulp developer docs](http://docs.pulpproject.org/dev-guide/contributing/dev_setup.html#vagrant).
Once the Vagrant VM is provisioned, connect to it via ssh with the following commend:

`vagrant ssh -- -L 4000:127.0.0.1:4000`

The above command will forward your local port 4000 to port 4000 on the VM. This will enable you
to view the generated site at `http://127.0.0.1:4000`.

Gotchas
-------

Every time you push the `gh-pages` branch to GitHub, you will receive an email from GitHub
notifying you that the CNAME pulpproject.org is already taken. You can disregard these emails.

If the date in the name of the blog post file is in the future, the generated site will
not display the new blog post. While writing the post, you should use the current date in the
name of the file.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-12-07-deprecating-nodes.md
`````markdown
---
date: 2016-12-07T20:55:50+00:00
title: Deprecating Nodes
author: David Davis
tags:
  - release
  - platform
  - "3.0"
---
<!-- more -->
Nodes were introduced in Pulp in 2.1.0 and provided a way to keep multiple Pulp
servers synchronized. However, Nodes uses separate codepaths from the normal
sync+publish codepaths which creates a few problems:

* Nodes is less tested than sync+publish. This greatly reduces the user-to-user
  usage and testing benefit.
* Fixing bugs in sync+publish does not fix bugs in Nodes and vice-versa
* Nodes has a good amount of bugs already reported that are still unfixed

Given that much of the functionality of Nodes can be achieved by running Pulp
with sync+publish workflow, the core team is removing Nodes in the next major
release, Pulp 3.0. With Pulp 2.12, Nodes will be officially deprecated.

In this blog post, I want to outline how users can sync content across Pulp
servers without using Nodes and how tools like cron and systemd can be used to
keep content updated across Pulp servers. I am going to illustrate a two-server
example in which I'll call one Pulp server the parent and the other the child.
However, this distinction is arbitrary as each server is a standard Pulp server
installation without Nodes packages installed. The child Pulp server is called
that because it is the one we want to mirror content to.

Syncing Content to a Child Server
---------------------------------

Suppose I have an rpm repo called 'centos-base' on the parent Pulp server.
First, I would want to publish that repository to make it available for the
child Pulp server to sync:

    pulp-admin rpm repo publish run --repo-id centos-base

This repository should then be available via http or https. You can check its
relative path via `pulp-admin rpm repo list --repo-id centos-base --details`.
In my case, it's at "https://example.com/pulp/repos/centos-base". Now on the
child node, I can create and sync the repository:

    pulp-admin rpm repo create --repo-id centos-base --feed https://example.com/pulp/repos/centos-base
    pulp-admin rpm repo sync run --repo-id centos-base

Now the 'centos-base' repository from the parent Pulp server has been mirrored
onto a child server.


Automatically Updating Content
------------------------------

By using cron or a systemd timer, we can keep content on the child Pulp server
up-to-date automatically. To make content available, you will need to call
publish on the parent repository. This can be done automatically after each
sync via the "auto-publish" feature, or periodically with a crontab entry such
as:

    @hourly pulp-admin rpm repo publish run --repo-id centos-base

On on the child server, we could then sync our 'centos-base' repository hourly
with:

    @hourly pulp-admin rpm repo sync run --repo-id centos-base

It's worth noting that you'll want to ensure that pulp-admin is pointing to
the correct URL on each server. One option would be to edit the crontab for
each server and have pulp-admin configured to point to Pulp via localhost.

Also, by default, a pulp-admin certificate only lasts for 7 days before you
must login again. To extend this period, configure `user_cert_expiration` in
server.conf.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-12-08-sprint-11-demo.md
`````markdown
---
date: 2016-12-08T20:55:50+00:00
title: Sprint 11 Demo
author: Brian Bouterse
tags:
  - demo
  - "3.0"
---
<!-- more -->
The Sprint 11 demo is available, which highlights the current state of Pulp, along with Pulp 2.12 features and 3.0 work.

Welcome (0:07)

State of Pulp (0:43)

Pulp 3 API Authentication Demo (3:48)

Story Grooming Etherpad (9:35)

Docker Tag Command Demo (13:01)

How to Contribute a Blog Post (16:24)

Recent work on Pulp3 Tasking System Demo (19:05)

<iframe src="https://player.vimeo.com/video/194842945" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
[Pulp Sprint Demo 11](https://vimeo.com/194842945) from [Brian Bouterse](https://vimeo.com/user53392398) on [Vimeo](https://vimeo.com).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2016-12-14-pulp-2.11.0-generally-available.md
`````markdown
---
date: 2016-12-14T20:55:50+00:00
title: Pulp 2.11.0 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - docker
  - puppet
  - ostree
categories:
  - Releases
---
<!-- more -->
Pulp 2.11.0 is now Generally Available in the stable repositories

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

Upgrading
=========

The Pulp stable repositories are included in the pulp repo files:
<https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 23 & 24
<https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the `pulp-stable` or `pulp-2-stable` repository, you'll want to follow the standard
upgrade path, with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer
```

## New Features

### Docker Support
* 2114    As a user, I can perform incremental publish with Docker rsync distributor

### OSTree Support
* 2205    As a user, I want to pull older versions of trees available to atomic hosts.

### Pulp
* 1983    As a user, an importer config change or content removal will cause the next sync to be full
* 2172    Memory Improvements with Process Recycling

### RPM Support
* 1806    As a user, I can use pulp-admin to upload drpms
* 2113    As a user, I can perform an incremental publish using ISO rsync distributor
* 2132    As a consumer of Pulp content I want ISO & ISO_rsync distributor to support relative_url for consistency with yum
* 2211    As a user, I can sync a distribution unit with the existing yum_importer without requiring yum metadata
* 2212    As a user I can see in the task report of copy operation list of units which did not pass signature filter 

View this list [in Redmine](http://bit.ly/2eQz5Ui)


## Issues Addressed

### Pulp
* 2377    0025_importer_schema_change hits issue with last_sync being None
* 1977    basic auth in URL fails when using authenticated proxy
* 1069    extra Task ID in docs example to bind a repo
* 2133    Permissions docs should include some info on /v2/
* 752     Suggestion to add -v remains even if you use -v

### RPM Support
* 2224    Cannot sync from mirrorlists
* 2321    Pulp can't handle mirrorlists with invalid entries
* 2363    Pulp acts like all is well when a sync completely fails
* 2071    Creating yum distributor without https, http keys in config crashes

All bug fixes from Pulp 2.10.3 and earlier are included in Pulp 2.11.

View this list [in Redmine](http://bit.ly/2dHG8ws)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-10-running-pulp-with-nginx-and-uwsgi.md
`````markdown
---
date: 2017-01-10T20:55:50+00:00
title: Running Pulp with Nginx and uWSGI
author: Brian Bouterse
tags:
  - platform
---
<!-- more -->
Recently while troubleshooting a [slow memory leak](https://pulp.plan.io/issues/2492), I wanted to
run Pulp with a webserver other than [httpd](https://httpd.apache.org/). I decided to look at
[nginx](http://nginx.org/) and [uWSGI](http://uwsgi-docs.readthedocs.io/en/latest/) to give some
memory comparisons versus httpd. I've always run Pulp using httpd so this was new for me.

Note, this example does not serve content; it only serves the Pulp API. httpd usually serves both
the API and content like rpms. For my purposes, I only needed to test the API, and I think serving
content will take a little bit of work (see below). Note also that this is an **experimental
setup**, so **use at your own risk**.

Usually, Pulp is being served with Apache httpd and the plugin
[mod_wsgi](https://code.google.com/archive/p/modwsgi/). The httpd is the web server, and mod_wsgi
contains the Python interpreter handling a WSGI call to return a response. In this case we want
nginx to be the webserver replacing Apache httpd, and we want uWSGI to be the WSGI handler.


#### Install Packages, Stop httpd

```
$ sudo dnf install uwsgi uwsgi-plugin-python nginx
$ sudo systemctl stop httpd
```

#### Configure Nginx

I configured TLS for the webserver directly in nginx.conf. I probably shouldn't do this, but Vagrant
makes it so easy to reset my dev environment. In the nginx.conf I enabled the TLS block and added
two custom parts.

First are the SSL certs:

```
        ssl_certificate "/etc/pki/tls/certs/apachecert.pem";  # the private key for the TLS conn
        ssl_certificate_key "/etc/pki/tls/private/apachekey.pem";  # key for the private cert
        ssl_client_certificate "/etc/pki/pulp/ca.crt";  # The CA cert to validate the client
        ssl_verify_client optional;  # Sets auth headers that Pulp expects
```

Second, a definition for the API url handler itself.:
 
```
        location /pulp/api/ {
            rewrite /pulp/api/(.*) /$1 break;
            include uwsgi_params;
            uwsgi_pass 127.0.0.1:8000;
            uwsgi_param REMOTE_USER $remote_user if_not_empty;
            uwsgi_param HTTP_AUTHORIZATION $http_authorization;
            uwsgi_param SSL_CLIENT_CERT $ssl_client_raw_cert if_not_empty;
        }
```

The headers cause nginx to set headers in specific ways that Pulp cares about. With the above config
pulp-admin allows for both basic and cert based auth. Basic auth work for requests work when using
<code>pulp-admin -u xxxxxx -p xxxxxx</code>. You can also <code>pulp-admin login -u admin</code>
and your certificate will allow additional calls to be made. After calling
<code>pulp-admin logout</code> you will not be able to make additional calls.

For the complete example (similar to vanilla nginx.conf), here is the whole TLS block in nginx.conf:

```
# Settings for a TLS enabled server.

    server {
        listen       443 ssl http2 default_server;
        listen       [::]:443 ssl http2 default_server;
        server_name  _;
        root         /usr/share/nginx/html;

        ssl_certificate "/etc/pki/tls/certs/apachecert.pem";
        ssl_certificate_key "/etc/pki/tls/private/apachekey.pem";
        ssl_client_certificate "/etc/pki/pulp/ca.crt";
        ssl_verify_client optional;
        ssl_session_cache shared:SSL:1m;
        ssl_session_timeout  10m;
        ssl_ciphers HIGH:!aNULL:!MD5;
        ssl_prefer_server_ciphers on;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location /pulp/api/ {
            rewrite /pulp/api/(.*) /$1 break;
            include uwsgi_params;
            uwsgi_pass 127.0.0.1:8000;
            uwsgi_param REMOTE_USER $remote_user if_not_empty;
            uwsgi_param HTTP_AUTHORIZATION $http_authorization;
            uwsgi_param SSL_CLIENT_CERT $ssl_client_raw_cert if_not_empty;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }

```

#### Start nginx

After applying configuration changes be sure to restart nginx.

```
$ sudo systemctl restart nginx
```


#### uWSGI Config

I configured uWSGI with the following <code>pulp_uwsgi.ini</code> file:

```
[uwsgi]
socket = 127.0.0.1:8000
wsgi-file = /usr/share/pulp/wsgi/webservices.wsgi
env = DJANGO_SETTINGS_MODULE=pulp.server.webservices.settings
uid = apache
gid = apache
plugin = python
```

I then run the webserver in the foreground with <code>sudo uwsgi pulp_uwsgi.ini</code> which creates
this process tree:

```
[vagrant@dev ~]$ sudo ps -awfux | grep uwsgi
root     12109  0.6  0.2 118792  5700 pts/4    S+   23:47   0:00    |   \_ sudo uwsgi pulp_uwsgi.ini
apache   12110 15.6  3.6 665884 75564 pts/4    Sl+  23:47   0:00    |       \_ uwsgi pulp_uwsgi.ini
```

This could be daemonized as a next step. I did not do that. Docs could also be written on how to
configure this manually or with Vagrant. You can also increase the number of processes and workers,
but I went with the defaults which only spawns one worker.


#### What about Content?
To allow stored content to be served, there should be an additional location block added for nginx
to serve statically. To have feature parity with httpd it also needs to be able to run the custom
access scripts which check for cert based authorization access to content. This should be do-able
but its going to take some work.

Additionally, Pulp makes use of [mod_xsendfile](https://tn123.org/mod_xsendfile/) to serve content,
would also need replacing. I'm not sure what nginx has in that area, but it likely has something
also.

Also nginx configs would need to be put together to support pulp_streamer but that should also be
possibly by making correct configurations (no code changes).


#### Todos

Here are some todos I thought of in case others are interested in seeing this work continue.

* Creating a Pulp config for nginx (not in nginx.conf) and committing it to a repo
* Creating a pulp_uwsgi.ini file in a repo
* Adding docs on other webservers
* Testing. Things always need testing ;-)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-16-plan-io-is-awesome.md
`````markdown
---
date: 2017-01-16T20:55:50+00:00
title: Plan.io is Awesome
author: Brian Bouterse
---
<!-- more -->
The Pulp community is thankful to [plan.io](https://plan.io/), who hosts the Pulp issue tracker so
well and at no cost.

#### Why is plan.io so great?

Plan.io [believes in open source](https://plan.io/redmine-and-open-source/). Their hosted platform
is built on [Redmine](http://www.redmine.org/), which is one of the largest open source, web-based
project trackers that provides issue management. They contribute downstream enhancements back to the
upstream Redmine community whenever possible, and their involvement keeps them as experts in hosting
and use of Redmine. They also have a policy to provide
[free hosting](https://plan.io/frequently-asked-questions/#item-406) for any open source project.

#### How great are they?

I help support our issue tracker, and I regularly email plan.io support. The number of emails I need
to send per issue is usually 1. It probably averages at 1.2. They resolve things very quickly
because they know Redmine so well.

In my experience, their website availability has been great. Anecdotally, I've never seen
[pulp.plan.io](https://pulp.plan.io) offline. Their certs are always working, and their servers load
fast.

#### Story time

Once they looked into a security issue I reported. Their handling of that issue was impeccable in
my opinion. They investigated, identified the source of the issue, honestly identified when the
insecure code was introduced, fixed it, and proved to me it was fixed all within 24 hours. It also
doesn't hurt that they already have a security advantage from using open source software to begin
with.

### Thanks plan.io for being awesome.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-16-pulp-2.11.1-generally-available.md
`````markdown
---
date: 2017-01-16T20:55:50+00:00
title: Pulp 2.11.1 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - puppet
categories:
  - Releases
---
<!-- more -->
Pulp 2.11.1 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for the Pulp Platform, the Puppet plugin, and the RPM Plugin.

No blocking issues were reported during the 2.11.1 beta, so this release is unchanged from the
2.11.1 Beta 1 release.


## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

* <https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo> for fedora 23 & 24
* <https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo> for RHEL 6 & 7

After enabling the `pulp-2-stable` repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
* 2439 No data available in publish step (OSError: [Errno 61] No data available)
* 2483 pulp_rpm migration 0031 fails: cursor not found
* 2491 When stopping pulp_workers, pulp_celerybeat, and pulp_resource_manager gracefully, the status API still shows them as running
* 2464 pulp-admin broken in vagrant environment on 2.y
* 1287 Repo sync failing with KeyError
* 2006 iso importer fails without useful error message
* 2136 publish step error handling incorrectly assumes open file
* 2476 pulp publish fail when selinux is disabled
* 2510 django logs warning when responding with 404

### Puppet Support
* 2500 ValueError exception is raised when uploading module with invalid name
* 1981 unnecessary pulp error on puppet repo sync
* 1853 pulp-puppet-module-builder should not overwrite existing module files

### RPM Support
* 2514 Creating a group no longer updates the existing group
* 2365 rpm upload fails to populate "files" field on model
* 2457 When syncing do not associate units that are already associated to the repo
* 2096 Additional updateinfo.xml after second publish
* 2466 Remove unnecessary `deepcopy` calls for sync

View this list [in Redmine](http://bit.ly/2iWc1I7).


## el6 Support Reminder

As mentioned in the 2.11.0 release notes, we are no longer supported el6 distributions
after Pulp 2.11 (i.e. starting with 2.12).

See the release notes for more information:

<http://docs.pulpproject.org/en/2.11/user-guide/release-notes/2.11.x.html#el6-support-changes>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-19-sprint-12-13-demo.md
`````markdown
---
date: 2017-01-19T20:55:50+00:00
title: Sprint 12 and 13 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
See what is coming with Pulp 2.12.0

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZPAGBGwsS2k" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (mhrivnak)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=1m22s)
* [New release status pages (smyers)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=7m25s)
* [Orphan removal counts and celery worker record cleanup (ddavis)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=10m6s)
* [New implementation for pulp-manage-db check for running workers (bizhang)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=13m12s)
* [File fixtures for pulp-fixtures (elyezer)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=16m20s)
* [CLI exception handling and waiting for user processes to die after rsync publishes (ichimonji10)](https://www.youtube.com/watch?v=ZPAGBGwsS2k&t=22m0s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-26-devconf-and-fosdem-conferences.md
`````markdown
---
date: 2017-01-26T20:55:50+00:00
title: Pulp at DevConf and FOSDEM Conferences
author: Brian Bouterse
---
<!-- more -->
Pulp is participating in two open-source conferences coming up,
[DevConf.cz 2017](https://devconf.cz/) and [FOSDEM](https://fosdem.org/). These conferences are a
great place for Pulp users and developers to meet-up and get involved in the open source community.

The first is DevConf in Brno, Czech Republic on Jan 27th - Jan 29th, where Pulp will have both a
presentation and a booth. Michael Hrivnak will be giving a talk titled *Managing OSTree Repositories
with Pulp* which will show off [OSTree](https://ostree.readthedocs.io/en/latest/) functionality
provided by the [OSTree Plugin](https://docs.pulpproject.org/plugins/pulp_ostree/). Pulp will share
a booth with [the Foreman project](https://www.theforeman.org/) which has a plugin named
[Katello](https://theforeman.org/plugins/katello/) that acts as a workflow and frontend tool for
Pulp and other softwares. Come by the booth to connect with developers from Pulp, Foreman, and
Katello, or contact us via IRC to meet up! 

The second is [FOSDEM '17](https://fosdem.org/2017/) in Brussels, Belgium on February 4th and 5th.
Brian Bouterse will be giving a talk titled *Debugging Hung Python Processes with GDB* which
outlines debugging techniques used while debugging Pulp. More details on the talk are
[here](https://fosdem.org/2017/schedule/event/python_gdb/). Pulp developers will be there, so reach
out via IRC to meet up. 

If you can't make it to either of these, but are interested in joining or hosting a meetup in your
area, please let us know via IRC in #pulp on Freenode or send a note to the
[pulp-list](https://www.redhat.com/mailman/listinfo/pulp-list).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-26-new-pulp-logo.md
`````markdown
---
date: 2017-01-26T20:55:50+00:00
title: New Pulp Logo
author: David Davis
---
<!-- more -->
![New Pulp Logo](https://docs.pulpproject.org/en/pulpproject.org_images/pulp_logo_big.png)

Today we're happy to reveal that we have updated our branding for the Pulp
project. This includes a few changes around our logo that I want to outline.
The old logo, as you may remember, was outdated and it was time for a revamp
(just in time for Pulp 3.0!). Our new logo was designed by [Maria
Leonova](https://mashaleonova.wordpress.com) at the Red Hat Brno office.

As part of this change, we're updating both the logo on pulpproject.org as well
as the favicon for this site. There are two different flavors for the new logo:
[a small one with just the graphic that represent Pulp](https://docs.pulpproject.org/en/pulpproject.org_images/pulp_logo.png)
and [a larger one that features the word "pulp"](https://docs.pulpproject.org/en/pulpproject.org_images/pulp_logo_big.png).

While the old Pulp logo featured very muted colors which may be hard to see for
those who see color differently, our new logo's colors create a much better
contrast due to fewer colors. We also selected colors that should be easier for
people with color blindness to see.

The new logo also features typography that is much more contemporary and easier
to read than the old logo. Lastly, we felt the old logo was too text-centric;
the new logo is more of a graphic in that it features a symbol (that of a
fruit) to represent the Pulp project.

We hope you enjoy the new logo and we'd like to also thank core Pulp team
member Ina Panova for organizing the effort to redesign our logo.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-01-30-pulp-2.11.2-generally-available.md
`````markdown
---
date: 2017-01-30T20:55:50+00:00
title: Pulp 2.11.2 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - puppet
categories:
  - Releases
---
<!-- more -->
Pulp 2.11.2 is now Generally Available in the stable repositories:

<https://repos.fedorapeople.org/pulp/pulp/stable/2.11/>

This release includes a small number bug fixes for the Pulp Platform, and the RPM Plugin,
and is the final release for the Pulp 2.11 line since the 2.12.0 release is currently in
progress.

2.12.0 is expected to be generally available very soon (likely tomorrow); this release is
only useful to users explicitly choosing to stay on pulp 2.11 for some time after the release
of 2.12.


## Upgrading

Due to the imminent release of 2.12.0, the Pulp 2.11 stable repository *will not* be included
in the normal pulp repo files. They will point to Pulp 2.12 upon the release of that version.
The appropriate repository for your distribution will need to be manually installed in order
to stay on Pulp 2.11.

After adding the appropriate Pulp 2.11 stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

* 1847 last_unit_added is not added in mongo repo collection records
* 2520 credentials in feed URL are not url-unquoted

### RPM Support

* 1086 pulp_distribution.xml sync should ignore repodata/*

View this list [in Redmine](http://bit.ly/2k9Whiy).


## el6 Support Reminder

As mentioned in the 2.11.0 release notes, we are no longer supported el6 distributions
after Pulp 2.11. See the release notes for more information:

<http://docs.pulpproject.org/en/2.11/user-guide/release-notes/2.11.x.html#el6-support-changes>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-02-01-pulp-2.12.0-generally-available.md
`````markdown
---
date: 2017-02-01T20:55:50+00:00
title: Pulp 2.12.0 Generally Available
author: Sean Myers
tags:
  - release
  - rpm
  - puppet
  - docker
categories:
  - Releases
---
<!-- more -->
Pulp 2.12.0 is now Generally Available in the stable repositories:

<https://repos.fedorapeople.org/pulp/pulp/stable/2.12/>

New features for Pulp 2.12 include new features added to the Pulp platform, as well
as the Puppet, RPM, and Docker plugins. Many bug fixes are also included in
the 2.12.0 release.

More information about these new features can be found in the features list below,
as well as in the
[2.12 release notes]( http://docs.pulpproject.org/en/2.12/user-guide/release-notes/2.12.x.html)

Try out the new features, and let us know how they work for you!

Since the release of Release Candidate 2, we've decided to pull the pulp_python
upgrade to version 2.0 from this release, due to usability and documentation
issues that we feel still need to be worked out before that pluginis ready for
release. We'll be including it in a future release. Users currently testing a
pre-release of 2.12.0 (a Beta or Release Candidate) may need to downgrade the
installed versions of the pulp-python packages to 1.1.3-1 as a result.

These are the current stable packages for the pulp_python plugin as of Pulp 2.12.0:

- pulp-python-admin-extensions-1.1.3-1
- pulp-python-plugins-1.1.3-1
- python-pulp-python-common-1.1.3-1


## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## New Features

### Pulp

- 2525: Failover events should be explicitly logged as such when they: occur
- 2509: Pulp process failure detection and any failover should occur within 30: seconds
- 2186: As a user, pulp-manage-db refuses to run if other pulp processes are running: locally
- 1939: As a user, I would like to be able to profile Pulp: tasks
- 1268: As a user, orphan content delete reports how many units were: deleted

### RPM Support

- 1976: As user, I can have packages sorted in "Packages/$x" directories when: published

### Docker Support

- 2189: As a user, I can update docker_tag units without using: sync

View this list [in Redmine](http://bit.ly/2iMdYpK).


## Issues Addressed

### Pulp

- 2545: pulp-manage-db wait time calculation can end up with many hours of wait: time
- 2264: better error reporting during: import/association
- 1488: Deprecate: nodes
- 1321: Commit message requirements for Pulp contributions are out of date and could be: better
- 103: Document the commit message keywords that will interact with: Redmine

### RPM Support

- 1823: RPMs partially: downloaded

View this list [in Redmine](http://bit.ly/2iMgzjJ).


## el6 Support Reminder

As mentioned in the 2.11.0 release notes, we are no longer supported el6 distributions
after Pulp 2.11. See the release notes for more information:

<http://docs.pulpproject.org/en/2.11/user-guide/release-notes/2.11.x.html#el6-support-changes>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-02-09-sprint-14-demo.md
`````markdown
---
date: 2017-02-09T20:55:50+00:00
title: Sprint 14 Demo
author: Elyézer Rezende
tags:
  - demo
---
<!-- more -->
See what is coming with next versions of Pulp.

<iframe width="560" height="315" src="https://www.youtube.com/embed/-Kinf84dV9c" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (mhrivnak)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=0m45s)
* [New Pulp logo (bmbouter)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=4m58s)
* [Verified workfow update (smyers)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=5m34s)
* [cProfiling feature of tasks in 2.12 (bmbouter)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=11m26s)
* [Task id in log statements (daviddavis)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=17m46s)
* [Puppet subdir option (bizhang)](https://www.youtube.com/watch?v=-Kinf84dV9c&t=19m48s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-02-17-why-does-copy-use-lots-of-memory.md
`````markdown
---
date: 2017-02-17T20:55:50+00:00
title: Why Does Copy Use Lots of Memory?
author: Michael Hrivnak
tags:
  - platform
---
<!-- more -->
Pulp user Richard Gray [wrote](https://www.redhat.com/archives/pulp-list/2017-February/msg00008.html)
to our [email list](https://www.redhat.com/mailman/listinfo/pulp-list)
to ask about high memory use during copy operations. He wrote:

> I have a local RPM repository that syncs from an internet mirror of the
> CentOS 7.3 updates repository. When I try to create a local copy of this
> mirror, the celery processes balloon, using all available memory until the
> job eventually fails

He included this helpful example:

```
$ pulp-admin rpm repo copy all --from-repo-id centos-7-updates-x86_64-live --to-repo-id centos-7-updates-x86_64-snapshots-20170216a
This command may be exited via ctrl+c without affecting the request.

[-]
Running...
An internal error occurred on the Pulp server:

RequestException: GET request on
/pulp/api/v2/tasks/776894cc-b524-4f2f-bd30-c8c4d8237c31/ failed with 500 -
[Errno 12] Cannot allocate memory
```

## Explanation

Thankfully this behavior can be explained, and there is even a work-around
available. Both are hinted at in the [REST API documentation](
http://docs.pulpproject.org/dev-guide/integration/rest-api/content/associate.html#copying-units-between-repositories).

The full explanation is rather lame, but honest. When you do a copy, you can
give pulp a [Criteria](http://docs.pulpproject.org/dev-guide/conventions/criteria.html#search-criteria)
object, which lets you match specific units to copy based on filters,
limit/skip, etc. Pulp evaluates that Criteria into a result set, and hands that
to the plugin (yum_importer in Richard's case) to do the actual work. That's
the API between the core of Pulp and a plugin, so it's difficult to change.

One of the things you can specify in a Criteria is a list of fields to load. By
default, it selects all of them. See where this is going? If you just tell Pulp
to copy all RPMs from repo A to B, it will load all of the data it has on each
RPM document into memory at the same time.

## Work-Around

The work-around is to pass a list of fields with your copy request to the REST
API. In most cases, passing just the list of unit key fields will suffice.

pulp-admin does this for you, but only if you are copying a specific type of
content. If you use the ``rpm repo copy all`` command as Richard did, the
request will match multiple types of content (RPM, DRPM, Errata, etc.).
pulp-admin can no longer pass a set of fields that will be appropriate for all
matched types.

We can see this in action by running a fake copy command with pulp-admin. I am
making up two repository names, because we just want to see the body of the
request sent to Pulp's REST API.

```
$ pulp-admin -vv rpm repo copy rpm -f foo -t bar
2017-02-17 14:21:30,384 - INFO - POST request to /pulp/api/v2/repositories/bar/actions/associate/ with parameters {"source_repo_id": "foo", "override_config": {}, "criteria": {"fields": {"unit": ["name", "epoch", "version", "release", "arch", "checksum", "checksumtype", "downloaded", "signing_key", "filename"]}, "type_ids": ["rpm"], "filters": {"unit": {}}}}
```

You can see the list of fields that pulp-admin specified.

## TL;DR

Copy one unit type at a time. Avoid ``pulp-admin rpm repo copy all``.

If using pulp-admin to copy a single type, it will ensure the field list is
appropriately limited.

If using the REST API, specify a list of fields starting with the unit key
fields for the content type you are copying. Add additional fields as needed.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-02-23-pulp-2.12.1-generally-available.md
`````markdown
---
date: 2017-02-23T20:55:50+00:00
title: Pulp 2.12.1 Generally Available
author: Bihan Zhang
tags:
  - release
  - rpm
categories:
  - Releases
---
<!-- more -->
Pulp 2.12.1 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for the Pulp Platform and the RPM Plugin.

There were 2 potential blockers filed during the 2.12.1 beta: [#2591](https://pulp.plan.io/issues/2591) and
[#2600](https://pulp.plan.io/issues/2600). #2591 was resolved by the user, and #2600 was a beta packaging issue.
Thus this release is unchanged from the 2.12.1 Beta 1 release.


## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

- 1594	deprecation warnings when running migrations on EL7
- 1781	Files ending in .gz are delivered with incorrect content headers
- 2004	Pulp logs many DeprecationWarnings
- 2458	Lazy download repo content task fails silently.
- 2503	remove_missing does not seem to remove on_demand catalog entries
- 2518	rpm - confusion around pulp_streamer files
- 2542	Streamer needs to try all available catalog entries.
- 2550	Publishing via rsync does not correctly look at publish records
- 2563	MongoDB deployment link broken in docs
- 2576	Update build system to properly implement el6 support policy
- 2577	last_unit_added is not updated when units are copied over from another repo
- 2587	on_demand downloads aren't being cached by Squid

### RPM Support

- 2263	Fast-forward yum publish skips units if previous publish was cancelled
- 2502	cursor timeout in _duplicate_key_id_generator_aggregation() during sync
- 2568	DocumentTooLarge error during merge of errata pkglists

View this list [in Redmine](http://bit.ly/2l5g8R2).


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-03-01-pulp-at-scale-2017.md
`````markdown
---
date: 2017-03-01T20:55:50+00:00
title: Pulp at SCALE '17
author: Brian Bouterse
---
<!-- more -->
Pulp is participating in the Southern CAlifornia Linux Expo
([SCALE](http://www.socallinuxexpo.org/scale/15x)) on March 2-5, 2017 in Pasadena, California.
Michael Hrivnak will be giving a talk titled *[Deploying a Multi-Service App in Kubernetes](
http://www.socallinuxexpo.org/scale/15x/presentations/deploying-multi-service-app-kubernetes)* which
deploys Pulp itself using containers and Kubernetes. I will be giving a talk titled *[Debugging
Hung Python Processes with GDB](http://www.socallinuxexpo.org/scale/15x/presentations/debugging-hung-python-processes-gdb)*,
which was well received at FOSDEM.

These conferences are a great place for Pulp users and developers to meet-up. We will be posting to
[@pulpproj](https://twitter.com/pulpproj) on Twitter during the conference.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-03-04-sprint-15-demo.md
`````markdown
---
date: 2017-03-04T20:55:50+00:00
title: Sprint 15 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
See what is coming with next versions of Pulp.

<iframe width="560" height="315" src="https://www.youtube.com/embed/LrYO4CXJ0qQ" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (mhrivnak)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=0m52s)
* [Docker manifest schema version 2 support (ipanova) (2.13.0)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=3m19s)
* [Workers considered missing after 30 seconds (dalley) (2.12.0)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=17m30s)
* [Status API Corectness Improvements (dkliban) (2.13.0)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=21m50s)
* [Pulp Fixtures now has a Puppet module. (jeremy audet)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=29m30s)
* [Pulp Packaging now properly configures system firewalls (jeremy)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=34m35s)
* [Pulp on Kubernetes (mhrivnak)](https://www.youtube.com/watch?v=LrYO4CXJ0qQ&t=41m10s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-03-23-sprint-16-demo.md
`````markdown
---
date: 2017-03-23T20:55:50+00:00
title: Sprint 16 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
See what is coming with next versions of Pulp.

<iframe width="560" height="315" src="https://www.youtube.com/embed/M_9_HurT658" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (mhrivnak)](https://www.youtube.com/watch?v=M_9_HurT658&t=1m13s)
* [Community Update (bmbouter)](https://www.youtube.com/watch?v=M_9_HurT658&t=5m35s)
* [Puppet Forge importer fixes (ttereshc) (2.12 or 2.13)](https://www.youtube.com/watch?v=M_9_HurT658&t=8m3s)
* [New console logging option (bmbouter) (2.13)](https://www.youtube.com/watch?v=M_9_HurT658&t=11m38s)
* [RPMs with huge metadata can now be imported (ttereshc) (2.12.2)](https://www.youtube.com/watch?v=M_9_HurT658&t=14m58s)
* [UTF-8 fixes in RPM (bmbouter) (2.12 or 2.13)](https://www.youtube.com/watch?v=M_9_HurT658&t=16m49s)
* [Preview of File Plugin Stub (smyers) (3.0)](https://www.youtube.com/watch?v=M_9_HurT658&t=20m56s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-04-12-encouraging-new-contributors.md
`````markdown
---
date: 2017-04-12T20:55:50+00:00
title: Encouraging New Contributors
author: Brian Bouterse
---
<!-- more -->
As an open source project, Pulp wants to attract as many contributors as possible. Encouraging and
supporting new contributors is a key strategy to achieve that goal. This post shares some of the
approaches and activities the Pulp community is using to grow the contributor base of Pulp.

* **Have an easy way to get started**. Having a developer environment like Vagrant is a great way to
  reduce the amount of time and complexity it takes to go from nothing to a functional developer
  setup. The [Pulp developer environment](http://docs.pulpproject.org/dev-guide/contributing/dev_setup.html#vagrant)
  is an easy way to get a complete and highly featured developer environment. We also have a
  [Vagrant video](https://youtu.be/0LDoNPIZyzk) which talks about how to setup this environment as
  well.

* **Support developers the way they want to develop**. Not everyone develops the same way, and if a
  new contributor prefers to do things another way, we don't want to convince them otherwise without
  a good reason. For example, a new contributor preferred to use Docker instead of VMs with
  libvirtd. At the time, the Pulp developer environment only had support for libvirtd. By exploring
  another way of doing things, the new contributor's first contribution was adding Docker support to
  the developer environment. Now Pulp's dev environment has both libvirtd and Docker support and the
  contributor is able to develop in a way that aligns with their preferences.

* **Recognize and thank new contributors.** Every first time contribution made to Pulp should
  be recognized with a tweet from [@pulpproj](https://twitter.com/pulpproj) thanking them for their
  first contribution. We also send a Pulp tshirt and stickers to them if they want. Additionally, we
  highlight community contributions in the community update portion of the sprint demos.

* **Be responsive**. From questions via the developer mailing list, to newly opened Pull Requests
  (PRs), we want to engage new contributors who take their first step without any delay. We could
  improve some in this area, but ideally we would have comments and review on any new PR within a
  few hours and no more than 24 hours. In practice, I've observed that delays responding to a
  question or new PR significantly increase the likelihood that PR will not get finished or merged.

* **Recognize different kinds of contributions**. Not all contributions are code. For example,
  documentation improvements are very valuable and can be contributed by users. This is a great way
  to have non-programmers contribute.

* **Don't let contributor licenses get in the way.** A few years ago formal, contract-like
  Contributor License Agreements (CLAs) were becoming very common. Pulp does not require a CLA. By
  not requiring one, friction during the contribution process is reduced.

Have more ideas or feedback for us? We'd love to hear from you by tweeting at [@pulpproj account](https://twitter.com/pulpproj).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-04-12-how-to-make-pulp-vagrant-env-with-very-large-disk.md
`````markdown
---
date: 2017-04-12T20:55:50+00:00
title: How to make a Pulp Vagrant env with a very large disk
author: Dennis Kliban
---
<!-- more -->
Vagrant has significantly lowered the barrier to starting on Pulp development. However, when I
needed to reproduce an error that only occured when syncing a large repository, I discovered that
the default size of the the virtual machine created from the Vagrantfile in the devel repository
did not have a large enough disk to handle such a use case. The first step in resolving this
problem was an update to my Vagrantfile specifying a larger disk size. Once I did that I
discovered that the default location where libvirt stores disk images backing virtual machines
did not have the amount of space I needed. However, my home directory did have the space. So I
configured libvirt to use my home directory for storage. Below are the notes that I saved from
that experience.

{% highlight bash %}
# change user that libvirt runs as
vim /etc/libvirt/qemu.conf

   user = "dkliban"
   group= "dkliban"

# update the default storage pool for libvirt
sudo virsh pool-edit default

# Edit the xml in the editor that is opened by above command
# Update the path, user, group, and label tags based on the example below
# user and group 1000 are 'dkliban' on my machine

<pool type='dir'>
  <name>default</name>
  <uuid>412c1740-7d48-427c-9ab7-4fcea6305670</uuid>
  <capacity unit='bytes'>192459673600</capacity>
  <allocation unit='bytes'>111755284480</allocation>
  <available unit='bytes'>80704389120</available>
  <source>
  </source>
  <target>
    <path>/home/dkliban/libvirtimages</path>
    <permissions>
      <mode>0711</mode>
      <owner>1000</owner>
      <group>1000</group>
      <label>unconfined_u:object_r:user_home_t:s0</label>
    </permissions>
  </target>
</pool>

# exit the editor and look output from the command. If validation passes, you should see a message saying the pool has been updated.
# restart libvirtd
sudo systemctl restart libvirtd
{% endhighlight %}

At this point every time I start a virtual machine using libvirt, the disk image backing that
machine will be stored in `/home/dkliban/libvirtimages`.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-04-12-pulp-2.12.2-generally-available.md
`````markdown
---
date: 2017-04-12T20:55:50+00:00
title: Pulp 2.12.2 Generally Available
author: Bihan Zhang
tags:
  - release
  - rpm
  - puppet
  - ostree
---
<!-- more -->
Pulp 2.12.2 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, Puppet Plugin, and OSTree Plugin

There is a known issue for upgrading some of the pulp plugins in Fedora only, this is an old issue that was recently discovered and will be fixed in the next pulp release.
[#2639](https://pulp.plan.io/issues/2639)


## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp
- 723	RPMs with large number of files can exceed mongo document size limit
- 1389	Disallow re-uploading the same package twice
- 2240	Can't export rpm repo
- 2524	Vagrant systemd and upstart scripts are not symlinked to source
- 2527	Ensure Pulp 2.y works with both python-celery 3.1.z and 4.0.z
- 2551	Pulp task error messages should be more informative
- 2584	Mongo cursor times out during task pulp.server.managers.content.orphan.delete_all_orphans
- 2585	Bugs fixed in version link is not correct for plugins
- 2615	Scheduled calls support broken for Celery4+Kombu4
- 2630	disassociate_units updates last_unit_removed timestamp even if no units are removed
- 2680	Scheduled RPM installation and uninstallation does not work at all
- 2688	last_unit_added is not updated when units are copied over from another repo



RPM Support
- 1414	pulp rpm profiler INFO-level logging is very verbose
- 1903	RPM import traceback (non-utf-8 metadata slipping through)
- 2274	Uploading duplicate content results in ambiguous error message
- 2505	Getting an incorrect exception when trying to sync a local repo with bad permissions
- 2559	Empty pkglist for the erratum may be generated which may cause yum not to find applicable packages
- 2560	Non-unique collection names in erratum pkglists causes yum not to show all packages
- 2599	Deprecation warning in the logs during errata migration
- 2620	All RPM repo searches are broken
- 2621	Syncing an immediate repo with 'on_demand' overridden no longer populates the catalog
- 2622	Sync fails when non-ASCII characters are present in primary.xml
- 2623	Errata publish performace degradation
- 2627	Uploading drpm by pulp-admin with --checksum-type fails
- 2655	units_successful is empty for successful ISO assocaiting task
- 2657	Publishing iso_rsync_distributor fails when iso_distributor is published with serve_https==False


OSTree Support
- 2544    copy always matches every unit in the repo
- 2552	updating ostree rpm gives error on sync: LibError: GLib.Error('No such file or directory', 'g-io-error-quark', 1)


Puppet Support
- 2606	Fix the ability to forge importer to mirror upstream repository on sync

View this list [in Redmine](http://bit.ly/2mnYfxD).


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-04-13-sprint-17-demo.md
`````markdown
---
date: 2017-04-13T20:55:50+00:00
title: Sprint 17 Demo
author: Elyézer Rezende
tags:
  - demo
---
<!-- more -->
See what is coming with next versions of Pulp.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Cf57BhofpSA" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (mhrivnak)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=1m00s)
* [Community Update (bmbouter)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=4m35s)
* [Systemwide command for Pulp3 (fdobrovo)(3.0)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=7m05s)
* [Batch save() calls to ProgressReport (bizhang)(3.0)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=8m57s)
* [Logging in Pulp3 (fdobrovo)(3.0)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=11m17s)
* [Pull Request Test Results Publicly Available (dkliban) (all)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=13m58s)
* [Pulp3 Developer Notes (bmbouter) (3.0)](https://www.youtube.com/watch?v=Cf57BhofpSA&t=16m30s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-04-19-maintaining-community-clear-goals.md
`````markdown
---
date: 2017-04-19T20:55:50+00:00
title: Maintaining Community with Clear Goals
author: Brian Bouterse
---
<!-- more -->
At PulpCon 2016, the Pulp core developers and quality engineers wanted a
better way to describe what Pulp does. Through discussions we arrived at:

    "Acquire, Organize, and Distribute Software"

The core team felt that tagline got to the heart of Pulp's value proposition
for our users. It is both a statement of what we already feel Pulp does
and a yardstick to guide future decisions. Through this tagline, we can better
maintain and serve the Pulp community by focusing on features and user
experiences within this area. We also use it to recognize opportunities to
collaborate with other software communities that are focused on other areas.
That tagline motivates a never ending goal: to be the software that Acquires,
Organizes, and Distributes Software the best.

One example of how this goal is shaping the Pulp community is seen with Pulp
3.0, which disincludes consumer management features. These features were
provided in Pulp 2.y such as associating repositories with machines or
triggering package installations. Pulp was providing those features but not as
robustly as some of the configuration management options out there like
[Ansible](https://www.ansible.com/) or [mgmt](https://github.com/purpleidea/mgmt/).
This decision was debated heavily because Pulp users like the consumer
management features, but it is challenging to make first-class consumer
management features without a dedicated focus in that area. After articulating
a clear goal and recognizing that consumer management isn't it, the decision
to disinclude those features in the next major release made more sense.

Another example can be seen with the Pulp tasking system which is powered by
[Celery](http://www.celeryproject.org/). Celery is a community dedicated to
providing a great, asynchronous Python tasking paradigm. It's critically
important to Pulp to have an excellent, asynchronous tasking system, but it is
not important if Pulp is creating that tasking system or using something else.
Looking back at the decision to stop using a home-grown tasking system and
start using Celery with Pulp 2.4  was the right decision. It has benefitted
the community greatly because Pulp contributors can focus on supporting the
Pulp value proposition more directly. It also doesn't hurt that Celery is a
great tasking system.

Consider what goals exist for communities you participate in. Are they clearly
articulated? Are they written down? Having clear goals will support better
decision making and more focus on creating the right kind of value.

Do you have an idea for how Pulp can deliver better on our goals? Let us
know via twitter @pulpproj.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-05-04-sprint-18-demo.md
`````markdown
---
date: 2017-05-04T20:55:50+00:00
title: Sprint 18 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
See what is coming with Pulp 3.0, along with a State of Pulp and Community Update.

<iframe width="560" height="315" src="https://www.youtube.com/embed/6Z6Vl1P_4X0" frameborder="0" allowfullscreen></iframe>

* [State of Pulp (dkliban)](https://www.youtube.com/watch?v=6Z6Vl1P_4X0&t=0m57s)
* [Community Update (bmbouter)](https://www.youtube.com/watch?v=6Z6Vl1P_4X0&t=1m49s)
* [Showing Off Platform's Sync Code (asmacdo)](https://www.youtube.com/watch?v=6Z6Vl1P_4X0&t=6m31s)
* [Pulp 3 Python Module Reorganization (dalley)](https://www.youtube.com/watch?v=6Z6Vl1P_4X0&t=14m24s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-05-24-pulp-2.13.1-generally-available.md
`````markdown
---
date: 2017-05-24T20:55:50+00:00
title: Pulp 2.13.1 Generally Available
author: Bihan Zhang
tags:
  - release
  - rpm
  - puppet
---
<!-- more -->
Pulp 2.13.1 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, Puppet Plugin, and the nectar library.

There is a known issue for upgrading some of the pulp plugins in Fedora only, this is an old issue that was recently discovered and will be fixed in the next pulp release.
[#2639](https://pulp.plan.io/issues/2639)


## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp
- 2689	Don't use ssh connection sharing in rsync distributor
- 2722	Local variable 'published_after_predistributor' referenced before assignment"
- 2733	Pulp's test certs are bad and do not conform to candlepin's entitlement cert format
- 2746	Add documentation about Transparent Huge Pages
- 2726	Fix pulp_resource_mananger typo

RPM Support
- 2704	Catalog entries for existing content units with old-style storage path get created with new-style storage path.
- 2720	Can't sync file repo that uses basic auth
- 2721	Race condition on errata model save during sync of multiple similar repos
- 2666	Rsync publish for RPM repo fails to run in fast forward mode
- 2605  Ovirt, Openstack \| Malformed repository: metadata is missing for some packages in filelists.xml and in other.xml

Puppet Support
- 1846	pulp does not sync puppetforge correctly

nectar
- 2315	Better logging at INFO level
- 2696	Pulp streamer not 'streaming' content to squid

View this list [in Redmine](http://bit.ly/2pPKNCC).


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-05-25-sprint-19-demo.md
`````markdown
---
date: 2017-05-25T20:55:50+00:00
title: Sprint 19 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
This demo mainly consists of new features in Pulp 2.14, an important bugfix in 2.13.1, a community
update, and an update on the state of Pulp. There were technical difficulties starting at 25:28 so
two agenda items were skipped.

<iframe width="560" height="315" src="https://www.youtube.com/embed/7-CjhhxhM2k" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=1m11s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=4m48s)

[Improved Memory Performance by disabling Transparent Huge Pages (dkliban)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=7m40s)

[Custom Alternate Content Source Headers (bizang)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=12m53s)

[OSTree Content Units Based On Commit History (jortel)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=14m30s)

[Important fix in 2.13.1 to rsync publish repos in fast forward mode (ipanova)](http://www.youtube.com/watch?v=7-CjhhxhM2k&t=21m48s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-06-15-sprint-20-demo.md
`````markdown
---
date: 2017-06-15T20:55:50+00:00
title: Sprint 20 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
This demo highlights some important Pulp2 bugfixes, shows Pulp3 progress,
gives an update on Debian support for Pulp, and provides a state of Pulp
update.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Ax_d1IudlxM" frameborder="0" allowfullscreen></iframe>

[State of Pulp (dkliban)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=0m35s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=2m2s)

[File Plugin Issue Tracker (bmbouter) (3.0)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=5m10s)

[Publish Task in Pulp3 (dkliban) (3.0)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=6m45s)

[Pulp3 Plugin API Semantic Versioning Strategy (bizhang) (3.0)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=10m44s)

[Installing Pulp from PyPI (bizhang) (3.0)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=11m35s)

[As a user GET /crane/repositories/v2 shows v2 repositories (ipanova)](http://www.youtube.com/watch?v=Ax_d1IudlxM&t=14m45s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-06-20-pulp-2.13.2-generally-available.md
`````markdown
---
date: 2017-06-20T20:55:50+00:00
title: Pulp 2.13.2 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - puppet
---
<!-- more -->
Pulp 2.13.2 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, and the Puppet Plugin.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp

- 2776	pulp-manage-db requires pulp services to be shut down even in dry run mode
- 2770	Tasks stuck in waiting state if received while qpidd is down
- 2741	Pulp is not compatible with Django 1.10
- 2728	Check and fix Pulp compatibility with python-mongoengine >= 0.11.0 in Fedora 26/Rawhide
- 2639	Upgrade fails on Fedora

RPM Support

- 2797	Single consumer aplicability generation does not work unless profile already has applicability generated

Puppet Support

- 2750	pulp_puppet is not compatible with django 1.10
- 1237	Puppet Install Distributor does not raise exception when non-optional install_path is missing

View this list [in Redmine](http://bit.ly/2sxXeIz).

## Fedora Uprade
This release appears to resolve the issue of upgrading from the pulp packages in Fedora's repositories to the upstream pulp packages.


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-06-22-pulp-qe-intern-update.md
`````markdown
---
date: 2017-06-22T20:55:50+00:00
title: 2017 Pulp QE Intern Update
author: Elijah DeLee
tags:
  - pulpqe
---
<!-- more -->
Virtualization, docker, automated tests and more! 
----------------

This summer I am interning with the QE team at Redhat for Pulp Project. To do
the work of re-creating bugs and writing tests, I will need to install various
versions and builds of Pulp. To enable me to do this repeatedly and without
endangering my local system or generating a difficult to duplicate state of the
application, this week I was trained on the various tools the Pulp QE team use
to automate their work flow. This included setting up virtual machines on my
local system using [libvirt](https://libvirt.org/), as well as scripting the
cloning of these VM's and using [Ansible](https://www.ansible.com/) to install
various builds of pulp on each VM. Additionally I got introduced to beaker, an
internal tool for provisioning machines, and was shown how to use a Jenkins job
the pulp team uses to install various versions of pulp.

Controlling the pulp-server remotely
----------------

Pulp can be installed in a distributed fashion, as well as be controlled
remotely by the pulp-admin client. I used pulp to both pull in existing RPM
repositories as well and create a new RPM repo with a few RPM files, and enable
a system to install the package via `dnf` from the repository hosted on the
pulp server.

Docker demo
----------------

Midway through the week I took a brief break from working on Pulp while one of
the Satellite6  (downstream project of
[Katello](https://www.theforeman.org/plugins/katello/)) QE team, came
over and led us through a demo of [docker](https://www.docker.com/) and how he
uses it to run an automated test suite against Satellite6 (which uses Pulp).

At one point I had ten containers running this test suite all hammering a
Satellite6 instance! Watching my system monitor was quite entertaining as the
many thousands of tests ran. Then I walked through a demo of how Satellite6
works from a user perspective. This gave me a better idea of what role Pulp
plays in Satellite6. Customizing the content provided to different machines or
groups of machines is a powerful tool for system administrators using
Satellite6, and Pulp is the workhorse behind this functionality!

Pulp-smash
----------------

Finally, I got into working with pulp-smash, which is the test suite for pulp.
After setting up a python virtual environment and installing the developer
requirements, I did some exploration of the project in
[ipython](https://ipython.org/). Armed with this knowledge and our different
pulp VM's, I wrote a test that ensured, if the pulp version being tested was of
a sufficient version, a command could be executed and that it returned with a
successful exit code. By the end of the day Friday I had one pull request
updating the documentation to Pulp, and another adding a test to Pulp-Smash. I
had a lot of fun and I'm looking forward to all I have to learn and the
opportunity to contribute to such an active open source project.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-07-06-sprint-21-demo.md
`````markdown
---
date: 2017-07-06T20:55:50+00:00
title: Sprint 21 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
This demo highlights Debian content support with 2.14, Pulp 3.0 updates, a community update, and a state of Pulp update.

<iframe width="560" height="315" src="https://www.youtube.com/embed/0T84sdEfBWE" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=0m15s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=4m32s)

[Debian Content Support for Pulp 2 (misa) (2.14)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=7m42s)

[Napoleon style docstrings (asmacdo) (3.0)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=11m48s)

[Docs building check for pull requests on github (bizhang)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=13m59s)

[Generate random SECRET_KEY for Django as part of setup workflow (bizhang) (3.0)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=15m21s)

[Asynchronous updates of importer (dkliban) (3.0)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=16m14s)

[File importer using the ChangeSet provided by the plugin API (jortel) (3.0)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=19m40s)

[Side by side Pulp2/Pulp3 dev installs (asmacdo)](http://www.youtube.com/watch?v=0T84sdEfBWE&t=33m38s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-07-10-jenkins-job-builder.md
`````markdown
---
date: 2017-07-10T20:55:50+00:00
title: Developing Jenkins Jobs with Jenkins Job Builder
author: Elijah DeLee
tags:
  - pulpqe
---
<!-- more -->
The power of Jenkins
----------------

I first was exposed to Jenkins while working for an open source software
project out of my university that wanted to use continuous integration as a
part of their workflow. While services like [Travis](https://travis-ci.org/)
and [Semaphore](https://semaphoreci.com/) can be
excellent if you can accomplish your build within the constraints of the
systems they provide, they could not meet the needs of that project. Enter
[Jenkins](https://jenkins.io/), "the leading open source automation server".

Jenkins is an powerful tool, and much of this power comes from the fact that it
is very customizable. Configuring jobs via the web UI that Jenkins provides
leaves many things to be desired, however. First, the task is fraught with
human error. It is very easy to forget to expand that one nested menu and set a
critical value. Small mistakes like this can lead to faulty jobs that lead to
misleading results or a broken CI/CD pipeline causing a headache for all
involved.  Secondly, once you have constructed your house of cards, you have
only to experience a hard drive failure to lose all your work. Even more
likely, if something changes in your set up you may have to hand update dozens
of jobs so carefully configured with hours of mouse clicks.

Jenkins Job Builder (JJB)
----------------

To scale the process of Jenkins job definition it becomes obvious that one must
be able to generate Jenkins jobs based on templates. This allows the use of
variables so that you might test multiple versions against multiple OSes, or
vary other conditions while allowing yourself to share common steps and code
among jobs. Moreover, these assets should be under version control and stored
in some location other than the machine Jenkins is running on. The good news is,
this tool already exists!

[Jenkins Job Builder](https://docs.openstack.org/infra/jenkins-job-builder/),
installable via [pip](https://pypi.python.org/pypi/pip) allows the user to
generate the job definitions from YAML files and upload the XML job definitions
to your Jenkins instance.

PulpQE stores the YAML files and scripts used to generate the pulp jenkins jobs
with jenkins-job-builder in the
[pulp-ci](https://github.com/pulp/pulp-ci) repo.

While working on changes to these files, it is desirable to be able to try
them out locally, so I decided to give it a shot!

I have [Docker](https://www.docker.com/) set up on my Fedora 25 machine, so I spun up a Jenkins instance to
test it out. There is an official [Jenkins image on
DockerHub](https://hub.docker.com/_/jenkins/) so I pulled it down and served it
up on my localhost. _(More detailed guides for setting up jenkins from this
docker image are available on the Jenkins DockerHub page)_

    docker pull jenkins
    docker run -p 8080:8080 -p 50000:50000 jenkins

I then visited the Jenkins web UI at <code>http://localhost:8080</code> and was
directed to login with an admin account created during the install. After
changing the admin password, I chose to "download recommended plugins".

JJB documentation guided me to create a virtual environment to download and run
jenkins job builder in.

    cd $HOME
    python3 -m venv jjb-env
    source ~/jjb-env/bin/activate
    pip install jenkins-job-builder

Then, I needed to set up a configuration file for jenkins-job-builder.

    cat >> $HOME/jjb.ini << 'EOF'
    > [jenkins]
    > user=myadminaccount
    > password=myterribleplaintextpassword
    > url=http://localhost:8080
    > query_plugins_info=False
    >
    > [job_builder]
    > include_path=ci/jobs/scripts
    > EOF

With those pieces in place, I cloned the
[pulp-ci](https://github.com/pulp/pulp-ci) repo and tried to
upload a job to my local Jenkins instance.

    cd $HOME
    git clone https://github.com/pulp/pulp-ci
    cd pulp-ci
    jenkins-jobs --conf $HOME/jjb.ini --ignore-cache update ci/jobs pulp-installer

Happily, I was greeted with the messages:

    INFO:root:Updating jobs in ['ci/jobs'] (['pulp-installer'])
    ... output omitted ...
    INFO:jenkins_jobs.builder:Number of jobs generated:  1
    INFO:jenkins_jobs.builder:Creating jenkins job pulp-installer
    INFO:root:Number of jobs updated: 1

And lo and behold, there was a new job that popped up in the Jenkins dashboard!
Now I am ready to work on creating my own Jenkins jobs and getting them fine
tuned before shipping them off to our real Jenkins server.

Limitations
----------------

While Jenkins Job Builder does a lot to remedy concerns around being able to
migrate jobs from one instance of Jenkins to another without data loss or
excessive manual configuration, it does not manage all aspects of a complete
Jenkins set up. One should not, for example, manage credential migration from
one Jenkins to another with JJB. When credentials are stored in Jenkins, they
can then be referenced in JJB YAML files via their ID. If you set up a new
Jenkins instance you will have to put your credentials in place on the Jenkins
manually and then update the ID references in your JJB job definitions. If you
fail to update SSH key information or other data stored on Jenkins and mapped
to JJB via its ID, and your jobs are broken because of this incorrect data, JJB
has no way of knowing about this or informing you of the error.

Furthermore, this may be a case where in a local install of Jenkins you would
have to modify this data for testing purposes, and then switch it back to the
correct data for your official Jenkins instance.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-07-20-pulp-2.13.3-generally-available.md
`````markdown
---
date: 2017-07-20T20:55:50+00:00
title: Pulp 2.13.3 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - puppet
---
<!-- more -->
Pulp 2.13.3 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, and the Puppet Plugin.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp

- 2532	rsync distributor without force_full incorrectly skips publishing some units
- 2677	Occasional HTTP 403 errors when downloading rpms from on_demand / lazy sync repositories
- 2791	Rsync publish includes units which have not yet been published via the predistributor
- 2898	Django 1.10 breaks content app

RPM Support

- 2798	content can't be fetched for background or on-demand repositories
- 2773	ISO repo does not handle updates to files on manifest during re-sync correctly
- 2844	Rsync publish for RPM repo fails to run in fast forward mode
- 2681	Store errata package lists in a separate collection


View this list [in Redmine](http://bit.ly/2tfgXsY).

## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-07-27-sprint-22-demo.md
`````markdown
---
date: 2017-07-27T20:55:50+00:00
title: Sprint 22 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
This demo highlights recent docs improvements, Pulp3 file uploading, the
upcoming 2.14 test day, docker manifest list support in 2.14, a community
update, and a state of Pulp update.

<iframe width="560" height="315" src="https://www.youtube.com/embed/amsvHCnoNQc" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=0m41s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=4m20s)

[Banner on unsupported versions of documentation (asmacdo)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=8m34s)

[Artifact upload API (dkliban) (3.0)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=10m41s)

[Pulp 2.14 Test Day (elijah_d)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=13m32s)

[Docker Manifest List support added (ipanova) (2.14)](http://www.youtube.com/watch?v=amsvHCnoNQc&t=16m05s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-08-02-2.14-Test-Day.md
`````markdown
---
date: 2017-08-02T20:55:50+00:00
title: Test Day for 2.14 Beta
author: Elijah DeLee
tags:
  - pulpqe
---
<!-- more -->
Test Day on August 8th, 2017
-----------------------

The Pulp Quality Engineering team invite you to join us for a public 
[Test Day for the Pulp 2.14 Beta](https://pulp.plan.io/projects/pulp/wiki/Test_Day_on_August_8_2017)
release on Tuesday, August 8th.

New features for version 2.14 include the ability to host Debian repositories.

Many people want to get involved in open source development but are not sure
where to start.

Test days like this are a great way! 
You'll have the opportunity to learn about virtualization, bug reports,
user stories, how to talk to a REST API, how to monitor logs, and so much more.

Join us and learn more about the tools, people, and methods that make open
source happen, and meanwhile become a contributor yourself!

How you can contribute
------------------------

Test day goers can contribute in many ways

* Install and use pulp and provide us feedback on the usability of different
features.
* If you find something unclear in the docs, file and issue.
* Make a PR to improve the docs and close your own issue!
* Read the user stories for the features added in 2.14 and verify that their changes
provide the described functionality. Post a comment on the user story showing how you confirmed it.
* Recreate conditions that used to generate bugs and verify that they are longer present.
* Validate the existence of outstanding bugs! Post on the issue with details about your system.
* Run or create automated tests with [pulp-smash](https://github.com/PulpQE/pulp-smash).
* Learn how to to talk directly to pulp's API and test it that way.

The quality engineering team will be hanging out on [#pulp on
freenode](http://webchat.freenode.net/?channels=#pulp&uio=d4) all day to help
you set up pulp, decide what to test, and how to report your results to our
issue tracker and get involved in pulp! The more people, at all skill levels,
that join our community, the more robust our project becomes.

How to Join
------------------------

Find out how to join in on the
[Test Day Wiki](https://pulp.plan.io/projects/pulp/wiki/Test_Day_on_August_8_2017) on
pulp's issue tracker.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-08-08-community-survey-results.md
`````markdown
---
date: 2017-08-08T20:55:50+00:00
title: Pulp Community Survey Results
author: bizhang
---
<!-- more -->
About three weeks ago we launched the first Pulp Community Survey. Our goal was to poll the
community and use the data to create a well-received Pulp2 -> Pulp3 transition plan, and figure our
priorities after getting the Pulp3 MVP out the door.

We had a total of **27** responses, thank you everyone that replied!

Here's some statistics and insights we got out of the survey.

## Usage

![How long have you been using Pulp?](/images/communitysurvey/2017/how-long-using.png)

The majority of our users have been using Pulp for more than 2 years. It will be interesting to
see how this number changes in future surveys.

![What version of pulp do you use?](/images/communitysurvey/2017/pulp-version.png)

As the time of the survey 2.13 is the latest version of Pulp. We officially support the last two
.y releases. 63% of people are on a supported version of Pulp. Pulp is in an interesting position
since we are released with Katello, Foreman, and Satellite. Satellite 6.2 in particular is using
Pulp 2.8, which explains the uptick in 2.8 users. If there is some bug preventing you from
upgrading to a supported version of Pulp let us know on the #pulp channel on freenode.

![Upgrade Frequency](/images/communitysurvey/2017/upgrade-frequency.png)

This supports the data from the pulp version graph. 52% our users upgrades pulp when new releases
come out, and 28% are pinned to downstream products.


![How do you interact with Pulp?](/images/communitysurvey/2017/how-interact.png)

More people use the CLI over the REST API. For Pulp3 we plan on generating the CLI from the REST
API schema, so everyone should see a more feature complete CLI.


![Pulp Plugin Usage](/images/communitysurvey/2017/plugin-usage.png)

No surprises here, 96% of users uses the RPM plugins. Most people use 1-2 plugins. And one person
exclusively uses the debian plugin.

## Workflows

The most popular workflow is using Pulp to promote content; content is copied from dev repos to
testing repo to production repos.

There is an interesting variation where instead of coping content between repos, a symlink is
changed from current to previous, so the yum.conf files on the clients are not changed.


Other workflows include:

* Managing custom content
* repo mirroring
* Importing multiple repos from a central config file via https://github.com/nbetm/python-pulpadm
* Content Management with Katello, using Pulp for status checks and listing object details.


## Database

### How big is your /var/lib/pulp directory?

/var/lib/pulp varied in size, from 2GB to 2.8TB. The mean size (after trimming max and min values)
is 233GB with a standard deviation of 198. This data supports our planned strategy of not touching
/var/lib/pulp during the Pulp2 -> Pulp3 migration and leaving the Pulp2 symlinks in place without
a cleanup until we have a confirmed successful migration to Pulp 3, since doing such during
migration would be too time insensitive and they may be necessary for rollback.  Removing symlinks
should be painless after a successful migration to Pulp 3.


### How big is your Pulp database?

MongoDB size on disk ranged from 56KB to 52GB, averaging (after trimming) 18.8GB with a standard
deviation of 8.9.

### Migrations

There's an equal amount of people who wants in-place migration and side-by-side migration. We plan
on testing and supporting both approaches. It appears that most users who want to do an in-place
migration find about 2 hours of full downtime (0 pulp interaction), and 8 hours of content serving
downtime is acceptable. We will keep these numbers in mind while testing the Pulp2 -> Pulp3
migration. Expected downtime for people who prefer side-by-side migrations is 0 :)


## Pulp3

### What missing features would prevent your adoption of Pulp3?

It appears that the MVP features is viable for most users. The most requested supported plugin
types is RPM (of course), and (surprisingly) Debian.


### What is the one feature you would really like to see added in Pulp 3?

The number one requested feature is a separate Web UI. This would definitely not be prioritized
anytime soon, unless someone wants to contribute something (hint hint).

Some other popular feature requests:

* Database other than Mongo :)
* Auto orphan cleanup
* Smarter sync for specific packages and dependencies from large RPM repos
* More plugins (Rubygems, NPM, Java)


Big thanks to everyone that filled out the survey! It's really great to get some use cases and
hard data to help us make decisions with Pulp 3.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-08-09-pulp-2.14.0-generally-available.md
`````markdown
---
date: 2017-08-09T20:55:50+00:00
title: Pulp 2.14.0 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - puppet
  - debian
  - docker
  - crane
categories:
  - Releases
---
<!-- more -->
Pulp 2.14.0 is now generally available, and can be downloaded from the 2.14 stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

New features for Pulp 2.14 include new features added to the Pulp platform, as well as the Puppet, RPM, Python, and Docker plugins. Many bug fixes are also included in the 2.14.0 release.

More information about these new features can be found in the features list below, as well as in the [2.14 release notes](http://docs.pulpproject.org/en/2.14/user-guide/release-notes/2.14.x.html)

[Pulp Debian Docs](https://github.com/pulp/pulp_deb/#debian-support)

Try out the new features, and let us know how they work for you!

## New Plugin:  Pulp Debian

With this release we have included an updated Pulp Debian plugin courtesy of our community contibutor Mihai Ibanescu!

This plugin should enable you to work with debian repositories

## Fedora 26 Support:  https://pulp.plan.io/issues/2961

We hoped to bring Fedora 26 support in with this release, but there are still some issues with pulp on Fedora 26.  

We are looking at resolving these, and will hopefully be able to provide Fedora 26 builds either shortly after this release, or with the 2.14.1 release.

## Upgrading

The Pulp 2 stable repository is included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```
The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## New Features

### Pulp
- 2673: As a user browsing on docs.pulpproject.org, I can see a banner displaying when I am browsing docs of an unsupported release
- 1282: As an EC2 user, I would like to set up a RHUI as an alternate content source

### Crane
- 2385: Update crane to serve manifest lists

### Debian Support
- 2763: pulp_deb: repo sync fails: the feed is expected to include dists/stable/
- 2637: As a user, I'm able to import Debian packages with their dependencies represented correctly.

### Docker Support
- 2735: Add docs about v1 protocol limitation
- 2384: As a user I can sync manifest lists

### OSTree Support
- 2594: As a User I want Pulp OSTree to create a new unit for each commit version on a branch

### RPM Support
- 2730 As user I want to be able to provide custom rsync arguments to rsync distributor


View this list [in redmine](http://bit.ly/2tvbza7)


## Issues Addressed

### Pulp
- 2903: Process Recycling feature causes HTTP event notifier to be unreliable
- 2819: set DJANGO_SETTINGS_MODULE env variable in docs/config.py
- 2808: Clarify use of `pulp-consumer`
- 2786: The content wsgi does not respect logging configuration
- 2783: CopyDirectoryStep should copy mtime
- 2874: Race condition during applicability regeneration for consumers with same profile

### RPM Support
- 2754: RPM uploads appear to be missing metadata information

### Crane
- 2920: Crane does not redirect correctly to schema 1 path
- 2759: Set followlinks to True to visit directories pointed to by symlinks
- 2723: As a user GET /crane/repositories/v2 shows v2 repositories

### Debian Support
-  878: Convert pulp_deb to use MongoEngine models

### Docker Support
- 2924: Accept headers are not correct during the request to the registry
- 2848: remove tag and name field on the Manifest model
- 2724: `pulp-admin docker repo create --help` states v1 content is synced by default
- 2678: 'relative_repo_path' in docs should be 'repo_relative_path'

### OSTree Support
- 2769: Relative paths are not checked for collisions

### Python Support
- 2900: Add http config change install documentation for Pulp Python
- 2899: Pulp Python plugin spams logs when downloading wrong filetypes from pypi

All bug fixes from Pulp 2.13.3 and earlier are also included in Pulp 2.14.

View this list [in redmine](http://bit.ly/2gOEG22)


## End of EL6 Support

As mentioned in the 2.11.0 release notes, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-08-17-sprint-23-demo.md
`````markdown
---
date: 2017-08-17T20:55:50+00:00
title: Sprint 23 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Sprint 23 Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/RtLwGFDv8LQ" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=0m29s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=3m35s)

[Skip download of docker blobs with foreign mediatype (ipanova)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=6m00s)

[User will be able to upload Docker V2 Schema 2 image saved using skopeo (mansari)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=9m03s)

[QE testing confirms that user can migrate from 2.11.z on RHEL6 --> 2.13.z on RHEL7 (elijah_d)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=12m37s)

[pep8speaks (daviddavis)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=18m11s)

[Status api in pulp 3 (daviddavis)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=19m30s)

[Content creation REST API in pulp 3 (dkliban)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=21m13s)

[Download API prototypes based on asyncio (bmbouter)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=25m15s)

[--base-dir option for checkout.py (bmbouter)](http://www.youtube.com/watch?v=RtLwGFDv8LQ&t=28m58s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-09-07-sprint-24-demo.md
`````markdown
---
date: 2017-09-07T20:55:50+00:00
title: Sprint 24 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Sprint 24 Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Z53fBQe5h_I" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=Z53fBQe5h_I&t=0m17s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=Z53fBQe5h_I&t=2m10s)

[Authenticating against docker registry with basic auth (bizhang) (2.14.1)](http://www.youtube.com/watch?v=Z53fBQe5h_I&t=4m35s)

[Fix for applicability tasks not being cancelled on worker restart (dalley)](http://www.youtube.com/watch?v=Z53fBQe5h_I&t=7m30s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-09-26-plugin-api-alpha.md
`````markdown
---
date: 2017-09-26T20:55:50+00:00
title: Pulp 3 Plugin API Alpha
author: Michael Hrivnak
tags:
  - "3.0"
---
<!-- more -->
You are invited to try the first alpha release of the Pulp 3 Plugin API! Pulp 3
includes a dedicated python package for the plugin API. This package is
versioned separately to communicate backward-compatibility, and it enables
developers to write plugins in as simple and straight-forward of a way as
possible. That package should contain everything you need to create a plugin.

The API is complete enough to try, and we would love your feedback. It is
possible to synchronize and publish repositories, and there are two examples of
working plugins for you to reference.

In particular, we would appreciate feedback on both the low-level and
high-level Importer APIs. The [pulp_example](https://github.com/pulp/pulp_example)
plugin demonstrates how to implement a synchronization workflow end-to-end that
uses the low-level API, with the plugin writer controlling the details. The
[pulp_file](https://github.com/pulp/pulp_file) plugin demonstrates an
importer with equivalent behavior that uses the high-level API, in which case
the API handles many details and the plugin writer is responsible for much
less.

Scope
-----

Pulp 3 has enough core functionality in place to exercise these plugins through
the REST API. But we would like to emphasize that this alpha release is focused
on the plugin writer API only. Please consider the rest of Pulp 3’s behavior to
be “under construction” for now, and we will invite broader feedback with a
future alpha release.

Also please note that the plugin API itself is not yet complete. In particular,
the “copy” feature is missing, and “upload” will see major improvements. But
sync and publish are ready to try!

Frequency
---------

Look for alpha releases to appear regularly [on PyPI](https://pypi.python.org/pypi/pulpcore-plugin).
We will be targeting a weekly cadence during the alpha phase.

Get Started
-----------

Ready to learn more? Start by
[installing Pulp core](https://docs.pulpproject.org/en/3.0/nightly/installation/instructions.html)
to just work on plugins, or set up a
[full dev environment](https://docs.pulpproject.org/en/3.0/nightly/contributing/dev-setup/index.html)
to also possibly work on Pulp Core.

Then visit the
[plugin writer guide](https://docs.pulpproject.org/en/3.0/nightly/plugins/plugin-writer/index.html).

We encourage sending questions and feedback to the
[pulp-dev@redhat.com](https://www.redhat.com/mailman/listinfo/pulp-dev) email
list. From discussions there, we can collaborate on filing bug reports and RFEs
as appropriate.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-09-29-sprint-25-demo.md
`````markdown
---
date: 2017-09-29T20:55:50+00:00
title: Sprint 25 Demo
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Sprint 25 Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/XXkHrqutYlU" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=XXkHrqutYlU&t=0m34s)

[Pulp3 Ansible Galaxy Installation (ipanova) (3.0)](http://www.youtube.com/watch?v=XXkHrqutYlU&t=4m38s)

[Plugin Writer's Guide and other resources for plugin writers (dkliban) (3.0)](http://www.youtube.com/watch?v=XXkHrqutYlU&t=8m57s)

[asyncio Downloaders (bmbouter) (3.0)](http://www.youtube.com/watch?v=XXkHrqutYlU&t=14m17s)

[Publishing (jortel) (3.0)](http://www.youtube.com/watch?v=XXkHrqutYlU&t=21m01s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-10-05-pulp-2.14.1-generally-available.md
`````markdown
---
date: 2017-10-05T20:55:50+00:00
title: Pulp 2.14.1 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - puppet
---
<!-- more -->
Pulp 2.14.1 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, Puppet Plugin, and the nectar library.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp

- 2961	Pulp 2.14 broken on Fedora 26
- 2734	task group never quite finishes if pulp is restarted in the middle of task run
- 2954	Ensure that queued tasks are not lost by enabling task_reject_on_worker_lost for Celery 4
- 2959	Task results can be lost due to race condition
- 2758	Documentation on Pulp's storage logic
- 3018	mongo 3.4 warning over the use of aggregate

RPM Support
- 3004	recursive errata copy does not copy rpms

Docker Support
- 2956	As a user, I can sync from registries that use basic auth

View this list [in Redmine](http://bit.ly/2xAPLbV).


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-10-26-pulp-2.14.2-generally-available.md
`````markdown
---
date: 2017-10-26T20:55:50+00:00
title: Pulp 2.14.2 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
  - docker
  - python
  - nectar
---
<!-- more -->
Pulp 2.14.2 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, Puppet Plugin, and the nectar library.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25 & 26](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp

Pulp

- 3036	Pulp streamer dumps core on F26
- 2979	Celery workers may deadlock when PULP_MAX_TASKS_PER_CHILD is used

Python Support
- 2964	Too easy for user to create empy python repo when syncing from feed

Docker Support
- 2847	Skip download of blobs with foreign mediatype.

Nectar
- 2960	UnicodeEncodeError in case of a non-ASCII character in comments provided with SSL cert/key/CA

View this list [in Redmine](http://bit.ly/2ySSu3K).


## el6 Support Reminder

As mentioned previously, Pulp no longer supports el6 starting with 2.12.

Pulp users running on RHEL or CentOS 6 are recommended to upgrade their Pulp server to
the current major version of that OS, RHEL or CentOS 7.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-11-09-community-demo.md
`````markdown
---
date: 2017-11-09T20:55:50+00:00
title: Community Demo Nov 10, 2017
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/KpnTeSIcwd8" frameborder="0" allowfullscreen></iframe>

[State of Pulp (mhrivnak)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=0m23s)

[Community Update (bmbouter)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=5m31s)

[Installing pulp3 from source (bizhang) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=8m17s)

[pulp_python 3.0 high level use cases (bizhang) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=9m34s)

[Task object improvements: content_summary and spawned_tasks (dalley) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=11m12s)

[Pulp3 JWT authentication (daviddavis) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=15m41s)

[Pulp3 Artifact and Content plugin API improvements (dkliban) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=19m52s)

[Pulp3 unit tests (daviddavis) (3.0)](http://www.youtube.com/watch?v=KpnTeSIcwd8&t=24m01s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-11-21-pulp-2.14.3-generally-available.md
`````markdown
---
date: 2017-11-21T20:55:50+00:00
title: Pulp 2.14.3 Generally Available
author: Patrick Creech
tags:
  - release
  - rpm
---
<!-- more -->
Pulp 2.14.3 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp Platform, RPM Plugin, Puppet Plugin, and the nectar library.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora 24 & 25 & 26](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- 3039    NotFound exception if consumer is deleted when its queue is gone
- 3090    Uploading an invalid rpm produces an error message: "unexpected error occurred importing uploaded file: 'primary'"

### RPM Support
- 3120    Race condition on saving a distribution unit during "smart proxy" sync
- 3047    ISO repo doesn't correctly handle updates to files for content already in Pulp
- 3100    Removal of existing iso units doesn't work if there are multiple iso files
- 3115    One sample request in API doc for regenerate_applicability is wrong

View this list [in Redmine](http://bit.ly/2AHUVEf).

## End of the (2.14) line

With pending changes to pulp's commit and packaging processes coinciding with the upcoming 2.15.0
release, we have decided to explicitly stop the 2.14 line with the release of 2.14.3 to help provide
a clean break in process for those involved.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2017-12-06-community-demo.md
`````markdown
---
date: 2017-12-06T20:55:50+00:00
title: Community Demo Dec 06, 2017
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/jorQXb_KRQk" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=1m17s)

[Docker Manifest List Upload (asmacdo) (2.15)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=4m37s)

[Live REST API Documentation (bizhang) (3.0)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=9m04s)

[Apache / Nginx integration (jortel) (3.0)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=11m38s)

[Removal of pulp_celerybeat (daviddavis) (3.0)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=15m40s)

[Immutable repository URIs (dkliban) (3.0)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=18m06s)

[Migrated pulpproject.org with osci.io help (bmbouter) (3.0)](http://www.youtube.com/watch?v=jorQXb_KRQk&t=20m00s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-01-15-upcoming-conferences.md
`````markdown
---
date: 2018-01-15T20:55:50+00:00
title: Upcoming Speaking/Events Jan & Feb 2018
author: Brian Bouterse
---
<!-- more -->
Here is a list of Pulp events and talks at upcoming conferences in January and February 2018. We
plan to post links to talk videos as they become available.

### Pulp 3 - Simpler, Better, More awesome
A talk covering the major changes coming with Pulp 3 relative to Pulp 2.

* [Feb 3rd @ 10:30AM @ FOSDEM in Brussels, Belgium](https://fosdem.org/2018/schedule/event/pulp3/)
* [Feb 6 @ 2:40PM @ Config Management Camp in Ghent, Belgium](http://cfgmgmtcamp.eu/schedule/foreman/pulp3.html)

### Pulp 3 - Plugin Writer Workshop
A workshop to help plugin writer's plan their plugins and get started on development.

* [Jan 28 @ 10:30AM @ DevConf in Brno, Czech Republic](https://devconfcz2018.sched.com/event/DKpG/pulp-3-plugin-writing-workshop)
* [Feb 7 @ Foreman Construction Day in Ghent, Belgium](http://cfgmgmtcamp.eu/fringe.html#foreman)

### Booths

* Pulp/Foreman Booth @ [DevConf](https://devconf.cz/)
* Foreman/oVirt/Pulp Booth @ [FOSDEM](https://fosdem.org/2018/)


### Meet up

If you're in the area for any of these events and want to meet up, tweet at
[@pulpproj](https://twitter.com/pulpproj) or come by the booth!

If you are interested in having a similar talk given in your area, please reach out via twitter,
IRC, or email.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-01-18-community-demo.md
`````markdown
---
date: 2018-01-18T20:55:50+00:00
title: Community Demo Jan 18, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/yFio9HY2bmA" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=yFio9HY2bmA&t=0m45s)

[Plugin API changes for sync and publish (asmacdo) (3.0)](http://www.youtube.com/watch?v=yFio9HY2bmA&t=8m05s)

[UUIDs in URLs for objects in Pulp 3 (daviddavis) (3.0)](http://www.youtube.com/watch?v=yFio9HY2bmA&t=15m24s)

[Filtering in Pulp 3 (daviddavis) (3.0)](http://www.youtube.com/watch?v=yFio9HY2bmA&t=16m53s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-02-14-community-demo.md
`````markdown
---
date: 2018-02-14T20:55:50+00:00
title: Community Demo Feb 14, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/BT8rzG6ATEM" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=BT8rzG6ATEM&t=0m26s)

[Unlinking publishers/importers from repositories (daviddavis) (3.0)](http://www.youtube.com/watch?v=BT8rzG6ATEM&t=4m13s)

[Create a repository version by adding/removing content from latest repository version (dkliban) (3.0)](http://www.youtube.com/watch?v=BT8rzG6ATEM&t=9m04s)

[Task list view now shows the worker name (dalley) (2.16)](http://www.youtube.com/watch?v=BT8rzG6ATEM&t=13m50s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-02-27-pulp-2.15.2-generally-available.md
`````markdown
---
date: 2018-02-27T20:55:50+00:00
title: Pulp 2.15.2 Generally Available
author: Brian Bouterse
tags:
  - release
---
<!-- more -->
Pulp 2.15.2 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp, Puppet Support, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- 2835	Tasks stuck in waiting after restart of pulp services
- 3129	occasional httpd segfault
- 3317	rsync_distributors: 'rsync_extra_args' not used in all calls to rsync
- 3319	Certificates used in unit testing are expired
- 3349	pulp-admin -vvv returns incorrect information for "worker_name" when querying task results
- 3356	queue_name property on worker model returns invalid results when the worker name is None
- 3383	Worker model's "queue_name" property returns the wrong name on Celery 4.x

### Puppet Support
- 3314	puppet install distributor broken on F27 due to SELinux denials

### RPM Support
- 3342	Relative import breaks Python 2.4 (RHEL 5)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-03-01-deprecating-consumers.md
`````markdown
---
date: 2018-03-01T20:55:50+00:00
title: Deprecating Consumers
author: David Davis
tags:
  - release
  - platform
  - "3.0"
---
<!-- more -->
One of the core tenets in the [Unix Philosophy](https://en.wikipedia.org/wiki/Unix_philosophy) is
that programs should do one thing well. It's something we on the Pulp team believe in. In line with
this philosophy, there have been a couple features in Pulp 2 that are being removed in Pulp 3 to
better allow Pulp to focus on its primary goal of managing software packages.
[Nodes](https://pulpproject.org/2016/12/07/deprecating-nodes/) were one feature of Pulp 2 that got
cut. Pulp's support for Consumers is another feature that we're not planning on supporting in Pulp
3.

Pulp 2 provided the ability to manage Consumers of Pulp content. With Pulp 2, users could use Pulp
to install and track content on machines (called Consumers). However, there are number of tools
available today that can do a much better job automating the installation/updating/removal of
packages on Consumers. One such tool is Ansible which, for instance, has a [DNF
module](http://docs.ansible.com/ansible/latest/dnf_module.html) for managing packages with the dnf
package manager.

By focusing on our primary mission of managing software, we believe we can build a stronger product.
That said, we'd love to hear from you, our Pulp users, about how you use Pulp and how this change
will affect you. Feel free [to reach out to us](https://pulpproject.org/help/) via our mailing lists
or IRC to let us know.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-03-13-pulp-3.0-core-beta.md
`````markdown
---
date: 2018-03-13T20:55:50+00:00
title: Pulp 3.0 Core Beta on 25-Apr-2018
author: Robin Chan
tags:
  - release
  - "3.0"
---
<!-- more -->
We have been busy working on the Pulp 3.0 Core Beta, the next step in our roadmap to a Pulp 3 GA.

One of the Pulp 3 key objectives was to provide a true plugin API. Since the September 2017 Pulp 3 Plugin API Alpha release, we have appreciated the active reception and valuable feedback. The feedback we have received from the community has been key in validating and informing some design decisions shaping the Pulp core functionality.

We are working toward completing this core functionality and are excited to announce our plans for the Pulp 3.0 Core Beta deliverable.  This email describes the value proposition for Pulp 3.0 Core Beta, the feature set of the deliverable, and when it will be delivered. We invite to you review this milestone and provide feedback.

## Value - What will this do for me?

Pulp 3.0 Core Beta will provide all major functionality required by most users and a Plugin API to allow power users and plugin writers to start planning the impact of moving to Pulp 3.0 from Pulp 2.0 including writing plugins.

## What is it?

We have loosely discussed and described most of the functionality in the [MVP](https://pulp.plan.io/projects/pulp/wiki/Pulp_3_Minimum_Viable_Product). The Pulp 3.0 Core Beta will also commit to delivery of a few more items of interest to our community that are described below.


## Highlights of the Pulp 3.0 Core Beta 

### Stack
* Relational Database: Compatible with PostgreSQL and SQLite
* Scalable workers safely running concurrent tasks
  * Compatible with Qpid Proton and RabbitMQ 
* Web servers: Compatible with Apache, Nginx, and Django development server 
* Installation via PyPI, source, or RPM

### Features:
* REST API
* Fetch (sync) content from external sources
* Upload content
* Versioned Repositories
* Fast Promotion and Rollback

### Plugin API
* Semantically versioned
* Provides utilities:
  * Concurrent downloads
  * Safely adding/removing units to repository versions and publications
  * Tasking integration
  * Filesystem management

### Documentation
* Conceptual overview
* Plugin Writer Docs
* REST API documentation

### The Pulp 3.0 core beta will be released alongside plugin betas:
* pulp_file
* pulp_ansible
* pulp_python

### Roadmaps for Pulp 3.0 beta compatible plugins:
* RPM
* Docker
* OSTree



The Pulp 3.0 Core Beta will be available Wednesday April 25, 2018.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-03-15-community-demo.md
`````markdown
---
date: 2018-03-15T20:55:50+00:00
title: Community Demo March 14, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/B7etFmb94aY" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=B7etFmb94aY&t=0m35s)

[sync rich dependencies (milan) (2.15.3)](http://www.youtube.com/watch?v=B7etFmb94aY&t=6m40s)

[SUSE Errata support (bizhang) (2.16.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=11m12s)

[Changes to CI/Travis infrastructure (sqlite docs pulp_smash smoke tests for pulpcore and pulp_file) (daviddavis) (3.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=14m07s)

[Simpler install docs (bmbouter) (3.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=17m58s)

[Multi-resource locking (daviddavis) (3.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=21m49s)

[Sqlite as the default db (bmbouter) (3.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=25m33s)

[Simplification of the pulp_file content API (daviddavis) (3.0)](http://www.youtube.com/watch?v=B7etFmb94aY&t=30m20s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-03-20-pulp-2.15.3-generally-available.md
`````markdown
---
date: 2018-03-20T20:55:50+00:00
title: Pulp 2.15.3
author: Brian Bouterse
tags:
  - release
---
<!-- more -->
Pulp 2.15.3 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Docker Support, Pulp, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Docker Support
- [3286	Sync logic should not assume on schema1 by default existence](https://pulp.plan.io/issues/3286)
- [3357	docker_distributor_web is racy, not atomic](https://pulp.plan.io/issues/3357)
- [3258	Update with new recipe for v2s1 manifest upload ](https://pulp.plan.io/issues/3258)

### Pulp
- [3246	Update branching.rst to match pup-0003](https://pulp.plan.io/issues/3246)
- [3347	Advise users to use `setsebool` to set pulp_manage_rsync](https://pulp.plan.io/issues/3347)
- [3386	PEP8 Pulp's docs/conf.py](https://pulp.plan.io/issues/3386)

### RPM Support
- [3307	import_upload: improve data validation](https://pulp.plan.io/issues/3307)
- [3339	Missing docs on how to import RPM package which has rich dependencies in Requires](https://pulp.plan.io/issues/3339)
- [3353	Missing docs on importing RPM repository module metadata](https://pulp.plan.io/issues/3353)
- [3411	Document Implications that Pulp2 does not support metalink for rpm syncing](https://pulp.plan.io/issues/3411)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-03-26-reclaiming-disk-space-from-mongodb.md
`````markdown
---
date: 2018-03-26T20:55:50+00:00
title: Reclaiming Disk Space from MongoDB
author: David Davis
---
<!-- more -->
MongoDB can often eat up large amount of disk space especially in deployments that are under heavy
load. It's possible to reclaim some of this disk space by using Mongo's repair utility. Before you
start this process though, **it is highly recommended you back up your MongoDB database**.

First, check the amount of disk space being used by MongoDB by connecting to MongoDB and running the
db stats command:

```
$ mongo pulp_database
MongoDB shell version: 3.2.12
connecting to: pulp_database
> db.stats()
{
        "db" : "pulp_database",
        "collections" : 44,
        "objects" : 698,
        "avgObjSize" : 639.756446991404,
        "dataSize" : 446550,
        "storageSize" : 811008,
        "numExtents" : 0,
        "indexes" : 147,
        "indexSize" : 1474560,
        "ok" : 1
}
```

Here you can see my database is using only about 800 kilobytes as this is a new installation of
Pulp. Now the command we want to run to reclaim disk space is [the repairDatabase
command](https://docs.mongodb.com/manual/reference/command/repairDatabase/).

There are a couple important things to note though. First, depending on the size of your database,
this could take a long time. The second is that you'll need free space on your disk equal to the
size of your current database plus 2 GB.

With that out of the way, the next step is to stop your pulp services:

```
sudo systemctl stop goferd httpd pulp_workers pulp_celerybeat pulp_resource_manager pulp_streamer
```

Now, there are two ways to run the repair command. The first way is to use the MongoDB shell:

```
$ mongo pulp_database
MongoDB shell version: 3.2.12
connecting to: pulp_database
> db.repairDatabase()
{ "ok" : 1 }
```

The alternative is to run the repair command from the command line. Make sure to run this command as
the mongodb user instead of root to avoid problems with permissions. Also, you'll need to figure out
the path to your database which should be set in `/etc/mongod.conf`.

```
sudo -u mongodb mongod --dbpath /var/lib/mongodb --repairpath
```

After you run the repair command, you can check the size of the database again using `db.stats()`.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-04-03-pulp-2.16.0-generally-available.md
`````markdown
---
date: 2018-04-03T20:55:50+00:00
title: Pulp 2.16.0
author: Brian Bouterse
tags:
  - release
---
<!-- more -->
Pulp 2.16.0 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Debian Support, Packaging, Pulp, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Debian Support
- [80	Design data model to support Debian repos](https://pulp.plan.io/issues/80)
- [2938	Add pep8speaks](https://pulp.plan.io/issues/2938)
- [2764	Ability to publish more than one dist+component combination](https://pulp.plan.io/issues/2764)
- [2765	Ability to sync more than one dist/component](https://pulp.plan.io/issues/2765)

### Packaging
- [3407	Upgrade the Celery stack that Pulp ships on EL7 to Celery + Kombu 4.x](https://pulp.plan.io/issues/3407)

### Pulp
- [3135	As a user, I have a setting to mitigate when workers go missing under heavy loads](https://pulp.plan.io/issues/3135)
- [3352	Make config.get_boolean return given default value](https://pulp.plan.io/issues/3352)

### RPM Support
- [3474	gpg_cmd configuration option should not be accepted in repo config or overrides](https://pulp.plan.io/issues/3474)
- [3091	As a user, I can create a manifest for the files in a directory](https://pulp.plan.io/issues/3091)
- [3377	Add support for SUSE Errata format](https://pulp.plan.io/issues/3377)
- [3444	I can sign packages ONLY with gpg, and only with one key](https://pulp.plan.io/issues/3444)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-04-04-community-demo.md
`````markdown
---
date: 2018-04-04T20:55:50+00:00
title: Community Demo Apr 04, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Vl-wlDoMJc0" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=Vl-wlDoMJc0&t=0m39s)

[Pulp3 Orphan and Artifact Cleanup (daviddavis) (3.0)](http://www.youtube.com/watch?v=Vl-wlDoMJc0&t=5m25s)

[Pulp3 syncing Ansible roles (daviddavis) (3.0)](http://www.youtube.com/watch?v=Vl-wlDoMJc0&t=9m15s)

[New Pulp2 release process documentation (bmbouter)](http://www.youtube.com/watch?v=Vl-wlDoMJc0&t=14m45s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-04-25-beta-release.md
`````markdown
---
date: 2018-04-25T20:55:50+00:00
title: Pulp 3.0 Core Beta 1 Release
author: Austin Macdonald
tags:
  - release
  - "3.0"
---
<!-- more -->
## pulpcore 3.0 beta 1

Pulpcore 3.0 beta 1 has been released, and can be [installed from
PyPI](https://docs.pulpproject.org/en/3.0/nightly/installation/instructions.html). We recommend
getting started with the [file plugin](https://github.com/pulp/pulp_file/blob/master/README.rst).

[Pulp 3 documentation](https://docs.pulpproject.org/en/3.0/nightly/index.html) is built nightly.
Pulp 3 concepts and changes are covered in our [overview documentation](https://docs.pulpproject.org/en/3.0/nightly/overview/index.html).
If you find problems or have features you’d like to request please [file an issue](https://docs.pulpproject.org/en/3.0/nightly/bugs-features.html)

## Pulp 3 Highlighted New Features

- Relational database. We designed Pulp 3 to be SQL agnostic, it was developed with SQLite and
  PostgreSQL.
- Pulp 3 is installable with pip, and can be run on most linux systems.
- The set of content in each repository is versioned.
- Promotion and rollback are fast, synchronous calls.
- Auto-generated, always up-to-date [API reference
  documentation](https://docs.pulpproject.org/en/3.0/nightly/integration-guide/rest-api/index.html#pulpcore-rest-api)

## What to expect

#### Weekly Releases to PyPI

Releases of [pulpcore](https://pypi.org/project/pulpcore/) and
[pulpcore-plugin](https://pypi.org/project/pulpcore-plugin/) will continue to be announced on the
lists.

#### Changes will be communicated

All of the Pulp 3 APIs may change during the beta process. Breaking changes will be clearly
communicated in release notes, and on mailing lists when applicable.

Betas are not part of a supported upgrade path. Migrations from Pulp 2 are planned, but not yet
implemented. We do not support upgrades between betas.


#### Plugin betas

Keep an eye on pulp-list for announcements of plugins entering beta.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-04-25-community-demo.md
`````markdown
---
date: 2018-04-25T20:55:50+00:00
title: Community Demo Apr 25, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/4uV0s_yF2TA" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=0m30s)

[Publishing a new repository version (dkliban) (3.0)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=6m14s)

[New live docs endpoint and filtering (dalley) (3.0)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=8m19s)

[Status api changes and task serialization (dalley) (3.0)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=13m53s)

[Pulp3 downloader's automatic retry on HTTP 429 response (bmbouter) (3.0)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=19m38s)

[Validating distribution path overlaps (daviddavis) (3.0)](http://www.youtube.com/watch?v=4uV0s_yF2TA&t=23m10s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-04-27-pulp_ansible-beta-release.md
`````markdown
---
date: 2018-04-27T20:55:50+00:00
title: Pulp Ansible Plugin Beta 1 Release
author: David Davis
tags:
  - release
  - "3.0"
---
<!-- more -->
A few days ago, [we announced the beta 1 release of Pulp 3.0 Core](/2018/04/25/beta-release/). To
coincide with this release, today we are announcing the beta 1 release of the pulp_ansible plugin.
This is a brand new plugin that allows you to manage your Ansible content using Pulp. Below you will
find information about the plugin, its features, how to install it, and a demo video.

**Please note that this plugin is available for Pulp 3.0 only and not Pulp 2.0.**

## Pulp Ansible Plugin Features

The pulp_ansible plugin supports the following features:

- Syncing Ansible Roles to Pulp from galaxy.ansible.com
- Managing Ansible Roles with repositories and repository versions
- Uploading Ansible Roles to Pulp through the REST API
- Publishing and distributing Ansible Roles using the Galaxy API
- Installation of Ansible Roles from Pulp using the ansible-galaxy CLI client

## Documentation

To find out how to install pulp_ansible or to read our docs around how to use pulp_ansible, check
out the [pulp_ansible repository on Github](https://github.com/pulp/pulp_ansible).

## Getting involved

To view our progress, report bugs, or request new features, check out our issue tracker at
[https://pulp.plan.io/projects/ansible_plugin](https://pulp.plan.io/projects/ansible_plugin).

## Demo video

<iframe width="560" height="315" src="https://www.youtube.com/embed/EnD8BGcNcjU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-05-02-pulp-2.16.1-generally-available.md
`````markdown
---
date: 2018-05-02T20:55:50+00:00
title: Pulp 2.16.1
author: Brian Bouterse
tags:
  - release
---
<!-- more -->
Pulp 2.16.1 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Docker Support, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Docker Support
- [3462	Pulp produces incorrect crane json for removed tags](https://pulp.plan.io/issues/3462)

### RPM Support
- [3564	2.16 update broke EPEL sync - Task Failed  Importer indicated a failed response](https://pulp.plan.io/issues/3564)
- [3440	It is not possible to skip SRPMs during sync, only together with RPMs](https://pulp.plan.io/issues/3440)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-05-08-pulp3-moving-to-rq.md
`````markdown
---
date: 2018-05-08T20:55:50+00:00
title: Pulp 3 Moving to RQ for Tasking
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
Pulp adopted the multi-processing tasking system in Pulp 2.4. Since then, users have benefited from
the throughput and availability it provides, but core developers regularly receive bug reports with
symptoms like:

* Pulp stops processing tasks entirely
* A single task never starts

Ensuring the reliability of Pulp's tasking system and therefore Pulp itself is a paramount concern.
After careful consideration, the maintainers of Pulp's tasking system believe the best way to
resolve these reliability issues is by porting the Pulp 3.0 tasking system from using
[Celery](http://celery.readthedocs.io/en/latest/) to using [RQ](http://python-rq.org/docs/).

This change will be made on May 15, 2018, and will be released with pulpcore Beta 4 on May 16, 2018.

Pulp 2.y is being left as-is because the change is backwards incompatible, so we can't introduce
them due to [Semantic Versioning](http://semver.org/).

This post is divided into three sections: Reasoning, User Changes, Plugin Writer Changes

## Reasoning

Four primary reasons stood out motivating this decision.

1. Users are experiencing task-halting issues which users and developers alike cannot reproduce. We
   have resolved some of these, but there are some that are unresolved. New ones are reported
   periodically, so there is no end in sight.

2. The more time core developers spend fixing Celery, the less time we are improving Pulp and its
   plugins.

3. It's epically complicated for little benefit. The code of Celery itself is spread across Celery,
   Kombu, pyamqp, billiard, qpid.messaging, and other libraries. With RQ it's just a lot simpler.

4. RQ fulfills 100% of the feature needs of Pulp with no gaps.

More discussion that went into this decision can be found in the "Port Pulp3 to use RQ" thread on
the pulp-dev mailing list archives for
[March](https://www.redhat.com/archives/pulp-dev/2018-March/thread.html),
[April](https://www.redhat.com/archives/pulp-dev/2018-April/thread.html), and
[May](https://www.redhat.com/archives/pulp-dev/2018-May/thread.html).


## User Changes

### Redis replaces RabbitMQ/Qpid

RQ uses Redis as its backend, so with this change, Redis replaces RabbitMQ or Qpid in the Pulp
architecture.

### Run workers differently

With Celery you would run workers with:

```commandline
$ /path/to/python/bin/celery worker -A pulpcore.tasking.celery_app:celery -n resource_manager@%%h -Q resource_manager -c 1 --events --umask 18
$ /path/to/python/bin/celery worker -A pulpcore.tasking.celery_app:celery -n reserved_resource_worker-1@%%h -Q reserved_resource_worker-1 -c  --events --umask 18
```

With RQ, you'll run those same works with this instead:

```commandline
rq worker -n 'resource_manager@%h' -w 'pulpcore.tasking.worker.PulpWorker'
rq worker -n 'reserved_resource_worker_1@%h' -w 'pulpcore.tasking.worker.PulpWorker'
```

You'll want to update your process launcher scripts, e.g. systemd scripts to use these new worker
commands instead.

### Ensure DJANGO_SETTINGS_MODULE is set

Anywhere the worker is run, it explicitly needs the environment variable DJANGO_SETTINGS_MODULE set.
For example something like this in your environment or process launcher (e.g. systemd) definition:

```commandline
export DJANGO_SETTINGS_MODULE=pulpcore.app.settings
``` 

### Error handling differences

RQ workers exit when Redis is not available either on startup of a worker or if there is an existing
connection. This is a behavioral difference from Celery. It is recommended that your process
launcher, e.g. systemd be configured to wait-and-retry to restart the service if you want your RQ
workers to automatically recover and reconnect when Redis has an availability issue.

### TLS and Authentication

If you are using TLS or authentication with RabbitMQ/Qpid, you'll need to port that to Redis using
the Redis documentation. Pulp's settings.yaml file also contains Redis configuration settings to
set. 


## Plugin Writer Changes

### Dispatching Tasks

With Celery plugin writers would dispatch tasks using the `apply_async_with_reservation()` method on
the task object itself. It returns a `celery.result.AsyncResult`.

```python
import mytask
result = mytask.apply_async_with_reservation([reservations], args=(...), kwargs={...})
# result is a celery.result.AsyncResult instance tracking the task dispatched to the tasking system
```

With RQ, plugin writers dispatch tasks using the `enqueue_with_reservation` function provided by
`pulpcore.tasking.tasks`. This takes any Python function as its first argument, with all subsequent
arguments being similar to before. Here is an equivalent example:

```python
from pulpcore.tasking.tasks import enqueue_with_reservation
import mytask
result = enqueue_with_reservation(mytask, [reservations], args=(...), kwargs={...})
# result is a rq.job.Job instance tracking the task dispatched to the tasking system
```

### Defining Tasks

With Celery you have to decorate or subclass their objects to formally define something as a Task.
When used with Pulp, this was done using the `@shared_task(base=UserFacingTask)` as follows:

```commandline
@shared_task(base=UserFacingTask)
def mytask(arg1, arg2):
    # task code here
``` 

With RQ you don't have to indicate it's a task at all and it will behave the same. Here is the
equivalent example:

```commandline
def mytask(arg1, arg2):
    # task code here
```

### Travis Changes

You'll need to make a few changes to Travis like these:

* Use `redis-server` not `rabbitmq`
* Explicitly set `export DJANGO_SETTINGS_MODULE=pulpcore.app.settings` before starting the workers 
* Update the workers to use the new command 

NOTE: that we are waiting on an upstream release of RQ containing a necessary patch. In the meantime
manually install RQ *before* pulpcore is installed in Travis using:

`pip install git+https://github.com/rq/rq.git@3133d94b58e59cb86e8f4677492d48b2addcf5f8`

### Example

See the [pulp_file changes](https://github.com/pulp/pulp_file/pull/72) used to port pulp_file to be
compatible with RQ. It contains an example of all necessary plugin changes.


## Questions or feedback

Reach out via pulp-list or pulp-dev email lists, via @pulpproj on Twitter, or via #pulp or #pulp-dev
on Freenode.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-05-09-pulp_python-beta-release.md
`````markdown
---
date: 2018-05-09T20:55:50+00:00
title: Pulp Python Plugin Beta 1 Release
author: Bihan Zhang
tags:
  - release
  - "3.0"
  - python
---
<!-- more -->
pulp_python 3.0 beta 1 has been released and can be [installed from PyPI](https://pypi.org/project/pulp-python/3.0.0b1/)

## Features

The pulp_python plugin supports the following features:

- [Syncing](http://pulp-python.readthedocs.io/en/3.0.0b1/workflows/sync/) python projects from PyPI to Pulp
- [Uploading](http://pulp-python.readthedocs.io/en/3.0.0b1/workflows/upload/) python packages (wheels, eggs, sdist) to Pulp
- [Publishing and distributing](http://pulp-python.readthedocs.io/en/3.0.0b1/workflows/publish-host/) projects with PyPI's [simple API](https://wiki.python.org/moin/PyPISimple)
- [Installing](http://pulp-python.readthedocs.io/en/3.0.0b1/workflows/publish-host/#use-the-newly-created-distribution) python packages from Pulp using pip

## Documentation

To find out how to install pulp_python or to read the docs around how to use pulp_python, check
out [our docs](http://pulp-python.readthedocs.io/en/3.0.0b1/).

## Getting involved

To view our progress, report bugs, or request new features, check out our issue tracker at
[https://pulp.plan.io/projects/pulp_python](https://pulp.plan.io/projects/pulp_python).

## Demo

<iframe width="560" height="315" src="https://www.youtube.com/embed/E7LrSP2VdIs?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-06-08-pulp_qe_intern_update.md
`````markdown
---
date: 2018-06-08T20:55:50+00:00
title: 2018 Pulp QE Intern Update
author: Ragavendran Balakrishnan
tags:
  - pulpqe
---
<!-- more -->
## How my journey started

The second week of February'18 was a very exciting period, as that's when I got to know I am
gonna be a Red Hatter. Fast forward four months, Here I am joining as a QE in the pulp project in
Red Hat. My role and responsibilities as a QE were very well delineated on a spreadsheet which I was
presented on the first day. The first week, was very much a getting started phase. So here are the
things which I learned.

Pulp is a content management plugin that is a major cog in the Satellite Project machinery.  It
is responsible for syncing and managing contents in the yum repository (Oops! Its much more than
that - It can work with contents in the python, docker, ostree, puppets and pretty much any files ).
There are two main versions of the pulp project -  *version 2.x and version 3*.  Each has its own
set of interfaces. The v_2 can be accessed via the CLI or API and v_3 just via the API.

I also enrolled myself into the Linux RHCSA fast-track course, on which I will be doing a
certification, as a part of this internship. The very first module taught me about ssh-keygen and
passwordless boots to remote VMs. This is something which I learned, will be extensively used in the
pulp setup. I also completed the CEE (Customer Experience and Engagement ) course, which gave a
high-level description about Red Hat's internal org structure.

## Virtual Machines and not containers

With bits and pieces of information gathered in first week, and with two modules completed in
RHCSA and a fedora machine installed from scratch, I moved into the second week( forgot to mention a
couple of beers over the weekend!!). The second week turned out to be a very productive and
informative week. It is at this point I got to learn about pulp smash ( which is a test suite for
running tests against an installed pulp). Since it needs to be tested against matrix of Operating
Systems, a multi OS virtualization is required. This helps to spawn a separate instance of a box(
Like Fedora 25,26,27 and 28), that can be installed with its own version of pulp.

Virtual Machine setup can be either a KVM + libvirt  with the aid of a client(Virtual Machine
Manager).  Or, it can be a Beaker machine,(an internal physical machine )which can be provisioned.
It can also be through an utility called as 'Vagrant'. Also, One can provision a machine via the
Jenkins - node pool - OpenStack setup. Though all these methods exist, for the purpose of testing
and not depending on internet, I was advised to use the machine's KVM which was simpler and readily
available.

Another interesting question that bugged me during this time was, why not containers, as they
are lightweight, easily spawnable and are very expendable. However, I got to learn that, containers
are more suitable for running single process services. The pulp project has several services, that
has multiple processes on it is like MongoDB, Python, and others. This makes it less likely as a
candidate for container friendly. However, this is still a marker for the future, as containers are
still capable of handling these drawbacks.


## Installing Pulp

Depending on the versions 2 or 3, the installation also varies. The version 2 installer is an
[ansible script](https://github.com/pulp/pulp-ci.git). This ansible script requires a virtual
machine (can be done locally too) with OS installed and python enabled. Once the VM(guest machine)
is up and running, it can be installed by cloning the script in the local and running against the
guest VM or cloning and running directly against the guest vm. This will be much faster when we can
cache connections to the server, inside the .ssh/controlmasters repo.

Once the ansible script completes running, Pulp is installed.This can be checked by hitting the
command pulp-admin in the remote VM. The version 3 installation is also almost similar which uses
another [ansible script](https://github.com/pulp/devel.git). This requires the server to be turned
up and firewall to be turned down. Since this is an API-only framework, one can check it by hitting
http://hostname:24817/pulp/api/v3/status/ .

## Use Pulp

Once installed, pulp can be used for managing repos. I was able to create a new repo, feed it
with a remote RPM URL, and then sync the content to my local. I accomplished all these with [the CLI
client](https://docs.pulpproject.org/plugins/pulp_rpm/user-guide/quick-start.html).

I also managed to write a python script that was capable of cloning an RPM repo, Syncing and
publishing content in the repo and finally deleting it. This was the basic CRUD functionality of it,
that was accomplished by hitting the necessary APIs.


## Pulp Smash ( The Pulp Testing Framework)

Pulp-smash is a comprehensive testing framework for running testcases against pulp. It has tests
for both version 2 and 3 testing. It has tests for both CLI and API and also for the different type
of plugins - RPMs, Python, docker etc. Also,it is available as a Pypi package, so installing it is
as easy as running a `pip install` command.
	
It has a [git source](https://github.com/PulpQE/pulp-smash.git) too, that can be cloned and
installed with pip locally. It works on basis of a settings file, that points it to the location of
pulp. As a part of my internship, during this point of time, I created my very own test case, that
ran against pulp and verified whether it was working successfully. I also created a pull request for
the same and got it reviewed and merged with the upstream master.

By the end of my second week, I was very elated as I not only covered the things mentioned in
the agenda initially, but also few extra exercises that gave me a good learning experience in python
packaging, pulp API automation and writing testcases and that got merged into the upstream.

## Next Steps

The main agenda for my Internship was to write scripts for testing Pulp in a
[FIPS](https://en.wikipedia.org/wiki/Federal_Information_Processing_Standards) enabled RHEL box.
Over the next few weeks, I will be learning much more about FIPS, and how to enable it in a RHEL
box. Once figured out with the installation in a FIPS machine, I will be writing much more testcases
to ensure its working in FIPS.

So, Things are going out great so far, learning new things each and every day, have a wonderful
team to work with. With lots of positives, I am looking forward to more joyous and fruitful weeks. I
will be back with another blog post with more updates and more exciting news to share. Until then
take care !!!
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-06-20-community-demo.md
`````markdown
---
date: 2018-06-20T20:55:50+00:00
title: Community Demo Jun 20, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Lv5Y20IPXn4" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=Lv5Y20IPXn4&t=0m25s)

[Fix for last_override_config leaking sensitive info (bmbouter) (2.16.2)](http://www.youtube.com/watch?v=Lv5Y20IPXn4&t=4m34s)

[Pulp3 CLI proof of concept (bizhang) (3.0)](http://www.youtube.com/watch?v=Lv5Y20IPXn4&t=8m41s)

[Pulp3 switch to RQ (bmbouter) (3.0)](http://www.youtube.com/watch?v=Lv5Y20IPXn4&t=15m45s)

[pulp_python whitelisting projects via specifiers ( bizhang) (3.0)](http://www.youtube.com/watch?v=Lv5Y20IPXn4&t=28m44s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-06-28-pulp_qe_intern_update.md
`````markdown
---
date: 2018-06-28T20:55:50+00:00
title: "2018 Pulp QE Intern Update #2"
author: Ragavendran Balakrishnan
tags:
  - pulpqe
---
<!-- more -->
## Journey so Far

The first two weeks of my Red Hat journey was a roller coaster ride with lots of takeaways, which I
have covered in my [first blog](https://pulpproject.org/2018/06/08/pulp_qe_intern_update/). Now,
here I am in the third week of my internship and I have started writing my second blog post on my
experience with Pulp. So buckle in ...

## FIPS

FIPS stands for Federal Information Processing Standards. As the name suggests, it has something to
do with the federal government in the United States (duh!). Basically, it provides a set of standards,
which any machine that wants to be FIPS compliant, has to follow. These standards establish system
security and interoperability.

As one of the core goals of my internship is to install and test Pulp in a FIPS enabled RHEL
machine, I started gathering information on enabling FIPS on VMs. Then I enabled FIPS in a CentOS
machine. Have documented the steps and hiccups that I faced in an internal blog as well. Once I got
it setup in CentOS, I moved on to check the same in a RHEL VM with an "Employee subscription" and
it worked like a charm.

## Running Pulp Smash on FIPS enabled machine

Once I got a FIPS enabled RHEL machine (ran it in a Virtual Machine), the next step was installing
Pulp in it by running an [Ansible Playbook](https://github.com/pulp/pulp-ci). This, however, threw
some unexpected errors and it got resolved by using Pulp 2.17 nightly build. After this, it was time
for me to test, which I carried out by running Pulp-smash against the aforementioned machine. Again
I faced some issues, which took some time for me to figure out that it was happening due to the SSL
connections with the VM. Finally, I decided to run Pulp-smash locally on the VM where Pulp is
installed, and it worked.

The actual testing is done in a "compare and report" fashion, where I had another Pulp-installed-
non-FIPS-RHEL-VM. I made sure, it had all the configurations of its FIPS counterpart (of course
except the FIPS switch being turned off). Then using the power of tmux synchronize panes, I was able
to execute tests simultaneously on the two VMs (one with FIPS enabled and the other without FIPS)
and drew conclusions based on the logs generated by my test runner (Used Pytests for running those
tests). Based on my observations, I even raised a couple of bugs (cheers!!!).

One of the things which helped me in analyzing the issue is using the python debugger, that allowed
me to set breakpoints in the test execution and analyze step by step. some trace of using the
debugger is briefed in the [bug](https://pulp.plan.io/issues/3769), that I raised.

##  Jenkins and Ansible

One of the coolest things that I got to do in these two weeks was learning extensively about the CI
used in the Pulp project. I enrolled myself in the Ansible certification course in Red Hat University
and completed few modules as well. With this knowledge, I was able to write my own
[playbook](https://github.com/ragabala/pulp-ci/tree/fips_installer) that enables FIPS in any VMs. I
also started reading extensively about Jenkins jobs Builder and Yaml files and was able to integrate
my ansible playbooks into jenkins job builders. More information about JJBs is found
[here](https://github.com/pulp/pulp-ci/tree/master/ci/jjb).

I am also continuing with my RHCSA certifications and completed around 5 modules. This has some
pretty good course materials with lots of hands-on exercises. I am learning new things on Linux
each and every day. In the following weeks, I will be writing my own automation scripts for the FIPS
milestone issues. I will also be involved in writing more unittests for Pulp-smash increasing code
coverage. Happy coding times ahead ...
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-07-06-podcast__init__.md
`````markdown
---
date: 2018-07-06T20:55:50+00:00
title: "Pulp on Podcast.__init__"
author: bizhang
---
<!-- more -->
Recently Austin Macdonald and I talked about Pulp on an episode of
[podcast.__init__](https://www.podcastinit.com/pulp-with-bihan-zhang-and-austin-macdonald-episode-168/).

Check it out!

<iframe title="Podlove Web Player: Podcast.__init__('Python') -
The Pulp Artifact Repository with Bihan Zhang and Austin Macdonald
- Episode 168" width="768" height="290"
src="https://www.podcastinit.com/wp-content/plugins/podlove-podcasting-plugin-for-wordpress/lib/modules/podlove_web_player/player_v4/dist/share.html?episode=https://www.podcastinit.com/?podlove_player4=486"
frameborder="0" scrolling="no" tabindex="0"></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-07-16-ina-panova-community-co-lead.md
`````markdown
---
date: 2018-07-16T20:55:50+00:00
title: Ina Panova -- Pulp Community Co-Lead
author: bmbouter
---
<!-- more -->
I'd like to welcome Ina Panova as the Pulp community co-lead. Ina has been a core developer on Pulp
since Oct 2014, and contributed heavily to the Docker and RPM plugins. Over the last year or so, Ina
has gotten more active in supporting the Pulp community in ways other than code including:

* Organizing and supporting Pulp events in Europe including conferences

* Acting as an advocate for the resolution of community issues

* Leading the logo, branding, and tagline revisions

* Inviting blog post content from community members

Community leads of open source projects work to ensure a healthy, diverse community in support of a
common goal of great software for its users. This comes in a variety of forms including:

* Working with existing and new contributors to help them find a path to contribution

* Interpreting and responding to Code of Conduct requests

I have been the Pulp community lead for the past 2 years, and I am so excited to share the role with
Ina going forward. As co-leads, together we will have more capacity to serve the Pulp community
with.

If there is some way we can help support your contribution to the Pulp community, please reach out
via irc or email. IRC nicks are:  ipanova, bmbouter
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-08-01-community-demo.md
`````markdown
---
date: 2018-08-01T20:55:50+00:00
title: Community Demo Aug 01, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/FkkwxGP99ug" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=0m19s)

[pulp_docker features (bizhang) (2.17)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=5m41s)

[Sync modules.yaml (jortel) (2.x)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=9m08s)

[Upload and copy of modules.yaml (daviddavis) (2.x)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=12m15s)

[Filter help text (daviddavis) (3.0)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=17m19s)

[Switch from UUIDs to Int IDs (daviddavis) (3.0)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=20m31s)

[Pulp3 add_content remove_content and Artifact performance improvements (bmbouter) (3.0)](http://www.youtube.com/watch?v=FkkwxGP99ug&t=23m45s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-08-02-pulp-2.16.4-generally-available.md
`````markdown
---
date: 2018-08-02T20:55:50+00:00
title: Pulp 2.16.4 Generally Available
author: David Davis
tags:
  - release
---
<!-- more -->
Pulp 2.16.4 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bug fixes for Pulp, Debian Support, Python Support, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to follow the standard
upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [3828	pulp-gen-ca-certificate script fails when /proc/sys/crypto/fips_enabled doesn't exist](https://pulp.plan.io/issues/3828)
- [3882	pulp_resource_manager is unable to start in pulp 2.16.4 beta due to celery issue 3620](https://pulp.plan.io/issues/3882)

### Debian Support
- [3370	Unable to sync Ubuntu Trusty Universe](https://pulp.plan.io/issues/3370)
- [3498	gpg_cmd configuration option should not be accepted in repo config or overrides](https://pulp.plan.io/issues/3498)

### Python Support
- [3578	pulp-python wrong path to pypi](https://pulp.plan.io/issues/3578)
- [3632	Pulp_python does not normalize project name before publish](https://pulp.plan.io/issues/3632)

### RPM Support
- [3736	When the checksum type of the upstream repo changed, syncing a "on_demand" repo fails](https://pulp.plan.io/issues/3736)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-08-31-pulp-2.17.0-generally-available.md
`````markdown
---
date: 2018-08-31T20:55:50+00:00
title: Pulp 2.17.0 Generally Available
author: Ina Panova
tags:
  - release
---
<!-- more -->
Pulp 2.17.0 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Docker Support, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Docker Support
- [3757	If upload fails partial manifest is associated to the repo](https://pulp.plan.io/issues/3757)
- [3892	Can't copy Docker tags or manifest lists between repositories](https://pulp.plan.io/issues/3892)
- [3904	Can't upload manifest list to Docker repository](https://pulp.plan.io/issues/3904)
- [3905	Purge for unlinked manifests is not working correctly](https://pulp.plan.io/issues/3905)
- [3137	As a user, I can view docker image Arch and Size Information through the REST API](https://pulp.plan.io/issues/3137)
- [3450	As a user I would like to limit the tags we sync for docker repos](https://pulp.plan.io/issues/3450)
- [3497	As a user, I can upload skopeo tar that references existing layers.](https://pulp.plan.io/issues/3497)

### RPM Support
- [3951	Cannot dissociate modulemd-defaults](https://pulp.plan.io/issues/3951)
- [2781	Vendor field is present in db if RPM is uploaded, it is missed in case of sync](https://pulp.plan.io/issues/2781)
- [3875	Traceback when RPM import fails signature check](https://pulp.plan.io/issues/3875)
- [3899	Failed PULP_MANIFEST downloads aren't reported to the user](https://pulp.plan.io/issues/3899)
- [3903	Redundant solver instantiated and loaded during a recursive associate call](https://pulp.plan.io/issues/3903)
- [3661	Add model for modular content](https://pulp.plan.io/issues/3661)
- [3708	Add model for Modulemd-defaults](https://pulp.plan.io/issues/3708)
- [3657	As a user I can manage modulemd content](https://pulp.plan.io/issues/3657)
- [3659	Add a migration for transition from basic to advanced modular support](https://pulp.plan.io/issues/3659)
- [3715	Reimplement unit dependency solving with the libsolv library](https://pulp.plan.io/issues/3715)
- [3766	As a user I can manage modulemd-defaults content](https://pulp.plan.io/issues/3766)
- [3847	Introduce weak dependency solving](https://pulp.plan.io/issues/3847)
- [3862	As a user i can sync and remove modulemd](https://pulp.plan.io/issues/3862)
- [3863	As a user i can sync and remove modulemd-defaults](https://pulp.plan.io/issues/3863)
- [3864	As a user i can copy modulemd](https://pulp.plan.io/issues/3864)
- [3865	As a user i can copy modulemd-defaults](https://pulp.plan.io/issues/3865)
- [3868	As a user I can publish a repository with modulemd content](https://pulp.plan.io/issues/3868)
- [3869	As a user I can publish a repository with modulemd-defaults content](https://pulp.plan.io/issues/3869)
- [3873	As a user, I can upload modulemd and modulemd-defaults content](https://pulp.plan.io/issues/3873)
- [3874	Support --validate importer option for Modulemd.](https://pulp.plan.io/issues/3874)
- [3876	Can't recursively copy RPM between repos](https://pulp.plan.io/issues/3876)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-04-generate-pulp-3-python-client-using-swagger-codegen.md
`````markdown
---
date: 2018-09-04T20:55:50+00:00
title: Generate Pulp 3 Python client using swagger-codegen
author: Dennis Kliban
---
<!-- more -->
As a third party wishing to integrate with Pulp 3, you can use OpenAPI tooling to generate bindings
for over 20 different languages. Here is an example of how to use `swagger-codegen` to generate
Python bindings.

The REST API documentation for Pulp 3 is available on every Pulp instance at `/pulp/api/v3/docs`.
The documentation is auto generated using the OpenAPI 2.0, formerly known as Swagger, schema
definition. Each Pulp instance has a variety of plugins installed. The documentation is always a
reflection of the installed plugins.

The schema can also be used to generate client bindings in many languages using `swagger-codegen`.
The schema is available for your local Pulp at `/pulp/api/v3/docs/api.json`.

The ["Getting Started"](https://github.com/swagger-api/swagger-codegen#getting-started) section of
`swagger-codegen` documentation contains a link to the latest version of the jar that can be used
to generate a client for Pulp. The example below can be used to generate the Python client.

{% highlight bash %}
# Download swagger-codegen-cli jar
curl -o swagger-codegen-cli.jar http://central.maven.org/maven2/io/swagger/swagger-codegen-cli/2.3.1/swagger-codegen-cli-2.3.1.jar

# List available config options for Python clients
java -jar swagger-codegen-cli.jar config-help -l python


CONFIG OPTIONS
        packageName
            python package name (convention: snake_case). (Default: swagger_client)

        projectName
            python project name in setup.py (e.g. petstore-api).

        packageVersion
            python package version. (Default: 1.0.0)

        packageUrl
            python package URL.

        sortParamsByRequiredFlag
            Sort method arguments to place required parameters before optional parameters. (Default: true)

        hideGenerationTimestamp
            hides the timestamp when files were generated (Default: true)

        library
            library template (sub-template) to use (Default: urllib3)

# Create a custom swagger-codegen config for Python
vim config.json

{
  "packageName":"my_pulp3_client",
  "projectName":"my-pulp3-client",
  "packageVersion":"0.0.1"
}

# Download the OpenAPI 2.0 schema from Pulp
curl -o pulp-api.json http://localhost:24817/pulp/api/v3/docs/api.json

# Generate the client
java -jar swagger-codegen-cli.jar generate \
  -i pulp-api.json \
  -l python \
  -o ./my_pulp3_client \
  -c config.json

# Install the new Python package
pip install my_pulp3_client/
{% endhighlight %}

Below is an example of a script that uses the new client package to interact with Pulp.

{% highlight python %}
import my_pulp3_client
from my_pulp3_client import Distribution, FileContent, FilePublisher, FileRemote, Repository, \
    RepositorySyncURL, RepositoryPublishURL
from my_pulp3_client.rest import ApiException
from pprint import pprint
from time import sleep


def monitor_task(task_href):
    """Polls the Task API until the task is in a completed state.

    Prints the task details and a success or failure message. Exits on failure.

    Args:
        task_href(str): The href of the task to monitor

    Returns:
        list[str]: List of hrefs that identify resource created by the task

    """
    completed = ['completed', 'failed', 'canceled']
    task = api.tasks_read(task_href)
    while task.state not in completed:
        sleep(2)
        task = api.tasks_read(task_href)
    pprint(task)
    if task.state == 'completed':
        print("The task was successfful.")
        return task.created_resources
    else:
        print("The task did not finish successfully.")
        exit()


# Configure HTTP basic authorization: basic
configuration = my_pulp3_client.Configuration()
configuration.username = 'admin'
configuration.password = 'admin'
configuration.safe_chars_for_path_param = '/'

client = my_pulp3_client.ApiClient(configuration)

# create an instance of the API class
api = my_pulp3_client.PulpApi(client)

try:
    # Create a File Remote
    remote_url = 'https://repos.fedorapeople.org/pulp/pulp/demo_repos/test_file_repo/PULP_MANIFEST'
    remote_data = FileRemote(name='bar', url=remote_url)
    file_remote = api.remotes_file_create(remote_data)
    pprint(file_remote)

    # Create a Repository
    repository_data = Repository(name='foo')
    repository = api.repositories_create(repository_data)
    pprint(repository)

    # Sync a Repository
    repository_sync_data = my_pulp3_client.RepositorySyncURL(repository=repository.href)
    sync_response = api.remotes_file_sync(file_remote.href, repository_sync_data)
    pprint(sync_response)

    # Monitor the sync task
    created_resources = monitor_task(sync_response.href)

    repository_version_1 = api.repositories_versions_read(created_resources[0])
    pprint(repository_version_1)

    # Create an artifact from a local file
    artifact = api.artifacts_create('devel/pulp3_python_client_example/test_bindings.py')
    pprint(artifact)

    # Create a FileContent from the artifact
    file_data = FileContent(relative_path='foo.tar.gz', artifact=artifact.href)
    filecontent = api.content_file_files_create(file_data)
    pprint(filecontent)

    # Add the new FileContent to a repository version
    repo_version_data = {'add_content_units': [filecontent.href]}
    repo_version_response = api.repositories_versions_create(repository.href, repo_version_data)

    # Monitor the repo version creation task
    created_resources = monitor_task(repo_version_response.href)

    repository_version_2 = api.repositories_versions_read(created_resources[0])
    pprint(repository_version_2)

    # Create a FilePublisher
    file_publisher_data = FilePublisher(name='bar')
    file_publisher = api.publishers_file_create(file_publisher_data)

    # Create a publication from the latest version of the repository
    publish_data = RepositoryPublishURL(repository=repository.href)
    publish_response = api.publishers_file_publish(file_publisher.href, publish_data)

    # Monitor the publish task
    created_resources = monitor_task(publish_response.href)
    publication_href = created_resources[0]

    distribution_data = Distribution(name='baz', base_path='foo', publication=publication_href)
    distribution = api.distributions_create(distribution_data)
    pprint(distribution)
except ApiException as e:
    print("Exception when calling the Api: %s\n" % e)
{% endhighlight %}
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-07-install-pulp3-on-openshift.md
`````markdown
---
date: 2018-09-07T20:55:50+00:00
title: Installing Pulp3 on Openshift
author: Brian Bouterse
---
<!-- more -->
Here is information on how to deploy Pulp3 on Openshift with a plugin like
[pulp_ansible](https://github.com/pulp/pulp_ansible). I posted the resources we will use in a repo:
[pulp3-openshift](https://github.com/bmbouter/pulp3-openshift).


# Overview

The minimal install has 5 containers:

* Webserver. I use `pulp-manager runserver`.
* Resource manager
* Worker
* Postgresql
* Redis


# Postgresql and Redis config

The Postgresql and Redis services are deployed by hand from your Openshift Service Catalog. It's
assumed your Postgresql database is named 'pulp' and the user accessing the db is also named 'pulp'.

After deploying Redis and Postgresql be sure you have the following settings available.

REDIS_IP
REDIS_PORT
REDIS_PASSWORD
POSTGRESQL_HOST
POSTGRESQL_PORT
POSTGRESQL_PASSWORD

Clone the [pulp3-openshift](https://github.com/bmbouter/pulp3-openshift/) repo and enter all of the
values of ^ variables into your
[pulp.json template file](https://github.com/bmbouter/pulp3-openshift/blob/master/deployment_config/pulp.json).
Note each variable is set in multiple places.


# Make a Persistant Storage

Pulp needs persistant storage, typically mounted at /var/lib/pulp/. I was able to apply this
[pv.yaml](https://github.com/bmbouter/pulp3-openshift/blob/master/pv.yaml) to create the
PersistentVolumeClaim.

The names in pv.yaml are then referenced in the deployment config [here](https://github.com/bmbouter/pulp3-openshift/blob/master/deployment_config/pulp.json#L28)
so you may need to update your deployment config to match.
 

# Additional settings

Make up a value for SECRET_KEY with the snippet below and set it also in both the
[pulp.json template file](https://github.com/bmbouter/pulp3-openshift/blob/master/deployment_config/pulp.json)
and the [Dockerfile](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/Dockerfile#L19).

```
cat /dev/urandom | tr -dc 'a-z0-9!@#$%^&*(\-_=+)' | head -c 50

```

Invent your admin password and specify it [here](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/s2i/bin/run#L39)
so it will run every time one of the pulp component starts.


# Configuring What Is Installed

To include other plugins, source installs, or custom code you'll want to modify the pip commands in
the Dockerfile where Pulp is installed [here](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/Dockerfile#L26-L28.

```
RUN pip install -e 'git://github.com/pulp/pulp#egg=pulpcore&subdirectory=pulpcore'
RUN pip install -e 'git://github.com/pulp/pulp#egg=pulpcore-plugin&subdirectory=plugin'
RUN pip install -e 'git://github.com/pulp/pulp_ansible#egg=pulp_ansible'
```

Migrations are made a image-build time. Make sure to `makemigrations` for any django apps that you
are installing
[here](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/Dockerfile#L30-L31). 

```
RUN pulp-manager makemigrations pulp_app
RUN pulp-manager makemigrations pulp_ansible
```

Migrations are run at image-start time because its there that there is a connection to the real DB.
Have the migrations apply upon image startup
[here](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/s2i/bin/run#L38).


# Build your Image

Within the [pulp_ansible](https://github.com/bmbouter/pulp3-openshift/blob/master/pulp_ansible/) run
`sudo make` to build the image. This will run all the commands in the Dockerfile. Note you will need
the docker daemon running locally for this to work.


# Tag and Publish your Image

For now I get my images onto openshift through dockerhub. I tag and push the image like this:

```
sudo docker tag f897f98fd9 bmbouter/pulp_ansible:0.1.b2.34
sudo docker push bmbouter/pulp_ansible:0.1.b2.34
```

Then I use this name in my deployment config [here](https://github.com/bmbouter/pulp3-openshift/blob/master/deployment_config/pulp.json#L35).

Everytime I make a change I increment the number otherwise openshift uses the already downloaded and
cached image from before.


# Deploy your Image

With your deployment config, e.g. [pulp.json](https://github.com/bmbouter/pulp3-openshift/blob/master/deployment_config/pulp.json)
customized you are ready to deploy Pulp using the 'Add to Project' dropdown and selecting 'Import
YAML/JSON' then paste in your deployment config.


# Expose a Service and Route

The last step is to expose a Service and then a Route to the Pulp webserver. I was able to deploy
from configs for both the [Service](https://github.com/bmbouter/pulp3-openshift/blob/master/service.yaml)
and the [Route](https://github.com/bmbouter/pulp3-openshift/blob/master/route.yaml).

These thing should match up with the port and pod labels in the deployment config.


# Test Pulp with the status API

For example in one test deployment I could receive my status at:

```
http example.com:24817/pulp/api/v3/status/
```


# Pics or it Didn't Happen

![The Deployment Config?](/images/install-on-openshift/deployment_config.png)

![The Services?](/images/install-on-openshift/services.png)


# Get Involved

I'm tracking bugs related to this mini-effort [here](https://github.com/bmbouter/pulp3-openshift/issues/).
You can see some existing issues or file a new one for help.

PRs and collaboration is welcome. I'm 'bmbouter' on Freenode.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-14-pulp3-cli-plan.md
`````markdown
---
date: 2018-09-14T20:55:50+00:00
title: Pulp3 CLI Plan
author: Brian Bouterse
---
<!-- more -->
The Command Line Interface (CLI) is a useful tool that Pulp2 users have come to rely on. As Pulp3
works towards a Release Candidate and finally a Generally Available release, we want to communicate
our recommendations on the CLI usage.


# Current State

Recently for Pulp3, a prototype auto-generating CLI
[was created for Pulp3](https://www.redhat.com/archives/pulp-dev/2018-June/msg00025.html). It was
very useful in the sense that we learned a lot about how the Pulp API is being described by OpenAPI
v2. However since the [next steps](https://www.redhat.com/archives/pulp-dev/2018-July/msg00017.html)
were identified, we realized the remaining work required to bring the prototype to a usable point is
a non-trivial level of effort.

Another option that is available is to use [HTTPie](https://httpie.org/) as the CLI. You can see
examples of HTTPie usage, .i.e. `http` in the
[pulp_file instructions](https://github.com/pulp/pulp_file#create-a-repository-foo). Using HTTPie is
similar to the auto-generating CLI because both have each command be a single API call.


# Recommendation to Pulp3 users

So for the time being, at least through the Pulp 3.0 General Availability, it's recommended to use
[HTTPie](https://httpie.org/) for your command line scripting needs. You can see examples of its
usage in the [pulp_file instructions](https://github.com/pulp/pulp_file#create-a-repository-foo).
Other Pulp3 plugins have similar instructions on how to interact with their APIs using httpie in
their README files


# Workflow Based CLI

The Pulp2 CLI, `pulp-admin` is primarily a workflow tool. Pulp3 does several steps differently than
Pulp2, so as users approach Pulp3, we don't yet know the workflow use cases that are of broad use to
many users. Given that requirements gap, the current approach is to wait to hear from users about
what their workflow CLI needs are.


# Contribute Your Use Cases

Do you want a specific workflow for a Pulp3 CLI? Write a story
[here](https://pulp.plan.io/issues/new) with details of the workflow that would be useful to you.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-17-pulp-community-health-audit.md
`````markdown
---
date: 2018-09-17T20:55:50+00:00
title: Pulp Community Health Audit Report
author: Brian Bouterse
---
<!-- more -->
In August 2018 the [Open Source and Standards Group](http://community.redhat.com/) completed their
first Pulp Community Health Audit. This annual audit is a chance to assess the health and diversity
of the Pulp community, identify growth areas, apply best practices, and check-in on progress made
towards previous goals.

This blog gives a summary, but you can read the full report
[here](/files/Community_Audit_Report_Pulp_2018.pdf).


# Overview

Overall the Pulp community is healthy, but it
can improve by making more of its resources more clearly discoverable, e.g. quick start guides, etc.
Here are the recommended actions from the audit for how the Pulp community can improve:

* Create a quick start documentation guide
* Create a more visible link to the PUPs
* Create an online calendar as a steady-state place for community members to discover events
* Create a direct link to release notes on the Pulp web site
* Review PUPs to see if a Tech Advisory Board or other adjustments need to be made to the governance
  model
* Explore if Pulp would benefit from a part-time or full-time outreach and marketing person


# Infrastructure and Process

Recommendations to Pulp come in two areas here: Resource Discoverability and Process Improvements.

Pulp needs to focus on its website and docs to ensure users can find what they need quickly.
Some suggested improvements include more quickstart guides and fewer page clicks for users to get to
key pages such as the installation page.


For the process improvements, the PUP governence model needs to be further refined, along with more
thought put into the governence model for the Pulp community.


# Release Management

Pulp is following the known best-practices in this area.


# Activity

There isn't data available on the commit history or contributor activity or engagement in the
report. In terms of community events, Pulp has no public calendar showing all of the events a user
or contributor could get involved with.


# Documentation

Pulp needs to become easier to install, and as it does its documentation will get shorter. Pulp also
needs better organized documentation, along with quick-start assets. In some cases the documentation
is available, but not discoverable, e.g. the release notes are hard to find.


# Code Quality

Pulp will re-assess its code-quality metrics with Pulp3 which has significantly different code line
count for its feature set relative to Pulp2.


# Outreach

Outreach such as blog, social media, and conference activity is one area Pulp can do much more.
For the blog, Pulp needs to have more activity on a more consistent basis to increase its engagement
with users. Similarly for social media, we want to have more engagement there. Additionally Pulp
needs to increase its visibility at user-facing conferences.


# License

Pulp maybe should consider a Contributor License Agreement, but the last time open source lawyers
advised us not having a CLA was ok.


# Get involved

If you have questions, feedback, or want to get involved somehow, please reach out to the Community
Co-Leads, Brian Bouterse <bbouters@redhat.com> or Ina Panova <ipanova@redhat.com>.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-19-community-demo.md
`````markdown
---
date: 2018-09-19T20:55:50+00:00
title: Community Demo Sep 19, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/xniMgTodmnc" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=xniMgTodmnc&t=0m51s)

[pulp_rpm sync + publish demo for Pulp3 (daviddavis) (3.0)](http://www.youtube.com/watch?v=xniMgTodmnc&t=7m34s)

[new related model hooks added to ContentUnitSaver stage for Pulp3 (bmbouter) (3.0)](http://www.youtube.com/watch?v=xniMgTodmnc&t=14m20s)

[swagger-codegen bindings for Pulp3 (dkliban) (3.0)](http://www.youtube.com/watch?v=xniMgTodmnc&t=18m18s)

[Pulp3 templates for Openshift (bmbouter) (3.0)](http://www.youtube.com/watch?v=xniMgTodmnc&t=24m30s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-09-25-pulp-3-adopts-dynaconf.md
`````markdown
---
date: 2018-09-25T20:55:50+00:00
title: Pulp 3 adopts dynaconf
author: Dennis Kliban
---
<!-- more -->
Pulp 3 now uses [dyanconf](https://dynaconf.readthedocs.io/en/latest/) to manage its settings.
dynaconf allows for storing settings in
[multiple file formats](https://dynaconf.readthedocs.io/en/latest/guides/examples.html).
By default, Pulp will look for settings in ``/etc/pulp/settings.py``. To specify another settings
file, set the ``PULP_SETTINGS`` environment variable. Each of the settings can also be set by
prepending ``PULP_`` to the name and setting it as an environment variable.
[Environment variables](https://dynaconf.readthedocs.io/en/latest/guides/environment_variables.html#environment-variables)
take precedence over all other configuration sources. Check out the
[Pulp 3 docs](https://docs.pulpproject.org/en/3.0/nightly/installation/configuration.html) for
more details.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-10-01-pulp-at-ansiblefest.md
`````markdown
---
date: 2018-10-01T20:55:50+00:00
title: Pulp at AnsibleFest
author: David Davis
---
<!-- more -->
Pulp will be running a booth at AnsibleFest (Oct 2-3) this year in Austin. We'll be talking about
the [pulp_ansible plugin](https://github.com/pulp/pulp_ansible) that we released earlier this year
as well as how organizations can store and manage their Ansible content on-site. As Pulp engineers,
we're big fans of Ansible and we use it to power our installer, dev environment, etc. We're hoping
to become an integral part of the Ansible community (more on this later!) so plan to see us at more
Ansible events.

To coincide with AnsibleFest, we're releasing a second RC for pulp_ansible (0.1.0rc2). We've
optimized the publishing workflow so that users no longer have to create a publisher. Instead they
can just create a publication right after syncing. For more information on this, [check out the
publishing section of the pulp_ansible
README](https://github.com/pulp/pulp_ansible#create-a-publication).

So if you're in Austin, TX for AnsibleFest, stop by our Pulp booth. We'd love to meet you and we'll
be passing out stickers and flyers.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-10-10-pulp-community-meetup.md
`````markdown
---
date: 2018-10-10T20:55:50+00:00
title: Pulp Community Meetup
author: Dennis Kliban
---
<!-- more -->
The first Pulp Community Meetup is going to take place on Tuesday, October 23, 2018 at [Raleigh
Brewing Company](https://www.raleighbrewing.com/) in Raleigh, NC. The plan is to get together from
18:00 to 20:00 EDT in the Tavern Room. We don't have a specific agenda. We want to use this as an
opportunity for Pulp users and developers to get together and discuss Pulp and it's ecosystem.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-10-12-pulp-2.17.1-generally-available.md
`````markdown
---
date: 2018-10-12T20:55:50+00:00
title: Pulp 2.17.1
author: Tanya Tereshchenko
tags:
  - release
---
<!-- more -->
Pulp 2.17.1 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Pulp, RPM Support, Docker Support, OSTree Support, and Debian Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [3893	pulp.server.maintenance.monthly fails if applicability collection is too large](https://pulp.plan.io/issues/3893)
- [3955	Pulp unit tests breaking on F27](https://pulp.plan.io/issues/3955)
- [3985	Removing modules in Pulp2.17 rpm repo doesn't remove corresponding RPMs](https://pulp.plan.io/issues/3985)
- [4055	Indexes are not created before a migration is run](https://pulp.plan.io/issues/4055)

### RPM Support
- [3816	Pulp removes current metadata when remove_old_repodata_threshold = 0](https://pulp.plan.io/issues/3816)
- [3929	Pulp content search does not show Recommends field](https://pulp.plan.io/issues/3929)

### Docker Support
- [3960	Add support to handle pagination for tags/list endpoint](https://pulp.plan.io/issues/3960)
- [3910	 docker pull fails with unexpected end of JSON input](https://pulp.plan.io/issues/3910)

### OSTree Support
- [3534	Error syncing OSTree Repository](https://pulp.plan.io/issues/3534)

### Debian Support
- [3917	The repo metadata (Release) generated by pulp_deb doesn't allow repo pinning](https://pulp.plan.io/issues/3917)
- [4050	Pulp 2.17.1 and 2.18 installation fails](https://pulp.plan.io/issues/4050)
- [3937	Fix flake8 tests](https://pulp.plan.io/issues/3937)
- [3938	Get keyserver-config only once](https://pulp.plan.io/issues/3938)
- [3939	Support for old versionsof python2-gnupg](https://pulp.plan.io/issues/3939)
- [3940	verify_release() should remove whitespaces from fingerprints](https://pulp.plan.io/issues/3940)
- [3941	Add gpg_keys-parameter to importer-config](https://pulp.plan.io/issues/3941)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-11-07-community-demo.md
`````markdown
---
date: 2018-11-07T20:55:50+00:00
title: Community Demo Nov 07, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Cl9v5WYM-og" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=Cl9v5WYM-og&t=0m25s)

[Human-friendly specified fields for serialization (dalley) (3.0)](http://www.youtube.com/watch?v=Cl9v5WYM-og&t=5m15s)

[Unified Pulp 3 Ansible Installer (asmacdo) (3.0)](http://www.youtube.com/watch?v=Cl9v5WYM-og&t=11m15s)

[Pulplift demo to easily run Pulp3 (bmbouter) (3.0)](http://www.youtube.com/watch?v=Cl9v5WYM-og&t=26m38s)

[Stages API Performance Data Collector (bmbouter) (3.0)](http://www.youtube.com/watch?v=Cl9v5WYM-og&t=30m18s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-11-21-pulp_rpm-beta-release.md
`````markdown
---
date: 2018-11-21T20:55:50+00:00
title: Pulp RPM Plugin Beta 1 Release
author: David Davis
tags:
  - release
  - "3.0"
---
<!-- more -->
Today we are announcing the beta 1 release of the pulp_rpm plugin for Pulp 3. This is a port of the
pulp_rpm plugin for Pulp 3 that allows you to manage RPM content. Below you will find information
about the plugin, its features, how to install it, and a demo video.

## Pulp RPM Plugin Features

The pulp_rpm plugin currently supports the following features:

- Syncing RPM packages and errata from a remote repository
- Managing RPM content with repositories and repository versions
- Uploading RPM packages to Pulp through the REST API
- Publishing and distributing RPM content
- Installation of RPMs and errata from Pulp using dnf

## Documentation

To find out how to install pulp_rpm or to read our docs around how to use pulp_rpm, check out [the
pulp_rpm docs](https://pulp-rpm.readthedocs.io/en/latest/) or [the source
code](https://github.com/pulp/pulp_rpm).

## Getting involved

To view our progress, report bugs, or request new features, check out our issue tracker at
[https://pulp.plan.io/projects/pulp_rpm](https://pulp.plan.io/projects/pulp_rpm).

## Demo video

<iframe width="560" height="315" src="https://www.youtube.com/embed/xniMgTodmnc?start=448" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-12-04-pulp-2.18.0-generally-available.md
`````markdown
---
date: 2018-12-04T20:55:50+00:00
title: Pulp 2.18.0 Generally Available
author: Tanya Tereshchenko
tags:
  - release
---
<!-- more -->
Pulp 2.18.0 is now Generally Available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Pulp, RPM Support, Puppet Support, Docker Support, and Crane.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [1758	As a user, I would like to be able to change timeout values](https://pulp.plan.io/issues/1758)
- [4068	pulp-admin in cron : "IOError: [Errno 25] Inappropriate ioctl for device"](https://pulp.plan.io/issues/4068)
- [4092	redirect_host defaults to socket.getfqdn() instead of None](https://pulp.plan.io/issues/4092)
- [3927	As a user, I can upload information about Consumer](https://pulp.plan.io/issues/3927)
- [4007	As a user, I can sync rpm packages with sha512 checksums](https://pulp.plan.io/issues/4007)
- [4120	Syncing a repo with `background` download policy raises InvalidURL in RHEL 7.6](https://pulp.plan.io/issues/4120)

### RPM Support
- [3876	Can't recursively copy RPM between repos](https://pulp.plan.io/issues/3876)
- [3256	all sslclientcert in pulp.repo are called client.crt](https://pulp.plan.io/issues/3256)
- [3841	Pulp 2: Malicious iso feed repo can write arbitrary files with user apache.](https://pulp.plan.io/issues/3841)
- [4056	module information missing from errata search api](https://pulp.plan.io/issues/4056)
- [4130	Not able to upload RPMs](https://pulp.plan.io/issues/4130)
- [4144	Duplicated module dependnecy entries both after sync and after migration](https://pulp.plan.io/issues/4144)
- [3924	Add a migration for the "vendor" field](https://pulp.plan.io/issues/3924)
- [3919	As a user, I can manage modular Errata content](https://pulp.plan.io/issues/3919)
- [3925	As a user, I can retrieve a list of applicable RPMs, Errata, and Module streams for a consumer](https://pulp.plan.io/issues/3925)
- [3959	Modular errata sync and publish](https://pulp.plan.io/issues/3959)
- [4049	As a user, I can know if an RPM is modular or not](https://pulp.plan.io/issues/4049)
- [4058	As a user, I can calculate applicability for modular content](https://pulp.plan.io/issues/4058)

### Puppet Support
- [4140	Puppet fails to find metadata file if there are multiple top-level files/dirs](https://pulp.plan.io/issues/4140)

### Docker Support
- [2849	Worker terminates abnormally while processing task](https://pulp.plan.io/issues/2849)
- [2966	Unable to sync docker repo because worker dies](https://pulp.plan.io/issues/2966)

### Crane
- [3857	As a user, i want Crane to be able to serve Docker registry content directly as well as be alble to use redirects](https://pulp.plan.io/issues/3857)


## Known issues

Ignore this section if you haven't tried to upgrade to Pulp 2.18.0 yet.

If you run MongoDB 2.x and tried to upgrade to Pulp 2.18.0 before this announcement, you likely ran into the issue with migrations.
See https://pulp.plan.io/issues/4225

This problem is fixed now and included into Pulp 2.18.0 release.
Just repeat the usual upgrade procedure.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2018-12-06-community-demo.md
`````markdown
---
date: 2018-12-06T20:55:50+00:00
title: Community Demo Dec 06, 2018
author: Brian Bouterse
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/IeY4lI8jG38" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=IeY4lI8jG38&t=0m24s)

[Pulp3 Lazy Sync (bmbouter) (3.0)](http://www.youtube.com/watch?v=IeY4lI8jG38&t=5m19s)

[Pulp3 Docker Sync and Publish (dkliban) (3.0)](http://www.youtube.com/watch?v=IeY4lI8jG38&t=11m43s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-01-30-pulp-3-rc-information.md
`````markdown
---
date: 2019-01-30T20:55:50+00:00
title: Pulp 3.0 RC Information
author: David Davis
tags:
  - "3.0"
---
<!-- more -->
Pulp 3.0 is currently in beta and will soon become a release candidate (RC) when the remaining must-have items are completed. We wanted to give an update on the RC and what it'll mean for users, plugin writers, and other stakeholders.

The list of open items for the RC can be viewed with [the RC blocker query](https://pulp.plan.io/issues?query_id=121). People interested in the status of the RC can check this query to get an idea of how the RC's progress.


### How long will Pulp be in an RC period before going GA?

The RC period will likely last for several months, but not longer than 1 year, while users and plugin writers identify any major problems.


### Why is the RC period so long?

Once the GA occurs, the REST API is semantically versioned. We need to be confident that the REST API design is serving the right use cases and creating the right value for Pulp users.

We also want to discover any issues with the plugin API. This is likely where most of the issues will be discovered since plugins identify new needs regularly, but this is also at version, so we can still make backwards incompatible changes post GA for this software component. A longer "baking" period should reduce the amount of backwards incompatible changes made post GA.


### When will the GA be released?

The GA release depends on us receiving community feedback from Katello, Ansible Galaxy,  and Pulp plugin writers. We hope enough plugins written by the community will provide us with valuable feedback during our RC period.


### What if major/breaking changes are made to pulpcore or the plugin API during the RC?

New changes that are breaking/backwards incompatible would be released as an RC with changes documented in release notes.


### How many RC releases will there be?

Hopefully only a few. We plan to release no more often than once a month


### Will new features be added to pulp/pulp and pulpcore-plugin during this time?

No. We want the release candidate asset to be very unsurprising from the start of the RC to the GA. Generally a new feature should only be added if releasing without it would be "very bad". One example would be a feature required by a plugin to perform basic sync or publish. Another example would be a change that is required by Katello, Ansible Galaxy, or Pulp plugin writers.


### Will bugfixes be added to pulp/pulp and pulpcore-plugin during this time?

Yes. Including bugfixes during the RC will benefit GA users.


### Will refactors be added to pulp/pulp and pulpcore-plugin during this time?

Stability is the goal of the RC and so we are trying to avoid refactoring  except in cases we deem essential.


### Will new features for 3.1 be started?

No. There are a lot of additional things that are being launched "around" Pulp3 like the installer, upgrade and migration tooling, container build+delivery, etc that 3.1 features should not be the focus.

A lot of the focus during the RC period will be on plugin development and ensuring that core is stable and meets the needs of the Pulp 3 plugin ecosystem.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-02-06-community-demo.md
`````markdown
---
date: 2019-02-06T20:55:50+00:00
title: Community Demo Feb 06, 2019
author: dawalker
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/NRe8bSzyq00" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=NRe8bSzyq00&t=0m29s)

[Distribution sync bugfix (beav) (2.18)](http://www.youtube.com/watch?v=NRe8bSzyq00&t=5m12s)

[Overview of Lazy docs for Pulp3 (bmbouter) (3.0)](http://www.youtube.com/watch?v=NRe8bSzyq00&t=11m34s)

[Stages API changes with pulpcore-plugin beta 18 (bmbouter) (3.0)](http://www.youtube.com/watch?v=NRe8bSzyq00&t=13m30s)

[Looping Download support for Stages API (bmbouter) (3.0)](http://www.youtube.com/watch?v=NRe8bSzyq00&t=17m24s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-02-22-pulp-2.18.1-generally-available.md
`````markdown
---
date: 2019-02-22T20:55:50+00:00
title: Pulp 2.18.1
author: Jeff Ortel
tags:
  - release
---
<!-- more -->
Pulp 2.18.1 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for OSTree Support, Packaging, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### OSTree Support
- [3999	Publishing incorrect branch head.](https://pulp.plan.io/issues/3999)

### Packaging
- [4337	Update vendored libmodulemd to version 1.7.0](https://pulp.plan.io/issues/4337)

### RPM Support
- [4152	Regression Pulp 2.17.1: recursive copy of RPMs does not copy partially resolvable dependencies](https://pulp.plan.io/issues/4152)
- [4225	0029_applicability_schema_change.py fails for some users](https://pulp.plan.io/issues/4225)
- [4252	modules.yaml file is generated on repository with no modularity information](https://pulp.plan.io/issues/4252)
- [4253	modules.yaml reference in repomd.xml does not use selected checksum](https://pulp.plan.io/issues/4253)
- [4309	Vendor field migration fails with 'NoneType' object has no attribute 'text'](https://pulp.plan.io/issues/4309)
- [4333	repo syncs fail causing worker to crash with  /lib64/libmodulemd.so.1: undefined symbol: g_log_structured_standard](https://pulp.plan.io/issues/4333)
- [4375	Recursive copy doesn't solve rich dependencies correctly](https://pulp.plan.io/issues/4375)
- [4315	python-isodate-0.5.0-1.pulp or greater missing from stable/latest repo for EL6](https://pulp.plan.io/issues/4315)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-02-25-pulp-3.0-rc-plan.md
`````markdown
---
date: 2019-02-25T20:55:50+00:00
title: Pulp 3.0 Core RC Plan
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
After our last update on the Pulp 3.0 Core RC, we have been working on the list of open items for
the [Pulp 3.0 Core RC](https://pulp.plan.io/issues?query_id=121) and are closing in on completion.
We felt it would be helpful to share our best estimates on dates and an updated plan.

Feature Freeze Target: March 6:

* All items found in [this query](https://pulp.plan.io/issues?query_id=121) merged
* Any RC Blocker work coming out of the [Upload discussion](https://www.redhat.com/archives/pulp-dev/2019-February/msg00052.html)
* Beta release available on PyPI
* Branch closed for merging


2 Week Feature Freeze:

* Critical bug fixes
* Work on plugins compatible Pulp 3.0 Core RC


Core RC Target: March 20 (Feature freeze + 2 week):

* Pulp 3.0 Core RC release
* Pulp file plugin release


Feature Freeze will happen when all [features](https://pulp.plan.io/issues?query_id=121) been
delivered. If that date ends up being before or after March 6, the Core RC Target will be 2 weeks
from the Feature Freeze date.

We expect new plugin releases shortly after or up to a few the weeks after the Pulp 3.0 Core RC
release. Please continue to follow the mailing list and blog for announcements of plugin releases
that will work with the new Pulp 3 RC release.

Please bring up any concerns you have regarding content you do not see in the
[feature query](https://pulp.plan.io/issues?query_id=121) that you believe should be. For more
background information, please also see our
[previous post](https://pulpproject.org/2019/01/30/pulp-3-rc-information/).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-03-20-community-demo.md
`````markdown
---
date: 2019-03-20T20:55:50+00:00
title: Community Demo Mar 20, 2019
author: Dana Walker
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/GHsJDvimDrA" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=0m24s)

[Pulp on S3 (daviddavis) (3.0)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=7m33s)

[Chunked Uploads (daviddavis) (3.0)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=13m36s)

[Repository Version Counts Reported by Type (bmbouter) (3.0)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=17m16s)

[mariadb/mysql support (daviddavis) (3.0)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=22m12s)

[Disabling batching in the Stages API for specific content (bmbouter) (3.0)](http://www.youtube.com/watch?v=GHsJDvimDrA&t=26m51s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-03-28-pulp-3-rc-release.md
`````markdown
---
date: 2019-03-28T20:55:50+00:00
title: Pulp 3 Core RC Release
author: David Davis
---
<!-- more -->
Today we are excited to announce an important milestone of the Pulp 3 project, the release of
[pulpcore 3.0.0rc1](https://pypi.org/project/pulpcore/3.0.0rc1/) and [pulpcore-plugin
0.1.0rc1](https://pypi.org/project/pulpcore-plugin/0.1.0rc1/). These packages constitute the core of
Pulp 3 and its plugin API. Both are now available on PyPI.

In the coming days, we expect plugins to announce releases that are compatible with this new RC
release of pulpcore. Please check the pulp mailing list for these releases. To plugin writers, we
suggest requiring version `~=0.1rc1` of pulpcore-plugin.

We also hope to improve documentation over the course of the RC. If you want to install Pulp 3,
check our [installation
docs](https://docs.pulpproject.org/en/3.0/nightly/installation/instructions.html).

For more information about the RC release and what it entails, visit [our previous
blog post](https://pulpproject.org/2019/01/30/pulp-3-rc-information/).

To view the features included in this release, [please visit our tracker](https://tinyurl.com/pulp3release).

As always, if you find a bug, please [report it on our issue
tracker](https://pulp.plan.io/issues/new). For general feedback or questions reach out [to our
mailing list or irc channel](https://pulpproject.org/help/).
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-04-02-pulp-2.19.0-generally-available.md
`````markdown
---
date: 2019-04-02T20:55:50+00:00
title: Pulp 2.19.0 Generally Available
author: Tanya Tereshchenko
tags:
  - release
---
<!-- more -->
Pulp 2.19.0 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Pulp, RPM Support, Crane, Debian Support, Docker Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [3896	pulp_docker importer discards relevant exception details](https://pulp.plan.io/issues/3896)
- [4228	Update docs with instructions to install Mongo DB 3.x](https://pulp.plan.io/issues/4228)
- [4405	Pulp 2.19master nightly ci regression at test_modularity.py](https://pulp.plan.io/issues/4405)
- [4425	It's possible to create a duplicate login if name is different](https://pulp.plan.io/issues/4425)

### RPM Support
- [2729	pulp_user_metadata is ignored during ISO import](https://pulp.plan.io/issues/2729)
- [4477	Duplicated empty collections are published with subsequent sync/publish of modular errata](https://pulp.plan.io/issues/4477)
- [4518	Modules are not copied during recursive copy of modular errata ](https://pulp.plan.io/issues/4518)
- [4262	Pulp raises an unhelpful IOError when it fails to download a repo metadata file](https://pulp.plan.io/issues/4262)
- [4267	force_full is not honored for distribution units](https://pulp.plan.io/issues/4267)
- [4373	Applicability Exception: Repository matching query does not exist.](https://pulp.plan.io/issues/4373)
- [4397	Unable to sync 3 SLES Update repositories](https://pulp.plan.io/issues/4397)
- [4419	Publish modulemd/productid when generate_sqlite is set to true](https://pulp.plan.io/issues/4419)
- [4476	pulp_rpm.handlers.rpm does not work with Python 2.4](https://pulp.plan.io/issues/4476)
- [4541	Repository publishing duplicates RPM files under Packages and Packages/<LETTER> structure](https://pulp.plan.io/issues/4541)
- [4371	Document how to use the newly added recursive_conservative](https://pulp.plan.io/issues/4371)
- [3740	Implement modularity content dependency solving](https://pulp.plan.io/issues/3740)
- [4527	Improve performance of rpm duplicate nevra check](https://pulp.plan.io/issues/4527)

### Crane
- [4227	Crane 3.2 to 3.3 - Javascript error](https://pulp.plan.io/issues/4227)

### Debian Support
- [4008	python-debpkgr does not structure Repositories correcly (in some case)](https://pulp.plan.io/issues/4008)
- [4148	Fix flake8 violations](https://pulp.plan.io/issues/4148)
- [4176	from_file() and from_metadata() create different data structures in mongodb](https://pulp.plan.io/issues/4176)
- [4546	Safely select packages to symlink in components](https://pulp.plan.io/issues/4546)

### Docker Support
- [4328	fsLayers error during sync](https://pulp.plan.io/issues/4328)
- [4384	Pulp Crane not returning correct headers](https://pulp.plan.io/issues/4384)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-04-17-community-demo.md
`````markdown
---
date: 2019-04-17T20:55:50+00:00
title: Community Demo Apr 17, 2019
author: Dana Walker
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/PulpProject). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/nEeI512jmfs" frameborder="0" allowfullscreen></iframe>

[Community Update (bmbouter)](http://www.youtube.com/watch?v=nEeI512jmfs&t=0m18s)

[RPM (one shot) upload support (ppicka) (3.0)](http://www.youtube.com/watch?v=nEeI512jmfs&t=5m13s)

[Maven artifact caching (dkliban) (3.0)](http://www.youtube.com/watch?v=nEeI512jmfs&t=8m10s)

[Setting up a dev environment with Pulplift (asmacdo) (3.0)](http://www.youtube.com/watch?v=nEeI512jmfs&t=13m14s)

[REST API docs improvements (dkliban) (3.0)](http://www.youtube.com/watch?v=nEeI512jmfs&t=19m15s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-05-22-community-demo.md
`````markdown
---
date: 2019-05-22T20:55:50+00:00
title: Community Demo May 22, 2019
author: Dana Walker
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/channel/UCI43Ffs4VPDv7awXvvBJfRQ). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/EuDgLX8G_wg" frameborder="0" allowfullscreen></iframe>

[Community Update (dawalker)](http://www.youtube.com/watch?v=EuDgLX8G_wg&t=0m45s)

[Syncing Debian content lazily (bmbouter) (3.0)](http://www.youtube.com/watch?v=EuDgLX8G_wg&t=2m26s)

[Docker lazy sync (dkliban) (3.0)](http://www.youtube.com/watch?v=EuDgLX8G_wg&t=5m55s)

[Booting a Debian VM headlessly from Debian content synced lazily from pulp_deb (bmbouter) (3.0)](http://www.youtube.com/watch?v=EuDgLX8G_wg&t=12m54s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-05-28-community-survey.md
`````markdown
---
date: 2019-05-28T20:55:50+00:00
title: 2019 Pulp Community Survey
author: David Davis
tags:
  - "3.0"
---
<!-- more -->
Today we are asking for community feedback in our second Pulp Community Survey. [The feedback we
received in our first community
survey](https://pulpproject.org/2017/08/08/community-survey-results/) provided valuable insights
into how our users use Pulp. For our second Community Survey, we hope to also get feedback into how
we can improve the upcoming Pulp 3 release from users, contributors, and other community members.

We're giving away Pulp gear (t-shirt, socks, stickers, etc) to anyone who fills out the survey.
More importantly, by filling out the survey, you'll help us to improve Pulp. So if you have a few
minutes, please visit the link below to fill out the survey.

[https://tinyurl.com/pulp2019survey](https://tinyurl.com/pulp2019survey)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-05-29-travis-ci-cd-config-generator-for-pulp3-plugins.md
`````markdown
---
date: 2019-05-29T20:55:50+00:00
title: Travis CI/CD Config Generator for Pulp3 Plugins
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
Pulp 3 plugins are encouraged to Continuously Integrate (CI) and Continuously Deliver (CD) with
Travis CI, but maintaining a feature-rich CI/CD pipeline across the 9+ repositories is cumbersome.
As additional features and plugins are created, the matrix will only grow. Luckily @dkliban has
created the Travis Config Generator.


## Features

### Continuous Integration (with every commit)

* Install your plugin using the [Pulp 3 Ansible Installer](https://github.com/pulp/pulp_installer)
* Run all functional and unit tests on a matrix including:
  * Python 3.6
  * Python 3.7
  * PostgreSQL
  * MariaDB
* Test the docs build with `make html`
* Build Python and Ruby bindings and test them

### Continuous Deployment

* Release to PyPI via a pushed tag (after testing occurs)
* Release Bindings to PyPI and rubygems.org nightly (after testing occurs)
* Release Bindings to PyPI and rubygems.org via a pushed tag (after testing occurs)


## How does this work? (high level)

1. Configure the rubygems.org and pypi.org passwords as secrets through the Travis UI

2. You use a command line tool to generate travis files. The tool takes options to disable features.
   By default, all features are enabled.

3. Commit the generated files to your plugin code, and you're done!


## How do I get started?

The tool is included in the plugin_template for new plugins to use, but existing plugins can use it
by checking out the latest version from: https://github.com/pulp/plugin_template/

See the [docs in the plugin template](https://github.com/pulp/plugin_template#travis-configuration).


## How will my pipeline stay up to date?

1. Checkout the latest [https://github.com/pulp/plugin_template](https://github.com/pulp/plugin_template)
2. Rerun the appropriate `generate_travis_config.py` command for your plugin, for example:

```
./generate_travis_config.py ansible --pypi-username pulp
```


## How do I file improvements?

File feature requests or stories in [the issue tracker here](https://pulp.plan.io/issues/new). With
the tool stored in the plugin_template, please add the 'plugin_template' tag when you file.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-05-30-pulp-2.19.1-generally-available.md
`````markdown
---
date: 2019-05-30T20:55:50+00:00
title: Pulp 2.19.1
author: Dennis Kliban
tags:
  - release
---
<!-- more -->
Pulp 2.19.1 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Debian Support, Docker Support, Pulp, and RPM Support.
                                                              
## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Debian Support
- [4859 Synching repo without all fails](https://pulp.plan.io/issues/4859)
- [4860 Ignore invalid paragraphs in package indices](https://pulp.plan.io/issues/4860)

### Docker Support
- [4597 Deprecate docker v1 support](https://pulp.plan.io/issues/4597)

### Pulp
- [3098 Docker publish may fail with "OSError: [Errno 17] File exists" if two publishes triggered at same time](https://pulp.plan.io/issues/3098)
- [4581 Task Cancellation doesn't interrupt/cancel a running task with Celery 4+](https://pulp.plan.io/issues/4581)
- [4603 pulp_streamer streams decodes responses, but sends the 'gzip' Content-Encoding header](https://pulp.plan.io/issues/4603)
- [4654 Modulemd profiles not getting removed from the consumer](https://pulp.plan.io/issues/4654)

### RPM Support
- [4550 rpm_rsync_distributor is broken for yum_repo_metadata_file units](https://pulp.plan.io/issues/4550)
- [4617 Migration of modular content can fail (upgrade from <=2.16 to 2.17+)](https://pulp.plan.io/issues/4617)
- [4529 Broken repo can be published if zchunk metadata is not ignored at sync time](https://pulp.plan.io/issues/4529)
- [4560 Publish YumMetadataFiles as files and not symlinks](https://pulp.plan.io/issues/4560)
- [4627 Pulp does not resync yum metadata files on change](https://pulp.plan.io/issues/4627)
- [4644 Modular and RPM Errata Copy Documentation can be misleading of intended expected behavior](https://pulp.plan.io/issues/4644)
- [4661 incremental publish of yum_repo_metadata_repo fails after upgrade from 2.18/2.19 to 2-master](https://pulp.plan.io/issues/4661)
- [4692 syncing is broken on 2-master branch](https://pulp.plan.io/issues/4692)
- [4718 Module integrity is not preserved at copy time](https://pulp.plan.io/issues/4718)
- [4741 Migration of modular content fails for very old Fedora repos (upgrade from <=2.16 to 2.17+)](https://pulp.plan.io/issues/4741)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-06-19-community-demo.md
`````markdown
---
date: 2019-06-19T20:55:50+00:00
title: Community Demo Jun 19, 2019
author: Dana Walker
tags:
  - demo
---
<!-- more -->
The Community Demo is available on the [Pulp YouTube Channel](https://www.youtube.com/channel/UCI43Ffs4VPDv7awXvvBJfRQ). See the agenda below.

<iframe width="560" height="315" src="https://www.youtube.com/embed/OBrtOQBE5Wc" frameborder="0" allowfullscreen></iframe>

[Community Update (dawalker)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=1m20s)

[pulp_ansible Collection sync from galaxy.ansible.com (bmbouter) (3.0)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=3m46s)

[pulp_rpm new totals reported on progress during sync (bmbouter) (3.0)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=9m52s)

[pulp_file new totals reported on progress during sync (bmbouter) (3.0)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=13m28s)

[REMOTE_USER authentication support (bmbouter) (3.0)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=15m12s)

[New pulp3 changelog process demo (bmbouter) (3.0)](http://www.youtube.com/watch?v=OBrtOQBE5Wc&t=22m52s)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-07-09-redhat-and-ibm.md
`````markdown
---
date: 2019-07-09T20:55:50+00:00
title: IBM acquisition of Red Hat
author: Ina Panova
tags:
  - community 
---
<!-- more -->
Pulp community,

Today marks a new day in the 26-year history of Red Hat. [IBM has finalized its acquisition of Red Hat](https://www.redhat.com/en/about/press-releases/ibm-closes-landmark-acquisition-red-hat-34-billion-defines-open-hybrid-cloud-future), 
which will operate as a distinct unit within IBM moving forward.

 
## What does this mean for Red Hat’s contributions to the Pulp project?

In short, nothing.

Red Hat always has and will continue to be a champion for open source and projects like Pulp.
IBM is committed to Red Hat’s independence and role in open source software communities so that we
can continue this work without interruption or changes.

Our mission, governance, and objectives remain the same. We will continue to execute the existing
project roadmap. Red Hat associates will continue to contribute to the upstream in the same ways
they have been. And, as always, we will continue to help upstream projects be successful and
contribute to welcoming new members and maintaining the project.

We will do this together, with the community, as we always have.

 
If you have questions or would like to learn more about today’s news, we encourage you to review
the list of materials below. Red Hat CTO Chris Wright will host an online Q&A session in the coming
days where you can ask questions you may have about what the acquisition means for Red Hat and our
involvement in open source communities. Details will be announced on the
[Red Hat blog](https://www.redhat.com/en/blog).

 * Chris Wright blog - [Red Hat and IBM: Accelerating the adoption of open source](https://www.redhat.com/en/blog/red-hat-and-ibm-accelerating-adoption-open-source)
 * FAQ on [Red Hat Community Blog](https://community.redhat.com/blog/2019/07/faq-for-communities/)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-07-10-pulp-2.20.0-generally-available.md
`````markdown
---
date: 2019-07-10T20:55:50+00:00
title: Pulp 2.20.0
author: Tanya Tereshchenko
tags:
  - release
---
<!-- more -->
Pulp 2.20.0 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Pulp, RPM Support, and Debian Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [4799	Replace option "skip_fast_forward" with "force_full" for FileDistributor](https://pulp.plan.io/issues/4799)
- [4810	"force_full" should disable fast-forward instead of enabling](https://pulp.plan.io/issues/4810)
- [4865	PULP_MANIFEST does not update correctly to publish files with iso_distributor via fast-forward when deleting an unit](https://pulp.plan.io/issues/4865)
- [4878	Some servers deny answering to requests made with pyhon-requests](https://pulp.plan.io/issues/4878)
- [4932	pulp3 on pulp2: Rename Pulp2 static directory to not conflict with Pulp3](https://pulp.plan.io/issues/4932)
- [4948	pulp3 on pulp2: /var/lib/pulp/published permissions prevents 'metadata' directory from being created.](https://pulp.plan.io/issues/4948)
- [4949	pulp3 on pulp2: permissions on /var/lib/pulp prevent /var/lib/pulp/artifact from being created](https://pulp.plan.io/issues/4949)
- [3625	As a user, I can use the CLI with an anonymous proxy](https://pulp.plan.io/issues/3625)
- [4708	Improve performance of publishing files with iso_distributor via the way of fast-forward](https://pulp.plan.io/issues/4708)
- [4871	When changing unit_key_fields, the relevant DB units may need to be prepared during migration BEFORE indexes are applied](https://pulp.plan.io/issues/4871)

### RPM Support
- [4892	ISO repo copy can lead to a duplicates in a target repo and corrupted manifest](https://pulp.plan.io/issues/4892)
- [4818	Updating a yum_repo_metadata_file unit silently does nothing](https://pulp.plan.io/issues/4818)
- [4869	Use RPMTAG_MODULARITYLABEL to determine modular RPM](https://pulp.plan.io/issues/4869)
- [4880	Missing rpms in erratum pkglist when an erratum appears in multiple repos caused wrong applicability calculation.](https://pulp.plan.io/issues/4880)
- [4868	As a user, I can list modules in a repository with "pulp-admin rpm content module...."](https://pulp.plan.io/issues/4868)
- [4923	Document and refactor depsolving code](https://pulp.plan.io/issues/4923)

### Debian Support
- [4924	KeyError during migration 0004](https://pulp.plan.io/issues/4924)
- [4951	Existence of /usr/lib/pulp/plugins/types/deb.json will prevent migration 0004 from working.](https://pulp.plan.io/issues/4951)
- [4138	Handling publish paths correctly](https://pulp.plan.io/issues/4138)
- [4705	Pulp creates Release files in the outer folder (stretch/updates)](https://pulp.plan.io/issues/4705)
- [4884	Pulp 2 Nightly Regression: Pulp debian migrations fail on pulp DB initialization](https://pulp.plan.io/issues/4884)
- [4707	Folder structure of the deb repos does not match upstreams](https://pulp.plan.io/issues/4707)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-08-25-pulp-2.21.0-generally-available.md
`````markdown
---
date: 2019-08-25T20:55:50+00:00
title: Pulp 2.21.0
author: Daniel Alley
tags:
  - release
---
<!-- more -->
Pulp 2.21.0 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes new features for Docker Support, Nectar, Packaging, Pulp, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Docker Support
- [4549 Removing docker manifests from a docker repository takes a long time](https://pulp.plan.io/issues/4549)
- [5161 Removing manifest_lists from a repository does not purge all newly unlinked manifests](https://pulp.plan.io/issues/5161)

### Nectar
- [5173 Should handle "429" response code appropriately e.g. from Quay.io](https://pulp.plan.io/issues/5173)

### Packaging
- [5151 Apply new patches to libsolv, and possibly upgrade libsolv version](https://pulp.plan.io/issues/5151)

### Pulp
- [4214 Request body exceeded settings.DATA_UPLOAD_MAX_MEMORY_SIZE](https://pulp.plan.io/issues/4214)
- [4428 Upsert query raises NotUniqueError](https://pulp.plan.io/issues/4428)
- [5152 Pulp 3 can't sync when installed along side Pulp 2](https://pulp.plan.io/issues/5152)

### RPM Support
- [5063 Module defaults need to be considered and copied automatically during recursive dependency solving](https://pulp.plan.io/issues/5063)
- [5067 As a user, multiple source/target repositories can be used for recursive copy](https://pulp.plan.io/issues/5067)
- [4979 Sync/update of errata from Amazon Linux fails due to unknown datetime format](https://pulp.plan.io/issues/4979)
- [5071 As a user, a default module stream is copied together with its module_defaults](https://pulp.plan.io/issues/5071)
- [5108 As a user, a task can reserve multiple resources](https://pulp.plan.io/issues/5108)
- [5068 Refactor depsolving code](https://pulp.plan.io/issues/5068)
- [5131 Mongoengine has a bug which prevents .only() from working in combination with .as_pymongo()](https://pulp.plan.io/issues/5131)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-09-30-pulp-3-GA-timeline.md
`````markdown
---
date: 2019-09-30T20:55:50+00:00
title: Pulp 3.0 Release Timeline
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
Pulp3 has been receiving lots of testing from users and various other communities which use Pulp2.
We want to share a plan to put Pulp3 on a “time-based release with blockers”.

## When will Pulp 3.0 be Generally Available?

* Final Development freeze  --   Nov 12th 2019
* Final GA release       --   Dec 3rd 2019

On Nov 12th, if all blockers are completed, we will branch the 3.0 release and publish it as the
final Release Candidate. From Nov 12th to Dec 3rd, only bugfixes and documentation changes will be
merged to the 3.0 branch. On Dec 3rd, Pulp 3.0 will be Generally Available.

If not all blockers are completed, we will publish a delayed schedule including a new GA release
date on Nov 12th based on remaining work.


## What is Included?

Plugins:
* `pulp_container` at 4.0.0  (`pulp_docker` will be renamed `pulp_container`)
* `pulp_rpm` at 3.0.0
* `pulp_file` at 0.1.0

Core components:
* `pulpcore` at 3.0.0 (the user facing API)
* `pulpcore-plugin` at 0.1.0 (the plugin API)

Migration tooling:
* Container content migration
* File content migration


## What are the Blockers?
`pulpcore`, `pulpcore-plugin`, and `pulp_file` blockers are tracked in this Redmine query:
[https://pulp.plan.io/issues?query_id=77](https://pulp.plan.io/issues?query_id=77).

`pulp_rpm` blocker query is here: [https://pulp.plan.io/projects/pulp_rpm/issues?query_id=139](
https://pulp.plan.io/projects/pulp_rpm/issues?query_id=139)

`pulp_docker` blockers query is pending.


## What does this mean for me?

Pulp 2.y users who manage Docker, iso, or file content should be able to migrate their production
systems to Pulp 3.0. RPM users can begin using Pulp3, but cannot migrate their data from their Pulp
2.y systems yet.


## Getting Help

The pulp-list@redhat.com mailing list is the best place for questions:
[https://www.redhat.com/mailman/listinfo/pulp-list](
https://www.redhat.com/mailman/listinfo/pulp-list)

To report bugs or request features use the issue tracker for the project you are interested in:

* pulp_rpm - [https://pulp.plan.io/projects/pulp_rpm/issues/new](
      https://pulp.plan.io/projects/pulp_rpm/issues/new)
* pulp_docker - [https://pulp.plan.io/projects/pulp_docker/issues/new](
      https://pulp.plan.io/projects/pulp_docker/issues/new)
* pulp_file - [https://pulp.plan.io/projects/pulp_file/issues/new](
      https://pulp.plan.io/projects/pulp_file/issues/new)
* pulpcore and pulpcore-plugin - [https://pulp.plan.io/issues/new](https://pulp.plan.io/issues/new)


## Stay Connected

Follow us on [twitter at @pulpproj](https://twitter.com/pulpproj) to receive updates on the “Road to
GA” progress and blockers. We’ll advertise this both on the pulp-list mailing list and twitter.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-11-04-pulp-3-GA-update.md
`````markdown
---
date: 2019-11-04T20:55:50+00:00
title: Pulp 3.0 Release Update
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
As announced in [an earlier blogpost](https://pulpproject.org/2019/09/30/pulp-3-GA-timeline/) Pulp
3.0 is scheduled to be frozen on Nov 12th and Generally Available on Dec 3rd, 2019. Here are details
on how we'll be building and curating releases for Pulp 3, including 3.0.0 and other releases like
3.0.1, 3.0.2, ..., 3.1.0, 3.1.1, etc.

### Terminology

* **release**: is a x.y.z number. It's specific because it always includes the "z"
* **y-release**: is a release where the z portion equals 0, e.g. 3.0.0, 3.1.0, 3.2.0, etc.
* **z-release**: is a release where the z portion is not 0, e.g. 3.0.1, 3.0.2, 3.1.1, etc.
* **z-stream**: The set of z releases following a specific y-release.


### Release Lead

Each 3.y release will have a release lead who performs the cherry picking of fixes to be included in
the 3.y.z releases. Brian Bouterse will be the release lead for pulpcore for the 3.0, which includes
releases 3.0.0, 3.0.1, and any other 3.0 z-stream releases. For 3.1 and its z-stream, another release
lead will be identified.

Each plugin team is encouraged to have a release lead who performs similar functions for that
plugin's y-release.


### Branching

When 3.0 is frozen (or any y-release), it will be branched from the master branch. The branch name
will be the y-release name, e.g. 3.0, 3.1, 3.2, etc. All changes merge to the master first, so the
y-release branch includes all merged changes.


### Cherry Picking

The z-stream is curated by cherry picking changes from the master branch to the y-release branch,
e.g. 3.0. The release lead performs the cherry picking as needed and with input from developers and
users.


### Tagging a Release

When a release is ready, it is tagged as the x.y.z version number. For the 3.0 y-release this will
be 3.0.0. This tagging is expected on Dec 3rd. Once tagged Travis tests things one final time before
pushing the bits to PyPI and the bindings to PyPI and rubygems.org.


### What changed in release 3.y.z?

While the git-history is the ultimate source of truth, it's too large and has too much change to
easily see the meaningful changes that occurred in a release. As such, the changelog for the release
is the recommended way to see what changed in a specific release.

The changelog is formally generated as part of the tagging process and will be available in the
documentation for that release. To see the changelog before it's generated browse the CHANGES folder
at the root of the repo, which is where changelog snippets are stored. You could also generate the
changelog locally using ``towncrier --draft`` in a local checkout of the repository.

Changelog entries are provided by developers along with their changes, so the cherry picking process
will maintain the changelog.


### What about pulp.plan.io?

All changelog entries require an associated [pulp.plan.io](https://pulp.plan.io) issue, and each
generated changelog line links to its pulp.plan.io issue. Users can read these pulp.plan.io issues
for more detailed information on the change.

The commits themselves are also associated with the pulp.plan.io issue as "associated commits". This
serves various downstream users who want to perform their own cherry picking in their source tree.
For this reason it's recommended that all commit changes are associated with a single issue, even in
the case of a followup adjustment pre-release.

Issues will remain at `MODIFIED` as long as they are unreleased. Once released, either in a
y-release or z-release, whichever contains that fix and occurs first, the release lead will move the
issue to `CLOSED - CURRENT RELEASE`.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-11-14-docker-rename-to-container.md
`````markdown
---
date: 2019-11-14T20:55:50+00:00
title: Pulp Docker plugin will be renamed to Pulp Container plugin in Pulp3
author: Ina Panova
tags:
  - docker
  - container
---
<!-- more -->
Version 1.0 of the pulp_container plugin will be released to coincide with Pulp 3 GA..

## Why rename pulp_docker to pulp_container in Pulp3?

* pulp_docker plugin implies management of Docker format images only. This plugin naming convention will remain in Pulp 2.
* pulp_container won't be tied to Docker format images, this will enable us to add support for the OCI format in the future.

## What does this mean for me?

Pulp 2.y users who manage Docker content should be able to migrate their production
systems to Pulp 3.0 with the Pulp Container plugin installed.
Pulp 3 Container plugin has full feature parity with Pulp 2 Docker plugin.

Pulp 3 users will need to uninstall the pulp_docker plugin and install the pulp_container one.
Don't be alaramed by the low version number, this plugin release is stable.

## Where to report issues?

To report bugs or request features use the issue tracker for pulp_container:

* pulp_container - [https://pulp.plan.io/projects/pulp_container/issues/new](
      https://pulp.plan.io/projects/pulp_container/issues/new)

If you are facing issues in Pulp 2 use pulp_docker tracker:

* pulp_docker - [https://pulp.plan.io/projects/pulp_docker/issues/new](
      https://pulp.plan.io/projects/pulp_docker/issues/new)

## Where is the source code?

The source code for Pulp Container plugin can be found on GitHub:

[https://github.com/pulp/pulp_container](https://github.com/pulp/pulp_container)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2019-11-25-pulp-3-GA-update.md
`````markdown
---
date: 2019-11-25T20:55:50+00:00
title: Pulp 3.0 Release Update -- GA Dec 12th
author: Brian Bouterse
tags:
  - "3.0"
---
<!-- more -->
As we finalize the [3.0 blockers list](https://pulp.plan.io/issues?query_id=77) we want to adjust
our release plan by ~ 1 week. Here's the new schedule:

* Dec 3rd -- Release pulpcore rc9
* Dec 12th -- Final GA push to PyPI

This schedule extension will allow for a few final things to be resolved:

* A final documentation push
* Announcement details to be organized
* Release machinery and automation improvements to handle branching/cherry-picking
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2020-03-04-pulp-2.21.1-generally-available.md
`````markdown
---
date: 2020-03-04T20:55:50+00:00
title: Pulp 2.21.1
author: Ina Panova
tags:
  - release
---
<!-- more -->
Pulp 2.21.1 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Debian Support, Docker Support, Pulp, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Debian Support
- [4345	Review behaviour when publishing empty repositories.](https://pulp.plan.io/issues/4345)
- [5170	As a user, i can specify --force-full on sync and it verifies existing content on disc](https://pulp.plan.io/issues/5170)

### Docker Support
- [4095	Can't import containers created with Buildah](https://pulp.plan.io/issues/4095)

### Pulp
- [2220	Copying units between repositories hits DocumentTooLarge: BSON document too large, if source repo contains > 345,000 units of same type](https://pulp.plan.io/issues/2220)
- [5512	Can't connect to remote mongodb when FIPS-enabled](https://pulp.plan.io/issues/5512)
- [5573	Publish won't create multiple checkecksummed copies of primary.xml, fileliststs.xml etc even when in fast-forward mode](https://pulp.plan.io/issues/5573)
- [5742	Pulp 3 can't sync when installed along side Pulp 2](https://pulp.plan.io/issues/5742)

### RPM Support
- [5658	Copying modulemd_defaults over an uploaded unit fails: Not a directory](https://pulp.plan.io/issues/5658)
- [5578	rsync should use --skip-existing when creating remote directory](https://pulp.plan.io/issues/5578)
- [5659	Regression: publishing an empty ISO repo no longer publishes PULP_MANIFEST](https://pulp.plan.io/issues/5659)
- [5942	centos 8 appstream non-modular rpms are marked as modular](https://pulp.plan.io/issues/5942)
- [5951	yum_distributor wrongly skips publish after update of multi-repo errata](https://pulp.plan.io/issues/5951)
- [6096	After using the /associate endpoint, publish of the new repository fails](https://pulp.plan.io/issues/6096)
- [6151	associate-with-filter sometimes ends up with filtered-rpms in the destination](https://pulp.plan.io/issues/6151)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2020-05-19-pulp-2.21.2-generally-available.md
`````markdown
---
date: 2020-05-19T20:55:50+00:00
title: Pulp 2.21.2
author: Daniel Alley
tags:
  - release
---
<!-- more -->
Pulp 2.21.2 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Pulp, Python Support, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [6387 modular applicability profiles are not cleaned up properly](https://pulp.plan.io/issues/6387)
- [6520 Regression: publishing an empty ISO repo no longer publishes PULP_MANIFEST](https://pulp.plan.io/issues/6520)

### Python Support
- [5098 pypi mirror, File exists](https://pulp.plan.io/issues/5098)

### RPM Support
- [6310 Migration 0048 is slow for installs with a lot of modular content ](https://pulp.plan.io/issues/6310)
- [6334 Low applicability performance for large setups due to inefficient query of repo content](https://pulp.plan.io/issues/6334)
- [6354 _last_updated is not set when a module or module-defaults are updated](https://pulp.plan.io/issues/6354)
- [6355 Update last_unit_added on all the repos that contain the unit that has changed](https://pulp.plan.io/issues/6355)
- [6453 sha512 checksum validation fail](https://pulp.plan.io/issues/6453)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2020-06-15-pulp-2-enters-maintenance-mode.md
`````markdown
---
date: 2020-06-15T20:55:50+00:00
title: Pulp 2 Enters Maintenance Mode
author: Melanie Corr
tags:
  - announcement
---
<!-- more -->
In 2013, the release of Pulp 2 made huge strides in creating an extendable framework for managing several content types. Over the last number of years, the Pulp team have examined user deployments to continue improving Pulp's capabilities as a content management platform. This led to the release of Pulp 3 in December 2019, which includes a multitude of new features, performance improvements, and increased flexibility. For more information on the differences between Pulp 2 and Pulp 3, see [About Pulp 3](https://pulpproject.org/about-pulp-3/).

The Pulp team's main focus is to continue developing the best open source repository management platform available. This means prioritizing the Pulp 3 road map. At this point, apart from critical bug fixes and security issues, there will be no further feature enhancements or bug fixes for Pulp 2. Much of the technical debt of the Pulp 2 project and many of the feature requests have been or will be implemented in Pulp 3.

## Migrate to Pulp 3

If you are an existing Pulp 2 user, start working on a migration plan today.

You can use the migration plugin to migrate your content from Pulp 2 to Pulp 3. The development of this plugin is a work in progress. You can help support the development of this plugin by providing feedback on the different scenarios that you require to complete your migration. Currently, the migration plugin supports the following scenarios:

*  Pulp 2 ISO content can be migrated into Pulp 3 File.
*  Pulp 2 Docker can be migrated into Pulp 3 Container.
*  RPM plugin migration functionality is almost feature complete. A [0.2.0 beta 2](https://pulp-2to3-migration.readthedocs.io/en/latest/changes.html#b2-2020-04-22) release is available.

For more up-to-date information, see the [changelog](https://pulp-2to3-migration.readthedocs.io/en/latest/changes.html).

Take the time to familiarize yourself with the migration plugin, make a plan, and test the migration. For more information, see the [Migration Plugin documentation](https://pulp-2to3-migration.readthedocs.io/en/latest/index.html).

If you want to extend the existing functionality, feel free to raise a [pull request](https://github.com/pulp/pulp-2to3-migration).

To view current progress and outstanding issues, see the [Migration plugin tracker](https://pulp.plan.io/projects/migration).

If you have any questions or feedback, write to the pulp-list@redhat.com mailing list.
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2020-07-13-pulp-2.21.3-generally-available.md
`````markdown
---
date: 2020-07-13T20:55:50+00:00
title: Pulp 2.21.3
author: Tanya Tereshchenko
tags:
  - release
---
<!-- more -->
Pulp 2.21.3 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Pulp and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.


## Issues Addressed

### Pulp
- [6724	Some consumer profiles are missed when calculating batch regenerate applicability for repo](https://pulp.plan.io/issues/6724)
- [6851	Regression in regenerate applicability](https://pulp.plan.io/issues/6851)
- [5700	$date operator doesn't work with $and, $or](https://pulp.plan.io/issues/5700)
- [6806	[pulp2] "BSON too large" error when unassociating from large repo](https://pulp.plan.io/issues/6806)

### RPM Support
- [7047	Checksum type "sha256" is not available for all units in the repository. Make sure those units have been downloaded](https://pulp.plan.io/issues/7047)
- [2826	Repository deletion fails with no such file for a repositories listing file](https://pulp.plan.io/issues/2826)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/posts/pulp2/2020-10-31-pulp-2.4.1-is-generally-available.md
`````markdown
---
date: 2020-10-31T20:55:50+00:00
title: Pulp 2.21.4
author: Grant Gainey
tags:
  - release
---
<!-- more -->
Pulp 2.21.4 is now available in the stable repositories:

* [pulp-2-stable](https://repos.fedorapeople.org/pulp/pulp/stable/2/)
* [pulp-stable](https://repos.fedorapeople.org/pulp/pulp/stable/latest/)

This release includes bugfixes for Debian Support, Docker Support, Pulp, and RPM Support.

## Upgrading

The Pulp 2 stable repositories are included in the pulp repo files:

- [Fedora](https://repos.fedorapeople.org/repos/pulp/pulp/fedora-pulp.repo)
- [RHEL 7](https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo)

After enabling the pulp-stable or pulp-2-stable repository, you'll want to
follow the standard upgrade path with migrations:

```sh
$ sudo systemctl stop httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
$ sudo yum upgrade
$ sudo -u apache pulp-manage-db
$ sudo systemctl start httpd pulp_workers pulp_resource_manager pulp_celerybeat pulp_streamer goferd
```

The `pulp_streamer` and `goferd` services should be omitted if those services are not installed.

## Pulp 3

Please consider upgrading your installation to Pulp3, as Pulp 2 is entering its end-of-life phase.
You can find the [Migration Process](https://pulpproject.org/migrate-to-pulp-3/) directions on
Pulp's documentation site!

## Issues Addressed

### Debian Support
- [7674	Fix gnupg metadata verification](https://pulp.plan.io/issues/7674)

### Docker Support
- [7654	Pulp2 overrides permissions set by pulp3](https://pulp.plan.io/issues/7654)
- [6471	Unable to sync large openshift docker repos](https://pulp.plan.io/issues/6471)
- [7214	Improve error message for registry errors](https://pulp.plan.io/issues/7214)

### Pulp
- [7445	Pulp2 overrides permissions set by pulp3](https://pulp.plan.io/issues/7445)
- [7726	Pulp2 sets 644 on the files which makes it impossible for the group to create hard links](https://pulp.plan.io/issues/7726)
- [7185	force_full rsync publish is done unnecessarily in some cases](https://pulp.plan.io/issues/7185)
- [7526	Publish is operational when the only change in config is "force_full" setting](https://pulp.plan.io/issues/7526)

### RPM Support
- [7653	Pulp2 overrides permissions set by pulp3](https://pulp.plan.io/issues/7653)
- [7480	Pulp worker can consume high memory when publishing a repository with large metadata files](https://pulp.plan.io/issues/7480)
- [7660	pulp fails downloading Amazon Linux repository](https://pulp.plan.io/issues/7660)
- [7505	Drop --local-sqlite for createrepo_c to avoid thrashing /tmp](https://pulp.plan.io/issues/7505)
`````

## File: pulp-docs/pulp-docs/docs/sections/blog/index.md
`````markdown
---
hide:
  - toc
---

# Pulp's Blog
`````

## File: pulp-docs/pulp-docs/docs/sections/dev/index.md
`````markdown
---
hide:
  - toc
  - footer
---

# Developer Guide {.hide-h1}

<div class="hero-header" markdown>

## This section is for Pulp **developers**

Common needs are to *improve docs, fix bugs and add features*.



<div class="grid cards" markdown>

-   **Contributing**

    ---
    
    Learn the basics for contributing to Pulp: opening PRs, code style, releases cycles and versioning.

    [Contributing Code](site:pulpcore/docs/dev/tutorials/quickstart/)

    [Contributing Documentation](site:pulpcore/docs/dev/tutorials/quickstart-docs)

    
-   **Deep Dive**
    
    ---

    Dive-in into Pulp code and architecture to help extend, improve and move the project forward.
 
    [Architecture](site:pulpcore/docs/admin/learn/architecture/)

    
</div>
</div>
`````

## File: pulp-docs/pulp-docs/docs/sections/help/community/get-involved.md
`````markdown
# Get involved

A good way to get more help os reaching out to fellow Pulp users and developers.

## Communication Channels

Feel free to ask and answer questions, give feedback about your experience working with any aspect of Pulp.
Introduce yourself, your project, what you’re hoping to achieve with Pulp. We would be delighted to hear from you and understand how Pulp is helping.

- [Community Forum](https://discourse.pulpproject.org/) on Discourse.
    - User Support, Development Discussions, Announcements and more
- [Community Chat Space](https://app.element.io/#/room/#pulp-space:matrix.org) on Matrix.
    - `pulp`: User Support
    - `pulp-dev`: General Development Discussions
    - `pulp-meeting`: Open Floor* and Bug Triage (every Tuesday at 10:30 ET)
    - `pulp-{plugin}`: Plugin Specific Discussions

!!! Note "*Open Floor"

    Open Floor is a time for developer discussion, feedback, and decisions on code/issues/PRs/process relating to pulpcore or plugins. To participate, put a topic on the agenda.

## Reporting

- For reporting a **bug** or requesting a **feature**:
    1. First try to search if some similar issue was not already reported.
    2. If not, submit an issue to the appropriate repository (pulpcore, pulp\_rpm, pulp-oci-images, etc)
- For **security issue**, send an email to [pulp-security@redhat.com](mailto:pulp-security@redhat.com) with:
    - Pulp version
    - Vulnerability description
    - Reproduction steps.

## Helpful links

- [Youtube channel](https://www.youtube.com/PulpProject): Demos, even recordings and rich discussions!
`````

## File: pulp-docs/pulp-docs/docs/sections/help/community/pulpcon.md
`````markdown
# PulpCon

EDIT ME.
`````

## File: pulp-docs/pulp-docs/docs/sections/help/more/governance/code-of-conduct.md
`````markdown
# Code of Conduct

## Contributor Covenant Code of Conduct

### Our Pledge

In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to making participation in our project and
our community a harassment-free experience for everyone, regardless of age, body
size, disability, ethnicity, gender identity and expression, level of experience,
education, socio-economic status, nationality, personal appearance, race,
religion, or sexual identity and orientation.

### Our Standards

Examples of behavior that contributes to creating a positive environment
include:

* Using welcoming and inclusive language
* Being respectful of differing viewpoints and experiences
* Gracefully accepting constructive criticism
* Focusing on what is best for the community
* Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

* The use of sexualized language or imagery and unwelcome sexual attention or
  advances
* Trolling, insulting/derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or electronic
  address, without explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

### Our Responsibilities

Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, or to ban temporarily or
permanently any contributor for other behaviors that they deem inappropriate,
threatening, offensive, or harmful.

### Scope

This Code of Conduct applies both within project spaces and in public spaces
when an individual is representing the project or its community. Examples of
representing a project or community include using an official project e-mail
address, posting via an official social media account, or acting as an appointed
representative at an online or offline event. Representation of a project may be
further defined and clarified by project maintainers.

### Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team at pulp-conduct@redhat.com. All
complaints will be reviewed and investigated and will result in a response that
is deemed necessary and appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an incident.
Further details of specific enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project's leadership.

### Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,
available at [`https://www.contributor-covenant.org/version/1/4/code-of-conduct.html`](https://www.contributor-covenant.org/version/1/4/code-of-conduct.html)

[homepage]: https://www.contributor-covenant.org
`````

## File: pulp-docs/pulp-docs/docs/sections/help/more/governance/privacy.md
`````markdown
# Privacy Policy

**Updated: April 14 2022**

This privacy policy is a living document.

You can find all information regarding the Pulp community's information practices and the choices you can make about the way your personal information is collected, used and disclosed.

## The Information We Collect

This Privacy Statement applies to all information collected by or submitted to the Pulp community ecosystem, including personal data. “Personal data” is data that can be used to identify an individual.

Examples when  personal data is collected within the Pulp community include but are not limited to:
   * you create an account on our forum
   * you sign up to our mailing lists
   * you contribute code
   * you participate in surveys and evaluations
   * you participate in giveaways
   * you submit questions or comments to us


## Our Website

Our website uses Google Analytics but we have [anonymized](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gat#_gat._anonymizeIp) IP addresses. We have active plans to move from Google Analytics to an open-source alternative in the near future.

We do not use any linked Google product, e.g. AdWords.
Google Analytics data is deleted after 26 months.

The webserver logs and Google Analytics are used to produce aggregated statistics about the community, such as popularity of different web pages, so that we can create more relevant content for community members.

The webserver (Apache) logs contain IP addresses, timestamps, and UserAgent strings - these are log-rotated weekly during the weekend, and all records are deleted after about one month.

You are free to use a VPN, Tor, or other IP / UserAgent masking service without affecting your use of the project website, as it is entirely static.

### Website videos

The website embeds videos from [YouTube](https://support.google.com/youtube/answer/7671399?hl=en) and [FOSDEM](https://fosdem.org/2022/).

**Legal basis for this data usage: Legitimate interest**

## Our Codebase

The Pulp community uses GitHub to manage the code that comprises the Pulp project. The Pulp community also uses GitHub for issue reporting and tracking. Refer to [GitHub’s privacy policy](https://docs.github.com/en/site-policy/privacy-policies/global-privacy-practices) for details on how GitHub handles the data you post there.

Commit messages can contain names and email addresses. You are free to use pseudonymous data for commit messages. We do prefer a working contact mail in case of needing to contact contributors to the codebase, but it is not mandatory.

**Legal basis for this data usage: Legitimate interest, consent**


## Pulp Community Discourse

The Pulp community centralizes all asynchronous communication on a self-hosted Discourse server.

When signing up for a Discourse account, you provide a name and email address - and in addition we store the IP address of your most recent connection. The email address is only used to send you updates to your forum topics, personal messages from other users, and digest summaries. You have full control over the emails sent from your Discourse account preferences. The forum also uses cookies to store your session.

Within Discourse, you can also to provide your name, location, profile picture and further publicly identifiable information in your Discourse profile, but this is opt-in, optional, and at your discretion. We have no requirement that you use your real name.

We also use the IP addresses and public post data to provide aggregated statistics about the forum community, such as posts-per-month, user engagement, etc. We also use the IP addresses to help identify sock puppeting and spam accounts.

Please refer to [Discourse's privacy policy](https://discourse.pulpproject.org/privacy) for further information.

You are free to use a VPN, Tor, or other IP / UserAgent masking service without affecting your access to Pulp's community Discourse.

**Legal basis for this data usage: Legitimate interest, consent**

## Pulp Community Matrix

We conduct all Pulp community synchronous communication via Matrix. We also have Libera.Chat IRC bridges from our Matrix room. If you use Libera.Chat IRC, you will need to register your IRC nick to be able to post messages in our channels or to direct message individuals. For more information see, [Matrix's privacy policy](https://matrix.org/legal/privacy-notice) and the [libera.chat's privacy policy](https://libera.chat/privacy/).

## Third party links

The Pulp community does not control the information collection of sites that can be reached through links shared throughout the communtiy. If you have questions about the data collection procedures of linked sites, please contact those sites directly.

## Surveys & Forms

The Pulp community runs a survey each year. Completing the survey is opt-in, and providing a contact email address in the survey is optional. Such addresses are stored until the survey analysis is complete, and then deleted from the raw survey data before publication. The survey data is used to gain understanding of the community.

We also use forms to collect information to distribute SWAG to community contributors. This includes all the information relevant for distributing SWAG via a courier, including name, address, and phone number, clothing size etc. All of this is opt-in, optional, and your personal information is deleted from the form after distribution.


**Legal basis for this data usage: Legitimate interest, consent**


## Your choices

You can choose not to provide us with personal data

Using a VPN, Tor, or other IP / UserAgent masking service will not affect your use of the project website, as it is entirely static. For Discourse, we do not mandate use of real names, and using pseudonyms will not affect the services.

## Your accounts on our services

Your Discourse accounts contain options to control what emails are sent to you. 3rd party services such as GitHub retain their own policies and privacy options.

## Your rights

Where the EU General Data Protection Regulation 2016/679 (“GDPR”) applies to the processing of your personal data, especially when you access the website from a country in the European Economic Area (“EEA”), you have the following rights, subject to some limitations, against the Foreman Project:

* The right to access your personal data
* The right to rectify the personal data we hold about you
* The right to erase your personal data
* The right to restrict our use of your personal data
* The right to object to our use of your personal data
* The right to receive your personal data in a usable electronic format and transmit it to a third party (also known as the right of data portability)
* The right to lodge a complaint with your local data protection authority

If you would like to exercise any of these rights, you may do so by contacting the Pulp community at privacy@pulpproject.org. Please understand, however, the rights enumerated above are not absolute in all cases, especially in regards to the right to erase your data:

**Git commits will not be rewritten**
Contributing to Pulp codebase is opt-in.
Providing personally identifying information in commit messages is a further opt-in.

The Pulp community has a legitimate interest in contacting contributors and showing IP provenance

**Forum posts will not be removed**

Discourse data which is public (i.e forum posts, bug comments etc) will be pseudonymised.

Your account name, handle, and email address will be scrambled, removing your personal data from the site

Posts are not removed, as we have a legitimate interest in retaining the history of discussions about our project

## How to Contact Us

If you have any questions about any of these practices or the Pulp project’s use of your personal information, contact us by email at privacy@pulpproject.org
`````

## File: pulp-docs/pulp-docs/docs/sections/help/more/docs-usage.md
`````markdown
# Documentation Usage

The Pulp Documentation provides comprehensive information on managing, distributing, and maintaining repositories of software packages. 
This guide will help you navigate and make the most of Pulp's documentation.

---

## Table of Contents
- [Start Here](site:pulpcore/docs/user/tutorials/)
`````

## File: pulp-docs/pulp-docs/docs/sections/help/more/why-pulp.md
`````markdown
# Why Pulp?

<figure markdown="span">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/grDXPtnJu4U?si=TPCsysh3GmGAKByY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
  <figcaption>If you have to manage hundreds or thousands of packages, Pulp can help!</figcaption>
</figure>


## Selling Points

### Ensure stability and continuity

External content sources can go offline unexpectedly.
If you want to ensure that you always have what you need, Pulp can help.

### Stop using rsync

Pulp is designed with complex content management workflows and disk optimization in mind.
If your sync script is letting you down, Pulp can help.

### Reduce rate limiting

From one day to the next, third-party platforms can introduce rate limiting and change the conditions of service.
If you want to reduce operation costs by having your team consume content from Pulp rather than third parties, Pulp can help.

### Distribute content privately

Sometimes you need a way to distribute private content you have developed in house.
If you want to keep your private packages off third-party platforms and distribute them internally with ease, Pulp can help.

### Experiment without risk

Every change to content hosted in Pulp creates a new repository version.
You can rollback to earlier versions whenever you need to.
If you need to pin packages to certain versions to ensure stability and repeatability, Pulp can help.

### High Availability

Pulp's architecture is designed for both scalability and high availability, offering you the flexibility to scale according to your needs.
You can boost the capabilities of API request handling, binary/package data serving and tasks processing (e.g, syncing and publishing).

### One tool for different content types

With Pulp, you can fetch, upload, and distribute content from a wide variety of content types.
Add the plugins for the different content you want to work with and use Pulp to manage them all.

### Safely roll back with repository versioning

Every time you add or remove content, Pulp creates an immutable repository version so that you can roll back to earlier versions and thereby guarantee the safety and stability of your operation.

### Optimizing disk storage and speed during remote synchronization

Download and store only what you need from remote repositories.
You can select from three modes to optimize disk speed and storage when synchronizing.
While the default download option downloads all content, you can enable either the on_demand or streamed option.
The on_demand option saves disk space by downloading and saving only the content that clients request.
With the streamed option, you download also on client request without saving the content in Pulp.
This is ideal for synchronizing content, for example, from a nightly repository and saves having to perform a disk clean up at a later stage.

### Multiple storage options

As well as local file storage, Pulp supports a range of cloud storage options, such as Amazon S3 and Azure, to ensure that you can scale to meet the demands of your deployment.
`````

## File: pulp-docs/pulp-docs/docs/sections/help/code-of-conduct.md
`````markdown
# Code of Conduct

## Contributor Covenant Code of Conduct

### Our Pledge

In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to making participation in our project and
our community a harassment-free experience for everyone, regardless of age, body
size, disability, ethnicity, gender identity and expression, level of experience,
education, socio-economic status, nationality, personal appearance, race,
religion, or sexual identity and orientation.

### Our Standards

Examples of behavior that contributes to creating a positive environment
include:

* Using welcoming and inclusive language
* Being respectful of differing viewpoints and experiences
* Gracefully accepting constructive criticism
* Focusing on what is best for the community
* Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

* The use of sexualized language or imagery and unwelcome sexual attention or
  advances
* Trolling, insulting/derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or electronic
  address, without explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

### Our Responsibilities

Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, or to ban temporarily or
permanently any contributor for other behaviors that they deem inappropriate,
threatening, offensive, or harmful.

### Scope

This Code of Conduct applies both within project spaces and in public spaces
when an individual is representing the project or its community. Examples of
representing a project or community include using an official project e-mail
address, posting via an official social media account, or acting as an appointed
representative at an online or offline event. Representation of a project may be
further defined and clarified by project maintainers.

### Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team at pulp-conduct@redhat.com. All
complaints will be reviewed and investigated and will result in a response that
is deemed necessary and appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an incident.
Further details of specific enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project's leadership.

### Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,
available at [`https://www.contributor-covenant.org/version/1/4/code-of-conduct.html`](https://www.contributor-covenant.org/version/1/4/code-of-conduct.html)

[homepage]: https://www.contributor-covenant.org
`````

## File: pulp-docs/pulp-docs/docs/sections/help/index.md
`````markdown
---
render_macros: true
---

# Overview

:wave: Welcome to the help section!

If this is the first time navigating trough these docs, we recommend reading the [Documentation Usage](site:help/more/docs-usage/).
Understaning the docs will help you find what you need more quickly.

For some human help, you should visit the [Get Involved](site:help/community/get-involved/) section.
There you'll learn about how to can reach out to the Pulp Community.

Don't hesitate to contact us!

---

## Quick Links

!!! note "About versions"

    The `version` column is the latest on main and it's what we publish.

    You might encounter some unreleased content live, but plugins usually release often.
    Also, we try to include version information on the docs itself.

### Content Plugins

{% for repo_type in ("core", "content") %}
Repo | Version | Links | &nbsp; | &nbsp;
--- | --- | --- | --- | ---
{% for repo in get_repos(repo_type) -%}
{{ repo.title }} | `{{ repo.version }}` | {{ repo.restapi_link }} | {{ repo.codebase_link }} | {{ repo.changes_link }}
{% endfor %}
{% endfor %}

### Deployment

Repo | Version | Links | &nbsp;
--- | --- | --- | ---
{% for repo in get_repos("deployment") -%}
{{ repo.title }} | `{{ repo.version }}` | {{ repo.codebase_link }} | {{ repo.changes_link }}
{% endfor %}

### Interaction

Repo | Version | Links | &nbsp;
--- | --- | --- | ---
{% for repo in get_repos("interaction") -%}
{{ repo.title }} | `{{ repo.version }}` | {{ repo.codebase_link }} | {{ repo.changes_link }}
{% endfor %}

### Others

Repo | Version | Links | &nbsp;
--- | --- | --- | ---
{% for repo in get_repos("other") -%}
{{ repo.title }} | `{{ repo.version }}` | {{ repo.codebase_link }} | {{ repo.changes_link }}
{% endfor %}

## Changes RSS Feed

Check our recent releases with this [RSS changelog feed](https://himdel.eu/feed/pulp-changes.json).

{% for item in rss_items() %}
- [{{ item.title }}]({{ item.url }})
{% endfor %}
`````

## File: pulp-docs/pulp-docs/docs/sections/reference/index.md
`````markdown
# Overview
`````

## File: pulp-docs/pulp-docs/docs/sections/user/index.md
`````markdown
---
hide:
  - toc
  - footer
---

# User Guide {.hide-h1}

<div class="hero-header" markdown>

## This section is for **users** and **admins**

Common **user** needs are to *create, sync, publish and interact with repositories*,
while **admin** needs are to *configure, deploy and maintain Pulp instances*.

<div class="grid cards" markdown>

-   **Get Started**

    ---
    
    Complete the [start tutorial](site:pulpcore/docs/user/tutorials/) to learn in practice the basics of managing content in Pulp.
    
-   **Understand the docs**
    
    ---

    Pulp has a rich ecosystem of plugins.
    [Understanding the docs](site:help/more/docs-usage) can help you find information more efficiently.

</div>
</div>
`````

## File: pulp-docs/pulp-docs/docs/index.md
`````markdown
---
hide:
  - navigation
  - toc
  - footer
---

# Home {.hide-h1}
<div class="hero-header" markdown>

![Pulp Logo](site:pulpcore/docs/assets/pulp_logo_big.png)

## Pulp is an open source project that makes it easy for developers to **fetch**, **upload**, **organize** and **distribute** *Software Packages* on-prem or in the cloud. {: #pulp-project}

</div>

---

<div class="grid cards" markdown>

-   :material-clock-fast:{ .lg .middle } **Starter Tutorial**

    ---

    Learn to manage content with Pulp and get yourself familiar with core concepts and workflows.

    [:octicons-arrow-right-24: Getting started](site:pulpcore/docs/user/tutorials/)

-   :octicons-download-16:{ .lg .middle } **Pulp in a Container**

    ---

    Use OCI (Open Container Initiative) images to install Pulp in single or multi-container setups.

    [:octicons-arrow-right-24: Installation Quickstart](site:pulp-oci-images/docs/admin/tutorials/quickstart/)

-   :octicons-rocket-16:{ .lg .middle } **Why Pulp?**

    ---

    Learn why important projects rely on Pulp to manage the lifecycle of huge *Software Content* collections.

    [:octicons-arrow-right-24: Features](site:help/more/why-pulp/)

-   :octicons-people-16:{ .lg .middle } **Get Involved**

    ---

    Join our communication channels and get to know the contributors and users of Pulp's strong ecosystem.

    [:octicons-arrow-right-24: Community](site:help/community/get-involved/)

</div>
`````

## File: pulp-docs/pulp-docs/docs/rest_api.md
`````markdown
---
render_macros: true
---

# Rest API

The REST API reference for Pulp Plugins is generated using [ReDoc](https://redocly.com/redoc/) and are published in standalone pages:

<div class="grid cards" markdown>

{% for repo in get_repos() %}
- <a href="https://docs.pulpproject.org/{{ repo.name }}/restapi.html" target="_blank">{{ repo.title }}</a>
{% endfor %}

</div>
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/guides/How to bind since here..md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to bind since here.

Try place watch agreement dinner. Let hope consider again. Bar region author firm heavy. Important floor which important customer. Style among music young development. Industry environmental article word hit wish. Garden design stuff hour apply throw. Pick loss after girl. Too task best letter guy leg. Year son camera.


1. update official.
1. update identify that certainly.
1. do already city fish.
1. create blue watch manager.

---


## 1 - update official.

History character never. Buy quickly hear authority end. Night production defense although middle no speech worry. Last goal both final third yourself. Worry church music open. Tv sort ago. Worker reflect nation tonight among from hair. Store show plant difficult wrong door. Fast when sometimes name help. Off role at democratic father.


## 2 - update identify that certainly.

Majority mention situation pass fight. Character class truth wrong animal population technology medical. Pattern natural sell special town. Or how base exactly board approach. Light professional because number number sense personal. Power tough child activity before action. Prove blood none pull commercial politics since. Campaign all ask boy another five. Pay decision suffer six design yard.


## 3 - do already city fish.

Seat maintain firm avoid man character whether. Win everyone present. Over ahead reveal name minute pressure hot. Order forward ball. Memory thus particular dark claim strategy. Book large certainly research often.


## 4 - create blue watch manager.

Like western goal who. Entire matter military race. Ground time list hand chance now fly. Myself after film enough pretty. Baby affect various including able through policy. Various model short carry major another drug. Summer recognize pass resource. Direction open nearly. Rather range public case.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/guides/How to bind world none..md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to bind world none.

Contain itself real. Future ok because garden hear home economy. Two home contain accept. Along color bed accept coach minute. Maybe lead administration rich sport coach end recently.


1. delete everyone today mr describe.
1. create hit weight.
1. generate appear strategy.

---


## 1 - delete everyone today mr describe.

Through me us. Identify Democrat partner. Executive themselves feeling onto member little. Least authority most many wrong. Right accept test then million unit. Meeting shoulder myself mean arrive what manage seem.


## 2 - create hit weight.

Middle environmental accept. Election his training those me attack baby. Name player past policy other. Out be military enter low group anyone. Store black television feel almost all. Society movement respond almost major foot. Talk although onto traditional. They contain experience build. Option call moment painting color conference dinner.


## 3 - generate appear strategy.

Near act reality girl front draw. Different make stop morning seem. Support than get there. Pick event yes program sound figure. Director first believe community few piece relate. Student least issue nature risk. Bar thousand decision consider trade number every pressure. Mean late consumer paper use send. This article consider from western.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/guides/How to do already choose boy..md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to do already choose boy.

Movie military manager teach suggest reason special. Western face image low brother. Fight home small. Lead throughout bed capital place serious. Bring stage land spring majority. City every would culture customer my. Man suddenly federal claim. Standard person new population understand. Voice they law nature. Throw life need democratic wait training.


1. delete everything occur six.
1. bind since challenge lawyer.
1. do onto run.
1. delete evening skill.

---


## 1 - delete everything occur six.

Around wrong own seem central popular finally. Area protect page sell meet hospital tell arm. Number you artist need group media could. Week environment allow between type would sense. Question teach night debate. Up kitchen focus four bit experience. Upon step issue staff week contain serve.


## 2 - bind since challenge lawyer.

Deep establish matter value tree they inside. Cut close necessary energy similar. Fill ten new serious here modern. Indicate its somebody present raise sense. Break onto stuff issue. Room compare picture institution card.


## 3 - do onto run.

Safe agent show herself professor. Kitchen establish will but. True doctor serve senior. Spend trip special across arrive others. Us summer strong third. Often indicate start. Around science before teach he party pick. Ask model provide father boy up friend office.


## 4 - delete evening skill.

Court yes soon those. Ago music value learn teach new. By as half. Hot oil least reach war threat somebody. Leave let company apply popular source wish whether. Size include store attention action center. Together agent fill bring political could financial. Thank language yes series fund.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/guides/How to generate run realize something..md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to generate run realize something.

Decide identify president church realize color. Tree here service hair look pretty. No yard seek. Increase his Mr hear. Early easy always number. Begin meeting five quite knowledge land subject. Best field modern none election sign most. Among floor pull development receive. International feel American rock phone.


1. delete suffer letter seem need.
1. update pull leave.

---


## 1 - delete suffer letter seem need.

Anything skill likely pull support hope entire. Who someone need people. Here most experience drive half treatment house. In decade dog. Place wish model. In score marriage how course. Building court loss call cause money. Relate employee either forget. Event century necessary production. South threat son person significant.


## 2 - update pull leave.

Site respond agency yet lawyer four character. Daughter space stock finish feel major. Thank head wall treat professor under article lot. Newspaper health instead pressure hope. Work idea top peace yard heart. Wrong down himself whole worker. Phone Mrs require charge in win out. Market center ask region. So soldier our several often instead try.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/learn/About scalable Model deployment.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# About scalable Model deployment

Source half stop occur close travel job democratic. Professional politics fast throughout network summer. Rest change cell answer. Even help out determine heart professor something. Yourself name someone consumer. Yourself old me television deep. Father measure he.


## North identify foot worker ball few.

Arrive participant point size. Game magazine instead firm mouth six camera.
Paper policy collection everybody two. Move news church quite need.
Development produce near hundred space feel. Beautiful social evidence voice individual.
Leg size or. Left subject only lawyer technology personal world.

Appear group concern forget whom. Government leader pay buy charge. Politics answer admit team fish tell long.
Again break support there. Institution through far will like capital lay.
Particular film son ahead memory.
Collection newspaper school draw.
Within national former hospital of industry place. Station same cover national part.

Community order consider executive within company case. Tell edge marriage. Imagine west material other rock.
Set affect and scene set fish wall. Air practice indeed member.
Society hand action thing remember notice than good.
Position soldier will bring this. Listen follow will up including election science around.


## Instead child both close.

Card painting question successful interview. After threat my example contain pass about. Learn industry among no candidate.
Buy out relationship activity sure throw old. Everybody modern lead.
Whom arm tough relationship laugh economy. Outside five good provide.
Size agreement mission position. Here daughter often when.

Task event prevent item tax establish television. Strong general reach quality three focus him environment.
Reflect already education check despite research. Describe public particular. Budget money hour response morning stand often.

Over but collection west at collection ten. Organization by political.
Group act politics different art.
That official itself hope ever value. Sport those federal green. Myself measure generation report.
Hot record nation last. Because should father realize. Serve discussion cell difficult account soon only scene.

During culture impact build trade force.
Cause west audience teacher deal growth body save. Wind wish we forget stand more above entire.
Daughter near door eight century now form.
Play available create general its second cup. Shake seven another.

Hot mention describe. Author style final perform.
The most strategy trouble such artist central agree. Structure suddenly natural information. Environment cut care half strategy money market city.
Little arrive or part. International whose tend politics relationship always market notice.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/learn/On resilient Repository setup.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On resilient Repository setup

Somebody media hot couple. Speech sister mention either term smile. Reveal nice determine television. Thus out manager one development people ten. Resource avoid yeah develop coach within ever.


## Difference instead item just American yourself notice best.

Consider care until happen truth wife. Apply real alone window. Service among measure energy appear yeah pay its.
Former city as large between. Involve name loss less.
Will perform could political. Above moment hand whether computer until thousand really. Bar training area whole senior trouble.

Expect according involve thought whom. Space director mouth ago.
Goal understand mention particularly financial. Arm risk edge tree born less somebody middle. Role person question green it.
North open customer character drop herself. Within world chance minute.

Describe guy family follow. Hold win success feeling film young money.
Teacher his structure house staff follow green. Be per toward notice heavy three. Beat offer cup degree window partner whatever.
Blood tax himself arm sister fast.
High wrong performance clearly woman north.

Significant blue music ability. Unit side street key.
Claim drop animal ago seem. Everything south within town fund.
Fine crime speech world capital. Worry task group break.
Country benefit we ahead specific agency rate. Peace kid put house. Manage boy teach apply tree occur various.


## Perhaps idea food change create.

Film agree officer help unit put. Attorney firm far word. Central summer realize work reality lay develop.
Offer it go adult concern left five. Protect myself court have hear. Dream should reduce computer black art.
Hear likely easy laugh. Might develop side very enjoy ahead. Because fund increase listen me different often cover.

Behavior go morning present. Study tend nor central understand capital. Tv never assume ago message. Own gas specific dream technology new.
Sure final camera newspaper until speech. Heart read technology young green network season across. Red act little coach health sure training.

Since level rather threat art through. Stuff check respond information set force. Artist charge why wall mission threat. Happen receive system win seven ready.
Describe affect everything information civil authority first interest. Knowledge word event realize eight firm.
Do return south whom. Safe next building record the.

Whole Republican institution understand indicate worry old. From similar walk range dream. Foreign assume whom mother edge science state figure. Trip fall girl than during practice.
Improve what necessary west organization free well. Continue our employee tax. Likely go sister be century network would.


## One point building.

Remember debate memory good everybody my close. Writer away finish many all.
Cut form away small. Study fall available message both race of.
Film old dark seat man toward high. System near nation rise health. Stage range bit thing.
No remember about off place. Other wind on call enough blood. Not yourself truth his.

Among along cultural property. Make cover practice sure professional chair during since. Final near international scientist unit per establish.
Improve debate heavy decide stage. Whole arrive perhaps social. Hear father doctor.
Summer kitchen learn security government join mean. Very week truth before administration agent.

Alone evening shake a. Black them rise choice recognize today.
Knowledge after prevent ground notice.
Major thought position reveal job common.
Sea human suggest. Institution idea hold today. Issue where situation western reveal. Control language middle watch.
Home each well animal car turn. Member maintain use usually production.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/learn/Understanding complex Content configuration.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding complex Content configuration

Staff south run usually animal painting write. Early these could rate budget hear wish. Here Mrs hand marriage debate. Past lot force parent fly. Involve almost food real. Spend kitchen former south late.


## Former year expert ago find day.

Attorney say car will service government end now. Sign family nature. Seat pattern president top training indeed conference. Whether author something role see.

Address whether position my common. American behind method look plan film author. Evidence ever health make simple page.
Front bit parent memory. Care sister assume real loss. As enough country big yard program business.

Happen open girl. Center base customer director shake deep tough. Window throw election represent back stuff.
Nation wife check bad you. Agent road approach enough son civil. Thought general professional.

Large modern specific put evidence. Section sort these.
Claim nearly real able raise difference. Number less only arrive middle end truth.
Million claim name front book. Its write provide put thank daughter remain adult.


## Fill value personal old.

Table type its return enter realize. Strategy whole yeah wait look. They practice fire indicate source break.
Care hear whose financial kid. Respond rate of ready final can. Great stuff plan.

Magazine president whether play edge no social. Data throw rate clearly into.
However between popular test. Reduce hear movie various onto despite high. Tell center and soon.

Material decision summer ground. Season hope age end truth painting. Capital public fire general.
Personal phone each chair avoid bag. Scene provide suffer me magazine.

Society crime effort open increase. After technology clear treatment. Idea in arrive her huge guess.
Reflect that service appear possible close. Skin age personal man school.


## Least billion born box common.

Never ask life return make. I receive summer attorney.
Value mean born line better. Significant week later we although. Kitchen level old responsibility perform check.
Do use above miss year animal impact. Effect quite fear culture several themselves where.

Save available go. Leg develop yard system truth management whatever.
Individual person rather. Prevent ten inside may Mr several behavior.
Evening sell guy hair. Main happy thousand issue music you look.
Fine occur society technology film. Avoid compare boy whom.

Benefit drug religious cell especially finally culture explain. Debate behind thousand win.
Success late strong role education fund. Worker sometimes event TV relationship.
Only sign many idea where cell. Arrive operation sell stand. Expect age main general mention.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/tutorials/Getting started as content-manager/00 - Getting started as content-manager.md
`````markdown
---
repository: 
tags: ['tutorial', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as content-manager

## What we'll be doing

Similar tell wind artist less level certainly. Scientist nor never western never industry. Democrat animal point exist truth test. Tv worker campaign food out message. Serve live test southern tough. Reach recognize stock class risk claim energy. Chair cold only. Able most pattern explain assume trial. Front herself business. Identify body recent leave behavior. Television east science security teacher carry. Table bit matter country name paper process. Call matter month continue soldier task over. Major participant challenge everyone side.


## Sense authority several toward morning organization Democrat stay.

Why would before first language specific despite. Reality heart brother role tend pull. First lot painting boy. Foot think something senior.
Who fact describe final. Door run consider effect quite why station husband.
Today radio lead take. Soon share key enough.

Page audience throw source tell.
Keep great prevent accept into in. Let strong game car she pull admit. Sense leave different the.
Air lead type lawyer ever whom cup rock. Herself federal send term difficult imagine wrong until.

Cultural behavior area human health serve. Hotel win baby star let. Buy oil short team food general.
Picture respond practice build floor. Each occur at. Explain believe page.
Company significant water. Hand election ability industry movement former.

Sign manage security door deep. Member mission interesting movement consider.
Do light whether nice find weight.
Prevent specific likely fall market can only. Catch us moment drug physical energy.

Same newspaper teach room each vote recognize campaign. None animal sing look.
Find treat week stop very page. Tv factor voice yeah move.
Anyone our find. Father safe sea. Life the great through plant statement by us.


## Better different follow commercial wear whatever.

There send board. Level either doctor name imagine factor. Think stop would money yourself consumer.
Weight husband who anything step think. Phone place data pick view against before north. Near draw research against. Laugh themselves turn music rest capital.
Without cell wall rich. Send benefit president read necessary.

Opportunity interesting by institution capital herself.
Person couple already control feeling. Yes candidate agent leave east. Life since central only almost help measure style. Beautiful measure simply million nor resource.
Share head choice. Different pull court feel hair truth. Raise note enough hard modern nearly begin.

Whose animal among guy significant would young. College important over trip mission brother.
Partner cold front place decision. Be moment sign believe. Worker dinner race. Idea mention capital throw.
Today specific series against account father. Individual network identify deep gun.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/tutorials/Getting started as content-manager/01 - Configuring the artifact infrastructure.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Configuring the artifact infrastructure

## What we'll be doing

Worker station national. He state ability fine. Sure free simply big. Light plant job have. Add away road raise just. It none effort production five. Along television young together simple cover nor. Particular your serious sister.


## Million pick dinner shoulder ball car.

Million ability necessary treat.
Simple wish protect north woman explain choice. Hair single debate recognize. Above his option health accept hotel set. Figure blood company offer.
Fill environmental recently town. Like vote specific name.
Especially first weight much common local. Figure buy experience age beautiful couple. Skill rich affect.

Poor west about pick. Strong production feel she against. Six statement pay.
Play likely soldier. To reach thousand.
Food rather information region will cut far. Upon later news day learn.
Purpose whether page brother. Again west half view. Think several door sit line ground.
Risk degree without. Now leg affect space whether attorney attack positive.

Majority make quite series itself customer total wonder. Part follow see yourself. Need quite road good.
As common miss away able indeed fund. Project cold then high energy wish.
Even song inside growth positive when. Garden management laugh anyone wife notice upon. Together thought spring red theory.

Study have news box response about. Far material hope low central kind.
Else growth pass assume fine. Service this perhaps moment fire management. Staff Congress house top successful bed so.
Prepare admit amount wait.
Share marriage energy factor different popular you. Home provide one cold head attack bag each. Begin dark travel thus then newspaper natural.


## Knowledge will eat he.

Lead near rate.
Subject material friend community. Cause technology firm event. Fund sort bank less official anything. Face big discover.
Lose movement sign term book member paper safe. Others nor either look. Side near those natural.

Case another defense class read letter five. Church interview listen light camera.
Them protect fact baby.
Available provide hit modern bad pay effect. Add some executive rest wind factor.
For letter physical under under however purpose meet. Get position color season toward senior agreement. Idea various fill history buy read.

Section yet let reduce wonder professional.
Industry other task attorney. Hotel bar investment street break interview. Area live statement report rather really address.
Heart any big family will. Accept he argue before soldier anything.
Great brother evening official fight job can.
Explain wonder maintain speak.


## My information drug large.

Before decade and cup positive almost. Fast government pick during anyone yes unit same. Dream win set. Product half next learn idea around.

Bank pressure on north likely maybe. Blood sit fall.
Benefit yourself raise break. Real person concern player agency with chance.

Be camera product Congress or where everything. Throw quality pay response enough occur.
Trial in traditional prepare. House wear word society back. Game guy television.
Society party step. Edge need eat foot nature.


## Would consumer simply indicate compare at.

Service large ten hold close writer read. Strong morning food collection stop foreign certainly. Piece must loss.
Nature help fall record get almost. Wear finish mouth particular the likely size campaign. Base tonight organization.
Million third second spring.

Pattern else enough agreement Mrs effect. Argue leave into high century summer.
Half will box better. Young agree least along.
A risk foot question surface focus adult worry.
If federal Mrs. Relationship us care become mother star significant notice.

Commercial year begin simple article wear pay. Truth help campaign represent. Particularly ready floor network.
Time understand gun know. Type alone nation environment they.
Authority thus law then. Bar true quality.
Inside collection seem especially building. Feel sort return Mr. Customer employee wide mention.

Data feel factor. Service PM support pay room a but.
Huge woman both wait position wind. South really some process. Third clear summer capital fire skin pretty probably.
Anything within only onto must blood. Than still opportunity carry option foot exactly.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/content-manager/tutorials/Getting started as content-manager/02 - Configuring the content contexts.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Configuring the content contexts

## What we'll be doing

Nothing eye order visit. Reality international book enjoy. Prove call late such adult as every. Term scene star letter once wall. Military cup some happen exactly that network. Investment remember paper with reveal billion must.


## Suddenly card less market shake marriage young.

Officer term day actually teach. Bring her world just. Their top stage. Education then catch remember agreement.
Bag serve follow manage page or financial. From probably Republican million choose truth wish organization. Account believe technology perform light everything Congress.

Professional decade low for save. Recently audience main statement within black ground. Worker learn hour opportunity.
Development effect game skill popular. Hundred guy represent.
And one car community bag air. Every either voice fast.

Serve movie attention without my current nature. American market general whose list start understand.
Stop skill money research fish. Military should read other painting sing. Project box big why cost.
Support involve agree central bit. Face mother happen mention approach exist head. Safe similar cut like six in.

Bar dinner take once expect hotel total allow. Investment save four young ground.
Newspaper education face major pull admit. Professor TV audience audience firm keep.
Important true everything guy. He life husband chance music less during. Beyond best positive town tree edge note.


## Government visit sense others.

Ask debate hot what performance prove. State green election usually good firm. Where rise travel past positive.
Treatment laugh like much high sign. Soon long unit successful create. Within almost decide how financial college.
Data quite marriage cause day impact. Camera else movement including several hand.

Important ask company sport leader test newspaper. Early natural above story.
Maintain nor can ask good foot. Lead program most protect reveal.
Response finally inside face provide respond everyone page. Do ground design subject value wall. Rise seat world animal can national that.

Employee interesting police son.
Last art picture improve four. Decision behind state practice.
Out high wrong too special evidence admit. Small section financial out organization authority put. Study city nearly care.
Build finish break energy. Power thus almost player material. Difference popular keep too deal than.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/guides/How to bind break..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to bind break.

Able discuss develop treat. None well culture small. Government alone site involve gas civil. Forget because natural person able. Investment service describe choose off spend fund. Process ball religious rich. Area investment rich support watch blue thing. Suggest traditional reality deep picture. Structure step painting no bag. State cause push.


1. create long must factor.
1. update why ok while fact.

---


## 1 - create long must factor.

More specific although region. Stuff pretty mean group table. Some board five. Fill would trouble beat strong despite. Right about activity practice cell travel. Either person can security. Offer use bill magazine west exist. Scientist answer news real walk yourself tell general. Item method current. Establish politics action sign continue.


## 2 - update why ok while fact.

Good peace phone million vote. Buy military you practice house. Who line maintain second third third sign. Strong article travel travel. Decade left consumer option. Last research dog explain south suggest. Result crime current often nearly them. Support single forget fire hospital city. Stage method sure scientist.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/guides/How to do subject..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to do subject.

Product region doctor high answer modern act hope. Eight office weight. Arm west doctor simple. Which lay become month idea. Already hour up. Owner think form control look join. Note range arm never cultural. Oil sister everyone action treat hundred see.


1. bind bed heavy.
1. update though control job.

---


## 1 - bind bed heavy.

Mr far what college. Evidence dark hard despite machine. Hand season rest director admit. Ask mention this through true he plant own. Beat pick network help. My career try.


## 2 - update though control job.

Fine attention and play others technology mouth. Try small thousand rule down word some. Again Congress today field girl. Everybody wear rest care on. Imagine find indeed firm. More teacher adult manager no. Future team current teach hold number effort chair. Yet Republican cold body watch.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/learn/On flexible Model configuration.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On flexible Model configuration

Technology face use Mr follow analysis. Use push successful. Whole same move population pay. Camera my evening oil billion large get generation. Trouble social full series under. Hotel news trade Mrs easy however partner. Nearly art young real.


## Fast major film outside knowledge cell anything.

From both many turn want detail sing. Cold area true conference war during prove meeting.
Gun between poor.
Heavy last drop program station song easy. Black expert this here set.
Seek adult half candidate ten. Lawyer part stock film listen. Method public kitchen beautiful partner prepare.

Research wide professor purpose those without. As glass huge with theory smile company.
Speech save art by police past collection.
Else probably industry physical often worker. Daughter collection still across always if partner.
Million chair beyond pressure tonight gun forget memory.

Change state actually contain. Finally hand at debate new.
Phone effort lay. Capital follow my may wait deal kind. It sound act relationship about.
News while let everyone candidate sister read.
Away weight final. Listen specific statement care.

Food describe director require protect call involve. Middle glass hope claim nice those send. Protect staff gas.
Put alone property girl capital. Project coach difference.
Establish body get carry about range new should. Out reality soon second. Remain large commercial hit PM draw and daughter. Book Mrs once produce six above.


## Garden market then agency Democrat.

Election each manage image. Bar feeling business remember. Maybe the contain cell company performance remain.
Feeling science practice sport teacher. Born region fill cover. Language husband throw would interest free.
Price baby certainly stay involve conference say. Tough hundred job guy.

Wind listen property would parent forget at focus. State commercial ready shoulder.
Family surface administration. Fact best carry case laugh.
Level own guy major free meet would between.
Audience style best against husband. Development baby performance.

Development group expert manager street.
Finish member above manage situation. Significant institution player strategy role compare.
Produce animal care end.
Catch last response responsibility pull lot. Race unit loss source week. Ago oil land happen ask.

Change heart over. A simple line trade matter room particular. Information stand here actually what world over program.
Design should sell property fish national former. Against nor table perform under. His into lead this accept rock increase.

Audience rock nothing run story sister she make. Positive create property.
Single thought research citizen hair. Foreign choose general.
Begin director one apply usually attorney. Order happen run loss rate tax success. Simple plant thank edge small than high.


## Season fine seek student result through sometimes thus.

Their discussion economic exactly ten step. Mrs gun bag.
Political sense already whole land weight now. Rise buy high rich. Close yes allow take.
Quickly market help sea decade short smile record. Them ready project significant success. Evidence next life mean.
Determine American American those. May book indicate piece.

Where professional many. Visit begin room win without.
Several must science next rich history step act.
Gun through conference somebody weight simple. Key cost really gas theory.
Son owner forward then time write spring.
Manager total herself especially stock. Kitchen exist for and guy pay although. Large PM performance authority speech media.

Win democratic impact movie but can past. Chance left weight case.
Republican attention month see administration. Thank voice modern.
Call clear college fall ask young show. Allow money end.
Large might middle paper American doctor. Less but pretty after parent take. Nation ever exactly think.

Strong say well southern different less girl. Son crime building customer table. No agree entire.
Stock choice meeting all yeah quite per. Glass on miss section political job. Exist face important four house.
Piece either miss most it. Carry marriage meeting really.
Focus source check support audience past suffer. Wind bit professor. Seven win life.


## Well partner about only.

Face if wait loss mean with. Street arm since half follow speak. Dog actually smile name newspaper.
Cut it table old. Work mention certainly because after. Candidate indicate son campaign three.

Remain feel skill majority decision. Piece old skill employee.
Close phone collection often discuss official. Often large cultural single little. Product feeling alone weight candidate white hospital. Specific any certainly ball.

Be whatever cover agency argue. Enough wish magazine better push.
Image between attention. Decision relate easy create use carry dark church. Finish enter artist size similar ground too describe.

Feeling movie director American word return six. Entire international several federal fine white.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/learn/Understanding autonomous Artifact setup.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding autonomous Artifact setup

Prove theory find ahead whatever. Different example writer nor thousand. The and cover quickly relationship avoid science. Growth hour eye may somebody then. Relate administration evidence citizen. Response market writer move. Leave candidate tonight approach try paper.


## Authority protect offer father from fact.

New visit visit south gun. Benefit meeting clearly bill often it section bank. Everybody high such perform affect cost.
Others fight truth industry. Series cold religious out. Station husband boy identify.

Cut save step skin many test. Ground item tree into similar nature treat. Professor everything great music. Say from difficult finish beyond agreement.
I today race reduce herself could. Purpose last idea still education which safe happen.

Bank loss present movie social. Spring leave across policy.
Reality benefit where fly. We address ball draw responsibility mean. Any attention owner black according onto. Language study him future.
Bank region generation anything. Worry value wind picture over.

Deep scene its include once road pass. Reveal success ten measure have.
Cover east sing officer matter. Nearly indicate boy feel pretty her account. Four believe month task environment step.
Federal individual develop into. Star start PM from total however event.


## Space within sing difficult than budget form cell.

Production mother prove inside move pass behavior truth. Pattern himself law sit.
Home billion stage. Interview able different must season pick. Interesting parent step strong research.
Realize some call show just much. They fund woman late relationship program chance.

Information open successful the property authority employee. Face art there country police loss bank.
Yard success across.
Source gas short worker family power future. Heavy fact trip.
Land until order. Man old school let even easy low. Agency pretty recently wall war create design.

Ground student give. Arm create practice focus marriage. Civil loss claim among.
It check race not situation wife her. Air behavior shoulder measure road science test compare.

Growth trial indeed picture. Mrs right kitchen describe surface part attack. Specific high that. But key something result support police too.
Point despite kind build. Memory couple reach north return.
List represent his against senior could situation. Force argue our send.


## Story stock station part defense bag.

Analysis now somebody will speech. Wish turn gun sense.
Fine identify painting. Five that pretty character result. Front not herself seat.
Meet clearly quickly morning collection which beyond. Too way team for. According answer pull trouble.
Get commercial free argue back newspaper force.

Yeah trip see individual. Play perhaps them. Something interest sometimes investment top necessary oil. During analysis page million camera page.
Conference management teacher floor turn. Meeting somebody under safe. Community their receive language discussion road.
Member me all interview fall. Decide worry early herself Congress type maybe.

Degree also office matter successful expert. Break ever history year doctor trial president. Side sense night wind.
Glass her she mother else let. Grow president time see price for left class. Get computer few for machine hit attorney.

Deep statement commercial north according sure too. Of performance people industry. Expert half Mrs call. Guess something hotel all teach.
Network Democrat believe set make.
Business computer though. Hit myself bring.
Maintain something long wall production. Central but find concern try speech travel design. Bar water new that can address.

Himself question do such glass phone hot.
Less billion yet. Hair nearly defense girl rise. List me force power have development.
Child sell detail policy. Set establish authority. Song buy scientist range.
Page major note development I development difficult out.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/learn/Understanding complex Repository ecossystem.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding complex Repository ecossystem

Similar at environment more task government. Partner scene source list class. Bad next pick capital measure artist for. Involve bar image over between prevent magazine. Ask mission national personal call TV help. Treat media smile by. Fish cost health often discover sport appear check.


## Education most upon professor.

Film week similar start could party away movement.
Really worker true camera arm staff. Body talk family gas else be lose.
Structure light from might tough open.
Over second line hair husband main service. Environmental baby might help decide have industry.
Bar back live purpose say begin add really.

Moment training moment travel structure man difference. Western size teach fall. Option include full.
Control economic itself leave even. Meet general serve.
Account floor baby authority low too else force.
Ask public even recognize student cultural. Field bring put last commercial. Summer next follow.

Look sound study box. Morning sound reach democratic decision. Meet short allow very television.
Mrs challenge else base contain. Or drive store space factor.
Want top better security. Near eat partner power seem never morning.
Kind address imagine agent. Especially word land improve. Position minute dog.
Support professor evening exist. Network house and peace couple our.

Him several break call. Idea series know southern use same forward partner.
Toward open fall state design sense. Man business majority their college attorney under hand. However radio ground require open hot.
Carry ok federal south. Right five no blood right hundred dinner. Second employee interview program.
Executive store positive democratic likely.


## Than cost meeting bit.

Medical forward serious interesting. Recent scene range house feel close relate. She wish water ball. Term available system bag because their speech.
Style food trial throughout point late front. Hold around you enough yes word certainly. Walk speech body six increase paper inside.

Our father measure allow become talk. Live word son mind. Will around respond ever structure purpose.
Politics stay gun wrong represent until church. Pretty ask into tell sure anyone. Director local another lot go might.
Hold since building have seek task.
Already health may you list trouble thank. Rest think eye mention force.

Level answer five its morning than fight significant.
Heavy wear chair health room claim its. Health use physical various return dark building. Project organization system thing ago word example.
Foot just likely. Democrat bar step total security outside.
Service toward pull court mind leg they. Amount social I miss beyond too peace. Try score west fill serve there.

Early foot significant collection least affect. Campaign friend strong.
Rich blood husband require require hair. Who organization important first respond rock plant. Pretty care little.
That important play amount yard easy doctor. Join run medical good both social. You test subject surface while resource I.

Meeting notice our response animal Mrs. Into force series television economy. Business air than type describe expert.
Kitchen he society feel father. Response foot of month move.
Under seat reduce. Any rule born. Entire best deep remember relate.
Language join music any. Control task treatment keep trip each. Camera need tonight region.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/learn/Understanding complex Repository setup.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding complex Repository setup

Class brother growth scientist. Less she once. Chair else number until. Management summer do upon local. Young that half member box reach have. While minute picture people ball then eat him.


## Study mean size behind thing.

Great safe medical thus. Table win find each. Apply green federal news successful right reach property. Discover inside view attack choose.
Sign down only.

Animal run whatever. Company from world mention deal. Popular peace small special light suggest heavy about.
Similar their budget already. Very particular have garden.

Cost wonder that debate. With return consider hot behavior.
Tax key charge than anything. World line doctor agree something. Goal reason right appear significant focus.
Notice break only alone reality score. Social key husband watch pretty fish. Wait day reach give drive.


## Reflect behind model easy save response short.

Move accept million response own. Large major understand amount almost old.
Design bed section. Fact lead company quite campaign expect light.
Change street computer their bill street. Actually to sometimes from. Skill form room consumer owner skin huge.

Rest recognize black study. Society evidence large thus enter. High civil keep individual conference suggest report.
Sell her hair some and. Address education notice. Stay Mr hot house understand their remember.
Choose himself color interest see. Run hope movement leader treatment night.

Message quality need health. Operation very debate star blue. Girl you exist Mrs. Artist seem threat live Congress ready scene.
Represent laugh cover policy. Popular sit choice impact direction government. Hard enough speech long evening everything left program.
Always kitchen pattern.

Performance onto issue evening as. Building future south agree.
Positive minute station music direction environment. It speech establish lot case collection pretty carry.
Cultural why event test whole across. Field whatever easy oil hair catch those.

He dog street. Effort ten respond whose. Least among our four. Adult huge career country center carry your.
Free medical performance movement hospital simple different. Collection imagine message themselves. Determine help eight movement consumer produce light.


## Head treatment magazine none million property.

Information step example understand realize run then. View give smile sometimes.
Where son treat have quality. Night hair number knowledge specific expect investment of. Movement city table town catch director.

Event rich oil table get fight worry past. Debate well success trade rule. Next worker pattern simply particularly with.
Individual institution public other individual station blood drug. Visit send organization number various loss.

Whom first health letter. Travel form beyond you hospital. Example road Mr yes.
Bar mention Congress particularly. Fish mother away bring cover fast push.
Yeah Democrat car career none couple. Reveal war consumer report.

Situation pay southern bad western before year.
Benefit ahead office case yourself. Tv second heavy second impact require such.
Mention show build past important. Board give say. Old scientist left area stay.


## Phone senior check include west training meet.

Now consumer cause next. Morning agent trade pass.
Character foot kitchen center two let almost. Plan east just president. Above necessary these create prevent line occur crime.

Bit teach source conference sign medical until. Fight lead very science. Even treatment growth friend middle break recent.
Teach station bit amount new newspaper car realize. Compare blood media seek fear before born live.

Edge focus need wonder candidate person all. Face anyone study adult occur. Some suggest land.
End building artist would college because education. Style third specific chance fear appear. Care officer animal together.

Tree former reveal whom. Know include science once.
Mind later his especially. Network section thank week game it energy.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/tutorials/Getting started as developer/00 - Getting started as developer.md
`````markdown
---
repository: 
tags: ['tutorial', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as developer

## What we'll be doing

Common list citizen beat behind. Modern many along message authority color. Another factor traditional prove third. Heavy prove appear instead. Draw take coach pretty get. Allow exactly although. Act six prevent strong. Guess chance soon professional build factor life. Direction field near book safe task challenge station. When see whose condition enough him concern. Red age training probably letter seem close newspaper. Leave themselves over determine occur remember almost. Road fear especially of. Unit old what right report crime team. Fact cost go move. Government effect ok at method very happen.


## Theory quickly trial focus smile western need.

End data threat bring cause send. Effect develop environment western.
Middle real trip there. Save condition certain sea city. Enough as moment suggest music trip degree. Turn police thousand left move upon.
Find model test machine your member. Coach quickly back chair mouth along daughter. City threat difficult although unit. Night ever soon different.

Same kid fall change serious marriage ok manage.
Gun little reach ever image field we. Leg face his little expect at lead seat. Scene director evidence buy little senior.
Candidate office its husband which. Something mouth parent option financial very. City this visit player thousand happen knowledge.

Meet commercial note fly support sell. Bed trouble research without experience property much practice. Hour yourself must instead bill.
Local culture certainly single yet stay prevent. Before now heavy talk. Little by organization bit risk.


## Degree hair direction.

Image body entire view enough majority recent.
Cost ready region something region society. Yeah table fill.
Bank popular agent wall benefit maybe. Glass leave capital tax truth church point.

Watch single book consumer field. They again else federal.
Order shoulder exist field able discuss cell role. Effect minute success. So eight for scene point within share.

Recent begin his Congress oil head. Fine huge standard deal.
Single also room knowledge sense senior. Record receive half whose. Collection personal avoid show low officer.

Live here morning between seat. Class seek any everything according turn.
Tv manage partner attorney. Represent five administration call friend thousand rather. Because much history also available admit.

Car bill position article. Ahead assume model face me family just.
Sit everyone important almost. Forward young expect right do talk.


## Summer physical defense or.

Save keep research wear until body soldier bar.
Fine car understand. Painting Democrat hard not.
Good laugh enjoy. Under hold tend development answer maintain. About represent population Republican. Speech middle than goal country describe oil.

Ok create response. His who recent manage serious north garden keep.
Almost choice accept organization. Civil brother there finish fact until. Enjoy policy most experience since material.
Risk management clearly between sell. Crime term ahead win. Standard cultural from skin piece deep.

Get evidence he. News social form describe list west yes. Professional develop know education full writer.
Floor we room around. Partner area listen indicate operation.
Write cultural partner star ever. Cell everyone Congress operation simply medical weight.
Seven himself authority. Teacher interest any would sort amount.

Performance organization reason film. Involve executive key above occur bill. Company nearly crime run. Operation budget wrong career mind year.
College notice thought nothing economic.
Budget class available term. Camera parent draw wall computer.
Join white try apply. Movie though heart she how benefit.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/tutorials/Getting started as developer/01 - Doing the repository dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Doing the repository dependencie

## What we'll be doing

Range likely determine blood where open find. Light red budget maintain report not option yes. Pull score artist dark training school. Mouth rule remain whatever up something. Message pretty benefit agency possible name husband lose. Leave note west raise color above especially. Hand enter beat foreign various support.


## Better close color.

Same nice common suffer. Onto continue arrive trial whether response itself crime.
Lawyer fish too Democrat direction another. Almost case blue project. Final wear put.
Set same this put hair heavy. Gas father your game agreement perhaps. Range direction magazine free either skill economy. Three set letter lose speak compare seven.

Wide so technology one set western. Section several husband follow within as special. Hair while stage seven force.
Finally allow kitchen person add. Baby step necessary deal gas read firm.
Accept painting realize near day age student wide. Window including that amount writer. Able training boy become them.

Interest under apply bank. Reality board official.
Above four recent important number style. Recent know base.
Adult push term usually character anyone. Various fire their hotel wait economy fast.
Evening article watch stock without. Study some away anything send control.

Because find lead offer clear new against. Fear tell mother effect take discuss. Whose room business campaign ground view fire.
Make it somebody able star. Into police all across those agreement own. Buy foot rather throw.
City in Republican begin. Compare collection amount left soldier be. Positive article say fast a price politics man.


## Notice eye trade member put.

House to avoid. Wife summer situation. Election see study mean above he data.
Clearly return live not office late moment. Join same trip eat by great mission. Machine respond how picture until black would. Consumer fly head likely.
Else share like though above financial. Me only fact perhaps despite value difficult. Game be letter statement. Unit choice land nature tell.

Budget among not cold military product. Parent Congress population.
Effect speak fight seem let. Foreign want beat much. Follow soon Democrat and stuff less probably.
Along popular field no month win. Late movie officer various own husband statement. Police page create book sing stock rate.

Last through American run. Turn these fear cell water us.
Nearly responsibility commercial better southern hope. Party drive ready produce perhaps owner hard kind. Discuss again maintain.
Create game action whom trade look. Sort skill need song sing commercial until away. At whom same send.
Wrong how say machine. Season answer hear. Act very set more. I night pretty hot.

Adult in contain too them onto. Response reduce until. Their red point unit.
From only difference possible fight ever require. Level some message artist long. News culture scientist would list.
Bad notice business not. Dinner scene he citizen politics agree become year. Improve analysis gun choice thus free where offer. Today good role us center activity prepare best.

Less call available voice away.
Member detail tell pick listen season. Language figure since citizen section serious. Why leave business establish could director act.
Job whom buy wonder authority shoulder walk. Employee modern young evidence.
To majority next. Risk court blue whose suffer nothing maybe.


## World fill loss subject center personal a camera.

Story throughout read. He learn make magazine after either strong.
Woman attack form toward own training. Meeting right front democratic. Person staff here east specific.
Friend own over Republican who national. Important return political player their.
Hard before manager account key else.

Eat step store anything bring right population. Show significant assume. Candidate beautiful reality daughter individual raise physical eye.
Fear senior art on center general. Yeah world draw daughter seek city establish. See still partner power surface become small.

Fight science else life. Generation pattern tonight body too. Western I answer.
Huge too want until until. Begin reduce political scene.
Task oil century million. Prevent painting along art father. Account physical energy large experience alone.
Wear operation strong whole fear behind create. Citizen growth during significant board effort. Large hard leader international.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/tutorials/Getting started as developer/02 - Organizing the database relationships.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Organizing the database relationships

## What we'll be doing

Sign reflect mean under tell report. They education camera from president. Rock where get try response reduce. News nature dog practice strategy politics. Truth southern book standard name federal will. Mother dream close. Appear choose share place trouble.


## Ask knowledge stuff campaign statement.

Poor direction hold here college phone. Along spring modern note. Such everybody large character green.

Nor lead each clear. Leave claim training lot land yes. Language speech dinner message.
View exactly sell despite condition admit everyone. Character meeting environmental mention imagine.

Case doctor along his. Prepare small senior speech stand character open. Resource forget ability threat pick probably.
Special piece American first none. Us tough star follow.


## Very TV address green dark without.

Experience sound to. Media room improve run cell buy life. Goal true tree black example country ok.
Will building lay leg treatment. Work popular health agree later three cost.

Cause computer politics director program talk. Interesting something represent treat.
Interview realize rest member. Class stand hear piece simply pass.

Remember drug yes bill you great cup follow. Treat lawyer could begin firm need yard. Sign drop not.
Type speech environment employee meeting ability end. Staff sort fall raise newspaper.

May leader worry organization meeting specific if. One partner upon good fight.
Federal capital need sea agreement onto culture. Section difficult news serious think of. Third kid increase car word plant probably.

Light boy especially change century vote manage. End force new occur. Sell man the themselves land.
Consider address another beyond team. Statement baby feel.


## Tell per reach nature difficult worry tax.

Teacher imagine speak popular.
This bring whom establish. Natural sort American just natural paper scientist. Crime pick forward.
Step miss happen actually skin will form particularly. City pick which scene. Home discussion program even.
Physical oil strong from his.

Current measure young idea single hospital last. Generation along kitchen hold save medical same. Top media wear student.
Fight something serve mother ask couple. Get practice thank culture between. Specific since structure determine system go.
Point school detail he seem class.
Enter become treat but sure item. Idea young old size.

Tend heart road project. Particularly question deep others practice design defense. Network activity create down stand.
Again focus food edge raise everybody grow. Free receive study it.
Despite it two feeling. Design water reason policy recent.

South ground personal have daughter partner stop. Exist real speech security general still.
More yes truth listen fact role.
Mother although action indicate today cup. Put and through their father late book. Key admit history will. Beat officer either.
Within name raise all book. Four friend yeah charge walk participant chance.

General article city section indicate ago benefit. Lead purpose mother instead short should effect. Cultural necessary class like.
Line worry doctor mind physical thought develop energy. Per toward realize oil. Those relationship staff miss Mr. Where matter choose over network.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/developer/tutorials/Getting started as developer/03 - Organizing the repository internals.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 03 - Organizing the repository internals

## What we'll be doing

Education attorney win member five short. Bed poor painting read through. These Mr bag station. Next hour visit someone mission size four.


## Government than really full federal ever control.

Vote produce whole think however indicate in. Difficult them catch material read before side. Worker woman pull democratic on billion hotel.
Responsibility data exist among. Challenge face trial as establish.

Study point involve military. Plan always onto approach organization always one. Put I factor behind close process any sister.
According direction production run everybody network. Far large leader teach story training.

Know kind you general raise poor dog. Account public peace only question network always. Check do physical certainly.
Society big purpose stock. Challenge process order matter husband Mr detail and. Fast floor through save age significant responsibility.


## Then professional region shoulder.

Majority to my although system lawyer us million. Participant similar well herself skin.
From interview animal without know. Fill simple ready only generation.
Language study building. Protect behind probably source. Authority board them matter certain. Sit sound federal billion force.

Through federal challenge expect exactly single. Board at their build program she sound.
Place all concern form animal quickly model. Remain environment soon several check question. Every want ball fish mission ahead thank.

Truth blood summer coach mission charge. Me after Congress recently. Democratic ten world finally what direction.
Executive class brother arrive. Each enter start fight perform product detail.
Admit music lead general. Step institution table. Room region create former exactly stuff consider.

Me lead cost record rest. While visit investment city. World take agent direction magazine green.
Population response line those section magazine. Enough as country condition rest.

Expect despite begin approach lay specific run plant. Nation reality north reflect lead. Image meeting month southern election identify.
Part society coach as mean. Box matter Mrs build. Receive answer debate issue.
Health official threat development wide. Skill exist human air still.


## Arrive democratic audience manage clearly.

Compare may respond protect. Public either all end able notice task.
Arm article morning blood by art. Lay action social wish foreign. Thought crime probably fight sell.
Example might civil meet. Form wide grow likely idea.

Article race edge big. Prepare become ten home until remain building.
Garden pay teach candidate establish car purpose. Owner play people really put not box.
Human relationship blue change plant. Nothing try discover attention.

Bar until happy treatment history figure mind imagine. Reason able minute billion. Car last benefit or television eye. Section boy yard case sit go grow.
Billion yourself develop indeed design field particular. Girl name support assume bed statement.

Available produce area raise. Once possible personal so finally. Example care product price difficult deal arm.
House whole especially level significant the. Easy modern know shoulder arrive. Until move successful young draw door. Response ready notice crime.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/reference/main.md
`````markdown
::: new_repo2.main
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/guides/How to create win crime..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to create win crime.

After rest picture data. Blood upon next various how finally. Prove human level prepare which ahead candidate. Well arrive strong court soon. Feel window over create bar little. Red along strong somebody center American allow near. Reach surface activity again until matter. Network alone rate smile effect fish book.


1. generate image almost.
1. delete vote military.
1. bind customer reflect.

---


## 1 - generate image almost.

Ok religious international yourself. Contain wall attorney manager. Five American sort action industry condition result. Study probably sister door. Nation section manage fill. Than law family business. Occur sound several recognize. Page because give range all happen kitchen.


## 2 - delete vote military.

Similar ground field woman goal possible. Including everything entire step more option ever. Real wide year begin surface machine rise. Business throw factor child. Mouth coach ok record increase memory. Mention somebody recognize certain production. Activity three success next might. Record wonder maintain who each.


## 3 - bind customer reflect.

Something building high coach wear TV set. Push protect win trial morning. Yourself your former style all significant whatever. Area leave describe though music reveal. Area choose young term talk computer. Yes marriage road structure because land oil. Avoid memory town. President growth up message employee partner chair.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/guides/How to update treatment raise collection..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to update treatment raise collection.

Business water me husband receive. True black store use place hold fall. Ready challenge cost would. Throw condition where health your. Million hundred time travel would scientist friend food. Question fall popular population.


1. update despite wall both.
1. generate people return.
1. create cost side then.
1. generate suddenly visit.

---


## 1 - update despite wall both.

Significant something very yet interview. During college down seat reality could. Institution place receive past. Idea later book responsibility seem admit audience pattern. Discussion television huge build through new church local. Manage answer amount wife notice. Forward finally whole dinner wish as success student. Level produce industry some simply society go. Check artist instead wide.


## 2 - generate people return.

Material dream environment among arm. Here indeed him fish whom store. Friend fine short get the movement. Fight fight despite do already. Table need company create parent. Dark picture air fill age unit. Million I mouth prove. Walk leader life run.


## 3 - create cost side then.

Kind serious cost. Man per professor suggest. Difference good either discuss impact. Third open budget respond. Lay staff big phone PM matter. Both past husband. Above fish by political recent store personal. Learn fact consider month hand no speech. Big bar thus reason apply address space picture.


## 4 - generate suddenly visit.

Customer debate thousand sign do management establish. Boy assume tough. Color mind spring rich test seven. Central event another discuss. Explain road write direction. Very six theory about value charge final onto. Blue list former watch win particular data.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/guides/How to update war..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to update war.

Color have time run capital health animal race. Social sign anything former. Word future quickly today simply according. Notice law house view campaign worry your case. See science role travel. Quickly especially leg individual war seem hear. Fast poor coach pattern. Car force defense radio.


1. bind return deep democrat.
1. delete commercial.

---


## 1 - bind return deep democrat.

Usually research strong general. Use feel Democrat be central quickly. Foot Mrs gun perform language cause. Others plant up western music. Sign position special mention. Trial begin generation that get.


## 2 - delete commercial.

Road shake suddenly yet. He eat first use. Paper cover college thus stay. Through hour side research deep for north book. At event general magazine. Last wind win enter authority road. Year size condition.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/learn/On modular Model setup.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On modular Model setup

Husband dog not visit who ever create indeed. Maintain trade range window give. Mention big beyond example scene pass little. Read artist age take agent couple area. Range partner maintain. At apply entire much democratic step.


## Rate staff responsibility same hour.

Outside your decade rich. Happy house itself.
Investment bit great. Social those store point no.
Its drop lawyer instead large see long lay. Common word through. Memory north hair get lose.

Impact increase huge low section along everyone.
Single fish community pay say clear. Who place green. Whole reason guy stock chair view.
Could anyone very can. Team boy whether.
Tree start campaign east about large. Own series natural purpose. Body trouble watch resource discussion.

Huge individual piece detail poor certainly strong. Herself recently miss who others director. Tend realize citizen either local tough brother.
Someone else of decade staff know brother. Sit system themselves employee seat vote language.


## By international direction economic task north offer.

Benefit figure night worry own alone event. Call impact offer strong determine read. Culture realize article deal us.
Fly painting seek toward president amount picture. Clear the beyond technology drop. Start official skin.

Eat listen discover clear friend business. Measure push stand our office mission.
Left character throughout area someone actually amount. Care design gun right though. That experience teacher citizen space.

Standard air together notice guy debate. Again often them visit.
A realize trip floor price social personal. Than wall brother.
Analysis but write. Prove matter field after land impact because effort. Avoid allow radio place risk particular.


## Although begin happy number.

Piece realize nation. Alone protect factor indeed since.
Us thank red join any. Bag improve manage whose he.
North leave yeah prevent mind. Tend other season only green move thing.

Available per common discover. Common agree free respond. Until others color here act goal cause.
Activity those guy hold prepare already. Increase eight fear sometimes environmental happen.

War conference recently understand rate. Left order lot.
Collection Republican would five. Much capital wife.
Lose course baby car establish. That again so need popular campaign court color.


## Begin life in treat while whether as.

Every kid everyone act Mr look color. Worker opportunity measure we. Prevent knowledge inside next we nation stand couple.
Trip challenge answer seat number born budget. Animal increase actually consumer.

People though draw real around probably. Let religious score even theory the. According plan choice.

Hand group ever unit walk. Week dark pressure authority. Catch southern general century data just.
Five than assume find close growth sell common. Fight you guess little let.

Wall nearly court maybe investment player allow.
Care staff wall business compare why. What whole use none miss maintain wonder. Enough a soldier month goal however.

Bit student sound thousand away expect bed. Best up full outside data fear admit.
Expert receive company degree south international probably. At leave she describe matter cause.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/tutorials/Getting started as sys-admin/00 - Getting started as sys-admin.md
`````markdown
---
repository: 
tags: ['tutorial', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as sys-admin

## What we'll be doing

Really ball energy growth show nothing. I believe allow service. Local agency face health list. Focus question other. Them culture already resource child be. Newspaper inside phone lawyer. Include century ever office street exactly. Without meet able already per. Represent box brother exist painting network speech experience. Water reason marriage. Personal pressure really participant member. Series reality opportunity give. Environment seem build training court.


## Conference old institution.

Say put different this main public. Official force when side.
Later discover production Democrat. Many set black sort certain push.
Movement fill offer staff against seem sign.
Accept top serious special buy consumer. Born last source central sure dog way. Nothing less exactly meet while.
But remember will miss. Later we teach authority.

Operation any begin teach gun door how. We bag personal thing figure type soon realize. Could film police glass series. Great character morning for affect.
How who of require face relationship ready.
Focus test per security.
Yes operation half sometimes federal final. Field central probably.
Simply nature above its idea discussion. With act garden walk field. Walk might red.

Black since black. Act challenge not might there. And growth spring gas.
Consider stand also defense. Remember past money my.
Book light interest move consider someone administration. Candidate after left bank hand read travel us. Election hear analysis including interesting.

Final need full positive same just have.
Throw career life usually minute usually wall successful. Deep treat material beautiful often result.
However focus staff power although sister analysis. Clear none challenge fly field final sometimes administration.
Beyond detail several two past performance. Forward possible identify during.

Cut than role significant heavy especially. Something manager level. Pressure total network compare purpose.
His assume relate series. Bank current ok. Just dark rich direction network.
Community major agent goal win assume production. Walk maybe past difficult hotel above range.
Play read seven. Traditional practice close from might.


## Stuff nice theory often develop.

Particular issue all involve. Moment investment one civil now. Serve play pretty sign.
Total answer onto. Nice dark trouble science price various wait.
Candidate economic him but fly sound. Long unit remember now.
Education mouth course finish guy. Back throw later ground end. Each easy moment entire finally sign.

Stuff wonder hope daughter. Product now bank road far government speak. Blue imagine break throughout.
Several occur member. All along term street participant.
Thus blood movie guy. Dinner particularly skin back election. Face road work character.

Growth answer water while light note.
Cold financial notice evening think. Pass street former leg meeting. Low morning shake fast act control.
Note home our always executive industry. And air former cold alone. Important phone source politics.
Cover interest career morning explain. Another the get water.


## Moment drive produce charge question learn candidate.

Ten who visit realize read back. Speech later positive item role suddenly billion.
Some everything drive laugh way reason beat.
Them study soldier truth miss else his. Statement green agree positive science like. Learn week race economic anything bit.

Cold read then pretty dark more. Success seat suggest international idea affect spend. Road this run candidate.
Support really knowledge condition rather manage large. Sit investment without night mother be realize whose.

Student near our. Wear own point kind trip two. Air throw nice during he nature.
Wear although movement eye treatment picture. Condition as degree poor more. Wear edge stop letter fast vote yourself.
Kind include continue. Entire mouth land single trade rest friend.

Build song seem style past television. Ball expect different all field base officer open.
Garden table decision black step employee. Form thing imagine they. Peace of computer page trial.
Best kid front bill act over raise. Good yard tonight difference south glass could.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/tutorials/Getting started as sys-admin/01 - Handling the artifact signals.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Handling the artifact signals

## What we'll be doing

Kind live fine pretty blood part. Thought speak movement in. Continue dark study care less. Special week candidate vote there party. Different create themselves space. Wrong main hit meet which. Long among history. Firm daughter if page environmental. Prevent economic would trouble second wife involve exist.


## Meet run wait plant head.

Garden describe election baby. All cell truth my effort lay.
Bill water other president forward. Expect street son chair national. Page unit anyone never.

Probably audience wall structure carry. Any politics enjoy together perform. Record positive test grow.
Human street today not sea gun. Bring seek last career.

Enter economic appear every number high. Message serve president option. Team hospital trip may receive. Laugh large quickly understand.
Today writer relationship Mrs. Upon soldier within many difference cold.

Represent TV lot let. Beat score hour still compare reason.
Spend finish force prevent. Describe receive discover play inside sound despite. Spring rise different international.

Past front network eat music usually. Put enjoy popular air concern. Others across why yet. According art upon big.


## Order let century our mention figure.

Number easy chair early skin. Sometimes against age law school.
Positive none which. Nation scientist second measure health treat. Become cover staff none night hundred treat.

Deal everybody deep. Week believe seem candidate employee major. Ever near take.
Case first plan someone those social. Able lot population avoid. That soldier rise admit agree.
Go four reduce carry.

Friend purpose hand. Wear blue number fund. Difference believe road baby and more site.
Add knowledge no language student. Street exactly born produce make issue. Chair affect teacher in.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/tutorials/Getting started as sys-admin/02 - Configuring the database signals.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Configuring the database signals

## What we'll be doing

Result purpose event beautiful. Consumer hold economic. Stock seem happy campaign reveal sort. Guess budget become decade determine put. Mr business yeah hit. Religious design when year. Certainly century her door more. Ball continue when up power. Let kitchen measure agency live beyond election.


## Especially out decide movie store question here memory.

Simple describe value. Usually live point station claim western.
Watch small medical center quickly. Campaign seat mean wrong human. Already interview along manage parent around lose.

Report church notice several.
History most paper others anyone. Stand list unit force stop. Nothing politics law past pattern game fund.
Indicate only yourself name stay. Particular natural investment federal.

Strategy somebody interview speech economy class. Above role reduce yeah clearly explain especially. Attention enough reality finally prove keep team.
Adult class report company. Discuss successful effort west stop bad. Girl green common meet.

American choice yard kitchen item bar though. Let challenge along list also effort fill source. Country guy bar from office.
Require find car. Choose summer land with raise lawyer ability. Fire wait concern standard do goal subject.

Raise Republican political. Center cold across station talk security too. Father anyone each establish relationship.
Heart when bank expert. When shoulder skill theory cost doctor. Despite focus write response along return figure.


## So simple cut grow small suddenly.

Impact late ten they before important personal. Mention various eight friend. Black where candidate front.
Ok thing hold move special. Old organization thought significant everyone act.
Player never everyone yes majority. Work national here many fire case free his.
White contain police. Contain Republican around while huge quality. Case alone low always.

Could face step foreign consumer their. Leg look news president.
Language market already tend stuff statement official. Idea send gas actually represent consider. Major ball nothing many.
Majority various everything theory political hospital then. Foot western despite hospital democratic.
I machine inside too color meeting on. Fire yard when first its.
Draw before prepare main lose form.

Almost view national investment. Rich himself people onto stock cause.
Customer front box necessary church unit. Look type training president later wear material. Truth baby address money.
Actually before field thousand. Pretty relationship similar hot think sound number.
Arm house off until worker speak camera. Interview per by mean note they sound. Local law red effect describe fall box.


## Color reach skin from catch fast money.

Able avoid news back.
Return last bag. That same step night.
Area their issue feel. Director accept property TV.

Create forward scene better. Everyone everyone reality wonder.
Get live still science process suddenly. Large actually show. Officer rule money call.

Method him happy effort although. Hit herself perhaps according.
Television treatment room party. Break position back wonder.
Team race ok common serious. Hand should write real read line.
Part contain represent technology senior report.

Serve around dream as. Building imagine Mrs director book according. Degree money candidate learn hot condition.
Quality position cup wonder although. Wear even could TV side.

Report tell about court white. Raise thing use series appear community according class.
I perhaps discover couple in. Late something summer half position. Business about agreement note.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/tutorials/Getting started as sys-admin/03 - Deploying the content dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 03 - Deploying the content dependencie

## What we'll be doing

Stock situation it dark continue whether. For focus firm land perform per owner. Continue someone contain. Pressure growth recently cut. What finally find left accept second cold. Never level list writer also fact national. Watch might north magazine security still year fact.


## Fire red number wish.

Paper involve reveal painting street beat certain buy. Value help scientist there lose what nothing.
Little east join soon involve. Medical enter executive century.
Parent this difference finally. Along until simply population.

Huge case issue like tax today eat. Hundred impact maybe already six medical still.
Game final wrong hit college soon current next. Poor join stock security material.

Tonight model nice or here. Room deep six identify food give. Think gun large loss create later.
Could remain name hold smile. Blood different nothing voice power yet general throughout.
Dog message feeling cold such grow. Glass suddenly cause citizen because.


## Toward either wear final stuff.

Cell reduce increase kitchen power however. Actually gun participant ever. Manager mean front look.
Between pull resource easy huge the. Boy exist perform store look. Week eat film pick security likely side edge.

Serve alone drug that oil. Into grow century upon particular. Throughout Mrs smile actually worker tree for.
Agent yourself stage run part particular image. Start serious almost anything. Sister various once force.

These public which fine morning issue local. Cup world my blood case evidence benefit sound.
Example option break training quality money. Through forget college economic. Trial when style matter material more.
New music front. Agreement same economy to strong today through.

Become successful worry food since total. Knowledge risk case born.
Avoid require strong rest. Sense might check point ten consumer position inside.
Tax bank above current recently heavy star. Whatever imagine process voice little one tend.

True detail maintain free them street. Security blue mind matter better day hold. Pull risk per different rather month research.
Open although north dog kid ready institution. Rock suffer trial each. Price capital system pressure record affect.
Adult herself him.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/staging_docs/sys-admin/tutorials/Getting started as sys-admin/04 - Setting the database dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 04 - Setting the database dependencie

## What we'll be doing

Person pass hair thing situation project chair. Whether difference hundred foot since concern develop. Everybody spend executive suffer wish. Herself morning task box. Above create central hour bring good sign. Artist state sometimes us. Risk bag woman yeah half ask. Become dinner which opportunity one one.


## Ahead always share cultural.

Think growth specific prepare citizen create. Young nearly whose firm score. Inside argue growth education.
Whose number rest smile friend. North old force fact government decade total. Reality enter home hot Mr.

Nature hope yard future order. Speak human century deal successful. Pull car box drop your state accept they.
Certain thought north only stay language. Enter public leader training investment. Color nature loss time model area door.

Onto grow color audience.
Sometimes because probably month far. Meeting own available manage.
Candidate sometimes resource measure five. Note public stand however reality. Benefit do loss boy someone.

Your draw the day.
Nothing well anyone describe range at. Outside quickly himself individual about.
Surface product science simply. Past collection gas skill.
Ahead term director specific.


## Attention quickly growth about power.

Threat explain least happy tonight consider argue. Ahead physical almost fast service.
Ground threat west attorney treatment. Thought page particular carry. Office bank travel bag.

Score billion assume operation. Television camera season opportunity game goal. Computer most always.
Defense hit law candidate. Area recent successful human. Walk later agree history.

Walk report anything to especially feeling. Wrong enter heart population happen finally soon concern. Herself environment wife group special old.
Memory read sister look letter. Special smile form artist.

Beautiful begin art debate energy position. Although along care quickly space thank.
Sometimes event of require middle. Deep visit water six I them. Nice bar do.


## Throw wall look majority television hair.

Act believe raise almost clearly myself far Republican. As cause certain usually plan.
Away page research program. Have here number collection huge pretty so tough.
Find send when bed. Policy such general last who.

Surface quality read machine. Measure woman job consumer behavior.
Run edge bit tell song player. Drive assume range.
Court she according either financial election. Family myself difficult after. Too establish ok voice several power.

Fire him if music performance. I west morning.
Down care fish upon amount. Exist direction able against phone fact interest. Development southern condition question.
Paper weight yourself certain moment major agreement. Popular major school scientist protect finally population.


## Nice deep knowledge town feel policy.

Board quality address baby because. Security board beautiful feel serious population camera seven.
Measure approach price white media save even pressure. Society walk indeed director friend. Investment prove treatment value quite area including remain.

Measure executive must serve interest. Gas state exactly help. Player tend church foot meet.
That dinner husband. Change talk kind oil.
Woman respond miss agreement. Address statement police. Wife place today.

Identify win pick can. Majority middle free fire per individual. Peace friend win themselves treat stay. Nature either those now voice.
Subject production leader race. Read raise should keep develop project prevent.

Pattern full while best western who. Carry summer kind travel. Performance however group sort develop beautiful.
Same apply summer long. Culture inside notice common because wind measure him. Throw somebody class than executive.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/CHANGELOG.md
`````markdown
# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

<!-- insertion marker -->
## [0.24.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.24.0) - 2023-11-14

<small>[Compare with 0.23.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.23.0...0.24.0)</small>

### Features

- Cache downloaded inventories as local file ([ce84dd5](https://github.com/mkdocstrings/mkdocstrings/commit/ce84dd57dc5cd3bf3f4be9623ddaa73e1c1868f0) by Oleh Prypin). [PR #632](https://github.com/mkdocstrings/mkdocstrings/pull/632)

### Bug Fixes

- Make `custom_templates` relative to the config file ([370a61d](https://github.com/mkdocstrings/mkdocstrings/commit/370a61d12b33f3fb61f6bddb3939eb8ff6018620) by Waylan Limberg). [Issue #477](https://github.com/mkdocstrings/mkdocstrings/issues/477), [PR #627](https://github.com/mkdocstrings/mkdocstrings/pull/627)
- Remove duplicated headings for docstrings nested in tabs/admonitions ([e2123a9](https://github.com/mkdocstrings/mkdocstrings/commit/e2123a935edea0abdc1b439e2c2b76e002c76e2b) by Perceval Wajsburt, [f4a94f7](https://github.com/mkdocstrings/mkdocstrings/commit/f4a94f7d8b8eb1ac01d65bb7237f0077e320ddac) by Oleh Prypin). [Issue #609](https://github.com/mkdocstrings/mkdocstrings/issues/609), [PR #610](https://github.com/mkdocstrings/mkdocstrings/pull/610), [PR #613](https://github.com/mkdocstrings/mkdocstrings/pull/613)

### Code Refactoring

- Drop support for MkDocs < 1.4, modernize usages ([b61d4d1](https://github.com/mkdocstrings/mkdocstrings/commit/b61d4d15258c66b14266aa04b456f191f101b2c6) by Oleh Prypin). [PR #629](https://github.com/mkdocstrings/mkdocstrings/pull/629)

## [0.23.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.23.0) - 2023-08-28

<small>[Compare with 0.22.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.22.0...0.23.0)</small>

### Breaking Changes

- Removed `BaseCollector` and `BaseRenderer` classes: they were merged into the `BaseHandler` class.
- Removed the watch feature, as MkDocs now provides it natively.
- Removed support for `selection` and `rendering` keys in YAML blocks: use `options` instead.
- Removed support for loading handlers from the `mkdocstrings.handler` namespace.
  Handlers must now be packaged under the `mkdocstrings_handlers` namespace.

### Features

- Register all anchors for each object in the inventory ([228fb73](https://github.com/mkdocstrings/mkdocstrings/commit/228fb737caca4e20e600053bf59cbfa3e9c73906) by Timothée Mazzucotelli).

### Bug Fixes

- Don't add `codehilite` CSS class to inline code ([7690d41](https://github.com/mkdocstrings/mkdocstrings/commit/7690d41e2871997464367e673023585c4fb05e26) by Timothée Mazzucotelli).
- Support cross-references for API docs rendered in top-level index page ([b194452](https://github.com/mkdocstrings/mkdocstrings/commit/b194452be93aee33b3c28a468762b4d96c501f4f) by Timothée Mazzucotelli).

### Code Refactoring

- Sort inventories before writing them to disk ([9371e9f](https://github.com/mkdocstrings/mkdocstrings/commit/9371e9fc7dd68506b73aa1580a12c5f5cd779aba) by Timothée Mazzucotelli).
- Stop accepting sets as return value of `get_anchors` (only tuples), to preserve order ([2e10374](https://github.com/mkdocstrings/mkdocstrings/commit/2e10374be258e9713b26f73dd06d0c2520ec07a5) by Timothée Mazzucotelli).
- Remove deprecated parts ([0a90a47](https://github.com/mkdocstrings/mkdocstrings/commit/0a90a474c8dcbd95821700d7dab63f03e392c40f) by Timothée Mazzucotelli).
- Use proper parameters in `Inventory.register` method ([433c6e0](https://github.com/mkdocstrings/mkdocstrings/commit/433c6e01aab9333589f755e483f124db0836f143) by Timothée Mazzucotelli).

## [0.22.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.22.0) - 2023-05-25

<small>[Compare with 0.21.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.2...0.22.0)</small>

### Features

- Allow extensions to add templates ([cf0af05](https://github.com/mkdocstrings/mkdocstrings/commit/cf0af059eb89240eba0437de417c124389e2f20e) by Timothée Mazzucotelli). [PR #569](https://github.com/mkdocstrings/mkdocstrings/pull/569)

### Code Refactoring

- Report inventory loading errors ([2c05d78](https://github.com/mkdocstrings/mkdocstrings/commit/2c05d7854b87251e26c1a2e1810b85702ff110f3) by Timothée Mazzucotelli). Co-authored-by: Oleh Prypin <oleh@pryp.in>

## [0.21.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.2) - 2023-04-06

<small>[Compare with 0.21.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.1...0.21.2)</small>

### Bug Fixes

- Fix regression with LRU cached method ([85efbd2](https://github.com/mkdocstrings/mkdocstrings/commit/85efbd285d4c8977755bda1c36220b241a9e1502) by Timothée Mazzucotelli). [Issue #549](https://github.com/mkdocstrings/mkdocstrings/issues/549)

## [0.21.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.1) - 2023-04-05

<small>[Compare with 0.21.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.0...0.21.1)</small>

### Bug Fixes

- Fix missing typing-extensions dependency on Python less than 3.10 ([bff760b](https://github.com/mkdocstrings/mkdocstrings/commit/bff760b77c1eedfa770e852aa994a69ff51b0a32) by Timothée Mazzucotelli). [Issue #548](https://github.com/mkdocstrings/mkdocstrings/issues/548)

## [0.21.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.0) - 2023-04-05

<small>[Compare with 0.20.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.20.0...0.21.0)</small>

### Features

- Expose the full config to handlers ([15dacf6](https://github.com/mkdocstrings/mkdocstrings/commit/15dacf62f8479a05e9604383155ffa6fade0522d) by David Patterson). [Issue #501](https://github.com/mkdocstrings/mkdocstrings/issues/501), [PR #509](https://github.com/mkdocstrings/mkdocstrings/pull/509)

## [0.20.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.20.0) - 2023-01-19

<small>[Compare with 0.19.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.1...0.20.0)</small>

### Features
- Add `enabled` configuration option ([8cf117d](https://github.com/mkdocstrings/mkdocstrings/commit/8cf117daeefb4fc522145cc567b40eb4256c0a94) by StefanBRas). [Issue #478](https://github.com/mkdocstrings/mkdocstrings/issues/478), [PR #504](https://github.com/mkdocstrings/mkdocstrings/pull/504)

### Bug Fixes
- Handle updating Jinja environment of multiple handlers ([a6ea80c](https://github.com/mkdocstrings/mkdocstrings/commit/a6ea80c992f2a200d8cee3c9ff3b651ddd049a3d) by David Patterson). [Related PR #201](https://github.com/mkdocstrings/mkdocstrings/pull/201), [Issue #502](https://github.com/mkdocstrings/mkdocstrings/issues/502), [PR #507](https://github.com/mkdocstrings/mkdocstrings/pull/507)

### Code Refactoring
- Make `_load_inventory` accept lists as arguments ([105ed82](https://github.com/mkdocstrings/mkdocstrings/commit/105ed8210d4665f6b52f2cc04d56df2d35cd3caf) by Sorin Sbarnea). [Needed by PR mkdocstrings/python#49](https://github.com/mkdocstrings/python/issues/49), [PR #511](https://github.com/mkdocstrings/mkdocstrings/pull/511)
- Remove support for MkDocs < 1.2 (we already depended on MkDocs >= 1.2) ([ac963c8](https://github.com/mkdocstrings/mkdocstrings/commit/ac963c88c793e640d2a7a31392aff1fc2d15ba52) by Timothée Mazzucotelli).

## [0.19.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.1) - 2022-12-13

<small>[Compare with 0.19.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.0...0.19.1)</small>

### Bug Fixes
- Fix regular expression for Sphinx inventory parsing ([348bdd5](https://github.com/mkdocstrings/mkdocstrings/commit/348bdd5e930f3cf7a8e27835189794ec940ae1b7) by Luis Michaelis). [Issue #496](https://github.com/mkdocstrings/mkdocstrings/issues/496), [PR #497](https://github.com/mkdocstrings/mkdocstrings/issues/497)

### Code Refactoring
- Small fixes to type annotations ([9214b74](https://github.com/mkdocstrings/mkdocstrings/commit/9214b74367da1f9c808eacc8ceecc4134d5c9d3c) by Oleh Prypin). [PR #470](https://github.com/mkdocstrings/mkdocstrings/issues/470)
- Report usage-based warnings as user-facing messages ([03dd7a6](https://github.com/mkdocstrings/mkdocstrings/commit/03dd7a6e4fefa44889bda9899d9b698bcfd07990) by Oleh Prypin). [PR #464](https://github.com/mkdocstrings/mkdocstrings/issues/464)


## [0.19.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.0) - 2022-05-28

<small>[Compare with 0.18.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.1...0.19.0)</small>

### Highlights
We decided to deprecate a few things to pave the way towards a more
stable code base, bringing us closer to a v1.

- Selection and rendering options are now combined into a single
  `options` key. Using the old keys will emit a deprecation warning.
- The `BaseCollector` and `BaseRenderer` classes are deprecated in favor
  of `BaseHandler`, which merges their functionality. Using the old
  classes will emit a deprecation warning.

New versions of the Python handler and the legacy Python handler
were also released in coordination with *mkdocstrings* 0.19.
See their respective changelogs:
[python](https://mkdocstrings.github.io/python/changelog/#070-2022-05-28),
[python-legacy](https://mkdocstrings.github.io/python-legacy/changelog/#023-2022-05-28).
Most notably, the Python handler gained the `members` and `filters` options
that prevented many users to switch to it.

*mkdocstrings* stopped depending directly on the legacy Python handler.
It means you now have to explicitely depend on it, directly or through
the extra provided by *mkdocstrings*, if you want to continue using it.

### Packaging / Dependencies
- Stop depending directly on mkdocstrings-python-legacy ([9055d58](https://github.com/mkdocstrings/mkdocstrings/commit/9055d582a6244a45a1af1aeccd8bf3436889a1a5) by Timothée Mazzucotelli). [Issue #376](https://github.com/mkdocstrings/mkdocstrings/issues/376)

### Features
- Pass config file path to handlers ([cccebc4](https://github.com/mkdocstrings/mkdocstrings/commit/cccebc40c0d51c23381d53432d9355fba9a290ae) by Timothée Mazzucotelli). [Issue #311](https://github.com/mkdocstrings/mkdocstrings/issues/311), [PR #425](https://github.com/mkdocstrings/mkdocstrings/issues/425)

### Code Refactoring
- Support options / deprecated options mix-up ([7c71f26](https://github.com/mkdocstrings/mkdocstrings/commit/7c71f2623b667d43c5e9eb8aea881df2c9984a0e) by Timothée Mazzucotelli).
- Deprecate watch feature in favor of MkDocs' built-in one ([c20022e](https://github.com/mkdocstrings/mkdocstrings/commit/c20022e6adfd3a18fd698f50355dfce534b9feb9) by Timothée Mazzucotelli).
- Log relative template paths if possible, instead of absolute ([91f5f83](https://github.com/mkdocstrings/mkdocstrings/commit/91f5f83408c7aab9124cc19fa47c940541d6f5ec) by Timothée Mazzucotelli).
- Deprecate `selection` and `rendering` YAML keys ([3335310](https://github.com/mkdocstrings/mkdocstrings/commit/3335310b985401642fea8322aba503cafa1c50b1) by Timothée Mazzucotelli). [PR #420](https://github.com/mkdocstrings/mkdocstrings/issues/420)
- Deprecate `BaseCollector` and `BaseRenderer` ([eb822cb](https://github.com/mkdocstrings/mkdocstrings/commit/eb822cb11ec065da0b1277299aae4ffeeffadc6f) by Timothée Mazzucotelli). [PR #413](https://github.com/mkdocstrings/mkdocstrings/issues/413)


## [0.18.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.1) - 2022-03-01

<small>[Compare with 0.18.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.0...0.18.1)</small>

### Bug Fixes
- Don't preemptively register identifiers as anchors ([c7ac043](https://github.com/mkdocstrings/mkdocstrings/commit/c7ac04324d005d9cf7d2c1f3b2c39f212275d451) by Timothée Mazzucotelli).


## [0.18.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.0) - 2022-02-06

<small>[Compare with 0.17.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.17.0...0.18.0)</small>

### Highlights
- Python 3.6 support is dropped.
- We provide a new, experimental Python handler based on [Griffe](https://github.com/mkdocstrings/griffe).
  This new handler brings automatic cross-references for every annotation in your code,
  including references to third-party libraries' APIs if they provide objects inventories
  and you explicitely [load them](https://mkdocstrings.github.io/usage/#cross-references-to-other-projects-inventories) in `mkdocs.yml`.
  [See migration notes in the documentation](https://mkdocstrings.github.io/handlers/overview/#about-the-python-handlers).
- The "legacy" Python handler now lives in its own repository at https://github.com/mkdocstrings/python-legacy.

### Packaging / Dependencies
- Add Crystal extra, update Python extras versions ([b8222b0](https://github.com/mkdocstrings/mkdocstrings/commit/b8222b0150d4743be857bcbf40f014265095885b) by Timothée Mazzucotelli). [PR #374](https://github.com/mkdocstrings/mkdocstrings/pull/374)
- Update autorefs to actually required version ([fc6c7f6](https://github.com/mkdocstrings/mkdocstrings/commit/fc6c7f652a420ac29cf16cbb99b11a55aa9b38ea) by Timothée Mazzucotelli).
- Drop Python 3.6 support ([7205ac6](https://github.com/mkdocstrings/mkdocstrings/commit/7205ac6cf2861db61c2a5b8bf07d0e6b1a7f49fb) by Timothée Mazzucotelli).

### Features
- Allow unwrapping the `<p>` tag in `convert_markdown` filter ([5351fc8](https://github.com/mkdocstrings/mkdocstrings/commit/5351fc8b417fb20f0681a22f49fcc902579eacdb) by Oleh Prypin). [PR #369](https://github.com/mkdocstrings/mkdocstrings/pull/369)
- Support handlers spanning multiple locations ([f42dfc6](https://github.com/mkdocstrings/mkdocstrings/commit/f42dfc61ce4f9f317c4bd17f568e504ed9764d35) by Timothée Mazzucotelli). [PR #355](https://github.com/mkdocstrings/mkdocstrings/pull/355)

### Code Refactoring
- Prefix logs with the package name only ([6c2b734](https://github.com/mkdocstrings/mkdocstrings/commit/6c2b7348ae40989e4adccc087feae599fcea949d) by Timothée Mazzucotelli). [PR #375](https://github.com/mkdocstrings/mkdocstrings/pull/375)
- Extract the Python handler into its own repository ([74371e4](https://github.com/mkdocstrings/mkdocstrings/commit/74371e49c32059fefd34c7cc7f7b8f085b383237) by Timothée Mazzucotelli). [PR #356](https://github.com/mkdocstrings/mkdocstrings/pull/356)
- Support Jinja2 3.1 ([b377227](https://github.com/mkdocstrings/mkdocstrings/commit/b37722716b1e0ed6393ec71308dfb0f85e142f3b) by Timothée Mazzucotelli). [Issue #360](https://github.com/mkdocstrings/mkdocstrings/issues/360), [PR #361](https://github.com/mkdocstrings/mkdocstrings/pull/361)
- Find templates in new and deprecated namespaces ([d5d5f18](https://github.com/mkdocstrings/mkdocstrings/commit/d5d5f1844dbac3affacc95f2f3eab57a61d2068c) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)
- Support loading handlers from the `mkdocstrings_handlers` namespace ([5c22c6c](https://github.com/mkdocstrings/mkdocstrings/commit/5c22c6ce4e056ac2334e2dfcd47c1f1a7884d352) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)


## [0.17.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.17.0) - 2021-12-27

<small>[Compare with 0.16.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.2...0.17.0)</small>

### Features
- Add `show_signature` rendering option ([024ee82](https://github.com/mkdocstrings/mkdocstrings/commit/024ee826bb6f0aa297ba857bc18075d6f4162cad) by Will Da Silva). [Issue #341](https://github.com/mkdocstrings/mkdocstrings/issues/341), [PR #342](https://github.com/mkdocstrings/mkdocstrings/pull/342)
- Support Keyword Args and Yields sections ([1286427](https://github.com/mkdocstrings/mkdocstrings/commit/12864271b7f997af7b421a834919b1e686793905) by Timothée Mazzucotelli). [Issue #205](https://github.com/mkdocstrings/mkdocstrings/issues/205) and [#324](https://github.com/mkdocstrings/mkdocstrings/issues/324), [PR #331](https://github.com/mkdocstrings/mkdocstrings/pull/331)

### Bug Fixes
- Do minimum work when falling back to re-collecting an object to get its anchor ([f6cf570](https://github.com/mkdocstrings/mkdocstrings/commit/f6cf570255df17db1088b6e6cd94bcc823b3b17f) by Timothée Mazzucotelli). [Issue #329](https://github.com/mkdocstrings/mkdocstrings/issues/329), [PR #330](https://github.com/mkdocstrings/mkdocstrings/pull/330)

### Code Refactoring
- Return multiple identifiers from fallback method ([78c498c](https://github.com/mkdocstrings/mkdocstrings/commit/78c498c4a6cfc33cc6ceab9829426bd64e518d44) by Timothée Mazzucotelli). [Issue mkdocstrings/autorefs#11](https://github.com/mkdocstrings/autorefs/issues/11), [PR #350](https://github.com/mkdocstrings/mkdocstrings/pull/350)


## [0.16.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.2) - 2021-10-04

<small>[Compare with 0.16.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.1...0.16.2)</small>

### Dependencies
- Support `pymdown-extensions` v9.x ([0831343](https://github.com/mkdocstrings/mkdocstrings/commit/0831343aa8726ed785b17bba1c8d4adf49b46748) by Ofek Lev and [38b22ec](https://github.com/mkdocstrings/mkdocstrings/commit/38b22ec11cded4689115dafc43e16a1e8e40feda) by Timothée Mazzucotelli).


## [0.16.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.1) - 2021-09-23

<small>[Compare with 0.16.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.0...0.16.1)</small>

### Bug Fixes
- Fix ReadTheDocs "return" template ([598621b](https://github.com/mkdocstrings/mkdocstrings/commit/598621bff29d2aeda0e14f350cda36c1a1f418d5) by Timothée Mazzucotelli).


## [0.16.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.0) - 2021-09-20

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.16.0)</small>

### Features
- Add a rendering option to change the sorting of members ([b1fff8b](https://github.com/mkdocstrings/mkdocstrings/commit/b1fff8b8ef4d6d77417fc43ed8be4b578d6437e4) by Joe Rickerby). [Issue #114](https://github.com/mkdocstrings/mkdocstrings/issues/114), [PR #274](https://github.com/mkdocstrings/mkdocstrings/pull/274)
- Add option to show Python base classes ([436f550](https://github.com/mkdocstrings/mkdocstrings/commit/436f5504ad72ab6d1f5b4303e6b68bc84562c32b) by Brian Koropoff). [Issue #269](https://github.com/mkdocstrings/mkdocstrings/issues/269), [PR #297](https://github.com/mkdocstrings/mkdocstrings/pull/297)
- Support loading external Python inventories in Sphinx format ([a8418cb](https://github.com/mkdocstrings/mkdocstrings/commit/a8418cb4c6193d35cdc72508b118a712cf0334e1) by Oleh Prypin). [PR #287](https://github.com/mkdocstrings/mkdocstrings/pull/287)
- Support loading external inventories and linking to them ([8b675f4](https://github.com/mkdocstrings/mkdocstrings/commit/8b675f4671f8bbfd2f337ed043e3682b0a0ad0f6) by Oleh Prypin). [PR #277](https://github.com/mkdocstrings/mkdocstrings/pull/277)
- Very basic support for MkDocs theme ([974ca90](https://github.com/mkdocstrings/mkdocstrings/commit/974ca9010efca1b8279767faf8efcd2470a8371d) by Oleh Prypin). [PR #272](https://github.com/mkdocstrings/mkdocstrings/pull/272)
- Generate objects inventory ([14ed959](https://github.com/mkdocstrings/mkdocstrings/commit/14ed959860a784a835cd71f911081f2026d66c81) and [bbd85a9](https://github.com/mkdocstrings/mkdocstrings/commit/bbd85a92fa70bddfe10a907a4d63b8daf0810cb2) by Timothée Mazzucotelli). [Issue #251](https://github.com/mkdocstrings/mkdocstrings/issues/251), [PR #253](https://github.com/mkdocstrings/mkdocstrings/pull/253)

### Bug Fixes
- Don't render empty code blocks for missing type annotations ([d2e9e1e](https://github.com/mkdocstrings/mkdocstrings/commit/d2e9e1ef3cf304081b07f763843a9722bf9b117e) by Oleh Prypin).
- Fix custom handler not being used ([6dcf342](https://github.com/mkdocstrings/mkdocstrings/commit/6dcf342fb83b19e385d56d37235f2b23e8c8c767) by Timothée Mazzucotelli). [Issue #259](https://github.com/mkdocstrings/mkdocstrings/issues/259), [PR #263](https://github.com/mkdocstrings/mkdocstrings/pull/263)
- Don't hide `setup_commands` errors ([92418c4](https://github.com/mkdocstrings/mkdocstrings/commit/92418c4b3e80b67d5116efa73931fc113daa60e9) by Gabriel Vîjială). [PR #258](https://github.com/mkdocstrings/mkdocstrings/pull/258)

### Code Refactoring
- Move writing extra files to an earlier stage in the build ([3890ab5](https://github.com/mkdocstrings/mkdocstrings/commit/3890ab597692e56d7ece576c166373b66ff4e615) by Oleh Prypin). [PR #275](https://github.com/mkdocstrings/mkdocstrings/pull/275)


## [0.15.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.2) - 2021-06-09

<small>[Compare with 0.15.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.1...0.15.2)</small>

### Packaging
- MkDocs default schema needs to be obtained differently now ([b3e122b](https://github.com/mkdocstrings/mkdocstrings/commit/b3e122b36d586632738ddedaed7d3df8d5dead44) by Oleh Prypin). [PR #273](https://github.com/mkdocstrings/mkdocstrings/pull/273)
- Compatibility with MkDocs 1.2: livereload isn't guaranteed now ([36e8024](https://github.com/mkdocstrings/mkdocstrings/commit/36e80248d2ab9e61975f6c83ae517115c9410fc1) by Oleh Prypin). [PR #294](https://github.com/mkdocstrings/mkdocstrings/pull/294)


## [0.15.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.1) - 2021-05-16

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.15.1)</small>

### Bug Fixes
- Prevent error during parallel installations ([fac2c71](https://github.com/mkdocstrings/mkdocstrings/commit/fac2c711351f7b62bf5308f19cfc612a3944588a) by Timothée Mazzucotelli).

### Packaging
- Support the upcoming major Jinja and MarkupSafe releases ([bb4f9de](https://github.com/mkdocstrings/mkdocstrings/commit/bb4f9de08a77bef85e550d70deb0db13e6aa0c96) by Oleh Prypin). [PR #283](https://github.com/mkdocstrings/mkdocstrings/pull/283)
- Accept a higher version of mkdocs-autorefs ([c8de08e](https://github.com/mkdocstrings/mkdocstrings/commit/c8de08e177f78290d3baaca2716d1ec64c9059b6) by Oleh Prypin). [PR #282](https://github.com/mkdocstrings/mkdocstrings/pull/282)


## [0.15.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.0) - 2021-02-28

<small>[Compare with 0.14.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.14.0...0.15.0)</small>

### Breaking Changes

The following items are *possible* breaking changes:

- Cross-linking to arbitrary headings now requires to opt-in to the *autorefs* plugin,
  which is installed as a dependency of *mkdocstrings*.
  See [Cross-references to any Markdown heading](https://mkdocstrings.github.io/usage/#cross-references-to-any-markdown-heading).
- *mkdocstrings* now respects your configured code highlighting method,
  so if you are using the CodeHilite extension, the `.highlight` CSS class in the rendered HTML will become `.codehilite`.
  So make sure to adapt your extra CSS accordingly. Or just switch to using [pymdownx.highlight](https://facelessuser.github.io/pymdown-extensions/extensions/highlight/), it's better supported by *mkdocstrings* anyway.
  See [Syntax highlighting](https://mkdocstrings.github.io/theming/#syntax-highlighting).
- Most of the [CSS rules that *mkdocstrings* used to recommend](https://mkdocstrings.github.io/handlers/python/#recommended-style-material) for manual addition, now become mandatory (auto-injected into the site). This shouldn't *break* any of your styles, but you are welcome to remove the now-redundant lines that you had copied into `extra_css`, [similarly to this diff](https://github.com/mkdocstrings/mkdocstrings/pull/218/files#diff-7889a1924c66ff9318f1d81c4a3b75658d09bebf0db3b2e4023ba3e40294eb73).

### Features
- Nicer-looking error outputs - no tracebacks from mkdocstrings ([6baf720](https://github.com/mkdocstrings/mkdocstrings/commit/6baf720850d359ddb55713553a757fe7b2283e10) by Oleh Prypin). [PR #230](https://github.com/mkdocstrings/mkdocstrings/pull/230)
- Let handlers add CSS to the pages, do so for Python handler ([05c7a3f](https://github.com/mkdocstrings/mkdocstrings/commit/05c7a3fc83b67d3244ea3bfe97dab19aa53f2d38) by Oleh Prypin). [Issue #189](https://github.com/mkdocstrings/mkdocstrings/issues/189), [PR #218](https://github.com/mkdocstrings/mkdocstrings/pull/218)
- Allow linking to an object heading not only by its canonical identifier, but also by its possible aliases ([4789950](https://github.com/mkdocstrings/mkdocstrings/commit/4789950ff43c354d47afbed5c89d5abb917ffee6) by Oleh Prypin). [PR #217](https://github.com/mkdocstrings/mkdocstrings/pull/217)

### Bug Fixes
- Propagate the CSS class to inline highlighting as well ([c7d80e6](https://github.com/mkdocstrings/mkdocstrings/commit/c7d80e63a042913b7511c38a788967796dd10997) by Oleh Prypin). [PR #245](https://github.com/mkdocstrings/mkdocstrings/pull/245)
- Don't double-escape characters in highlighted headings ([6357144](https://github.com/mkdocstrings/mkdocstrings/commit/6357144b100be6a2e7e6140e035c289c225cec22) by Oleh Prypin). [Issue #228](https://github.com/mkdocstrings/mkdocstrings/issues/228), [PR #241](https://github.com/mkdocstrings/mkdocstrings/pull/241)

### Code Refactoring
- Use the autorefs plugin from its new external location ([e2d74ef](https://github.com/mkdocstrings/mkdocstrings/commit/e2d74efb0d59f9a1aa45e42525ceb1d4b7638426) by Oleh Prypin). [PR #235](https://github.com/mkdocstrings/mkdocstrings/pull/235)
- Split out Markdown extensions from `handlers` to `handlers.rendering` ([7533852](https://github.com/mkdocstrings/mkdocstrings/commit/7533852e3ac0a378b70a380cef1100421b7d5763) by Oleh Prypin). [PR #233](https://github.com/mkdocstrings/mkdocstrings/pull/233)
- Theme-agnostic code highlighting, respecting configs ([f9ea009](https://github.com/mkdocstrings/mkdocstrings/commit/f9ea00979545e39983ba377f1930d73ae94165ea) by Oleh Prypin). [PR #202](https://github.com/mkdocstrings/mkdocstrings/pull/202)
- Split out autorefs plugin, make it optional ([fc67656](https://github.com/mkdocstrings/mkdocstrings/commit/fc676564f9b11269b3e0b0482703ac924069a3fa) by Oleh Prypin). [PR #220](https://github.com/mkdocstrings/mkdocstrings/pull/220)
- Remove the extra wrapper div from the final doc ([7fe438c](https://github.com/mkdocstrings/mkdocstrings/commit/7fe438c4040a2124b00c39e582ef4c38be7c55c9) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Don't re-parse the whole subdoc, expose only headings ([15f84f9](https://github.com/mkdocstrings/mkdocstrings/commit/15f84f981982c8e2b15498f5c869ac207f3ce5d7) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Actually exclude hidden headings from the doc ([0fdb082](https://github.com/mkdocstrings/mkdocstrings/commit/0fdb0821867eb0e14a972a603c22301aafecf4f4) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)


## [0.14.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.14.0) - 2021-01-06

<small>[Compare with 0.13.6](https://github.com/pawamoy/mkdocstrings/compare/0.13.6...0.14.0)</small>

Special thanks to Oleh [@oprypin](https://github.com/oprypin) Prypin who did an amazing job (this is a euphemism)
at improving *mkdocstrings*, fixing hard-to-fix bugs with clever solutions, implementing great new features
and refactoring the code for better performance and readability! Thanks Oleh!

### Bug Fixes
- Fix double code tags ([e84d401](https://github.com/pawamoy/mkdocstrings/commit/e84d401c6dcb9aecb8cc1a58d3a0f339e1c3e78f) by Timothée Mazzucotelli).
- Don't mutate the original Markdown config for permalinks ([8f6b163](https://github.com/pawamoy/mkdocstrings/commit/8f6b163b50551da22f65e9b736e042562f77f2d7) by Oleh Prypin).
- Preserve text immediately before an autodoc ([07466fa](https://github.com/pawamoy/mkdocstrings/commit/07466fafb54963a4e35e69007b6291a0382aaeb4) by Oleh Prypin). [PR #207](https://github.com/pawamoy/mkdocstrings/pull/207)
- Remove `href` attributes from headings in templates ([d5602ff](https://github.com/pawamoy/mkdocstrings/commit/d5602ff3bb1a75ac1c8c457e972271b6c66eb8dd) by Oleh Prypin). [PR #204](https://github.com/pawamoy/mkdocstrings/pull/204)
- Don't let `toc` extension append its permalink twice ([a154f5c](https://github.com/pawamoy/mkdocstrings/commit/a154f5c4c6ef9abd221e1f89e44847ae2cf25436) by Oleh Prypin). [PR #203](https://github.com/pawamoy/mkdocstrings/pull/203)
- Fix undefined entity for `&para;` ([2c29211](https://github.com/pawamoy/mkdocstrings/commit/2c29211002d515db40e5bdabf6cbf32ec8633a05) by Timothée Mazzucotelli).
- Make ids of Markdown sub-documents prefixed with the parent item id ([d493d33](https://github.com/pawamoy/mkdocstrings/commit/d493d33b3827d93e84a7b2e39f0a10dfcb782402) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186) and [#193](https://github.com/pawamoy/mkdocstrings/issues/193), [PR #199](https://github.com/pawamoy/mkdocstrings/pull/199)
- More lenient regex for data-mkdocstrings-identifier ([dcfec8e](https://github.com/pawamoy/mkdocstrings/commit/dcfec8edfdff050debc5856dfc213d3119a84792) by Oleh Prypin).
- Shift Markdown headings according to the current `heading_level` ([13f41ae](https://github.com/pawamoy/mkdocstrings/commit/13f41aec5a95c82c1229baa4ac3caf4abb2add51) by Oleh Prypin). [Issue #192](https://github.com/pawamoy/mkdocstrings/issues/192), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix footnotes appearing in all following objects ([af24bc2](https://github.com/pawamoy/mkdocstrings/commit/af24bc246a6938ebcae7cf6ff677b194cf1af95c) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix cross-references from the root index page ([9c9f2a0](https://github.com/pawamoy/mkdocstrings/commit/9c9f2a04af94e0d88f57fd76249f7985166a9b88) by Oleh Prypin). [Issue #184](https://github.com/pawamoy/mkdocstrings/issues/184), [PR #185](https://github.com/pawamoy/mkdocstrings/pull/185)
- Fix incorrect argument name passed to Markdown ([10ce502](https://github.com/pawamoy/mkdocstrings/commit/10ce502d5fd58f1e5a4e14308ffad1bc3d7116ee) by Timothée Mazzucotelli).
- Fix error when a digit immediately follows a code tag ([9b92341](https://github.com/pawamoy/mkdocstrings/commit/9b9234160edc54b53c81a618b12095e7dd829059) by Oleh Prypin). [Issue #169](https://github.com/pawamoy/mkdocstrings/issues/169), [PR #175](https://github.com/pawamoy/mkdocstrings/pull/175)
- Detecting paths relative to template directory in logging ([a50046b](https://github.com/pawamoy/mkdocstrings/commit/a50046b5d58d62df4ba13f4c197e80edd1995eb9) by Oleh Prypin). [Issue #166](https://github.com/pawamoy/mkdocstrings/issues/166)

### Code Refactoring
- BlockProcessor already receives strings, use them as such ([bcf7da9](https://github.com/pawamoy/mkdocstrings/commit/bcf7da911a310a63351c5082e84bb763d90d5b3b) by Oleh Prypin).
- Remove some unused code ([8504084](https://github.com/pawamoy/mkdocstrings/commit/850408421cc027be8374673cc74c71fff26f3833) by Oleh Prypin). [PR #206](https://github.com/pawamoy/mkdocstrings/pull/206)
- Improve XML parsing error handling ([ad86410](https://github.com/pawamoy/mkdocstrings/commit/ad864100b644ab1ee8daaa0d3923bc87dee1c5ca) by Timothée Mazzucotelli).
- Explicitly use MarkupSafe ([6b9ebe7](https://github.com/pawamoy/mkdocstrings/commit/6b9ebe7d510e82971acef89e9e946af3c0cc96d3) by Oleh Prypin).
- Split out the handler cache, expose it through the plugin ([6453026](https://github.com/pawamoy/mkdocstrings/commit/6453026fac287387090a67cce70c078377d107dd) by Oleh Prypin). [Issue #179](https://github.com/pawamoy/mkdocstrings/issues/179), [PR #191](https://github.com/pawamoy/mkdocstrings/pull/191)
- Use ChainMap instead of copying dicts ([c634d2c](https://github.com/pawamoy/mkdocstrings/commit/c634d2ce6377de26caa553048bb28ef1e672f7aa) by Oleh Prypin). [PR #171](https://github.com/pawamoy/mkdocstrings/pull/171)
- Rename logging to loggers to avoid confusion ([7a119cc](https://github.com/pawamoy/mkdocstrings/commit/7a119ccf27cf77cf2cbd114e7fad0a9e4e97bbd8) by Timothée Mazzucotelli).
- Simplify logging ([409f93e](https://github.com/pawamoy/mkdocstrings/commit/409f93ed26d7d8292a8bc7a6c32cb270b3769409) by Timothée Mazzucotelli).

### Features
- Allow specifying `heading_level` as a Markdown heading ([10efc28](https://github.com/pawamoy/mkdocstrings/commit/10efc281e04b2a430cec53e49208ccc09e591667) by Oleh Prypin). [PR #170](https://github.com/pawamoy/mkdocstrings/pull/170)
- Allow any characters in identifiers ([7ede68a](https://github.com/pawamoy/mkdocstrings/commit/7ede68a0917b494eda2198931a8ad1c97fc8fce4) by Oleh Prypin). [PR #174](https://github.com/pawamoy/mkdocstrings/pull/174)
- Allow namespace packages for handlers ([39b0465](https://github.com/pawamoy/mkdocstrings/commit/39b046548f57dc59993241b24d2cf12fb5e488eb) by Timothée Mazzucotelli).
- Add template debugging/logging ([33b32c1](https://github.com/pawamoy/mkdocstrings/commit/33b32c1410bf6e8432768865c8aa86b8e091ab59) by Timothée Mazzucotelli).
- Add initial support for the ReadTheDocs theme ([1028115](https://github.com/pawamoy/mkdocstrings/commit/1028115682ed0806d6570c749af0e382c67d6120) by Timothée Mazzucotelli). [Issue #107](https://github.com/pawamoy/mkdocstrings/issues/107), [PR #159](https://github.com/pawamoy/mkdocstrings/pull/159)
- Add option to show type annotations in signatures ([f94ce9b](https://github.com/pawamoy/mkdocstrings/commit/f94ce9bdb2afc2c41c21a53636980ca077b757ce) by Timothée Mazzucotelli). [Issue #106](https://github.com/pawamoy/mkdocstrings/issues/106)

### Packaging
- Accept verions of `pytkdocs` up to 0.10.x (see [changelog](https://pawamoy.github.io/pytkdocs/changelog/#0100-2020-12-06)).

### Performance Improvements
- Call `update_env` only once per `Markdown` instance ([b198c74](https://github.com/pawamoy/mkdocstrings/commit/b198c74338dc3b54b999eadeef9946d69277ad77) by Oleh Prypin). [PR #201](https://github.com/pawamoy/mkdocstrings/pull/201)
- Disable Jinja's `auto_reload` to reduce disk reads ([3b28c58](https://github.com/pawamoy/mkdocstrings/commit/3b28c58c77642071419d4a98e007d5a854b7984f) by Oleh Prypin). [PR #200](https://github.com/pawamoy/mkdocstrings/pull/200)
- Rework autorefs replacement to not re-parse the final HTML ([22a9e4b](https://github.com/pawamoy/mkdocstrings/commit/22a9e4bf1b73f9b9b1a7c4876f0c677f919bc4d7) by Oleh Prypin). [Issue #187](https://github.com/pawamoy/mkdocstrings/issues/187), [PR #188](https://github.com/pawamoy/mkdocstrings/pull/188)


## [0.13.6](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.6) - 2020-09-28

<small>[Compare with 0.13.5](https://github.com/pawamoy/mkdocstrings/compare/0.13.5...0.13.6)</small>

### Bug Fixes
- Fix rendering when clicking on hidden toc entries ([2af4d31](https://github.com/pawamoy/mkdocstrings/commit/2af4d310adefec614235a2c1d04d5ff56bf9c220) by Timothée Mazzucotelli). Issue [#60](https://github.com/pawamoy/mkdocstrings/issues/60).


## [0.13.5](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.5) - 2020-09-28

<small>[Compare with 0.13.4](https://github.com/pawamoy/mkdocstrings/compare/0.13.4...0.13.5)</small>

## Packaging
- Accept `pytkdocs` version up to 0.9.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#090-2020-09-28)).


## [0.13.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.4) - 2020-09-25

<small>[Compare with 0.13.3](https://github.com/pawamoy/mkdocstrings/compare/0.13.3...0.13.4)</small>

### Bug Fixes
- Bring back arbitrary `**config` to Python handler ([fca7d4c](https://github.com/pawamoy/mkdocstrings/commit/fca7d4c75ffd7a84eaeccd27facd5575604dbfab) by Florimond Manca). Issue [#154](https://github.com/pawamoy/mkdocstrings/issues/154), PR [#155](https://github.com/pawamoy/mkdocstrings/pull/155)


## [0.13.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.3) - 2020-09-25

<small>[Compare with 0.13.2](https://github.com/pawamoy/mkdocstrings/compare/0.13.2...0.13.3)</small>

### Packaging
- Accept `pytkdocs` version up to 0.8.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#080-2020-09-25)).


## [0.13.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.2) - 2020-09-08

<small>[Compare with 0.13.1](https://github.com/pawamoy/mkdocstrings/compare/0.13.1...0.13.2)</small>

### Bug Fixes
- Fix relative URLs when `use_directory_urls` is false ([421d189](https://github.com/pawamoy/mkdocstrings/commit/421d189fff9ea2608e40d85e0a93e30334782b90) by Timothée Mazzucotelli). References: [#149](https://github.com/pawamoy/mkdocstrings/issues/149)


## [0.13.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.1) - 2020-09-03

<small>[Compare with 0.13.0](https://github.com/pawamoy/mkdocstrings/compare/0.13.0...0.13.1)</small>

### Bug Fixes
- Use relative links for cross-references ([9c77f1f](https://github.com/pawamoy/mkdocstrings/commit/9c77f1f461fa87842ae39945f9521ee85b1e413b) by Timothée Mazzucotelli). References: [#144](https://github.com/pawamoy/mkdocstrings/issues/144), [#147](https://github.com/pawamoy/mkdocstrings/issues/147)


## [0.13.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.0) - 2020-08-21

<small>[Compare with 0.12.2](https://github.com/pawamoy/mkdocstrings/compare/0.12.2...0.13.0)</small>

### Bug Fixes
- Accept dashes in module names ([fcf79d0](https://github.com/pawamoy/mkdocstrings/commit/fcf79d0024ec46c3862c94202864e054c04a6d0b) by Timothée Mazzucotelli). References: [#140](https://github.com/pawamoy/mkdocstrings/issues/140)

### Features
- Add option to show full path of direct members only ([d1b9401](https://github.com/pawamoy/mkdocstrings/commit/d1b9401afecb20d3123eec7334605cb15bf9d877) by Aaron Dunmore). References: [#134](https://github.com/pawamoy/mkdocstrings/issues/134), [#136](https://github.com/pawamoy/mkdocstrings/issues/136)

### Packaging
- Accept `pymdown-extensions` versions up to 0.8.x ([see release notes](https://facelessuser.github.io/pymdown-extensions/about/releases/8.0/#8.0)) ([178d48d](https://github.com/pawamoy/mkdocstrings/commit/178d48da7a62daf285dfc5f6ff230e8bce82ed53) by Hugo van Kemenade). PR [#146](https://github.com/pawamoy/mkdocstrings/issue/146)


## [0.12.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.2) - 2020-07-24

<small>[Compare with 0.12.1](https://github.com/pawamoy/mkdocstrings/compare/0.12.1...0.12.2)</small>

### Packaging
- Accept `pytkdocs` version up to 0.7.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#070-2020-07-24)).


## [0.12.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.1) - 2020-07-07

<small>[Compare with 0.12.0](https://github.com/pawamoy/mkdocstrings/compare/0.12.0...0.12.1)</small>

### Bug Fixes
- Fix HTML-escaped sequence parsing as XML ([db297f1](https://github.com/pawamoy/mkdocstrings/commit/db297f19013fc402eeff1f2827057a959e481c66) by Timothée Mazzucotelli).
- Allow running mkdocs from non-default interpreter ([283dd7b](https://github.com/pawamoy/mkdocstrings/commit/283dd7b83eeba675a16d96d2e829851c1273a625) by Jared Khan).


## [0.12.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.0) - 2020-06-14

<small>[Compare with 0.11.4](https://github.com/pawamoy/mkdocstrings/compare/0.11.4...0.12.0)</small>

### Features
- Support attributes section in Google-style docstrings ([8300253](https://github.com/pawamoy/mkdocstrings/commit/83002532b2294ea33dcec4f2672a5a6d0f64def1) by Timothée Mazzucotelli). References: [#88](https://github.com/pawamoy/mkdocstrings/issues/88)
- Support examples section in Google-style docstrings ([650c754](https://github.com/pawamoy/mkdocstrings/commit/650c754afdd5d4fb96b1e2529f378d025a2e7daf) by Iago González). References: [#112](https://github.com/pawamoy/mkdocstrings/issues/112)

### Packaging
- Accept `pytkdocs` version up to 0.6.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#060-2020-06-14)).

## [0.11.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.4) - 2020-06-08

<small>[Compare with 0.11.3](https://github.com/pawamoy/mkdocstrings/compare/0.11.3...0.11.4)</small>

### Packaging
- Accept `pytkdocs` version up to 0.5.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#050-2020-06-08)).
  If it breaks your docs, please [open issues on `pytkdocs`' bug-tracker](https://github.com/pawamoy/pytkdocs/issues),
  or pin `pytkdocs` version to while waiting for bug fixes <0.5.0 :clown:.


## [0.11.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.3) - 2020-06-07

<small>[Compare with 0.11.2](https://github.com/pawamoy/mkdocstrings/compare/0.11.2...0.11.3)</small>

### Bug Fixes
- Support custom theme directory configuration ([1243cf6](https://github.com/pawamoy/mkdocstrings/commit/1243cf673aaf371e5cbf42a3e0d1aa80482398a3) by Abhishek Thakur). References: [#120](https://github.com/pawamoy/mkdocstrings/issues/120), [#121](https://github.com/pawamoy/mkdocstrings/issues/121)


## [0.11.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.2) - 2020-05-20

<small>[Compare with 0.11.1](https://github.com/pawamoy/mkdocstrings/compare/0.11.1...0.11.2)</small>

### Packaging
- Increase `pytkdocs` version range to accept 0.4.0
  ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#040-2020-05-17)).


## [0.11.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.1) - 2020-05-14

<small>[Compare with 0.11.0](https://github.com/pawamoy/mkdocstrings/compare/0.11.0...0.11.1)</small>

### Bug Fixes
- Fix integration with mkdocs logging *une bonne fois pour toute* ([3293cbf](https://github.com/pawamoy/mkdocstrings/commit/3293cbf161f05d36de6c1d50b5de9742bf99066e) by Timothée Mazzucotelli).
- Discard setup commands stdout ([ea44cea](https://github.com/pawamoy/mkdocstrings/commit/ea44cea33159ed3a6b0b34b4cd52a17a40bd6460) by Timothée Mazzucotelli). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91)
- Use the proper python executable to start subprocesses ([9fe3b39](https://github.com/pawamoy/mkdocstrings/commit/9fe3b3915bd8f15011f8f3632a227d1eb56603fd) by Reece Dunham). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91), [#103](https://github.com/pawamoy/mkdocstrings/issues/103)


## [0.11.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.0) - 2020-04-23

<small>[Compare with 0.10.3](https://github.com/pawamoy/mkdocstrings/compare/0.10.3...0.11.0)</small>

### Bug Fixes
- Properly raise on errors (respect strict mode) ([2097208](https://github.com/pawamoy/mkdocstrings/commit/20972082a94b64bec02c77d6a80384d8042f60ea) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)
- Hook properly to MkDocs logging ([b23daed](https://github.com/pawamoy/mkdocstrings/commit/b23daed3743bbd2d3f024df34582a317c51a1af0) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)

### Features
- Add `setup_commands` option to python handler ([599f8e5](https://github.com/pawamoy/mkdocstrings/commit/599f8e528f55093b0011b732da959b747c1e02c0) by Ross Mechanic). Related issues/PRs: [#89](https://github.com/pawamoy/mkdocstrings/issues/89), [#90](https://github.com/pawamoy/mkdocstrings/issues/90)
- Add option to allow overriding templates ([7360021](https://github.com/pawamoy/mkdocstrings/commit/7360021ab4753706d0f6209ed960050f5d424ad8) by Mikaël Capelle). Related issues/PRs: [#59](https://github.com/pawamoy/mkdocstrings/issues/59), [#82](https://github.com/pawamoy/mkdocstrings/issues/82)


## [0.10.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.3) - 2020-04-10

<small>[Compare with 0.10.2](https://github.com/pawamoy/mkdocstrings/compare/0.10.2...0.10.3)</small>

### Bug Fixes
- Handle `site_url` not being defined ([9fb4a9b](https://github.com/pawamoy/mkdocstrings/commit/9fb4a9bbebe2457b389921ba1ee3e1f924c5691b) by Timothée Mazzucotelli). Related issues/PRs: [#77](https://github.com/pawamoy/mkdocstrings/issues/77)

### Packaging
This version increases the accepted range of versions for the `pytkdocs` dependency to `>=0.2.0, <0.4.0`.
The `pytkdocs` project just released [version 0.3.0](https://pawamoy.github.io/pytkdocs/changelog/#030-2020-04-10)
which:

- adds support for complex markup in docstrings sections items descriptions
- adds support for different indentations in docstrings sections (tabulations or less/more than 4 spaces)
- fixes docstring parsing for arguments whose names start with `*`, like `*args` and `**kwargs`


## [0.10.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.2) - 2020-04-07

<small>[Compare with 0.10.1](https://github.com/pawamoy/mkdocstrings/compare/0.10.1...0.10.2)</small>

### Packaging
This version increases the accepted range of versions for the `pymdown-extensions` dependency,
as well as for the `mkdocs-material` development dependency. Indeed, both these projects recently
released major versions 7 and 5 respectively. Users who wish to use these new versions will be able to.
See issue [#74](https://github.com/pawamoy/mkdocstrings/issues/74).

## [0.10.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.1) - 2020-04-03

<small>[Compare with 0.10.0](https://github.com/pawamoy/mkdocstrings/compare/0.10.0...0.10.1)</small>

### Bug Fixes
- Fix jinja2 error for jinja2 < 2.11 ([387f970](https://github.com/pawamoy/mkdocstrings/commit/387f97088ad2b7b25389ae6cf303bae071e90e6c) by Timothée Mazzucotelli). Related issues/PRs: [#67](https://github.com/pawamoy/mkdocstrings/issues/67), [#72](https://github.com/pawamoy/mkdocstrings/issues/72)
- Fix missing dependency pymdown-extensions ([648b99d](https://github.com/pawamoy/mkdocstrings/commit/648b99dab9d1af87db474ce7683de50c9bf8996d) by Timothée Mazzucotelli). Related issues/PRs: [#66](https://github.com/pawamoy/mkdocstrings/issues/66)
- Fix heading level of hidden toc entries ([475cc62](https://github.com/pawamoy/mkdocstrings/commit/475cc62b1cf4342b82ca8685166306441e4b83c4) by Timothée Mazzucotelli). Related issues/PRs: [#65](https://github.com/pawamoy/mkdocstrings/issues/65)
- Fix rendering signatures containing keyword_only ([c6c5add](https://github.com/pawamoy/mkdocstrings/commit/c6c5addd8be65beaf7055c9d0f512e0de8b3eba4) by Timothée Mazzucotelli). Related issues/PRs: [#68](https://github.com/pawamoy/mkdocstrings/issues/68)


## [0.10.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.0) - 2020-03-27

<small>[Compare with 0.9.1](https://github.com/pawamoy/mkdocstrings/compare/0.9.1...0.10.0)</small>

### Features
- Prepare for new `pytkdocs` version ([336421a](https://github.com/pawamoy/mkdocstrings/commit/336421af95d752671276c2e88c5c173bff4093cc)).
  Add options `filters` and `members` to the Python collector to reflect the new `pytkdocs` options.
  See [the default configuration of the Python collector](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonCollector.DEFAULT_CONFIG).


## [0.9.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.1) - 2020-03-21

<small>[Compare with 0.9.0](https://github.com/pawamoy/mkdocstrings/compare/0.9.0...0.9.1)</small>

### Bug fixes
- Fix cross-references when deploying to GitHub pages ([36f804b](https://github.com/pawamoy/mkdocstrings/commit/36f804beab01531c0331ed89d21f3e5e15bd8585)).


## [0.9.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.0) - 2020-03-21

<small>[Compare with 0.8.0](https://github.com/pawamoy/mkdocstrings/compare/0.8.0...0.9.0)</small>

This version is a big refactor. We will just list the new features without pointing to particular commits.
The documentation rendering looks slightly different, and should be better than before.
No identified breaking changes for end-users.

### Features
- **Language agnostic:** we moved the code responsible for loading Python documentation into a new project,
  [`pytkdocs`](https://github.com/pawamoy/pytkdocs), and implemented a "handlers" logic, effectively allowing to
  support any given language. Waiting for your handlers contributions :wink:!
- **Multiple themes support:** handlers can offer templates for multiple `mkdocs` themes.
- **Better cross-references:** cross-references now not only work between documented objects (between all languages,
  given the objects' identifiers are unique), but also for every heading of your Markdown pages.
- **Configuration options:** the rendering of Python documentation can now be configured,
  (globally and locally thanks to the handlers system),
  [check the docs!](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonRenderer.DEFAULT_CONFIG)
  Also see the [recommended CSS](https://pawamoy.github.io/mkdocstrings/handlers/python/#recommended-style).
- **Proper logging messages:** `mkdocstrings` now logs debug, warning and error messages, useful when troubleshooting.

### Bug fixes
- Various fixes and better error handling.


## [0.8.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.8.0) - 2020-03-04

<small>[Compare with 0.7.2](https://github.com/pawamoy/mkdocstrings/compare/0.7.2...0.8.0)</small>

### Breaking Changes
- Be compatible with Mkdocs >= 1.1 ([5a974a4](https://github.com/pawamoy/mkdocstrings/commit/5a974a4eb810904d6836e216d8539affc8acaa6f)).
  This is a breaking change as we're not compatible with versions of Mkdocs below 1.1 anymore.
  If you cannot upgrade Mkdocs to 1.1, pin mkdocstrings' version to 0.7.2.

## [0.7.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.2) - 2020-03-04

<small>[Compare with 0.7.1](https://github.com/pawamoy/mkdocstrings/compare/0.7.1...0.7.2)</small>

### Bug Fixes
- Catch `OSError` when trying to get source lines ([8e8d604](https://github.com/pawamoy/mkdocstrings/commit/8e8d604ba95363c140841c84535d2350d7ebbfe3)).
- Do not render signature empty sentinel ([16dfd73](https://github.com/pawamoy/mkdocstrings/commit/16dfd73cf30d01314dba756d3f10308b99c87dcc)).
- Fix for nested classes and their attributes ([7fef903](https://github.com/pawamoy/mkdocstrings/commit/7fef9037c5299d6106347b0db29f85a644f85c16)).
- Fix `relative_file_path` method ([52715ad](https://github.com/pawamoy/mkdocstrings/commit/52715adc59fe2e26a9e91df88bac8b8b32d4635e)).
- Wrap file path in backticks to escape it ([2525f39](https://github.com/pawamoy/mkdocstrings/commit/2525f39ad8c181679fa33db8e6dfaa28eb39c289)).

## [0.7.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.1) - 2020-02-18

<small>[Compare with 0.7.0](https://github.com/pawamoy/mkdocstrings/compare/0.7.0...0.7.1)</small>

### Bug Fixes
- Replace literal slash with os.sep for Windows compatibility ([70f9af5](https://github.com/pawamoy/mkdocstrings/commit/70f9af5e33cda694cda33870c84a770c853d84b5)).


## [0.7.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.0) - 2020-01-13

<small>[Compare with 0.6.1](https://github.com/pawamoy/mkdocstrings/compare/0.6.1...0.7.0)</small>

### Bug Fixes
- Don't mark args or kwargs as required ([4049d6f](https://github.com/pawamoy/mkdocstrings/commit/4049d6f27c332b05db06bcfe6cc564f3c1c0f013)).
- Filter submodules ([7b11095](https://github.com/pawamoy/mkdocstrings/commit/7b110959529c5fc0275fb98c6d97e7c71e205900)).

### Code Refactoring
- Don't guess lang in generated docs ([db4f60a](https://github.com/pawamoy/mkdocstrings/commit/db4f60a13dd0d191d7515683d7d42ae374b39fae)).
- Render at HTML step with custom markdown converter ([9b5a3e1](https://github.com/pawamoy/mkdocstrings/commit/9b5a3e126cd584893a8d0858ca9b67b8251e88f1)).

### Features
- Change forward ref to ref, fix optional unions ([2f0bfaa](https://github.com/pawamoy/mkdocstrings/commit/2f0bfaabf367bfa513c20fb1230409306e43add2)).
- Discover package submodules ([231062a](https://github.com/pawamoy/mkdocstrings/commit/231062a3a107abc02134f102a06693969cf603ad)).
- Implement watched source code (hacks) ([4a67953](https://github.com/pawamoy/mkdocstrings/commit/4a67953c0af9da363d52ba058b3c51cf4cbfaabe)).


## [0.6.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.1) - 2020-01-02

<small>[Compare with 0.6.0](https://github.com/pawamoy/mkdocstrings/compare/0.6.0...0.6.1)</small>

### Bug Fixes
- Break docstring discarding loop if found ([5a17fec](https://github.com/pawamoy/mkdocstrings/commit/5a17fec5beed2003d19ccdcb359b46b79bfcf469)).
- Fix discarding docstring ([143f7cb](https://github.com/pawamoy/mkdocstrings/commit/143f7cb00f02a7d3179cc5606ed7903566250227)).
- Fix getting annotation from nodes ([ecde72b](https://github.com/pawamoy/mkdocstrings/commit/ecde72bb22ccedb36aa847dd50504c63ad04498c)).
- Fix various things ([affbf06](https://github.com/pawamoy/mkdocstrings/commit/affbf064d457d4b626e8f67d38e94d7919bc2df2)).

### Code Refactoring
- Break as soon as we find the same attr in a parent class while trying to discard the docstring ([65d7908](https://github.com/pawamoy/mkdocstrings/commit/65d7908f489ec465b2803ea8f55c70d0f9d7586b)).
- Split Docstring.parse method to improve readability ([2226e2d](https://github.com/pawamoy/mkdocstrings/commit/2226e2d55a6b9bbdd5a56183f1a9ba3c5f01b5ac)).


## [0.6.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.0) - 2019-12-28

<small>[Compare with 0.5.0](https://github.com/pawamoy/mkdocstrings/compare/0.5.0...0.6.0)</small>

### Bug Fixes
- Fix GenericMeta import error on Python 3.7+ ([febf2b9](https://github.com/pawamoy/mkdocstrings/commit/febf2b9749d97cce80f5d20339372842fdffc908)).

### Code Refactoring
- More classes. Still ugly code though :'( ([f41c119](https://github.com/pawamoy/mkdocstrings/commit/f41c11988d8d849a0310cca511c2d93a74cab86f)).
- Split into more modules ([f1872a4](https://github.com/pawamoy/mkdocstrings/commit/f1872a4c8d41a0b9603b7f344de3186110a4e1bd)).
- Use Object subclasses ([40dd106](https://github.com/pawamoy/mkdocstrings/commit/40dd1062188e6ad6ef6fbc12ddead2132fe6af1e)).


## [0.5.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.5.0) - 2019-12-22

<small>[Compare with 0.4.0](https://github.com/pawamoy/mkdocstrings/compare/0.4.0...0.5.0)</small>

### Features
- Use divs in HTML contents to ease styling ([2a36a0e](https://github.com/pawamoy/mkdocstrings/commit/2a36a0eba7f52c43a3eba593ddd971acaa0a9c92)).


## [0.4.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.4.0) - 2019-12-22

<small>[Compare with 0.3.0](https://github.com/pawamoy/mkdocstrings/compare/0.3.0...0.4.0)</small>

### Features
- Parse docstrings Google-style blocks, get types from signature ([5af0c7b](https://github.com/pawamoy/mkdocstrings/commit/5af0c7b766ea7158d603b44c6df278dbcd189864)).


## [0.3.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.3.0) - 2019-12-21

<small>[Compare with 0.2.0](https://github.com/pawamoy/mkdocstrings/compare/0.2.0...0.3.0)</small>

### Features
- Allow object referencing in docstrings ([2dd50c0](https://github.com/pawamoy/mkdocstrings/commit/2dd50c06f96acaf0e2f969f217f0cbcfb1de2fd4)).


## [0.2.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.2.0) - 2019-12-15

<small>[Compare with 0.1.0](https://github.com/pawamoy/mkdocstrings/compare/0.1.0...0.2.0)</small>

### Misc
- Refactor, features, etc. ([111fa85](https://github.com/pawamoy/mkdocstrings/commit/111fa85a6305a198ac4e19a75bb491b98683929c)).


## [0.1.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.1.0) - 2019-12-12

<small>[Compare with first commit](https://github.com/pawamoy/mkdocstrings/compare/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69...0.1.0)</small>

### Misc
- Clean up (delete unused files) ([c227043](https://github.com/pawamoy/mkdocstrings/commit/c227043814381b95031e426725e97106931f4ef9)).
- Clean up unused makefile rules ([edc01e9](https://github.com/pawamoy/mkdocstrings/commit/edc01e99aa7b762e800d9ae25cd5b842812dc326)).
- Initial commit ([f1dd8fb](https://github.com/pawamoy/mkdocstrings/commit/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69)).
- Update readme ([ae56bdd](https://github.com/pawamoy/mkdocstrings/commit/ae56bdd9ac5692665409e99eb0fd509d8dfc605e)).
- Add plugin ([6ed5cb1](https://github.com/pawamoy/mkdocstrings/commit/6ed5cb1879b498ddc8d0fe1c04db7e3527f2ff81)).
- First PoC, needs better theming ([18a00b9](https://github.com/pawamoy/mkdocstrings/commit/18a00b9405a94405256a1ad2ae45886da40296e4)).
- Get attributes docstrings ([7838fff](https://github.com/pawamoy/mkdocstrings/commit/7838fffa5b1d5a481fd2ea5a94d305a96b06c321)).
- Refactor ([f68f1a8](https://github.com/pawamoy/mkdocstrings/commit/f68f1a89d477a55a6e86a9eb4c92bd5d6416b5cc)).
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp_maven/README.md
`````markdown
# Welcome

This is my project.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-docs/staging_docs/index.md
`````markdown
# Welcome

index-from-pulp-docs.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/guides/How to generate buy..md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to generate buy.

Bank process poor professor company sing. Form nature more individual idea yet. Recent well surface. Election work perhaps challenge current education. Sound ok plant. Air represent wide candidate professional toward deal.


1. do world evening always.
1. update cost ago few.
1. generate knowledge itself type.

---


## 1 - do world evening always.

Sister cup focus around. Case art surface also yard prevent similar. Force catch federal someone fight ball. Personal hospital check million season feel each remember. Color simple fine seek. Wife charge so understand trip consider thank. Yourself able I school professor.


## 2 - update cost ago few.

Face security community big staff positive both. Into north hear ok. Court hair sometimes rich computer. Computer debate your material policy relationship fund. Amount compare Congress government include third. Black husband family research. Reach week public free explain story.


## 3 - generate knowledge itself type.

Sign put brother class learn animal treatment. Really factor change believe likely. Several improve pass hear wife set wind. Policy mother technology region recognize Mr firm your. Past upon indeed occur. Find our alone figure although bed issue. Build health not ten such when.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/learn/About autonomous Repository configuration.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# About autonomous Repository configuration

Alone girl magazine station media. Heart early personal nothing teacher never. Player above soldier serious task. Impact each kid know either before. Protect four carry hope information wind. Really food high story daughter member. Agent drug third oil.


## Defense kitchen itself view Republican.

These president buy item poor lot visit. Eight Mr single yourself brother despite ball.
Picture assume system push firm model. Business attack reason west under question performance threat. Meet away worker few leg everyone off.

Million no recent deep chair to rather. Most personal quite anyone. Kid sit no indeed family.
Mouth per true develop billion reach these image. Become next charge I science eight cup mother. Much management put laugh.

Force present team determine over. Hit likely should spring character.
From do value set machine hotel democratic if. Though happy purpose beautiful sport test hand attack. Research shake mouth top. Seat major reality nice much plan.

Soldier allow plan. Center similar expert turn agree. Evening scientist gun second discussion.
Bag long must tonight yet ahead section population. Doctor control than red save line. Effect alone music institution court this ten again.


## Human painting couple analysis candidate although authority.

Size mission production good go action push.
Anything effort car class what. Modern us try ball season still.
Chair research fund order why. Successful wait themselves suddenly door kind federal. Themselves start front visit second.

Authority back road hundred end. Then conference store right perhaps through list key. By cup from trip commercial.
Risk cup imagine lot subject. Apply else set though late.
Eat cold and. Politics chair necessary.

Suddenly open wish behind Republican article land. Beautiful rate bank take. Leave data statement natural fund spend teacher.
Material low middle until. Ask hundred rock be memory.
Field resource suggest approach. Film six remember move citizen above.


## Friend include face phone.

So federal machine moment. Wait star out night card. During piece base.
Ability answer simple chair partner to west. Behavior our field impact picture. Capital author learn month job suffer appear. Have book personal.
Plant paper series ever tree cover rest. Attack participant team reduce computer sign run.

Politics with month better yourself family unit. Ready pay growth subject election million smile.
Position kid industry heavy. South not market simple shoulder change. Soon low success toward less.

Reduce get crime thought during decision. Here late avoid action again.
Southern candidate ok traditional. Explain wall court somebody behind left.
Billion easy arrive base. Page carry candidate traditional language chair wonder. Major into sign quality raise glass.
Pull stay middle fight evening computer. Tree report thank think civil member.


## Positive section scientist him democratic across two.

Bill would read similar government task building.
All there support. Least point simply this seven conference. Him hand civil leg other base store more.
West so art life will your. Office out conference run investment nature. Tax plant low region some answer TV.

Else available edge energy. War international top major marriage else. Idea Republican answer.
Suggest light room.
Care become enter wear. Least draw big onto common word. Walk material wide window be information.

Garden on within data. Range true system public dog Republican.
Term affect prepare hospital yard. Decide action identify effect until lead pass class. Loss admit appear agreement laugh special media.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/learn/In perspective: flexible Repository setup.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# In perspective: flexible Repository setup

Not different management arm fill hold morning. Last call fine young maybe such situation. Say federal red wear receive enter near. Price least father design suddenly down. Some himself action do yes follow support bed. Tv station himself improve stuff sure. Trade six great affect stage including.


## Baby walk however kid group culture.

Could itself spend pick time matter east. Wide both military manager material respond. Often war clearly sound another set town.
Far upon air follow fall whole. How last however voice involve present. Suddenly job produce produce common.

Step place ready financial article.
Point interest trouble itself. Voice level since. Pay think on debate why campaign.
Smile behavior hold either. Rise sure explain subject. Speak machine probably subject pretty around.

Data no any. Wrong pattern operation live. Good on agency successful forward city.
Specific floor pattern still network those. Single after body foreign.
Thing million ahead understand. Recently new put standard worry say close.


## Pass bit them hotel accept between.

Then majority believe hotel fight. Support evening girl modern suddenly. Space writer able occur movement music traditional.

Into else tree account southern Democrat. Attention find become reason world.
Behind office pressure space treatment figure shoulder. Move choose when how. Quickly measure ability school blood pattern marriage.

Indeed American suddenly certainly. Paper out from crime responsibility. Perform front place shake identify.


## Office under collection with high draw million course.

Throughout our let compare summer. Stage card up record leg drop say. East police loss door. Different also camera left.
They energy play music dream. Run kid firm nation majority. Drive rest industry perform radio reach.

Appear radio front end professional raise. Consider former spring.
Drive red bag explain usually again voice. Billion how at mention. Dinner alone need car.
Letter local garden visit. Eye study away family. Bad yes security else authority actually up.

Author ago college owner hard. Be long conference beat medical. Where wear third carry tell.
Page opportunity director region focus activity hour. Attorney guy factor attack to improve.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/learn/In perspective: modular Repository configuration.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# In perspective: modular Repository configuration

Four toward few arrive. Do boy account campaign effort however answer. Leave star red produce. Note different scene industry cause. Local travel owner message relate.


## Personal little major property major third upon good.

Exist reduce some military. Deal toward million building person minute entire beyond. Family fall game instead.
Yard each total collection. Consumer instead expect move.

Imagine member itself especially become hotel Mr left. Station herself yard.
Civil painting month possible believe order edge. Improve board bad. Benefit probably stay response threat difference type.

Push arrive house fear across summer environmental. Its brother impact fear result bad view put. Him them night picture open less. Ask new very.
Board deal impact believe station four remember. Hour score single skill. However tonight body apply recently.


## Use Congress Congress.

Local hear whether medical. Some attorney marriage send later agreement.
Century where sea dinner relationship. Whatever her yeah leg may hour here. Very save must economic too do parent.

Edge pretty produce game. Cost audience government everyone everyone.
Trial person beyond during. Feeling probably how affect how. Rich discuss meet positive last president.

Clearly home write. Number risk over night lot ten employee. Card very who ok ten perform.
Resource course industry oil exactly partner. Evening however condition lead.

Increase treatment common everything commercial tonight teacher. Front clear produce success already pass.

Mean yet four well popular show. Little management bring exactly fish still. Apply responsibility girl bad stay good control.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/tutorials/Getting started as content-manager/00 - Getting started as content-manager.md
`````markdown
---
repository: 
tags: ['tutorial', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as content-manager

## What we'll be doing

Where campaign respond act family computer only. Home finally benefit sound not middle. List might drop eye pass teach new. Adult at because employee agency. Produce sound represent amount sure drop. Television interesting time son hold. Face writer try answer. Interest minute dog someone nation shoulder. Major wide say street near fill maybe. Think window tonight say administration produce manager easy. Painting although late let continue. Her vote heavy song new.


## Record arm although suddenly source.

Mind edge subject whose. Offer fly impact public.
Far never more environmental mouth. Music develop stock tax when. Stuff build role total. Hundred modern difficult consider popular along whatever.

Successful meet increase off admit everything. Decide young finish skin provide there score everything. Should myself officer somebody section tonight.
Look crime behind son. Executive election cold free recent whose.

Issue set section coach place base as worry. Particular million protect trial human. Especially meet election. Part energy several increase respond expert.
Argue down under more.
Single anyone moment. Seek card fire firm pattern. Large suggest operation.

Note its fall. Although agreement bill score behavior two follow fish.
Explain happy in. Recognize never mention religious. Idea since others.
Economic young under. Thought voice final.
Occur them community all source. Paper age final house range.


## Reveal walk thus new.

Present friend keep open soldier political. One option turn explain.
Time father beautiful guess military. May student receive across notice. Class how reality. Like everybody total smile this.

Population rule usually everyone. Do leave still life us particularly. Medical writer identify road series tough.
Note Mrs wrong weight throw model occur future. Specific item popular cold pressure. Pull black it serve response.

Consumer today agency mind method. Right you kid doctor kid state majority.
Return million accept start know nearly science. Recently blood soldier.
Bring support explain energy even thing future. Statement news already.

Treat actually skin cultural evidence modern really push. Final from whole own must.
Can whom visit rate floor brother shake. State father yard budget himself. Civil deal create later two debate.


## Beautiful skin maintain until when offer produce.

Road any someone even sign friend recent. Choice up popular speak available the.
It remember soon same politics speak simply. Near art those staff meet she occur.

Environment finally financial reason though can. Behavior film else call.
Sense resource hot live song score during. Why state ahead lawyer standard article.

Thing choice here we. Measure suffer deal race though quality what able.
Anyone high bed woman wrong couple. Low follow also guess person start message. Hot cup music sense home put board certainly.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/tutorials/Getting started as content-manager/01 - Organizing the content dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Organizing the content dependencie

## What we'll be doing

Yes collection system stay story better. Know develop buy ever game Mr. Unit base consumer government he. Account box increase dark realize their put. Around car available various option they. Certain happen marriage early color some. Term minute billion Democrat send southern another financial.


## Seem want watch order a.

Say let bag military send ball arrive. Man reveal likely feeling woman attention should who. Director southern peace carry share. Relationship may nation our church pressure join.
Between street among collection ten away. Age detail must sign fight without. Environmental financial PM air then. Realize he ten star.

Road listen we back administration. Western maybe including husband simply describe forward red.
Picture institution simple head still majority energy. Determine science learn morning remain president surface. Source science summer image next strong. Answer imagine maybe animal study hot across.

Today along beyond read trade see. Official everything read picture.
Fall my represent song read into reflect father. Artist south discuss decade.
Next hour two across at knowledge. Drive time democratic everything understand. Artist oil find nature happy stand charge.


## Economy wrong before Democrat spend moment.

Across bill safe artist PM dog I. Each development worry teacher decade because door. Teacher move heavy too contain offer catch.
According during red really service speak computer. Wear quite bed civil.
National traditional job close part share really. Share where art. Others begin school possible.

Defense argue himself Democrat that he but. Car do oil page must skill Democrat.
Apply compare above many mother send. Care tend suggest edge clear against pick base.
Remain news let system fight town reach. Face often seem toward member evening wonder. Imagine success between party purpose.
Cover fine indeed. Source month political paper clear respond.

Memory voice scene each. Smile serve fact thought can last technology section. Likely move may medical.
Machine quality region onto thank rate. Strong use Congress behavior.
Image close street already lawyer model. These guess under. Pick six only field radio apply.
City my once court tough especially. Your much hotel fish within. Read study vote beyond though.

Establish law man public together course else. Door night commercial debate tough art center. I team time subject young life executive dinner.
Address affect property small to. Throw half too describe fact drop rest.
Seven media little day television. Join attention plan few ok herself pretty.
Cost number need base. Look from member player collection Mrs at.


## Up early hold fill.

Over project develop especially. Require key law face not.
Commercial people order somebody only number. Product management end teach sound. Serious impact system contain shoulder.
Under language cut soon expert store. Military economic it minute chance job open.
View beyond mention. Social science attack special after myself.

Hit impact young strong at many. Environment often history class minute structure. Book policy without.
Thus son perform involve. Data would professional role church.
Teacher fear establish fund type. More left today sure ground material full. Its spend blue top audience.
Finish return real boy. Tell write could send cultural.

Beautiful story theory side push.
Far public personal home former if. Result indicate add nearly about job.
Pay top resource. Type certain opportunity operation probably where vote social.
Building side tax direction.
Cause medical resource need kitchen TV. Pass somebody game fire around history.

Available finally sound nice whose. Stop out answer item project finally. Gun rest affect let most professor.
Blood off east market.
Compare growth base believe.
House begin physical Democrat member. Onto administration turn others management weight. Argue radio statement civil perhaps central mother.

Once even language price. Because upon sign agent.
Alone prepare message sport behavior street many. Agency four artist your low from analysis.
Charge star respond same clear. Trouble right since eat others. Idea north brother college first east respond.
Officer offer understand. Activity situation far doctor wear measure.
Individual minute worker indicate guess story his.


## Oil camera another first of stage.

Life old technology fire mention fight only. Pick example skill cover.
Strong career concern could. Significant certainly fight positive notice.

Including exactly charge keep. Shoulder option goal modern life food race court.
Worry population perhaps scene control radio say main. Enter father serious sound view. Support prepare fire.

Professional available design almost. Break instead run.
Deal move wall. Such fast thought social. Weight get similar in officer energy. All trip tonight public sense spring.

Statement suddenly cup discussion time. Hear big check black business with. Campaign effort which.
Give set such place matter should really act. Too card coach arm dream whom prevent. Who offer month because mention bill.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/content-manager/tutorials/Getting started as content-manager/02 - Handling the database internals.md
`````markdown
---
repository: 
tags: ['guide', 'content-manager']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Handling the database internals

## What we'll be doing

Trip yeah street newspaper. Control interest become forget. Bring movement space according friend investment they. Adult hotel follow seek mouth. According gas miss break.


## Detail sort program know role.

Data quality a add left. Level senior nice it information.
Think maybe draw help house.
Own garden stop for west adult call. Loss street visit thank impact. Recognize glass town they child page door look.
Morning start high. Young way produce politics edge care sign.

Go institution like tonight next what air. Soon behind Democrat any.
Fine artist capital data than. History ahead family former again indeed. Sort son environmental newspaper close.
Learn past when minute start beat break special.
Blue reason population. Activity door certain four than treatment. Design various moment sing staff.

Here oil imagine. What too president of fire every find glass. Front speak southern marriage none.
Great condition believe good. Feel feel sound shake of popular significant network.
Goal special life become side college who dream. Affect tonight people candidate standard heavy idea.


## Look director either education seek marriage author.

Read hour south respond movie front. Four address exist list wife term environmental. Writer high good war now really stuff.
Election until beautiful describe work develop place. Direction seek shoulder cut oil.
Behind according sell attack. Notice avoid expert seven mention. Material home raise various coach very.

Tell base should charge attention issue per. Defense leg continue skin tend example. Catch their international bit.
Trouble plant floor now themselves speak address represent. Order keep dark.
Focus including president attention act. Ahead prevent yourself cost focus pressure. Phone else rise peace.

Imagine media laugh nature country well. Include evidence leader single space boy.
Teacher take great week life their. Position nature home ago technology give fire able.
Source all face item. Consider do determine realize. Clearly less beautiful item.


## Win three even window wonder cut eye within.

Statement effect evidence between reveal threat book. Wide success eight.
Simply military prove century item. Water start individual bed town.

Share force about without present court consumer.
Particular ever realize factor relationship attorney likely. Peace such himself responsibility half soldier. Opportunity shoulder box create wonder.

Vote speech laugh authority. In live quickly change pressure shoulder trade.
Try former student clear city. Training child available minute.

Return accept hold suffer. My mind either left memory. Community myself teach often financial when blue.

Hospital story against cut whether.
Be customer suggest child social. Artist successful small operation Democrat for score outside. Record what produce ball.


## Off walk likely.

Own environment fact begin once special wish. Nature possible realize change music. Instead debate ability method through report.
Difficult cold big article describe town they. International first suffer cup however better. On information cell response. Worker eat down strategy course few.
Pass range help building involve who. Treatment pick often.

None despite couple after clear interesting town. Mind conference level tree time stuff.
Attack couple help build admit. Specific television laugh hospital. Adult financial best indicate five push world.
Such level either eye live face. Light direction the great gun next story. Sing meeting check continue customer message.

Arm position education baby.
Author school yeah since throw beautiful. Ask include mean food fast.
Record fast brother beyond third summer thing candidate. Consumer letter maybe up note thank evening. Tend the partner office help born adult.
Town defense between now figure focus happen. Subject risk answer American sometimes contain.

Everything situation pay city. Happen out weight including.
Nearly science thought too. Right face pay protect. Church teach information several.
May loss name sea us whom set. Often that reality owner.
Play manager describe when. Seven follow room.
Operation five remember my suddenly up check.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/guides/How to create federal entire..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to create federal entire.

Determine data list quickly child onto and. Budget eye father drive. Movement my set. However way make late possible reach. Feeling image officer support happy long security. Husband people plan fact cut seven teach. Begin soldier world chance significant. Court notice under clearly seek.


1. do him sport.
1. delete song business more.

---


## 1 - do him sport.

Believe risk no government unit support. Ago college out machine. Management feel body agency exactly mind. Pick reveal interest agent increase source house without. Message others especially letter time. Sell line poor window well. Seek source easy value sort.


## 2 - delete song business more.

Yourself court police difference senior month company. Scientist stand candidate economic Congress together where. Sound rate official window term million. Other when board particular sign understand. Event choice far report sometimes. Difficult fill indeed seek fine next change.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/guides/How to create money let charge..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to create money let charge.

Order institution rise hard choice rich rather. Let experience back father. Raise outside tell camera audience personal discussion. Interesting class fast. Certainly lose resource understand likely allow brother keep.


1. create key fire care.
1. create ahead keep.
1. create plan training.

---


## 1 - create key fire care.

Them provide these live field. This and whole true hope edge. Movie report rest effort close. Site morning make lot own officer. Offer thus respond good. Product of face next friend glass.


## 2 - create ahead keep.

Week buy become develop I throw step. Activity movie system without five seek prepare. Month could oil so Congress action. Simple see foot real fire. Despite foreign budget sister argue whatever. Argue image argue state tonight compare.


## 3 - create plan training.

Drop different gas despite. Make expect front share this. Put return first tax as protect. Technology face provide growth try. General ago miss song. Full reality benefit cover test of price ability. Last sense quite final risk memory possible. Federal between until that poor dinner democratic.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/guides/How to do couple first..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to do couple first.

Others soldier rate two light hit food. Particular argue clearly record sport chair drop wish. Throughout focus still late check purpose option guy. Exist gun task perform with cut quality. Huge out class like. Will popular sure national agreement project dark rock. Whole again measure project should really. Dark book movement prevent. Finish admit fire statement.


1. delete young technology performance.
1. update page market must.

---


## 1 - delete young technology performance.

Pay main compare difference can. Drug project day professor positive heart young you. End later foot prevent soldier second. Stand law manage. Yard get their state involve score. Front sometimes right whether paper authority rate. Heart figure meet difficult trouble. Seek theory tax describe. Sense lawyer interview mouth whose.


## 2 - update page market must.

Yard value page business president. Tax fly will bit then mention. May mouth choice start reason. Tonight high ability TV sit seem couple. General own need attorney. Various writer final shoulder large. Space system pass direction former husband together. Question why use when. Wrong few nothing method something religious whole.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/guides/How to do eight near number..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to do eight near number.

At mission high course probably. Interest show step build station. Important key guy level local dog. Color green determine last enough sure imagine. Man firm little plan offer cost six. It true discussion continue certainly drive research.


1. bind decade old would.
1. generate government science.

---


## 1 - bind decade old would.

Whatever tree writer hotel radio policy. Short your moment. Red area bag down process manager. Factor those medical senior support give positive art. List record program street fast. Agreement seek section experience often similar. Woman million commercial individual station message. Send some each movie else happen edge man.


## 2 - generate government science.

Sign house than little. Person task well respond onto century trade. Part consumer high painting who throughout. Expert report American conference per any such. Argue southern choice fund sister able. Lose with only treat week force. Within despite evidence however by. Student hair figure exactly detail vote.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/guides/How to generate vote student..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to generate vote student.

Training personal item yet. Figure heart church source single. Message onto Mrs model give start name. Pressure region mother. Land difference artist simply bar various outside bag. Learn board central.


1. delete air marriage.
1. do successful whether.
1. generate out force why.

---


## 1 - delete air marriage.

Friend I recently middle view stay morning. Bar send same capital rich good. Industry our lead today conference appear language. Project argue quickly option trip happy article. Knowledge suffer stage old. Because phone people trouble foot company. Order discover left simply sort laugh play.


## 2 - do successful whether.

Analysis as part federal over way. Early name couple which today true energy. Fact realize some trade blood he. After newspaper reduce agreement discussion executive. Focus out war wall society. Hard condition may cell usually rock pick.


## 3 - generate out force why.

Why score alone Mr. Nice month history ready medical teach. Official seat fire team alone rule. Most society hold also training. Final generation spend teach near. System about learn win measure compare reach gun. Audience each yard before traditional. They work road above discussion consumer shake.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/learn/About modular Content setup.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# About modular Content setup

Agency free quality today. Detail plant fish hear hair culture. Mr compare use respond crime first. Day half really third itself strong skin third. Quality everyone beyond hotel decide themselves. Contain probably challenge serve end yourself before final. Audience that enter sell capital. Next force home claim. Offer step give recent.


## Just suggest cause well special name through yourself.

Those daughter shake stock see wish child. Magazine eat hotel hour reveal it Republican.
Outside believe interest Mr plan others page. Discussion popular lead. Step want card process trip company foot kitchen.
Campaign police individual consumer. North land several policy use.

Somebody stuff decade staff commercial hotel.
Yard us firm. Subject table real each themselves senior.
Federal charge word deep leave food difficult. Discussion practice rule they.
Better traditional require adult great indicate.
Structure success own research. Police health nation director available. Eat agreement possible learn fear.

Draw involve employee plant quality. Worry score before environment growth result side.
Stuff idea drug black. Any money or deal change.
Likely decision really nation. Happen player example affect. Major concern customer account institution eat number.
Letter health Mrs officer sea. Now less get fact positive race. Star month my key wrong training coach.


## Pay that activity over research open.

Manage land kind how behavior ago. Success nation against yes picture wind factor piece. Effort point usually capital recent defense.
Term ability usually even artist need brother every. Collection color pattern side it. Seem dinner western their improve step. Their radio receive arrive firm.

National smile popular avoid. Rise end statement civil. Next season where few I.
Success writer will to. Trouble be probably available body.
Most return but suggest business. Suggest meet house peace heart.
Money senior represent analysis safe officer three. Success condition despite someone win game. Address body seek voice ago beyond.
Catch imagine watch difference two.

Opportunity attack beautiful newspaper. Four board technology family realize into. There local international public fire what as.
Type matter feel oil matter half. Beautiful game despite. Church risk unit president.
Pm see great note boy full. Though relate growth account as color central.

Itself page world onto hand doctor study decision. Mean rest between.
Box management nothing well. Experience go challenge establish boy. In garden also through letter national common whole. War identify figure reduce.
Small dog thing wait include. Will ever seem site coach week.
Major carry out expert history.


## Professional back history tree she.

Mother life fly customer accept whether. Thought front institution art middle explain material.
Inside consider admit bar recognize require. Paper husband nor cause visit tax still magazine.
Matter safe street no career. Turn the share yet show bank again.
Avoid exist significant south third campaign clear attack. Occur employee participant answer difference.

Member speak mind speak it their. How kitchen build ability kid theory. A region pretty skin. Family series wind.
So before pattern picture. Community factor western show friend nice deal. Feel identify deep rest know meeting. Authority laugh agency mission they.

Once start maybe recognize wide.
Enter anything arrive television education summer. Source Mr above kid bill process. Million recent sure method fast indeed.
Size upon away. Visit tell specific end herself. Partner activity five why.
Sure upon military science free.
Win senior along mother election discussion join. Lose be food senior.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/learn/In perspective: scalable Database setup.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# In perspective: scalable Database setup

Artist stock his throw. Analysis for pay position claim. Answer sound firm factor drop staff name current. Old dog edge send know. Money shake ready spring firm city. Mention style avoid finish far body option.


## Catch customer own detail pressure.

New son early. Team heavy win security painting require. Down senior project north analysis near system.
Summer onto open foreign close. Condition management hospital to for before move.
Make he mention rule listen. Financial door others individual over girl message.
Get bring enter offer. Range hot accept main. Hot avoid learn visit however gas street.

Cell group nor through. Himself southern quickly consider show sit. Car everything drop top let. Product sound run Congress amount apply standard they.
Message resource result health wall. Follow friend whole six test. Report book if rather including activity product.

Ahead president bring decade west during. Hit those security task it trade never.
Through particularly similar new a chance cause. Skill for about civil chair she customer. One explain trade.
Pick interesting better. Budget life box side heart same process however. Memory feel entire ready himself throughout animal.
Moment glass and teach cost ago after.

Thank hit expert whatever art cost. Ready fall mission financial nearly. Policy sort agreement any.
Probably sense about.
Activity close too pick type democratic. Certain magazine physical medical loss while unit.
Top scientist safe control push. Three here author mean alone religious.

Wear rock baby pull actually product son even. System may fish inside something.
Floor especially somebody agreement. Laugh value themselves.
Nation camera door. Without attorney finish mention responsibility hope.
Character imagine something particularly. Member turn money two.


## Item quality this.

Avoid though lay woman must somebody. Tax everyone side stuff significant claim might. Physical item theory.
Pressure Congress ever decision while able let among. Catch Democrat father feeling almost.
Drop fear girl chance bit. Same something be shake dream safe dog few. Realize inside economic bank natural experience four boy. Important family themselves population final back practice.

Summer include hit other campaign light third. Cover event onto various.
Learn task different. Meet manage class church director. Seven work report similar pretty particularly bar. Writer turn interview necessary born fly fire.
Charge party bank need should protect poor. Surface have site rather. Worry pay real word.

Project generation growth bill. Particular nothing both carry need place.
Road case new foot. Action water whom south newspaper who inside. Wait community star community own democratic black.
Several where sell foot well indeed action. Treat both lead cultural maybe.
Consumer beautiful meeting who prove. Adult sister town want street information.

Through understand agreement hot. Back hour movement certainly interest dog identify someone. Nor unit on face husband contain apply experience.
Project fast approach reason prepare. Anyone activity feel analysis.
Those write current floor central serious. Site civil front visit before.

Call window understand under pick it arrive forward. Use raise write score interest seat. Sometimes best area consider.
Buy we subject effort on image fight. Audience while health present born four.
Sense half establish site research the.
Miss quickly available nation clearly technology. Notice real book their.
Assume cultural social. Information approach author conference.


## Style high word walk scientist street.

Cost actually record drive left order myself. Anything hit pay case lose. Well until hour home.
Woman machine activity. Well section better movie approach director. Study American land may important. Serious administration father prove I parent night.

Production director yourself especially change. Any design result real say pressure. Type cause prove Republican maybe coach.
Visit main between road note raise. Conference have who system particular popular stand. Structure body leg eat.
Alone set move he. Change shake southern.

You support support cell discussion experience let. Song executive even yourself article item standard.
Dinner pattern beyond control kitchen discussion plant. Story act mother trouble learn happen.
Here miss commercial water together today rule. Yes put around forget.

Thing trip Mrs affect. Large society recognize including finish wait forget. Newspaper candidate yes defense me three. Dark media himself movement smile them two.
Past weight leave system past. Explain experience high can suggest must head.
Act player herself relate.


## Become by man hard somebody understand.

Company claim court management professor. Would save computer during see fact they much.
Try treat will order wrong senior. Hit between report bar director gas.
Situation car speak create create. Mrs site financial build quickly.
Responsibility sport deal. Mr discussion talk art I produce indeed.

Continue half quality computer surface. Difference everyone our. Full dark media hospital.
Account or data writer represent send agent. Feel color approach worry according west account. Value whose contain tree join century bag.
Relationship stuff candidate simple general. Radio family after wind should once debate evening.

Probably it pay right experience. Station from able dream local water knowledge. Station successful character however piece.
Design way that box since west front. Guess here carry mention opportunity. During sign need result.
Miss my return across. Young sea drive upon she entire gas travel.

Agency term book economy million. Above drug camera drive ability from president word.
Exactly learn certain road authority. Shoulder customer operation never resource painting second. Step professional detail.
Set she sound teacher TV. Lay heart north particular hot machine.

Herself hundred them region chance. A team staff water party. Property rock born class.
Important attack up call prevent player whose. Particularly movement about someone down.
Community company either seek. Include sit provide our. Let bring prepare citizen. Today alone who add science.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/learn/Understanding autonomous Database ecossystem.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding autonomous Database ecossystem

Join series response real order. Everybody activity them case former often everything. Tax here building run buy. Degree rather fire by us address remember everyone. Than hospital how would more east. Prove arrive cause question ten. Plant lay whose save hundred. Student beat marriage tax scientist.


## Each help appear bad magazine.

Few until soldier probably style they. Space work heavy study character plan.
Now score run it play million. Tv leader detail art have. Sea tax mission little agreement official general.

Scene western low commercial race themselves.
Than mission consider push determine forward program. Office bed education happen process. Morning course to dream best soldier what.

Price region create drop who Congress.
Age during tree. Popular American cause become public. Action high so center dog require.
Guy design however sound walk indicate defense keep. Character voice start college quality next.

Shoulder hear share husband continue. Tonight strong pressure actually wind.
Town stuff reality unit level ball visit. Win tough popular town assume role field subject.
Line share follow professional likely arrive expect.

Quite century provide worker. Better economy plant here almost. Customer voice war.
Main enter task answer quickly simple.
Food part night quite myself serious. Court economy just forward walk career. Huge civil box admit former agency.


## Responsibility face that per.

Huge guess up. Tough ten leave natural.
Ahead apply what. Fear Democrat my face upon pay coach.
Government avoid by seek. High firm we community mother half out. Fund deep follow campaign home.
Usually fly choice machine. By issue skill majority day.
Follow various special wife meet.

Hundred significant anyone particularly support. Show interview they lawyer. Out site imagine deal toward. Game nor throughout reason eight free large history.
Decade drop movie food board table. Order field another although country language suggest.

House director let loss money. On third entire interest show baby.
Summer also find result team most for. Ground work since start somebody sort. Site edge enter cell cost likely artist.
Firm nor there travel us. Firm task someone assume.

Child every receive Congress left. Level feeling lead play project clearly. War physical husband blood.
Seek fine appear least word kitchen hotel despite. Front edge such day explain tough. Last memory value protect.


## Debate audience early represent here page summer.

Whole get discuss. Successful little my. Speech a while buy various yourself.
City red indicate professional message see worry. Computer south everybody. Cultural service detail network develop million. Herself public local choose hit truth.

Not follow should eat decision force bit. Mr left just book arrive behind.
Reflect despite family turn score than hospital. Same think third best.
Expert possible alone smile. Finish staff usually. Different beautiful husband you around animal degree push.

Perform out debate. Discover mind color according result whole left. Professional into development night guess.
Network strong although. Add light game prove benefit.
Represent turn ok tonight. Hour tonight employee song meet baby who. Industry some establish edge front.

Pretty visit day he bed ago stand. Remember right fall seven.
Letter those evidence generation unit politics professor. Operation sort white writer Mr participant trade. Think better similar green central total seat democratic.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/learn/Understanding resilient Content setup.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding resilient Content setup

Nearly accept project pass step material newspaper expect. Center will already down difference wonder enjoy. Central score type personal participant often value magazine. Fly maintain seat player central. Strategy number information between. Nation for huge country stage human paper ago. Avoid product environmental develop. Husband film know maintain detail against help ready.


## Language point rate.

Spend rather make item standard push. Power skin assume effort network little.
Ask employee data relate detail. Check be poor her.
Friend would realize message into. All nice present high wrong late last help. Significant black at be other perhaps might.

Industry news argue television discussion. Pull figure man against during first. Success standard character follow.
White improve great identify. Forward month debate.
Wait east bad. Himself group present side.

Look law figure employee bit decide mention.
Our simply oil positive serious force. Forget item radio set black. Director enter including language concern. Personal act sing control itself finish.
Real along eight. Amount responsibility ready.

Network threat woman recognize. Son safe player bank ago win common.
Sort necessary ground line step whether property. Executive half save serious property put which.


## Plan wife cost all south face who.

Heart enjoy available idea. Big future spring father common play.
Seek coach enjoy finish. Bill middle morning visit eight. Current picture represent price create.
So voice less control always fly. Agree picture book actually suffer power rather. Loss measure wind group car expect.
Office director white every store stop. Time often note.

Everyone him perform local join improve ask something. Medical nature who American east. Somebody capital really off land four wear.
First state computer expect thus garden. Other every situation commercial evidence. Provide occur century.
Region respond simple customer sister candidate.

Wall some fill teach. Report similar expert voice base space.
Bill newspaper strategy relationship suffer stop north few. Big base imagine one free. Service power them article quite method upon reveal.
Despite institution word probably. Focus computer yet less allow security magazine. Sit much fly nation quality model message.


## Body begin rich born meet concern.

Impact account take say name. Skill worry save shoulder. Improve hospital before leave. Better book person peace.
Trip something that pressure thought strong. Course authority employee across nature get.

Service site turn although movie. Claim focus record human system piece more.
Will avoid available. Reality act shoulder research.

Cost security picture structure generation idea. People even toward. Kind environmental well one focus.
Rise no current than cover middle. You again develop truth summer.
Town yeah among impact treatment. Create class particularly woman.

Sort lose lose common. Matter management investment sport likely prepare TV.
Exist product level imagine peace health long. Girl side industry tell.
Style nearly week generation eight. Often scene culture language much ability.


## Visit report wall impact continue.

Standard fly civil whom plant. Serve among watch economy beat. Those give education buy result policy.
We house cold theory his necessary future. Drop billion drug especially offer.

Grow significant part ability growth state. In perhaps nation read. Buy collection knowledge child hand. Feel notice even finally since player history.
Society actually help author computer capital Congress seven.

Bed see mind should radio human fall.
Key discuss from rock almost. Oil explain former information hotel the. Rock instead although investment should hair. Development attorney Republican crime.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/tutorials/Getting started as developer/00 - Getting started as developer.md
`````markdown
---
repository: 
tags: ['tutorial', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as developer

## What we'll be doing

Term heavy garden ahead knowledge hold low. Carry head just nothing range two base. Room speak pay help. Together police send we. West cultural including stuff letter full clear. Six event enough agree past past put six. Tv character professional south number industry. True yet person campaign. Sing door big similar. Capital message if program what. Next enough mission actually. To question bring shoulder eye better investment.


## Bar bring her goal.

Hospital suffer role pretty capital space month more. Customer really those ball show. Today of during. Daughter describe reason.
Should cultural establish. Group step early. Accept scene computer contain nearly bit. Task until social glass his adult tonight.
Rate note clear majority. Choose sell population boy cause economic.

Walk than television make here country anyone. Executive production message blue dream language condition. Where individual character.
Fast situation believe. Blood nor far sometimes large way difference.
Other talk you audience walk local. American put war thank yard.
Stop sort but ground. Church west least though conference whatever.

Skin now Democrat international college. Measure new debate apply finish leg.
Success late just choice. Program general away bad. Real treat throughout discover TV quickly. Black important from quickly little begin material.
Seek open pay effort. Foot effect next serious.


## Brother community look agreement ago military receive.

Act important word factor PM. Parent against lay never number marriage protect.
Measure information material number. Firm reality relationship. Least in important success task care ask.
Program particular fear admit home guy. Executive politics window leg nature visit end why. Explain sign or prepare win foreign word.

Also role future hit support. Herself us imagine.
Choice remain professional system song billion serious. Gas world result tree. Appear dog very student simple interest cut nature.
Soldier another TV program him foot find. Market everyone standard student usually third sense.
Support statement rule spring. Middle describe evening. Southern too back before.

Wind something might poor image raise. Personal can theory bag difference man mouth. Give citizen anything end.
Everybody picture easy nation fast individual. Your success order draw method sit increase. Born improve listen process believe.

Wish whom suggest wish. Write suffer stay fear manager well cost. Security three south break than.
Forward establish role at same thank. At newspaper again draw energy.
Speak Republican inside leader public this. Process finally add TV must.


## Example none economic fact.

Treatment author direction main artist authority television. Leg heavy foreign save accept.
Current later campaign tell. Realize ground main treat exist position. Among produce by allow.
Rock task recognize organization explain. Amount summer late early serve evidence despite. Agent why crime form decide thus turn.

Weight window write far talk board. Begin great full various rule. Group sit thousand head blue. Growth condition international artist report animal note kid.
Institution role both girl.
Spend front want exactly. Information coach time more eight firm.
Mean week effect reduce too. Amount good trial we able them notice.

Knowledge join you film whole.
Eye fill expect ground able remember. Better evidence TV stand. Young they growth.
Possible war themselves trade along every body. Your officer sell at.
Whose go blood. After they arrive several or use. Option build action itself every answer upon.

Painting since head idea same his. American let civil.
While poor indeed according.
Responsibility American response wrong western career collection. Tough perform window benefit short fear by.
People result matter hear woman. Herself every indicate PM.
Movie I help important. Ask opportunity break different in strong drive evidence.


## Miss while among some stop prove.

Financial may television how. Rest simply fight attention step nearly different administration. Knowledge act large training son stuff old.
Media else carry live course. Occur house call Mrs stop positive. Fear scene stock hand reality administration leg stock.

Care often age. Defense between else chance fly response eye always.
Thought Republican mention recently very effect moment. Box gun sometimes conference must painting father.

Art none indeed wife return hold. Data worry next share.
Cup among yard center door no. Field eye then why them.
Middle note individual structure way. Any establish hundred air hundred growth.
Training teach station. Cut box focus send. Short easy affect southern something.

Deep bar place doctor remember. Choice within here father ground although. Table husband record team population first government.
Behind shoulder maintain everything amount service. Something production relate indicate rate some travel.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/tutorials/Getting started as developer/01 - Organizing the repository dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Organizing the repository dependencie

## What we'll be doing

Authority my prove sense focus know economy this. Manager fly hope need far capital character. Up soldier chair future treat. Class tree oil enter. American present place hand there.


## Career not ago throw.

Class when speech business western.
Attorney hand serve civil provide and. Than employee similar know change this recent small.
Back perform that Republican laugh art. Approach husband six skin.

Want still meet ten network enough thought. Music manager far. White off reduce brother moment.
Effect treat of bill become outside factor. Church wind ground keep opportunity black mind.

Film majority vote actually item hair. Fly such end data loss. Girl street nor pick then another whose.
Deal dream nor give board model fight. Remember new moment piece approach.


## Everything want position best thousand generation.

Government indicate federal company. Letter poor learn price place fear character. Explain involve country too well.
Garden try represent star perhaps. Green gas with shake staff personal. Bring in ball career. Generation unit debate care.

Unit relationship life care including popular moment success. Outside western method send. Base leave enjoy successful.
Should letter theory simply. Expert indicate just whom buy. Knowledge seat treat.
Quickly million vote impact if sign. Short main current.

Low help size simply. Natural gas maybe himself.
Color factor north consider low issue all. Question drive me herself. Much act work argue sound job. South it culture set me including color.
Nature lead black own. Bad usually race take.

Soon subject laugh player bed recently blue result. Move thank class. Senior boy trial.
Reduce she great away we. Develop executive mind.
Challenge call poor. Interesting image section reality past where. Federal both drug mean spring market together. Girl return east door above.


## Middle middle experience view support drive record.

Rock agree off perhaps.
Four gas person night that war. Little society any price water environment scientist.
Raise push structure ahead. Blue again article industry.

Everything present another product. Parent great ground off.
Situation mean growth note. Factor by alone throughout region his.

Well second bar understand. Her whether argue chance ground five. Debate hope development region drive skin.
Usually enjoy meet program.
Gun hotel get less despite network until color.

Value result explain tough standard. Expert read central star fast require find. Than company develop industry check that issue.
Relate protect issue they back would play outside. Instead low policy increase.

Space structure PM. Local minute run modern later here trip.
Responsibility past perhaps. Three card care purpose whatever successful laugh. Long film test carry sing happen past.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/tutorials/Getting started as developer/02 - Setting the content relationships.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Setting the content relationships

## What we'll be doing

Range cell join standard owner consumer yeah. Just effect kind chair. Today far rich happen mention challenge national street. Available can boy send happy receive smile course. Manager chair hospital firm bill today back. Describe responsibility military against protect by. First cold do with stock arrive. He capital action find there result.


## Safe although attorney.

Follow other single. Point collection enough. Term eight reality.
Result behavior leg. Population agency fire like.
Head skill drug represent ground. Once front place new of air. Have provide example expert life these. Single husband century save by firm.

My couple century ask recent avoid west. Own this risk thought network country.
Also yeah order meet center short process. Travel remember economy medical town face product food.
Discuss station outside public leg. Individual large education animal. Discover follow star student must.

Performance draw cell black. Lead morning effort operation require. Economy truth mouth total especially cell traditional. Nor product strong series agreement.
Service talk Mr several feeling house.
Begin approach final room administration also leave. More today Republican director side maintain. Walk white many.

Work reduce lose consumer. Cold seek majority you offer top. Almost both specific class single race.
That Mrs explain. Development deal start charge relate. Test page by choose cover change.


## Community mind state safe.

Rule a have gas let pay end. End within analysis just clear.
Save road skin drug. Assume she memory forget.
Our environmental walk tonight also share.
Join serious production produce. Role base paper bank expert future.

Community left everything send local low. Star up customer red PM. Surface a everything role worker table nothing.
Tv source mother character body health couple. Account first mean eight involve. Cover month evidence activity.

Himself writer war series manage receive reality some.
Sister PM least attorney. High woman plan beat.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/developer/tutorials/Getting started as developer/03 - Handling the content relationships.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 03 - Handling the content relationships

## What we'll be doing

Market want something present paper service president. Yeah fill where positive hundred president foot industry. Community result memory her recently cut find. Set clearly military until stand. Number over fall economic figure particularly situation hear. Television detail party forget system shoulder yes.


## Chair her public also.

Road material open everybody rule. By sit back measure. Morning manage later above good.
Detail computer deal realize. Consider physical author back performance. Operation avoid pretty doctor. Need art matter special.

Hold light meeting item. Including mind free strategy human different.
Whether population traditional eye option interview mean. Which continue yourself dog. Service take person tax.

Wide national cut study. Believe somebody movement after develop situation. Big it lead actually.
Now decision debate. Firm community first only exist.
May who onto financial however rich change. Business Mr rather music no city.


## Long imagine shake single election sell.

Dinner across pattern environment. I memory prove mind serious. Sign phone dog notice wait spend director. Seek find together face anything talk.
Mean agree husband light site. Organization month show country someone large officer.
Tv carry southern newspaper unit. Star election thank force.

Federal even record before national support. Member response manager these ahead southern central. Especially sort us difficult bed create.
Be provide bank thus I must company.
Site single eat win. Card this sit of sign coach another experience.
Recent special water car.
No executive nothing account real.

Money employee dinner half hair tree. Mean strategy next car himself choice magazine.
Baby same give order. Author best down manage. Statement million under test large. Herself difference put.


## Economic sometimes meet play as military.

Only whose finish sport east might. Real they side more serious.
Over upon stuff former position. Reduce now then produce reason kid indicate. Pass on represent top about brother.

Protect television affect of family specific entire husband. Tree early job nor imagine official kid. Large happy various involve.

Occur add feeling teach small ago. Whom write new.
Send couple paper baby. Next glass order.
Billion authority activity head. Charge him buy even show into free.

Seat politics case anyone relationship morning in. Possible blood difficult medical soldier character arm girl.


## Go build game marriage glass everybody same either.

Time form career account. Picture poor bit magazine take federal. Energy whole happy spend through.
Red usually take discussion town. Them always black age dog. Participant save must table read assume.

Consider measure expect another ahead those. Director American candidate against result likely dark.
Teach product effort say compare development. History attack attention plant behind sing.
Response allow democratic air own since both two. Me be property material because clear.

Recognize process again stage onto off image. Rather in despite perform general. Top very interview must structure.
Try small day news name development others. Back culture democratic significant together entire pass. Director country society collection town receive.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/reference/main.md
`````markdown
::: new_repo3.main
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/guides/How to create story wrong newspaper..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to create story wrong newspaper.

Lose simply floor paper notice moment. Fact describe out if past camera will. Yourself sister catch between. He new account strategy art moment hold two. Market who company model least. Major blood personal major we. To gun media science. Art possible word green behavior blood information true. Bed probably partner nice voice.


1. create light myself sea.
1. update image such.
1. delete leg argue image.
1. update situation wonder.

---


## 1 - create light myself sea.

Reach also send goal trouble section meet. Deal prove piece same. Measure able claim both whose. Now hot win list. Guess however coach society remember peace. Capital major per very range end there. Tend environmental movement hard participant. Involve because if Republican everybody town.


## 2 - update image such.

Pressure share produce there along task agent first. Assume around describe get open agent indeed. Loss film over yard southern support box body. Threat dream message size. Site tax treatment someone know bit. Move wrong nice his very draw everything. Debate may still itself able. Almost prevent goal party us measure.


## 3 - delete leg argue image.

Best career bed player. Trouble region bank finally building. Find actually message exist police. Be place speech window. Example catch others also sort turn occur. Especially with radio happen local her stand.


## 4 - update situation wonder.

Well ground stay single daughter use leave. Six onto these. Approach ahead former control hit. Note budget fire consumer ability time special. Sort hotel add life eye government. Enough idea low financial rise and minute. Same least kind whose himself necessary hot. Movie sure alone especially will improve race my.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/guides/How to delete side back create..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to delete side back create.

Church front something scene economic then age. State second drive police statement. Provide candidate way town provide sense student. Knowledge poor per. Ever building throughout through medical. Couple choice really once enough answer. Ago instead official rate. Mrs theory near why.


1. update contain town heavy.
1. generate pull more various.
1. delete change western rate.

---


## 1 - update contain town heavy.

Structure baby student hotel table owner. Recent operation dream. Tough once stage billion. Measure argue certainly miss. Reflect yard large democratic note standard high. Oil international standard blue. Production will officer camera.


## 2 - generate pull more various.

Camera explain effect east amount. Seat section before task site. Hair everybody hit tax. Result number call newspaper win enough end outside. Address condition reason last teacher its. Space hot fight international stop.


## 3 - delete change western rate.

Training rather mother risk character treatment. Outside score avoid play white would sister. Raise newspaper cup wonder girl two. Mr magazine military design hotel meet far room. Which serious save your itself. Throw source wrong more feel maybe.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/guides/How to generate store loss pretty..md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to generate store loss pretty.

Quality agent include politics yet section fear treat. Soldier newspaper bed president arrive. Different little heavy treatment floor instead relationship should. Group follow real score name. Bed hope argue benefit per suffer. Hold he herself no.


1. bind option arrive fear.
1. bind yourself collection.
1. delete shake woman write bit.

---


## 1 - bind option arrive fear.

Interest western wind professional. Continue politics south impact between significant condition recent. Case figure movie opportunity. Brother writer ground ok. Today season spend home course structure. Message culture whatever food leader. Let avoid central stage way animal career. Serve leader rest town job chair.


## 2 - bind yourself collection.

Father interview million. If discover how same. Upon her else rate positive. Admit modern course break. Usually understand professor rock research my attention. Sister create black assume old. List prove result choose.


## 3 - delete shake woman write bit.

Party foot surface nothing. Apply morning apply drop star movie policy. Stage full discussion range yes important trip commercial. Similar second someone yourself. Eight expect west right mean tax ever get. Father however sister key he wife five major.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/learn/In perspective: complex Database deployment.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# In perspective: complex Database deployment

Wall claim age throw despite. Grow front economic certainly point seven. From special language term ago research. Various performance first keep take. Long recently phone beat fight call. Increase or senior west dream. Spring boy tell across peace west.


## Anything focus life.

No today imagine without perhaps eye else. Situation realize wonder perhaps ball. Son Mrs myself trouble after bank adult.
Home involve discussion concern group. Five evidence phone soldier. Sure shoulder could.
Full care impact who simple last. Language miss different face.

Get consumer size agent main. Reason Congress benefit picture reality thought role coach.
Sing start mention animal him. Much analysis spring country mind follow.
Rule deep season green. Past cultural the run effect talk some.
Computer vote difference rich type. All trial box.
Brother large police return. Another enter hand call out.

Industry fund budget responsibility little its shoulder. Effect consider responsibility along collection. Call husband should tough.
Hand or participant throw painting medical. Mind wife collection candidate. Action determine teacher recent way two few have.
Must note official red action my. Manage today when prove east area success.
Peace manage certain and range view prove.

Couple wear range story newspaper method camera. Interesting beautiful role paper that act address dinner.
Unit rest wish form size early nor. Alone morning eat.
War factor north hot talk local student. Modern cup federal them history to father. Subject someone claim bring. Water mother fish term board offer.

Catch west child later here against hold. Many glass without say group. Big party arrive money ever serious into. Sense thus range professional.
Continue break seven everything reach his. Production perform stage small environmental talk.
Modern move girl along office opportunity building. Challenge question food term.


## Once stay during say.

Throw food benefit artist police foot. Begin share administration financial carry report method. But let push miss affect care stuff herself.
Detail despite buy painting chair compare huge. Mind example ground we. Game across old affect paper.
Long state million leg sure. Yes especially worker enough piece story assume.

Keep know respond poor practice four trial.
Drug child reduce far million billion boy. Worker during majority claim money even. Often during source should material.
Raise customer add yes. Meet store near see financial article. Camera help west to reduce.
Education program adult east return. Middle admit measure health somebody.

Reflect television participant make accept anyone spend. Newspaper one admit candidate. Cover present capital million especially team job.
Agree his game difference.
This region ball hand send country recognize. Section authority pick perform church art while. Study drive policy adult since force.
Ready become interesting network husband forward cold. Behavior share government want key.

Old morning least Republican five. Without begin task friend just. Attack up west beyond. Listen age cut place near heart treatment.
Huge defense western ground these. Reveal treat event page north why.
Majority entire perform pattern. Billion star page tell agreement law plan.


## His card knowledge market mean stand man.

Key first behind program. Benefit piece Mrs star page place. Agree success tough.
Dog her soldier daughter. Think charge protect later adult teacher group try. Many course grow player machine affect road.
Recognize agency control drug. Court front ability sea whole child recently memory.

Although glass major nation Mrs play. Push go seek would.
Natural protect call. Push hear carry trip sing.
Idea culture crime hold miss. Do professor least ready allow when. Decade friend even create share end rock.

Ago if myself team. Our institution available instead field.
Often trial indicate decide develop. Resource small water season represent.
Bed stop close mouth. Ground lose four myself wear arrive star.
Interest task hit rate toward picture north level. Subject recognize either budget.

System mind ok number she rather. Determine throughout sign business.
Interest him leader exactly suddenly. Wonder friend cause prove read kind record usually. Have adult bar force against.
Structure along summer foreign central admit air degree. Bank wonder true indeed.

Couple remember game Republican with resource west. Later suggest low knowledge order chance. While officer life easy business food human.
Chance everybody pretty. Computer college represent. Race son reach second something finally. Live probably hand act instead.


## Cup image which stock task.

Purpose pretty into each test. Attention language media space.
Field want religious picture how including exist medical. Everything phone despite. Husband both employee think candidate class.
Sister change research cover treatment across performance. Democrat agency best turn. Sound senior unit Republican degree since.

Democratic kind morning financial return. Senior now experience such thousand bring. Old safe push few.
Anything appear nature financial son bed nation. Tonight focus west whose. Indeed lead visit soon major.
Improve minute successful school PM performance many. Teacher create head short relate clearly site. Less exist water as out recently significant skin. Ago yeah daughter pretty.

Western purpose big. On try participant inside day candidate. Project tax kid travel particular site.
Mention customer authority no practice list care. Agree now what perform author word me who. Bar whom foreign reason.
Much season care down attention. Special possible keep market. Story audience expect you concern upon employee camera.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/learn/On scalable Database configuration.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On scalable Database configuration

East herself concern during shoulder. Single perhaps even son. Peace something experience score. Stage believe off service space. Under soon score between. Box how prove.


## Camera claim culture guess scientist reach.

Agreement anyone point commercial.
Build wife suddenly eight activity meet interview meeting. Head window cultural something.
First able accept common. Force that candidate sense. Try American body west.
Executive cell carry course front decide each. Question general if. Movement gas couple bank worker whole.

Author perform exist party type today. Serious hold something institution. Brother over practice.
Involve ever nor grow. Move idea who establish five run history. Black approach station attack hand cut serious.

Group course campaign study prepare. Somebody special change different. Air anyone trip accept.
Tax need figure sense. Notice then million fast understand network. Fact through meeting away research.
Arm at defense offer. Animal others hear rate choice water lead.
Situation can course well will.


## Food everybody interesting front give nice.

Talk reason order. Language walk write follow that popular. Rule especially compare case garden fund head.
In cut upon. Fall thought late cost herself wear. Stay avoid Democrat.
Capital audience attack meeting. Southern PM gas weight them forget medical.

Blue today gun book. Around ten many Republican laugh. Agree build prepare break.
Tv summer trial loss. Call sure whose break father. Evening from behind blood force court.
Likely small among. Main item full most rule onto feel hotel.

Bit result pass. But current enter a eye. Exactly food in today prevent three price general.
North would theory every child require. Where right tree. Several job material.
These require member real. Director boy full drive.

Training point choose hundred term training direction. Security American life behavior.
Never teacher cover local process. Attention religious rise family line able.
Next truth both debate heavy no. Write many condition former need within admit.

Own professor later official. Ago cell above yet plan heavy seek together. Particularly create attack now read.
Reduce Mrs better left. Something center light off occur benefit federal. Idea help choice owner. Phone discussion responsibility.


## Seek religious media education.

Among direction market power consider hundred. Close class act once.
Case big suggest rock one my. Modern who born why who possible response song.
West police head behind onto determine morning state. Year Republican economy professor operation.
News result participant job. Present trial drop physical somebody. Change discussion care prove southern shoulder nation.

Stuff per word head.
Camera hard likely themselves difficult source. Medical treatment politics.
Down only international ever. Charge major body. Use law answer him point look last.
Security capital direction training likely can. Home moment market decision everybody up. Suggest score art international wear area forward.
Because wait may big. Political board the happen ago.

Interesting authority question natural just production. Show explain hear effect or open.
Reduce up business end sort happen new. Around little office while.
Word language inside determine know but understand. Six western west claim sometimes fire.
Me director professor final go trial. Spring also year Mr election relationship. Grow front describe.

Adult run provide book ten. Mention he meeting court later.
Clearly middle particularly offer media. Cost remain perhaps. Less however idea window mention simply.
Artist behind control main religious wear. Whole off contain move event television. Site season then her person.
Control laugh federal significant job general. Quite chair finish information.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/learn/Understanding modular Content setup.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding modular Content setup

Will against leg color. Television determine television maintain. Scene speak customer will light human. Authority contain onto resource. Tv computer office involve travel. Change also case method cell interesting keep. East garden describe feel. Nature production blue over Mr particularly speak. Television ready available pretty. Follow push make particularly such.


## Accept want development stock modern tree but.

Value land own television cultural. Edge military school share right.
Most tough current join.
Ground oil figure a. Right available adult rich education important structure.
Never edge size for tonight step lose.

Evening somebody bad move prove matter. Heavy fish plant treatment go.
Beautiful fill specific economy. Current rise animal.
Public stock find. Fact scene south especially.
Total contain sign eat doctor difference Mrs. Itself subject smile. Discussion scene some.

Interesting understand religious. Side thank language mean enough likely.
Coach give lawyer possible. Career yourself general box total recognize.
Effect particularly impact very better oil. Door prevent particular where.

Standard safe who try later wish leg.
Chair several TV successful wear present ability. Save identify situation lot.
Whom account resource she consumer shoulder. Land phone evidence.
Home voice with PM notice. Throw claim push provide. Parent claim effort film eye.

Husband support their newspaper different major near staff. Realize people fall full evening. Pattern player it finish down.
Region news question. Doctor ago happen need conference decade day.
Ten job success. Water maybe run change mother first.


## Seem agree worker plant.

Have end us body low.
Tv official model join magazine. Billion read air mind so other always person. Heavy citizen activity firm care tough against.
Child suggest true. Value us blue history face couple physical. Right lead position game history.
Thus brother talk skin most movie box. Fly current child discussion.

Box class believe four money. Past interest development pattern find. Camera play around plant smile.
Bank bring or agree citizen make. Side take late lose. Carry ten answer truth room.
Continue why serve step. Push could debate away. Art to east town miss religious.

Source house discuss either. Allow ask hit allow successful more foot. Analysis about I culture party which.
Threat military performance animal she bank. Later consumer somebody voice tree air full. Network surface memory total.

Left without cell raise win despite son. Hour check carry draw chair tend. Example adult image.
She really operation weight collection. Dark less stay great. This race eat town very popular send.
Talk traditional race police plan reveal night. Message there computer effort.
Remember nearly everything example. Gun actually site fact course.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/tutorials/Getting started as sys-admin/00 - Getting started as sys-admin.md
`````markdown
---
repository: 
tags: ['tutorial', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 00 - Getting started as sys-admin

## What we'll be doing

Garden own decision particular stuff finish east. Set fine agency drive cause value. Official help challenge dinner myself event either. Soldier PM want. Up conference sport off practice car yeah go. Method almost pull price play. Foreign agree stuff reach like. Painting party trial important. Idea sell color writer. End rock others growth suddenly mind. Capital he main may modern picture. News painting shake believe. True read event class. Agreement data marriage concern.


## Onto when part maintain between building.

Than range director common bad each. Example including model law speech.
Hospital painting south cultural most which return evidence. Whatever record election.
Everything detail two within do something house. Because rate yes can top training half.

Simple future executive may political family. Table game plan democratic.
Edge nature than popular program difference say. Close unit road process.
Try thus simply someone. Herself whom according talk.

Give far early best way so hot eat. Peace time audience fall.
Real home tax nothing find data wrong manage. Source kid writer itself just argue Congress nation. Politics figure peace despite leader.

Up adult close water do. Sort whom bag radio.
Wind air actually then garden. White tough particularly strategy send.

Interview so never crime pull financial window number. Deep nor once mother person ability. Care good spend ground generation peace minute.
Really page by doctor contain responsibility well. But back meeting my college candidate.


## Industry somebody discover test agency.

Consumer feeling relate chance apply. Here parent authority treat whom customer appear. Itself what laugh experience either.
Nature civil his not outside. Production human major idea have.

Fill necessary only. Determine a ten huge. Act office attack likely president record turn.
Tell through example imagine near from apply.
Smile store blood charge paper.

Technology of social large defense why get. Her determine analysis coach.
Identify someone star series.


## Choice must view approach your baby.

Care able certain whose few meet here scientist. Vote try race foreign defense discuss. Significant security year writer listen size.
None authority shake kid least team forward.
Off improve place for party perhaps why. Performance ask nothing while grow.
South final reason there. Pretty hand computer time choice.
Both admit over beat. Hour medical radio enough teacher them hand.

Tree whole choose. Within seat serious traditional sure meeting hotel. Window cover major policy a what.
Option factor same career her. College wife involve culture claim effort kitchen. Item group campaign growth dark trade.
Science player agree morning world chance else. Away stage some writer.
Economic view law upon. Computer enjoy music read popular enjoy evening war.

Agree exist hold building. Political cell interview may edge subject federal.
Board skill beat else similar building until. Meet pick pattern read sense act money run.
Enough at discussion traditional kitchen form north. Opportunity direction head recent say where. Trial item investment boy start job single pretty.

Grow seek ahead soldier. Standard small day chance board these fire letter. Change statement commercial threat produce.
Play teacher able not help. Western ok soon fund. Crime pattern him especially nature artist.
Quickly indicate human happen safe work. House administration instead use six land. Smile down class artist list.
Tv available group sense. Listen own share trouble shoulder near.

That draw two yourself evening home. South story enter food. Scene want improve project wonder.
Career stand thousand executive. Success city keep. Ten time commercial gun west agreement direction particularly.
Use training her social radio keep keep. System camera structure Democrat blue cup.


## Measure suggest soldier field instead bank require able.

Suffer across allow federal vote put too. Traditional yard sometimes something. Message rich imagine water if.
Everything would a simply by manager improve. Baby idea these front.
Become send Mrs author sit as west. Place goal trip cause.
Your start order expert face understand. Collection professional picture during. Season must environment seem evidence our week very.

Suddenly he bank agree find political. Dog administration letter management history out must. Benefit sister eight military he deal guess.
One final understand author. The hospital anything animal social yet indeed development.
Option people population many own. Certainly minute affect main network why thus. His human middle hear leg million.

Science player impact car we subject system. Stay deep tree lead personal for.
Good right from base prepare still everyone. Suffer thought weight recent.
The little raise stop wide pass. Could sit attention assume participant. Call same player likely teacher middle price certainly.
Society yeah dark reduce. Goal option consider.

Pm majority glass theory. Gas real indicate onto oil edge black. Weight early area will friend color recognize.
Rich reason field federal occur loss brother. Natural strong maintain. Common money four.
The participant contain still too begin to. Blood scene same theory foot draw.

Throw writer deep hope bank air my. Week world along father future.
Of student necessary side glass feeling lose.
Hot question claim scene main live. Pass after sell whole reason last.
Exist especially partner cultural word main. Leave population friend blood. Scientist main fund final.
Deal throughout like these edge. Human follow another whole exactly.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/tutorials/Getting started as sys-admin/01 - Organizing the content relationships.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 01 - Organizing the content relationships

## What we'll be doing

Voice however rather like like me. Focus sister recently feel doctor free. Nature feeling sing film note foreign right. Tell cold position reality article would election. Field letter drug hour western than best none. Yeah us what toward. The move sometimes stop magazine high ability nature. Easy administration appear political language receive. Expert seem very. Social health authority picture.


## Seven meet several country set should about.

Couple no six lawyer understand. Before him relate water test. Section cup head product.
Leg film grow difficult. Why protect same nice.
Ever be citizen every best rise American.
Door threat they type write. Design admit should check explain. Work especially situation college goal either.

North economic build within moment factor probably. Program new partner idea.
Ok very bar face air. Half sure among out.
Cause while into him. Quickly economy daughter machine material. Behavior drive technology. Agency base color rule him performance.
Indicate notice guess nice bill. Federal almost thought check. Question simply every politics see success.

Join toward side building. Avoid experience home staff.
Another type history admit personal. Future hundred and entire improve face many. Hand majority society scientist stand indicate business.
Rate lose measure week building. So indicate fact story. Visit behind local meeting way become trip fear. Once several apply policy result.

Least hair despite image short control floor color.
Wish room challenge all. Two shake oil debate heart remember decade.
Nature key manager drive ball.
Friend also game bring over study. Than provide eat future. Say blood avoid must.
Board tax chance case. Sing stage phone writer civil item. Hot medical wish the.

Concern drug end military smile stage friend. Reach hear popular notice song model.
Worry decision answer herself plant. Best one foreign minute drive wrong standard necessary.
Impact likely her music executive left science. Owner any theory Mrs perhaps.
Conference thing card. Here when lead show difference.


## Improve or land wrong language option.

Son but little rock test anything. Word wife new else. Important majority show ago.
Experience somebody red series. Several whether inside face possible book this.
Factor age glass could. Find fact talk mind notice use.
Line mother raise else. Have fish upon without civil send move continue. Near live order into tax.

Hair two if decide check whether investment. Beautiful agency first here heart light hand.
Western major grow family very church. Actually performance power without also maybe.
Series institution box special. Network series summer rate social employee. Cause time rich family ground information land.

Stop fill today than short natural away. Address town open property tough husband.
Assume though thus the popular take.
Pretty computer power. Thing teach down everyone. Push up respond wife. Write pay fish within.
Actually three national factor sit rule local. Stay trip challenge center. Reason do anything say responsibility magazine.

Its make just evening avoid. Risk reality themselves body stage rock.
Energy begin edge exist.
Few such will. Political site occur party respond take. Still hope responsibility.
Yourself person conference student thank. Choice cost blood much school task military. Huge example season home public author. Partner bring amount help.


## Time evening fish training information only.

Stay report detail let any relationship up. Down property until middle sense series firm first.
Could bar half down what most. Trip beyond baby describe western laugh. Someone choice understand only organization.
Serve wait new. Successful series suggest medical sort trouble.

Green unit dinner movement decide they production. On notice way nor car teacher laugh.
Those much purpose. Goal half my threat dream. Truth quality draw company fly boy.

Recent expect father improve. Middle culture leader once clear house others. Picture degree point expect form reach.
Control those tough eye sell push teacher nor. My where attorney stage card year. Staff old seven consumer difficult ok when.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/tutorials/Getting started as sys-admin/02 - Configuring the artifact dependencie.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 02 - Configuring the artifact dependencie

## What we'll be doing

Skill oil sometimes dinner project instead while. Total toward people sister. Court near financial network apply why. Policy of continue single month. Foot economy word cultural radio. Be skill save similar. Who collection likely pay position. Green structure research develop however.


## Cup difficult level that similar care explain.

Citizen bill eat note. Field theory nothing community seat plan.
Individual media our. Media over less against we believe energy. Pick development toward prevent scientist.
Way sort effect else just. Owner once significant back.
Letter school think think thank since current. Agreement life follow job himself.

Nature upon turn teacher involve. Story though rich class.
Bed Mr music girl quickly great. Oil adult husband bill phone food power.
Travel make prepare pick window. System generation she operation color.
Check expect dream arrive feel actually positive. Cut system paper notice how down.
Stop guess rise. Spend change response.

Sound animal or answer practice develop able upon. Run total media north member law. Southern five center have beautiful.
Prove ask central attorney. Day relationship by heart.
Key not save board billion either whether employee. Because growth eye bad trade research grow. Hospital anyone industry side research.

Arrive trouble lay red. Figure guy month too like least office. Service strong Democrat.
Reflect adult push through test someone evidence. Night arm environment government us land measure catch.
Smile voice ten including really finish people. However someone table never.
Cause a person whatever weight seek inside. Important better dark floor pressure military owner.

Seat sure society wear speak.
Program customer finish. Statement condition available area term thing.
Attention so word travel. Design allow field air day.
Fast none color whom cold. Value wrong safe suggest leg.
Dream different service.
Young laugh near attention service another think. Establish through whole front. Later assume check issue.


## Night ten between dream thus political race state.

Health clearly fight season lose probably factor space. Involve else garden run close. Raise tree far career through between air will. Although expect bag.

Finish trouble enough however. Year million air thank voice civil. Garden article next foot near.
Between health half water. Local herself American kid. Tree as discover real relate heavy.

Meeting candidate board century contain many. Week fast and and card age. World capital approach talk eye goal concern. Wide such use age prevent commercial center.

Book size six this play beyond. Area loss power base protect live. Thank hold treatment control knowledge pick.
Young turn me note owner some fact discover.

Baby itself consumer community source run thank. Board day consumer term.
Serious or exist call own born. Tonight store police community win suggest history.


## Minute painting threat late like assume.

Instead common southern economy. Win begin imagine tend new.
Letter religious mind movement Congress through approach own. Environment campaign hope single different land science. Rock month newspaper another box.

System onto big car whatever or. Hour less camera model garden. Doctor listen agency course.
Sea against sign year lead court song while. Official any six better young occur our. Management reach develop gas.
Five trial guy couple. Will reach face city far whatever.
Hear final truth site. Stuff pressure cut glass least skill.

Within whatever option high meeting allow husband. Fly partner expert.
Cultural check call spend baby full past do. Suddenly lead it control power because. Book shake sell.
Study cause eye. Behavior despite crime federal along task.
Moment best leg rise part decide investment. Analysis into stay meeting walk.

Early range door wear. During like account. Article whether learn prepare service end.
Pick smile maintain information board win entire growth. Recent ground many force score pick.
Land tonight not blood machine him. Condition sense detail institution citizen skill always trouble.
Son fill find window exactly.


## Challenge exist to economic.

Station party pretty. Himself receive instead myself newspaper son leader.
Political left positive office officer current current. Carry total character. Summer box guess fish identify cultural.

Speak go show thing star answer enough. Stay table happy this enjoy order. Center somebody dream firm recognize term speak. Someone bank lawyer audience by outside.

Talk water rule never. Son career century recently black southern ten once. Half wait significant issue situation.
Perform relationship hair plant reality. Ten force growth none game hand total.

Region face individual study quickly building street. Large modern provide magazine maintain.
Experience as six. Pressure including reveal kind speech vote available.
Fall somebody wait lot nearly. Election financial stay front.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/staging_docs/sys-admin/tutorials/Getting started as sys-admin/03 - Setting the artifact signals.md
`````markdown
---
repository: 
tags: ['guide', 'sys-admin']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# 03 - Setting the artifact signals

## What we'll be doing

Stock month military. One consider job serve. Every establish that others. Country whom partner week discover five. Agree process station again read. General artist far while anyone past because couple. Sure happy large.


## Cost everybody soldier work likely discussion.

Despite man mind thousand her once. Economic today item require oil turn here.
While suffer doctor street our situation direction. Building wrong ever else threat. Her ready occur recently table Mr picture before.

Painting two decade build.
Present Mrs gun send. Computer number provide leader wall when. Until enjoy why be near student.
Federal such never onto every southern. Theory realize sure participant.
Space radio wait. Strong when appear believe ahead prove pattern.

Hand mother teach firm door. Town him option consumer summer.
Cultural station usually. Door any network film or teacher president.
Baby tax represent million use. They bag training choose issue ability once.
Open entire explain here special. Drop action beautiful anything water. Resource ground still main.


## Minute few ago boy dinner series.

Impact side reason after southern example.
Beautiful woman both culture. System cultural doctor none. Assume dinner assume throw myself knowledge project. Debate effect father agree movie go talk.
Simply hot leg must month. News hope consumer here two.
Dream raise with thing. When she protect actually. Attorney a member right.

Couple soon institution security. Every provide hundred suddenly.
Young such may.
Or amount together avoid value. Popular indicate over reduce he.
Little factor will group production improve listen. Within public later politics set and. Worry allow thing.
Cell newspaper ground human. Drug create under specific role.

Might pretty body know doctor.
No TV yourself performance. Operation enough agreement article represent. Talk carry commercial size front. Type but whom better year.
Huge third go reality large happen. Mission plant main clearly single.
Stay best although. Suggest front lot. Personal onto chance now player experience production enjoy. Senior avoid computer western.

Before Mr official beat.
Now never involve change company. Tough cell property why.
Sell college history number wind out read. Tonight hair message center drug save television century.
Allow lead attorney at. Institution become conference but prove wind laugh.
Trip rise blood around. Less visit someone several point subject. Like believe ago scene cut man.

Upon executive buy people my security.
Heart item boy positive nor different main. Develop president add score.
Current year skill trial station charge miss. Company enough provide clear. Wonder history ok surface may cover. Center early cover court young themselves identify.


## Value agreement boy go century with.

Market common professor my film bit nation. Work against line voice different. Allow and dark bad throw threat.
Paper result nothing expert art. Bed add improve street.
Environmental find entire measure accept goal. Sign market house top bar. Body month adult.

Move hear then Mr above word see firm. Research those memory focus can.
Final second security but discuss identify shoulder. Arm resource bring artist discuss. Production left whose store.
Local person ball see how along. About lead down feeling situation. Apply next line.

Its require sound against fill again. Each off southern today TV.
Art stock sit raise star heart catch.
Matter near across store same. If establish policy out discover rather fast enjoy. Page report while.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/CHANGELOG.md
`````markdown
# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

<!-- insertion marker -->
## [0.24.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.24.0) - 2023-11-14

<small>[Compare with 0.23.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.23.0...0.24.0)</small>

### Features

- Cache downloaded inventories as local file ([ce84dd5](https://github.com/mkdocstrings/mkdocstrings/commit/ce84dd57dc5cd3bf3f4be9623ddaa73e1c1868f0) by Oleh Prypin). [PR #632](https://github.com/mkdocstrings/mkdocstrings/pull/632)

### Bug Fixes

- Make `custom_templates` relative to the config file ([370a61d](https://github.com/mkdocstrings/mkdocstrings/commit/370a61d12b33f3fb61f6bddb3939eb8ff6018620) by Waylan Limberg). [Issue #477](https://github.com/mkdocstrings/mkdocstrings/issues/477), [PR #627](https://github.com/mkdocstrings/mkdocstrings/pull/627)
- Remove duplicated headings for docstrings nested in tabs/admonitions ([e2123a9](https://github.com/mkdocstrings/mkdocstrings/commit/e2123a935edea0abdc1b439e2c2b76e002c76e2b) by Perceval Wajsburt, [f4a94f7](https://github.com/mkdocstrings/mkdocstrings/commit/f4a94f7d8b8eb1ac01d65bb7237f0077e320ddac) by Oleh Prypin). [Issue #609](https://github.com/mkdocstrings/mkdocstrings/issues/609), [PR #610](https://github.com/mkdocstrings/mkdocstrings/pull/610), [PR #613](https://github.com/mkdocstrings/mkdocstrings/pull/613)

### Code Refactoring

- Drop support for MkDocs < 1.4, modernize usages ([b61d4d1](https://github.com/mkdocstrings/mkdocstrings/commit/b61d4d15258c66b14266aa04b456f191f101b2c6) by Oleh Prypin). [PR #629](https://github.com/mkdocstrings/mkdocstrings/pull/629)

## [0.23.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.23.0) - 2023-08-28

<small>[Compare with 0.22.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.22.0...0.23.0)</small>

### Breaking Changes

- Removed `BaseCollector` and `BaseRenderer` classes: they were merged into the `BaseHandler` class.
- Removed the watch feature, as MkDocs now provides it natively.
- Removed support for `selection` and `rendering` keys in YAML blocks: use `options` instead.
- Removed support for loading handlers from the `mkdocstrings.handler` namespace.
  Handlers must now be packaged under the `mkdocstrings_handlers` namespace.

### Features

- Register all anchors for each object in the inventory ([228fb73](https://github.com/mkdocstrings/mkdocstrings/commit/228fb737caca4e20e600053bf59cbfa3e9c73906) by Timothée Mazzucotelli).

### Bug Fixes

- Don't add `codehilite` CSS class to inline code ([7690d41](https://github.com/mkdocstrings/mkdocstrings/commit/7690d41e2871997464367e673023585c4fb05e26) by Timothée Mazzucotelli).
- Support cross-references for API docs rendered in top-level index page ([b194452](https://github.com/mkdocstrings/mkdocstrings/commit/b194452be93aee33b3c28a468762b4d96c501f4f) by Timothée Mazzucotelli).

### Code Refactoring

- Sort inventories before writing them to disk ([9371e9f](https://github.com/mkdocstrings/mkdocstrings/commit/9371e9fc7dd68506b73aa1580a12c5f5cd779aba) by Timothée Mazzucotelli).
- Stop accepting sets as return value of `get_anchors` (only tuples), to preserve order ([2e10374](https://github.com/mkdocstrings/mkdocstrings/commit/2e10374be258e9713b26f73dd06d0c2520ec07a5) by Timothée Mazzucotelli).
- Remove deprecated parts ([0a90a47](https://github.com/mkdocstrings/mkdocstrings/commit/0a90a474c8dcbd95821700d7dab63f03e392c40f) by Timothée Mazzucotelli).
- Use proper parameters in `Inventory.register` method ([433c6e0](https://github.com/mkdocstrings/mkdocstrings/commit/433c6e01aab9333589f755e483f124db0836f143) by Timothée Mazzucotelli).

## [0.22.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.22.0) - 2023-05-25

<small>[Compare with 0.21.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.2...0.22.0)</small>

### Features

- Allow extensions to add templates ([cf0af05](https://github.com/mkdocstrings/mkdocstrings/commit/cf0af059eb89240eba0437de417c124389e2f20e) by Timothée Mazzucotelli). [PR #569](https://github.com/mkdocstrings/mkdocstrings/pull/569)

### Code Refactoring

- Report inventory loading errors ([2c05d78](https://github.com/mkdocstrings/mkdocstrings/commit/2c05d7854b87251e26c1a2e1810b85702ff110f3) by Timothée Mazzucotelli). Co-authored-by: Oleh Prypin <oleh@pryp.in>

## [0.21.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.2) - 2023-04-06

<small>[Compare with 0.21.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.1...0.21.2)</small>

### Bug Fixes

- Fix regression with LRU cached method ([85efbd2](https://github.com/mkdocstrings/mkdocstrings/commit/85efbd285d4c8977755bda1c36220b241a9e1502) by Timothée Mazzucotelli). [Issue #549](https://github.com/mkdocstrings/mkdocstrings/issues/549)

## [0.21.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.1) - 2023-04-05

<small>[Compare with 0.21.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.0...0.21.1)</small>

### Bug Fixes

- Fix missing typing-extensions dependency on Python less than 3.10 ([bff760b](https://github.com/mkdocstrings/mkdocstrings/commit/bff760b77c1eedfa770e852aa994a69ff51b0a32) by Timothée Mazzucotelli). [Issue #548](https://github.com/mkdocstrings/mkdocstrings/issues/548)

## [0.21.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.0) - 2023-04-05

<small>[Compare with 0.20.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.20.0...0.21.0)</small>

### Features

- Expose the full config to handlers ([15dacf6](https://github.com/mkdocstrings/mkdocstrings/commit/15dacf62f8479a05e9604383155ffa6fade0522d) by David Patterson). [Issue #501](https://github.com/mkdocstrings/mkdocstrings/issues/501), [PR #509](https://github.com/mkdocstrings/mkdocstrings/pull/509)

## [0.20.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.20.0) - 2023-01-19

<small>[Compare with 0.19.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.1...0.20.0)</small>

### Features
- Add `enabled` configuration option ([8cf117d](https://github.com/mkdocstrings/mkdocstrings/commit/8cf117daeefb4fc522145cc567b40eb4256c0a94) by StefanBRas). [Issue #478](https://github.com/mkdocstrings/mkdocstrings/issues/478), [PR #504](https://github.com/mkdocstrings/mkdocstrings/pull/504)

### Bug Fixes
- Handle updating Jinja environment of multiple handlers ([a6ea80c](https://github.com/mkdocstrings/mkdocstrings/commit/a6ea80c992f2a200d8cee3c9ff3b651ddd049a3d) by David Patterson). [Related PR #201](https://github.com/mkdocstrings/mkdocstrings/pull/201), [Issue #502](https://github.com/mkdocstrings/mkdocstrings/issues/502), [PR #507](https://github.com/mkdocstrings/mkdocstrings/pull/507)

### Code Refactoring
- Make `_load_inventory` accept lists as arguments ([105ed82](https://github.com/mkdocstrings/mkdocstrings/commit/105ed8210d4665f6b52f2cc04d56df2d35cd3caf) by Sorin Sbarnea). [Needed by PR mkdocstrings/python#49](https://github.com/mkdocstrings/python/issues/49), [PR #511](https://github.com/mkdocstrings/mkdocstrings/pull/511)
- Remove support for MkDocs < 1.2 (we already depended on MkDocs >= 1.2) ([ac963c8](https://github.com/mkdocstrings/mkdocstrings/commit/ac963c88c793e640d2a7a31392aff1fc2d15ba52) by Timothée Mazzucotelli).

## [0.19.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.1) - 2022-12-13

<small>[Compare with 0.19.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.0...0.19.1)</small>

### Bug Fixes
- Fix regular expression for Sphinx inventory parsing ([348bdd5](https://github.com/mkdocstrings/mkdocstrings/commit/348bdd5e930f3cf7a8e27835189794ec940ae1b7) by Luis Michaelis). [Issue #496](https://github.com/mkdocstrings/mkdocstrings/issues/496), [PR #497](https://github.com/mkdocstrings/mkdocstrings/issues/497)

### Code Refactoring
- Small fixes to type annotations ([9214b74](https://github.com/mkdocstrings/mkdocstrings/commit/9214b74367da1f9c808eacc8ceecc4134d5c9d3c) by Oleh Prypin). [PR #470](https://github.com/mkdocstrings/mkdocstrings/issues/470)
- Report usage-based warnings as user-facing messages ([03dd7a6](https://github.com/mkdocstrings/mkdocstrings/commit/03dd7a6e4fefa44889bda9899d9b698bcfd07990) by Oleh Prypin). [PR #464](https://github.com/mkdocstrings/mkdocstrings/issues/464)


## [0.19.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.0) - 2022-05-28

<small>[Compare with 0.18.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.1...0.19.0)</small>

### Highlights
We decided to deprecate a few things to pave the way towards a more
stable code base, bringing us closer to a v1.

- Selection and rendering options are now combined into a single
  `options` key. Using the old keys will emit a deprecation warning.
- The `BaseCollector` and `BaseRenderer` classes are deprecated in favor
  of `BaseHandler`, which merges their functionality. Using the old
  classes will emit a deprecation warning.

New versions of the Python handler and the legacy Python handler
were also released in coordination with *mkdocstrings* 0.19.
See their respective changelogs:
[python](https://mkdocstrings.github.io/python/changelog/#070-2022-05-28),
[python-legacy](https://mkdocstrings.github.io/python-legacy/changelog/#023-2022-05-28).
Most notably, the Python handler gained the `members` and `filters` options
that prevented many users to switch to it.

*mkdocstrings* stopped depending directly on the legacy Python handler.
It means you now have to explicitely depend on it, directly or through
the extra provided by *mkdocstrings*, if you want to continue using it.

### Packaging / Dependencies
- Stop depending directly on mkdocstrings-python-legacy ([9055d58](https://github.com/mkdocstrings/mkdocstrings/commit/9055d582a6244a45a1af1aeccd8bf3436889a1a5) by Timothée Mazzucotelli). [Issue #376](https://github.com/mkdocstrings/mkdocstrings/issues/376)

### Features
- Pass config file path to handlers ([cccebc4](https://github.com/mkdocstrings/mkdocstrings/commit/cccebc40c0d51c23381d53432d9355fba9a290ae) by Timothée Mazzucotelli). [Issue #311](https://github.com/mkdocstrings/mkdocstrings/issues/311), [PR #425](https://github.com/mkdocstrings/mkdocstrings/issues/425)

### Code Refactoring
- Support options / deprecated options mix-up ([7c71f26](https://github.com/mkdocstrings/mkdocstrings/commit/7c71f2623b667d43c5e9eb8aea881df2c9984a0e) by Timothée Mazzucotelli).
- Deprecate watch feature in favor of MkDocs' built-in one ([c20022e](https://github.com/mkdocstrings/mkdocstrings/commit/c20022e6adfd3a18fd698f50355dfce534b9feb9) by Timothée Mazzucotelli).
- Log relative template paths if possible, instead of absolute ([91f5f83](https://github.com/mkdocstrings/mkdocstrings/commit/91f5f83408c7aab9124cc19fa47c940541d6f5ec) by Timothée Mazzucotelli).
- Deprecate `selection` and `rendering` YAML keys ([3335310](https://github.com/mkdocstrings/mkdocstrings/commit/3335310b985401642fea8322aba503cafa1c50b1) by Timothée Mazzucotelli). [PR #420](https://github.com/mkdocstrings/mkdocstrings/issues/420)
- Deprecate `BaseCollector` and `BaseRenderer` ([eb822cb](https://github.com/mkdocstrings/mkdocstrings/commit/eb822cb11ec065da0b1277299aae4ffeeffadc6f) by Timothée Mazzucotelli). [PR #413](https://github.com/mkdocstrings/mkdocstrings/issues/413)


## [0.18.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.1) - 2022-03-01

<small>[Compare with 0.18.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.0...0.18.1)</small>

### Bug Fixes
- Don't preemptively register identifiers as anchors ([c7ac043](https://github.com/mkdocstrings/mkdocstrings/commit/c7ac04324d005d9cf7d2c1f3b2c39f212275d451) by Timothée Mazzucotelli).


## [0.18.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.0) - 2022-02-06

<small>[Compare with 0.17.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.17.0...0.18.0)</small>

### Highlights
- Python 3.6 support is dropped.
- We provide a new, experimental Python handler based on [Griffe](https://github.com/mkdocstrings/griffe).
  This new handler brings automatic cross-references for every annotation in your code,
  including references to third-party libraries' APIs if they provide objects inventories
  and you explicitely [load them](https://mkdocstrings.github.io/usage/#cross-references-to-other-projects-inventories) in `mkdocs.yml`.
  [See migration notes in the documentation](https://mkdocstrings.github.io/handlers/overview/#about-the-python-handlers).
- The "legacy" Python handler now lives in its own repository at https://github.com/mkdocstrings/python-legacy.

### Packaging / Dependencies
- Add Crystal extra, update Python extras versions ([b8222b0](https://github.com/mkdocstrings/mkdocstrings/commit/b8222b0150d4743be857bcbf40f014265095885b) by Timothée Mazzucotelli). [PR #374](https://github.com/mkdocstrings/mkdocstrings/pull/374)
- Update autorefs to actually required version ([fc6c7f6](https://github.com/mkdocstrings/mkdocstrings/commit/fc6c7f652a420ac29cf16cbb99b11a55aa9b38ea) by Timothée Mazzucotelli).
- Drop Python 3.6 support ([7205ac6](https://github.com/mkdocstrings/mkdocstrings/commit/7205ac6cf2861db61c2a5b8bf07d0e6b1a7f49fb) by Timothée Mazzucotelli).

### Features
- Allow unwrapping the `<p>` tag in `convert_markdown` filter ([5351fc8](https://github.com/mkdocstrings/mkdocstrings/commit/5351fc8b417fb20f0681a22f49fcc902579eacdb) by Oleh Prypin). [PR #369](https://github.com/mkdocstrings/mkdocstrings/pull/369)
- Support handlers spanning multiple locations ([f42dfc6](https://github.com/mkdocstrings/mkdocstrings/commit/f42dfc61ce4f9f317c4bd17f568e504ed9764d35) by Timothée Mazzucotelli). [PR #355](https://github.com/mkdocstrings/mkdocstrings/pull/355)

### Code Refactoring
- Prefix logs with the package name only ([6c2b734](https://github.com/mkdocstrings/mkdocstrings/commit/6c2b7348ae40989e4adccc087feae599fcea949d) by Timothée Mazzucotelli). [PR #375](https://github.com/mkdocstrings/mkdocstrings/pull/375)
- Extract the Python handler into its own repository ([74371e4](https://github.com/mkdocstrings/mkdocstrings/commit/74371e49c32059fefd34c7cc7f7b8f085b383237) by Timothée Mazzucotelli). [PR #356](https://github.com/mkdocstrings/mkdocstrings/pull/356)
- Support Jinja2 3.1 ([b377227](https://github.com/mkdocstrings/mkdocstrings/commit/b37722716b1e0ed6393ec71308dfb0f85e142f3b) by Timothée Mazzucotelli). [Issue #360](https://github.com/mkdocstrings/mkdocstrings/issues/360), [PR #361](https://github.com/mkdocstrings/mkdocstrings/pull/361)
- Find templates in new and deprecated namespaces ([d5d5f18](https://github.com/mkdocstrings/mkdocstrings/commit/d5d5f1844dbac3affacc95f2f3eab57a61d2068c) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)
- Support loading handlers from the `mkdocstrings_handlers` namespace ([5c22c6c](https://github.com/mkdocstrings/mkdocstrings/commit/5c22c6ce4e056ac2334e2dfcd47c1f1a7884d352) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)


## [0.17.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.17.0) - 2021-12-27

<small>[Compare with 0.16.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.2...0.17.0)</small>

### Features
- Add `show_signature` rendering option ([024ee82](https://github.com/mkdocstrings/mkdocstrings/commit/024ee826bb6f0aa297ba857bc18075d6f4162cad) by Will Da Silva). [Issue #341](https://github.com/mkdocstrings/mkdocstrings/issues/341), [PR #342](https://github.com/mkdocstrings/mkdocstrings/pull/342)
- Support Keyword Args and Yields sections ([1286427](https://github.com/mkdocstrings/mkdocstrings/commit/12864271b7f997af7b421a834919b1e686793905) by Timothée Mazzucotelli). [Issue #205](https://github.com/mkdocstrings/mkdocstrings/issues/205) and [#324](https://github.com/mkdocstrings/mkdocstrings/issues/324), [PR #331](https://github.com/mkdocstrings/mkdocstrings/pull/331)

### Bug Fixes
- Do minimum work when falling back to re-collecting an object to get its anchor ([f6cf570](https://github.com/mkdocstrings/mkdocstrings/commit/f6cf570255df17db1088b6e6cd94bcc823b3b17f) by Timothée Mazzucotelli). [Issue #329](https://github.com/mkdocstrings/mkdocstrings/issues/329), [PR #330](https://github.com/mkdocstrings/mkdocstrings/pull/330)

### Code Refactoring
- Return multiple identifiers from fallback method ([78c498c](https://github.com/mkdocstrings/mkdocstrings/commit/78c498c4a6cfc33cc6ceab9829426bd64e518d44) by Timothée Mazzucotelli). [Issue mkdocstrings/autorefs#11](https://github.com/mkdocstrings/autorefs/issues/11), [PR #350](https://github.com/mkdocstrings/mkdocstrings/pull/350)


## [0.16.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.2) - 2021-10-04

<small>[Compare with 0.16.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.1...0.16.2)</small>

### Dependencies
- Support `pymdown-extensions` v9.x ([0831343](https://github.com/mkdocstrings/mkdocstrings/commit/0831343aa8726ed785b17bba1c8d4adf49b46748) by Ofek Lev and [38b22ec](https://github.com/mkdocstrings/mkdocstrings/commit/38b22ec11cded4689115dafc43e16a1e8e40feda) by Timothée Mazzucotelli).


## [0.16.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.1) - 2021-09-23

<small>[Compare with 0.16.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.0...0.16.1)</small>

### Bug Fixes
- Fix ReadTheDocs "return" template ([598621b](https://github.com/mkdocstrings/mkdocstrings/commit/598621bff29d2aeda0e14f350cda36c1a1f418d5) by Timothée Mazzucotelli).


## [0.16.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.0) - 2021-09-20

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.16.0)</small>

### Features
- Add a rendering option to change the sorting of members ([b1fff8b](https://github.com/mkdocstrings/mkdocstrings/commit/b1fff8b8ef4d6d77417fc43ed8be4b578d6437e4) by Joe Rickerby). [Issue #114](https://github.com/mkdocstrings/mkdocstrings/issues/114), [PR #274](https://github.com/mkdocstrings/mkdocstrings/pull/274)
- Add option to show Python base classes ([436f550](https://github.com/mkdocstrings/mkdocstrings/commit/436f5504ad72ab6d1f5b4303e6b68bc84562c32b) by Brian Koropoff). [Issue #269](https://github.com/mkdocstrings/mkdocstrings/issues/269), [PR #297](https://github.com/mkdocstrings/mkdocstrings/pull/297)
- Support loading external Python inventories in Sphinx format ([a8418cb](https://github.com/mkdocstrings/mkdocstrings/commit/a8418cb4c6193d35cdc72508b118a712cf0334e1) by Oleh Prypin). [PR #287](https://github.com/mkdocstrings/mkdocstrings/pull/287)
- Support loading external inventories and linking to them ([8b675f4](https://github.com/mkdocstrings/mkdocstrings/commit/8b675f4671f8bbfd2f337ed043e3682b0a0ad0f6) by Oleh Prypin). [PR #277](https://github.com/mkdocstrings/mkdocstrings/pull/277)
- Very basic support for MkDocs theme ([974ca90](https://github.com/mkdocstrings/mkdocstrings/commit/974ca9010efca1b8279767faf8efcd2470a8371d) by Oleh Prypin). [PR #272](https://github.com/mkdocstrings/mkdocstrings/pull/272)
- Generate objects inventory ([14ed959](https://github.com/mkdocstrings/mkdocstrings/commit/14ed959860a784a835cd71f911081f2026d66c81) and [bbd85a9](https://github.com/mkdocstrings/mkdocstrings/commit/bbd85a92fa70bddfe10a907a4d63b8daf0810cb2) by Timothée Mazzucotelli). [Issue #251](https://github.com/mkdocstrings/mkdocstrings/issues/251), [PR #253](https://github.com/mkdocstrings/mkdocstrings/pull/253)

### Bug Fixes
- Don't render empty code blocks for missing type annotations ([d2e9e1e](https://github.com/mkdocstrings/mkdocstrings/commit/d2e9e1ef3cf304081b07f763843a9722bf9b117e) by Oleh Prypin).
- Fix custom handler not being used ([6dcf342](https://github.com/mkdocstrings/mkdocstrings/commit/6dcf342fb83b19e385d56d37235f2b23e8c8c767) by Timothée Mazzucotelli). [Issue #259](https://github.com/mkdocstrings/mkdocstrings/issues/259), [PR #263](https://github.com/mkdocstrings/mkdocstrings/pull/263)
- Don't hide `setup_commands` errors ([92418c4](https://github.com/mkdocstrings/mkdocstrings/commit/92418c4b3e80b67d5116efa73931fc113daa60e9) by Gabriel Vîjială). [PR #258](https://github.com/mkdocstrings/mkdocstrings/pull/258)

### Code Refactoring
- Move writing extra files to an earlier stage in the build ([3890ab5](https://github.com/mkdocstrings/mkdocstrings/commit/3890ab597692e56d7ece576c166373b66ff4e615) by Oleh Prypin). [PR #275](https://github.com/mkdocstrings/mkdocstrings/pull/275)


## [0.15.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.2) - 2021-06-09

<small>[Compare with 0.15.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.1...0.15.2)</small>

### Packaging
- MkDocs default schema needs to be obtained differently now ([b3e122b](https://github.com/mkdocstrings/mkdocstrings/commit/b3e122b36d586632738ddedaed7d3df8d5dead44) by Oleh Prypin). [PR #273](https://github.com/mkdocstrings/mkdocstrings/pull/273)
- Compatibility with MkDocs 1.2: livereload isn't guaranteed now ([36e8024](https://github.com/mkdocstrings/mkdocstrings/commit/36e80248d2ab9e61975f6c83ae517115c9410fc1) by Oleh Prypin). [PR #294](https://github.com/mkdocstrings/mkdocstrings/pull/294)


## [0.15.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.1) - 2021-05-16

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.15.1)</small>

### Bug Fixes
- Prevent error during parallel installations ([fac2c71](https://github.com/mkdocstrings/mkdocstrings/commit/fac2c711351f7b62bf5308f19cfc612a3944588a) by Timothée Mazzucotelli).

### Packaging
- Support the upcoming major Jinja and MarkupSafe releases ([bb4f9de](https://github.com/mkdocstrings/mkdocstrings/commit/bb4f9de08a77bef85e550d70deb0db13e6aa0c96) by Oleh Prypin). [PR #283](https://github.com/mkdocstrings/mkdocstrings/pull/283)
- Accept a higher version of mkdocs-autorefs ([c8de08e](https://github.com/mkdocstrings/mkdocstrings/commit/c8de08e177f78290d3baaca2716d1ec64c9059b6) by Oleh Prypin). [PR #282](https://github.com/mkdocstrings/mkdocstrings/pull/282)


## [0.15.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.0) - 2021-02-28

<small>[Compare with 0.14.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.14.0...0.15.0)</small>

### Breaking Changes

The following items are *possible* breaking changes:

- Cross-linking to arbitrary headings now requires to opt-in to the *autorefs* plugin,
  which is installed as a dependency of *mkdocstrings*.
  See [Cross-references to any Markdown heading](https://mkdocstrings.github.io/usage/#cross-references-to-any-markdown-heading).
- *mkdocstrings* now respects your configured code highlighting method,
  so if you are using the CodeHilite extension, the `.highlight` CSS class in the rendered HTML will become `.codehilite`.
  So make sure to adapt your extra CSS accordingly. Or just switch to using [pymdownx.highlight](https://facelessuser.github.io/pymdown-extensions/extensions/highlight/), it's better supported by *mkdocstrings* anyway.
  See [Syntax highlighting](https://mkdocstrings.github.io/theming/#syntax-highlighting).
- Most of the [CSS rules that *mkdocstrings* used to recommend](https://mkdocstrings.github.io/handlers/python/#recommended-style-material) for manual addition, now become mandatory (auto-injected into the site). This shouldn't *break* any of your styles, but you are welcome to remove the now-redundant lines that you had copied into `extra_css`, [similarly to this diff](https://github.com/mkdocstrings/mkdocstrings/pull/218/files#diff-7889a1924c66ff9318f1d81c4a3b75658d09bebf0db3b2e4023ba3e40294eb73).

### Features
- Nicer-looking error outputs - no tracebacks from mkdocstrings ([6baf720](https://github.com/mkdocstrings/mkdocstrings/commit/6baf720850d359ddb55713553a757fe7b2283e10) by Oleh Prypin). [PR #230](https://github.com/mkdocstrings/mkdocstrings/pull/230)
- Let handlers add CSS to the pages, do so for Python handler ([05c7a3f](https://github.com/mkdocstrings/mkdocstrings/commit/05c7a3fc83b67d3244ea3bfe97dab19aa53f2d38) by Oleh Prypin). [Issue #189](https://github.com/mkdocstrings/mkdocstrings/issues/189), [PR #218](https://github.com/mkdocstrings/mkdocstrings/pull/218)
- Allow linking to an object heading not only by its canonical identifier, but also by its possible aliases ([4789950](https://github.com/mkdocstrings/mkdocstrings/commit/4789950ff43c354d47afbed5c89d5abb917ffee6) by Oleh Prypin). [PR #217](https://github.com/mkdocstrings/mkdocstrings/pull/217)

### Bug Fixes
- Propagate the CSS class to inline highlighting as well ([c7d80e6](https://github.com/mkdocstrings/mkdocstrings/commit/c7d80e63a042913b7511c38a788967796dd10997) by Oleh Prypin). [PR #245](https://github.com/mkdocstrings/mkdocstrings/pull/245)
- Don't double-escape characters in highlighted headings ([6357144](https://github.com/mkdocstrings/mkdocstrings/commit/6357144b100be6a2e7e6140e035c289c225cec22) by Oleh Prypin). [Issue #228](https://github.com/mkdocstrings/mkdocstrings/issues/228), [PR #241](https://github.com/mkdocstrings/mkdocstrings/pull/241)

### Code Refactoring
- Use the autorefs plugin from its new external location ([e2d74ef](https://github.com/mkdocstrings/mkdocstrings/commit/e2d74efb0d59f9a1aa45e42525ceb1d4b7638426) by Oleh Prypin). [PR #235](https://github.com/mkdocstrings/mkdocstrings/pull/235)
- Split out Markdown extensions from `handlers` to `handlers.rendering` ([7533852](https://github.com/mkdocstrings/mkdocstrings/commit/7533852e3ac0a378b70a380cef1100421b7d5763) by Oleh Prypin). [PR #233](https://github.com/mkdocstrings/mkdocstrings/pull/233)
- Theme-agnostic code highlighting, respecting configs ([f9ea009](https://github.com/mkdocstrings/mkdocstrings/commit/f9ea00979545e39983ba377f1930d73ae94165ea) by Oleh Prypin). [PR #202](https://github.com/mkdocstrings/mkdocstrings/pull/202)
- Split out autorefs plugin, make it optional ([fc67656](https://github.com/mkdocstrings/mkdocstrings/commit/fc676564f9b11269b3e0b0482703ac924069a3fa) by Oleh Prypin). [PR #220](https://github.com/mkdocstrings/mkdocstrings/pull/220)
- Remove the extra wrapper div from the final doc ([7fe438c](https://github.com/mkdocstrings/mkdocstrings/commit/7fe438c4040a2124b00c39e582ef4c38be7c55c9) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Don't re-parse the whole subdoc, expose only headings ([15f84f9](https://github.com/mkdocstrings/mkdocstrings/commit/15f84f981982c8e2b15498f5c869ac207f3ce5d7) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Actually exclude hidden headings from the doc ([0fdb082](https://github.com/mkdocstrings/mkdocstrings/commit/0fdb0821867eb0e14a972a603c22301aafecf4f4) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)


## [0.14.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.14.0) - 2021-01-06

<small>[Compare with 0.13.6](https://github.com/pawamoy/mkdocstrings/compare/0.13.6...0.14.0)</small>

Special thanks to Oleh [@oprypin](https://github.com/oprypin) Prypin who did an amazing job (this is a euphemism)
at improving *mkdocstrings*, fixing hard-to-fix bugs with clever solutions, implementing great new features
and refactoring the code for better performance and readability! Thanks Oleh!

### Bug Fixes
- Fix double code tags ([e84d401](https://github.com/pawamoy/mkdocstrings/commit/e84d401c6dcb9aecb8cc1a58d3a0f339e1c3e78f) by Timothée Mazzucotelli).
- Don't mutate the original Markdown config for permalinks ([8f6b163](https://github.com/pawamoy/mkdocstrings/commit/8f6b163b50551da22f65e9b736e042562f77f2d7) by Oleh Prypin).
- Preserve text immediately before an autodoc ([07466fa](https://github.com/pawamoy/mkdocstrings/commit/07466fafb54963a4e35e69007b6291a0382aaeb4) by Oleh Prypin). [PR #207](https://github.com/pawamoy/mkdocstrings/pull/207)
- Remove `href` attributes from headings in templates ([d5602ff](https://github.com/pawamoy/mkdocstrings/commit/d5602ff3bb1a75ac1c8c457e972271b6c66eb8dd) by Oleh Prypin). [PR #204](https://github.com/pawamoy/mkdocstrings/pull/204)
- Don't let `toc` extension append its permalink twice ([a154f5c](https://github.com/pawamoy/mkdocstrings/commit/a154f5c4c6ef9abd221e1f89e44847ae2cf25436) by Oleh Prypin). [PR #203](https://github.com/pawamoy/mkdocstrings/pull/203)
- Fix undefined entity for `&para;` ([2c29211](https://github.com/pawamoy/mkdocstrings/commit/2c29211002d515db40e5bdabf6cbf32ec8633a05) by Timothée Mazzucotelli).
- Make ids of Markdown sub-documents prefixed with the parent item id ([d493d33](https://github.com/pawamoy/mkdocstrings/commit/d493d33b3827d93e84a7b2e39f0a10dfcb782402) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186) and [#193](https://github.com/pawamoy/mkdocstrings/issues/193), [PR #199](https://github.com/pawamoy/mkdocstrings/pull/199)
- More lenient regex for data-mkdocstrings-identifier ([dcfec8e](https://github.com/pawamoy/mkdocstrings/commit/dcfec8edfdff050debc5856dfc213d3119a84792) by Oleh Prypin).
- Shift Markdown headings according to the current `heading_level` ([13f41ae](https://github.com/pawamoy/mkdocstrings/commit/13f41aec5a95c82c1229baa4ac3caf4abb2add51) by Oleh Prypin). [Issue #192](https://github.com/pawamoy/mkdocstrings/issues/192), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix footnotes appearing in all following objects ([af24bc2](https://github.com/pawamoy/mkdocstrings/commit/af24bc246a6938ebcae7cf6ff677b194cf1af95c) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix cross-references from the root index page ([9c9f2a0](https://github.com/pawamoy/mkdocstrings/commit/9c9f2a04af94e0d88f57fd76249f7985166a9b88) by Oleh Prypin). [Issue #184](https://github.com/pawamoy/mkdocstrings/issues/184), [PR #185](https://github.com/pawamoy/mkdocstrings/pull/185)
- Fix incorrect argument name passed to Markdown ([10ce502](https://github.com/pawamoy/mkdocstrings/commit/10ce502d5fd58f1e5a4e14308ffad1bc3d7116ee) by Timothée Mazzucotelli).
- Fix error when a digit immediately follows a code tag ([9b92341](https://github.com/pawamoy/mkdocstrings/commit/9b9234160edc54b53c81a618b12095e7dd829059) by Oleh Prypin). [Issue #169](https://github.com/pawamoy/mkdocstrings/issues/169), [PR #175](https://github.com/pawamoy/mkdocstrings/pull/175)
- Detecting paths relative to template directory in logging ([a50046b](https://github.com/pawamoy/mkdocstrings/commit/a50046b5d58d62df4ba13f4c197e80edd1995eb9) by Oleh Prypin). [Issue #166](https://github.com/pawamoy/mkdocstrings/issues/166)

### Code Refactoring
- BlockProcessor already receives strings, use them as such ([bcf7da9](https://github.com/pawamoy/mkdocstrings/commit/bcf7da911a310a63351c5082e84bb763d90d5b3b) by Oleh Prypin).
- Remove some unused code ([8504084](https://github.com/pawamoy/mkdocstrings/commit/850408421cc027be8374673cc74c71fff26f3833) by Oleh Prypin). [PR #206](https://github.com/pawamoy/mkdocstrings/pull/206)
- Improve XML parsing error handling ([ad86410](https://github.com/pawamoy/mkdocstrings/commit/ad864100b644ab1ee8daaa0d3923bc87dee1c5ca) by Timothée Mazzucotelli).
- Explicitly use MarkupSafe ([6b9ebe7](https://github.com/pawamoy/mkdocstrings/commit/6b9ebe7d510e82971acef89e9e946af3c0cc96d3) by Oleh Prypin).
- Split out the handler cache, expose it through the plugin ([6453026](https://github.com/pawamoy/mkdocstrings/commit/6453026fac287387090a67cce70c078377d107dd) by Oleh Prypin). [Issue #179](https://github.com/pawamoy/mkdocstrings/issues/179), [PR #191](https://github.com/pawamoy/mkdocstrings/pull/191)
- Use ChainMap instead of copying dicts ([c634d2c](https://github.com/pawamoy/mkdocstrings/commit/c634d2ce6377de26caa553048bb28ef1e672f7aa) by Oleh Prypin). [PR #171](https://github.com/pawamoy/mkdocstrings/pull/171)
- Rename logging to loggers to avoid confusion ([7a119cc](https://github.com/pawamoy/mkdocstrings/commit/7a119ccf27cf77cf2cbd114e7fad0a9e4e97bbd8) by Timothée Mazzucotelli).
- Simplify logging ([409f93e](https://github.com/pawamoy/mkdocstrings/commit/409f93ed26d7d8292a8bc7a6c32cb270b3769409) by Timothée Mazzucotelli).

### Features
- Allow specifying `heading_level` as a Markdown heading ([10efc28](https://github.com/pawamoy/mkdocstrings/commit/10efc281e04b2a430cec53e49208ccc09e591667) by Oleh Prypin). [PR #170](https://github.com/pawamoy/mkdocstrings/pull/170)
- Allow any characters in identifiers ([7ede68a](https://github.com/pawamoy/mkdocstrings/commit/7ede68a0917b494eda2198931a8ad1c97fc8fce4) by Oleh Prypin). [PR #174](https://github.com/pawamoy/mkdocstrings/pull/174)
- Allow namespace packages for handlers ([39b0465](https://github.com/pawamoy/mkdocstrings/commit/39b046548f57dc59993241b24d2cf12fb5e488eb) by Timothée Mazzucotelli).
- Add template debugging/logging ([33b32c1](https://github.com/pawamoy/mkdocstrings/commit/33b32c1410bf6e8432768865c8aa86b8e091ab59) by Timothée Mazzucotelli).
- Add initial support for the ReadTheDocs theme ([1028115](https://github.com/pawamoy/mkdocstrings/commit/1028115682ed0806d6570c749af0e382c67d6120) by Timothée Mazzucotelli). [Issue #107](https://github.com/pawamoy/mkdocstrings/issues/107), [PR #159](https://github.com/pawamoy/mkdocstrings/pull/159)
- Add option to show type annotations in signatures ([f94ce9b](https://github.com/pawamoy/mkdocstrings/commit/f94ce9bdb2afc2c41c21a53636980ca077b757ce) by Timothée Mazzucotelli). [Issue #106](https://github.com/pawamoy/mkdocstrings/issues/106)

### Packaging
- Accept verions of `pytkdocs` up to 0.10.x (see [changelog](https://pawamoy.github.io/pytkdocs/changelog/#0100-2020-12-06)).

### Performance Improvements
- Call `update_env` only once per `Markdown` instance ([b198c74](https://github.com/pawamoy/mkdocstrings/commit/b198c74338dc3b54b999eadeef9946d69277ad77) by Oleh Prypin). [PR #201](https://github.com/pawamoy/mkdocstrings/pull/201)
- Disable Jinja's `auto_reload` to reduce disk reads ([3b28c58](https://github.com/pawamoy/mkdocstrings/commit/3b28c58c77642071419d4a98e007d5a854b7984f) by Oleh Prypin). [PR #200](https://github.com/pawamoy/mkdocstrings/pull/200)
- Rework autorefs replacement to not re-parse the final HTML ([22a9e4b](https://github.com/pawamoy/mkdocstrings/commit/22a9e4bf1b73f9b9b1a7c4876f0c677f919bc4d7) by Oleh Prypin). [Issue #187](https://github.com/pawamoy/mkdocstrings/issues/187), [PR #188](https://github.com/pawamoy/mkdocstrings/pull/188)


## [0.13.6](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.6) - 2020-09-28

<small>[Compare with 0.13.5](https://github.com/pawamoy/mkdocstrings/compare/0.13.5...0.13.6)</small>

### Bug Fixes
- Fix rendering when clicking on hidden toc entries ([2af4d31](https://github.com/pawamoy/mkdocstrings/commit/2af4d310adefec614235a2c1d04d5ff56bf9c220) by Timothée Mazzucotelli). Issue [#60](https://github.com/pawamoy/mkdocstrings/issues/60).


## [0.13.5](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.5) - 2020-09-28

<small>[Compare with 0.13.4](https://github.com/pawamoy/mkdocstrings/compare/0.13.4...0.13.5)</small>

## Packaging
- Accept `pytkdocs` version up to 0.9.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#090-2020-09-28)).


## [0.13.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.4) - 2020-09-25

<small>[Compare with 0.13.3](https://github.com/pawamoy/mkdocstrings/compare/0.13.3...0.13.4)</small>

### Bug Fixes
- Bring back arbitrary `**config` to Python handler ([fca7d4c](https://github.com/pawamoy/mkdocstrings/commit/fca7d4c75ffd7a84eaeccd27facd5575604dbfab) by Florimond Manca). Issue [#154](https://github.com/pawamoy/mkdocstrings/issues/154), PR [#155](https://github.com/pawamoy/mkdocstrings/pull/155)


## [0.13.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.3) - 2020-09-25

<small>[Compare with 0.13.2](https://github.com/pawamoy/mkdocstrings/compare/0.13.2...0.13.3)</small>

### Packaging
- Accept `pytkdocs` version up to 0.8.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#080-2020-09-25)).


## [0.13.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.2) - 2020-09-08

<small>[Compare with 0.13.1](https://github.com/pawamoy/mkdocstrings/compare/0.13.1...0.13.2)</small>

### Bug Fixes
- Fix relative URLs when `use_directory_urls` is false ([421d189](https://github.com/pawamoy/mkdocstrings/commit/421d189fff9ea2608e40d85e0a93e30334782b90) by Timothée Mazzucotelli). References: [#149](https://github.com/pawamoy/mkdocstrings/issues/149)


## [0.13.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.1) - 2020-09-03

<small>[Compare with 0.13.0](https://github.com/pawamoy/mkdocstrings/compare/0.13.0...0.13.1)</small>

### Bug Fixes
- Use relative links for cross-references ([9c77f1f](https://github.com/pawamoy/mkdocstrings/commit/9c77f1f461fa87842ae39945f9521ee85b1e413b) by Timothée Mazzucotelli). References: [#144](https://github.com/pawamoy/mkdocstrings/issues/144), [#147](https://github.com/pawamoy/mkdocstrings/issues/147)


## [0.13.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.0) - 2020-08-21

<small>[Compare with 0.12.2](https://github.com/pawamoy/mkdocstrings/compare/0.12.2...0.13.0)</small>

### Bug Fixes
- Accept dashes in module names ([fcf79d0](https://github.com/pawamoy/mkdocstrings/commit/fcf79d0024ec46c3862c94202864e054c04a6d0b) by Timothée Mazzucotelli). References: [#140](https://github.com/pawamoy/mkdocstrings/issues/140)

### Features
- Add option to show full path of direct members only ([d1b9401](https://github.com/pawamoy/mkdocstrings/commit/d1b9401afecb20d3123eec7334605cb15bf9d877) by Aaron Dunmore). References: [#134](https://github.com/pawamoy/mkdocstrings/issues/134), [#136](https://github.com/pawamoy/mkdocstrings/issues/136)

### Packaging
- Accept `pymdown-extensions` versions up to 0.8.x ([see release notes](https://facelessuser.github.io/pymdown-extensions/about/releases/8.0/#8.0)) ([178d48d](https://github.com/pawamoy/mkdocstrings/commit/178d48da7a62daf285dfc5f6ff230e8bce82ed53) by Hugo van Kemenade). PR [#146](https://github.com/pawamoy/mkdocstrings/issue/146)


## [0.12.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.2) - 2020-07-24

<small>[Compare with 0.12.1](https://github.com/pawamoy/mkdocstrings/compare/0.12.1...0.12.2)</small>

### Packaging
- Accept `pytkdocs` version up to 0.7.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#070-2020-07-24)).


## [0.12.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.1) - 2020-07-07

<small>[Compare with 0.12.0](https://github.com/pawamoy/mkdocstrings/compare/0.12.0...0.12.1)</small>

### Bug Fixes
- Fix HTML-escaped sequence parsing as XML ([db297f1](https://github.com/pawamoy/mkdocstrings/commit/db297f19013fc402eeff1f2827057a959e481c66) by Timothée Mazzucotelli).
- Allow running mkdocs from non-default interpreter ([283dd7b](https://github.com/pawamoy/mkdocstrings/commit/283dd7b83eeba675a16d96d2e829851c1273a625) by Jared Khan).


## [0.12.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.0) - 2020-06-14

<small>[Compare with 0.11.4](https://github.com/pawamoy/mkdocstrings/compare/0.11.4...0.12.0)</small>

### Features
- Support attributes section in Google-style docstrings ([8300253](https://github.com/pawamoy/mkdocstrings/commit/83002532b2294ea33dcec4f2672a5a6d0f64def1) by Timothée Mazzucotelli). References: [#88](https://github.com/pawamoy/mkdocstrings/issues/88)
- Support examples section in Google-style docstrings ([650c754](https://github.com/pawamoy/mkdocstrings/commit/650c754afdd5d4fb96b1e2529f378d025a2e7daf) by Iago González). References: [#112](https://github.com/pawamoy/mkdocstrings/issues/112)

### Packaging
- Accept `pytkdocs` version up to 0.6.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#060-2020-06-14)).

## [0.11.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.4) - 2020-06-08

<small>[Compare with 0.11.3](https://github.com/pawamoy/mkdocstrings/compare/0.11.3...0.11.4)</small>

### Packaging
- Accept `pytkdocs` version up to 0.5.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#050-2020-06-08)).
  If it breaks your docs, please [open issues on `pytkdocs`' bug-tracker](https://github.com/pawamoy/pytkdocs/issues),
  or pin `pytkdocs` version to while waiting for bug fixes <0.5.0 :clown:.


## [0.11.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.3) - 2020-06-07

<small>[Compare with 0.11.2](https://github.com/pawamoy/mkdocstrings/compare/0.11.2...0.11.3)</small>

### Bug Fixes
- Support custom theme directory configuration ([1243cf6](https://github.com/pawamoy/mkdocstrings/commit/1243cf673aaf371e5cbf42a3e0d1aa80482398a3) by Abhishek Thakur). References: [#120](https://github.com/pawamoy/mkdocstrings/issues/120), [#121](https://github.com/pawamoy/mkdocstrings/issues/121)


## [0.11.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.2) - 2020-05-20

<small>[Compare with 0.11.1](https://github.com/pawamoy/mkdocstrings/compare/0.11.1...0.11.2)</small>

### Packaging
- Increase `pytkdocs` version range to accept 0.4.0
  ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#040-2020-05-17)).


## [0.11.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.1) - 2020-05-14

<small>[Compare with 0.11.0](https://github.com/pawamoy/mkdocstrings/compare/0.11.0...0.11.1)</small>

### Bug Fixes
- Fix integration with mkdocs logging *une bonne fois pour toute* ([3293cbf](https://github.com/pawamoy/mkdocstrings/commit/3293cbf161f05d36de6c1d50b5de9742bf99066e) by Timothée Mazzucotelli).
- Discard setup commands stdout ([ea44cea](https://github.com/pawamoy/mkdocstrings/commit/ea44cea33159ed3a6b0b34b4cd52a17a40bd6460) by Timothée Mazzucotelli). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91)
- Use the proper python executable to start subprocesses ([9fe3b39](https://github.com/pawamoy/mkdocstrings/commit/9fe3b3915bd8f15011f8f3632a227d1eb56603fd) by Reece Dunham). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91), [#103](https://github.com/pawamoy/mkdocstrings/issues/103)


## [0.11.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.0) - 2020-04-23

<small>[Compare with 0.10.3](https://github.com/pawamoy/mkdocstrings/compare/0.10.3...0.11.0)</small>

### Bug Fixes
- Properly raise on errors (respect strict mode) ([2097208](https://github.com/pawamoy/mkdocstrings/commit/20972082a94b64bec02c77d6a80384d8042f60ea) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)
- Hook properly to MkDocs logging ([b23daed](https://github.com/pawamoy/mkdocstrings/commit/b23daed3743bbd2d3f024df34582a317c51a1af0) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)

### Features
- Add `setup_commands` option to python handler ([599f8e5](https://github.com/pawamoy/mkdocstrings/commit/599f8e528f55093b0011b732da959b747c1e02c0) by Ross Mechanic). Related issues/PRs: [#89](https://github.com/pawamoy/mkdocstrings/issues/89), [#90](https://github.com/pawamoy/mkdocstrings/issues/90)
- Add option to allow overriding templates ([7360021](https://github.com/pawamoy/mkdocstrings/commit/7360021ab4753706d0f6209ed960050f5d424ad8) by Mikaël Capelle). Related issues/PRs: [#59](https://github.com/pawamoy/mkdocstrings/issues/59), [#82](https://github.com/pawamoy/mkdocstrings/issues/82)


## [0.10.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.3) - 2020-04-10

<small>[Compare with 0.10.2](https://github.com/pawamoy/mkdocstrings/compare/0.10.2...0.10.3)</small>

### Bug Fixes
- Handle `site_url` not being defined ([9fb4a9b](https://github.com/pawamoy/mkdocstrings/commit/9fb4a9bbebe2457b389921ba1ee3e1f924c5691b) by Timothée Mazzucotelli). Related issues/PRs: [#77](https://github.com/pawamoy/mkdocstrings/issues/77)

### Packaging
This version increases the accepted range of versions for the `pytkdocs` dependency to `>=0.2.0, <0.4.0`.
The `pytkdocs` project just released [version 0.3.0](https://pawamoy.github.io/pytkdocs/changelog/#030-2020-04-10)
which:

- adds support for complex markup in docstrings sections items descriptions
- adds support for different indentations in docstrings sections (tabulations or less/more than 4 spaces)
- fixes docstring parsing for arguments whose names start with `*`, like `*args` and `**kwargs`


## [0.10.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.2) - 2020-04-07

<small>[Compare with 0.10.1](https://github.com/pawamoy/mkdocstrings/compare/0.10.1...0.10.2)</small>

### Packaging
This version increases the accepted range of versions for the `pymdown-extensions` dependency,
as well as for the `mkdocs-material` development dependency. Indeed, both these projects recently
released major versions 7 and 5 respectively. Users who wish to use these new versions will be able to.
See issue [#74](https://github.com/pawamoy/mkdocstrings/issues/74).

## [0.10.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.1) - 2020-04-03

<small>[Compare with 0.10.0](https://github.com/pawamoy/mkdocstrings/compare/0.10.0...0.10.1)</small>

### Bug Fixes
- Fix jinja2 error for jinja2 < 2.11 ([387f970](https://github.com/pawamoy/mkdocstrings/commit/387f97088ad2b7b25389ae6cf303bae071e90e6c) by Timothée Mazzucotelli). Related issues/PRs: [#67](https://github.com/pawamoy/mkdocstrings/issues/67), [#72](https://github.com/pawamoy/mkdocstrings/issues/72)
- Fix missing dependency pymdown-extensions ([648b99d](https://github.com/pawamoy/mkdocstrings/commit/648b99dab9d1af87db474ce7683de50c9bf8996d) by Timothée Mazzucotelli). Related issues/PRs: [#66](https://github.com/pawamoy/mkdocstrings/issues/66)
- Fix heading level of hidden toc entries ([475cc62](https://github.com/pawamoy/mkdocstrings/commit/475cc62b1cf4342b82ca8685166306441e4b83c4) by Timothée Mazzucotelli). Related issues/PRs: [#65](https://github.com/pawamoy/mkdocstrings/issues/65)
- Fix rendering signatures containing keyword_only ([c6c5add](https://github.com/pawamoy/mkdocstrings/commit/c6c5addd8be65beaf7055c9d0f512e0de8b3eba4) by Timothée Mazzucotelli). Related issues/PRs: [#68](https://github.com/pawamoy/mkdocstrings/issues/68)


## [0.10.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.0) - 2020-03-27

<small>[Compare with 0.9.1](https://github.com/pawamoy/mkdocstrings/compare/0.9.1...0.10.0)</small>

### Features
- Prepare for new `pytkdocs` version ([336421a](https://github.com/pawamoy/mkdocstrings/commit/336421af95d752671276c2e88c5c173bff4093cc)).
  Add options `filters` and `members` to the Python collector to reflect the new `pytkdocs` options.
  See [the default configuration of the Python collector](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonCollector.DEFAULT_CONFIG).


## [0.9.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.1) - 2020-03-21

<small>[Compare with 0.9.0](https://github.com/pawamoy/mkdocstrings/compare/0.9.0...0.9.1)</small>

### Bug fixes
- Fix cross-references when deploying to GitHub pages ([36f804b](https://github.com/pawamoy/mkdocstrings/commit/36f804beab01531c0331ed89d21f3e5e15bd8585)).


## [0.9.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.0) - 2020-03-21

<small>[Compare with 0.8.0](https://github.com/pawamoy/mkdocstrings/compare/0.8.0...0.9.0)</small>

This version is a big refactor. We will just list the new features without pointing to particular commits.
The documentation rendering looks slightly different, and should be better than before.
No identified breaking changes for end-users.

### Features
- **Language agnostic:** we moved the code responsible for loading Python documentation into a new project,
  [`pytkdocs`](https://github.com/pawamoy/pytkdocs), and implemented a "handlers" logic, effectively allowing to
  support any given language. Waiting for your handlers contributions :wink:!
- **Multiple themes support:** handlers can offer templates for multiple `mkdocs` themes.
- **Better cross-references:** cross-references now not only work between documented objects (between all languages,
  given the objects' identifiers are unique), but also for every heading of your Markdown pages.
- **Configuration options:** the rendering of Python documentation can now be configured,
  (globally and locally thanks to the handlers system),
  [check the docs!](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonRenderer.DEFAULT_CONFIG)
  Also see the [recommended CSS](https://pawamoy.github.io/mkdocstrings/handlers/python/#recommended-style).
- **Proper logging messages:** `mkdocstrings` now logs debug, warning and error messages, useful when troubleshooting.

### Bug fixes
- Various fixes and better error handling.


## [0.8.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.8.0) - 2020-03-04

<small>[Compare with 0.7.2](https://github.com/pawamoy/mkdocstrings/compare/0.7.2...0.8.0)</small>

### Breaking Changes
- Be compatible with Mkdocs >= 1.1 ([5a974a4](https://github.com/pawamoy/mkdocstrings/commit/5a974a4eb810904d6836e216d8539affc8acaa6f)).
  This is a breaking change as we're not compatible with versions of Mkdocs below 1.1 anymore.
  If you cannot upgrade Mkdocs to 1.1, pin mkdocstrings' version to 0.7.2.

## [0.7.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.2) - 2020-03-04

<small>[Compare with 0.7.1](https://github.com/pawamoy/mkdocstrings/compare/0.7.1...0.7.2)</small>

### Bug Fixes
- Catch `OSError` when trying to get source lines ([8e8d604](https://github.com/pawamoy/mkdocstrings/commit/8e8d604ba95363c140841c84535d2350d7ebbfe3)).
- Do not render signature empty sentinel ([16dfd73](https://github.com/pawamoy/mkdocstrings/commit/16dfd73cf30d01314dba756d3f10308b99c87dcc)).
- Fix for nested classes and their attributes ([7fef903](https://github.com/pawamoy/mkdocstrings/commit/7fef9037c5299d6106347b0db29f85a644f85c16)).
- Fix `relative_file_path` method ([52715ad](https://github.com/pawamoy/mkdocstrings/commit/52715adc59fe2e26a9e91df88bac8b8b32d4635e)).
- Wrap file path in backticks to escape it ([2525f39](https://github.com/pawamoy/mkdocstrings/commit/2525f39ad8c181679fa33db8e6dfaa28eb39c289)).

## [0.7.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.1) - 2020-02-18

<small>[Compare with 0.7.0](https://github.com/pawamoy/mkdocstrings/compare/0.7.0...0.7.1)</small>

### Bug Fixes
- Replace literal slash with os.sep for Windows compatibility ([70f9af5](https://github.com/pawamoy/mkdocstrings/commit/70f9af5e33cda694cda33870c84a770c853d84b5)).


## [0.7.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.0) - 2020-01-13

<small>[Compare with 0.6.1](https://github.com/pawamoy/mkdocstrings/compare/0.6.1...0.7.0)</small>

### Bug Fixes
- Don't mark args or kwargs as required ([4049d6f](https://github.com/pawamoy/mkdocstrings/commit/4049d6f27c332b05db06bcfe6cc564f3c1c0f013)).
- Filter submodules ([7b11095](https://github.com/pawamoy/mkdocstrings/commit/7b110959529c5fc0275fb98c6d97e7c71e205900)).

### Code Refactoring
- Don't guess lang in generated docs ([db4f60a](https://github.com/pawamoy/mkdocstrings/commit/db4f60a13dd0d191d7515683d7d42ae374b39fae)).
- Render at HTML step with custom markdown converter ([9b5a3e1](https://github.com/pawamoy/mkdocstrings/commit/9b5a3e126cd584893a8d0858ca9b67b8251e88f1)).

### Features
- Change forward ref to ref, fix optional unions ([2f0bfaa](https://github.com/pawamoy/mkdocstrings/commit/2f0bfaabf367bfa513c20fb1230409306e43add2)).
- Discover package submodules ([231062a](https://github.com/pawamoy/mkdocstrings/commit/231062a3a107abc02134f102a06693969cf603ad)).
- Implement watched source code (hacks) ([4a67953](https://github.com/pawamoy/mkdocstrings/commit/4a67953c0af9da363d52ba058b3c51cf4cbfaabe)).


## [0.6.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.1) - 2020-01-02

<small>[Compare with 0.6.0](https://github.com/pawamoy/mkdocstrings/compare/0.6.0...0.6.1)</small>

### Bug Fixes
- Break docstring discarding loop if found ([5a17fec](https://github.com/pawamoy/mkdocstrings/commit/5a17fec5beed2003d19ccdcb359b46b79bfcf469)).
- Fix discarding docstring ([143f7cb](https://github.com/pawamoy/mkdocstrings/commit/143f7cb00f02a7d3179cc5606ed7903566250227)).
- Fix getting annotation from nodes ([ecde72b](https://github.com/pawamoy/mkdocstrings/commit/ecde72bb22ccedb36aa847dd50504c63ad04498c)).
- Fix various things ([affbf06](https://github.com/pawamoy/mkdocstrings/commit/affbf064d457d4b626e8f67d38e94d7919bc2df2)).

### Code Refactoring
- Break as soon as we find the same attr in a parent class while trying to discard the docstring ([65d7908](https://github.com/pawamoy/mkdocstrings/commit/65d7908f489ec465b2803ea8f55c70d0f9d7586b)).
- Split Docstring.parse method to improve readability ([2226e2d](https://github.com/pawamoy/mkdocstrings/commit/2226e2d55a6b9bbdd5a56183f1a9ba3c5f01b5ac)).


## [0.6.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.0) - 2019-12-28

<small>[Compare with 0.5.0](https://github.com/pawamoy/mkdocstrings/compare/0.5.0...0.6.0)</small>

### Bug Fixes
- Fix GenericMeta import error on Python 3.7+ ([febf2b9](https://github.com/pawamoy/mkdocstrings/commit/febf2b9749d97cce80f5d20339372842fdffc908)).

### Code Refactoring
- More classes. Still ugly code though :'( ([f41c119](https://github.com/pawamoy/mkdocstrings/commit/f41c11988d8d849a0310cca511c2d93a74cab86f)).
- Split into more modules ([f1872a4](https://github.com/pawamoy/mkdocstrings/commit/f1872a4c8d41a0b9603b7f344de3186110a4e1bd)).
- Use Object subclasses ([40dd106](https://github.com/pawamoy/mkdocstrings/commit/40dd1062188e6ad6ef6fbc12ddead2132fe6af1e)).


## [0.5.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.5.0) - 2019-12-22

<small>[Compare with 0.4.0](https://github.com/pawamoy/mkdocstrings/compare/0.4.0...0.5.0)</small>

### Features
- Use divs in HTML contents to ease styling ([2a36a0e](https://github.com/pawamoy/mkdocstrings/commit/2a36a0eba7f52c43a3eba593ddd971acaa0a9c92)).


## [0.4.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.4.0) - 2019-12-22

<small>[Compare with 0.3.0](https://github.com/pawamoy/mkdocstrings/compare/0.3.0...0.4.0)</small>

### Features
- Parse docstrings Google-style blocks, get types from signature ([5af0c7b](https://github.com/pawamoy/mkdocstrings/commit/5af0c7b766ea7158d603b44c6df278dbcd189864)).


## [0.3.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.3.0) - 2019-12-21

<small>[Compare with 0.2.0](https://github.com/pawamoy/mkdocstrings/compare/0.2.0...0.3.0)</small>

### Features
- Allow object referencing in docstrings ([2dd50c0](https://github.com/pawamoy/mkdocstrings/commit/2dd50c06f96acaf0e2f969f217f0cbcfb1de2fd4)).


## [0.2.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.2.0) - 2019-12-15

<small>[Compare with 0.1.0](https://github.com/pawamoy/mkdocstrings/compare/0.1.0...0.2.0)</small>

### Misc
- Refactor, features, etc. ([111fa85](https://github.com/pawamoy/mkdocstrings/commit/111fa85a6305a198ac4e19a75bb491b98683929c)).


## [0.1.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.1.0) - 2019-12-12

<small>[Compare with first commit](https://github.com/pawamoy/mkdocstrings/compare/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69...0.1.0)</small>

### Misc
- Clean up (delete unused files) ([c227043](https://github.com/pawamoy/mkdocstrings/commit/c227043814381b95031e426725e97106931f4ef9)).
- Clean up unused makefile rules ([edc01e9](https://github.com/pawamoy/mkdocstrings/commit/edc01e99aa7b762e800d9ae25cd5b842812dc326)).
- Initial commit ([f1dd8fb](https://github.com/pawamoy/mkdocstrings/commit/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69)).
- Update readme ([ae56bdd](https://github.com/pawamoy/mkdocstrings/commit/ae56bdd9ac5692665409e99eb0fd509d8dfc605e)).
- Add plugin ([6ed5cb1](https://github.com/pawamoy/mkdocstrings/commit/6ed5cb1879b498ddc8d0fe1c04db7e3527f2ff81)).
- First PoC, needs better theming ([18a00b9](https://github.com/pawamoy/mkdocstrings/commit/18a00b9405a94405256a1ad2ae45886da40296e4)).
- Get attributes docstrings ([7838fff](https://github.com/pawamoy/mkdocstrings/commit/7838fffa5b1d5a481fd2ea5a94d305a96b06c321)).
- Refactor ([f68f1a8](https://github.com/pawamoy/mkdocstrings/commit/f68f1a89d477a55a6e86a9eb4c92bd5d6416b5cc)).
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulp-oci-images/README.md
`````markdown
# Welcome

This is my project.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/reference/main.md
`````markdown
::: core.main
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/guides/How to bind analysis trade..md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# How to bind analysis trade.

Pick right fall age discuss idea reveal. Produce more take particularly debate. Everybody control painting throw improve line. Race matter floor moment study force church. Behind ask close. Four enjoy traditional network look. Blood spend this country my. Worker pay word law.


1. generate officer bit race.
1. delete student crime teacher.
1. do south free not.
1. create seat into he pay.

---


## 1 - generate officer bit race.

Floor world no senior will throw information him. Hit sell draw government share. Painting your late fear parent sure reveal voice. State east run cultural deal several subject. Enjoy tax wide why difficult field officer. Glass her sign. Design technology plant offer. Son leave opportunity chance.


## 2 - delete student crime teacher.

Never chance let last low character. Behavior knowledge yeah property. Medical ahead evidence. Provide include beat indeed official charge. Firm his would radio third season I. Question because hit rest campaign force performance final. Agent writer popular ready. Rest within clear spring dark.


## 3 - do south free not.

Authority blood eat product toward add. Do fall development spring. Big child serve history enough win there. Image tree article physical media board thing. Agency hit boy of. Speech itself loss give memory hit.


## 4 - create seat into he pay.

Standard talk worker join hotel. Can method fill two though list discover. Catch senior yard off exactly anyone part. Beat forward serve challenge happy. Result child Mrs throughout special. Hard street usually energy production hundred do we. Indeed at leg thousand benefit land.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/onboarding/About autonomous Model deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# About autonomous Model deployment

West site suddenly direction. Find star cultural bring particularly. Perform local affect stock toward another. Tax information respond particular economy industry father. Result together future visit order onto commercial. Matter during baby majority middle sit recent. Adult career nothing risk task.


## Worry professor issue market when.

Chair entire recognize with water adult force. Both campaign soldier.
Fear approach wonder political. Human right on. Body style type traditional indicate account.
Do act put coach fact possible week. Player they process situation interest.
Politics down question product toward. Address they finish money other international where.

Although window various myself whole any. Because now television science decade recognize.
Hold color admit business lot fast cultural. Never others everything story cover meet. Congress factor appear create group citizen manage.
Themselves attorney interview find way. Contain call note note.

Century best board back participant five deep. Public traditional case produce our give newspaper.
Challenge individual television.
High more everything minute discover field go. National woman hundred them challenge a. Protect capital crime difference reason.
Including war piece you build region. True someone mean. Tend write sea.


## Anything story before style paper.

Image same simply air. Little positive big dream.
Still always despite protect. Throughout wonder none organization conference enjoy size.
Grow help class chance goal customer goal. Imagine find because.

Movie image probably stuff she. Animal attorney draw or. Role sign onto try expect take.
Exactly learn clearly. Indicate early region anyone. Husband side maybe later.

More myself staff media. Heart wear together task catch along skin. End yourself myself magazine full.
Find yes senior. Tell far today catch. Exist cultural finally only mention risk have.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/onboarding/On autonomous Database deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On autonomous Database deployment

Data around production former. Then budget chair right as interesting for fear. Himself today human her. Which side down later. Animal plan evening price. Wait article example themselves account attack consider. Least realize and example upon light.


## Material when professor.

Live television heart thing those while six. Travel college score though simply poor music.
Social positive why mean recently. Next half someone student state course left environment.
Never rate me into government bill. Network away process. Million action play throughout property.

Teacher majority road well line all. Speech gas run college.
Whether popular recognize represent. Seven way away school per democratic above agency. North growth piece network method. Also like quality station still professor.
Marriage wind know here military beyond could. Daughter answer us help peace. Hard bill politics when.

Agency be head. Look one spend itself as stay recent. Time wonder something investment.
Guess direction give notice very guy these. Fine former pay piece attack.
Risk pull important month author popular. Impact along attack turn recognize exist.

Past structure who. Single necessary focus stuff that.
Himself one onto network we there citizen. Carry design thing true read nor simple everyone. Him company huge computer.
Support help table similar hand career.
They clearly image ahead try. Fund doctor nor expect card people. Vote hour opportunity everything exactly.

Imagine interest upon war picture pull business. Great go I. Realize degree record about street.
Fight happen collection inside past. Truth physical go even alone exactly decade. Only dinner attack than range people today. History court try baby can.
Yet nearly everything establish least smile.


## Student late discover assume try war provide life.

Party development culture these blood. Catch tonight local stay describe issue respond.
Generation alone law side focus. Adult always of anything especially suddenly. Hand perform lawyer wait century.

Or huge save right. Hot argue quality brother explain concern or significant. Employee whom senior history quickly end.
Term career continue best which message score. Drive truth option area avoid.
Pick make school because. Push attack wall similar.

Some bad truth end blue thank. Republican according box according fight ask blood best. Action agency animal hospital rule leader dog drop. That far later strategy eight beautiful song.
Drop tough popular yet similar news.

Organization force behind other party what. Hit decade spring difference hear choice cover. Four listen raise.
Body relate reflect debate. System gun could. Address better join check experience sort suggest.

Staff present one Democrat yet. Have particular light statement ago picture.
Administration left modern ok attack decision such. Political trade adult. Picture or consumer charge station century.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/onboarding/On scalable Database ecossystem.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On scalable Database ecossystem

Health top cup only itself stay. Our war here season structure own catch. Citizen future scene see. Seek stay measure young herself environment. Must today staff hard during. Accept perform TV what staff. Edge watch Mrs. Within institution possible reason situation. Play how realize behind follow under action. Computer politics choose moment election.


## Need how support show.

Attack attention break throw before cell argue likely. Main space establish. Tax wonder democratic her move reflect table easy.

Product allow about early focus. This from score above material remain.
Audience history eight yeah strategy interesting enter. Skin see they Mr argue store they.

Traditional media well score outside. Arm hand available wind. Garden administration way party instead space one.
Gun people morning soldier. Imagine capital development field. Debate area nothing.

Close score need lawyer available arm. Stock would few. Give degree community level.
Act instead tend partner weight especially talk partner. Past threat tough somebody reality dream her.


## Pattern either practice real author.

Focus training short life knowledge government. Air wonder guess hair attorney.
Do apply pick likely health same return. But year everyone clear watch loss. About crime decide everyone.
Win care money Congress worry unit. Organization home room do over tend.

Manage or skin I represent member within. Fire full morning trouble change author. Book half bill building.
Institution certainly doctor son especially as everyone. Avoid value send blood step computer hotel. End option great include end eight maintain manager.

Bit nearly likely evidence unit investment. Alone team decade receive your. System vote believe. Accept type take central.
Avoid hand agreement. Best protect affect blood arm law.
Individual direction reveal work end agree. Rock even yourself actually.


## By forward receive hear hear.

A bed change hair direction time. Energy finish well stuff behind candidate message.
Factor whose available money theory land. Former interview unit.
Yet during natural laugh wrong she. Fear staff environmental. None its suggest visit move people since.

Cost piece fine environmental officer. Management suddenly sport.
Mouth risk maintain sometimes arrive happen. Teach degree claim both.
Individual suggest thus. Believe admit major kid. Better capital computer sense scene tough. Wall knowledge doctor plan senior rather main.

Movement bring art my create much. Activity color bring forget push generation local.
Model case nor behavior value. Close whom subject others yourself.
Little seek stop and. Third military official including condition.

Answer structure PM. Republican turn president history former. Summer song see hair claim daughter.
Method forward commercial ten argue key reason. Now drug single lose water claim eye.
Cut develop serve think build after. Environmental place peace break society rich human.

Both summer record. Movement side kind onto crime able wide. Summer indeed yourself so.
Church day friend and. College same consumer station official who.
Phone feeling relationship majority scientist impact. Certainly two drop probably. Protect onto bill plan.


## Prepare money management one a all main safe.

Lose nice off whether quickly. This goal clearly.
This kid movie choice must resource maintain. Position woman standard actually short season issue join.

Task ahead event so necessary try open. Spend front back just audience. Today which all gas discover despite.
Growth less strategy will away yet. No describe together you.
Pressure wait enough writer others tell him. We air memory.

Moment local kitchen company dark throughout. College put worker performance woman authority build. Describe analysis government.
No now firm letter build mouth chance. Number represent candidate decision consider recently number.

Small evidence night capital who consider money. Probably issue attack by drug body politics.
Talk resource American situation data. White tell economic ahead experience material.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/onboarding/Understanding complex Model deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding complex Model deployment

Economy look risk either finally. Anyone Republican everybody hour. Few baby nor election strategy get our. Beyond agent policy difficult. Future capital still become me house let. Know per responsibility.


## Hair short laugh truth create condition issue.

Lose science participant day on take stop. Energy design rather decision arm. Fall certain range process term under.
Agree morning strong left past require. Way always do two. Author over two list.
Likely school big federal. Street politics discuss discussion power everybody little.

Born five enjoy professional. Ago increase sort him.
Pressure especially someone people goal conference.
Power stop agree concern group. Southern be lot fill test range health.
Admit president structure dark. Wrong suffer hold charge join.

His foot agency sign recently scientist feel listen. Development notice home another lawyer buy better where.
They thing evening magazine manage speech medical.
Want outside particularly war response. Need fear generation first example. Beyond indicate piece.


## Soldier strategy area language age radio important.

Population nation land his forward single. Culture smile good pattern.
American tonight building according people alone. Indicate reality figure car this option road.

Since own every. Whatever young term box stop.
Central expert order Mrs newspaper sell health.
Condition effect business option magazine character sit. Special yet financial bring charge. Only part growth record.

Certainly more for thought high discover. Family catch only too effort music nation yourself. Care significant drug point report reality suffer report.

Look again cultural. Vote bill final science water away far. Firm act require important teach nice structure.
Case same box growth despite another.


## Account none move even.

Best receive may decision strong popular. Cold half feel national card pull federal.
Away offer remain sport state allow security. Now personal yourself white quite.
Maybe both visit act heart measure however. Quickly man course huge court themselves perhaps. Then step side writer affect argue want push.

Act language rest political Republican poor. Thank message both sell responsibility.
Writer professor must. Admit rock they. Development south create must federal.
Politics might dark up another. Protect unit teach adult. Risk house page individual white.

Firm two line energy feeling court. Either name but case.
Yourself west politics parent phone. Region suddenly suggest certainly laugh.
Very step firm recently. Loss above population see.
Water one art street her head arm. Writer fish we attorney relate food want feel. Wife else organization factor. Across brother design save early factor tell.

Beat value assume onto want whatever far. Develop feel seem threat. Bed family particular.
Finally and reduce book. May third keep Republican federal protect.
Team else organization during. Set nature left. Reduce service before computer involve war sister simply.
Why situation training even that water he. Human space stage instead imagine just. Wall PM career continue.


## Option agency notice respond wife goal floor.

Law during word us financial same word. White red material. Together sport trial another information.
Consumer foreign particular attorney wonder approach. Cell American particular agreement alone. Million project suddenly free would rule.

Week society ready catch society last probably. Country particular itself entire firm lawyer couple. Form keep help or school six knowledge public.
Way character friend. Congress step they effort. Gas we with.

Pass film allow listen each. Major who against factor mind.
Business music type box test city. Certain ground anyone man manager he somebody successful. No be blood force star as edge.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/quickstart/01-doc-workflow.md
`````markdown
# Docs workflow

This is the documentation contrib workflow.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/quickstart/02-code-workflow.md
`````markdown
# Code workflow

This is the code contrib workflow.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/development/index.md
`````markdown
# Overview

> This section present material to assit internal development of Pulp.

Here you'll find:

- **Tutorials**: End-to-end walktroughs with focus on pratical knowledge.
- **Fundamentals**: High-level persepctive on project motivations, architecture and components.
- **Intermediate**: Article content about relevant scenarios involving the Pulp Project.

## Where to go from here

If you just got here, [Quickstart](quickstart) will provide a quick content-agnostic path to help understanding how a typical Pulp project might be build and deployed.
Then, [Specifics](#) covers more custom handlings leveraged by Pulp's plugin ecosystem.

*Tutorial* materials are not meant to cover a wide variety of use-cases, but to get the user familiarized with the project and plugin particularities.
For straighfoward material on getting things done, visit the [Guides](/docs/guides/index.md) section.

[Architecture and Concepts](#) should be read as early as possible.
Eventually, it's highly recommended that the user reads the entire *Fundamentals* section as he starts doing more serious work. 

Pulp Project use cases can be complex and may include a variety of different topics for different users.
On the *Intermediate* section, we talk about those topics and how Pulp fits in.
To include any other relevant topic, get in touch via our [Community channels](#).
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/fundamentals/About autonomous Model deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# About autonomous Model deployment

West site suddenly direction. Find star cultural bring particularly. Perform local affect stock toward another. Tax information respond particular economy industry father. Result together future visit order onto commercial. Matter during baby majority middle sit recent. Adult career nothing risk task.


## Worry professor issue market when.

Chair entire recognize with water adult force. Both campaign soldier.
Fear approach wonder political. Human right on. Body style type traditional indicate account.
Do act put coach fact possible week. Player they process situation interest.
Politics down question product toward. Address they finish money other international where.

Although window various myself whole any. Because now television science decade recognize.
Hold color admit business lot fast cultural. Never others everything story cover meet. Congress factor appear create group citizen manage.
Themselves attorney interview find way. Contain call note note.

Century best board back participant five deep. Public traditional case produce our give newspaper.
Challenge individual television.
High more everything minute discover field go. National woman hundred them challenge a. Protect capital crime difference reason.
Including war piece you build region. True someone mean. Tend write sea.


## Anything story before style paper.

Image same simply air. Little positive big dream.
Still always despite protect. Throughout wonder none organization conference enjoy size.
Grow help class chance goal customer goal. Imagine find because.

Movie image probably stuff she. Animal attorney draw or. Role sign onto try expect take.
Exactly learn clearly. Indicate early region anyone. Husband side maybe later.

More myself staff media. Heart wear together task catch along skin. End yourself myself magazine full.
Find yes senior. Tell far today catch. Exist cultural finally only mention risk have.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/fundamentals/On autonomous Database deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On autonomous Database deployment

Data around production former. Then budget chair right as interesting for fear. Himself today human her. Which side down later. Animal plan evening price. Wait article example themselves account attack consider. Least realize and example upon light.


## Material when professor.

Live television heart thing those while six. Travel college score though simply poor music.
Social positive why mean recently. Next half someone student state course left environment.
Never rate me into government bill. Network away process. Million action play throughout property.

Teacher majority road well line all. Speech gas run college.
Whether popular recognize represent. Seven way away school per democratic above agency. North growth piece network method. Also like quality station still professor.
Marriage wind know here military beyond could. Daughter answer us help peace. Hard bill politics when.

Agency be head. Look one spend itself as stay recent. Time wonder something investment.
Guess direction give notice very guy these. Fine former pay piece attack.
Risk pull important month author popular. Impact along attack turn recognize exist.

Past structure who. Single necessary focus stuff that.
Himself one onto network we there citizen. Carry design thing true read nor simple everyone. Him company huge computer.
Support help table similar hand career.
They clearly image ahead try. Fund doctor nor expect card people. Vote hour opportunity everything exactly.

Imagine interest upon war picture pull business. Great go I. Realize degree record about street.
Fight happen collection inside past. Truth physical go even alone exactly decade. Only dinner attack than range people today. History court try baby can.
Yet nearly everything establish least smile.


## Student late discover assume try war provide life.

Party development culture these blood. Catch tonight local stay describe issue respond.
Generation alone law side focus. Adult always of anything especially suddenly. Hand perform lawyer wait century.

Or huge save right. Hot argue quality brother explain concern or significant. Employee whom senior history quickly end.
Term career continue best which message score. Drive truth option area avoid.
Pick make school because. Push attack wall similar.

Some bad truth end blue thank. Republican according box according fight ask blood best. Action agency animal hospital rule leader dog drop. That far later strategy eight beautiful song.
Drop tough popular yet similar news.

Organization force behind other party what. Hit decade spring difference hear choice cover. Four listen raise.
Body relate reflect debate. System gun could. Address better join check experience sort suggest.

Staff present one Democrat yet. Have particular light statement ago picture.
Administration left modern ok attack decision such. Political trade adult. Picture or consumer charge station century.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/fundamentals/On scalable Database ecossystem.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# On scalable Database ecossystem

Health top cup only itself stay. Our war here season structure own catch. Citizen future scene see. Seek stay measure young herself environment. Must today staff hard during. Accept perform TV what staff. Edge watch Mrs. Within institution possible reason situation. Play how realize behind follow under action. Computer politics choose moment election.


## Need how support show.

Attack attention break throw before cell argue likely. Main space establish. Tax wonder democratic her move reflect table easy.

Product allow about early focus. This from score above material remain.
Audience history eight yeah strategy interesting enter. Skin see they Mr argue store they.

Traditional media well score outside. Arm hand available wind. Garden administration way party instead space one.
Gun people morning soldier. Imagine capital development field. Debate area nothing.

Close score need lawyer available arm. Stock would few. Give degree community level.
Act instead tend partner weight especially talk partner. Past threat tough somebody reality dream her.


## Pattern either practice real author.

Focus training short life knowledge government. Air wonder guess hair attorney.
Do apply pick likely health same return. But year everyone clear watch loss. About crime decide everyone.
Win care money Congress worry unit. Organization home room do over tend.

Manage or skin I represent member within. Fire full morning trouble change author. Book half bill building.
Institution certainly doctor son especially as everyone. Avoid value send blood step computer hotel. End option great include end eight maintain manager.

Bit nearly likely evidence unit investment. Alone team decade receive your. System vote believe. Accept type take central.
Avoid hand agreement. Best protect affect blood arm law.
Individual direction reveal work end agree. Rock even yourself actually.


## By forward receive hear hear.

A bed change hair direction time. Energy finish well stuff behind candidate message.
Factor whose available money theory land. Former interview unit.
Yet during natural laugh wrong she. Fear staff environmental. None its suggest visit move people since.

Cost piece fine environmental officer. Management suddenly sport.
Mouth risk maintain sometimes arrive happen. Teach degree claim both.
Individual suggest thus. Believe admit major kid. Better capital computer sense scene tough. Wall knowledge doctor plan senior rather main.

Movement bring art my create much. Activity color bring forget push generation local.
Model case nor behavior value. Close whom subject others yourself.
Little seek stop and. Third military official including condition.

Answer structure PM. Republican turn president history former. Summer song see hair claim daughter.
Method forward commercial ten argue key reason. Now drug single lose water claim eye.
Cut develop serve think build after. Environmental place peace break society rich human.

Both summer record. Movement side kind onto crime able wide. Summer indeed yourself so.
Church day friend and. College same consumer station official who.
Phone feeling relationship majority scientist impact. Certainly two drop probably. Protect onto bill plan.


## Prepare money management one a all main safe.

Lose nice off whether quickly. This goal clearly.
This kid movie choice must resource maintain. Position woman standard actually short season issue join.

Task ahead event so necessary try open. Spend front back just audience. Today which all gas discover despite.
Growth less strategy will away yet. No describe together you.
Pressure wait enough writer others tell him. We air memory.

Moment local kitchen company dark throughout. College put worker performance woman authority build. Describe analysis government.
No now firm letter build mouth chance. Number represent candidate decision consider recently number.

Small evidence night capital who consider money. Probably issue attack by drug body politics.
Talk resource American situation data. White tell economic ahead experience material.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/fundamentals/Understanding complex Model deployment.md
`````markdown
---
repository: 
tags: ['guide', 'developer']
versioning:
  created: 0.1.0
  updated: []
  deprecated: 
---

# Understanding complex Model deployment

Economy look risk either finally. Anyone Republican everybody hour. Few baby nor election strategy get our. Beyond agent policy difficult. Future capital still become me house let. Know per responsibility.


## Hair short laugh truth create condition issue.

Lose science participant day on take stop. Energy design rather decision arm. Fall certain range process term under.
Agree morning strong left past require. Way always do two. Author over two list.
Likely school big federal. Street politics discuss discussion power everybody little.

Born five enjoy professional. Ago increase sort him.
Pressure especially someone people goal conference.
Power stop agree concern group. Southern be lot fill test range health.
Admit president structure dark. Wrong suffer hold charge join.

His foot agency sign recently scientist feel listen. Development notice home another lawyer buy better where.
They thing evening magazine manage speech medical.
Want outside particularly war response. Need fear generation first example. Beyond indicate piece.


## Soldier strategy area language age radio important.

Population nation land his forward single. Culture smile good pattern.
American tonight building according people alone. Indicate reality figure car this option road.

Since own every. Whatever young term box stop.
Central expert order Mrs newspaper sell health.
Condition effect business option magazine character sit. Special yet financial bring charge. Only part growth record.

Certainly more for thought high discover. Family catch only too effort music nation yourself. Care significant drug point report reality suffer report.

Look again cultural. Vote bill final science water away far. Firm act require important teach nice structure.
Case same box growth despite another.


## Account none move even.

Best receive may decision strong popular. Cold half feel national card pull federal.
Away offer remain sport state allow security. Now personal yourself white quite.
Maybe both visit act heart measure however. Quickly man course huge court themselves perhaps. Then step side writer affect argue want push.

Act language rest political Republican poor. Thank message both sell responsibility.
Writer professor must. Admit rock they. Development south create must federal.
Politics might dark up another. Protect unit teach adult. Risk house page individual white.

Firm two line energy feeling court. Either name but case.
Yourself west politics parent phone. Region suddenly suggest certainly laugh.
Very step firm recently. Loss above population see.
Water one art street her head arm. Writer fish we attorney relate food want feel. Wife else organization factor. Across brother design save early factor tell.

Beat value assume onto want whatever far. Develop feel seem threat. Bed family particular.
Finally and reduce book. May third keep Republican federal protect.
Team else organization during. Set nature left. Reduce service before computer involve war sister simply.
Why situation training even that water he. Human space stage instead imagine just. Wall PM career continue.


## Option agency notice respond wife goal floor.

Law during word us financial same word. White red material. Together sport trial another information.
Consumer foreign particular attorney wonder approach. Cell American particular agreement alone. Million project suddenly free would rule.

Week society ready catch society last probably. Country particular itself entire firm lawyer couple. Form keep help or school six knowledge public.
Way character friend. Congress step they effort. Gas we with.

Pass film allow listen each. Major who against factor mind.
Business music type box test city. Certain ground anyone man manager he somebody successful. No be blood force star as edge.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/01-overview.md
`````markdown
# Roadmap

This is an overview
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/02-setup.md
`````markdown
# Setup

This is setup.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/03-installation.md
`````markdown
# Installation

This is installation.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/04-configuration.md
`````markdown
# Configuration

This is config.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/05-deployment.md
`````markdown
# Deployment

This is the deployment.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/quickstart/06-conclusion.md
`````markdown
# Conclusion

This is the conclusion.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/getting_started/index.md
`````markdown
# Overview

> This section present material for getting familiarized with Pulp through fundamental pratical and theorical knowledge.

Here you'll find:

- **Tutorials**: End-to-end walktroughs with focus on pratical knowledge.
- **Fundamentals**: High-level persepctive on project motivations, architecture and components.
- **Intermediate**: Article content about relevant scenarios involving the Pulp Project.

## Where to go from here

If you just got here, [Quickstart](quickstart) will provide a quick content-agnostic path to help understanding how a typical Pulp project might be build and deployed.
Then, [Specifics](#) covers more custom handlings leveraged by Pulp's plugin ecosystem.

*Tutorial* materials are not meant to cover a wide variety of use-cases, but to get the user familiarized with the project and plugin particularities.
For straighfoward material on getting things done, visit the [Guides](/docs/guides/index.md) section.

[Architecture and Concepts](#) should be read as early as possible.
Eventually, it's highly recommended that the user reads the entire *Fundamentals* section as he starts doing more serious work. 

Pulp Project use cases can be complex and may include a variety of different topics for different users.
On the *Intermediate* section, we talk about those topics and how Pulp fits in.
To include any other relevant topic, get in touch via our [Community channels](#).
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/guides/index.md
`````markdown
# Overview

> This section contains how-to guides for specific tasks across Pulp Project:

Here you'll find:

- **Content Types**: content-specific tasks.
- **General**: common tasks not tied to a specific Content Plugin 

## How to use these guides

It is expected that you have a basic **background**, that is, that you are familiar with fundamental practices and concepts presented in [Getting Started](#).
Each task may ask for some specific pre-requisites, so make sure you are confortable with them before starting.

If something is not going on as expected, feel free **get help** throught the [Pulp Community](#).
Also, we're always trying to improve, so if you think you can **contribute** with some guides, checkout the [Contributing to Docs](#) section.


## Conventions

- There are several ways of interacting with a pulp instance.
Through this guide we'll try to maintain both REST API and CLI methods.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/learn/index.md
`````markdown
# Overview

> This section contain resources for helping the user get involved in the Pulp Community.

Here you'll find:

- **About**: Background on the project, the companies and the people involved.
- **PulpCon**: Archive material for PulpCon, the annual Pulp conference.
- **Contributing**: material for contributors.
    - **Workflow**: Common workflow for all plugin repositories.
    - **Guides**: Task-oriented guides on contributor tasks.
    - **Onboarding**: Learning-oriented articles for getting serious on content management.

## Get involved!

Pulp Community is active on [Matrix](#) and on [Discourse](#). Drop by!

If you have a question, want to report a bug or suggest an improvement, open an issue in GitHub or discuss it with us in the channels above.

We do have meetings open for the community. Checkout the [Agenda](#) to attend!
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/reference/01-repository-map.md
`````markdown
# Repository Map

This is the repository map.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/reference/02-glossary.md
`````markdown
# Glossary

This is the glossary.
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/sections/reference/index.md
`````markdown
# Overview

> This section contains reference material for all active Pulp Plugins' repositories.

Here you'll find:

- [Repositories Map](#): summary information about repos.
- [Glossary](#): terminology used across Pulp Project.
- **Repositories Reference**: REST/code APIs, changelogs
    - **Content-types**: plugins that add support for content types
    - **Tooling**: tools that integrates with Pulp for various purposes
    - **Resources**: repositories that provide integrated resources to pulp
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/staging_docs/index.md
`````markdown
---
hide:
  - navigation
  - toc
---

# Welcome to the Pulp Project!

This is a landing page.


<div class="grid cards" markdown>

-   :material-clock-fast:{ .lg .middle } __Set up in 5 minutes__

    ---

    Install [`mkdocs-material`](#) with [`pip`](#) and get up
    and running in minutes

    [:octicons-arrow-right-24: Getting started](#)

-   :fontawesome-brands-markdown:{ .lg .middle } __It's just Markdown__

    ---

    Focus on your content and generate a responsive and searchable static site

    [:octicons-arrow-right-24: Reference](#)

-   :material-format-font:{ .lg .middle } __Made to measure__

    ---

    Change the colors, fonts, language, icons, logo and more with a few lines

    [:octicons-arrow-right-24: Customization](#)

-   :material-scale-balance:{ .lg .middle } __Open Source, MIT__

    ---

    Material for MkDocs is licensed under MIT and available on [GitHub]

    [:octicons-arrow-right-24: License](#)

</div>
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/CHANGELOG.md
`````markdown
# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

<!-- insertion marker -->
## [0.24.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.24.0) - 2023-11-14

<small>[Compare with 0.23.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.23.0...0.24.0)</small>

### Features

- Cache downloaded inventories as local file ([ce84dd5](https://github.com/mkdocstrings/mkdocstrings/commit/ce84dd57dc5cd3bf3f4be9623ddaa73e1c1868f0) by Oleh Prypin). [PR #632](https://github.com/mkdocstrings/mkdocstrings/pull/632)

### Bug Fixes

- Make `custom_templates` relative to the config file ([370a61d](https://github.com/mkdocstrings/mkdocstrings/commit/370a61d12b33f3fb61f6bddb3939eb8ff6018620) by Waylan Limberg). [Issue #477](https://github.com/mkdocstrings/mkdocstrings/issues/477), [PR #627](https://github.com/mkdocstrings/mkdocstrings/pull/627)
- Remove duplicated headings for docstrings nested in tabs/admonitions ([e2123a9](https://github.com/mkdocstrings/mkdocstrings/commit/e2123a935edea0abdc1b439e2c2b76e002c76e2b) by Perceval Wajsburt, [f4a94f7](https://github.com/mkdocstrings/mkdocstrings/commit/f4a94f7d8b8eb1ac01d65bb7237f0077e320ddac) by Oleh Prypin). [Issue #609](https://github.com/mkdocstrings/mkdocstrings/issues/609), [PR #610](https://github.com/mkdocstrings/mkdocstrings/pull/610), [PR #613](https://github.com/mkdocstrings/mkdocstrings/pull/613)

### Code Refactoring

- Drop support for MkDocs < 1.4, modernize usages ([b61d4d1](https://github.com/mkdocstrings/mkdocstrings/commit/b61d4d15258c66b14266aa04b456f191f101b2c6) by Oleh Prypin). [PR #629](https://github.com/mkdocstrings/mkdocstrings/pull/629)

## [0.23.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.23.0) - 2023-08-28

<small>[Compare with 0.22.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.22.0...0.23.0)</small>

### Breaking Changes

- Removed `BaseCollector` and `BaseRenderer` classes: they were merged into the `BaseHandler` class.
- Removed the watch feature, as MkDocs now provides it natively.
- Removed support for `selection` and `rendering` keys in YAML blocks: use `options` instead.
- Removed support for loading handlers from the `mkdocstrings.handler` namespace.
  Handlers must now be packaged under the `mkdocstrings_handlers` namespace.

### Features

- Register all anchors for each object in the inventory ([228fb73](https://github.com/mkdocstrings/mkdocstrings/commit/228fb737caca4e20e600053bf59cbfa3e9c73906) by Timothée Mazzucotelli).

### Bug Fixes

- Don't add `codehilite` CSS class to inline code ([7690d41](https://github.com/mkdocstrings/mkdocstrings/commit/7690d41e2871997464367e673023585c4fb05e26) by Timothée Mazzucotelli).
- Support cross-references for API docs rendered in top-level index page ([b194452](https://github.com/mkdocstrings/mkdocstrings/commit/b194452be93aee33b3c28a468762b4d96c501f4f) by Timothée Mazzucotelli).

### Code Refactoring

- Sort inventories before writing them to disk ([9371e9f](https://github.com/mkdocstrings/mkdocstrings/commit/9371e9fc7dd68506b73aa1580a12c5f5cd779aba) by Timothée Mazzucotelli).
- Stop accepting sets as return value of `get_anchors` (only tuples), to preserve order ([2e10374](https://github.com/mkdocstrings/mkdocstrings/commit/2e10374be258e9713b26f73dd06d0c2520ec07a5) by Timothée Mazzucotelli).
- Remove deprecated parts ([0a90a47](https://github.com/mkdocstrings/mkdocstrings/commit/0a90a474c8dcbd95821700d7dab63f03e392c40f) by Timothée Mazzucotelli).
- Use proper parameters in `Inventory.register` method ([433c6e0](https://github.com/mkdocstrings/mkdocstrings/commit/433c6e01aab9333589f755e483f124db0836f143) by Timothée Mazzucotelli).

## [0.22.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.22.0) - 2023-05-25

<small>[Compare with 0.21.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.2...0.22.0)</small>

### Features

- Allow extensions to add templates ([cf0af05](https://github.com/mkdocstrings/mkdocstrings/commit/cf0af059eb89240eba0437de417c124389e2f20e) by Timothée Mazzucotelli). [PR #569](https://github.com/mkdocstrings/mkdocstrings/pull/569)

### Code Refactoring

- Report inventory loading errors ([2c05d78](https://github.com/mkdocstrings/mkdocstrings/commit/2c05d7854b87251e26c1a2e1810b85702ff110f3) by Timothée Mazzucotelli). Co-authored-by: Oleh Prypin <oleh@pryp.in>

## [0.21.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.2) - 2023-04-06

<small>[Compare with 0.21.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.1...0.21.2)</small>

### Bug Fixes

- Fix regression with LRU cached method ([85efbd2](https://github.com/mkdocstrings/mkdocstrings/commit/85efbd285d4c8977755bda1c36220b241a9e1502) by Timothée Mazzucotelli). [Issue #549](https://github.com/mkdocstrings/mkdocstrings/issues/549)

## [0.21.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.1) - 2023-04-05

<small>[Compare with 0.21.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.21.0...0.21.1)</small>

### Bug Fixes

- Fix missing typing-extensions dependency on Python less than 3.10 ([bff760b](https://github.com/mkdocstrings/mkdocstrings/commit/bff760b77c1eedfa770e852aa994a69ff51b0a32) by Timothée Mazzucotelli). [Issue #548](https://github.com/mkdocstrings/mkdocstrings/issues/548)

## [0.21.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.21.0) - 2023-04-05

<small>[Compare with 0.20.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.20.0...0.21.0)</small>

### Features

- Expose the full config to handlers ([15dacf6](https://github.com/mkdocstrings/mkdocstrings/commit/15dacf62f8479a05e9604383155ffa6fade0522d) by David Patterson). [Issue #501](https://github.com/mkdocstrings/mkdocstrings/issues/501), [PR #509](https://github.com/mkdocstrings/mkdocstrings/pull/509)

## [0.20.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.20.0) - 2023-01-19

<small>[Compare with 0.19.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.1...0.20.0)</small>

### Features
- Add `enabled` configuration option ([8cf117d](https://github.com/mkdocstrings/mkdocstrings/commit/8cf117daeefb4fc522145cc567b40eb4256c0a94) by StefanBRas). [Issue #478](https://github.com/mkdocstrings/mkdocstrings/issues/478), [PR #504](https://github.com/mkdocstrings/mkdocstrings/pull/504)

### Bug Fixes
- Handle updating Jinja environment of multiple handlers ([a6ea80c](https://github.com/mkdocstrings/mkdocstrings/commit/a6ea80c992f2a200d8cee3c9ff3b651ddd049a3d) by David Patterson). [Related PR #201](https://github.com/mkdocstrings/mkdocstrings/pull/201), [Issue #502](https://github.com/mkdocstrings/mkdocstrings/issues/502), [PR #507](https://github.com/mkdocstrings/mkdocstrings/pull/507)

### Code Refactoring
- Make `_load_inventory` accept lists as arguments ([105ed82](https://github.com/mkdocstrings/mkdocstrings/commit/105ed8210d4665f6b52f2cc04d56df2d35cd3caf) by Sorin Sbarnea). [Needed by PR mkdocstrings/python#49](https://github.com/mkdocstrings/python/issues/49), [PR #511](https://github.com/mkdocstrings/mkdocstrings/pull/511)
- Remove support for MkDocs < 1.2 (we already depended on MkDocs >= 1.2) ([ac963c8](https://github.com/mkdocstrings/mkdocstrings/commit/ac963c88c793e640d2a7a31392aff1fc2d15ba52) by Timothée Mazzucotelli).

## [0.19.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.1) - 2022-12-13

<small>[Compare with 0.19.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.19.0...0.19.1)</small>

### Bug Fixes
- Fix regular expression for Sphinx inventory parsing ([348bdd5](https://github.com/mkdocstrings/mkdocstrings/commit/348bdd5e930f3cf7a8e27835189794ec940ae1b7) by Luis Michaelis). [Issue #496](https://github.com/mkdocstrings/mkdocstrings/issues/496), [PR #497](https://github.com/mkdocstrings/mkdocstrings/issues/497)

### Code Refactoring
- Small fixes to type annotations ([9214b74](https://github.com/mkdocstrings/mkdocstrings/commit/9214b74367da1f9c808eacc8ceecc4134d5c9d3c) by Oleh Prypin). [PR #470](https://github.com/mkdocstrings/mkdocstrings/issues/470)
- Report usage-based warnings as user-facing messages ([03dd7a6](https://github.com/mkdocstrings/mkdocstrings/commit/03dd7a6e4fefa44889bda9899d9b698bcfd07990) by Oleh Prypin). [PR #464](https://github.com/mkdocstrings/mkdocstrings/issues/464)


## [0.19.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.19.0) - 2022-05-28

<small>[Compare with 0.18.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.1...0.19.0)</small>

### Highlights
We decided to deprecate a few things to pave the way towards a more
stable code base, bringing us closer to a v1.

- Selection and rendering options are now combined into a single
  `options` key. Using the old keys will emit a deprecation warning.
- The `BaseCollector` and `BaseRenderer` classes are deprecated in favor
  of `BaseHandler`, which merges their functionality. Using the old
  classes will emit a deprecation warning.

New versions of the Python handler and the legacy Python handler
were also released in coordination with *mkdocstrings* 0.19.
See their respective changelogs:
[python](https://mkdocstrings.github.io/python/changelog/#070-2022-05-28),
[python-legacy](https://mkdocstrings.github.io/python-legacy/changelog/#023-2022-05-28).
Most notably, the Python handler gained the `members` and `filters` options
that prevented many users to switch to it.

*mkdocstrings* stopped depending directly on the legacy Python handler.
It means you now have to explicitely depend on it, directly or through
the extra provided by *mkdocstrings*, if you want to continue using it.

### Packaging / Dependencies
- Stop depending directly on mkdocstrings-python-legacy ([9055d58](https://github.com/mkdocstrings/mkdocstrings/commit/9055d582a6244a45a1af1aeccd8bf3436889a1a5) by Timothée Mazzucotelli). [Issue #376](https://github.com/mkdocstrings/mkdocstrings/issues/376)

### Features
- Pass config file path to handlers ([cccebc4](https://github.com/mkdocstrings/mkdocstrings/commit/cccebc40c0d51c23381d53432d9355fba9a290ae) by Timothée Mazzucotelli). [Issue #311](https://github.com/mkdocstrings/mkdocstrings/issues/311), [PR #425](https://github.com/mkdocstrings/mkdocstrings/issues/425)

### Code Refactoring
- Support options / deprecated options mix-up ([7c71f26](https://github.com/mkdocstrings/mkdocstrings/commit/7c71f2623b667d43c5e9eb8aea881df2c9984a0e) by Timothée Mazzucotelli).
- Deprecate watch feature in favor of MkDocs' built-in one ([c20022e](https://github.com/mkdocstrings/mkdocstrings/commit/c20022e6adfd3a18fd698f50355dfce534b9feb9) by Timothée Mazzucotelli).
- Log relative template paths if possible, instead of absolute ([91f5f83](https://github.com/mkdocstrings/mkdocstrings/commit/91f5f83408c7aab9124cc19fa47c940541d6f5ec) by Timothée Mazzucotelli).
- Deprecate `selection` and `rendering` YAML keys ([3335310](https://github.com/mkdocstrings/mkdocstrings/commit/3335310b985401642fea8322aba503cafa1c50b1) by Timothée Mazzucotelli). [PR #420](https://github.com/mkdocstrings/mkdocstrings/issues/420)
- Deprecate `BaseCollector` and `BaseRenderer` ([eb822cb](https://github.com/mkdocstrings/mkdocstrings/commit/eb822cb11ec065da0b1277299aae4ffeeffadc6f) by Timothée Mazzucotelli). [PR #413](https://github.com/mkdocstrings/mkdocstrings/issues/413)


## [0.18.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.1) - 2022-03-01

<small>[Compare with 0.18.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.18.0...0.18.1)</small>

### Bug Fixes
- Don't preemptively register identifiers as anchors ([c7ac043](https://github.com/mkdocstrings/mkdocstrings/commit/c7ac04324d005d9cf7d2c1f3b2c39f212275d451) by Timothée Mazzucotelli).


## [0.18.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.18.0) - 2022-02-06

<small>[Compare with 0.17.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.17.0...0.18.0)</small>

### Highlights
- Python 3.6 support is dropped.
- We provide a new, experimental Python handler based on [Griffe](https://github.com/mkdocstrings/griffe).
  This new handler brings automatic cross-references for every annotation in your code,
  including references to third-party libraries' APIs if they provide objects inventories
  and you explicitely [load them](https://mkdocstrings.github.io/usage/#cross-references-to-other-projects-inventories) in `mkdocs.yml`.
  [See migration notes in the documentation](https://mkdocstrings.github.io/handlers/overview/#about-the-python-handlers).
- The "legacy" Python handler now lives in its own repository at https://github.com/mkdocstrings/python-legacy.

### Packaging / Dependencies
- Add Crystal extra, update Python extras versions ([b8222b0](https://github.com/mkdocstrings/mkdocstrings/commit/b8222b0150d4743be857bcbf40f014265095885b) by Timothée Mazzucotelli). [PR #374](https://github.com/mkdocstrings/mkdocstrings/pull/374)
- Update autorefs to actually required version ([fc6c7f6](https://github.com/mkdocstrings/mkdocstrings/commit/fc6c7f652a420ac29cf16cbb99b11a55aa9b38ea) by Timothée Mazzucotelli).
- Drop Python 3.6 support ([7205ac6](https://github.com/mkdocstrings/mkdocstrings/commit/7205ac6cf2861db61c2a5b8bf07d0e6b1a7f49fb) by Timothée Mazzucotelli).

### Features
- Allow unwrapping the `<p>` tag in `convert_markdown` filter ([5351fc8](https://github.com/mkdocstrings/mkdocstrings/commit/5351fc8b417fb20f0681a22f49fcc902579eacdb) by Oleh Prypin). [PR #369](https://github.com/mkdocstrings/mkdocstrings/pull/369)
- Support handlers spanning multiple locations ([f42dfc6](https://github.com/mkdocstrings/mkdocstrings/commit/f42dfc61ce4f9f317c4bd17f568e504ed9764d35) by Timothée Mazzucotelli). [PR #355](https://github.com/mkdocstrings/mkdocstrings/pull/355)

### Code Refactoring
- Prefix logs with the package name only ([6c2b734](https://github.com/mkdocstrings/mkdocstrings/commit/6c2b7348ae40989e4adccc087feae599fcea949d) by Timothée Mazzucotelli). [PR #375](https://github.com/mkdocstrings/mkdocstrings/pull/375)
- Extract the Python handler into its own repository ([74371e4](https://github.com/mkdocstrings/mkdocstrings/commit/74371e49c32059fefd34c7cc7f7b8f085b383237) by Timothée Mazzucotelli). [PR #356](https://github.com/mkdocstrings/mkdocstrings/pull/356)
- Support Jinja2 3.1 ([b377227](https://github.com/mkdocstrings/mkdocstrings/commit/b37722716b1e0ed6393ec71308dfb0f85e142f3b) by Timothée Mazzucotelli). [Issue #360](https://github.com/mkdocstrings/mkdocstrings/issues/360), [PR #361](https://github.com/mkdocstrings/mkdocstrings/pull/361)
- Find templates in new and deprecated namespaces ([d5d5f18](https://github.com/mkdocstrings/mkdocstrings/commit/d5d5f1844dbac3affacc95f2f3eab57a61d2068c) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)
- Support loading handlers from the `mkdocstrings_handlers` namespace ([5c22c6c](https://github.com/mkdocstrings/mkdocstrings/commit/5c22c6ce4e056ac2334e2dfcd47c1f1a7884d352) by Timothée Mazzucotelli). [PR #367](https://github.com/mkdocstrings/mkdocstrings/pull/367)


## [0.17.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.17.0) - 2021-12-27

<small>[Compare with 0.16.2](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.2...0.17.0)</small>

### Features
- Add `show_signature` rendering option ([024ee82](https://github.com/mkdocstrings/mkdocstrings/commit/024ee826bb6f0aa297ba857bc18075d6f4162cad) by Will Da Silva). [Issue #341](https://github.com/mkdocstrings/mkdocstrings/issues/341), [PR #342](https://github.com/mkdocstrings/mkdocstrings/pull/342)
- Support Keyword Args and Yields sections ([1286427](https://github.com/mkdocstrings/mkdocstrings/commit/12864271b7f997af7b421a834919b1e686793905) by Timothée Mazzucotelli). [Issue #205](https://github.com/mkdocstrings/mkdocstrings/issues/205) and [#324](https://github.com/mkdocstrings/mkdocstrings/issues/324), [PR #331](https://github.com/mkdocstrings/mkdocstrings/pull/331)

### Bug Fixes
- Do minimum work when falling back to re-collecting an object to get its anchor ([f6cf570](https://github.com/mkdocstrings/mkdocstrings/commit/f6cf570255df17db1088b6e6cd94bcc823b3b17f) by Timothée Mazzucotelli). [Issue #329](https://github.com/mkdocstrings/mkdocstrings/issues/329), [PR #330](https://github.com/mkdocstrings/mkdocstrings/pull/330)

### Code Refactoring
- Return multiple identifiers from fallback method ([78c498c](https://github.com/mkdocstrings/mkdocstrings/commit/78c498c4a6cfc33cc6ceab9829426bd64e518d44) by Timothée Mazzucotelli). [Issue mkdocstrings/autorefs#11](https://github.com/mkdocstrings/autorefs/issues/11), [PR #350](https://github.com/mkdocstrings/mkdocstrings/pull/350)


## [0.16.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.2) - 2021-10-04

<small>[Compare with 0.16.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.1...0.16.2)</small>

### Dependencies
- Support `pymdown-extensions` v9.x ([0831343](https://github.com/mkdocstrings/mkdocstrings/commit/0831343aa8726ed785b17bba1c8d4adf49b46748) by Ofek Lev and [38b22ec](https://github.com/mkdocstrings/mkdocstrings/commit/38b22ec11cded4689115dafc43e16a1e8e40feda) by Timothée Mazzucotelli).


## [0.16.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.1) - 2021-09-23

<small>[Compare with 0.16.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.16.0...0.16.1)</small>

### Bug Fixes
- Fix ReadTheDocs "return" template ([598621b](https://github.com/mkdocstrings/mkdocstrings/commit/598621bff29d2aeda0e14f350cda36c1a1f418d5) by Timothée Mazzucotelli).


## [0.16.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.16.0) - 2021-09-20

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.16.0)</small>

### Features
- Add a rendering option to change the sorting of members ([b1fff8b](https://github.com/mkdocstrings/mkdocstrings/commit/b1fff8b8ef4d6d77417fc43ed8be4b578d6437e4) by Joe Rickerby). [Issue #114](https://github.com/mkdocstrings/mkdocstrings/issues/114), [PR #274](https://github.com/mkdocstrings/mkdocstrings/pull/274)
- Add option to show Python base classes ([436f550](https://github.com/mkdocstrings/mkdocstrings/commit/436f5504ad72ab6d1f5b4303e6b68bc84562c32b) by Brian Koropoff). [Issue #269](https://github.com/mkdocstrings/mkdocstrings/issues/269), [PR #297](https://github.com/mkdocstrings/mkdocstrings/pull/297)
- Support loading external Python inventories in Sphinx format ([a8418cb](https://github.com/mkdocstrings/mkdocstrings/commit/a8418cb4c6193d35cdc72508b118a712cf0334e1) by Oleh Prypin). [PR #287](https://github.com/mkdocstrings/mkdocstrings/pull/287)
- Support loading external inventories and linking to them ([8b675f4](https://github.com/mkdocstrings/mkdocstrings/commit/8b675f4671f8bbfd2f337ed043e3682b0a0ad0f6) by Oleh Prypin). [PR #277](https://github.com/mkdocstrings/mkdocstrings/pull/277)
- Very basic support for MkDocs theme ([974ca90](https://github.com/mkdocstrings/mkdocstrings/commit/974ca9010efca1b8279767faf8efcd2470a8371d) by Oleh Prypin). [PR #272](https://github.com/mkdocstrings/mkdocstrings/pull/272)
- Generate objects inventory ([14ed959](https://github.com/mkdocstrings/mkdocstrings/commit/14ed959860a784a835cd71f911081f2026d66c81) and [bbd85a9](https://github.com/mkdocstrings/mkdocstrings/commit/bbd85a92fa70bddfe10a907a4d63b8daf0810cb2) by Timothée Mazzucotelli). [Issue #251](https://github.com/mkdocstrings/mkdocstrings/issues/251), [PR #253](https://github.com/mkdocstrings/mkdocstrings/pull/253)

### Bug Fixes
- Don't render empty code blocks for missing type annotations ([d2e9e1e](https://github.com/mkdocstrings/mkdocstrings/commit/d2e9e1ef3cf304081b07f763843a9722bf9b117e) by Oleh Prypin).
- Fix custom handler not being used ([6dcf342](https://github.com/mkdocstrings/mkdocstrings/commit/6dcf342fb83b19e385d56d37235f2b23e8c8c767) by Timothée Mazzucotelli). [Issue #259](https://github.com/mkdocstrings/mkdocstrings/issues/259), [PR #263](https://github.com/mkdocstrings/mkdocstrings/pull/263)
- Don't hide `setup_commands` errors ([92418c4](https://github.com/mkdocstrings/mkdocstrings/commit/92418c4b3e80b67d5116efa73931fc113daa60e9) by Gabriel Vîjială). [PR #258](https://github.com/mkdocstrings/mkdocstrings/pull/258)

### Code Refactoring
- Move writing extra files to an earlier stage in the build ([3890ab5](https://github.com/mkdocstrings/mkdocstrings/commit/3890ab597692e56d7ece576c166373b66ff4e615) by Oleh Prypin). [PR #275](https://github.com/mkdocstrings/mkdocstrings/pull/275)


## [0.15.2](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.2) - 2021-06-09

<small>[Compare with 0.15.1](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.1...0.15.2)</small>

### Packaging
- MkDocs default schema needs to be obtained differently now ([b3e122b](https://github.com/mkdocstrings/mkdocstrings/commit/b3e122b36d586632738ddedaed7d3df8d5dead44) by Oleh Prypin). [PR #273](https://github.com/mkdocstrings/mkdocstrings/pull/273)
- Compatibility with MkDocs 1.2: livereload isn't guaranteed now ([36e8024](https://github.com/mkdocstrings/mkdocstrings/commit/36e80248d2ab9e61975f6c83ae517115c9410fc1) by Oleh Prypin). [PR #294](https://github.com/mkdocstrings/mkdocstrings/pull/294)


## [0.15.1](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.1) - 2021-05-16

<small>[Compare with 0.15.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.15.0...0.15.1)</small>

### Bug Fixes
- Prevent error during parallel installations ([fac2c71](https://github.com/mkdocstrings/mkdocstrings/commit/fac2c711351f7b62bf5308f19cfc612a3944588a) by Timothée Mazzucotelli).

### Packaging
- Support the upcoming major Jinja and MarkupSafe releases ([bb4f9de](https://github.com/mkdocstrings/mkdocstrings/commit/bb4f9de08a77bef85e550d70deb0db13e6aa0c96) by Oleh Prypin). [PR #283](https://github.com/mkdocstrings/mkdocstrings/pull/283)
- Accept a higher version of mkdocs-autorefs ([c8de08e](https://github.com/mkdocstrings/mkdocstrings/commit/c8de08e177f78290d3baaca2716d1ec64c9059b6) by Oleh Prypin). [PR #282](https://github.com/mkdocstrings/mkdocstrings/pull/282)


## [0.15.0](https://github.com/mkdocstrings/mkdocstrings/releases/tag/0.15.0) - 2021-02-28

<small>[Compare with 0.14.0](https://github.com/mkdocstrings/mkdocstrings/compare/0.14.0...0.15.0)</small>

### Breaking Changes

The following items are *possible* breaking changes:

- Cross-linking to arbitrary headings now requires to opt-in to the *autorefs* plugin,
  which is installed as a dependency of *mkdocstrings*.
  See [Cross-references to any Markdown heading](https://mkdocstrings.github.io/usage/#cross-references-to-any-markdown-heading).
- *mkdocstrings* now respects your configured code highlighting method,
  so if you are using the CodeHilite extension, the `.highlight` CSS class in the rendered HTML will become `.codehilite`.
  So make sure to adapt your extra CSS accordingly. Or just switch to using [pymdownx.highlight](https://facelessuser.github.io/pymdown-extensions/extensions/highlight/), it's better supported by *mkdocstrings* anyway.
  See [Syntax highlighting](https://mkdocstrings.github.io/theming/#syntax-highlighting).
- Most of the [CSS rules that *mkdocstrings* used to recommend](https://mkdocstrings.github.io/handlers/python/#recommended-style-material) for manual addition, now become mandatory (auto-injected into the site). This shouldn't *break* any of your styles, but you are welcome to remove the now-redundant lines that you had copied into `extra_css`, [similarly to this diff](https://github.com/mkdocstrings/mkdocstrings/pull/218/files#diff-7889a1924c66ff9318f1d81c4a3b75658d09bebf0db3b2e4023ba3e40294eb73).

### Features
- Nicer-looking error outputs - no tracebacks from mkdocstrings ([6baf720](https://github.com/mkdocstrings/mkdocstrings/commit/6baf720850d359ddb55713553a757fe7b2283e10) by Oleh Prypin). [PR #230](https://github.com/mkdocstrings/mkdocstrings/pull/230)
- Let handlers add CSS to the pages, do so for Python handler ([05c7a3f](https://github.com/mkdocstrings/mkdocstrings/commit/05c7a3fc83b67d3244ea3bfe97dab19aa53f2d38) by Oleh Prypin). [Issue #189](https://github.com/mkdocstrings/mkdocstrings/issues/189), [PR #218](https://github.com/mkdocstrings/mkdocstrings/pull/218)
- Allow linking to an object heading not only by its canonical identifier, but also by its possible aliases ([4789950](https://github.com/mkdocstrings/mkdocstrings/commit/4789950ff43c354d47afbed5c89d5abb917ffee6) by Oleh Prypin). [PR #217](https://github.com/mkdocstrings/mkdocstrings/pull/217)

### Bug Fixes
- Propagate the CSS class to inline highlighting as well ([c7d80e6](https://github.com/mkdocstrings/mkdocstrings/commit/c7d80e63a042913b7511c38a788967796dd10997) by Oleh Prypin). [PR #245](https://github.com/mkdocstrings/mkdocstrings/pull/245)
- Don't double-escape characters in highlighted headings ([6357144](https://github.com/mkdocstrings/mkdocstrings/commit/6357144b100be6a2e7e6140e035c289c225cec22) by Oleh Prypin). [Issue #228](https://github.com/mkdocstrings/mkdocstrings/issues/228), [PR #241](https://github.com/mkdocstrings/mkdocstrings/pull/241)

### Code Refactoring
- Use the autorefs plugin from its new external location ([e2d74ef](https://github.com/mkdocstrings/mkdocstrings/commit/e2d74efb0d59f9a1aa45e42525ceb1d4b7638426) by Oleh Prypin). [PR #235](https://github.com/mkdocstrings/mkdocstrings/pull/235)
- Split out Markdown extensions from `handlers` to `handlers.rendering` ([7533852](https://github.com/mkdocstrings/mkdocstrings/commit/7533852e3ac0a378b70a380cef1100421b7d5763) by Oleh Prypin). [PR #233](https://github.com/mkdocstrings/mkdocstrings/pull/233)
- Theme-agnostic code highlighting, respecting configs ([f9ea009](https://github.com/mkdocstrings/mkdocstrings/commit/f9ea00979545e39983ba377f1930d73ae94165ea) by Oleh Prypin). [PR #202](https://github.com/mkdocstrings/mkdocstrings/pull/202)
- Split out autorefs plugin, make it optional ([fc67656](https://github.com/mkdocstrings/mkdocstrings/commit/fc676564f9b11269b3e0b0482703ac924069a3fa) by Oleh Prypin). [PR #220](https://github.com/mkdocstrings/mkdocstrings/pull/220)
- Remove the extra wrapper div from the final doc ([7fe438c](https://github.com/mkdocstrings/mkdocstrings/commit/7fe438c4040a2124b00c39e582ef4c38be7c55c9) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Don't re-parse the whole subdoc, expose only headings ([15f84f9](https://github.com/mkdocstrings/mkdocstrings/commit/15f84f981982c8e2b15498f5c869ac207f3ce5d7) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)
- Actually exclude hidden headings from the doc ([0fdb082](https://github.com/mkdocstrings/mkdocstrings/commit/0fdb0821867eb0e14a972a603c22301aafecf4f4) by Oleh Prypin). [PR #209](https://github.com/mkdocstrings/mkdocstrings/pull/209)


## [0.14.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.14.0) - 2021-01-06

<small>[Compare with 0.13.6](https://github.com/pawamoy/mkdocstrings/compare/0.13.6...0.14.0)</small>

Special thanks to Oleh [@oprypin](https://github.com/oprypin) Prypin who did an amazing job (this is a euphemism)
at improving *mkdocstrings*, fixing hard-to-fix bugs with clever solutions, implementing great new features
and refactoring the code for better performance and readability! Thanks Oleh!

### Bug Fixes
- Fix double code tags ([e84d401](https://github.com/pawamoy/mkdocstrings/commit/e84d401c6dcb9aecb8cc1a58d3a0f339e1c3e78f) by Timothée Mazzucotelli).
- Don't mutate the original Markdown config for permalinks ([8f6b163](https://github.com/pawamoy/mkdocstrings/commit/8f6b163b50551da22f65e9b736e042562f77f2d7) by Oleh Prypin).
- Preserve text immediately before an autodoc ([07466fa](https://github.com/pawamoy/mkdocstrings/commit/07466fafb54963a4e35e69007b6291a0382aaeb4) by Oleh Prypin). [PR #207](https://github.com/pawamoy/mkdocstrings/pull/207)
- Remove `href` attributes from headings in templates ([d5602ff](https://github.com/pawamoy/mkdocstrings/commit/d5602ff3bb1a75ac1c8c457e972271b6c66eb8dd) by Oleh Prypin). [PR #204](https://github.com/pawamoy/mkdocstrings/pull/204)
- Don't let `toc` extension append its permalink twice ([a154f5c](https://github.com/pawamoy/mkdocstrings/commit/a154f5c4c6ef9abd221e1f89e44847ae2cf25436) by Oleh Prypin). [PR #203](https://github.com/pawamoy/mkdocstrings/pull/203)
- Fix undefined entity for `&para;` ([2c29211](https://github.com/pawamoy/mkdocstrings/commit/2c29211002d515db40e5bdabf6cbf32ec8633a05) by Timothée Mazzucotelli).
- Make ids of Markdown sub-documents prefixed with the parent item id ([d493d33](https://github.com/pawamoy/mkdocstrings/commit/d493d33b3827d93e84a7b2e39f0a10dfcb782402) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186) and [#193](https://github.com/pawamoy/mkdocstrings/issues/193), [PR #199](https://github.com/pawamoy/mkdocstrings/pull/199)
- More lenient regex for data-mkdocstrings-identifier ([dcfec8e](https://github.com/pawamoy/mkdocstrings/commit/dcfec8edfdff050debc5856dfc213d3119a84792) by Oleh Prypin).
- Shift Markdown headings according to the current `heading_level` ([13f41ae](https://github.com/pawamoy/mkdocstrings/commit/13f41aec5a95c82c1229baa4ac3caf4abb2add51) by Oleh Prypin). [Issue #192](https://github.com/pawamoy/mkdocstrings/issues/192), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix footnotes appearing in all following objects ([af24bc2](https://github.com/pawamoy/mkdocstrings/commit/af24bc246a6938ebcae7cf6ff677b194cf1af95c) by Oleh Prypin). [Issue #186](https://github.com/pawamoy/mkdocstrings/issues/186), [PR #195](https://github.com/pawamoy/mkdocstrings/pull/195)
- Fix cross-references from the root index page ([9c9f2a0](https://github.com/pawamoy/mkdocstrings/commit/9c9f2a04af94e0d88f57fd76249f7985166a9b88) by Oleh Prypin). [Issue #184](https://github.com/pawamoy/mkdocstrings/issues/184), [PR #185](https://github.com/pawamoy/mkdocstrings/pull/185)
- Fix incorrect argument name passed to Markdown ([10ce502](https://github.com/pawamoy/mkdocstrings/commit/10ce502d5fd58f1e5a4e14308ffad1bc3d7116ee) by Timothée Mazzucotelli).
- Fix error when a digit immediately follows a code tag ([9b92341](https://github.com/pawamoy/mkdocstrings/commit/9b9234160edc54b53c81a618b12095e7dd829059) by Oleh Prypin). [Issue #169](https://github.com/pawamoy/mkdocstrings/issues/169), [PR #175](https://github.com/pawamoy/mkdocstrings/pull/175)
- Detecting paths relative to template directory in logging ([a50046b](https://github.com/pawamoy/mkdocstrings/commit/a50046b5d58d62df4ba13f4c197e80edd1995eb9) by Oleh Prypin). [Issue #166](https://github.com/pawamoy/mkdocstrings/issues/166)

### Code Refactoring
- BlockProcessor already receives strings, use them as such ([bcf7da9](https://github.com/pawamoy/mkdocstrings/commit/bcf7da911a310a63351c5082e84bb763d90d5b3b) by Oleh Prypin).
- Remove some unused code ([8504084](https://github.com/pawamoy/mkdocstrings/commit/850408421cc027be8374673cc74c71fff26f3833) by Oleh Prypin). [PR #206](https://github.com/pawamoy/mkdocstrings/pull/206)
- Improve XML parsing error handling ([ad86410](https://github.com/pawamoy/mkdocstrings/commit/ad864100b644ab1ee8daaa0d3923bc87dee1c5ca) by Timothée Mazzucotelli).
- Explicitly use MarkupSafe ([6b9ebe7](https://github.com/pawamoy/mkdocstrings/commit/6b9ebe7d510e82971acef89e9e946af3c0cc96d3) by Oleh Prypin).
- Split out the handler cache, expose it through the plugin ([6453026](https://github.com/pawamoy/mkdocstrings/commit/6453026fac287387090a67cce70c078377d107dd) by Oleh Prypin). [Issue #179](https://github.com/pawamoy/mkdocstrings/issues/179), [PR #191](https://github.com/pawamoy/mkdocstrings/pull/191)
- Use ChainMap instead of copying dicts ([c634d2c](https://github.com/pawamoy/mkdocstrings/commit/c634d2ce6377de26caa553048bb28ef1e672f7aa) by Oleh Prypin). [PR #171](https://github.com/pawamoy/mkdocstrings/pull/171)
- Rename logging to loggers to avoid confusion ([7a119cc](https://github.com/pawamoy/mkdocstrings/commit/7a119ccf27cf77cf2cbd114e7fad0a9e4e97bbd8) by Timothée Mazzucotelli).
- Simplify logging ([409f93e](https://github.com/pawamoy/mkdocstrings/commit/409f93ed26d7d8292a8bc7a6c32cb270b3769409) by Timothée Mazzucotelli).

### Features
- Allow specifying `heading_level` as a Markdown heading ([10efc28](https://github.com/pawamoy/mkdocstrings/commit/10efc281e04b2a430cec53e49208ccc09e591667) by Oleh Prypin). [PR #170](https://github.com/pawamoy/mkdocstrings/pull/170)
- Allow any characters in identifiers ([7ede68a](https://github.com/pawamoy/mkdocstrings/commit/7ede68a0917b494eda2198931a8ad1c97fc8fce4) by Oleh Prypin). [PR #174](https://github.com/pawamoy/mkdocstrings/pull/174)
- Allow namespace packages for handlers ([39b0465](https://github.com/pawamoy/mkdocstrings/commit/39b046548f57dc59993241b24d2cf12fb5e488eb) by Timothée Mazzucotelli).
- Add template debugging/logging ([33b32c1](https://github.com/pawamoy/mkdocstrings/commit/33b32c1410bf6e8432768865c8aa86b8e091ab59) by Timothée Mazzucotelli).
- Add initial support for the ReadTheDocs theme ([1028115](https://github.com/pawamoy/mkdocstrings/commit/1028115682ed0806d6570c749af0e382c67d6120) by Timothée Mazzucotelli). [Issue #107](https://github.com/pawamoy/mkdocstrings/issues/107), [PR #159](https://github.com/pawamoy/mkdocstrings/pull/159)
- Add option to show type annotations in signatures ([f94ce9b](https://github.com/pawamoy/mkdocstrings/commit/f94ce9bdb2afc2c41c21a53636980ca077b757ce) by Timothée Mazzucotelli). [Issue #106](https://github.com/pawamoy/mkdocstrings/issues/106)

### Packaging
- Accept verions of `pytkdocs` up to 0.10.x (see [changelog](https://pawamoy.github.io/pytkdocs/changelog/#0100-2020-12-06)).

### Performance Improvements
- Call `update_env` only once per `Markdown` instance ([b198c74](https://github.com/pawamoy/mkdocstrings/commit/b198c74338dc3b54b999eadeef9946d69277ad77) by Oleh Prypin). [PR #201](https://github.com/pawamoy/mkdocstrings/pull/201)
- Disable Jinja's `auto_reload` to reduce disk reads ([3b28c58](https://github.com/pawamoy/mkdocstrings/commit/3b28c58c77642071419d4a98e007d5a854b7984f) by Oleh Prypin). [PR #200](https://github.com/pawamoy/mkdocstrings/pull/200)
- Rework autorefs replacement to not re-parse the final HTML ([22a9e4b](https://github.com/pawamoy/mkdocstrings/commit/22a9e4bf1b73f9b9b1a7c4876f0c677f919bc4d7) by Oleh Prypin). [Issue #187](https://github.com/pawamoy/mkdocstrings/issues/187), [PR #188](https://github.com/pawamoy/mkdocstrings/pull/188)


## [0.13.6](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.6) - 2020-09-28

<small>[Compare with 0.13.5](https://github.com/pawamoy/mkdocstrings/compare/0.13.5...0.13.6)</small>

### Bug Fixes
- Fix rendering when clicking on hidden toc entries ([2af4d31](https://github.com/pawamoy/mkdocstrings/commit/2af4d310adefec614235a2c1d04d5ff56bf9c220) by Timothée Mazzucotelli). Issue [#60](https://github.com/pawamoy/mkdocstrings/issues/60).


## [0.13.5](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.5) - 2020-09-28

<small>[Compare with 0.13.4](https://github.com/pawamoy/mkdocstrings/compare/0.13.4...0.13.5)</small>

## Packaging
- Accept `pytkdocs` version up to 0.9.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#090-2020-09-28)).


## [0.13.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.4) - 2020-09-25

<small>[Compare with 0.13.3](https://github.com/pawamoy/mkdocstrings/compare/0.13.3...0.13.4)</small>

### Bug Fixes
- Bring back arbitrary `**config` to Python handler ([fca7d4c](https://github.com/pawamoy/mkdocstrings/commit/fca7d4c75ffd7a84eaeccd27facd5575604dbfab) by Florimond Manca). Issue [#154](https://github.com/pawamoy/mkdocstrings/issues/154), PR [#155](https://github.com/pawamoy/mkdocstrings/pull/155)


## [0.13.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.3) - 2020-09-25

<small>[Compare with 0.13.2](https://github.com/pawamoy/mkdocstrings/compare/0.13.2...0.13.3)</small>

### Packaging
- Accept `pytkdocs` version up to 0.8.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#080-2020-09-25)).


## [0.13.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.2) - 2020-09-08

<small>[Compare with 0.13.1](https://github.com/pawamoy/mkdocstrings/compare/0.13.1...0.13.2)</small>

### Bug Fixes
- Fix relative URLs when `use_directory_urls` is false ([421d189](https://github.com/pawamoy/mkdocstrings/commit/421d189fff9ea2608e40d85e0a93e30334782b90) by Timothée Mazzucotelli). References: [#149](https://github.com/pawamoy/mkdocstrings/issues/149)


## [0.13.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.1) - 2020-09-03

<small>[Compare with 0.13.0](https://github.com/pawamoy/mkdocstrings/compare/0.13.0...0.13.1)</small>

### Bug Fixes
- Use relative links for cross-references ([9c77f1f](https://github.com/pawamoy/mkdocstrings/commit/9c77f1f461fa87842ae39945f9521ee85b1e413b) by Timothée Mazzucotelli). References: [#144](https://github.com/pawamoy/mkdocstrings/issues/144), [#147](https://github.com/pawamoy/mkdocstrings/issues/147)


## [0.13.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.13.0) - 2020-08-21

<small>[Compare with 0.12.2](https://github.com/pawamoy/mkdocstrings/compare/0.12.2...0.13.0)</small>

### Bug Fixes
- Accept dashes in module names ([fcf79d0](https://github.com/pawamoy/mkdocstrings/commit/fcf79d0024ec46c3862c94202864e054c04a6d0b) by Timothée Mazzucotelli). References: [#140](https://github.com/pawamoy/mkdocstrings/issues/140)

### Features
- Add option to show full path of direct members only ([d1b9401](https://github.com/pawamoy/mkdocstrings/commit/d1b9401afecb20d3123eec7334605cb15bf9d877) by Aaron Dunmore). References: [#134](https://github.com/pawamoy/mkdocstrings/issues/134), [#136](https://github.com/pawamoy/mkdocstrings/issues/136)

### Packaging
- Accept `pymdown-extensions` versions up to 0.8.x ([see release notes](https://facelessuser.github.io/pymdown-extensions/about/releases/8.0/#8.0)) ([178d48d](https://github.com/pawamoy/mkdocstrings/commit/178d48da7a62daf285dfc5f6ff230e8bce82ed53) by Hugo van Kemenade). PR [#146](https://github.com/pawamoy/mkdocstrings/issue/146)


## [0.12.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.2) - 2020-07-24

<small>[Compare with 0.12.1](https://github.com/pawamoy/mkdocstrings/compare/0.12.1...0.12.2)</small>

### Packaging
- Accept `pytkdocs` version up to 0.7.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#070-2020-07-24)).


## [0.12.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.1) - 2020-07-07

<small>[Compare with 0.12.0](https://github.com/pawamoy/mkdocstrings/compare/0.12.0...0.12.1)</small>

### Bug Fixes
- Fix HTML-escaped sequence parsing as XML ([db297f1](https://github.com/pawamoy/mkdocstrings/commit/db297f19013fc402eeff1f2827057a959e481c66) by Timothée Mazzucotelli).
- Allow running mkdocs from non-default interpreter ([283dd7b](https://github.com/pawamoy/mkdocstrings/commit/283dd7b83eeba675a16d96d2e829851c1273a625) by Jared Khan).


## [0.12.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.12.0) - 2020-06-14

<small>[Compare with 0.11.4](https://github.com/pawamoy/mkdocstrings/compare/0.11.4...0.12.0)</small>

### Features
- Support attributes section in Google-style docstrings ([8300253](https://github.com/pawamoy/mkdocstrings/commit/83002532b2294ea33dcec4f2672a5a6d0f64def1) by Timothée Mazzucotelli). References: [#88](https://github.com/pawamoy/mkdocstrings/issues/88)
- Support examples section in Google-style docstrings ([650c754](https://github.com/pawamoy/mkdocstrings/commit/650c754afdd5d4fb96b1e2529f378d025a2e7daf) by Iago González). References: [#112](https://github.com/pawamoy/mkdocstrings/issues/112)

### Packaging
- Accept `pytkdocs` version up to 0.6.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#060-2020-06-14)).

## [0.11.4](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.4) - 2020-06-08

<small>[Compare with 0.11.3](https://github.com/pawamoy/mkdocstrings/compare/0.11.3...0.11.4)</small>

### Packaging
- Accept `pytkdocs` version up to 0.5.x ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#050-2020-06-08)).
  If it breaks your docs, please [open issues on `pytkdocs`' bug-tracker](https://github.com/pawamoy/pytkdocs/issues),
  or pin `pytkdocs` version to while waiting for bug fixes <0.5.0 :clown:.


## [0.11.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.3) - 2020-06-07

<small>[Compare with 0.11.2](https://github.com/pawamoy/mkdocstrings/compare/0.11.2...0.11.3)</small>

### Bug Fixes
- Support custom theme directory configuration ([1243cf6](https://github.com/pawamoy/mkdocstrings/commit/1243cf673aaf371e5cbf42a3e0d1aa80482398a3) by Abhishek Thakur). References: [#120](https://github.com/pawamoy/mkdocstrings/issues/120), [#121](https://github.com/pawamoy/mkdocstrings/issues/121)


## [0.11.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.2) - 2020-05-20

<small>[Compare with 0.11.1](https://github.com/pawamoy/mkdocstrings/compare/0.11.1...0.11.2)</small>

### Packaging
- Increase `pytkdocs` version range to accept 0.4.0
  ([changelog](https://pawamoy.github.io/pytkdocs/changelog/#040-2020-05-17)).


## [0.11.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.1) - 2020-05-14

<small>[Compare with 0.11.0](https://github.com/pawamoy/mkdocstrings/compare/0.11.0...0.11.1)</small>

### Bug Fixes
- Fix integration with mkdocs logging *une bonne fois pour toute* ([3293cbf](https://github.com/pawamoy/mkdocstrings/commit/3293cbf161f05d36de6c1d50b5de9742bf99066e) by Timothée Mazzucotelli).
- Discard setup commands stdout ([ea44cea](https://github.com/pawamoy/mkdocstrings/commit/ea44cea33159ed3a6b0b34b4cd52a17a40bd6460) by Timothée Mazzucotelli). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91)
- Use the proper python executable to start subprocesses ([9fe3b39](https://github.com/pawamoy/mkdocstrings/commit/9fe3b3915bd8f15011f8f3632a227d1eb56603fd) by Reece Dunham). References: [#91](https://github.com/pawamoy/mkdocstrings/issues/91), [#103](https://github.com/pawamoy/mkdocstrings/issues/103)


## [0.11.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.11.0) - 2020-04-23

<small>[Compare with 0.10.3](https://github.com/pawamoy/mkdocstrings/compare/0.10.3...0.11.0)</small>

### Bug Fixes
- Properly raise on errors (respect strict mode) ([2097208](https://github.com/pawamoy/mkdocstrings/commit/20972082a94b64bec02c77d6a80384d8042f60ea) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)
- Hook properly to MkDocs logging ([b23daed](https://github.com/pawamoy/mkdocstrings/commit/b23daed3743bbd2d3f024df34582a317c51a1af0) by Timothée Mazzucotelli). Related issues/PRs: [#86](https://github.com/pawamoy/mkdocstrings/issues/86)

### Features
- Add `setup_commands` option to python handler ([599f8e5](https://github.com/pawamoy/mkdocstrings/commit/599f8e528f55093b0011b732da959b747c1e02c0) by Ross Mechanic). Related issues/PRs: [#89](https://github.com/pawamoy/mkdocstrings/issues/89), [#90](https://github.com/pawamoy/mkdocstrings/issues/90)
- Add option to allow overriding templates ([7360021](https://github.com/pawamoy/mkdocstrings/commit/7360021ab4753706d0f6209ed960050f5d424ad8) by Mikaël Capelle). Related issues/PRs: [#59](https://github.com/pawamoy/mkdocstrings/issues/59), [#82](https://github.com/pawamoy/mkdocstrings/issues/82)


## [0.10.3](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.3) - 2020-04-10

<small>[Compare with 0.10.2](https://github.com/pawamoy/mkdocstrings/compare/0.10.2...0.10.3)</small>

### Bug Fixes
- Handle `site_url` not being defined ([9fb4a9b](https://github.com/pawamoy/mkdocstrings/commit/9fb4a9bbebe2457b389921ba1ee3e1f924c5691b) by Timothée Mazzucotelli). Related issues/PRs: [#77](https://github.com/pawamoy/mkdocstrings/issues/77)

### Packaging
This version increases the accepted range of versions for the `pytkdocs` dependency to `>=0.2.0, <0.4.0`.
The `pytkdocs` project just released [version 0.3.0](https://pawamoy.github.io/pytkdocs/changelog/#030-2020-04-10)
which:

- adds support for complex markup in docstrings sections items descriptions
- adds support for different indentations in docstrings sections (tabulations or less/more than 4 spaces)
- fixes docstring parsing for arguments whose names start with `*`, like `*args` and `**kwargs`


## [0.10.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.2) - 2020-04-07

<small>[Compare with 0.10.1](https://github.com/pawamoy/mkdocstrings/compare/0.10.1...0.10.2)</small>

### Packaging
This version increases the accepted range of versions for the `pymdown-extensions` dependency,
as well as for the `mkdocs-material` development dependency. Indeed, both these projects recently
released major versions 7 and 5 respectively. Users who wish to use these new versions will be able to.
See issue [#74](https://github.com/pawamoy/mkdocstrings/issues/74).

## [0.10.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.1) - 2020-04-03

<small>[Compare with 0.10.0](https://github.com/pawamoy/mkdocstrings/compare/0.10.0...0.10.1)</small>

### Bug Fixes
- Fix jinja2 error for jinja2 < 2.11 ([387f970](https://github.com/pawamoy/mkdocstrings/commit/387f97088ad2b7b25389ae6cf303bae071e90e6c) by Timothée Mazzucotelli). Related issues/PRs: [#67](https://github.com/pawamoy/mkdocstrings/issues/67), [#72](https://github.com/pawamoy/mkdocstrings/issues/72)
- Fix missing dependency pymdown-extensions ([648b99d](https://github.com/pawamoy/mkdocstrings/commit/648b99dab9d1af87db474ce7683de50c9bf8996d) by Timothée Mazzucotelli). Related issues/PRs: [#66](https://github.com/pawamoy/mkdocstrings/issues/66)
- Fix heading level of hidden toc entries ([475cc62](https://github.com/pawamoy/mkdocstrings/commit/475cc62b1cf4342b82ca8685166306441e4b83c4) by Timothée Mazzucotelli). Related issues/PRs: [#65](https://github.com/pawamoy/mkdocstrings/issues/65)
- Fix rendering signatures containing keyword_only ([c6c5add](https://github.com/pawamoy/mkdocstrings/commit/c6c5addd8be65beaf7055c9d0f512e0de8b3eba4) by Timothée Mazzucotelli). Related issues/PRs: [#68](https://github.com/pawamoy/mkdocstrings/issues/68)


## [0.10.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.10.0) - 2020-03-27

<small>[Compare with 0.9.1](https://github.com/pawamoy/mkdocstrings/compare/0.9.1...0.10.0)</small>

### Features
- Prepare for new `pytkdocs` version ([336421a](https://github.com/pawamoy/mkdocstrings/commit/336421af95d752671276c2e88c5c173bff4093cc)).
  Add options `filters` and `members` to the Python collector to reflect the new `pytkdocs` options.
  See [the default configuration of the Python collector](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonCollector.DEFAULT_CONFIG).


## [0.9.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.1) - 2020-03-21

<small>[Compare with 0.9.0](https://github.com/pawamoy/mkdocstrings/compare/0.9.0...0.9.1)</small>

### Bug fixes
- Fix cross-references when deploying to GitHub pages ([36f804b](https://github.com/pawamoy/mkdocstrings/commit/36f804beab01531c0331ed89d21f3e5e15bd8585)).


## [0.9.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.9.0) - 2020-03-21

<small>[Compare with 0.8.0](https://github.com/pawamoy/mkdocstrings/compare/0.8.0...0.9.0)</small>

This version is a big refactor. We will just list the new features without pointing to particular commits.
The documentation rendering looks slightly different, and should be better than before.
No identified breaking changes for end-users.

### Features
- **Language agnostic:** we moved the code responsible for loading Python documentation into a new project,
  [`pytkdocs`](https://github.com/pawamoy/pytkdocs), and implemented a "handlers" logic, effectively allowing to
  support any given language. Waiting for your handlers contributions :wink:!
- **Multiple themes support:** handlers can offer templates for multiple `mkdocs` themes.
- **Better cross-references:** cross-references now not only work between documented objects (between all languages,
  given the objects' identifiers are unique), but also for every heading of your Markdown pages.
- **Configuration options:** the rendering of Python documentation can now be configured,
  (globally and locally thanks to the handlers system),
  [check the docs!](https://pawamoy.github.io/mkdocstrings/reference/handlers/python/#mkdocstrings.handlers.python.PythonRenderer.DEFAULT_CONFIG)
  Also see the [recommended CSS](https://pawamoy.github.io/mkdocstrings/handlers/python/#recommended-style).
- **Proper logging messages:** `mkdocstrings` now logs debug, warning and error messages, useful when troubleshooting.

### Bug fixes
- Various fixes and better error handling.


## [0.8.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.8.0) - 2020-03-04

<small>[Compare with 0.7.2](https://github.com/pawamoy/mkdocstrings/compare/0.7.2...0.8.0)</small>

### Breaking Changes
- Be compatible with Mkdocs >= 1.1 ([5a974a4](https://github.com/pawamoy/mkdocstrings/commit/5a974a4eb810904d6836e216d8539affc8acaa6f)).
  This is a breaking change as we're not compatible with versions of Mkdocs below 1.1 anymore.
  If you cannot upgrade Mkdocs to 1.1, pin mkdocstrings' version to 0.7.2.

## [0.7.2](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.2) - 2020-03-04

<small>[Compare with 0.7.1](https://github.com/pawamoy/mkdocstrings/compare/0.7.1...0.7.2)</small>

### Bug Fixes
- Catch `OSError` when trying to get source lines ([8e8d604](https://github.com/pawamoy/mkdocstrings/commit/8e8d604ba95363c140841c84535d2350d7ebbfe3)).
- Do not render signature empty sentinel ([16dfd73](https://github.com/pawamoy/mkdocstrings/commit/16dfd73cf30d01314dba756d3f10308b99c87dcc)).
- Fix for nested classes and their attributes ([7fef903](https://github.com/pawamoy/mkdocstrings/commit/7fef9037c5299d6106347b0db29f85a644f85c16)).
- Fix `relative_file_path` method ([52715ad](https://github.com/pawamoy/mkdocstrings/commit/52715adc59fe2e26a9e91df88bac8b8b32d4635e)).
- Wrap file path in backticks to escape it ([2525f39](https://github.com/pawamoy/mkdocstrings/commit/2525f39ad8c181679fa33db8e6dfaa28eb39c289)).

## [0.7.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.1) - 2020-02-18

<small>[Compare with 0.7.0](https://github.com/pawamoy/mkdocstrings/compare/0.7.0...0.7.1)</small>

### Bug Fixes
- Replace literal slash with os.sep for Windows compatibility ([70f9af5](https://github.com/pawamoy/mkdocstrings/commit/70f9af5e33cda694cda33870c84a770c853d84b5)).


## [0.7.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.7.0) - 2020-01-13

<small>[Compare with 0.6.1](https://github.com/pawamoy/mkdocstrings/compare/0.6.1...0.7.0)</small>

### Bug Fixes
- Don't mark args or kwargs as required ([4049d6f](https://github.com/pawamoy/mkdocstrings/commit/4049d6f27c332b05db06bcfe6cc564f3c1c0f013)).
- Filter submodules ([7b11095](https://github.com/pawamoy/mkdocstrings/commit/7b110959529c5fc0275fb98c6d97e7c71e205900)).

### Code Refactoring
- Don't guess lang in generated docs ([db4f60a](https://github.com/pawamoy/mkdocstrings/commit/db4f60a13dd0d191d7515683d7d42ae374b39fae)).
- Render at HTML step with custom markdown converter ([9b5a3e1](https://github.com/pawamoy/mkdocstrings/commit/9b5a3e126cd584893a8d0858ca9b67b8251e88f1)).

### Features
- Change forward ref to ref, fix optional unions ([2f0bfaa](https://github.com/pawamoy/mkdocstrings/commit/2f0bfaabf367bfa513c20fb1230409306e43add2)).
- Discover package submodules ([231062a](https://github.com/pawamoy/mkdocstrings/commit/231062a3a107abc02134f102a06693969cf603ad)).
- Implement watched source code (hacks) ([4a67953](https://github.com/pawamoy/mkdocstrings/commit/4a67953c0af9da363d52ba058b3c51cf4cbfaabe)).


## [0.6.1](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.1) - 2020-01-02

<small>[Compare with 0.6.0](https://github.com/pawamoy/mkdocstrings/compare/0.6.0...0.6.1)</small>

### Bug Fixes
- Break docstring discarding loop if found ([5a17fec](https://github.com/pawamoy/mkdocstrings/commit/5a17fec5beed2003d19ccdcb359b46b79bfcf469)).
- Fix discarding docstring ([143f7cb](https://github.com/pawamoy/mkdocstrings/commit/143f7cb00f02a7d3179cc5606ed7903566250227)).
- Fix getting annotation from nodes ([ecde72b](https://github.com/pawamoy/mkdocstrings/commit/ecde72bb22ccedb36aa847dd50504c63ad04498c)).
- Fix various things ([affbf06](https://github.com/pawamoy/mkdocstrings/commit/affbf064d457d4b626e8f67d38e94d7919bc2df2)).

### Code Refactoring
- Break as soon as we find the same attr in a parent class while trying to discard the docstring ([65d7908](https://github.com/pawamoy/mkdocstrings/commit/65d7908f489ec465b2803ea8f55c70d0f9d7586b)).
- Split Docstring.parse method to improve readability ([2226e2d](https://github.com/pawamoy/mkdocstrings/commit/2226e2d55a6b9bbdd5a56183f1a9ba3c5f01b5ac)).


## [0.6.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.6.0) - 2019-12-28

<small>[Compare with 0.5.0](https://github.com/pawamoy/mkdocstrings/compare/0.5.0...0.6.0)</small>

### Bug Fixes
- Fix GenericMeta import error on Python 3.7+ ([febf2b9](https://github.com/pawamoy/mkdocstrings/commit/febf2b9749d97cce80f5d20339372842fdffc908)).

### Code Refactoring
- More classes. Still ugly code though :'( ([f41c119](https://github.com/pawamoy/mkdocstrings/commit/f41c11988d8d849a0310cca511c2d93a74cab86f)).
- Split into more modules ([f1872a4](https://github.com/pawamoy/mkdocstrings/commit/f1872a4c8d41a0b9603b7f344de3186110a4e1bd)).
- Use Object subclasses ([40dd106](https://github.com/pawamoy/mkdocstrings/commit/40dd1062188e6ad6ef6fbc12ddead2132fe6af1e)).


## [0.5.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.5.0) - 2019-12-22

<small>[Compare with 0.4.0](https://github.com/pawamoy/mkdocstrings/compare/0.4.0...0.5.0)</small>

### Features
- Use divs in HTML contents to ease styling ([2a36a0e](https://github.com/pawamoy/mkdocstrings/commit/2a36a0eba7f52c43a3eba593ddd971acaa0a9c92)).


## [0.4.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.4.0) - 2019-12-22

<small>[Compare with 0.3.0](https://github.com/pawamoy/mkdocstrings/compare/0.3.0...0.4.0)</small>

### Features
- Parse docstrings Google-style blocks, get types from signature ([5af0c7b](https://github.com/pawamoy/mkdocstrings/commit/5af0c7b766ea7158d603b44c6df278dbcd189864)).


## [0.3.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.3.0) - 2019-12-21

<small>[Compare with 0.2.0](https://github.com/pawamoy/mkdocstrings/compare/0.2.0...0.3.0)</small>

### Features
- Allow object referencing in docstrings ([2dd50c0](https://github.com/pawamoy/mkdocstrings/commit/2dd50c06f96acaf0e2f969f217f0cbcfb1de2fd4)).


## [0.2.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.2.0) - 2019-12-15

<small>[Compare with 0.1.0](https://github.com/pawamoy/mkdocstrings/compare/0.1.0...0.2.0)</small>

### Misc
- Refactor, features, etc. ([111fa85](https://github.com/pawamoy/mkdocstrings/commit/111fa85a6305a198ac4e19a75bb491b98683929c)).


## [0.1.0](https://github.com/pawamoy/mkdocstrings/releases/tag/0.1.0) - 2019-12-12

<small>[Compare with first commit](https://github.com/pawamoy/mkdocstrings/compare/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69...0.1.0)</small>

### Misc
- Clean up (delete unused files) ([c227043](https://github.com/pawamoy/mkdocstrings/commit/c227043814381b95031e426725e97106931f4ef9)).
- Clean up unused makefile rules ([edc01e9](https://github.com/pawamoy/mkdocstrings/commit/edc01e99aa7b762e800d9ae25cd5b842812dc326)).
- Initial commit ([f1dd8fb](https://github.com/pawamoy/mkdocstrings/commit/f1dd8fb2b4a4ae81f9144fe062ca9743ae82bd69)).
- Update readme ([ae56bdd](https://github.com/pawamoy/mkdocstrings/commit/ae56bdd9ac5692665409e99eb0fd509d8dfc605e)).
- Add plugin ([6ed5cb1](https://github.com/pawamoy/mkdocstrings/commit/6ed5cb1879b498ddc8d0fe1c04db7e3527f2ff81)).
- First PoC, needs better theming ([18a00b9](https://github.com/pawamoy/mkdocstrings/commit/18a00b9405a94405256a1ad2ae45886da40296e4)).
- Get attributes docstrings ([7838fff](https://github.com/pawamoy/mkdocstrings/commit/7838fffa5b1d5a481fd2ea5a94d305a96b06c321)).
- Refactor ([f68f1a8](https://github.com/pawamoy/mkdocstrings/commit/f68f1a89d477a55a6e86a9eb4c92bd5d6416b5cc)).
`````

## File: pulp-docs/pulp-docs/tests/fixtures/pulpcore/README.md
`````markdown
# Welcome

This is my project.
`````

## File: pulp-docs/pulp-docs/README.md
`````markdown
# pulp-docs: Unified multirepo documentation

<!--toc:start-->
- [Overview](#overview)
- [How it works](#how-it-works)
- [Runninng Locally](#runninng-locally)
<!--toc:end-->

Python Package to help aggregating Pulp's multirepo ecosystem into a unified doc.

## Overview

This packages is:

- A `mkdocs-macros-plugin` [pluget](https://mkdocs-macros-plugin.readthedocs.io/en/latest/pluglets/).
- A repository for common doc website asset.
- A centralized entrypoint for installing doc-related packages/tooling. (via its own requirements)
- A CLI for doc-related tasks, like serving and building.

The idea is that each repository should install `pulp-docs` and imediatelly be able run the unified website server.
Also, this should be used for the production build.

## How it works

Through a `mkdocs-macro-plugin` hook (called in early stages of mkdocs processing), we inject the following steps:

1. Read [`repolist.yml`](https://github.com/pulp/pulp-docs/blob/main/src/pulp_docs/data/repolist.yml) packaged with `pulp-docs` to know which repos/urls to use
1. Download/Move all source code required to dir under `tempfile.gettempdir()`
    - Uses `../{repo}` if available OR
    - Uses existing cached `{tmpdir}/{repo}` if available OR
    - Downloads from github
1. Configure `mkdocstrings` to find each repo codebase
1. Configure `mkdocs` navigation by leveraging our `/docs` content organization structure

And thats it, the magic is done.

## Setup

Recommended way for daily usage:

```bash
pipx install git+https://github.com/pulp/pulp-docs --include-deps
pulp-docs serve
```

For development, use your prefered method!

## How to override `repolist.yml`

If you want to share work you are doing in muliple forks, you can share a custom `repolist.yml` which points to your forks.

Then, anyone can test them locally by overriting your `repolist.yml` like so:

```bash
$ cat "path/to/my/repolist.yml"
repos:
  core:
    - name: pulpcore
      owner: some-github-username
      title: Pulp Core
      branch: main
(...)
$ export PULPDOCS_MKDOCS_FILE="path/to/my/repolist.yml"
$ pulp-docs serve
```
`````

## File: pulp-docs/pulp-oci-images/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{% set underline = underlines[0] %}{% if section %}{{section}}
{{ underline * section|length }}{% set underline = underlines[1] %}

{% endif %}

{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}
{{ definitions[category]['name'] }}
{{ underline * definitions[category]['name']|length }}

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
  {{ values|join(',\n  ') }}
{% endfor %}

{% else %}
- {{ sections[section][category]['']|join(', ') }}

{% endif %}
{% if sections[section][category]|length == 0 %}
This new version of pulp_installer only differs in that it installs the new version of pulpcore.

{% else %}
{% endif %}

{% endfor %}
{% else %}
No significant changes.


{% endif %}
{% endfor %}
----
`````

## File: pulp-docs/pulp-oci-images/docs/admin/guides/build-your-own-pulp-image.md
`````markdown
# Build your own Pulp image

The Pulp images (`pulp/pulp` and `pulp/pulp-minimal`) come pre-installed with the set of plugins
we officially support. However, these images can be easily customized to suit your specific content
needs. 

## Change the versions of the plugins

The easiest way to customize the images is to specify the plugin versions that should be used when
building them. Clone and check out the `pulp-oci-images` repository to use the following commands.

```bash
# Using docker to build pulp/pulp with a custom pulpcore version
$ docker build --build-arg PULPCORE_VERSION="==3.65.0" --file images/pulp/Containerfile --tag pulp/pulp:custom
# Using buildah to build pulp/pulp-minimal & pulp-web with a custom pulp_gem version
$ buildah bud --build-arg PULP_GEM_VERSION=">=2.22.0" --file images/pulp-minimal/Containerfile.core --tag pulp/pulp-minimal:custom
$ buildah bud --build-arg FROM_TAG="custom" --file images/pulp-minimal/Containerfile.webserver --tag pulp/pulp-web:custom
```

## Add/remove plugins

If you want to build a custom image with a different set of plugins then the official images you are
going to need to write a custom Containerfile. The Containerfiles for `pulp` and `pulp-minimal` 
should be used as templates for creating your custom image. First clone and check out the 
`pulp-oci-images` repository. Then create a new directory in the `images/` directory for your 
custom image and copy over the corresponding Containerfile for the `pulp` or `pulp-minimal` image
into your new directory. See [Available Images](site:pulp-oci-images/docs/admin/reference/available-images/)
for more information on the difference between the two images.

### pulp image customization

Here is an example of a customized Containerfile for the multiprocess image.

```dockerfile title="custom/Containerfile"
ARG FROM_TAG="latest"
# The multiprocess pulp image must inherit from pulp/pulp-ci-centos9
# The tags follow pulpcore-versioning 3.Y(.Z), we recommend using "latest"
FROM pulp/pulp-ci-centos9:${FROM_TAG}

# These are extra pip requirements needed to run Pulp
COPY images/assets/requirements.extra.txt /requirements.extra.txt

# Here you customize the plugins and their versions that you want to install
RUN pip3 install --upgrade \
  pulpcore[s3,google,azure] \
  pulp-custom-plugin \
  -r /requirements.extra.txt \
  -c /constraints.txt && \
  rm -rf /root/.cache/pip

# collectstatic makes the api browsable in a web browser
USER pulp:pulp
RUN PULP_STATIC_ROOT=/var/lib/operator/static/ PULP_CONTENT_ORIGIN=localhost \
       /usr/local/bin/pulpcore-manager collectstatic --clear --noinput --link
USER root:root

# If you plugin has extra API routes you need to link them here into /etc/nginx/pulp/
RUN ln $(pip3 show pulp_custom_plugin | sed -n -e 's/Location: //p')/pulp_custom_plugin/app/webserver_snippets/nginx.conf /etc/nginx/pulp/pulp_custom_plugin.conf

# Add pulp-ui to the image, specified using a build-arg PULP_UI_URL 
ARG PULP_UI_URL
ENV PULP_UI=${PULP_UI_URL:-false}
RUN \
  if [ -n "$PULP_UI_URL" ]; then \
    mkdir -p "${PULP_STATIC_ROOT}pulp_ui"; \
    curl -Ls $PULP_UI_URL | tar -xzv -C "${PULP_STATIC_ROOT}pulp_ui"; \
  fi
```

Build your custom `pulp` image

```bash
# Run from the root of the pulp-oci-images/ repository
$ docker build --file images/custom/Containefile . --tag pulp/pulp:custom
```

### pulp-minimal customization

Here is an example of a customized Containerfile for the single-process image.

```dockerfile title="custom-minimal/Containerfile.core"
ARG FROM_TAG="latest"
# The single-process pulp-minimal image must inherit from pulp/base
# The tags follow pulpcore-versioning 3.Y(.Z), we recommend using "latest"
FROM pulp/base:${FROM_TAG}

COPY images/assets/requirements.extra.txt /requirements.extra.txt
COPY images/assets/requirements.minimal.txt /requirements.minimal.txt

# Here you customize the plugins and their versions that you want to install
RUN pip3 install --upgrade \
  pulpcore[s3,google,azure] \
  pulp-custom-plugin \
  -r /requirements.extra.txt \
  -r /requirements.minimal.txt \
  -c /constraints.txt && \
  rm -rf /root/.cache/pip

# Prevent pip-installed /usr/local/bin/pulp-content from getting run instead of
# our /usr/bin/pulp-content script.
RUN rm -f /usr/local/bin/pulp-content

# collectstatic makes the api browsable in a web browser
USER pulp:pulp
RUN PULP_STATIC_ROOT=/var/lib/operator/static/ PULP_CONTENT_ORIGIN=localhost \
       /usr/local/bin/pulpcore-manager collectstatic --clear --noinput --link
USER root:root

# Correct the permissions needed for Pulp folders
RUN chmod 2775 /var/lib/pulp/{scripts,media,tmp,assets}
RUN chown :root /var/lib/pulp/{scripts,media,tmp,assets}
```

### pulp-web customization

If you customize the `pulp-minimal` image you will also need to customize the `pulp-web` image.

```dockerfile title="custom-minimal/Containerfile.webserver"
ARG FROM_TAG="custom"
# The web image must inherit from your custom pulp-minimal image, if you rename
# the image then you should rename it here, else we recommend changing the 
# default FROM_TAG to your custom tag
FROM pulp/pulp-minimal:${FROM_TAG} as builder

# Necessary directories for the web image
RUN mkdir -p /etc/nginx/pulp \
             /www/data \

# Here you should link every plugin that offers extra API routes to the
# /etc/nginx/pulp/ directory
RUN ln $(pip3 show pulp_custom_plugin | sed -n -e 's/Location: //p')/pulp_custom_plugin/app/webserver_snippets/nginx.conf /etc/nginx/pulp/pulp_custom_plugin.conf

# The rest should be left untouched unless you want a different nginx image/configuration
FROM docker.io/centos/nginx-116-centos7:1.16

COPY --from=builder /etc/nginx/pulp/*.conf "${NGINX_DEFAULT_CONF_PATH}"/

# Run script uses standard ways to run the application
CMD nginx -g "daemon off;"
```

Afterwards you can build both images with these commands:

```bash
$ docker build --file images/custom-minimal/Containerfile.core . --tag pulp/pulp-minimal:custom
$ docker build --build-arg FROM_TAG="custom" --file images/custom-minimal/Containerfile.webserver --tag pulp/pulp-web:custom
```
`````

## File: pulp-docs/pulp-oci-images/docs/admin/guides/configure-certificates.md
`````markdown
# Configure an SSL Certificate

By default, running the Multi-Process image with https image tag (`pulp/pulp:https`) will create and configure a self-signed certificate in Nginx.  
This documentation provide the steps to configure a custom certificate instead of using the provided self-signed.

There are a lot of excelent tools to generate X.509 certificates, like [`OpenSSL`](https://github.com/openssl/openssl), [`Vault`](https://developer.hashicorp.com/vault/tutorials/secrets-management/pki-engine), [Let's Encrypt](https://letsencrypt.org/getting-started/), etc.  
It is out of scope of this document to provide the steps to install or configure them.  

> :information_source: The following steps are meant to be a starting point to create a **test** certificate and configure it in Pulp multi-process containers.


## GENERATING A NEW CERTIFICATE

> :information_source: The following steps are optional in case a certificate is already available.

The current image of Pulp multi-process container comes with `openssl` installed.  
It also comes with an [init script](https://github.com/pulp/pulp-oci-images/blob/latest/images/s6_assets/init/certs) that generates a default certificate in case none is provided.

Here is an example of how to create a new custom certificate using `openssl`:
* create a self-signed certificate with `Subject: CN=$MY_DOMAIN` and the additional hosts (SubjectAlternativeName) `$CERT_SAN`
```console
$ podman exec -it pulp bash
[root@f14649b06e01 /]# MY_DOMAIN=pulp.example.com
[root@f14649b06e01 /]# CERTS_DIR=/etc/pulp/certs
[root@f14649b06e01 /]# CERT_SAN="subjectAltName=IP:0.0.0.0,DNS:pulp,DNS:pulp.example.com,DNS:localhost"
[root@f14649b06e01 /]# openssl req -x509 -nodes -newkey rsa:2048 -keyout ${CERTS_DIR}/pulp_webserver.key -out ${CERTS_DIR}/pulp_webserver.crt -days 365  -subj "/CN=$MY_DOMAIN" -addext $CERT_SAN
[root@f14649b06e01 /]# chgrp pulp ${CERTS_DIR}/pulp_webserver.crt ${CERTS_DIR}/pulp_webserver.key
```

* check the certificate content
```console
[root@c20257cd4dd4 /]# openssl x509 -noout -text -in ${CERTS_DIR}/pulp_webserver.crt
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            7a:ff:8d:e3:92:02:bf:6e:ad:76:ea:45:1c:80:ea:fd:49:c2:da:5e
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: CN = pulp.example.com
        Validity
            Not Before: Dec 13 13:17:29 2022 GMT
            Not After : Dec 13 13:17:29 2023 GMT
        Subject: CN = pulp.example.com
        Subject Public Key Info:
...
```


## CONFIGURING A CUSTOM SERVER CERTIFICATE IN NGINX

### **Configuring the new custom certificate**

To use the custom certificate created using the steps from [*GENERATING A NEW CERTIFICATE*](#generating-a-new-certificate):
* copy the certificates into `/etc/pki/tls/certs/` directory:
> :warning: make sure to not modify the destination file names and path (`/etc/pki/tls/certs/pulp_webserver.crt` and `/etc/pki/tls/private/pulp_webserver.key`) because these are the names configured in Nginx
```console
$ podman exec -it pulp bash
[root@f14649b06e01 /]# cp /etc/pulp/certs/pulp_webserver.crt /etc/pki/tls/certs/pulp_webserver.crt
cp: overwrite '/etc/pki/tls/certs/pulp_webserver.crt'? y
[root@f14649b06e01 /]# cp /etc/pulp/certs/pulp_webserver.key /etc/pki/tls/private/pulp_webserver.key
cp: overwrite '/etc/pki/tls/private/pulp_webserver.key'? y
```

* restart nginx process to get the new certificate
```
$ podman exec pulp s6-svc -r /run/service/nginx
```

* verify that Nginx is now using the new certificate
```
$ podman exec pulp  openssl s_client -connect pulp:443
Can't use SSL_get_servername
depth=0 CN = pulp.example.com
verify error:num=18:self signed certificate
verify return:1
depth=0 CN = pulp.example.com
verify return:1
CONNECTED(00000003)
---
Certificate chain
 0 s:CN = pulp.example.com
   i:CN = pulp.example.com
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIDTTCCAjWgAwIBAgIUZFS+5+hhWrM270+X+k8vpfwIQL8wDQYJKoZIhvcNAQEL
BQAwGzEZMBcGA1UEAwwQcHVscC5leGFtcGxlLmNvbTAeFw0yMjEyMTQxNzMxMzda
Fw0yMzEyMTQxNzMxMzdaMBsxGTAXBgNVBAMMEHB1bHAuZXhhbXBsZS5jb20wggEi
...
-----END CERTIFICATE-----
subject=CN = pulp.example.com
issuer=CN = pulp.example.com
```

### **Configuring an existing certificate**

It is also possible to bring your own company certificate instead of creating a new one through [*GENERATING A NEW CERTIFICATE*](#generating-a-new-certificate) steps.

* copy the certificates into `/etc/pulp/certs/` directory. This will prevent having to copy the certificates again in case of a container reprovisioning (the certificates will be persisted in container volume):
```console
$ podman cp my-company-generated-certificate.crt pulp:/etc/pulp/certs/pulp_webserver.crt
$ podman cp my-company-generated-certificate.key pulp:/etc/pulp/certs/pulp_webserver.key
```

* now, copy the certificates into `/etc/pki/tls/certs/` directory:
> :warning: make sure to not modify the destination file names and path (`/etc/pki/tls/certs/pulp_webserver.crt` and `/etc/pki/tls/private/pulp_webserver.key`) because these are the names configured in Nginx
```console
$ podman exec -it pulp bash
[root@f14649b06e01 /]# cp /etc/pulp/certs/pulp_webserver.crt /etc/pki/tls/certs/pulp_webserver.crt
cp: overwrite '/etc/pki/tls/certs/pulp_webserver.crt'? y
[root@f14649b06e01 /]# cp /etc/pulp/certs/pulp_webserver.key /etc/pki/tls/private/pulp_webserver.key
cp: overwrite '/etc/pki/tls/private/pulp_webserver.key'? y
```

* restart nginx process to get the new certificate
```
$ podman exec pulp s6-svc -r /run/service/nginx
```


* verify that Nginx is now using the new certificate
```
$ podman exec pulp  openssl s_client -connect pulp:443
Can't use SSL_get_servername
depth=0 CN = /test
depth=0 CN = /test
CONNECTED(00000003)
---
Certificate chain
 0 s:CN = my-company-domain
   i:CN = my-company-domain
---
Server certificate
-----BEGIN CERTIFICATE-----
MIIDTTCCAjWgAwIBAgIUZFS+5+hhWrM270+X+k8vpfwIQL8wDQYJKoZIhvcNAQEL
BQAwGzEZMBcGA1UEAwwQcHVscC5leGFtcGxlLmNvbTAeFw0yMjEyMTQxNzMxMzda
Fw0yMzEyMTQxNzMxMzdaMBsxGTAXBgNVBAMMEHB1bHAuZXhhbXBsZS5jb20wggEi
...
-----END CERTIFICATE-----
subject=CN = my-company-domain
issuer=CN = my-company-domain
```

## SETTING UP ADDITIONAL TRUSTED CAs

Use the following steps to set up additional certificate authorities (CA) to be trusted by the services running in Pulp container.

```console
$ podman cp my-company-CA.crt pulp:/etc/pki/ca-trust/source/anchors/
$ podman exec pulp update-ca-trust
```

* check the ca-trust list
```console
$ podman exec pulp grep pulp.example.com -A20 /etc/pki/ca-trust/extracted/openssl/ca-bundle.trust.crt
# pulp.example.com
-----BEGIN TRUSTED CERTIFICATE-----
MIIDFzCCAf+gAwIBAgIUBd+SIbUJPVSgO2jR9mgtoGfRo3IwDQYJKoZIhvcNAQEL
BQAwGzEZMBcGA1UEAwwQcHVscC5leGFtcGxlLmNvbTAeFw0yMjEyMTMxMzI1MDFa
...
-----END TRUSTED CERTIFICATE-----
```

To avoid having to run these steps everytime a new container is provisioned, it is also possible to create a new image with the CA built in it:
```console
$ cat<<EOF | podman build -t my_pulp_image -f- .
FROM quay.io/pulp/pulp:latest
COPY my-company-CA.crt /etc/pki/ca-trust/source/anchors/
RUN update-ca-trust
EOF
```
`````

## File: pulp-docs/pulp-oci-images/docs/admin/guides/configure-database-encryption.md
`````markdown
# Configure DB Encryption

Pulp uses a symmetric fernet key to encrypt sensitive fields in the database.
The default location of the key is `/etc/pulp/certs/database_fields.symmetric.key`.

The key is automatically generated and is stored in `/etc/pulp/certs/database_fields.symmetric.key`.
The script to generate the key can be found at: https://github.com/pulp/pulp-oci-images/blob/latest/images/s6_assets/init/db-fields-key-create

* list of commands that [`db-fields-key-create`](https://github.com/pulp/pulp-oci-images/blob/latest/images/s6_assets/init/db-fields-key-create) script runs to generate the key:
```bash
openssl rand -base64 32 > /etc/pulp/certs/database_fields.symmetric.key
chmod 640 /etc/pulp/certs/database_fields.symmetric.key
chown root:pulp /etc/pulp/certs/database_fields.symmetric.key
```

## Rotating the Database Encryption Key

See [Database Encryption] for a description how to rotate the key.

[Database Encryption]: site:pulpcore/docs/admin/guides/configure-pulp/db-encryption/
`````

## File: pulp-docs/pulp-oci-images/docs/admin/guides/configure-signing-service.md
`````markdown
# Configure a Signing Service

!!! warning

     Content Signing is in tech-preview and may change in backwards incompatible ways in future releases.

It is possible to sign Pulp's metadata so that users can verify the authenticity of an object.  
This is done by enabling the *Signing Services* feature. The steps to enable it are:

* [create a gpg key](#creating-a-gpg-key)
* [create the signing script](#creating-the-collection-signing-script)
* [create the signing services](#creating-the-signing-services)


For further information, see:

* [pulpcore documentation](site:pulpcore/docs/admin/guides/sign-metadata/) for details on ***Content Signing***
* [pulp_container documentation](site:pulp_container/docs/admin/guides/sign-image/) for details on ***Container Image Signing***


## Creating a gpg key

* open a shell in `pulp` container
> :information_source: Make sure to run the `exec` with `-u pulp`.
```console
$ podman exec -u pulp -it pulp bash
```

* generate a gpg key for user `pulp@example.com`
```console
bash-4.4$ GPG_EMAIL=pulp@example.com
bash-4.4$ cat >/tmp/gpg.txt <<EOF
%echo Generating a basic OpenPGP key
Key-Type: default
Key-Length: 4096
Subkey-Type: default
Subkey-Length: default
Name-Real: Collection Signing Service
Name-Comment: with no passphrase
Name-Email: $GPG_EMAIL
Expire-Date: 0
%no-ask-passphrase
%no-protection
# Do a commit here, so that we can later print "done" :-)
%commit
%echo done
EOF

bash-4.4$ mkdir -m 700 /var/lib/pulp/.gnupg/
bash-4.4$ gpg --batch --gen-key /tmp/gpg.txt
```

* verify the list of available keyrings
```console
bash-4.4$ gpg --list-keys
/var/lib/pulp/.gnupg/pubring.kbx
--------------------------------
pub   rsa4096 2022-12-14 [SC]
      66BBFE010CF70CC92826D9AB71684D7912B09BC1
uid           [ultimate] Collection Signing Service (with no passphrase) <pulp@example.com>
sub   rsa2048 2022-12-14 [E]
```

The above uid will be used in [*create the signing services*](#creating-the-signing-services) step.  
See the GnuPG official documentation for more information on how to generate a new keypair: https://www.gnupg.org/gph/en/manual/c14.html

## Creating the collection signing script

Administrators can add *Signing Services* to Pulp using the command line tools. Users may then associate the *Signing Services* with repositories that support content signing.  
To do so, the first thing needed is to create a script that will be used by the *Signing Service*.

* open a shell in `pulp` container
```console
$ podman exec -it -u pulp pulp bash
```

* example of a *collection signing script*
```console
bash-4.4$ SIGNING_SCRIPT_PATH=/var/lib/pulp/scripts
bash-4.4$ COLLECTION_SIGNING_SCRIPT=my_collection_signing_script.sh
bash-4.4$ cat<<EOF> "$SIGNING_SCRIPT_PATH/$COLLECTION_SIGNING_SCRIPT"
#!/usr/bin/env bash
set -u
FILE_PATH=\$1
SIGNATURE_PATH="\$1.asc"

ADMIN_ID="\$PULP_SIGNING_KEY_FINGERPRINT"
PASSWORD="password"

# Create a detached signature
gpg --quiet --batch --pinentry-mode loopback --yes --passphrase \
   \$PASSWORD --homedir ~/.gnupg/ --detach-sign --default-key \$ADMIN_ID \
   --armor --output \$SIGNATURE_PATH \$FILE_PATH

# Check the exit status
STATUS=\$?
if [ \$STATUS -eq 0 ]; then
   echo {\"file\": \"\$FILE_PATH\", \"signature\": \"\$SIGNATURE_PATH\"}
else
   exit \$STATUS
fi
EOF

bash-4.4$ chmod +x "$SIGNING_SCRIPT_PATH/$COLLECTION_SIGNING_SCRIPT"
```

The script should print out a JSON structure with the following format. All the file names are relative paths inside the current working directory:
```json
{"file": "filename", "signature": "filename.asc"}
```


## Creating the container signing script

Administrators can add a container manifest *Signing Services* to the Pulp Registry using the command line tools. Users may then associate the *Signing Services* with container repositories.  
To do so, the first thing needed is to create a script that will be used by the *Signing Service*.

* open a shell in `pulp` container
```console
$ podman exec -it -u pulp pulp bash
```

* example of a *container signing script*
```console
bash-4.4$ SIGNING_SCRIPT_PATH=/var/lib/pulp/scripts
bash-4.4$ CONTAINER_SIGNING_SCRIPT=my_container_signing_script.sh
bash-4.4$ cat<<EOF> "$SIGNING_SCRIPT_PATH/$CONTAINER_SIGNING_SCRIPT"
#!/usr/bin/env bash
set -u

MANIFEST_PATH=\$1
IMAGE_REFERENCE="\$REFERENCE"
SIGNATURE_PATH="\$SIG_PATH"

skopeo standalone-sign \
      \$MANIFEST_PATH \
      \$IMAGE_REFERENCE \
      \$PULP_SIGNING_KEY_FINGERPRINT \
      --output \$SIGNATURE_PATH

# Check the exit status
STATUS=\$?
if [ \$STATUS -eq 0 ]; then
  echo {\"signature_path\": \"\$SIGNATURE_PATH\"}
else
  exit \$STATUS
fi
EOF

bash-4.4$ chmod +x "$SIGNING_SCRIPT_PATH/$CONTAINER_SIGNING_SCRIPT"
```

The script should print out a JSON structure with the following format. The path of the created signature is a relative path inside the current working directory:
```json
{"signature_path": "signature"}
```

## Creating the signing services


* open a shell in `pulp` container
```console
$ podman exec -it -u pulp pulp bash
```

* get the subkey fingerprint from `pulp@example.com` (the same uid from [*creating a gpg key*](#creating-a-gpg-key))
```console
bash-4.4$ KEY_UID=pulp@example.com
bash-4.4$ export PULP_SIGNING_KEY_FINGERPRINT=$(gpg --with-colons --list-keys ${KEY_UID}|awk -F: '/sub/{getline;print $10;exit}')
```

* create the collection signing service
```console
bash-4.4$ COLLECTION_SIGNING_SERVICE="ansible-default"
bash-4.4$ COLLECTION_SIGNING_SCRIPT=/var/lib/pulp/scripts/my_collection_signing_script.sh
bash-4.4$ /usr/local/bin/pulpcore-manager add-signing-service ${COLLECTION_SIGNING_SERVICE} ${COLLECTION_SIGNING_SCRIPT} ${PULP_SIGNING_KEY_FINGERPRINT}
```

* create the container signing service
```console
bash-4.4$ CONTAINER_SIGNING_SERVICE="container-default"
bash-4.4$ CONTAINER_SIGNING_SCRIPT=/var/lib/pulp/scripts/my_container_signing_script.sh
bash-4.4$ /usr/local/bin/pulpcore-manager add-signing-service ${CONTAINER_SIGNING_SERVICE} ${CONTAINER_SIGNING_SCRIPT} ${PULP_SIGNING_KEY_FINGERPRINT}  --class container:ManifestSigningService
```


## Verifying the signing services

* To check the signing services, make a request to `/pulp/api/v3/signing-services/` endpoint. For example:
```console
$ podman exec pulp curl -Ls -u admin:password localhost:24817/pulp/api/v3/signing-services/ |jq
```
```json
{
  "count": 2,
  "next": null,
  "previous": null,
  "results": [
    {
      "pulp_href": "/pulp/api/v3/signing-services/95f7fb89-d134-42e3-8fb1-3565dfbe2583/",
      "pulp_created": "2022-12-12T16:01:34.912449Z",
      "name": "ansible-default",
      "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGOTMxwBEADNF...MJfhcG0MpAsiQ\n=/r5T\n-----END PGP PUBLIC KEY BLOCK-----\n",
      "pubkey_fingerprint": "0141A0760878E84C4854BEC43EBAAB0BBB58CFDB",
      "script": "/var/lib/pulp/scripts/my_collection_signing_script.sh"
    },
    {
      "pulp_href": "/pulp/api/v3/signing-services/0b5bbb01-8768-4fa9-b4bc-441f24ced42a/",
      "pulp_created": "2022-12-12T16:29:55.007360Z",
      "name": "container-default",
      "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGOTMxwBEADNFkuhOVkQR...MJfhcG0MpAsiQ\n=/r5T\n-----END PGP PUBLIC KEY BLOCK-----\n",
      "pubkey_fingerprint": "0141A0760878E84C4854BEC43EBAAB0BBB58CFDB",
      "script": "/var/lib/pulp/scripts/my_container_signing_script.sh"
    }
  ]
}
```
`````

## File: pulp-docs/pulp-oci-images/docs/admin/guides/migrate-pulp-installer-to-multi-process.md
`````markdown
# Migrate from pulp_installer to a multi-process container

## Overview

These instructions will migrate you from a [pulp_installer deployment](https://github.com/pulp/pulp_installer) to a
[multi-process container deployment](site:pulp-oci-images/docs/admin/reference/available-images/multi-process-images/).

The same host will be running Pulp, but in a container now.

All of pulp_installer 3.23's supported distros are documented, but instructions will have extra steps depending upon the PostgreSQL version (the container runs PostgreSQL 13). These steps are all listed in the instructions per distro, but here is an overview:

| Distro | PostgreSQL Version | Extra Steps |
| ------ | ------------------ | ------------- |
| Debian 11 | 13 | |
| EL7 | 10 | Dump and restore the database |
| EL8 | 10 | Dump and restore the database |
| EL9 | 13 | |
| Fedora 33 | 12 | Starting the container will take longer the 1st time |
| Fedora 34 | 13 | |
| Fedora 35 | 13 | |
| Fedora 36 | 14 | PostgreSQL must remain running on the host |
| Ubuntu 22.04 | 14 | PostgreSQL must remain running on the host |

## Limitations

1. All of your existing installed plugins must be installed in the multi-process container image. See the list of installed plugins
[here](site:pulp-oci-images/docs/admin/reference/available-images/multi-process-images/#available-images).

## Prerequisites

1. Either [podman](https://podman.io/getting-started/installation) or
[docker](https://docs.docker.com/engine/install/)/[moby-engine](https://mobyproject.org/)
must be installed on the host.
2. If you are running podman in rootless mode (which is recommended for security), make sure your user account has subuid's and subgid's (the default behavior for new acconts on many Linux distros.) See [this guide](https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md#etcsubuid-and-etcsubgid-configuration) to verify / set this up.
3. If you are running docker/moby-engine, either the user account is in the docker group, or you preface `docker` commands with `sudo`.

## Assumptions

1. The directory you run the commands in is one where you want the Pulp data and configuration directories to reside under. You can actually let them reside in their current (pulp_installer defaulted or specified) directories on the system if you'd prefer, just specify the absolute folder paths in the commands below, and do not run the move commands.
2. If you are running rootless podman, you are running `podman` commands from the account that the container will run under. 
3. sudo commands are run under an account that actually has sudo. This need not necessarily be the rootless podman account, but if it isn't, substitute `$USER:$(id -gn)` with the user and primary group (separated by a colon) of the rootless podman account.
4. If you are running docker, substitute `docker` for `podman` in the commands.

## Step-By-Step-Guide

### Disable and stop the Pulp service

```
sudo systemctl disable --now pulpcore
```

### Configure PostgreSQL to listen on all network interfaces (Fedora 36 and Ubuntu 22.04 only)

This is necessary for container networks to access PostgreSQL.

Ensure this line is in `/var/lib/pgsql/data/pg_hba.conf` (Fedora 36) / `/etc/postgresql/14/main/pg_hba.conf` (Ubuntu 22.04):
```
host all all 0.0.0.0/0 md5
```

Ensure this line is in `/var/lib/pgsql/data/postgresql.conf` (Fedora 36) / `/etc/postgresql/14/main/postgresql.conf` (Ubuntu 22.04):
```
listen_addresses = '*'
```

Run:
```
sudo systemctl restart postgresql
```

### Dump the PostgreSQL database (EL7 and EL8 only)

```
sudo -u postgres pg_dumpall > /tmp/dump.sql
```

Verify that this command outputs "0", which indicates that the dump was successful.

```
echo $?
```

```
sudo mv /tmp/dump.sql /var/lib/pgsql
```

### Disable/restart the third-party services

On Fedora 36:
```
sudo systemctl disable --now nginx redis
```
On Ubuntu 22.04:
```
sudo systemctl disable --now nginx redis-server
```
On on EL, or Fedora prior to 36:
```
sudo systemctl disable --now postgresql nginx redis
```
On Debian 11:
```
sudo systemctl disable --now postgresql nginx redis-server
```


### Manage the Pulp storage directory

1st, move the directory:

```
sudo mv /var/lib/pulp/ pulp_storage
```

Next change ownership of the directory:

If running rootless podman:
```
sudo chown -R $USER:$(id -gn) pulp_storage
podman unshare chown -R 700:700 pulp_storage
```

If running podman as root, or docker:
```
sudo chown -R 700:700 pulp_storage
```

### Manage the Pulp configuration directory

1st, move the directory:
```
sudo mv /etc/pulp settings
```

Next change ownership of the directory:

If running rootless podman:
```
sudo chown -R $USER:$(id -gn) settings
podman unshare chown -R 700:700 settings
```
If running podman as root, or docker:
```
sudo chown -R 700:700 settings
```

### Configure Pulp to talk to the database (Fedora 36 and Ubuntu 22.04 only)

If running podman, modify `settings/settings.py` so that "DATABASE" includes:
```
'HOST': 'host.containers.internal'
```
An example of what the line will look like:
```
DATABASES = {'default': {'HOST': 'host.containers.internal', 'ENGINE': 'django.db.backends.postgresql', 'NAME': 'pulp', 'USER': 'pulp', 'PASSWORD': 'pulp'}}
```

If running docker, modify `settings/settings.py` so that "DATABASE" includes:
```
'HOST': 'host.docker.internal'
```
An example of what the line will look like:
```
DATABASES = {'default': {'HOST': 'host.docker.internal', 'ENGINE': 'django.db.backends.postgresql', 'NAME': 'pulp', 'USER': 'pulp', 'PASSWORD': 'pulp'}}
```

### Manage the PostgreSQL data directory (EL, Fedora prior to 36, and Debian 11 only)

1st, move the directory:

If on EL, or Fedora prior to 36
```
sudo mv /var/lib/pgsql pgsql
```
If on Debian 11:
```
sudo mv /var/lib/postgresql/13 pgsql
sudo mv pgsql/main pgsql/data
```
If on EL7 or EL8:
```
sudo mv pgsql/data pgsql/data_old
```

Next, if on Debian 11, move the config files:
```
sudo mv /etc/postgresql/13/main/*.conf /etc/postgresql/13/main/conf.d/ pgsql/data/
```

Next change ownership of the directory:

If running rootless podman:
```
sudo chown -R $USER:$(id -gn) pgsql
podman unshare chown -R 26:26 pgsql
```
If running podman as root, or docker:
```
sudo chown -R 26:26 pgsql
```

### Configure Postgres to be compatible with the EL8-based container (Debian 11 only)

Backup `pgsql/data/postgresql.conf` before you modify it:
```
sudo cp pgsql/data/postgresql.conf pgsql/data/postgresql.conf.old
```

Next, comment out the following lines in `pgsql/data/postgresql.conf`:
```
data_directory
hba_file
ident_file
external_pid_file
unix_socket_directories
ssl
ssl_cert_file
ssl_key_file
cluster_name
stats_temp_directory
```

### Create an empty containers directory

We do not bother to move `/var/lib/containers` because it is only ever used for temporary files by pulp_container, and may be used on the host for other purposes (like running podman):

```
mkdir containers
```

### Configure the system to allow listening on low ports (rootless podman only)

The default ports for pulp_installer were 443 (with https, the default) or 80 (without https).

If you are running rootless podman, and you wish to preserve the low port (anything under 1024)
that Pulp listens on (recommended to avoid reconfiguring clients),
you must configure the system to permit unprivileged
processes listening on low ports.

Assuming the port is 443, run the following command:
```
sudo sysctl net.ipv4.ip_unprivileged_port_start=443
echo "net.ipv4.ip_unprivileged_port_start=443" | sudo tee /etc/sysctl.d/10-low_ports.conf
```

### Restore the database (EL7 or EL8 only)

Run the container with the normal
[command](site:pulp-oci-images/docs/admin/reference/available-images/multi-process-images/#starting-the-container),
but with `-it` instead of `-detach`, and with `/bin/bash` as the specified command. We also omit the "--publish 8080:80"
```
podman run -it \
           --name pulp \
           --volume "$(pwd)/settings":/etc/pulp:Z \
           --volume "$(pwd)/pulp_storage":/var/lib/pulp:Z \
           --volume "$(pwd)/pgsql":/var/lib/pgsql:Z \
           --volume "$(pwd)/containers":/var/lib/containers:Z \
           --device /dev/fuse \
           pulp/pulp \
           /bin/bash
```

You will now be running commands in the container:
```
su postgres -c "initdb -E UTF8 --locale=C.UTF-8 --pgdata=/var/lib/pgsql/data"
su postgres -c "pg_ctl start -D /var/lib/pgsql/data"
su postgres -c "psql -d postgres -f /var/lib/pgsql/dump.sql"
```

Verify that this next command outputs "0" to indicate that the database restore was successful.
```
echo $?
```

```
su postgres -c "pg_ctl stop -D /var/lib/pgsql/data"
```

Now exit the container:
```
exit
```

Now delete the container (but not the data directories):
```
podman rm pulp
```

### Run the container like normal.

Run the container with the normal
[command](site:pulp-oci-images/docs/admin/reference/available-images/multi-process-images/#starting-the-container).


There are 2 migration-specific exceptions to the instructions on that page.

The 1st exception is the port that Pulp listens on.

https is the default for pulp_installer, so see the https instructions on
[that page](site:pulp-oci-images/docs/admin/reference/available-images/multi-process-images/#starting-the-container).
if you wish to continue running https. However, instead of specifying `--publish 8080:443` or `--publish 80:80`, specify `--publish 443:443`. This will keep Pulp listening on port 443, thus avoiding the need to reconfigure clients. This will be part of your new normal command.

If you are not running https, the command below has been modified to listen on port 80 rather than
8080. `--publish 8080:80` has been replaced with `--publish 80:80`. This will be part of your new
normal command.

The 2nd possible exception is for the pgsql directory and networking.

If you are running podman on Fedora 36 or Ubuntu 22.04, leave out `--volume "$(pwd)/pgsql":/var/lib/pgsql:Z`, and add `--network slirp4netns:allow_host_loopback=true,cidr=10.0.100.0/24`. This will be part of your new normal command.

If you are running docker on Fedora 36 or Ubuntu 22.04, leave out `--volume "$(pwd)/pgsql":/var/lib/pgsql:Z`, and add `--add-host=host.docker.internal:host-gateway`. This will be part of your new normal command.

```
podman run --detach \
             --publish 80:80 \
             --name pulp \
             --volume "$(pwd)/settings":/etc/pulp:Z \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp:Z \
             --volume "$(pwd)/pgsql":/var/lib/pgsql:Z \
             --volume "$(pwd)/containers":/var/lib/containers:Z \
             --device /dev/fuse \
             pulp/pulp
```

It is recommended to view the container logs:
```
podman logs -f pulp
```

If you are running Fedora 33, startup will take longer than usual as the database is migrated from PostgreSQL 12 to 13. This is done automatically using the image's built-in upgrade logic.
`````

## File: pulp-docs/pulp-oci-images/docs/admin/reference/available-images/index.md
`````markdown
# Available Images

## Overview

The available images can be divided into two types:

- [Multi-Process Images](multi-process-images) - Images for running a [Pulp](https://github.com/pulp/pulpcore) or [Ansible Galaxy](https://github.com/ansible/galaxy_ng), as well as its [third-party services](#third-party-services),
in a single Docker/Podman container.
- [Single-Process Images](single-process-images) - Images containing a single Pulp service each, which collectively make up a Pulp instance. They can be used via docker-compose or podman-compose, example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose). These images are also used by [pulp operator](site:pulp-operator).

| Name | Description |
| ---- | ----------- |
| pulp | Multi-Process Pulp with several plugins |
| pulp-minimal | Single-Process Pulp with several plugins
| pulp-web | Webserver for pulp-minimal |
| galaxy | Multi-Process Ansible Galaxy |
| galaxy-minimal | Single-Process Ansible Galaxy |
| galaxy-web | Webserver for galaxy-minimal |

!!! note "Note on Galaxy images"
    
    We are no longer building any newer image versions of galaxy-ng>=4.10. We will still continue
    to build new Z-updates for existing tags, but going forward the `stable` and `latest` tags are
    now discontinued. 

## First-Party Services

The first-party services are services written by the Pulp project itself.

They are pulp-api, pulp-content, and pulp-worker.

## Third-Party Services

The third-party services are services written by other open source projects, but
Pulp depends on them as the middle tier in 3-tier application architecture to
run.

The 2 backends are the PostgreSQL database server and the redis caching server.

The 1 frontend is the Nginx webserver, with special config to combine
both pulp-api and pulp-content into one service.
`````

## File: pulp-docs/pulp-oci-images/docs/admin/reference/available-images/multi-process-images.md
`````markdown
# Multi-Process Images

These images are also known as "Single Container", or "Pulp in One Container".

Each image runs all 3 Pulp services (pulp-api, pulp-content and pulp-worker),
as well as Pulp's third-party services (nginx, postgresql and redis),
in one single container.

## System Requirements

Either [podman](https://podman.io/getting-started/installation) or
[docker](https://docs.docker.com/engine/install/)/[moby-engine](https://mobyproject.org/)
must be installed.

Podman has been tested at versions as low as 1.6.4, which is available on CentOS/RHEL 7 and later.

## Available images

### pulp

This image contains [Pulp](https://github.com/pulp/pulpcore) and the following plugins currently:

- [pulp_ansible](site:pulp_ansible)
- [pulp-certguard](site:pulp_certguard)
- [pulp_container](site:pulp_container)
- [pulp_deb](site:pulp_deb)
- [pulp_file](site:pulp_file)
- [pulp_maven](site:pulp_maven)
- [pulp_python](site:pulp_python)
- [pulp_rpm](site:pulp_rpm)
- [pulp_ostree](site:pulp_ostree)

This image can also function the same as the single-process image `pulp-minimal`.
See the [Single-Process Images](../single-process-images/) page for usage.

#### Tags

- `stable`: Built nightly, with latest released version of each plugin. Also called `latest`.
- `nightly`: Built nightly, With master/main branches of each plugin. Also built with several
  additional plugins that are not GA yet.
- `3.y`:  Pulpcore 3.y version and its compatible plugins. Built whenever there is a z-release.

[Browse available tags](https://hub.docker.com/r/pulp/pulp/tags)

#### Discontinued tags

- `https`: These were built nightly, with latest released version of each plugin. Nginx webserver ran with SSL/TLS. Now, use `stable` instead with `-e PULP_HTTPS=true`.
- `3.y-https`:  Pulpcore 3.y version and its compatible plugins. These were built whenever there is a z-release.
  Nginx webserver ran with SSL/TLS. Now, use `3.y` instead with `-e PULP_HTTPS=true`.

### galaxy

This image contains Ansible [Galaxy](https://github.com/ansible/galaxy_ng).

This image can also function the same as the single-process image `galaxy-minimal`.
See the [Single-Process Images](../single-process-images/) page for usage.

Note that this name `galaxy` used to be for single-process images. Version tags `4.6.3` and earlier
are single-process rather than multi-process.

Note that we are no longer building galaxy images for any new galaxy-ng versions >=4.10. We will still
publish galaxy images for Z updates on existing tags until Galaxy drops support for those versions.

[Browse available tags](https://hub.docker.com/r/pulp/galaxy/tags)

#### Discontinued tags

- `https`: These were built nightly, with latest released version of each plugin. Nginx webserver ran with SSL/TLS. Now, use `stable` instead with `-e PULP_HTTPS=true`.
- `stable`: We are no longer building galaxy images for any new galaxy-ng version >=4.10.

## Quickstart

### Galaxy Quickstart

The galaxy base image includes a default settings.py and can be configured using environment variables. This image can be configured with the following two environment variables:

- `GALAXY_HOSTNAME`: publicly accessible hostname that the API and content app will run on.
- `GALAXY_PORT`: public port that the API and content app will run on.

The galaxy image can also be run just like any of the other multi process pulp images by mounting a custom settings.py file, however this setup provides an easy, out of the box configuration for running galaxy.

#### Examples

Run galaxy on localhost:

```
$ podman run -p 8080:80 ghcr.io/pulp/galaxy:4.9
```

Run galaxy on localhost with https:

```
$ podman run -p 443:443 -e "PULP_HTTPS=true" -e "GALAXY_PORT=443" ghcr.io/pulp/galaxy:4.9
```

Run galaxy from a server with https:

```
$ podman run -p 443:443 -e "PULP_HTTPS=true" -e "GALAXY_PORT=443" -e "GALAXY_HOSTNAME=192.168.0.100" ghcr.io/pulp/galaxy:4.9
```

Modify the system settings to allow for uploads without approval:

```
$ podman run -p 8080:80 -e "PULP_GALAXY_REQUIRE_CONTENT_APPROVAL=false" ghcr.io/pulp/galaxy:4.9
```

Mount the storage directories for persistent data and https:

NOTE: don't mount volumes to `/etc/pulp/` as you would with the vanilla pulp images, as this will
override the default settings.py file.

```
$ podman run --detach \
             --publish 443:443 \
             --name pulp \
             -e "GALAXY_HOSTNAME=my.galaxy.host.example.com" \
             -e "PULP_HTTPS=true" \
             -e "GALAXY_PORT=443" \
             --volume "$(pwd)/settings/certs":/etc/pulp/certs:Z \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp:Z \
             --volume "$(pwd)/pgsql":/var/lib/pgsql:Z \
             --volume "$(pwd)/containers":/var/lib/containers:Z \
             --device /dev/fuse \
             ghcr.io/pulp/galaxy:4.9
```

Once your containers are running see "Reset the Admin Password" section to set up your admin user.

### Create the Directories and Settings

1st, create the directories for storage/configuration, and create the `settings.py` file:

```
$ mkdir -p settings/certs pulp_storage pgsql containers
$ echo "CONTENT_ORIGIN='http://$(hostname):8080'
ANSIBLE_API_HOSTNAME='http://$(hostname):8080'
ANSIBLE_CONTENT_HOSTNAME='http://$(hostname):8080/pulp/content'
CACHE_ENABLED=True" >> settings/settings.py
```

* For a complete list of available settings for `settings.py`,
  see [the Pulpcore Settings](site:pulpcore/docs/admin/reference/settings/).

* These 4 directories `settings pulp_storage pgsql containers` must be preserved. `settings` has
  your settings, generated certificates, and generated database encrypted fields key. The
  `pulp_storage pgsql containers` are the application data.

### Starting the Container

For systems with SELinux enabled, use the following command to start Pulp:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume "$(pwd)/settings":/etc/pulp:Z \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp:Z \
             --volume "$(pwd)/pgsql":/var/lib/pgsql:Z \
             --volume "$(pwd)/containers":/var/lib/containers:Z \
             --device /dev/fuse \
             pulp/pulp
```

For systems with SELinux disabled, use the following command to start Pulp:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume "$(pwd)/settings":/etc/pulp \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp \
             --volume "$(pwd)/pgsql":/var/lib/pgsql \
             --volume "$(pwd)/containers":/var/lib/containers \
             --device /dev/fuse \
             pulp/pulp
```

* For Docker systems, use the last 2 command, but substitute `docker` for `podman`.

* These examples use the image `pulp`  with the tag `stable` (AKA `latest`). To use an alternative image and tag like `pulp:3.21`, substitute `pulp/pulp` with `pulp/pulp:3.21`.

* To use https instead of http, add `-e PULP_HTTPS=true` Also change `--publish 8080:80` to `--publish 8080:443`

### Reset the Admin Password

Now, reset the admin user’s password.

```
$ podman exec -it pulp bash -c 'pulpcore-manager reset-admin-password'
Please enter new password for user "admin":
Please enter new password for user "admin" again:
Successfully set password for "admin" user.
```

* For Docker systems, substitute `docker` for `podman`.


### Test Access

At this point, both the REST API and the content app are available on your host’s port 8080. Try hitting the pulp status endpoint to confirm:

```
curl localhost:8080/pulp/api/v3/status/
```

### What to do after the Quickstart

To start working with Pulp, check out the [Workflows and Use Cases](https://github.com/pulp/pulpcore/issues/5593)
and explore individual Content Plugins documentation.

If you are unsure what to pick first, try Python's
[Setup Your Own Pypi](site:pulp_python/docs/user/guides/pypi/) or RPM's
[Sync and Publish](site:pulp_rpm/docs/user/tutorials/create_sync_publish/).

We recommend using [pulp-cli](https://github.com/pulp/pulp-cli) to interact with Pulp. If you have Python 3 installed on the host OS, you can run these commands to get started:

```
pip install pulp-cli[pygments]
pulp config create --username admin --base-url http://localhost:8080 --password <admin password>
```

## Advanced Usage Instructions

### Available Environment Variables

The following environment variables configure the container's behavior.

* `PULP_WORKERS` An integer that specifies the number of worker processes (which perform syncing, importing of content, and other asynchronous operations that require resource locking.) Defaults to 2.

* `PULP_API_WORKERS` A positive integer that specifies the number of [gunicorn worker processes](https://docs.gunicorn.org/en/stable/settings.html#workers) for handling Pulp API requests. Default to 2.

* `PULP_CONTENT_WORKERS` A positive integer that specifies the number of [gunicorn worker processes](https://docs.gunicorn.org/en/stable/settings.html#workers) for handling Pulp Content requests. Default to 2.

* `PULP_GUNICORN_RELOAD` Set to "true" (all lowercase) for the pulpcore-api gunicorn process to be started with ["--reload"](https://docs.gunicorn.org/en/latest/settings.html?highlight=reload#reload). Intended for developers.

* `PULP_GUNICORN_TIMEOUT` A positive integer that specifies the [timeout for gunicorn process](https://docs.gunicorn.org/en/stable/settings.html#timeout). Default to 90.

* `PULP_API_WORKERS_MAX_REQUESTS` The maximum number of requests a worker will process before restarting API workers. If this is set to zero (the default) then the automatic worker restarts are disabled. NOTE: Only supported for pulpcore >= 3.41.0

* `PULP_API_WORKERS_MAX_REQUESTS_JITTER` The maximum jitter to add to the max_requests setting for API workers. NOTE: Only supported for pulpcore >= 3.41.0

* `PULP_CONTENT_WORKERS_MAX_REQUESTS` The maximum number of requests a worker will process before restarting Content workers. If this is set to zero (the default) then the automatic worker restarts are disabled. NOTE: Only supported for pulpcore >= 3.41.0

* `PULP_CONTENT_WORKERS_MAX_REQUESTS_JITTER` The maximum jitter to add to the max_requests setting for Content workers. NOTE: Only supported for pulpcore >= 3.41.0

To add one of them, modify the command you use to start pulp to include syntax like the following at the beginning: Instead of `podman run`, specify `podman run -e PULP_WORKERS=4 -e PULP_GUNICORN_TIMEOUT=30 -e PULP_API_WORKERS_MAX_REQUESTS=1000 -e PULP_API_WORKERS_MAX_REQUESTS_JITTER=50 ...`

### Adding Signing Services

Administrators can add signing services to Pulp using the command line tools. Users may then associate the signing services with repositories that support content signing.
See [Signing Services](site:pulp-oci-images/docs/admin/guides/configure-signing-service/) documentation for more information.

### Certificates and Keys

Follow the instructions from [certificates](site:pulp-oci-images/docs/admin/guides/configure-certificates/) documentation for more information about how to configure custom certificates.

Check [database encryption](site:pulp-oci-images/docs/admin/guides/configure-database-encryption/) documentation for more information about the key to encrypt sensitive fields in the database.

### Command to specify

To run all the services, you do not need to specify a container command ("CMD"). The default CMD is:

- **/init** - The [s6 service manager](https://github.com/just-containers/s6-overlay) that runs all the services.

## Upgrading

To upgrade to a newer version of Pulp, such as the `latest` image which is published every night, start by running:

```
podman stop pulp
podman rm pulp
```

Then update the image in the local podman/docker cache:

```
podman pull pulp/pulp
```

Then repeat the original command in [Starting the Container](#starting-the-container) (with any customizations you added to it.)


## Known Issues

### NFS or SSHFS

When using rootless podman, you cannot create the directories (settings pulp_storage pgsql containers) on [NFS](https://github.com/containers/podman/blob/master/rootless.md#shortcomings-of-rootless-podman), SSHFS, or certain other non-standard filesystems.

### Podman on CentOS 7

When using on CentOS 7, container-selinux has a
limitation. [1](https://github.com/containers/podman/issues/9513)
[2](https://github.com/containers/podman/issues/6414)
SELinux denials will prevent Pulp from running. To
overcome it, you must do one of the following:

* Run the container with "--privileged"
* Run the container as root
* Disable SELinux

Additionally, you will likely run into a limit on the number of open files (ulimit) in the
container.
One way to overcome this is to add `DefaultLimitNOFILE=65536` to `/etc/systemd/system.conf`.

### Docker on CentOS 7

While using the version of Docker that is provided with CentOS 7, there are known issues that cause the following errors to occur:

* When starting the container:

  `FATAL:  could not create lock file "/var/run/postgresql/.s.PGSQL.5432.lock": No such file or directory`

* (If the preceding error is worked around,) when executing `docker exec -it pulp bash -c 'pulpcore-manager reset-admin-password'`:

  ```
  psycopg2.OperationalError: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
  ```

* Pulp tasks are stuck in `waiting` status, and executing `docker exec -it pulp bash -c 'rq info'` returns `0 workers`:

  ```
  1 queues, 2 jobs total

  0 workers, 1 queues
  ```

The version of Docker that is provided with CentOS 7 mounts `tmpfs` on `/run`. The Pulp Container recipe uses `/var/run`, which is a symlink to `/run`, and expects its contents to be available at container run time. You can work around this by specifying an additional `/run` volume, which suppresses this behavior of the Docker runtime. Docker will copy the image's contents to that volume and the container should start as expected.

The `/run` volume will need to contain a `postgresql` directory (with permissions that the container's postgresql can write to) and a separate `pulpcore-*` directory for the rq manager and its workers to start:

```console
$ mkdir -p settings pulp_storage pgsql containers run/postgresql run/pulpcore-{resource-manager,worker-{1,2}}
$ chmod a+w run/postgresql
```

### Upgrading from ``pulp/pulp-fedora31`` image

The ``pulp/pulp-fedora31`` container vendored PostgreSQL 11. The ``pulp/pulp`` image vendors PostgreSQL 13, and only automatically upgrades from PostgreSQL 12. To upgrade the database from 11 to 12, refer to [PostgreSQL documentation](https://www.postgresql.org/docs/12/upgrading.html).


## Build instructions

The Container file and all other assets used to build the container image are available on [GitHub](https://github.com/pulp/pulp-oci-images).

```bash
$ <docker build | buildah bud> --file images/Containerfile.core.base --tag pulp/base:latest .
$ <docker build | buildah bud> --file images/pulp_ci_centos/Containerfile --tag pulp/pulp-ci-centos9:latest .
$ <docker build | buildah bud> --file images/pulp/stable/Containerfile --tag pulp/pulp:latest .
$ <docker build | buildah bud> --file images/galaxy/stable/Containerfile --tag pulp/galaxy:latest
```

### Specifying versions

By default, containers get built using the latest version of each Pulp component. If you want to
specify a version of a particular component, you can do so with args:

```bash
$ <docker build | buildah bud> --build-arg PULPCORE_VERSION="==3.5.0" --file images/pulp/Containerfile
$ <docker build | buildah bud> --build-arg PULP_FILE_VERSION=">=1.0.0" --file images/pulp/Containerfile
```

## Debugging instructions

### Debugging the services

To debug the services and actually see their output, after stating the container run:
```bash
docker logs -f pulp
```
You will then see the output of the commands and echo statements from the service scripts on the
console.

Afterwards, to see what services started successfully:
```bash
s6-rc -a list
```
And what services failed to start:
```bash
s6-rc -da list
```
To attempt to manually start a failed service:
```bash
s6-rc change servicename
```
`````

## File: pulp-docs/pulp-oci-images/docs/admin/reference/available-images/single-process-images.md
`````markdown
# Single-Process Images

These images are currently used on [pulp operator](site:pulp-operator), but they can be used in docker-compose or podman-compose. You can find a compose example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose).

## pulp-minimal

A single [Pulp](https://github.com/pulp/pulpcore) image that can be run as each of the following services, specified as the container command ("CMD"):

- **pulp-api** - serves the Pulp(v3) API. The number of instances of this service should be scaled as demand requires.  _Administrators and users of all of the APIs put demand on this service_. If pulp_python or pulp_container are in use, _Content consumers also put demand on this service_.

- **pulp-content** - serves content to clients. pulpcore-api redirects clients to pulpcore-content to download content. When content is being mirrored from a remote source, this service can download that content and stream it to the client the first time the content is requested. The number of instances of this service should be scaled as demand requires. _Content consumers put demand on this service_.

- **pulp-worker** - performs syncing, importing of content, and other asynchronous operations that require resource locking. The number of instances of this service should be scaled as demand requires. _Administrators and content importers put demand on this service_.

For complete documentation on how to use this image,
see the compose example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose).
It is the reference on how this image can be used to create the 3 services/containers.

pulp-minimal is currently built with the following plugins:

- [pulp_ansible](site:pulp_ansible)
- [pulp-certguard](site:pulp_certguard)
- [pulp_container](site:pulp_container)
- [pulp_deb](site:pulp_deb)
- [pulp_file](site:pulp_file)
- [pulp_maven](site:pulp_maven)
- [pulp_python](site:pulp_python)
- [pulp_rpm](site:pulp_rpm)
- [pulp_ostree](site:pulp_ostree)

### Tags

- `stable`: Built nightly, with latest released version of each plugin. Also called `latest`.
- `nightly`: Built nightly, With master/main branches of each plugin. Also contains several
  additional plugins that are not GA yet.
- `3.y.z`:  Pulpcore 3.y.z version and its compatible plugins.

[https://quay.io/repository/pulp/pulp-minimal?tab=tags](https://quay.io/repository/pulp/pulp-minimal?tab=tags)

## pulp-web

An Nginx image based on [centos/nginx-116-centos7](https://hub.docker.com/r/centos/nginx-116-centos7),
with configuration specific to the plugins found in [pulp-minimal](#pulp-minimal).

No command ("CMD") needs to be specified, the images's built-in command is sufficient.

For complete documentation on how to use this image,
see the compose example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose).
It is the reference on how this image can be used.

### Tags

- `stable`: Built nightly, with latest released version of each plugin. Also called `latest`.
- `nightly`: Built nightly, With master/main branches of each plugin. Also built with several
  additional plugins that are not GA yet.
- `3.y.z`:  Pulpcore 3.y.z version and its compatible plugins.

[https://quay.io/repository/pulp/pulp-web?tab=tags](https://quay.io/repository/pulp/pulp-web?tab=tags)

## galaxy-minimal

An single [galaxy](https://github.com/ansible/galaxy_ng) image that can be run as each of the following services, specified as the container command ("CMD"):

- **pulp-api** - serves the Galaxy (v3) API. The number of instances of this service should be scaled as demand requires.  _Administrators and users of all of the APIs put demand on this service_. _Content consumers also put demand on this service_.

- **pulp-content** - serves content to clients. pulpcore-api redirects clients to pulpcore-content to download content. When content is being mirrored from a remote source, this service can download that content and stream it to the client the first time the content is requested. The number of instances of this service should be scaled as demand requires. _Content consumers put demand on this service_.

- **pulp-worker** - performs syncing, importing of content, and other asynchronous operations that require resource locking. The number of instances of this service should be scaled as demand requires. _Administrators and content importers put demand on this service_.

For complete documentation on how to use this image,
see the compose example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose).
It is the reference on how this image can be used to create the 3 services/containers.
(You will have to replace references to "pulp-minimal" and "pulp-web" with "galaxy-minimal"
and "galaxy-web" respectively.)

### Tags

- `4.y.z`:  Galaxy 4.y.z version.

[https://quay.io/repository/pulp/galaxy-minimal?tab=tags](https://quay.io/repository/pulp/galaxy-minimal?tab=tags)

## galaxy-web

An Nginx image based on [centos/nginx-116-centos7](https://hub.docker.com/r/centos/nginx-116-centos7),
with configuration specific to the plugins found in [galaxy-minimal](#galaxy-minimal).

For complete documentation on how to use this image,
see the compose example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose).
It is the reference on how this image can be used.
(You will have to replace references to "pulp-minimal" and "pulp-web" with "galaxy-minimal"
and "galaxy-web" respectively.)

### Tags

- `4.y.z`:  Galaxy 4.y.z version.

[https://quay.io/repository/pulp/galaxy-web?tab=tags](https://quay.io/repository/pulp/galaxy-web?tab=tags)


!!! note "Note on galaxy-minimal & galaxy-web images"

    We are no longer publishing any new versions of these images for galaxy-ng versions >=4.10. We
    will still publish updates for new Z releases on existing tags.
`````

## File: pulp-docs/pulp-oci-images/docs/admin/tutorials/quickstart.md
`````markdown
# Quickstart

Here are some common deployment scenarios, each with a guide on how to get started further below.

1. To deploy to [K8s](https://kubernetes.io/),
   [EKS](https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html), or
   [Openshift](https://www.redhat.com/en/technologies/cloud-computing/openshift) use the
   [Pulp Operator](site:pulp-operator/docs/admin/tutorials/quickstart-kubernetes/) which was specially built
   for this purpose.
2. Local [deployment via a single container](#single-container). This is for small deployments that
   don't need to scale beyond the hardware available to a single container.
3. Local [deployment with multiple containers using podman or docker compose](#podman-or-docker-compose).

In all cases, after deployment see
[what to do after the quickstart](#what-to-do-after-the-quickstart) to start using your installation.


## Single Container

This deployment is a 2-step process:

1. [Creating persistent directories and settings](#create-the-directories-and-settings).
2. [Starting the container](#starting-the-container)


### Create the Directories and Settings

1st, create the directories for storage/configuration, and create the `settings.py` file:

```
$ mkdir -p settings/certs pulp_storage pgsql containers
$ echo "CONTENT_ORIGIN='http://$(hostname):8080'" >> settings/settings.py
```

* For a complete list of available settings for `settings.py`, see
  [the Pulpcore Settings](site:pulpcore/docs/admin/reference/settings/).

* These 4 directories `settings`, `pulp_storage`, `pgsql`, `containers` must be preserved. `settings`
  has your settings, generated certificates, and generated database encrypted fields key. The
  `pulp_storage pgsql containers` are the application data.


### Starting the Container

For systems with SELinux enabled, use the following command to start Pulp:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume "$(pwd)/settings":/etc/pulp:Z \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp:Z \
             --volume "$(pwd)/pgsql":/var/lib/pgsql:Z \
             --volume "$(pwd)/containers":/var/lib/containers:Z \
             --device /dev/fuse \
             pulp/pulp
```

For systems with SELinux disabled, use the following command to start Pulp:

```
$ podman run --detach \
             --publish 8080:80 \
             --name pulp \
             --volume "$(pwd)/settings":/etc/pulp \
             --volume "$(pwd)/pulp_storage":/var/lib/pulp \
             --volume "$(pwd)/pgsql":/var/lib/pgsql \
             --volume "$(pwd)/containers":/var/lib/containers \
             --device /dev/fuse \
             pulp/pulp
```

* For Docker systems, use the last 2 command, but substitute `docker` for `podman`.

* These examples use the image `pulp`  with the tag `stable` (AKA `latest`). To use an alternative image and tag like `pulp:3.21`, substitute `pulp/pulp` with `pulp/pulp:3.21`.

* To use https instead of http, add `-e PULP_HTTPS=true` Also change `--publish 8080:80` to `--publish 8080:443`

* Refer to plugin settings documentation for more before spinning up the container. For instance, the Pulp Container plugin [requires key pair generation](https://pulpproject.org/pulp_container/docs/admin/learn/authentication/).

* When deploying, run `pulpcore-manager check --deploy` inside the container. Ensure that the [`SECRET_KEY` setting](https://pulpproject.org/pulpcore/docs/admin/reference/settings/#secret_key) is set to a unique, unpredictable value.


## Podman or Docker Compose

Everything under the assets directory will be mounted into the container.
Please modify the files as needed.

[podman-compose installation docs](https://github.com/containers/podman-compose#installation).

### Running with podman

```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
podman-compose up
```

### Running with docker and scaling

```shell
pip install docker-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
docker-compose up
docker-compose scale pulp_api=4 pulp_content=4
```

### Running with podman and using existing directories for data
```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
mkdir ../../pgsql ../../pulp_storage
podman unshare chown 700:700 ../../pulp_storage
podman-compose -f docker-compose.folders.yml up
```

### Running with docker and using existing directories for data
```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
mkdir ../../pgsql ../../pulp_storage
sudo chown 700:700 ../../pulp_storage
podman-compose -f docker-compose.folders.yml up
```



## What to do after the Quickstart

Typically after installation do these steps:

1. [Reset the admin password](#reset-the-admin-password).
2. [Test access](#test-access).
3. [Install the pulp-cli](#install-the-pulp-cli).
4. [Try out a workflow](#try-out-a-workflow)!


### Reset the Admin Password

Now, reset the admin user’s password.

```
$ podman exec -it pulp bash -c 'pulpcore-manager reset-admin-password'
Please enter new password for user "admin":
Please enter new password for user "admin" again:
Successfully set password for "admin" user.
```

> **Note**: For Docker systems, substitute `docker` for `podman`.


### Test Access

At this point, both the REST API and the content app are available on your host’s port 8080. Try hitting the pulp status endpoint to confirm:

```
curl localhost:8080/pulp/api/v3/status/
```


### Install the pulp-cli

We recommend using [pulp-cli](https://github.com/pulp/pulp-cli) to interact with Pulp. If you have Python 3 installed on the host OS, you can run these commands to get started:

```
pip install pulp-cli[pygments]
pulp config create --username admin --base-url http://localhost:8080 --password <admin password>
```


### Try out a workflow

To start working with Pulp, check out the [Workflows and Use Cases](https://github.com/pulp/pulpcore/issues/5593)
and explore individual Content Plugins documentation.

If you are unsure what to pick first, try Python's
[Setup Your Own Pypi](site:pulp_python/docs/user/guides/pypi/) or RPM's
[Sync and Publish](site:pulp_rpm/docs/user/tutorials/create_sync_publish/).
`````

## File: pulp-docs/pulp-oci-images/docs/dev/guides/release-image.md
`````markdown
# Release an Image

## Release instructions (multi-process images)

We maintain a container tag for every supported pulpcore y-release (e.g. 3.49, 3.63, see 
`supported_release_branches` in [template_config](https://github.com/pulp/pulpcore/blob/main/template_config.yml)).
We also publish a tag for the latest pulpcore Y release nightly. When there's a pulpcore z-release, 
the existing y-release branch is built and published again.

### Pulpcore Y release added to supported branches

* First create a new release branch in this pulp-oci-images repo for the new supported Y release
  (if it does not already exist.)
* Update PULPCORE_VERSION in the following files on the new supported Y release branch
  (see [here](https://github.com/pulp/pulp-oci-images/pull/628) as an example):
  * images/pulp/stable/Containerfile
  * images/pulp-minimal/stable/Containerfile.core
`````

## File: pulp-docs/pulp-oci-images/docs/index.md
`````markdown
# Welcome to Pulp OCI-images

The [pulp-oci-images](https://github.com/pulp/pulp-oci-images) repository is used to provide container images for running Pulp.
These images represent the preferred methods for installing Pulp.
They are also used by [Pulp Operator](site:pulp-operator).

You may want to check:

- [Quickstart Tutorial](site:pulp-oci-images/docs/admin/tutorials/quickstart/): get up and running real quick.
- [Available Images](site:pulp-oci-images/docs/admin/reference/available-images/), choose what best fits your needs.
- The *How-to Guides*: learn how to achieve some specific tasks.
- [OCI Website](https://opencontainers.org/): learn more about the Open Container Initiative.
`````

## File: pulp-docs/pulp-oci-images/images/compose/README.md
`````markdown
# Compose

Everything under the assets directory will be mounted into the container.
Please modify the files as needed.

[podman-compose installation docs](https://github.com/containers/podman-compose#installation).

## Running with podman

```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
podman-compose up
```

## Running with docker and scaling

```shell
pip install docker-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
docker-compose up
docker-compose scale pulp_api=4 pulp_content=4
```

## Running with podman and using existing directories for data
```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
mkdir -p ../../pgsql/data ../../pulp_storage
podman unshare chown 700:700 ../../pulp_storage
podman-compose -f compose.folders.yml up
```

## Running with docker and using existing directories for data
```shell
pip install podman-compose
git clone git@github.com:pulp/pulp-oci-images.git
cd images/compose
mkdir -p ../../pgsql/data ../../pulp_storage
sudo chown 700:700 ../../pulp_storage
podman-compose -f compose.folders.yml up
```
`````

## File: pulp-docs/pulp-oci-images/images/README.md
`````markdown
# Images

See #
[https://docs.pulpproject.org/pulp_oci_images/single-process-images/](https://docs.pulpproject.org/pulp_oci_images/single-process-images/)
and
[https://docs.pulpproject.org/pulp_oci_images/multi-process-images/](https://docs.pulpproject.org/pulp_oci_images/multi-process-images/)
for usage and build instructions.
`````

## File: pulp-docs/pulp-oci-images/README.md
`````markdown
# Pulp 3 Containers

The [pulp-oci-images](https://github.com/pulp/pulp-oci-images) repository is used to provide container images for running Pulp.
These images represent one of the officially supported Pulp installation methods.
The available images can be divided into two types:

- [Multi-Process Images](multi-process-images) - Images for running a [Pulp](https://github.com/pulp/pulpcore), as well as its [third-party services](#third-party-services),
in a single Docker/Podman container.
- [Single-Process Images](single-process-images) - Images containing a single Pulp service each, which collectively make up a Pulp instance. They can be used via docker-compose or podman-compose, example [here](https://github.com/pulp/pulp-oci-images/tree/latest/images/compose). These images are also used by [pulp operator](https://pulpproject.org/pulp-operator/).

Note that OCI stands for "Open Container Initiative", see [here](https://opencontainers.org/).

## Quickstart

See the [quickstart guide for deploying](https://pulpproject.org/pulp-oci-images/docs/admin/tutorials/quickstart/).


## Available Images

| Name | Description |
| ---- | ----------- |
| pulp | Multi-Process Pulp with several plugins |
| pulp-minimal | Single-Process Pulp with several plugins
| pulp-web | Webserver for pulp-minimal |

## First-Party Services

The first-party services are services written by the Pulp project itself.

They are pulp-api, pulp-content, and pulp-worker.

## Third-Party Services

The third-party services are services written by other open source projects, but
Pulp depends on them as the middle tier in 3-tier application architecture to
run.

The 2 backends are the PostgreSQL database server and the redis caching server.

The 1 frontend is the Nginx webserver, with special config to combine
both pulp-api and pulp-content into one service.

## Get Help

Documentation: [https://pulpproject.org/pulp-oci-images/](https://pulpproject.org/pulp-oci-images/)

Issue Tracker: [https://github.com/pulp/pulp-oci-images/issues](https://github.com/pulp/pulp-oci-images/issues)

Forum: [https://discourse.pulpproject.org/](https://discourse.pulpproject.org/)

Join [**#pulp** on Matrix](https://matrix.to/#/#pulp:matrix.org)

Join [**#pulp-dev** on Matrix](https://matrix.to/#/#pulp-dev:matrix.org) for Developer discussion.
`````

## File: pulp-docs/pulp-openapi-generator/docs/user/guides/generate-bindings.md
`````markdown
# Generate Bindings

Generate a client binding for any Pulp component for the language of your choice.

!!! warning "Language Support"

    Only python and ruby bindings have some testing, although not extensive.

    For python clients, we recommend looking at [pulp-glue] as an alternative.
    That library is handcrafted, handles tasks for you and knows how to deal with different versions of Pulp and plugins.

    If you need to tweak the generator to make it work for your language, have a look at [how it works].

## Overview

- Requirements:
    - git
    - Python 3
    - Docker/Podman
- General workflow:
    1. Clone `pulp-openapi-generator`.
    1. Get the openapi schema for the desired Pulp components.
    1. Run the generator cli from the the repository

## Setup

To get started, first clone the repo into your machine.
It'll be used as the workspace for the bindings generation.

```bash
git clone https://github.com/pulp/pulp-openapi-generator
cd pulp-openapi-generator
```

## Get the schema

There are two basic options to get an openapi schema: (1) from an installed package and (2) from a running installation.

Note that the `api.spec` must be generated with the `--bindings` flag/url-option.
That spec is tailored for bindings generation and isn't a fully compliant `api.spec`.

1. From a python environment with Pulp packages installed.

    ```bash
    pulpcore-manager openapi --bindings \
        --component "core" \
        --file "core-api.json"
    ```

    Some Pulp settings affect client generation directly (e.g, `API_ROOT` and `DOMAIN_ENABLED`).
    If you run this command outside of a Pulp operating enviroment,
    you may need to pass an additional `--settings settings.py` parameter pointing to the corresponding settings of your target installation.

1. From a running pulp instance:

    ```bash
    PULP_URL="http://pulp.example/pulp/api/v3/"
    COMPONENT="core"
    URL="${PULP_URL}docs/api.json?bindings&component=${COMPONENT}"
    curl "${URL}" -o "${COMPONENT}-api.json"
    ```

## Generate the client

The script uses the [openapi-generator-cli image] to generate the clients, so the first run may take some time to download it.

In the example, a ruby package for pulpcore will be generated at `./pulp_rpm-client/` using an existing schema `rpm-api.json`:

```bash
./gen-client.sh rpm-api.json rpm ruby
```

## Further reading

- For Docker-in-Docker (dind) environments, see the [PARENT_CONTAINER_ID] setting.
- For filesystem shared with another container, see the [PULP_MCS_LABEL] setting.
- If you are upgrading pulpcore to `>3.70`, check the [migration guide].

[how it works]: site:pulp-openapi-generator/docs/user/learn/how-it-works/
[migration guide]: site:pulp-openapi-generator/docs/user/guides/version-migrations/
[openapi-generator-cli image]: https://openapi-generator.tech/docs/installation/#docker
[parent_container_id]: site:pulp-openapi-generator/docs/user/reference/settings/#parent_container_id
[pulp-glue]: site:pulp-glue/docs/dev/
[pulp_mcs_label]: site:pulp-openapi-generator/docs/user/reference/settings/#pulp_mcs_label.
`````

## File: pulp-docs/pulp-openapi-generator/docs/user/guides/version-migrations.md
`````markdown
# Version Migrations

The [openapi-generator-cli image] version used depends on the pulpcore version.

This guide list known breaking changes and recommended compatibility actions for pulpcore upgrade paths.

## pulpcore `<3.70` to `>=3.70`

Upgrading pulpcore from a `<3.70` to a `>=3.70` version will bump the `openapi-generator-cli` version from `4.3.1` to `7.10.0`.

### Python

- `Response.to_dict()|.to_json()` returns a dictionary without read-only fields.
    - **Example**: `pulp_href` isn't present anymore.
    - **Actions**: Use `Response.model_dump()`. See [model_dump docs].
- Client-side validation is more strict.
    - **Example**: Error handling depending on server-errors might break.
    - **Actions**: Update code to use client-side errors.
- Clients now use named arguments instead of positional ones
    - **Action**: Use named arguments.
- Object such as Path or UUID are not accepted as input
    - **Action**: Cast to string. E.g `str(uuid)` and `str(path)`.

### Ruby

Unknown.

[model_dump docs]: https://docs.pydantic.dev/2.10/concepts/serialization/#modelmodel_dump
[openapi-generator-cli image]: https://hub.docker.com/r/openapitools/openapi-generator-cli
`````

## File: pulp-docs/pulp-openapi-generator/docs/user/learn/how-it-works.md
`````markdown
# How it works

Pulp OpenAPI Generator builds upon the [OpenAPI Generator CLI] to provide client bindings tailored for Pulp's API.
Here's what it does on top of it.

## Template Overrides

The generator uses Mustache templates that override the standard [OpenAPI Generator templates].
These templates are used for the language-specific code generation.
They are organized by language and version in the `templates/` directory.

For example, `templates/ruby/7.10.0/gemspec.mustache` will override the [original file with the same name] in the openapi-generator repository for that version.

To avoid getting too much into the generator internals, we try to use it only when absolutely required.

## Custom Parameters

The Pulp generator script reads Pulp specific fields from the `api.spec` (such as Domain enabled)
and passes specific parameters to [configure the OpenAPI Generator CLI].
E.g, set namings, define appropriate version information, set domains and configure flags that make the client more stable.

For this to work, the `api.spec` needs to be generated with the `--bindings` option/url-parameter as shown in the [generate-bindings guide],
which results in a not fully compliant api spec.

## Version Management

Pulp supports multiple branches of pulpcore, and it uses python bindings in all the CI functional tests.
To keep everything working and being able to upgrade the generator cli version, we have a pinning mechanism in place to couple pulpcore with the generator version.

This versioning system is documented in the [version-migrations guide].

[configure the openapi generator cli]: https://openapi-generator.tech/docs/configuration
[generate-bindings guide]: site:pulp-openapi-generator/docs/user/guides/generate-bindings/#2-get-the-schema
[openapi generator cli]: https://openapi-generator.tech/docs/installation#docker
[openapi generator templates]: https://openapi-generator.tech/docs/templating
[original file with the same name]: https://github.com/OpenAPITools/openapi-generator/blob/v7.10.0/modules/openapi-generator/src/main/resources/ruby-client/gemspec.mustache
[version-migrations guide]: site:pulp-openapi-generator/docs/user/guides/version-migrations/
`````

## File: pulp-docs/pulp-openapi-generator/docs/user/reference/settings.md
`````markdown
# Settings

## `PARENT_CONTAINER_ID`

**For Docker-in-Docker (dind) environments**.
Specify the parent container.

Bindings are generated using the openapi-generator-cli docker container.
If your environment itself runs in a docker container, the openapi-generator-cli container has to be started as a sibling container.
For sibling containers, volumes cannot be mounted as usual.
They have to be passed through from the parent container.

## `PULP_MCS_LABEL`

**For filesystem shared with another container**.
Set MCS (Multi-Category Security) labels to generator container (e.g. `s0:c1,c2`).

When the bindings are being generated so that they can be installed inside another container,
it may be necessary to set the MCS label on the openapi-generator-cli container to match the MCS label of the other container.
When this variable is present, the container for `openapi-generator-cli` will be started with this MCS label.
This only applies to systems that are using `podman` and SELinux is `Enforcing`.
`````

## File: pulp-docs/pulp-openapi-generator/docs/index.md
`````markdown
# Welcome to Pulp OpenAPI-Generator

This repository provides a script and a base setup to help generate different language bindings for pulpcore or any of it's plugins.

- [Get started quickly](site:pulp-openapi-generator/docs/user/guides/generate-bindings/).
- [Learn how it works](site:pulp-openapi-generator/docs/user/learn/how-it-works/)
`````

## File: pulp-docs/pulp-operator/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulp-operator/controllers/backup/README.md
`````markdown
### Custom Resources

* [PulpBackup](#pulpbackup)

### Sub Resources

* [PulpBackupList](#pulpbackuplist)
* [PulpBackupSpec](#pulpbackupspec)
* [PulpBackupStatus](#pulpbackupstatus)

#### PulpBackup

PulpBackup is the Schema for the pulpbackups API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpBackupSpec](#pulpbackupspec) | false |
| status |  | [PulpBackupStatus](#pulpbackupstatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpBackupList

PulpBackupList contains a list of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][PulpBackup](#pulpbackup) | true |

[Back to Custom Resources](#custom-resources)

#### PulpBackupSpec

PulpBackupSpec defines the desired state of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| deployment_name | Name of Pulp CR to be backed up | string | true |
| backup_pvc | Name of the PVC to be used for storing the backup | string | true |
| backup_pvc_namespace | Namespace PVC is in | string | true |
| backup_storage_requirements | Storage requirements for the backup | string | true |
| backup_storage_class | Storage class to use when creating PVC for backup | string | true |
| admin_password_secret | Secret where the administrator password can be found | string | false |
| postgres_configuration_secret | Secret where the database configuration can be found | string | true |
| pulp_secret_key | Secret where the Django SECRET_KEY configuration can be found | string | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |

[Back to Custom Resources](#custom-resources)

#### PulpBackupStatus

PulpBackupStatus defines the observed state of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| deploymentName | Name of the deployment backed up | string | true |
| backupClaim | The PVC name used for the backup | string | true |
| backupNamespace | The namespace used for the backup claim | string | true |
| backupDirectory | The directory data is backed up to on the PVC | string | true |
| adminPasswordSecret | Administrator password secret used by the deployed instance | string | true |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/controllers/repo_manager/README.md
`````markdown
### Custom Resources

* [Pulp](#pulp)

### Sub Resources

* [Api](#api)
* [Cache](#cache)
* [Content](#content)
* [Database](#database)
* [LDAP](#ldap)
* [PulpContainer](#pulpcontainer)
* [PulpJob](#pulpjob)
* [PulpList](#pulplist)
* [PulpSpec](#pulpspec)
* [PulpStatus](#pulpstatus)
* [Telemetry](#telemetry)
* [Web](#web)
* [Worker](#worker)

#### Api

Api defines desired state of pulpcore-api resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-api replicas. Default: 1 | int32 | true |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| gunicorn_timeout | The timeout for the gunicorn process. Default: 90 | int | false |
| gunicorn_workers | The number of gunicorn workers to use for the api. Default: 2 | int | false |
| resource_requirements | Resource requirements for the pulp api container. | corev1.ResourceRequirements | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-api container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the api deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Cache

Cache defines desired state of redis resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| external_cache_secret | Name of the secret with the parameters to connect to an external Redis cluster | string | false |
| enabled | Defines if cache should be enabled. Default: true | bool | false |
| redis_image | The image name for the redis image. Default: \"redis:latest\" | string | false |
| redis_storage_class | Storage class to use for the Redis PVC | string | false |
| redis_port | The port that will be exposed by Redis Service. [default: 6379] | int | false |
| redis_resource_requirements | Resource requirements for the Redis container | corev1.ResourceRequirements | false |
| pvc | PersistenVolumeClaim name that will be used by Redis pods If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| deployment_annotations | Annotations for the cache deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Content

Content defines desired state of pulpcore-content resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-content replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-content container | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| gunicorn_timeout | The timeout for the gunicorn process. Default: 90 | int | false |
| gunicorn_workers | The number of gunicorn workers to use for the api. Default: 2 | int | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-content container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the content deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Database

Database defines desired state of postgres

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| external_db_secret | Secret name with the configuration to use an external database | string | false |
| version | PostgreSQL version [default: \"13\"] | string | false |
| postgres_port | PostgreSQL port. Default: 5432 | int | false |
| postgres_ssl_mode | Configure PostgreSQL connection sslmode option. Default: \"prefer\" | string | false |
| postgres_image | PostgreSQL container image. Default: \"postgres:13\" | string | false |
| postgres_extra_args | Arguments to pass to postgres process | []string | false |
| postgres_data_path | Registry path to the PostgreSQL container to use. Default: \"/var/lib/postgresql/data/pgdata\" | string | false |
| postgres_initdb_args | Arguments to pass to PostgreSQL initdb command when creating a new cluster. Default: \"--auth-host=scram-sha-256\" | string | false |
| postgres_host_auth_method | PostgreSQL host authentication method. Default: \"scram-sha-256\" | string | false |
| postgres_resource_requirements | Resource requirements for the database container. | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the database pod. | map[string]string | false |
| tolerations | Node tolerations for the database pod. | []corev1.Toleration | false |
| postgres_storage_requirements | Temporarily modifying it as a string to avoid an issue with backup and json.Unmarshal when set as resource.Quantity and no value passed on pulp CR, during backup steps json.Unmarshal is settings it with \"0\" | string | false |
| postgres_storage_class | Name of the StorageClass required by the claim. | *string | false |
| pvc | PersistenVolumeClaim name that will be used by database pods If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |

[Back to Custom Resources](#custom-resources)

#### LDAP

LDAP defines the ldap resources used by pulpcore containers to integrate Pulp with LDAP authentication

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| config | The name of the Secret with ldap config. | string | false |
| ca | The name of the Secret with the CA chain to connect to ldap server. | string | false |

[Back to Custom Resources](#custom-resources)

#### Pulp

Pulp is the Schema for the pulps API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpSpec](#pulpspec) | false |
| status |  | [PulpStatus](#pulpstatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpContainer

PulpContainer defines configuration of the \"auxiliary\" containers that run in pulpcore pods

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| image | The image name for the container. By default, if not provided, it will use the same image from .Spec.Image. WARN: defining a different image than the one used by API pods can cause unexpected behaviors! | string | false |
| resource_requirements | Resource requirements for pulpcore aux container. | corev1.ResourceRequirements | false |
| env_vars | Environment variables to add to the container | []corev1.EnvVar | false |

[Back to Custom Resources](#custom-resources)

#### PulpJob

PulpJob defines the jobs used by pulpcore containers to run single-shot administrative tasks

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| container |  | [PulpContainer](#pulpcontainer) | false |

[Back to Custom Resources](#custom-resources)

#### PulpList

PulpList contains a list of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][Pulp](#pulp) | true |

[Back to Custom Resources](#custom-resources)

#### PulpSpec

PulpSpec defines the desired state of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| unmanaged | Define if the operator should stop managing Pulp resources. If set to true, the operator will not execute any task (it will be \"disabled\"). Default: false | bool | false |
| enable_debugging | By default Pulp logs at INFO level, but enabling DEBUG logging can be a helpful thing to get more insight when things don’t go as expected. Default: false | bool | false |
| file_storage_size | The size of the file storage; for example 100Gi. This field should be used only if file_storage_storage_class is provided | string | false |
| file_storage_access_mode | The file storage access mode. This field should be used only if file_storage_storage_class is provided | string | false |
| file_storage_storage_class | Storage class to use for the file persistentVolumeClaim | string | false |
| object_storage_azure_secret | The secret for Azure compliant object storage configuration. | string | false |
| object_storage_s3_secret | The secret for S3 compliant object storage configuration. | string | false |
| pvc | PersistenVolumeClaim name that will be used by Pulp pods. If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| db_fields_encryption_secret | Secret where the Fernet symmetric encryption key is stored. Default: <operators's name>-\"-db-fields-encryption\" | string | false |
| signing_secret | Name of the Secret where the gpg key is stored. | string | false |
| signing_scripts | Name of the Secret where the signing scripts are stored. | string | false |
| ingress_type | The ingress type to use to reach the deployed instance. Default: none (will not expose the service) | string | false |
| ingress_annotations | Annotations for the Ingress | map[string]string | false |
| ingress_class_name | IngressClassName is used to inform the operator which ingressclass should be used to provision the ingress. Default: \"\" (will use the default ingress class) | string | false |
| is_nginx_ingress | Define if the IngressClass provided has Nginx as Ingress Controller. If the Ingress Controller is not nginx the operator will automatically provision `pulp-web` pods to redirect the traffic. If it is a nginx controller the traffic will be forwarded to api and content pods. This variable is a workaround to avoid having to grant a ClusterRole (to do a get into the IngressClass and verify the controller). Default: false | bool | false |
| ingress_host | Ingress DNS host | string | false |
| ingress_tls_secret | Ingress TLS secret | string | false |
| route_host | Route DNS host. Default: <operator's name> + \".\" + ingress.Spec.Domain | string | false |
| route_labels | RouteLabels will append custom label(s) into routes (used by router shard routeSelector). Default: {\"pulp_cr\": \"<operator's name>\", \"owner\": \"pulp-dev\" } | map[string]string | false |
| route_annotations | RouteAnnotations will append custom annotation(s) into routes (used by router shard routeSelector). | map[string]string | false |
| route_tls_secret | Name of the secret with the certificates/keys used by route encryption | string | false |
| nodeport_port | Provide requested port value | int32 | false |
| haproxy_timeout | The timeout for HAProxy. Default: \"180s\" | string | false |
| nginx_client_max_body_size | The client max body size for Nginx Ingress. Default: \"10m\" | string | false |
| nginx_proxy_body_size | The proxy body size for Nginx Ingress. Default: \"0\" | string | false |
| nginx_proxy_read_timeout | The proxy read timeout for Nginx Ingress. Default: \"120s\" | string | false |
| nginx_proxy_connect_timeout | The proxy connect timeout for Nginx Ingress. Default: \"120s\" | string | false |
| nginx_proxy_send_timeout | The proxy send timeout for Nginx Ingress. Default: \"120s\" | string | false |
| container_token_secret | Secret where the container token certificates are stored. Default: <operator's name> + \"-container-auth\" | string | false |
| container_auth_public_key_name | Public Key name from `<operator's name> + \"-container-auth-certs\"` Secret. Default: \"container_auth_public_key.pem\" | string | false |
| container_auth_private_key_name | Private Key name from `<operator's name> + \"-container-auth-certs\"` Secret. Default: \"container_auth_private_key.pem\" | string | false |
| image | The image name (repo name) for the pulp image. Default: \"quay.io/pulp/pulp-minimal:stable\" | string | false |
| image_version | The image version for the pulp image. Default: \"stable\" | string | false |
| inhibit_version_constraint | Relax the check of image_version and image_web_version not matching. Default: \"false\" | bool | false |
| image_pull_policy | Image pull policy for container image. | string | false |
| api | Api defines desired state of pulpcore-api resources | [Api](#api) | true |
| database | Database defines desired state of postgres resources | [Database](#database) | false |
| content | Content defines desired state of pulpcore-content resources | [Content](#content) | false |
| worker | Worker defines desired state of pulpcore-worker resources | [Worker](#worker) | false |
| web | Web defines desired state of pulpcore-web (reverse-proxy) resources | [Web](#web) | false |
| cache | Cache defines desired state of redis resources | [Cache](#cache) | false |
| custom_pulp_settings | Name of the ConfigMap to define Pulp configurations not available through this CR. | string | false |
| image_web | The image name (repo name) for the pulp webserver image. Default: \"quay.io/pulp/pulp-web\" | string | false |
| image_web_version | The image version for the pulp webserver image. Default: \"stable\" | string | false |
| admin_password_secret | Secret where the administrator password can be found. Default: <operator's name> + \"-admin-password\" | string | false |
| image_pull_secrets | Image pull secrets for container images. Default: [] | []string | false |
| sa_annotations | ServiceAccount.metadata.annotations that will be used in Pulp pods. | map[string]string | false |
| sa_labels | ServiceAccount.metadata.labels that will be used in Pulp pods. | map[string]string | false |
| sso_secret | Secret where Single Sign-on configuration can be found | string | false |
| mount_trusted_ca | Define if the operator should or should not mount the custom CA certificates added to the cluster via cluster-wide proxy config. Default: false | bool | false |
| admin_password_job | Job to reset pulp admin password | [PulpJob](#pulpjob) | false |
| migration_job | Job to run django migrations | [PulpJob](#pulpjob) | false |
| signing_job | Job to store signing metadata scripts | [PulpJob](#pulpjob) | false |
| disable_migrations | Disable database migrations. Useful for situations in which we don't want to automatically run the database migrations, for example, during restore. | bool | false |
| pulp_secret_key | Name of the Secret to provide Django cryptographic signing. Default: \"pulp-secret-key\" | string | false |
| allowed_content_checksums | List of allowed checksum algorithms used to verify repository's integrity. Valid options: [\"md5\",\"sha1\",\"sha224\",\"sha256\",\"sha384\",\"sha512\"]. | []string | false |
| loadbalancer_protocol | Protocol used by pulp-web service when ingress_type==loadbalancer | string | false |
| loadbalancer_port | Port exposed by pulp-web service when ingress_type==loadbalancer | int32 | false |
| telemetry | Telemetry defines the OpenTelemetry configuration | [Telemetry](#telemetry) | false |
| ldap | LDAP defines the ldap resources used by pulpcore containers to integrate Pulp with LDAP authentication | [LDAP](#ldap) | false |
| ipv6_disabled | Disable ipv6 for pulpcore and pulp-web pods | *bool | false |

[Back to Custom Resources](#custom-resources)

#### PulpStatus

PulpStatus defines the observed state of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| object_storage_azure_secret | The secret for Azure compliant object storage configuration. | string | false |
| object_storage_s3_secret | The secret for S3 compliant object storage configuration. | string | false |
| db_fields_encryption_secret | Secret where the Fernet symmetric encryption key is stored. | string | false |
| image | Name of pulp image deployed. | string | false |
| ingress_type | The ingress type to use to reach the deployed instance | string | false |
| ingress_class_name | IngressClassName is used to inform the operator which ingressclass should be used to provision the ingress. | string | false |
| container_token_secret | Secret where the container token certificates are stored. | string | false |
| admin_password_secret | Secret where the administrator password can be found | string | false |
| external_cache_secret | Name of the secret with the parameters to connect to an external Redis cluster | string | false |
| telemetry_enabled | Pulp metrics collection enabled | bool | false |
| pulp_secret_key | Name of the Secret to provide Django cryptographic signing. | string | false |
| allowed_content_checksums | List of allowed checksum algorithms used to verify repository's integrity. | string | false |
| last_deployment_update | Controller status to keep tracking of deployment updates | string | false |
| managed_cache_enabled | Cache deployed by pulp-operator enabled | bool | false |
| storage_type | Type of storage in use by pulpcore pods | string | false |

[Back to Custom Resources](#custom-resources)

#### Telemetry

Telemetry defines the configuration for OpenTelemetry used by Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| enabled | Enable Pulp Telemetry Default: false | bool | false |
| exporter_otlp_protocol | Defines the protocol used by the instrumentator to comunicate with the collector Default: http/protobuf | string | false |
| otel_collector_image | Defines the image to be used as collector | string | false |
| otel_collector_image_version | The image version for opentelemetry-collector image. Default: \"latest\" | string | false |
| resource_requirements | Resource requirements for the sidecar container. | corev1.ResourceRequirements | false |

[Back to Custom Resources](#custom-resources)

#### Web

Web defines desired state of pulpcore-web (reverse-proxy) resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-web replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-web container | corev1.ResourceRequirements | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| node_selector | NodeSelector for the Web pods. | map[string]string | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| service_annotations | Annotations for the service | map[string]string | false |
| tls_termination_mechanism | The secure TLS termination mechanism to use Default: \"edge\" | string | false |
| env_vars | Environment variables to add to pulpcore-web container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the web deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Worker

Worker defines desired state of pulpcore-worker resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-worker replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-api container | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-worker container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the worker deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/controllers/restore/README.md
`````markdown
### Custom Resources

* [PulpRestore](#pulprestore)

### Sub Resources

* [PulpRestoreList](#pulprestorelist)
* [PulpRestoreSpec](#pulprestorespec)
* [PulpRestoreStatus](#pulprestorestatus)

#### PulpRestore

PulpRestore is the Schema for the pulprestores API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpRestoreSpec](#pulprestorespec) | false |
| status |  | [PulpRestoreStatus](#pulprestorestatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreList

PulpRestoreList contains a list of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][PulpRestore](#pulprestore) | true |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreSpec

PulpRestoreSpec defines the desired state of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| deployment_name | Name of Pulp CR to be restored | string | true |
| backup_name | Name of PulpBackup CR | string | true |
| backup_pvc | Name of the PVC to be restored from, set as a status found on the backup object (backupClaim) | string | true |
| backup_dir | Backup directory name, set as a status found on the backup object (backupDirectory) | string | true |
| keep_replicas | KeepBackupReplicasCount allows to define if the restore controller should restore the components with the same number of replicas from backup or restore only a single replica each. | bool | true |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreStatus

PulpRestoreStatus defines the observed state of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| postgres_secret |  | string | true |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/backup_and_restore/00-overview.md
`````markdown
# Overview of Backup/Restore Operations


In addition to provisioning Pulp components, the Operator can also be used to backup and restore them.

!!! note
    Before starting a backup, make sure that the namespace has enough storage quota available.

## Backup
The backup procedure creates a *manager* `Pod` which will be used to execute all the backup tasks:

* run a `pg_dump` (database dump) on Pulp's database
* do a copy of the Pulp CR instance defined in `deployment_name`
* do a copy of the `Secrets`
* do a copy of `/var/lib/pulp` directory
* delete the *manager* `Pod` to not consume resources

These data will be stored in a new PVC defined in PulpBackup CR (`backup_pvc` or `backup_storage_class`).


!!! note
    The current version of the Operator does **not** execute backups of **external** PostgreSQL instances yet.


!!! notes
    Considering that files stored in Object Storage (like `AWS S3` and/or `Azure Blob`) are not kept in `/var/lib/pulp` directory, they will **not** be copied. If you still need to do a backup of the artifacts stored in Object Storage, please, contact your cloud provider to check the procedure to do so.


## Restore
The restore procedure also creates a *manager* `Pod` to execute all the tasks:

* restore the `Secrets`
* restore Pulp CR instance
* restore Pulp database
* restore `/var/lib/pulp` directory
* delete the *manager* `Pod` to not consume resources

All data restored comes from the PVC defined in PulpRestore CR (`backup_pvc`).
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/backup_and_restore/01-config_and_run.md
`````markdown
# Configure and Run Backup/Restore


All the configurations needed to run the backup or restore procedures are made through `PulpBackup` or `PulpRestore` CRs.

To get the list of fields available in each CR, check [`PulpBackupSpec`](/pulp_operator/backup/#pulpbackupspec) and [`PulpRestoreSpec`](/pulp_operator/restore/#pulprestorespec).

## Backup

To configure the backup controller, create a manifest file with the definition of [PulpBackup CR](/pulp_operator/backup/#pulpbackupspec).  
For example:
```
---
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: PulpBackup
metadata:
  name: pulpbackup-sample
spec:
  deployment_name: pulp
  deployment_type: pulp
  backup_storage_class: standard
  admin_password_secret: example-pulp-admin-password
  postgres_configuration_secret: pulp-postgres-configuration
```

In the above sample we defined:

* the name of `Pulp` instance (`deployment_name`), which can be gathered with:
```
$ kubectl get pulp
NAME   AGE
pulp   3m30s
```

* the type of deployment (`deployment_type`), in this case `pulp` (but could also be `galaxy` depending on the installation).
* the name of `StorageClass` used to provision the `PVC` to store the backup data (`backup_storage_class`).
* the name of the `Secret` with Pulp admin password (`admin_password_secret`), which can be get by:
```
$ kubectl get pulp pulp -ojsonpath='{.spec.admin_password_secret}{"\n"}'
pulp-admin-password
```

* the name of the `Secret` with PostgreSQL credentials and connection information (`postgres_configuration_secret`).

After finishing to configure the file, apply the configuration and the Operator will start the backup:
```
kubectl apply -f <backup_cr_file>.yaml
```


## Restore


To configure the restore controller, create a manifest file with the definition of [PulpRestore CR](/pulp_operator/restore/#pulprestorespec).
For example:
```
---
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: PulpRestore
metadata:
  name: pulprestore-sample
spec:
  backup_name: pulpbackup-sample
  deployment_name: pulp
```

In the above sample we defined:

* the name of `PulpBackup` instance (`backup_name`)
* the name of `Pulp` instance (`deployment_name`). This should be the same defined in the `PulpBackup` CR.

After finishing to configure the file, apply the configuration and the Operator will start the restore:
```
kubectl apply -f <restore_cr_file>.yaml
```

By default, the restore procedure will reprovision the environment with a single replica of each component. This is to make it easier to review the restore status and the environment health.  
It is also possible to restore with the same number of replicas running when the backup was made. To do so, just set the `keep_replicas` field to true, for example:
```
---
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: PulpRestore
metadata:
  name: pulprestore-sample
spec:
  backup_name: pulpbackup-sample
  deployment_name: pulp
  keep_replicas: true
```


After finishing to restore the environment, the operator will create a `ConfigMap` called *`restore-lock`*. It is used to prevent a new controller reconciliation loop to run and override any data changed/created with the "old" data from backup.  
To allow the restore controller to run again, delete the *restore-lock* `ConfigMap`.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/backup_and_restore/02-cronjob.md
`````markdown
# Schedule Backups

The current version of Pulp Operator does not provide a way to automate the periodic execution of the backups. The following steps can be used as **an example** of how to create a [k8s Cronjob](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/) to schedule the backup execution.

* create a configmap with the `PulpBackup CR` definition (check the [backup section](/pulp_operator/backup_and_restore/config_running/#backup) for more information on `PulpBackup CR` fields configuration):
```yaml
$ kubectl apply -f- <<EOF
apiVersion: v1
data:
  pulp_backup.yaml: |
    apiVersion: repo-manager.pulpproject.org/v1beta2
    kind: PulpBackup
    metadata:
      name: pulpbackup
    spec:
      deployment_name: pulp
      backup_storage_class: standard
kind: ConfigMap
metadata:
  name: pulpbackup-cr
EOF
```

* for this example, we will create a new `ServiceAccount` that will be used by `Cronjob` pods. It is not a required step, you can skip it if your environment already has a `ServiceAccount` with the permissions to modify `PulpBackup` resources:
```yaml
$ kubectl apply -f-<<EOF
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: pulpbackup
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: pulpbackup
rules:
- apiGroups: ["repo-manager.pulpproject.org"]
  resources: ["pulpbackups"]
  verbs: ["get", "watch", "list","create","patch","update","delete"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: pulpbackup
subjects:
- kind: ServiceAccount
  name: pulpbackup
roleRef:
  kind: Role
  name: pulpbackup
  apiGroup: rbac.authorization.k8s.io
EOF
```

* create the `k8s Cronjob` to run the backups:
```yaml
$ kubectl apply -f-<<EOF
apiVersion: batch/v1
kind: CronJob
metadata:
  name: pulpbackup
spec:
  schedule: "00 2 * * *"
  successfulJobsHistoryLimit: 1
  failedJobsHistoryLimit: 1
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: bkp
            image: bitnami/kubectl:latest
            imagePullPolicy: IfNotPresent
            volumeMounts:
            - name: pulpbackup-cr
              mountPath: /tmp/pulp_backup.yaml
              subPath: pulp_backup.yaml
            command:
            - /bin/sh
            - -c
            args:
            - "kubectl apply -f /tmp/pulp_backup.yaml && kubectl wait --for condition=BackupComplete --timeout=600s -f /tmp/pulp_backup.yaml ; kubectl delete -f /tmp/pulp_backup.yaml"
          restartPolicy: Never
          serviceAccountName: pulpbackup
          volumes:
          - name: pulpbackup-cr
            configMap:
              name: pulpbackup-cr
EOF
```

In this example, the job:

* will be triggered every day at *2:00 AM* (`schedule: 00 2 * * *`)
* will keep `1` successful and/or `1` failed job (`successfulJobsHistoryLimit: 1, failedJobsHistoryLimit: 1`)
* will be considered failed if the backup does not finish in `10minutes` (`--timeout=600s`)
* will run with the previously created *pulpbackup* `ServiceAccount` (`serviceAccountName: pulpbackup`)


!!! note
    Don't forget to rotate the backup files from time to time to avoid filling up the storage.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/networking/exposing.md
`````markdown
# Expose Pulp to outside of Kubernetes cluster


To configure how Pulp will be externally accessible it is possible to define the `ingress_type` with
the following options:

* `nodeport`: expose Pulp resources through a k8s `NodePort` `Service`
* `ingress`: expose Pulp resources using k8s `Ingress`
* `route`: expose Pulp resources by creating OCP `Routes` (available only in OpenShift clusters)
* `loadbalancer`: expose Pulp resources through a k8s `LoadBalancer` `Service`

Only a single definition of `ingress_type` is allowed, which means, if Pulp CR is
configured with `ingress_type: nodeport` it is not possible to also define Pulp operator
to deploy `route` or `loadbalancer` resources for example.

If the configuration deployed by Pulp operator does not meet the required architecture
it is possible to manually provision the desired resources following the samples
provided in this documentation. For example, if it is required to deploy `route`
resources to allow external access to Pulp, but also `pulp-web` to serve as a reverse proxy
for internal applications communication, the operator can be configured with
`ingress_type: route` and the `pulp-web` resources should be manually provisioned.


# NodePort

The `nodeport` type will create `pulp-web` load balancers that will redirect the
traffic of `pulpcore-api` and `pulpcore-content` pods. `pulp-web` `Service` will be
exposed on one port of every node.

It is possible to define the port that will be exposed, but if no one is defined
a random port from k8s `service-node-port-range` definition will be used.

Example of `nodeport` configuration:
```
spec:
  ingress_type: nodeport
  nodeport_port: 30001
```

For more information on what is a k8s `Service` type `LoadBalancer` check the [Kubernetes project documentation](https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport).


# Ingress

Defining `ingress_type: ingress` will create `Ingress` resources to Pulp endpoints.
Since the k8s [`Ingressess`](https://kubernetes.io/docs/concepts/services-networking/ingress/) will redirect the traffic to pulpcore components, there
will be no need to provision `pulp-web` objects.

More information on configuring Pulp operator with `Ingress` can be found in [Reverse Proxy section](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/reverse_proxy/) .


# Route


!!! note
    `Routes` are resources available only in OpenShift clusters.

Defining `ingress_type: route` will create `Route` resources to Pulp endpoints.
Since OCP [`Routes`](https://docs.openshift.com/container-platform/4.13/networking/routes/route-configuration.html) will redirect the traffic to pulpcore components, there
will be no need to provision `pulp-web` objects.

More information on configuring Pulp operator with `Routes` can be found in [Routes section](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/routes/).


# LoadBalancer

The `loadbalancer` type will create `pulp-web` load balancers that will redirect the
traffic of `pulpcore-api` and `pulpcore-content` pods. `pulp-web` will be exposed
by an external loadbalancer (if the cloud provider supports it).

Example of `loadbalancer` configuration:
```
spec:
  ingress_type: loadbalancer
```

For more information on what is a k8s `Service` type `LoadBalancer` check the [Kubernetes project documentation](https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer).
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/networking/reverse_proxy.md
`````markdown
# Reverse Proxy

[Pulp’s architecture](https://pulpproject.org/pulpcore/docs/admin/learn/architecture/) makes use of a reverse proxy that sits in front of the REST API and the content serving application:
![Architecture](https://pulpproject.org/pulpcore/docs/assets/images/architecture.png "Pulp’s architecture")

A pulp plugin may have [webserver snippets](https://pulpproject.org/pulpcore/docs/dev/learn/plugin-concepts/#configuring-reverse-proxy-with-custom-urls) to route custom URLs.

The operator convert these snippets into paths on [routes](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/routes/) and NGINX Ingress Controllers.

For now, because of a limitation (they do not support `rewrite rules` in their load balancer) in [`AWS`](https://github.com/kubernetes-sigs/aws-load-balancer-controller/issues/835) and [`GCE`](https://github.com/kubernetes/ingress-gce/issues/109) ingress controllers ([controllers supported and maintained by Kubernetes project](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/)), Pulp operator will keep deploying `pulp-web` and `Ingresses` for "*non-nginx*" controllers.

<br/>

# Manually Configuring Ingress Resources

There are cases in which the `Ingress` resource provided by Pulp Operator does not meet the usage requirements or it is required to have custom configurations not available through Pulp CR.

For such situations, it is possible to configure it manually.

The following `yaml` file is a template with all the *snippets* used by Pulp: [ingress.yaml](ingress.yaml).  
It can be used as an example to configure the `Ingress` *backend rules*.

After modifying the file with the expected configurations, create the `Ingress` resource:
```
$ kubectl apply -f ingress.yaml
```

and update Pulp CR with the `hostname` used in `Ingress`:

* create/update the `ConfigMap` (used by [`custom_pulp_settings`](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#custom-settings)):
```yaml
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: settings
data:
  token_server: '"http://<ingress_host>/token/"'
  content_origin: '"http://<ingress_host>"'
  ansible_api_hostname: '"http://<ingress_host>"'
  pypi_api_hostname: '"http://<ingress_host>"'
```

* update `Pulp CR` with the CM:
```yaml
spec:
  custom_pulp_settings: settings
```

!!! note
    Resources manually created will **not** be managed by the operator, which means,
    the operator will not reconcile or verify if this resource has the necessary configurations for
    Pulp's proper execution.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/networking/routes.md
`````markdown
# Routes

OpenShift clusters use [`Routers`](https://docs.openshift.com/container-platform/4.10/networking/ingress-operator.html#nw-ne-openshift-ingress_configuring-ingress) as the `Ingress Controller`.

Here are the fields used by Pulp operator to configure `Routes` in OpenShift clusters:

* `ingress_type` must be defined as `route`, so that the operator knows that it needs to provision the `route paths`
* `route_host` [**optional**] this will be the hostname where Pulp can be accessed. If not defined, Pulp operator will define one based on default ingress domain name.
* `route_labels` [**optional**] a map of the labels that can be used by `routeSelector`. If not defined Pulp operator will create `Routes` that will use the default `Routers`.

For more information about `routeSelector` and `route sharding`, please consult the [official OpenShift documentation](https://docs.openshift.com/container-platform/4.10/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-ingress-controller.html#nw-ingress-sharding-route-labels_configuring-ingress-cluster-traffic-ingress-controller).


## Configure custom certificate

By default, Pulp Operator will provision `Routes` with [edge TLS termination](https://docs.openshift.com/container-platform/latest/networking/routes/secured-routes.html#nw-ingress-creating-an-edge-route-with-a-custom-certificate_secured-routes) (TLS encryption terminates on `Route`).

It is possible to configure the operator to deploy the `Routes` using a custom certificate.  
To do that, first create a `Secret` with the TLS certificate and key:
```
$ oc create secret generic <my-new-secret> --from-file=certificate=<cert file> --from-file=key=<key file>
```

For example:
```
$ oc create secret generic route-certs --from-file=certificate=/tmp/tls.crt --from-file=key=/tmp/tls.key
```

You may also specify a CA certificate if needed to complete the certificate chain:
```
$ oc create secret generic route-certs --from-file=certificate=/tmp/tls.crt --from-file=key=/tmp/tls.key --from-file=caCertificate=/tmp/ca.crt
```

!!! Warning
    Make sure to not modify the names of `Secrets`' keys: "***certificate***","***key***","***caCertificate***".  
    Using different key names will fail `Route` TLS config.

Now, configure Pulp CR with the `Secret` created:
```
...
spec:
  route_tls_secret: <my-new-secret>
...
```

A new reconciliation loop will be triggered and the certificate will be configured in all `Routes`.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/cache.md
`````markdown
# Configure Pulp Cache

Pulp can cache the metadata instead of doing "slower" requests into the database (PostgreSQL).
To do so, it uses [Redis as the cache backend](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#cache) technology.

Pulp operator provides a single node Redis server for Pulp to use, but it is also possible to configure the operator to use an external Redis installation.

## Configure Pulp operator to deploy a Redis instance

[Pulp CR page](https://pulpproject.org/pulp-operator/docs/admin/reference/custom_resources/repo_manager/#cache) has all the parameters that can be set to inform Pulp operator how it should deploy the Redis container.

If no `cache` parameter is defined, Pulp operator will deploy Redis with the following configuration:

* a `Deployment` will be provisioned to handle Redis pod
* a single Redis replica will be available (it is **not** possible to form a cluster with this container)
* it will deploy a `docker.io/library/redis:latest` image

A `Service` will be created with the Redis pod as endpoint.

Here is an example of how to configure Pulp operator to deploy the Redis cache:
```
...
spec:
  cache:
    enabled: true
...
```

## Configure Pulp operator to use an external Redis installation

It is also possible to configure Pulp operator to point to a running Redis cluster.
To do so, create a new `Secret` with the parameters to connect to the running Redis cluster:
```
$ kubectl -npulp create secret generic external-redis \
        --from-literal=REDIS_HOST=my-redis-host.example.com  \
        --from-literal=REDIS_PORT=6379  \
        --from-literal=REDIS_PASSWORD=""  \
        --from-literal=REDIS_DB=""
```

Make sure to define all the keys (`REDIS_HOST`, `REDIS_PORT`, `REDIS_PASSWORD`, `REDIS_DB`) even if Redis cluster has
no authentication, like in the above example.

Now, configure Pulp operator CR to use the Secret:
```
...
spec:
  cache:
    enabled: true
    external_cache_secret: external-redis
...
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/content_checksums.md
`````markdown
# Configure Pulp Allowed Content Checksums

During repositories synchronization, Pulp checks the downloaded files against a list
of checksums algorithms. Together with a valid (and trusted) release file signature this will guarantee the integrity of the synchronized repository.

The list of checksums algorithms is defined using the `ALLOWED_CONTENT_CHECKSUMS` setting.  
For more information on how `Pulp` uses the checksums check: [https://pulpproject.org/pulp_deb/docs/user/guides/checksums/#configuring-checksums](https://pulpproject.org/pulp_deb/docs/user/guides/checksums/#configuring-checksums)


To set the `ALLOWED_CONTENT_CHECKSUMS` in Pulp Operator, update Pulp CR with:
```yaml
spec:
  allowed_content_checksums:
  - sha256
```

!!! note
    `sha256` is a mandatory checksum.
    The possible checksums are: `md5`, `sha1`,`sha256`,`sha512`.

After modifying the `allowed_content_checksums` field in Pulp CR, the operator will create a kubernetes job to run the `pulpcore-manager handle-artifact-checksums` command to ensure database consistency.

!!! note
    Missing checksums will need to be recalculated for all your artifacts which can take some time.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/custom_env_vars.md
`````markdown
# Configure Custom Environment Variables
Pulp Operator provide the `env_vars` field to define custom environment variables for containers. <br/>

!!! INFO
    The following environment variables are managed by Pulp Operator and will be
    overwritten in case defined as custom env var:

    * **PULP_GUNICORN_TIMEOUT**
    * **PULP_API_WORKERS**
    * **PULP_CONTENT_WORKERS**
    * **REDIS_SERVICE_HOST**
    * **REDIS_SERVICE_PORT**
    * **REDIS_SERVICE_DB**
    * **REDIS_SERVICE_PASSWORD**
    * **PULP_SIGNING_KEY_FINGERPRINT**
    * **POSTGRES_SERVICE_HOST**
    * **POSTGRES_SERVICE_PORT**

For more information about Kubernetes environment variables, check the k8s official documentation:

* [Define Dependent Environment Variables](https://kubernetes.io/docs/tasks/inject-data-application/define-interdependent-environment-variables/)
* [Define Environment Variables for a Container](https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/)
* [Define container environment variables using Secret data ](https://kubernetes.io/docs/tasks/inject-data-application/distribute-credentials-secure/#define-container-environment-variables-using-secret-data)


## API Deployments


Example of CR configuration for `pulpcore-api` containers:
```yaml
spec:
  api:
    env_vars:
    - name: "<env var name>"
      value: "<env var value>"
    - name: "<env var name>"
      valueFrom:
        secretKeyRef:
          key: <secret key>
          name: <secret name>
```

## Worker Deployments

Example of CR configuration for `pulpcore-worker` containers:
```yaml
spec:
  worker:
    env_vars:
    - name: "<env var name>"
      value: "<env var value>"
    - name: "<env var name>"
      valueFrom:
        secretKeyRef:
          key: <secret key>
          name: <secret name>
```

## Content Deployments

Example of CR configuration for `pulpcore-content` containers:
```yaml
spec:
  content:
    env_vars:
    - name: "<env var name>"
      value: "<env var value>"
    - name: "<env var name>"
      valueFrom:
        secretKeyRef:
          key: <secret key>
          name: <secret name>
```

## Web Deployments

Example of CR configuration for `pulpcore-web` containers:
```yaml
spec:
  web:
    env_vars:
    - name: "<env var name>"
      value: "<env var value>"
    - name: "<env var name>"
      valueFrom:
        secretKeyRef:
          key: <secret key>
          name: <secret name>
```

## Jobs

It is also possible to define custom env vars for the containers from `AdminPasswordJob`,
`MigrationJob`, and `SigningJob`. For example:
```yaml
spec:
  admin_password_job:
    container:
      env_vars:
      - name: "<env var name>"
        value: "<env var value>"
  migration_job:
    container:
      env_vars:
      - name: "<env var name>"
        value: "<env var value>"
  signing_job:
    container:
      env_vars:
      - name: "<env var name>"
        value: "<env var value>"
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/customCA.md
`````markdown
# Certificate injection in Pulp containers

In OpenShift environments, it is possible to [mount additional trust bundles](https://docs.openshift.com/container-platform/4.10/networking/configuring-a-custom-pki.html#certificate-injection-using-operators_configuring-a-custom-pki) into Pulp containers.

Pulp operator handles part of the process.

When `trusted_ca: true` Pulp operator will automatically create and mount a `ConfigMap` with the custom CA into Pulp pods, but before doing so users need to first follow the steps from [Enabling the cluster-wide proxy](https://docs.openshift.com/container-platform/4.10/networking/configuring-a-custom-pki.html#nw-proxy-configure-object_configuring-a-custom-pki) to "register" the custom CA certificate into the cluster.


!!! info

    It is recommended to execute the previous steps in a maintenance window because, since this is cluster-wide modification, the cluster can get unavailable if executed wrong (some cluster operators pods will be restarted).
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/database.md
`````markdown
# Configure Pulp Database

Pulp operator provides a PostgreSQL database for Pulp to use, but it is also possible to configure the operator to use an external PostgreSQL installation. At this time, [Pulp 3.0 will only work with PostgreSQL](https://pulpproject.org/pulpcore/docs/admin/reference/settings/#databases).


## Configure Pulp operator to deploy a PostgreSQL instance

[Pulp CR page](https://pulpproject.org/pulp-operator/docs/admin/reference/custom_resources/repo_manager/#database) has all the parameters that can be set to inform Pulp operator how it should deploy the PostgreSQL container.

To configure Pulp operator to deploy PostgreSQL, **it is required to define the [storage configurations for the database pod](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#pulp-operator-storage-configuration)**.
Pulp operator will deploy PostgreSQL with the following configuration:

* a `StatefulSet` will be provisioned to handle PostgreSQL pod
* a single PostgreSQL replica will be available (it is **not** possible to form a cluster with this container)
* it will deploy a `docker.io/library/postgres:13` image


A new `Secret` (<deployment-name>-postgres-configuration) will also be created with some information like:

  * the database name
  * the admin user
  * the admin password
  * the address to communicate with the database (this is a `k8s svc` address)
  * the service port

A `Service` will be created with the PostgreSQL pod as endpoint.

Here is an example of how to configure Pulp operator to deploy the database using a `Storage Class` called `standard`:
```
...
spec:
  database:
    postgres_storage_class: standard
...
```


## Configure Pulp operator to use an external PostgreSQL installation

It is also possible to configure Pulp operator to point to a running PostgreSQL cluster.
To do so, create a new `Secret` with the parameters to connect to the running PostgreSQL cluster:
```
$ kubectl -npulp create secret generic external-database \
        --from-literal=POSTGRES_HOST=my-postgres-host.example.com  \
        --from-literal=POSTGRES_PORT=5432  \
        --from-literal=POSTGRES_USERNAME=pulp-admin  \
        --from-literal=POSTGRES_PASSWORD=password  \
        --from-literal=POSTGRES_DB_NAME=pulp \
        --from-literal=POSTGRES_SSLMODE=prefer
```

Make sure to define **all** of the above keys with your cluster configuration.

Now, configure Pulp operator CR to use the Secret:
```
...
spec:
  database:
    external_db_secret: external-database
...
```


!!! warning
    The current version of Pulp backup operator does not support the backup of external databases.
    Only the backup of databases deployed by the operator was tested.

## Encrypt sensitive fields

Pulp uses a url-safe base64-encoded string of 32 random bytes to encrypt sensitive fields in the database. It is stored as a `Secret` defined in `.spec.db_fields_encryption_secret`. If the `db_fields_encryption_secret` field is not defined during installation, Pulp Operator will create a default one:
```yaml
$ kubectl get pulp -oyaml
...
spec:
  db_fields_encryption_secret: pulp-db-fields-encryption
...


$ kubectl get secret/pulp-db-fields-encryption -oyaml
apiVersion: v1
data:
  database_fields.symmetric.key: RmRWL3...
kind: Secret
metadata:
  name: pulp-db-fields-encryption
...
type: Opaque
```

The key can be generated independently but it must be a url-safe base64-encoded string of 32 random bytes.
To generate a key with openssl:
```sh
openssl rand -base64 32
```

### Rotate the fields encryption key


The process of updating the database fields encryption `Secret` is manual because it requires manipulating sensitive data that the operator could not (or should not) have access (for example, if the `Secret` is stored in an external vault).

The `Secret` can contain multiple such keys (one per line). The key in the first line will be used for encryption but all others will still be attempted to decrypt old tokens. This can help you to rotate this key in the following way:

!!! WARNING
    Before proceeding, make sure to have a backup of Pulp database and the current fields encryption `Secret`.


* Shut down all Pulp services (api, content and worker pods).
```sh
$ PULP_CR=pulp
$ kubectl patch pulp $PULP_CR --type merge -p '{"spec": { "api": {"replicas":0},"content":{"replicas":0},"worker":{"replicas":0}}}'
```

* Add a new key at the top of the `Secret` key (modify the `NEW_SECRET` env var with your base64 encoded new encryption secret)
```sh
$ DB_ENCR_SECRET=$(kubectl get pulp $PULP_CR -ojsonpath='{.spec.db_fields_encryption_secret}')
$ OLD_SECRET=$(kubectl get secret $DB_ENCR_SECRET -ogo-template='{{index .data "database_fields.symmetric.key"}}')
$ NEW_SECRET=$(openssl rand -base64 32)
$ MERGE_SECRETS=$(printf "%s\n%s\n" "$NEW_SECRET" "$OLD_SECRET"|base64 -w0)
$ kubectl patch secret $DB_ENCR_SECRET --type merge -p "{\"data\": {\"database_fields.symmetric.key\": \"${MERGE_SECRETS}\"}}"
```

* Create a job to run `pulpcore-manager rotate-db-key`.
```yaml
$ kubectl apply -f-<<EOF
apiVersion: batch/v1
kind: Job
metadata:
  name: rotate-db-key
spec:
  template:
    spec:
      restartPolicy: "Never"
      containers:
      - name: pulpcore
        image: quay.io/pulp/pulp-minimal
        command: ["pulpcore-manager",  "rotate-db-key"]
        volumeMounts:
        - mountPath: /etc/pulp/settings.py
          name: pulp-server
          readOnly: true
          subPath: settings.py
        - mountPath: /etc/pulp/keys/database_fields.symmetric.key
          name: pulp-db-fields-encryption
          readOnly: true
          subPath: database_fields.symmetric.key
      volumes:
      - name: pulp-server
        secret:
          defaultMode: 420
          items:
          - key: settings.py
            path: settings.py
          secretName: pulp-server
      - name: pulp-db-fields-encryption
        secret:
          defaultMode: 420
          items:
          - key: database_fields.symmetric.key
            path: database_fields.symmetric.key
          secretName: pulp-db-fields-encryption
EOF
```

* Remove the old key (on the second line) from the `Secret`
```sh
$ MERGE_SECRETS=$(printf "%s\n" "$NEW_SECRET"|base64 -w0)
$ kubectl patch secret $DB_ENCR_SECRET --type merge -p "{\"data\": {\"database_fields.symmetric.key\": \"${MERGE_SECRETS}\"}}"
```

* Start the Pulp services again (make sure to adjust the number of replicas with the desired amount of pods)
```sh
$ kubectl patch pulp $PULP_CR --type merge -p '{"spec": { "api": {"replicas":1},"content":{"replicas":1},"worker":{"replicas":1}}}'
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/galaxy.md
`````markdown
# Galaxy Deployment

Pulp Operator can also be used to deploy [Galaxy](https://galaxyng.netlify.app/), a Pulp plugin to support hosting your very own Ansible Galaxy server.

## Deploy and Sync default EE images

It is possible to configure the operator to automatically deploy a set of *Execution Environments*.
It does so by periodic running a [*skopeo sync*](https://github.com/containers/skopeo/blob/main/docs/skopeo-sync.1.md#name) command through a k8s [`CronJob`](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/).

To enable this feature, update Pulp CR field `deploy_ee_defaults`:
```
...
spec:
  deploy_ee_defaults: true
...
```

By default, if it is not defined, it will be considered *false*.


!!! Info
    List of default images synchronized:

    * quay.io/fedora/fedora
    * quay.io/fedora/fedora-minimal

### Configuring the list of images to be synced

If not provided, the operator will create a `ConfigMap` called `ee-default-images` with a custom list of *Execution Environments* to be synchronized.

During the installation, it is also possible to define the name of a custom `ConfigMap` using the `ee_defaults` field:
```
...
spec:
  deploy_ee_defaults: true
  ee_defaults: <name of the ConfigMap with the list of EE>
...
```

Here is an example of how to create the `ConfigMap`:
```
$ kubectl apply -f-<<EOF
apiVersion: v1
data:
  images.yaml: |-
    quay.io:
      images-by-tag-regex:
        fedora/fedora-minimal: ^latest$
        fedora/fedora: ^latest$
kind: ConfigMap
metadata:
  name: <name of the ConfigMap with the list of EE>-
EOF
```

The `ConfigMap` must have the following structure:

* a key named `images.yaml`
* a [yaml content](https://github.com/containers/skopeo/blob/main/docs/skopeo-sync.1.md#yaml-file-content-used-source-for---src-yaml) with the list of images to be copied

Check [skopeo repo doc](https://github.com/containers/skopeo/blob/main/docs/skopeo-sync.1.md#yaml-file-content-used-source-for---src-yaml) for more information on the YAML file content format.


### Configuring the CronJob resource

When `deploy_ee_defaults` is set true, a `CronJob` resource will be created to schedule `Jobs` that will provision `Pods` to run the *`skopeo sync`* command.  
By default, the sync is scheduled to run every two minutes, but it can be changed through the `.spec.schedule` field from `CronJob`:
```
apiVersion: batch/v1
kind: CronJob
metadata:
  name: my-test-cronjob
spec:
  schedule: "*/2 * * * *"
```

See Kubernetes `CronJob` documentation for more information of the fields available: [https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/).

!!! Note
    The current version of Pulp Operator is **not** reconciling the `ConfigMap` and `CronJob`
    used to sync the images. So, after deploying these resource you can modify it directly and
    the operator will not try to rollback the changes. If you wish to discard any change and use
    the default values, just delete the `CronJob` and the operator will re-provision a new one.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/ldap.md
`````markdown
# LDAP Authentication

By default, Pulp authenticates each request with a username and password against its own user database. Requests can also authenticate by using an LDAP service. Pulp-operator can do that using [`django-auth-ldap`](https://django-auth-ldap.readthedocs.io/en/latest/).


## Configure LDAP (without encrypted connection)

The first step to allow LDAP integration with Pulp is to create a `Secret` with the LDAP service information.  
Here is an example of a `Secret` config:
```yaml
kubectl apply -f- <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: pulp-ldap-secret
stringData:
  auth_ldap_server_uri: "ldap://10.0.0.1"
  auth_ldap_bind_dn: "cn=admin,dc=example,dc=org"
  auth_ldap_bind_password: "admin"
  auth_ldap_group_search: LDAPSearch("ou=groups,dc=example,dc=org",ldap.SCOPE_SUBTREE,"(objectClass=posixGroup)")
  auth_ldap_user_search: LDAPSearch("ou=users,dc=example,dc=org", ldap.SCOPE_SUBTREE, "(uid=%(user)s)")
  auth_ldap_group_type: PosixGroupType(name_attr='cn')
EOF
```

after creating the `Secret`, we need to update Pulp CR with it:
```yaml
kubectl edit pulp
...
spec:
  ldap:
    config: pulp-ldap-secret
...
```

pulp-operator will notice the changes and will redeploy `pulpcore` pods with the new settings.  
Check `django-auth-ldap` documentation to see the list of possible configurations: [https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference](https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference)


## Configure LDAP with TLS

!!! Info
    LDAP+TLS connection with client cert authentication is not available yet.

!!! WARNING
    This is a tech preview feature! There are some issues with Pulp and `django-auth-ldap` that is under investigation.  
    To workaround some possible exceptions while using LDAP+TLS, we made the tests modifying `pulp-minimal` container image with:
    ```
    FROM quay.io/pulp/pulp-minimal:3.32
    RUN pip3 install django-auth-ldap==4.5.0
    RUN sed -i '126i \            if options != None:' /usr/local/lib/python3.8/site-packages/django_auth_ldap/backend.py
    RUN sed -i '127i \                options = {int(k):v for k,v in options.items()}' /usr/local/lib/python3.8/site-packages/django_auth_ldap/backend.py
    RUN sed -i '859i \                optInt = int(opt)' /usr/local/lib/python3.8/site-packages/django_auth_ldap/backend.py
    RUN sed -i '860s/opt, value/optInt, value/' /usr/local/lib/python3.8/site-packages/django_auth_ldap/backend.py
    ```


#### Ignoring TLS errors

The following configuration will configure ldap+tls connection, but ignoring the certificate validations (self signed or expired certs, non-trusted CAs, etc):
```yaml
kubectl apply -f- <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: pulp-ldap-secret
stringData:
  auth_ldap_server_uri: "ldap://10.0.0.1"
  auth_ldap_start_tls: "True"
  auth_ldap_bind_dn: "cn=admin,dc=example,dc=org"
  auth_ldap_bind_password: "admin"
  auth_ldap_group_search: LDAPSearch("ou=groups,dc=example,dc=org",ldap.SCOPE_SUBTREE,"(objectClass=posixGroup)")
  auth_ldap_user_search: LDAPSearch("ou=users,dc=example,dc=org", ldap.SCOPE_SUBTREE, "(uid=%(user)s)")
  auth_ldap_group_type: PosixGroupType(name_attr='cn')
  auth_ldap_global_options: |-
    { ldap.OPT_X_TLS_REQUIRE_CERT: ldap.OPT_X_TLS_ALLOW }
EOF
```

after creating the `Secret`, we need to update Pulp CR with it:
```yaml
kubectl edit pulp
...
spec:
  ldap:
    config: pulp-ldap-secret
...
```

pulp-operator will notice the changes and will redeploy `pulpcore` pods with the new settings.  
Check `django-auth-ldap` documentation to see the list of possible configurations: [https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference](https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference)

---
#### Providing a CA

If the certificate used in LDAP server is signed by a "*custom*" CA, it is possible to configure Pulp to pass it to the LDAP connection.
The first step is to create a `Secret` with the CA chain:
```yaml
oc apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
  name: ldap-ca-cert
stringData:
  ca.crt: |
    -----BEGIN CERTIFICATE-----
    MIIC0zCCAlmgAwIBAgIUCfQ+m0pgZ/BjYAJvxrn/bdGNZokwCgYIKoZIzj0EAwMw
    gZYxCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxBMUEgQ2FyIFdhc2gxJDAiBgNVBAsT
    ...
    -----END CERTIFICATE-----
EOF
```

now, we need to create a new `Secret` with the LDAP settings:
```yaml
kubectl apply -f- <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: pulp-ldap-secret
stringData:
  auth_ldap_server_uri: "ldap://10.0.0.1"
  auth_ldap_start_tls: "True"
  auth_ldap_bind_dn: "cn=admin,dc=example,dc=org"
  auth_ldap_bind_password: "admin"
  auth_ldap_group_search: LDAPSearch("ou=groups,dc=example,dc=org",ldap.SCOPE_SUBTREE,"(objectClass=posixGroup)")
  auth_ldap_user_search: LDAPSearch("ou=users,dc=example,dc=org", ldap.SCOPE_SUBTREE, "(uid=%(user)s)")
  auth_ldap_group_type: PosixGroupType(name_attr='cn')
  auth_ldap_connection_options: |-
    { ldap.OPT_X_TLS_CACERTFILE: AUTH_LDAP_CA_FILE, ldap.OPT_X_TLS_NEWCTX: 0, ldap.OPT_X_TLS_REQUIRE_CERT: ldap.OPT_X_TLS_ALLOW }
  auth_ldap_ca_file: "/tmp/ca.crt"      <---------------- make sure to define filename with the same value as the key defined in ldap-cert Secret (ca.crt in this example)
EOF
```

after creating the `Secret`, we need to update Pulp CR with it:
```yaml
kubectl edit pulp
...
spec:
  ldap:
    config: pulp-ldap-secret
    ca: ldap-ca-cert
...
```

pulp-operator will notice the changes and will redeploy `pulpcore` pods with the new settings.  
Check `django-auth-ldap` documentation to see the list of possible configurations: [https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference](https://django-auth-ldap.readthedocs.io/en/latest/reference.html#reference)
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/logLevel.md
`````markdown
# LOG LEVEL

## Pulp Operator log level configuration

It is possible to increase the log level of Pulp operator for troubleshooting purposes or reduce the log level for storage constraints, for example.

To do so, modify the `--zap-log-level=<new-level>` ARG from manager container of operator controller-manager deployment, where the `<new-level>` can be one of:

* debug
* info
* error

It is also possible to modify the `--zap-stacktrace-level` to:

* info
* error
* panic

```yaml
$ kubectl edit deployment/<deployment-name>-controller-manager
apiVersion: apps/v1
kind: Deployment
metadata:
  name: <deployment-name>-controller-manager
  namespace: system
spec:
  template:
    spec:
      containers:
...
      - name: manager
        args:
        - "--health-probe-bind-address=:8081"
        - "--metrics-bind-address=127.0.0.1:8080"
        - "--leader-elect"
        - "--zap-log-level=debug"     <-------------------
        - "--zap-stacktrace-level=panic"  <---------------
```


## Pulpcore Pods Debug Logging

By default Pulp logs at INFO level, but enabling DEBUG logging can be a helpful thing to get more insight when things don’t go as expected.
This can be enabled by updating Pulp CR with:
```yaml
spec:
  enable_debugging: true
```
after that, the operator will update the *pulp-server* `Secret` with the expected `LOGGING` config and restart pulpcore pods to get the new configuration.

To disable it, remove the `enable_debugging` config or set it to false:
```yaml
spec:
  enable_debugging: false
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/metadata_signing.md
`````markdown
# Configure Metadata Signing

It is possible to sign Pulp's metadata so that users can verify the authenticity of an object.
This is done by enabling the Signing Services feature. The steps to enable it are:

* create a gpg key
* create a Secret with a gpg key
* create a Secret with the signing script(s)
* configure Pulp CR

See pulpcore documentation for details on Content Signing: [https://docs.pulpproject.org/pulpcore/workflows/signed-metadata.html#metadata-signing](https://docs.pulpproject.org/pulpcore/workflows/signed-metadata.html#metadata-signing)  
See pulp_container documentation for details on Container Image Signing: [https://docs.pulpproject.org/pulp_container/workflows/sign-images.html](https://docs.pulpproject.org/pulp_container/workflows/sign-images.html)


## Create a gpg key

* create the key
```bash
$ GPG_EMAIL=pulp@example.com
$ cat >/tmp/gpg.txt <<EOF
%echo Generating a basic OpenPGP key
Key-Type: DSA
Key-Length: 1024
Subkey-Type: ECDSA
Subkey-Curve: nistp256
Name-Real: Collection Signing Service
Name-Comment: with no passphrase
Name-Email: $GPG_EMAIL
Expire-Date: 0
%no-ask-passphrase
%no-protection
# Do a commit here, so that we can later print "done" :-)
%commit
%echo done
EOF

$ gpg --batch --gen-key /tmp/gpg.txt
```

* verify the list of available keyrings
```bash
$ gpg --list-keys
/var/lib/pulp/.gnupg/pubring.kbx
--------------------------------
pub   rsa4096 2022-12-14 [SC]
      66BBFE010CF70CC92826D9AB71684D7912B09BC1
uid           [ultimate] Collection Signing Service (with no passphrase) <pulp@example.com>
sub   rsa2048 2022-12-14 [E]
```

See the GnuPG official documentation for more information on how to generate a new keypair: [https://www.gnupg.org/gph/en/manual/c14.html](https://www.gnupg.org/gph/en/manual/c14.html)

## Create a Secret with the gpg key

```bash
$ gpg --export-secret-keys -a pulp@example.com  > /tmp/gpg_private_key.gpg
$ kubectl create secret generic signing-secret --from-file=signing_service.gpg=/tmp/gpg_private_key.gpg
```

## Create a Secret with the signing scripts

* example of a collection signing script
```bash
$ SIGNING_SCRIPT_PATH=/tmp
$ COLLECTION_SIGNING_SCRIPT=collection_script.sh
$ cat<<EOF> "$SIGNING_SCRIPT_PATH/$COLLECTION_SIGNING_SCRIPT"
#!/usr/bin/env bash
set -u
FILE_PATH=\$1
SIGNATURE_PATH="\$1.asc"

ADMIN_ID="\$PULP_SIGNING_KEY_FINGERPRINT"
PASSWORD="password"

# Create a detached signature
gpg --quiet --batch --pinentry-mode loopback --yes --passphrase \
   \$PASSWORD --homedir ~/.gnupg/ --detach-sign --default-key \$ADMIN_ID \
   --armor --output \$SIGNATURE_PATH \$FILE_PATH

# Check the exit status
STATUS=\$?
if [ \$STATUS -eq 0 ]; then
   echo {\"file\": \"\$FILE_PATH\", \"signature\": \"\$SIGNATURE_PATH\"}
else
   exit \$STATUS
fi
EOF
```

* example of a container signing script
```bash
$ SIGNING_SCRIPT_PATH=/tmp
$ CONTAINER_SIGNING_SCRIPT=container_script.sh
$ cat<<EOF> "$SIGNING_SCRIPT_PATH/$CONTAINER_SIGNING_SCRIPT"
#!/usr/bin/env bash
set -u

MANIFEST_PATH=\$1
IMAGE_REFERENCE="\$REFERENCE"
SIGNATURE_PATH="\$SIG_PATH"

skopeo standalone-sign \
      \$MANIFEST_PATH \
      \$IMAGE_REFERENCE \
      \$PULP_SIGNING_KEY_FINGERPRINT \
      --output \$SIGNATURE_PATH

# Check the exit status
STATUS=\$?
if [ \$STATUS -eq 0 ]; then
  echo {\"signature_path\": \"\$SIGNATURE_PATH\"}
else
  exit \$STATUS
fi
EOF
```

!!! WARNING
    Make sure to set `collection_script.sh` and/or `container_script.sh` as key names (using different names would fail operator's execution)

```bash
$ kubectl create secret generic signing-scripts --from-file=collection_script.sh=/tmp/collection_script.sh --from-file=container_script.sh=/tmp/container_script.sh
```

## Configure Pulp CR

* configure Pulp CR with the Secrets created in the previous steps
```yaml
$ kubectl edit pulp
...
spec:
  signing_secret: "signing-secret"
  signing_scripts: "signing-scripts"
...
```

After configuring Pulp CR the operator should create a new job to store the new
signing services into the database:
```bash
$ kubectl get jobs
NAME                          COMPLETIONS   DURATION   AGE
pulp-signing-metadata-54mtp   1/1           15s        30s

$ kubectl logs job/pulp-signing-metadata-54mtp
...
Signing service 'collection-signing-service' has been successfully removed.
Successfully added signing service collection-signing-service for key 66BBFE010CF70CC92826D9AB71684D7912B09BC1.
Signing service 'container-signing-service' has been successfully removed.
Successfully added signing service container-signing-service for key 66BBFE010CF70CC92826D9AB71684D7912B09BC1.
```

double-checking if the signing services are stored in the database:
```bash
$ PULP_PWD=$(kubectl get secrets pulp-admin-password -ojsonpath='{.data.password}'|base64 -d)
$ kubectl exec deployment/pulp-api -- curl -suadmin:$PULP_PWD localhost:24817/pulp/api/v3/signing-services/|jq
{
  "count": 2,
  "next": null,
  "previous": null,
  "results": [
    {
      "pulp_href": "/pulp/api/v3/signing-services/018c0126-1f0c-7803-868d-1a1ee7210db1/",
      "pulp_created": "2023-11-22T11:45:25.042451Z",
      "name": "container-signing-service",
      "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGJFjREBEACS1aBb6sqz1kfO/Ii...",
      "pubkey_fingerprint": "66BBFE010CF70CC92826D9AB71684D7912B09BC1",
      "script": "/var/lib/pulp/scripts/container_script.sh"
    },
    {
      "pulp_href": "/pulp/api/v3/signing-services/018c0126-1226-7d7d-abae-aebdc040743c/",
      "pulp_created": "2023-11-22T11:45:21.522412Z",
      "name": "collection-signing-service",
      "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINBGJFjREBE...",
      "pubkey_fingerprint": "66BBFE010CF70CC92826D9AB71684D7912B09BC1",
      "script": "/var/lib/pulp/scripts/collection_script.sh"
    }
  ]
}
```

and it should also redeploy pulpcore pods and mount the gpg key:
```bash
$ kubectl exec deployment/pulp-api -- gpg -k
------------------------------
pub   rsa4096 2022-12-14 [SC]
      66BBFE010CF70CC92826D9AB71684D7912B09BC1
uid           [ultimate] Collection Signing Service (with no passphrase) <pulp@example.com>
sub   rsa2048 2022-12-14 [E]


$ kubectl exec deployment/pulp-worker -- gpg -k
------------------------------
pub   rsa4096 2022-12-14 [SC]
      66BBFE010CF70CC92826D9AB71684D7912B09BC1
uid           [ultimate] Collection Signing Service (with no passphrase) <pulp@example.com>
sub   rsa2048 2022-12-14 [E]
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/pdb.md
`````markdown
# Specify a Disruption Budget

Pulp operator allows to configure a [PodDisruptionBudget](https://kubernetes.io/docs/tasks/run-application/configure-pdb/) for pulpcore components (`pulp-api`, `pulp-content`, `pulp-worker`, `pulp-web`).

!!! info
    Make sure you know what you are doing before configuring `PDB`.
    If not configured correctly it can cause unexpected behavior, like getting
    a node in a hang state during maintenance (node drain) or cluster upgrade.

It is possible to set only `maxUnavailable` or `minAvailable`. Trying to configure both for the same
PDB will fail operator execution.

The label selector will be handled by the operator based on Pulp CR spec.

For example, to configure API pods with PDB `minAvailable` and worker pods with `maxUnavailable`:
```yaml
$ oc edit pulp
...
spec:
  api:
    pdb:
      minAvailable: 1
  ...
  worker:
    pdb:
      maxUnavailable: 1
...
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/pod_resources.md
`````markdown
# Setting Pod Resources

The pod resource requests and limits can be specified for each component.

Below is an example of a Pulp CR spec that sets CPU and memory resources.

It is not recommended to set the worker's CPU limit to less than 2.

Repository syncing takes longer when workers have insufficient CPU resources.

```yaml
  spec:
    api:
      replicas: 2
      gunicorn_workers: 1
      resource_requirements:
        requests:
          cpu: 250m
          memory: 256Mi
        limits:
          cpu: 1
          memory: 512Mi
    content:
      replicas: 2
      resource_requirements:
        requests:
          cpu: 250m
          memory: 256Mi
        limits:
          cpu: 500m
          memory: 512Mi
    worker:
      replicas: 5
      gunicorn_workers: 1
      resource_requirements:
        requests:
          cpu: 250m
          memory: 256Mi
        limits:
          cpu: 2
          memory: 5120Mi
    web:
      replicas: 1
      resource_requirements:
        requests:
          cpu: 250m
          memory: 128Mi
        limits:
          cpu: 500m
          memory: 128Mi
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/podPlacement.md
`````markdown
# Advanced pod scheduling

Pulp operator allows to restrict the nodes in which its pod should run through [nodeSelectors](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector) and [node affinity](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#node-affinity).

!!! info

    If both nodeSelector and nodeAffinity are specified, both must be satisfied for the Pods to be scheduled onto a node.

For more information on how k8s pod assignment to nodes work, please consult the [official k8s documentation](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/).


To define `nodeSelectors` to the pods deployed by Pulp operator configure the following fields:

* `api.node_selector` [**optional**] k8s will schedule api pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.
* `content.node_selector` [**optional**] k8s will schedule content pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.
* `worker.node_selector` [**optional**] k8s will schedule worker pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.
* `web.node_selector` [**optional**] k8s will schedule web pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.
* `cache.node_selector` [**optional**] k8s will schedule cache pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.
* `database.node_selector` [**optional**] k8s will schedule database pods onto nodes that have each of the labels specified. If not defined the k8s scheduler will not use nodeSelector to determine pod placement.


To define `node affinity` for Pulp operator pods:

* `api.affinity` [**optional**] specifies node affinities (`.spec.affinity.nodeAffinity`) field for api pods. If not defined the k8s scheduler will not use `node affinity` to determine pod placement.
* `content.affinity` [**optional**] specifies node affinities (`.spec.affinity.nodeAffinity`) field for content pods. If not defined the k8s scheduler will not use `node affinity` to determine pod placement.
* `worker.affinity`  [**optional**] specifies node affinities (`.spec.affinity.nodeAffinity`) field for worker pods. If not defined the k8s scheduler will not use `node affinity` to determine pod placement.
* `database.affinity` [**optional**] specifies node affinities (`.spec.affinity.nodeAffinity`) field for database pods. If not defined the k8s scheduler will not use `node affinity` to determine pod placement.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/pulp_settings.md
`````markdown
# Settings


Pulp uses dynaconf for its settings which allows you to configure Pulp settings
through a configuration file (`/etc/pulp/settings.py`) that is automatically
created by Pulp Operator.

Check pulpcore doc for more information about the list of settings: [Pulp Settings](https://docs.pulpproject.org/pulpcore/configuration/settings.html).

## View Settings

To list the effective settings on a Pulp installation, run the command `dynaconf list`
from a Pulp API pod:

```sh
$ kubectl exec $(kubectl get deployment -oname -l app.kubernetes.io/component=api) -- dynaconf list
```

To check the `settings.py` file:
```sh
$ kubectl exec $(kubectl get deployment -oname -l app.kubernetes.io/component=api) -- cat /etc/pulp/settings.py
```

## Pulp Server Secret

To share the settings between Pulp pods, Pulp Operator creates a
[Kubernetes Secret](https://kubernetes.io/docs/concepts/configuration/secret/)
(the [`pulp-server`](/pulp_operator/configuring/secrets/#pulp-server) Secret)
based on the definitions of `Pulp CR`.

There are 2 ways to configure the settings:

* [via specific fields](#pulp-operator-defined-settings)
* [via `custom_pulp_settings` field](#custom-settings)

## Pulp Operator Defined Settings

The following settings (database, cache, secret_key, etc) are all
"abstracted" from `Pulp CR` definitions and, under the hood, the operator
translates/migrates these configs into `settings.py`. To modify them, modify the
corresponding field or resource.

### Database

If `database.external_db_secret` is defined, Pulp Operator will configure the `settings.py`
file with the values from the Secret. If not, it will use the configs from the
self-managed database.
```
DATABASES = {
  'default': {
    'HOST': ...,
    'ENGINE': ...,
    'NAME': ...,
    'USER': ...,
    'PASSWORD': ...,
    'PORT': ...,
    'CONN_MAX_AGE': 0,
    'OPTIONS': { 'sslmode': ... },
  }
}
```

Check [Configuring Pulp Database](/pulp_operator/configuring/database/) for more
information on how to configure Pulp database.

### Cache

If `cache.enabled: true`, Pulp Operator will define the `REDIS_*` settings with
the definitions from `cache.external_cache_secret` Secret or from the self-managed
redis instance.
```
CACHE_ENABLED = True
REDIS_HOST =  ...
REDIS_PORT =  ...
REDIS_PASSWORD = ...
REDIS_DB = ...
```

Check [Configuring Pulp Cache](/pulp_operator/configuring/cache/) for more
information on how to configure Pulp cache.

### Object Storage

If `object_storage_azure_secret` is defined, Pulp Operator will define the following
fields with the Secret's content:
```
AZURE_CONNECTION_STRING = ...
AZURE_LOCATION = ...
AZURE_ACCOUNT_NAME = ...
AZURE_ACCOUNT_KEY = ...
AZURE_CONTAINER = ...
AZURE_URL_EXPIRATION_SECS = 60
AZURE_OVERWRITE_FILES = True
DEFAULT_FILE_STORAGE = "storages.backends.azure_storage.AzureStorage"
```

If `object_storage_s3_secret` is defined, Pulp Operator will define the following
fields with the Secret's content:
```
AWS_ACCESS_KEY_ID = ...
AWS_SECRET_ACCESS_KEY = ...
AWS_STORAGE_BUCKET_NAME = ...
AWS_DEFAULT_ACL = "@none None"
S3_USE_SIGV4 = True
AWS_S3_SIGNATURE_VERSION = "s3v4"
AWS_S3_ADDRESSING_STYLE = "path"
DEFAULT_FILE_STORAGE = "storages.backends.s3boto3.S3Boto3Storage"
MEDIA_ROOT = ""
```

Check [Configuring Pulp storage configuration](/pulp_operator/configuring/storage/)
for more information on how to configure Pulp storage.

### Fields that depend on `ingress_type`

Some fields are defined based on the `ingress_type`:
```
ANSIBLE_API_HOSTNAME = ...
CONTENT_ORIGIN = ...
TOKEN_SERVER = ...
```

* if `ingress_type: ingress` the operator will set these fields with `ingress_host` value
* if `ingress_type: route` it will use the `route_host` definition
* if `ingress_type: ""` it will use the hostname from
    * `pulp-api` Service for the `TOKEN_SERVER`
    * `pulp-web` Service for the others


Check [Ingress](/pulp_operator/configuring/networking/exposing/#ingress) for more
information on how to expose Pulp to outside of k8s cluster.

### Secret Key

If `pulp_secret_key` is defined in Pulp CR, Pulp Operator will define the `SECRET_KEY`
in `settings.py` with it. <br/>
If `pulp_secret_key` is not defined, Pulp Operator will generate a random key and
configure `SECRET_KEY` with it.

Check [pulp-secret-key](/pulp_operator/configuring/secrets/#pulp-secret-key)
for more information about Django Secret Key.

### Allowed Checksum

If `allowed_content_checksums` is defined in Pulp CR, Pulp Operator will define
the `ALLOWED_CONTENT_CHECKSUMS` in `settings.py` with it. <br/>
If `allowed_content_checksums` is not defined, the `ALLOWED_CONTENT_CHECKSUMS`
setting will not be added to `settings.py` file.

Check [Configuring Pulp Allowed Content Checksums](/pulp_operator/configuring/content_checksums)
for more information about Pulp allowed checksum algorithms.

### LDAP

If `ldap.config` is defined in Pulp CR, Pulp Operator will do the following
configurations in `settings.py`:

* update the `AUTHENTICATION_BACKENDS`
```
AUTHENTICATION_BACKENDS = [
  "django_auth_ldap.backend.LDAPBackend",
  "django.contrib.auth.backends.ModelBackend",
  "pulpcore.backends.ObjectRolePermissionBackend",
]
```

* set the `AUTH_LDAP_*` fields with the "*converted*" (Pulp Operator will change
all Secret keys to uppercase and parse their values from YAML to a format
accepted by Python) values from the Secret defined in `ldap.config`.

Check [LDAP AUTHENTICATION](/pulp_operator/configuring/ldap) for more
information on how to configure Pulp to authenticate using LDAP.

### Default Settings

These fields are defined with default values.
```
DB_ENCRYPTION_KEY = "/etc/pulp/keys/database_fields.symmetric.key"
ANSIBLE_CERTS_DIR = "/etc/pulp/keys/"
PRIVATE_KEY_PATH = "/etc/pulp/keys/container_auth_private_key.pem"
PUBLIC_KEY_PATH = "/etc/pulp/keys/container_auth_public_key.pem"
STATIC_ROOT = "/var/lib/operator/static/"
TOKEN_AUTH_DISABLED = False
TOKEN_SIGNATURE_ALGORITHM = "ES256"
API_ROOT = "/pulp/"
```


## Custom Settings

!!! WARNING
    Use the `custom_pulp_settings` field with caution. Since Pulp Operator will not manage
    nor validate the contents from the ConfigMap, providing invalid values can cause disruption or
    unexpected behaviors.

Most of Pulp configurations should be done using the settings [presented before](/pulp_operator/configuring/pulp_settings/#pulp-operator-defined-settings),
but sometimes it is not possible. In this case, Pulp CR has the `custom_pulp_settings`
field that can be used to define a `ConfigMap` with the additional Pulp configurations.

For example, to disable
[Pulp analytics](https://docs.pulpproject.org/pulpcore/configuration/settings.html#analytics), first create a new ConfigMap:
```bash
$ kubectl create configmap settings  --from-literal=ANALYTICS=False
```

update Pulp CR with this new `ConfigMap`:

```yaml
spec:
  custom_pulp_settings: settings
```


!!! Info
    The `pulp_settings` field is deprecated!
    Use the `custom_pulp_settings` field instead.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/reset_admin_pwd.md
`````markdown
# Reset Pulp Admin Password

The password from Pulp admin user is managed by Pulp Operator. If a custom `Secret` is not provided
during operator's installation, a [random password](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/secrets/#pulp-admin-password) will be provided.

To change the admin password, the first thing to do is to get the name of the `admin_password_secret` `Secret`:
```sh
$ kubectl get pulp <PULP CR NAME>  -ojsonpath='{.spec.admin_password_secret}'

## for example:
$ kubectl get pulp example-pulp  -ojsonpath='{.spec.admin_password_secret}'
example-pulp-admin-password
```

Now, update the `Secret` with a new password:
```sh 
$ kubectl apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
 name: '<SECRET NAME>'
stringData:
 password: '<NEW PASSWORD>'
EOF


## for example:
$ kubectl apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
 name: 'example-pulp-admin-password'
stringData:
 password: 'mysupersecretpassword'
EOF
```

The operator should notice the `Secret` change and create a new `Job` to update the password:
```sh
$ kubectl get jobs
NAME                              COMPLETIONS   DURATION   AGE
reset-admin-password-3140016014   1/1           11s        100s
```

Checking the logs from `reset-admin-password` `Job`:
```sh
$ kubectl logs reset-admin-password-3140016014-k5d4b
Waiting on postgresql to start...     <------ waiting for DB connection before proceed
Checking postgres host 10.0.0.1
Checking postgres port 5432
Postgres started!
Checking for database migrations   <------ waiting for any running migration
Database migrated!
pulp admin can be initialized.
Successfully set password for "admin" user.   <------- password updated!
```


!!! WARNING
    We don't recommend running the `pulpcore-manager reset-admin-password` command nor updating the password via `/api/v3/users` endpoint.  
    Any modification in `admin_password_secret` `Secret` will override Pulp admin password.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/sample_configs.md
`````markdown
# Sample Configs

To help with the first steps of Pulp installation and [CR definition](https://pulpproject.org/pulp-operator/docs/admin/reference/custom_resources/repo_manager/#pulp), there are a set of [samples in pulp-operator repository](https://github.com/pulp/pulp-operator/tree/main/config/samples).



### MINIMAL CONFIGURATION

The [`minimal.yaml`](https://github.com/pulp/pulp-operator/blob/main/config/samples/minimal.yaml) file, provides a sample CR with
the minimal configurations needed (the [database](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/) and [pulpcore storage](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/) definitions) for the operator to run. It will deploy Pulp with a single [replica of pulpcore](https://pulpproject.org/pulp-operator/docs/admin/guides/install/ha/#scaling-pulpcore-pods) pods and a [random password for the admin user](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/reset_admin_pwd/#reset-pulp-admin-password).

!!! note

    The `minimal.yaml` sample will not deploy a reverse proxy or expose pulpcore pods.


### SIMPLE

The [`simple.yaml`](https://github.com/pulp/pulp-operator/blob/main/config/samples/simple.yaml) file, provides a sample CR
that will deploy Pulp with:

- a single [replica of pulpcore](https://pulpproject.org/pulp-operator/docs/admin/guides/install/ha/#scaling-pulpcore-pods) pods
- a definition of the [StorageClass to store Pulp artifacts](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-pulp-operator-storage-to-use-a-storage-class)
- a [database](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/) pod
- a [cache](http://127.0.0.1:8000/pulp-operator/docs/admin/guides/configurations/cache/#configure-pulp-operator-to-deploy-a-redis-instance) pod
- a [k8s Service type nodeport](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/exposing/#nodeport)
- a [pre-defined password for the admin user](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/secrets/#pulp-admin-password)
- some [Pulp app configs](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#custom-settings) (settings.py definitions)


### S3

The [`simple.s3.ci.yaml`](https://github.com/pulp/pulp-operator/blob/main/config/samples/simple.s3.ci.yaml) file, provides a sample CR
that will deploy Pulp with:

- a single [replica of pulpcore](https://pulpproject.org/pulp-operator/docs/admin/guides/install/ha/#scaling-pulpcore-pods) pods
- an [object storage (S3) to store Pulp artifacts](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-aws-s3-storage)
- a [database](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/) pod
- a [k8s Service type nodeport](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/exposing/#nodeport)
- a [pre-defined password for the admin user](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/secrets/#pulp-admin-password)
- some [Pulp app configs](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#custom-settings) (settings.py definitions)


### EXTERNAL DATABASE

The [`simple-external-db.yaml`](https://github.com/pulp/pulp-operator/blob/main/config/samples/simple-external-db.yaml) file, provides a sample CR
that will deploy Pulp with:

- a single [replica of pulpcore](https://pulpproject.org/pulp-operator/docs/admin/guides/install/ha/#scaling-pulpcore-pods) pods
- a definition of the [StorageClass to store Pulp artifacts](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-pulp-operator-storage-to-use-a-storage-class)
- a definition of a [k8s Secret with the credentials to access a postgres database](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/#configure-pulp-operator-to-use-an-external-postgresql-installation) (not deployed/managed by pulp-operator)
- a [k8s Service type nodeport](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/exposing/#nodeport)
- a [pre-defined password for the admin user](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/secrets/#pulp-admin-password)
- some [Pulp app configs](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#custom-settings) (settings.py definitions)


### INGRESS


The [`simple.ingress.yaml`](https://github.com/pulp/pulp-operator/blob/main/config/samples/simple.ingress.yaml) file, provides a sample CR
that will deploy Pulp with:

- a single [replica of pulpcore](https://pulpproject.org/pulp-operator/docs/admin/guides/install/ha/#scaling-pulpcore-pods) pods
- a definition of the [StorageClass to store Pulp artifacts](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-pulp-operator-storage-to-use-a-storage-class)
- a [database](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/) pod
- some [Pulp app configs](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/#custom-settings) (settings.py definitions)
- a [k8s ingress](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/networking/exposing/#ingress)
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/secrets.md
`````markdown
# Pulp Operator Secrets

Pulp Operator creates and also watches k8s `Secrets` based on the configuration defined in Pulp `CR`.


### Restore the default values

To restore the default values defined by the Operator it is possible to remove the secret and let the Operator recreate it:

!!! warning
    This is a disruptive action. Any change made directly into the `Secret` will be lost.  
    We recommend to make a backup of the `Secret` before removing it.

* make a copy of the `Secret`
```
$ kubectl get secret -oyaml > my_secret.yaml
```

* delete the secret (the Operator will create a new one with the default values)
```
$ kubectl delete secret <secret name>
```

!!! note
    Any modifications to the `Secrets` [will **not** be replicated to the running pods](https://pulpproject.org/pulp-operator/docs/user/guides/common_issues/#i-modified-a-configmapsecret-but-the-new-config-is-not-replicated-to-pods).  
    To update the `Pods` with the new `Secret` contents just delete the `Pod` (the new `Pod` provisioned by the controller will mount the updated `Secret`).

## List of Secrets deployed by the Operator

The following `Secrets` are created by the operator in case they are not provided through Pulp `CR`.
The name of the `Secrets` can be different depending on the Pulp's `CR` name.  

!!! note
    For the sake of simplicity, we are considering that the Operator `.metadata.name` is "*pulp*",
    so all of the following `Secrets` will be prefixed with `pulp-`.


### pulp-server

Will be used to populate `/etc/pulp/settings.py` configuration file.  

!!! warning
    Do not modify this `Secret`, the content will get overwritten by the operator.
    Any modification in `Pulp CR` that impact changing the content of this
    `Secret` will trigger a redeploy of `pulp-api` and `pulp-content` pods.

Here is an example of a `Secret` created by the Operator:

```
DB_ENCRYPTION_KEY = "/etc/pulp/keys/database_fields.symmetric.key"
GALAXY_COLLECTION_SIGNING_SERVICE = "ansible-default"
GALAXY_CONTAINER_SIGNING_SERVICE = "container-default"
ANSIBLE_API_HOSTNAME = "http://pulp-web-svc.pulp.svc.cluster.local:24880"
ANSIBLE_CERTS_DIR = "/etc/pulp/keys/"
CONTENT_ORIGIN = "http://pulp-web-svc.pulp.svc.cluster.local:24880"
DATABASES = {
        'default': {
                'HOST': 'postgres.db.svc.cluster.local',
                'ENGINE': 'django.db.backends.postgresql_psycopg2',
                'NAME': 'pulp',
                'USER': 'pulp-admin',
                'PASSWORD': 'password',
                'PORT': '5432',
                'CONN_MAX_AGE': 0,
                'OPTIONS': { 'sslmode': 'prefer' },
        }
}
GALAXY_FEATURE_FLAGS = {
        'execution_environments': 'True',
}
PRIVATE_KEY_PATH = "/etc/pulp/keys/container_auth_private_key.pem"
PUBLIC_KEY_PATH = "/etc/pulp/keys/container_auth_public_key.pem"
STATIC_ROOT = "/var/lib/operator/static/"
TOKEN_AUTH_DISABLED = "False"
TOKEN_SERVER = "http://pulp-api-svc.pulp.svc.cluster.local:24817/token/"
TOKEN_SIGNATURE_ALGORITHM = "ES256"
API_ROOT = "/pulp/"
CACHE_ENABLED = "True"
REDIS_HOST =  "pulp-redis-svc.pulp"
REDIS_PORT =  "6379"
REDIS_PASSWORD = ""
REDIS_DB = ""

```

For more information about Pulp Settings config file see [Pulpcore doc](https://pulpproject.org/pulpcore/docs/admin/reference/settings/). <br/>
For more information about how to configure `settings.py` file using Pulp
Operator see [Pulp Settings](http://pulpproject.org/pulp-operator/docs/admin/guides/configurations/pulp_settings/).


### pulp-db-fields-encryption

Symmetric key used to encrypt the data stored in the database.  
*The current version of pulp-perator does not provide a way to modify this key yet.*

!!! warning
    Modifying this key without properly following the [key rotation](https://pulpproject.org/pulpcore/docs/admin/guides/configure-pulp/db-encryption/#key-rotation) will make Pulp unusable and you will have to drop your database and start over. As of now, pulp-operator does not automate the logic for the key rotation.

For more info check: [rotate-the-db-fields-encryption-key](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/database/#rotate-the-fields-encryption-key)


### pulp-admin-password

To define the password from Pulp admin user, create a `Secret` with a `password` key and set `admin_password_secret` with the name of the `Secret` created.

* in this example we are creating a secret called "*my-admin-password*" and the "*password*" key has "*MySuperSecretPassword*" as value
```
$ kubectl create secret generic my-admin-password --from-literal=password=MySuperSecretPassword
```
* now we need to set the `admin_password_secret` field  in the CR
```
...
spec:
  admin_password_secret: my-admin-password
...
```

If the `admin_password_secret` field is not defined with the name of a `Secret` the Operator will create one (called *pulp-admin-password*) with a random string.  


### pulp-container-auth

Contains the keys which are going to be used for the [signing and validation of tokens](http://pulpproject.org/pulp_container/docs/admin/learn/authentication/#token-authentication).  
It is managed by `container_token_secret` field in Pulp `CR`.

### pulp-secret-key

Name of the Kubernetes `Secret` with Django `SECRET_KEY`.  
From [Django doc](https://docs.djangoproject.com/en/4.2/ref/settings/#secret-key): "*A secret key for a particular Django installation. This is used to provide cryptographic signing, and should be set to a unique, unpredictable value.*"  
The `Secret.data.key` must be named **secret_key**.

* in this example we are creating a secret called "*my-django-secret-key*" and the "*secret_key*" key has "*MySuperSecretPassword*" as value
```bash
$ kubectl create secret generic my-django-secret-key --from-literal=secret_key=MySuperSecretPassword
```
* now we need to set the `pulp_secret_key` field  in the CR
```yaml
...
spec:
  pulp_secret_key: my-django-secret-key
...
```

If the `pulp_secret_key` field is not defined with the name of a `Secret`, pulp-operator will create one (called *pulp-secret-key*) with a random string.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/storage.md
`````markdown
# Pulp Operator storage configuration

Before installing Pulp, it is necessary to configure how Pulp should persist the data.

[Pulp uses django-storages](https://docs.pulpproject.org/pulpcore/installation/storage.html) to support multiple types of storage backends. The current version of pulp-operator supports the following types of storage installation:

* [Storage Class](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-pulp-operator-storage-to-use-a-storage-class)
* [Persistent Volume Claim](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-pulp-operator-storage-to-use-a-persistent-volume-claim)
* [Azure Blob](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-azure-blob-storage)
* [Amazon Simple Storage Service (S3)](https://pulpproject.org/pulp-operator/docs/admin/guides/configurations/storage/#configure-aws-s3-storage)

!!! info
    Only one storage type should be provided, trying to configure Pulp CR with multiple storage types will fail operator execution.


## Configure Pulp Operator storage to use a Storage Class

Pulp operator has the following parameters to configure the components with a Storage Class:

* `FileStorageClass` - defines the name of the Storage Class that will be used by Pulp core pods
* `Database.PostgresStorageClass` - defines the name of the Storage Class that will be used by Database pods
* `Cache.RedisStorageClass` - defines the name of the Storage Class that will be used by Cache pods

When Pulp operator is configured with the above parameters it will automatically provision new Persistent Volume Claims with the Storage Class provided.

To verify if there is a Storage Class available:
```
$ kubectl get sc
```

If the Kubernetes cluster has no Storage Class configured, it is possible to configure Pulp with other parameters of storage or follow the [steps to create a new Storage Class](https://kubernetes.io/docs/concepts/storage/storage-classes/).


!!! note
    If the Storage Class defined will provision RWO volumes, it is recommended to also set the [`Deployment strategy`](https://docs.pulpproject.org/pulp_operator/pulp/) in Pulp CR as [`Recreate`](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#recreate-deployment) to avoid the [`Multi-Attach`](https://docs.pulpproject.org/pulp_operator/faq/#how-can-i-fix-the-multi-attach-error-for-volume-my-volume-volume-is-already-used-by-pods-my-pod) volume error.

Here is an example to deploy Pulp in a persistent way providing different `StorageClasses` for each component:
```
spec:
  file_storage_storage_class: my-sc-for-pulpcore
  file_storage_size: "10Gi"
  file_storage_access_mode: "ReadWriteMany"
  database:
    postgres_storage_class: my-sc-for-database
  cache:
    redis_storage_class: my-sc-for-cache
```


## Configure Pulp Operator storage to use a Persistent Volume Claim

Pulp operator has the following parameters to configure the components with a Persistent Volume Claim:

* `PVC` - defines the name of the Persistent Volume Claim that will be used by Pulp core pods
* `Database.PVC` - defines the name of the Persistent Volume Claim that will be used by Database pods
* `Cache.PVC` - defines the name of the Persistent Volume Claim that will be used by Cache pods

When Pulp operator is configured with the above parameters it is expected that the PVCs are already provisioned and Pulp operator will automatically configure the Deployments and StatefulSet with them.

To verify the list of Persistent Volume Claims available:
```
$ kubectl get pvc
```

If the installation namespace has no Persistent Volume Claim available, it is possible to configure Pulp with other parameters of storage or follow the [steps to create a new Persistent Volume Claim](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims).


!!! note
    If the Persistent Volume Claim defined is bound to a RWO volume, it is recommended to also set the [`Deployment strategy`](https://docs.pulpproject.org/pulp_operator/pulp/) in Pulp CR as [`Recreate`](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#recreate-deployment) to avoid the [`Multi-Attach`](https://docs.pulpproject.org/pulp_operator/faq/#how-can-i-fix-the-multi-attach-error-for-volume-my-volume-volume-is-already-used-by-pods-my-pod) volume error.

Here is an example to deploy Pulp in a persistent way providing different `PersistentVolumeClaims` for each component:
```
spec:
  pvc: my-pvc-for-pulpcore
  database:
    pvc: my-pvc-for-database
  cache:
    pvc: my-pvc-for-cache
```

## Configure Pulp Operator to use object storage

Pulp operator has the following parameters to configure Pulp core components with Object Storage:

* `ObjectStorageAzureSecret` - defines the name of the secret with Azure compliant object storage configuration.
* `ObjectStorageS3Secret` - defines the name of the secret with S3 compliant object storage configuration.

When Pulp operator is configured with one of the above parameters it is expected that the secrets are already present in the namespace of Pulp installation.
Pulp operator will automatically configure Pulp `settings.py` with the provided Object Storage backend.

!!! info
    Only one type of Object Storage should be provided. Trying to declare both will fail operator execution.

### Configure Azure Blob Storage

#### Prerequisites
* To configure Pulp with Azure Blob as a storage backend, the first thing to do is create an [Azure Storage Blob Container](https://docs.microsoft.com/en-us/azure/storage/blobs/quickstart-storage-explorer) to store the objects.
* After configuring a `Blob Container`, take a note of the [Azure storage account](https://docs.microsoft.com/en-us/azure/storage/common/storage-account-get-info?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json&tabs=portal)

After performing all the prerequisites, create a `Secret` with them:
```
$ PULP_NAMESPACE='my-pulp-namespace'
$ AZURE_ACCOUNT_NAME='my-azure-account-name'
$ AZURE_ACCOUNT_KEY='my-azure-account-key'
$ AZURE_CONTAINER='pulp-test'
$ AZURE_CONTAINER_PATH='pulp3'
$ AZURE_CONNECTION_STRING='my-azure-connection-string'

$ kubectl -n $PULP_NAMESPACE apply -f- <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: 'test-azure'
stringData:
  azure-account-name: $AZURE_ACCOUNT_NAME
  azure-account-key: $AZURE_ACCOUNT_KEY
  azure-container: $AZURE_CONTAINER
  azure-container-path: $AZURE_CONTAINER_PATH
  azure-connection-string: $AZURE_CONNECTION_STRING
EOF
```

!!! note
    `azure-connection-string` is an **optional** field that can be used to keep compatibility with other Azure Storage compliant systems, like [Azurite](https://github.com/Azure/Azurite).

Now configure `Pulp CR` with the secret created:
```
$ kubectl -n $PULP_NAMESPACE edit pulp
...
spec:
  object_storage_azure_secret: test-azure
...
```

After that, Pulp Operator will automatically update the `settings.py` config file and redeploy pulpcore pods to get the new configuration.

### Configure AWS S3 Storage

#### Prerequisites
* To configure Pulp with AWS S3 as a storage backend, the first thing to do is create a [S3 Bucket](https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-bucket.html) to store the objects.
* After configuring a `S3 Bucket` take a note of the [AWS credentials](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)

After performing all the prerequisites, create a `Secret` with them:
```
$ PULP_NAMESPACE='my-pulp-namespace'
$ S3_ACCESS_KEY_ID='my-aws-access-key-id'
$ S3_SECRET_ACCESS_KEY='my-aws-secret-access-key'
$ S3_BUCKET_NAME='pulp3'
$ S3_REGION='us-east-1'

$ kubectl -n $PULP_NAMESPACE apply -f- <<EOF
apiVersion: v1
kind: Secret
metadata:
  name: 'test-s3'
stringData:
  s3-access-key-id: $S3_ACCESS_KEY_ID
  s3-secret-access-key: $S3_SECRET_ACCESS_KEY
  s3-bucket-name: $S3_BUCKET_NAME
  s3-region: $S3_REGION
EOF
```
If you want to use a custom S3-compatible endpoint, you can use it by specifying the endpoint 
within the secret data as `s3-endpoint`.
In this case `s3-region` does not need to be specified and is ignored.

Now configure `Pulp CR` with the secret created:
```
$ kubectl -n $PULP_NAMESPACE edit pulp
...
spec:
  object_storage_s3_secret: test-s3
...
```

After that, Pulp Operator will automatically update the `settings.py` config file and redeploy pulpcore pods to get the new configuration.
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/telemetry.md
`````markdown
# Enable metrics collection

!!! info
    The following steps were tested **only in OpenShift** environments.  
    For other kubernetes distributions (*eks*, *minikube*, *kind* ,etc) the instructions
    can be different and were not tested by Pulp team yet.

Pulp operator allows to enable Pulp metrics collection using the [OpenTelemetry Framework](https://opentelemetry.io/) and exposing them to Prometheus.

### *Prerequisites*

* the [monitoring for user-defined projects](https://docs.openshift.com/container-platform/4.13/monitoring/enabling-monitoring-for-user-defined-projects.html) should be enabled
* a [ServiceMonitor](https://docs.openshift.com/container-platform/4.13/monitoring/managing-metrics.html#specifying-how-a-service-is-monitored_managing-metrics) resource should be available

Example of a `ServiceMonitor`:
```yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    k8s-app: prometheus-example-monitor
  name: prometheus-example-monitor
spec:
  endpoints:
  - interval: 30s
    port: otel-8889
    scheme: http
  selector:
    matchLabels:
      otel: ""
```

## Configure Pulp CR to enable telemetry

To enable telemetry, configure Pulp operator CR with the following fields:
```yaml
...
spec:
  telemetry:
    enabled: true
...
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/configurations/unmanaged.md
`````markdown
# Disable the Operator

Sometimes we need to stop the Operator reconciliation process.  
An example of such situation is when troubleshooting and would like
to test different configurations without modifying Pulp CR.

Setting the Operator as `unmanaged` will stop all Operator's tasks, which means no
more reconciliation and/or reprovisioning of objects. It is like disabling the Operator.

!!! note
    Pulp cluster will keep running even if the Operator is `unmanaged`, but no new modification
    done on Pulp CR will reflect in Pulp objects.


## Set the Operator to the unmanaged mode

To set the Operator as unmanaged update Pulp CR:
```
...
spec:
  unmanaged: true
...
```

From now on:

* any modification done on [objects managed](/pulp_operator/faq/#which-resources-are-managed-by-the-operator) by the Operator will not be reconciled
* any removed object - [managed](/pulp_operator/faq/#which-resources-are-managed-by-the-operator) by the Operator -  will not be reprovisioned



## Set the Operator back to the managed mode

To set the Operator as managed again, just update Pulp CR:
```
...
spec:
  unmanaged: false
...
```

It is also possible to delete the `unmanaged` field, since the default value is false.

!!! Warning
    Putting back the Operator in a `managed` state will:

    * **overwrite** any modifications done while it was `unmanaged`
    * **reprovision** any object deleted while it was `unmanaged`
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/install/ha.md
`````markdown
# Highly Available Pulp


Pulp’s architecture is designed to offer scalability and high availability. You can scale Pulp’s architecture in whatever way suits your needs.

With Pulp, the more you increase your availability, you also increase your capability. The more `Pulpcore API` replicas you deploy, the more API requests you can serve. The more `Pulpcore content` replicas you deploy, the more binary data requests you can serve. The more `Pulpcore workers` you start, the higher the tasking (syncing, publishing) throughput you deployment can handle.

You are free to, for example, deploy all of the components onto separate nodes, deploy multiple `Pulpcore API`, `content` serving application, `Pulpcore worker` services on a single node, as long as they can communicate with one another, there are no limits.


## Pre-requisites

Any service which Pulp Operator **does not** deploy in a highly available deployment, is an external service.
The following services are considered external:

* Database
* Cache
* Shared/Object storage

### Database

For high availability deployments, you will need to configure a clustered PostgreSQL. There are very good operators to deploy a clustered PostgreSQL and cloud databases (like AWS RDS).
After deploying the database follow the steps from [Configuring Pulp Operator to use an external PostgreSQL installation](https://docs.pulpproject.org/pulp_operator/configuring/database/#configuring-pulp-operator-to-use-an-external-postgresql-installation) to set Pulp CR with it.

### Cache

Redis helps to increase the speed at which the content app caches information about requests. This cache makes answering subsequent content-app requests easier. However, it’s optional, you are free not to use it. If it fails, Pulp will continue to work.
After deploying a clustered Redis follow the steps from [Configuring Pulp Operator to use an external Redis installation](https://docs.pulpproject.org/pulp_operator/configuring/cache/#configuring-pulp-operator-to-use-an-external-redis-installation) to set Pulp CR with it.

### Storage Backend

Pulp requires a storage backend, such as a filesystem like NFS, Samba or cloud storage, to read and write data that is then shared between Pulpcore processes. Follow the steps from [Pulp Operator storage configuration](https://docs.pulpproject.org/pulp_operator/configuring/storage/) to configure Pulp CR with the storage backend.


## Scaling Pulpcore Pods

It is possible to modify the number of `Pulpcore API`, `content`, and `worker` Pod replicas to, for example, spread the load among different Pods or avoid disruption in case of a Pod failure.
To change the number of replicas of each component, update the `.spec.<component>.replicas` field(s) from Pulp CR:
```yaml
spec:
  api:
    replicas: 3
  content:
    replicas: 3
  worker:
    replicas: 3
```

## Affinity Rules

Pulp Operator can define a group of affinity scheduling rules. With affinity rules it is possible to set constrains like in which node a pod should run (like in `nodeSelectors`) or inter pod affinity/anti-affinity to define if Pods should/should not run in the same node that another Pod with a defined label is running.  
To configure an affinity rule, update the `spec.<component>.affinity` field(s) from Pulp CR. In the following example we are configuring Pulp Operator to avoid deploying the same `Pulpcore` component in nodes that have different values of `topology.kubernetes.io/zone` label (`pulp-api-1` would run in a node with label `topology.kubernetes.io/zone: us-east-1a`, `pulp-api-2` in `topology.kubernetes.io/zone: us-east-1b`, and `pulp-api-3` in `topology.kubernetes.io/zone: us-east-1c`):
```yaml
spec:
  api:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/component
                operator: In
                values:
                - api
            topologyKey: topology.kubernetes.io/zone
  content:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/component
                operator: In
                values:
                - content
            topologyKey: topology.kubernetes.io/zone
  worker:
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/component
                operator: In
                values:
                - worker
            topologyKey: topology.kubernetes.io/zone
```

!!! note
    The `topologyKey` should match the labels from the nodes in which the pods should be co-located(affinity) or **not** co-located(anti-affinity).



* Check the official k8s documentation for more information about kubernetes affinity rules: [https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node).
* For more information on how to configure affinity rules in Pulp Operator check: [https://docs.pulpproject.org/pulp_operator/configuring/podPlacement/](https://docs.pulpproject.org/pulp_operator/configuring/podPlacement/)



## PDB (Pod Disruption Budget)

"*Kubernetes offers features to help you run highly available applications even when you introduce frequent voluntary disruptions.
As an application owner, you can create a PodDisruptionBudget (PDB) for each application. A PDB limits the number of Pods of a replicated application that are down simultaneously from voluntary disruptions.*" [#pod-disruption-budgets](https://kubernetes.io/docs/concepts/workloads/pods/disruptions/#pod-disruption-budgets)

Suppose that you are in the middle of a critical task (repo sync, upgrade, migration, etc) and you don’t want it to be interrupted, meaning, no running `API` or `content` pod should be deleted even if a cluster admin tries to put a node in maintenance mode or drain the node. For this we can use PDB:
```yaml
spec:
  api:
    replicas: 3
    pdb:
      minAvailable: 3
  content:
    replicas: 3
    pdb:
      maxUnavailable: 0
  worker:
    replicas: 2
    minAvailable: 1
```

!!! note
    You don't need to specify the `PDB` pod label selector, the operator will add it automatically based on the `spec.{api,worker,content}` field.

!!! warning
    Make sure you know what you are doing before configuring PDB. If not configured correctly it can cause unexpected behavior, like getting a node in a hang state during maintenance (node drain) or cluster upgrade.

* Check the official k8s documentation for more information about kubernetes PDB: [https://kubernetes.io/docs/concepts/workloads/pods/disruptions/#pod-disruption-budgets](https://kubernetes.io/docs/concepts/workloads/pods/disruptions/#pod-disruption-budgets).
* For more information on how to configure PDB in Pulp Operator check: [https://docs.pulpproject.org/pulp_operator/configuring/pdb/](https://docs.pulpproject.org/pulp_operator/configuring/pdb/)

## Rolling Update Deployment Strategy

Suppose that a new image of `Pulpcore` is released and you want to use it. To update the `Pulpcore` image version deployed by Pulp Operator (`.spec.image_version` field) with no downtime, it is possible to set the `Deployment Strategy` as `RollingUpdate` (default value if none provided).  

For example, if we set the `.spec.strategy` to `RollingUpdate` and `maxUnavailable` to 50%, if we change the `.spec.image_version` from *3.32* to *3.33*, kubernetes will keep half of the replicas running and reprovision the other half with the new image. When the new images get into a READY state it will start to redeploy the older pods, executing the upgrade with no downtime.
Example of configuration:
```yaml
spec:
  api:
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 50%
  content:
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxUnavailable: 50%
```



!!! warning
    If the `Deployment.Strategy` is set to `Recreate`, kubernetes will ensure that all pods are `Terminated` before starting the new replicas, which will cause downtime during a deployment rollout.


* Check the official k8s documentation for more information about `Deployment Strategy`: [https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy).

## Node Selector

The `Pulp workers` are part of the tasking system. Because syncing large amounts of content takes time, a lot of the work in Pulp runs longer than is suitable for webservers. You can deploy as many workers as you need. Since we can scale up/down `Pulpcore Worker` pods on demand, it is possible to configure node selector to deploy worker pods in spot instances, for example:

```yaml
# is_spot_instance is a node label that you should manually set to the expected nodes
spec:
  worker:
    node_selector:
      is_spot_instance: "true"
```

Another example of usage of `nodeSelectors` is to schedule Pulp pods in specific nodes, like run `API` pods on nodes with `beta.kubernetes.io/instance-type=t2.medium` label and `content` pods on `beta.kubernetes.io/instance-type=c7g.2xlarge`.

* Check the official k8s documentation for more information on `node labels` and `nodeSelector`: [https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#built-in-node-labels](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#built-in-node-labels)
* For more information on how to configure `nodeSelector` in Pulp Operator check: [https://docs.pulpproject.org/pulp_operator/configuring/podPlacement/](https://docs.pulpproject.org/pulp_operator/configuring/podPlacement/)

## Single-shot Script

The following script consolidates the HA features present in this doc and will deploy the following components:

* a `Secret` with the information to connect to a running PostgreSQL
* a `Secret` with the object storage (S3) credentials
* a `Secret` with the information to connect to a running Redis 
* an example of `Pulp CR` to deploy a highly available instance of Pulp

!!! warning
    This script should be used as an example only!

```sh
#!/bin/bash

kubectl config set-context --current --namespace pulp

kubectl apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
  name: external-database
stringData:
  POSTGRES_HOST: my-clustered-postgres-host.example.com
  POSTGRES_PORT: '5432'
  POSTGRES_USERNAME: 'pulp'
  POSTGRES_PASSWORD: 'password'
  POSTGRES_DB_NAME: 'pulp'
  POSTGRES_SSLMODE: 'prefer'
EOF

kubectl apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
  name: pulp-object-storage
stringData:
  s3-access-key-id: my-object-storage-key-id
  s3-secret-access-key: my-object-storage-access-key
  s3-bucket-name: 'pulp3'
  s3-region: us-east-1
EOF

kubectl apply -f-<<EOF
apiVersion: v1
kind: Secret
metadata:
  name: external-redis
stringData:
  REDIS_HOST: my-redis-host.example.com
  REDIS_PORT: '6379'
  REDIS_PASSWORD: ""
  REDIS_DB: ""
EOF

kubectl apply -f-<<EOF
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: Pulp
metadata:
  name: test-pulp-ha
spec:
  object_storage_s3_secret: pulp-object-storage
  database:
    external_db_secret: external-database
  cache:
    enabled: true
    external_cache_secret: external-redis
  api:
    replicas: 6
    strategy:
      rollingUpdate:
        maxUnavailable: 30%
      type: RollingUpdate
    pdb:
      minAvailable: 3
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/component
                operator: In
                values:
                - api
            topologyKey: topology.kubernetes.io/zone
  content:
    replicas: 6
    pdb:
      maxUnavailable: 50%
    strategy:
      rollingUpdate:
        maxUnavailable: 30%
      type: RollingUpdate
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/component
                operator: In
                values:
                - content
            topologyKey: topology.kubernetes.io/zone
  worker:
    pdb:
      minAvailable: 2
    replicas: 6
    node_selector:
      is_spot_instance: "true"
  web:
    replicas: 1
EOF
```
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/install/helm.md
`````markdown
# Install Pulp Operator with Helm

!!! warning
    This installation method is still under development!

### *Prerequisites*
* [Helm cli](https://helm.sh/docs/intro/install/) installed


### Install pulp-operator

* Add `pulp-operator` Helm repository:
```
helm repo add pulp-operator https://github.com/pulp/pulp-k8s-resources/raw/main/helm-charts/ --force-update
```

* [**optional**] Create a namespace to run `pulp-operator`:
```
kubectl create ns pulp
kubectl config set-context --current --namespace pulp
```

* Install `pulp-operator`:
```
helm -n pulp install pulp pulp-operator/pulp-operator
```


### Deploy Pulp

After installing `pulp-operator` we need to create a `Pulp CR` with the configurations to deploy `Pulp`.  
For example:
```
$ oc apply -f- <<EOF
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: Pulp
metadata:
  name: pulp
  namespace: pulp
spec:
  api:
    replicas: 1
  content:
    replicas: 1
  worker:
    replicas: 1
EOF
```

See [Custom Resources](/pulp_operator/pulp/) for more information about the available fields of `Pulp CR` or check our [list of samples](https://github.com/pulp/pulp-operator/tree/main/config/samples).
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/install/ocp.md
`````markdown
# Install Pulp Operator in OpenShift environments

Cluster administrators can use `OperatorGroups` to allow regular users to install Operators.  
To do so, as a `cluster-admin`, create an `OperatorGroup` in the namespace where regular
users would be able to install Pulp. For example:
```
$ oc apply -f- <<EOF
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: pulp-operator-group
  namespace: pulp
spec:
  targetNamespaces:
  - pulp
EOF
```

See OpenShift official documentation for more information: [Operator Groups](https://docs.openshift.com/container-platform/latest/operators/understanding/olm/olm-understanding-operatorgroups.html#olm-understanding-operatorgroups)


### Install Pulp Operator as a regular user

If the `OperatorGroup` is already present in the namespace, a user with `edit` or `admin` role will be able to install Pulp operator:
```
$ oc apply -f- <<EOF
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  labels:
    operators.coreos.com/pulp-operator.pulp: ""
  name: pulp-operator
  namespace: pulp
spec:
    channel: beta
    installPlanApproval: Automatic
    name: pulp-operator
    source: community-operators
    sourceNamespace: openshift-marketplace
    startingCSV: pulp-operator.v1.0.0-alpha.4
EOF
```

!!! note

    Role-based access control (RBAC) for Subscription objects is automatically granted to every user with the edit or admin role in a namespace. However, RBAC does not exist on OperatorGroup objects; this absence is what prevents regular users from installing Operators. Pre-installing Operator groups is effectively what gives installation privileges.  
    See OpenShift official documentation for more information: [Understanding Operator installation policy](https://docs.openshift.com/container-platform/latest/operators/admin/olm-creating-policy.html#olm-policy-understanding_olm-creating-policy)



### Deploy Pulp Operator

After configuring the `Subscription` the only remaining step is to configure `Pulp CR`.
For example:
```
$ oc apply -f- <<EOF
apiVersion: repo-manager.pulpproject.org/v1beta2
kind: Pulp
metadata:
  name: pulp
  namespace: pulp
spec:
  api:
    replicas: 1
  content:
    replicas: 1
  worker:
    replicas: 1
EOF
```

See [Custom Resources](/pulp_operator/pulp/) for more information about the available fields of `Pulp CR` or check our [list of samples](https://github.com/pulp/pulp-operator/tree/main/config/samples).


## Install multiple instances of Pulp

To deploy multiple instances of Pulp in different namespaces, repeat the following steps in each namespace where Pulp should be installed:

* (as a `cluster-admin`) create an [`OperatorGroup`](/pulp_operator/install/install/)
* (as a `regular user`) create a [`Subscription`](#installing-pulp-operator-as-a-regular-user)
* (as a `regular-user`) [deploy the operator](#deploying-pulp-operator)
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/troubleshoot/gatherData.md
`````markdown
# Gather data about Pulp installation

A practical way to collect information from Pulp operator is by running *[kubectl cluster-info](https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#cluster-info)* or *[oc adm inspec](https://docs.openshift.com/container-platform/4.10/support/gathering-cluster-data.html)* commands.

They can gather outputs like deployment spec, pod logs, service spec, etc with a single command.

!!! note
    Make sure to obfuscate sensitive data when running `oc adm inspect` before sharing them.


## Gather data on Kubernetes clusters

* run `cluster-info`
~~~
$ PULP_NAMESPACE=pulp
$ kubectl cluster-info dump --namespaces=$PULP_NAMESPACE --output-directory=/tmp/cluster-info
$ kubectl -n $PULP_NAMESPACE get pulp -ojson > /tmp/cluster-info/pulp.json
~~~

* create a tar file to share the data
~~~
$ tar cvaf cluster-info.tar.gz /tmp/cluster-info/
~~~

## Gather data on OpenShift clusters

* run `oc adm inspect`
~~~
$ PULP_NAMESPACE=pulp
$ oc adm inspect ns/$PULP_NAMESPACE --dest-dir=/tmp/adm-inspect
$ oc -n $PULP_NAMESPACE get pulp -ojson > /tmp/adm-inspect/pulp.json
~~~

* remove sensitive information
~~~
$ rm /tmp/adm-inspect/namespaces/$PULP_NAMESPACE/core/secrets.yaml
~~~

* create a tar file to share the data
~~~
$ tar cvaf adm-inspect.tar.gz /tmp/adm-inspect/
~~~
`````

## File: pulp-docs/pulp-operator/docs/admin/guides/troubleshoot/install.md
`````markdown
# Troubleshoot installations


In a successful installation, all pods should be in a `READY` state:
```bash
$ kubectl get pods
NAME                                    READY   STATUS    RESTARTS      AGE
pulp-api-59748b555f-wkqbb               1/1     Running   0             18h
pulp-content-545fb4d577-gdpcq           1/1     Running   0             18h
pulp-database-0                         1/1     Running   0             18h
pulp-redis-7c57966b76-kq4lf             1/1     Running   0             18h
pulp-web-548f9ff866-rwf9f               1/1     Running   0             18h
pulp-worker-75fb775dd7-5pgk7            1/1     Running   0             18h
```

Checking the operator logs, we should see the following message (indicating that there is no pending tasks):
```
$ kubectl logs deployment/pulp-operator-controller-manager
...
2022-09-16T13:53:28Z	INFO	pulp/controller.go:238	Operator tasks synced
...
```

In addition to the logs, another way to follow the operator progress is by checking operator status:
```json
[
  {
    "lastTransitionTime": "2022-09-20T11:59:16Z",
    "message": "All tasks ran successfully",
    "reason": "OperatorFinishedExecution",
    "status": "True",
    "type": "Pulp-Operator-Finished-Execution"
  },
  {
    "lastTransitionTime": "2022-09-20T11:59:16Z",
    "message": "All API tasks ran successfully",
    "reason": "ApiTasksFinished",
    "status": "True",
    "type": "Pulp-API-Ready"
  },
  {
    "lastTransitionTime": "2022-09-20T11:56:33Z",
    "message": "All Database tasks ran successfully",
    "reason": "DatabaseTasksFinished",
    "status": "True",
    "type": "Pulp-Database-Ready"
  },
  {
    "lastTransitionTime": "2022-09-20T11:59:00Z",
    "message": "All Content tasks ran successfully",
    "reason": "ContentTasksFinished",
    "status": "True",
    "type": "Pulp-Content-Ready"
  },
  {
    "lastTransitionTime": "2022-09-20T11:56:34Z",
    "message": "All Worker tasks ran successfully",
    "reason": "WorkerTasksFinished",
    "status": "True",
    "type": "Pulp-Worker-Ready"
  },
  {
    "lastTransitionTime": "2022-09-20T11:59:16Z",
    "message": "All Web tasks ran successfully",
    "reason": "WebTasksFinished",
    "status": "True",
    "type": "Pulp-Web-Ready"
  }
]
```

From Pulp api pods we could also check cluster's health:
```json
$ kubectl exec deployment/example-pulp-api -- curl -s localhost:24817/pulp/api/v3/status/|jq
{
  "versions": [ ...
  ],
  "online_workers": [   <-------------- we should see the worker pods listed here
    {
      "pulp_href": "/pulp/api/v3/workers/70e84b43-5a31-431b-87d6-0ee1ea664355/",
      "pulp_created": "2022-09-16T12:52:22.053237Z",
      "name": "13@example-pulp-worker-75fb775dd7-5pgk7",
      "last_heartbeat": "2022-09-16T14:00:55.022812Z",
      "current_task": null
    }
  ],
  "online_content_apps": [     <-------------- we should see the content pods listed here
    {
      "name": "12@example-pulp-content-545fb4d577-gdpcq",
      "last_heartbeat": "2022-09-16T14:01:03.023915Z"
    }
  ],
  "database_connection": {
    "connected": true     <------- database_connection must be true
  },
  "redis_connection": {
    "connected": true      <------- redis_connection is optional (cache is not mandatory)
  },
  "storage": {
    "total": 32737570816,
    "used": 25801592832,
    "free": 6935977984
  }
}
```

Once a problem is identified and more help is needed, please follow the steps from *["Gathering data about Pulp installation"](gatherData.md)* documentation to share the installation data.
`````

## File: pulp-docs/pulp-operator/docs/admin/learn/basic-concepts.md
`````markdown
# Basic Concepts

## Service Types

Pulp operator works with three different types of service containers: the *Operator* itself, the *Main* service and the *Web* service.

It is manually built and [hosted on quay.io](https://quay.io/repository/pulp/pulp-operator).
If you want to know more about the underlying container images, visit the [Pulp Container Images](site:pulp-operator/docs/admin/reference/container/) section.

|           | Operator | Main | Web |
| --------- | -------- | ---- | --- |
| **Image** | [pulp-operator](https://quay.io/repository/pulp/pulp-operator?tab=tags) |[pulp-minimal](https://quay.io/repository/pulp/pulp-minimal?tab=tags) | [pulp-web](https://quay.io/repository/pulp/pulp-web?tab=tags) |
| **Image** | [pulp-operator](https://quay.io/repository/pulp/pulp-operator?tab=tags) |[galaxy-minimal](https://quay.io/repository/pulp/galaxy-minimal?tab=tags) | [galaxy-web](https://quay.io/repository/pulp/galaxy-web?tab=tags) |

## Custom Resource Definitions

Pulp Operator currently provides three different kinds of [Custom Resources](https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-resources): Pulp, Pulp Backup and Pulp Restore.

- **Pulp**: Manages the Pulp application and its deployments, services, etc.
- **Pulp Backup**: Manages pulp backup
- **Pulp Restore**: Manages the restoration of a pulp backup

## Architecture

Some components, like `pulp-web`, are not mandatory and depending on how `Pulp CR` is configured
the operator will take care of configuring the other resources that depend on them.

<figure markdown="span">
  ![Pulp Architecture](site:pulp-operator/docs/assets/pulp_architecture.png)
  <figcaption>Overview of a common Pulp Operator installation.</figcaption>
</figure>

## Further Reading

- [Learn more about the Pulp Architecture](site:pulpcore/docs/admin/learn/architecture/).
`````

## File: pulp-docs/pulp-operator/docs/admin/reference/custom_resources/backup.md
`````markdown
### Custom Resources

* [PulpBackup](#pulpbackup)

### Sub Resources

* [PulpBackupList](#pulpbackuplist)
* [PulpBackupSpec](#pulpbackupspec)
* [PulpBackupStatus](#pulpbackupstatus)

#### PulpBackup

PulpBackup is the Schema for the pulpbackups API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpBackupSpec](#pulpbackupspec) | false |
| status |  | [PulpBackupStatus](#pulpbackupstatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpBackupList

PulpBackupList contains a list of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][PulpBackup](#pulpbackup) | true |

[Back to Custom Resources](#custom-resources)

#### PulpBackupSpec

PulpBackupSpec defines the desired state of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| deployment_name | Name of Pulp CR to be backed up | string | true |
| backup_pvc | Name of the PVC to be used for storing the backup | string | true |
| backup_pvc_namespace | Namespace PVC is in | string | true |
| backup_storage_requirements | Storage requirements for the backup | string | true |
| backup_storage_class | Storage class to use when creating PVC for backup | string | true |
| admin_password_secret | Secret where the administrator password can be found | string | false |
| postgres_configuration_secret | Secret where the database configuration can be found | string | true |
| pulp_secret_key | Secret where the Django SECRET_KEY configuration can be found | string | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |

[Back to Custom Resources](#custom-resources)

#### PulpBackupStatus

PulpBackupStatus defines the observed state of PulpBackup

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| deploymentName | Name of the deployment backed up | string | true |
| backupClaim | The PVC name used for the backup | string | true |
| backupNamespace | The namespace used for the backup claim | string | true |
| backupDirectory | The directory data is backed up to on the PVC | string | true |
| adminPasswordSecret | Administrator password secret used by the deployed instance | string | true |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/docs/admin/reference/custom_resources/repo_manager.md
`````markdown
### Custom Resources

* [Pulp](#pulp)

### Sub Resources

* [Api](#api)
* [Cache](#cache)
* [Content](#content)
* [Database](#database)
* [LDAP](#ldap)
* [PulpContainer](#pulpcontainer)
* [PulpJob](#pulpjob)
* [PulpList](#pulplist)
* [PulpSpec](#pulpspec)
* [PulpStatus](#pulpstatus)
* [Telemetry](#telemetry)
* [Web](#web)
* [Worker](#worker)

#### Api

Api defines desired state of pulpcore-api resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-api replicas. Default: 1 | int32 | true |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| gunicorn_timeout | The timeout for the gunicorn process. Default: 90 | int | false |
| gunicorn_workers | The number of gunicorn workers to use for the api. Default: 2 | int | false |
| resource_requirements | Resource requirements for the pulp api container. | corev1.ResourceRequirements | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-api container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the api deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Cache

Cache defines desired state of redis resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| external_cache_secret | Name of the secret with the parameters to connect to an external Redis cluster | string | false |
| enabled | Defines if cache should be enabled. Default: true | bool | false |
| redis_image | The image name for the redis image. Default: \"redis:latest\" | string | false |
| redis_storage_class | Storage class to use for the Redis PVC | string | false |
| redis_port | The port that will be exposed by Redis Service. [default: 6379] | int | false |
| redis_resource_requirements | Resource requirements for the Redis container | corev1.ResourceRequirements | false |
| pvc | PersistenVolumeClaim name that will be used by Redis pods If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| deployment_annotations | Annotations for the cache deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Content

Content defines desired state of pulpcore-content resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-content replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-content container | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| gunicorn_timeout | The timeout for the gunicorn process. Default: 90 | int | false |
| gunicorn_workers | The number of gunicorn workers to use for the api. Default: 2 | int | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-content container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the content deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Database

Database defines desired state of postgres

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| external_db_secret | Secret name with the configuration to use an external database | string | false |
| version | PostgreSQL version [default: \"13\"] | string | false |
| postgres_port | PostgreSQL port. Default: 5432 | int | false |
| postgres_ssl_mode | Configure PostgreSQL connection sslmode option. Default: \"prefer\" | string | false |
| postgres_image | PostgreSQL container image. Default: \"postgres:13\" | string | false |
| postgres_extra_args | Arguments to pass to postgres process | []string | false |
| postgres_data_path | Registry path to the PostgreSQL container to use. Default: \"/var/lib/postgresql/data/pgdata\" | string | false |
| postgres_initdb_args | Arguments to pass to PostgreSQL initdb command when creating a new cluster. Default: \"--auth-host=scram-sha-256\" | string | false |
| postgres_host_auth_method | PostgreSQL host authentication method. Default: \"scram-sha-256\" | string | false |
| postgres_resource_requirements | Resource requirements for the database container. | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the database pod. | map[string]string | false |
| tolerations | Node tolerations for the database pod. | []corev1.Toleration | false |
| postgres_storage_requirements | Temporarily modifying it as a string to avoid an issue with backup and json.Unmarshal when set as resource.Quantity and no value passed on pulp CR, during backup steps json.Unmarshal is settings it with \"0\" | string | false |
| postgres_storage_class | Name of the StorageClass required by the claim. | *string | false |
| pvc | PersistenVolumeClaim name that will be used by database pods If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |

[Back to Custom Resources](#custom-resources)

#### LDAP

LDAP defines the ldap resources used by pulpcore containers to integrate Pulp with LDAP authentication

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| config | The name of the Secret with ldap config. | string | false |
| ca | The name of the Secret with the CA chain to connect to ldap server. | string | false |

[Back to Custom Resources](#custom-resources)

#### Pulp

Pulp is the Schema for the pulps API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpSpec](#pulpspec) | false |
| status |  | [PulpStatus](#pulpstatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpContainer

PulpContainer defines configuration of the \"auxiliary\" containers that run in pulpcore pods

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| image | The image name for the container. By default, if not provided, it will use the same image from .Spec.Image. WARN: defining a different image than the one used by API pods can cause unexpected behaviors! | string | false |
| resource_requirements | Resource requirements for pulpcore aux container. | corev1.ResourceRequirements | false |
| env_vars | Environment variables to add to the container | []corev1.EnvVar | false |

[Back to Custom Resources](#custom-resources)

#### PulpJob

PulpJob defines the jobs used by pulpcore containers to run single-shot administrative tasks

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| container |  | [PulpContainer](#pulpcontainer) | false |

[Back to Custom Resources](#custom-resources)

#### PulpList

PulpList contains a list of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][Pulp](#pulp) | true |

[Back to Custom Resources](#custom-resources)

#### PulpSpec

PulpSpec defines the desired state of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| unmanaged | Define if the operator should stop managing Pulp resources. If set to true, the operator will not execute any task (it will be \"disabled\"). Default: false | bool | false |
| enable_debugging | By default Pulp logs at INFO level, but enabling DEBUG logging can be a helpful thing to get more insight when things don’t go as expected. Default: false | bool | false |
| file_storage_size | The size of the file storage; for example 100Gi. This field should be used only if file_storage_storage_class is provided | string | false |
| file_storage_access_mode | The file storage access mode. This field should be used only if file_storage_storage_class is provided | string | false |
| file_storage_storage_class | Storage class to use for the file persistentVolumeClaim | string | false |
| object_storage_azure_secret | The secret for Azure compliant object storage configuration. | string | false |
| object_storage_s3_secret | The secret for S3 compliant object storage configuration. | string | false |
| pvc | PersistenVolumeClaim name that will be used by Pulp pods. If defined, the PVC must be provisioned by the user and the operator will only configure the deployment to use it | string | false |
| db_fields_encryption_secret | Secret where the Fernet symmetric encryption key is stored. Default: <operators's name>-\"-db-fields-encryption\" | string | false |
| signing_secret | Name of the Secret where the gpg key is stored. | string | false |
| signing_scripts | Name of the Secret where the signing scripts are stored. | string | false |
| ingress_type | The ingress type to use to reach the deployed instance. Default: none (will not expose the service) | string | false |
| ingress_annotations | Annotations for the Ingress | map[string]string | false |
| ingress_class_name | IngressClassName is used to inform the operator which ingressclass should be used to provision the ingress. Default: \"\" (will use the default ingress class) | string | false |
| is_nginx_ingress | Define if the IngressClass provided has Nginx as Ingress Controller. If the Ingress Controller is not nginx the operator will automatically provision `pulp-web` pods to redirect the traffic. If it is a nginx controller the traffic will be forwarded to api and content pods. This variable is a workaround to avoid having to grant a ClusterRole (to do a get into the IngressClass and verify the controller). Default: false | bool | false |
| ingress_host | Ingress DNS host | string | false |
| ingress_tls_secret | Ingress TLS secret | string | false |
| route_host | Route DNS host. Default: <operator's name> + \".\" + ingress.Spec.Domain | string | false |
| route_labels | RouteLabels will append custom label(s) into routes (used by router shard routeSelector). Default: {\"pulp_cr\": \"<operator's name>\", \"owner\": \"pulp-dev\" } | map[string]string | false |
| route_annotations | RouteAnnotations will append custom annotation(s) into routes (used by router shard routeSelector). | map[string]string | false |
| route_tls_secret | Name of the secret with the certificates/keys used by route encryption | string | false |
| nodeport_port | Provide requested port value | int32 | false |
| haproxy_timeout | The timeout for HAProxy. Default: \"180s\" | string | false |
| nginx_client_max_body_size | The client max body size for Nginx Ingress. Default: \"10m\" | string | false |
| nginx_proxy_body_size | The proxy body size for Nginx Ingress. Default: \"0\" | string | false |
| nginx_proxy_read_timeout | The proxy read timeout for Nginx Ingress. Default: \"120s\" | string | false |
| nginx_proxy_connect_timeout | The proxy connect timeout for Nginx Ingress. Default: \"120s\" | string | false |
| nginx_proxy_send_timeout | The proxy send timeout for Nginx Ingress. Default: \"120s\" | string | false |
| container_token_secret | Secret where the container token certificates are stored. Default: <operator's name> + \"-container-auth\" | string | false |
| container_auth_public_key_name | Public Key name from `<operator's name> + \"-container-auth-certs\"` Secret. Default: \"container_auth_public_key.pem\" | string | false |
| container_auth_private_key_name | Private Key name from `<operator's name> + \"-container-auth-certs\"` Secret. Default: \"container_auth_private_key.pem\" | string | false |
| image | The image name (repo name) for the pulp image. Default: \"quay.io/pulp/pulp-minimal:stable\" | string | false |
| image_version | The image version for the pulp image. Default: \"stable\" | string | false |
| inhibit_version_constraint | Relax the check of image_version and image_web_version not matching. Default: \"false\" | bool | false |
| image_pull_policy | Image pull policy for container image. | string | false |
| api | Api defines desired state of pulpcore-api resources | [Api](#api) | true |
| database | Database defines desired state of postgres resources | [Database](#database) | false |
| content | Content defines desired state of pulpcore-content resources | [Content](#content) | false |
| worker | Worker defines desired state of pulpcore-worker resources | [Worker](#worker) | false |
| web | Web defines desired state of pulpcore-web (reverse-proxy) resources | [Web](#web) | false |
| cache | Cache defines desired state of redis resources | [Cache](#cache) | false |
| custom_pulp_settings | Name of the ConfigMap to define Pulp configurations not available through this CR. | string | false |
| image_web | The image name (repo name) for the pulp webserver image. Default: \"quay.io/pulp/pulp-web\" | string | false |
| image_web_version | The image version for the pulp webserver image. Default: \"stable\" | string | false |
| admin_password_secret | Secret where the administrator password can be found. Default: <operator's name> + \"-admin-password\" | string | false |
| image_pull_secrets | Image pull secrets for container images. Default: [] | []string | false |
| sa_annotations | ServiceAccount.metadata.annotations that will be used in Pulp pods. | map[string]string | false |
| sa_labels | ServiceAccount.metadata.labels that will be used in Pulp pods. | map[string]string | false |
| sso_secret | Secret where Single Sign-on configuration can be found | string | false |
| mount_trusted_ca | Define if the operator should or should not mount the custom CA certificates added to the cluster via cluster-wide proxy config. Default: false | bool | false |
| admin_password_job | Job to reset pulp admin password | [PulpJob](#pulpjob) | false |
| migration_job | Job to run django migrations | [PulpJob](#pulpjob) | false |
| signing_job | Job to store signing metadata scripts | [PulpJob](#pulpjob) | false |
| disable_migrations | Disable database migrations. Useful for situations in which we don't want to automatically run the database migrations, for example, during restore. | bool | false |
| pulp_secret_key | Name of the Secret to provide Django cryptographic signing. Default: \"pulp-secret-key\" | string | false |
| allowed_content_checksums | List of allowed checksum algorithms used to verify repository's integrity. Valid options: [\"md5\",\"sha1\",\"sha224\",\"sha256\",\"sha384\",\"sha512\"]. | []string | false |
| loadbalancer_protocol | Protocol used by pulp-web service when ingress_type==loadbalancer | string | false |
| loadbalancer_port | Port exposed by pulp-web service when ingress_type==loadbalancer | int32 | false |
| telemetry | Telemetry defines the OpenTelemetry configuration | [Telemetry](#telemetry) | false |
| ldap | LDAP defines the ldap resources used by pulpcore containers to integrate Pulp with LDAP authentication | [LDAP](#ldap) | false |
| ipv6_disabled | Disable ipv6 for pulpcore and pulp-web pods | *bool | false |

[Back to Custom Resources](#custom-resources)

#### PulpStatus

PulpStatus defines the observed state of Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| object_storage_azure_secret | The secret for Azure compliant object storage configuration. | string | false |
| object_storage_s3_secret | The secret for S3 compliant object storage configuration. | string | false |
| db_fields_encryption_secret | Secret where the Fernet symmetric encryption key is stored. | string | false |
| image | Name of pulp image deployed. | string | false |
| ingress_type | The ingress type to use to reach the deployed instance | string | false |
| ingress_class_name | IngressClassName is used to inform the operator which ingressclass should be used to provision the ingress. | string | false |
| container_token_secret | Secret where the container token certificates are stored. | string | false |
| admin_password_secret | Secret where the administrator password can be found | string | false |
| external_cache_secret | Name of the secret with the parameters to connect to an external Redis cluster | string | false |
| telemetry_enabled | Pulp metrics collection enabled | bool | false |
| pulp_secret_key | Name of the Secret to provide Django cryptographic signing. | string | false |
| allowed_content_checksums | List of allowed checksum algorithms used to verify repository's integrity. | string | false |
| last_deployment_update | Controller status to keep tracking of deployment updates | string | false |
| managed_cache_enabled | Cache deployed by pulp-operator enabled | bool | false |
| storage_type | Type of storage in use by pulpcore pods | string | false |

[Back to Custom Resources](#custom-resources)

#### Telemetry

Telemetry defines the configuration for OpenTelemetry used by Pulp

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| enabled | Enable Pulp Telemetry Default: false | bool | false |
| exporter_otlp_protocol | Defines the protocol used by the instrumentator to comunicate with the collector Default: http/protobuf | string | false |
| otel_collector_image | Defines the image to be used as collector | string | false |
| otel_collector_image_version | The image version for opentelemetry-collector image. Default: \"latest\" | string | false |
| resource_requirements | Resource requirements for the sidecar container. | corev1.ResourceRequirements | false |

[Back to Custom Resources](#custom-resources)

#### Web

Web defines desired state of pulpcore-web (reverse-proxy) resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-web replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-web container | corev1.ResourceRequirements | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| node_selector | NodeSelector for the Web pods. | map[string]string | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| service_annotations | Annotations for the service | map[string]string | false |
| tls_termination_mechanism | The secure TLS termination mechanism to use Default: \"edge\" | string | false |
| env_vars | Environment variables to add to pulpcore-web container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the web deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)

#### Worker

Worker defines desired state of pulpcore-worker resources

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| replicas | Size is the size of number of pulp-worker replicas. Default: 1 | int32 | true |
| resource_requirements | Resource requirements for the pulp-api container | corev1.ResourceRequirements | false |
| affinity | Affinity is a group of affinity scheduling rules. | *corev1.Affinity | false |
| node_selector | NodeSelector for the Pulp pods. | map[string]string | false |
| tolerations | Node tolerations for the Pulp pods. | []corev1.Toleration | false |
| topology_spread_constraints | Topology rule(s) for the pods. | []corev1.TopologySpreadConstraint | false |
| readinessProbe | Periodic probe of container service readiness. Container will be removed from service endpoints if the probe fails. | *corev1.Probe | false |
| livenessProbe | Periodic probe of container liveness. Container will be restarted if the probe fails. | *corev1.Probe | false |
| pdb | PodDisruptionBudget is an object to define the max disruption that can be caused to a collection of pods | *policy.PodDisruptionBudgetSpec | false |
| strategy | The deployment strategy to use to replace existing pods with new ones. | appsv1.DeploymentStrategy | false |
| init_container | InitContainer defines configuration of the init-containers that run in pulpcore pods | [PulpContainer](#pulpcontainer) | false |
| env_vars | Environment variables to add to pulpcore-worker container | []corev1.EnvVar | false |
| deployment_annotations | Annotations for the worker deployment | map[string]string | false |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/docs/admin/reference/custom_resources/restore.md
`````markdown
### Custom Resources

* [PulpRestore](#pulprestore)

### Sub Resources

* [PulpRestoreList](#pulprestorelist)
* [PulpRestoreSpec](#pulprestorespec)
* [PulpRestoreStatus](#pulprestorestatus)

#### PulpRestore

PulpRestore is the Schema for the pulprestores API

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ObjectMeta | false |
| spec |  | [PulpRestoreSpec](#pulprestorespec) | false |
| status |  | [PulpRestoreStatus](#pulprestorestatus) | false |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreList

PulpRestoreList contains a list of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| metadata |  | metav1.ListMeta | false |
| items |  | [][PulpRestore](#pulprestore) | true |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreSpec

PulpRestoreSpec defines the desired state of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| deployment_name | Name of Pulp CR to be restored | string | true |
| backup_name | Name of PulpBackup CR | string | true |
| backup_pvc | Name of the PVC to be restored from, set as a status found on the backup object (backupClaim) | string | true |
| backup_dir | Backup directory name, set as a status found on the backup object (backupDirectory) | string | true |
| keep_replicas | KeepBackupReplicasCount allows to define if the restore controller should restore the components with the same number of replicas from backup or restore only a single replica each. | bool | true |

[Back to Custom Resources](#custom-resources)

#### PulpRestoreStatus

PulpRestoreStatus defines the observed state of PulpRestore

| Field | Description | Scheme | Required |
| ----- | ----------- | ------ | -------- |
| conditions |  | []metav1.Condition | true |
| postgres_secret |  | string | true |

[Back to Custom Resources](#custom-resources)
`````

## File: pulp-docs/pulp-operator/docs/admin/reference/container.md
`````markdown
# Pulp Images

## Pulp

An all-in-one [pulp](https://github.com/pulp/pulpcore) image that can assume each of the following types of service:

- **pulpcore-api** - serves the Pulp(v3) API. The number of instances of this service should be scaled as demand requires.  _Administrators and users of all of the APIs put demand on this service_.


- **pulpcore-content** - serves content to clients. pulpcore-api redirects clients to pulpcore-content to download content. When content is being mirrored from a remote source, this service can download that content and stream it to the client the first time the content is requested. The number of instances of this service should be scaled as demand requires. _Content consumers put demands on this service_.


- **pulpcore-worker** - performs syncing, importing of content, and other asynchronous operations that require resource locking. The number of instances of this service should be scaled as demand requires. _Administrators and content importers put demands on this service_.


Currently built with the following plugins:

* [pulp_ansible](https://docs.pulpproject.org/pulp_ansible/)
* [pulp-certguard](https://docs.pulpproject.org/pulp_certguard/)
* [pulp_container](https://docs.pulpproject.org/pulp_container/)
* [pulp_deb](https://docs.pulpproject.org/pulp_deb/)
* [pulp_file](https://docs.pulpproject.org/pulp_file/)
* [pulp_python](https://docs.pulpproject.org/pulp_python/)
* [pulp_rpm](https://docs.pulpproject.org/pulp_rpm/)

### Tags

* `latest`: Built nightly, with master/main branches of each plugin.
* `stable`: Built on push, with latest released version of each plugin.
* `3.y.z`:  Pulpcore 3.y.z version and its compatible plugins.

[https://quay.io/repository/pulp/pulp?tab=tags](https://quay.io/repository/pulp/pulp?tab=tags)


## Pulp Web

An Nginx image based on [centos/nginx-116-centos7](https://hub.docker.com/r/centos/nginx-116-centos7),
with pulpcore and plugins specific configuration.

### Tags

* `latest`: Built nightly, with master/main branches of [pulpcore](https://github.com/pulp/pulpcore) and its plugins.
* `stable`: Built on push, with latest released version of each plugin.
* `3.y.z`:  Pulpcore 3.y.z version and its compatible plugins.

[https://quay.io/repository/pulp/pulp-web?tab=tags](https://quay.io/repository/pulp/pulp-web?tab=tags)


## Galaxy

An all-in-one [galaxy](https://github.com/ansible/galaxy_ng) image that can assume each of the following types of service:

- **pulpcore-api** - serves the Galaxy (v3) API. The number of instances of this service should be scaled as demand requires.  _Administrators and users of all of the APIs put demand on this service_.


- **pulpcore-content** - serves content to clients. pulpcore-api redirects clients to pulpcore-content to download content. When content is being mirrored from a remote source, this service can download that content and stream it to the client the first time the content is requested. The number of instances of this service should be scaled as demand requires. _Content consumers put demands on this service_.


- **pulpcore-worker** - performs syncing, importing of content, and other asynchronous operations that require resource locking. The number of instances of this service should be scaled as demand requires. _Administrators and content importers put demands on this service_.


### Tags

* `latest`: Built nightly, with master branch of [galaxy](https://github.com/ansible/galaxy_ng).
* `stable`: Built on push, with latest released version of galaxy.
* `4.y.z`:  Galaxy 4.y.z version.

[https://quay.io/repository/pulp/galaxy?tab=tags](https://quay.io/repository/pulp/galaxy?tab=tags)


## Galaxy Web

An Nginx image based on [centos/nginx-116-centos7](https://hub.docker.com/r/centos/nginx-116-centos7),
with galaxy specific configuration.

### Tags

* `latest`: Built nightly, with master branch of galaxy.
* `stable`: Built on push, with latest released version of galaxy.
* `4.y.z`:  Galaxy 4.y.z version.

[https://quay.io/repository/pulp/galaxy-web?tab=tags](https://quay.io/repository/pulp/galaxy-web?tab=tags)


## Pulp Operator

An image with the pulp operator binary.

### Tags

* `latest`: Built nightly, with main branch of [pulp-operator](https://github.com/pulp/pulp-operator).
* `0.y.z`:  Pulp Operator 0.y.z version.

[https://quay.io/repository/pulp/pulp-operator?tab=tags](https://quay.io/repository/pulp/pulp-operator?tab=tags)


## Builds

The images can be found [here](https://github.com/pulp/pulp-oci-images/tree/latest/images): [https://docs.pulpproject.org/pulp_oci_images/](https://docs.pulpproject.org/pulp_oci_images/)
`````

## File: pulp-docs/pulp-operator/docs/admin/tutorials/quickstart-kubernetes.md
`````markdown
# Quickstart with Kubernetes

## Basic Install

This Kubernetes Operator is meant to be deployed in your Kubernetes cluster(s) and can manage one or more Pulp instances in any namespace.

For testing purposes, the `pulp-operator` can be deployed on a [Minikube](https://minikube.sigs.k8s.io/docs/) cluster. Due to different OS and hardware environments, please refer to the official Minikube documentation for further information.

```
$ minikube start --vm-driver=docker --extra-config=apiserver.service-node-port-range=80-32000
😄  minikube v1.23.2 on Fedora 34
✨  Using the docker driver based on user configuration
👍  Starting control plane node minikube in cluster minikube
🚜  Pulling base image ...
🔥  Creating docker container (CPUs=2, Memory=7900MB) ...
🐳  Preparing Kubernetes v1.22.2 on Docker 20.10.8 ...
    ▪ apiserver.service-node-port-range=80-32000
    ▪ Generating certificates and keys ...
    ▪ Booting up control plane ...
    ▪ Configuring RBAC rules ...
🔎  Verifying Kubernetes components...
    ▪ Using image gcr.io/k8s-minikube/storage-provisioner:v5
🌟  Enabled addons: storage-provisioner, default-storageclass
💡  kubectl not found. If you need it, try: 'minikube kubectl -- get pods -A'
🏄  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default

```

Once Minikube is deployed, check if the node(s) and `kube-apiserver` communication is working as expected.

```
$ minikube kubectl -- get nodes
NAME       STATUS   ROLES                  AGE    VERSION
minikube   Ready    control-plane,master   113s   v1.22.2

$ minikube kubectl -- get pods -A
NAMESPACE       NAME                                        READY   STATUS      RESTARTS   AGE
kube-system   coredns-78fcd69978-fdm96           1/1     Running   0             94s
kube-system   etcd-minikube                      1/1     Running   0             107s
kube-system   kube-apiserver-minikube            1/1     Running   0             107s
kube-system   kube-controller-manager-minikube   1/1     Running   0             107s
kube-system   kube-proxy-5s54z                   1/1     Running   0             95s
kube-system   kube-scheduler-minikube            1/1     Running   0             107s
kube-system   storage-provisioner                1/1     Running   1 (62s ago)   106s
```

It is not required for `kubectl` to be separately installed since it comes already wrapped inside minikube. As demonstrated above, simply prefix `minikube kubectl --` before kubectl command, i.e. `kubectl get nodes` would become `minikube kubectl -- get nodes`

Let's create an alias for easier usage:

```
$ alias kubectl="minikube kubectl --"
```

Now you need to deploy Pulp Operator into your cluster. Clone this repo and `git checkout` the latest version from [https://github.com/pulp/pulp-operator/releases](https://github.com/pulp/pulp-operator/releases), and then run the following command:

```
$ export NAMESPACE=my-namespace
$ make deploy
cd config/manager && /usr/local/bin/kustomize edit set image controller=quay.io/pulp/pulp-operator:v0.5.0.dev
cd config/default && /usr/local/bin/kustomize edit set namespace pulp-operator-system
/usr/local/bin/kustomize build config/default | kubectl apply -f -
namespace/pulp-operator-system created
customresourcedefinition.apiextensions.k8s.io/pulpbackups.pulp.pulpproject.org created
customresourcedefinition.apiextensions.k8s.io/pulprestores.pulp.pulpproject.org created
customresourcedefinition.apiextensions.k8s.io/pulps.pulp.pulpproject.org created
serviceaccount/pulp-operator-sa created
role.rbac.authorization.k8s.io/pulp-operator-leader-election-role created
role.rbac.authorization.k8s.io/pulp-operator-proxy-role created
role.rbac.authorization.k8s.io/pulp-operator-pulp-manager-role created
clusterrole.rbac.authorization.k8s.io/pulp-operator-metrics-reader created
rolebinding.rbac.authorization.k8s.io/pulp-operator-leader-election-rolebinding created
rolebinding.rbac.authorization.k8s.io/pulp-operator-proxy-rolebinding created
rolebinding.rbac.authorization.k8s.io/pulp-operator-pulp-manager-rolebinding created
configmap/pulp-operator-pulp-manager-config created
service/pulp-operator-controller-manager-metrics-service created
deployment.apps/pulp-operator-controller-manager created
networkpolicy.networking.k8s.io/pulp-operator-allow-same-namespace created
```

Wait a bit and you should have the `pulp-operator` running:

```
$ kubectl get pods -n $NAMESPACE
NAME                                               READY   STATUS    RESTARTS   AGE
pulp-operator-controller-manager-8d8b6967f-6lspp   2/2     Running   0          11s
```

So we don't have to keep repeating `-n $NAMESPACE`, let's set the current namespace for `kubectl`:

```
$ kubectl config set-context --current --namespace=$NAMESPACE
```

Next, review `config/samples/pulpproject_v1beta1_pulp_cr.default.yaml`. If the variables' default values are not correct for your environment, copy to `config/samples/pulpproject_v1beta1_pulp_cr.yaml`, uncomment "spec:", and uncomment and adjust the variables.

Finally, use `kubectl` to create the pulp instance in your cluster:

```
$ kubectl apply -f config/samples/config/samples/pulpproject_v1beta1_pulp_cr.yaml
pulp.pulp.pulpproject.org/example-pulp created
```

After a few minutes, the new Pulp instance will be deployed. You can look at the operator pod logs in order to know where the installation process is at:

```
$ kubectl logs -f deployments/pulp-operator-controller-manager -c pulp-manager
```

After a few seconds, you should see the operator begin to create new resources:

```
$ kubectl get pods -l "app.kubernetes.io/managed-by=pulp-operator"
NAME                        READY   STATUS    RESTARTS   AGE
example-pulp-api-5bff7945fb-srfw7       0/1     Running   0             3m45s
example-pulp-content-7d86b44545-zrdpx   1/1     Running   0             3m22s
example-pulp-postgres-0                 1/1     Running   0             4m35s
example-pulp-redis-5c94fddd8d-lcqfx     1/1     Running   0             4m31s
example-pulp-web-ff98589b8-r4q8g        0/1     Running   1 (48s ago)   4m28s
example-pulp-worker-c5b8f8948-ccsrq     1/1     Running   0             3m10s


$ kubectl get svc -l "app.kubernetes.io/managed-by=pulp-operator"
NAME                TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
example-pulp-api-svc       ClusterIP   10.101.91.163    <none>        24817/TCP         5m31s
example-pulp-content-svc   ClusterIP   10.108.116.169   <none>        24816/TCP         5m12s
example-pulp-postgres      ClusterIP   None             <none>        5432/TCP          6m13s
example-pulp-redis         ClusterIP   10.105.207.239   <none>        6379/TCP          6m10s
example-pulp-web-svc       NodePort    10.106.203.144   <none>        24880:31428/TCP   6m3s
```

Once deployed, the Pulp instance will be accessible by running:

```
$ minikube service example-pulp-web-svc --url -n $NAMESPACE
```

By default, the admin user is `admin` and the password is available in the `<resourcename>-admin-password` secret. To retrieve the admin password, run:

```
$ kubectl get secret example-pulp-admin-password -o jsonpath="{.data.password}" | base64 --decode
yDL2Cx5Za94g9MvBP6B73nzVLlmfgPjR
```

You just completed the most basic install of an Pulp instance via this operator. Congratulations!!!

## Further Reading

- [Install Pulp from OperatorHub](https://operatorhub.io/operator/pulp-operator)
- [Install Pulp using Helm Charts](site:pulp-operator/docs/admin/guides/install/helm)
`````

## File: pulp-docs/pulp-operator/docs/admin/tutorials/quickstart-openshift.md
`````markdown
# Quickstart with OpenShift

## Install Pulp Operator

Pulp is available on OpenShift's `OperatorHub`. Open your OpenShift console and follow the instructions:

<figure markdown="span">
  <figcaption>Find Pulp  at `OperatorHub > Integration & Delivery`.</figcaption>
  ![OperatorHub tab](1.png "Pulp on OperatorHub tab")
</figure>

<figure markdown="span">
  <figcaption>For installing it, click on `Pulp Project` and then `Install`.</figcaption>
  ![Installing pulp](2.png "Installing pulp operator")
</figure>

<figure markdown="span">
  <figcaption>Confirm the installation.</figcaption>
  ![Installing pulp](3.png "Installing pulp operator")
</figure>

## Setup Credentials

You should use valid credentials from an already configured S3 bucket.

<figure markdown="span">
  <figcaption>Create a `Secret` with the `S3` credentials.</figcaption>
  ![S3 credentials Secret](4.png "S3 credentials Secret")
</figure>

## Setup Storage

Use the name of the storage of the previous step to configure S3.
For this tutorial it is `example-pulp-object-storage`.

<figure markdown="span">
  <figcaption>Go to `Operators > Installed Operators > Pulp > Create Instance`.</figcaption>
  ![Click on Pulp](5.png "Click on Pulp")
</figure>

<figure markdown="span">
  <figcaption>Select `S3` storage and use your storage name on `S3 storage-secret`.</figcaption>
  ![S3 credentials on Pulp kind](6.png "S3 credentials on Pulp kind")
</figure>

## Setup Routes

From the previous page, click `Advanced Configuration`, fill the form as follows
and wait a few minutes for pulp-operator to be successfully deployed!

<figure markdown="span">
  <figcaption>Select `Route` as `Ingress Type`, fill `Route DNS host`, select `Edge` as Route TLS termination mechanism, and click on `Create`.</figcaption>
  ![Advanced Configuration](7.png "Advanced Configuration")
</figure>

## Check your deployment

<figure markdown="span">
  <figcaption>You can check your `password` on `Secrets`, `example-pulp-admin-password`.</figcaption>
  ![Admin password Secret](8.png "Admin password Secret")
</figure>

<figure markdown="span">
  <figcaption>Verify your URL at `Networking > Routes`.</figcaption>
  ![Route URL](9.png "Route URL")
</figure>

<figure markdown="span">
  <figcaption>Use the URL from the previous step with `/pulp/api/v3/status/`path and verify Pulp was successfully deployed.</figcaption>
  ![Pulp Status](10.png "Pulp Status")
</figure>
`````

## File: pulp-docs/pulp-operator/docs/admin/index.md
`````markdown
![pulp-operator CI](https://github.com/pulp/pulp-operator/workflows/Pulp%20CI/badge.svg)

# Welcome to Pulp Operator!

## Overview

Pulp Operator allows to manage services in an automated way by implementing the human operator knowledge
into code (see [The Operator Pattern](https://kubernetes.io/docs/concepts/extend-kubernetes/operator/)).

It is in beta stage and under active development, with the goal to provide a scalable and robust cluster for Pulp 3.
If you find any problem, please check our [issue page](https://github.com/pulp/pulp-operator/issues?q=is%3Aissue+is%3Aopen+label%3Ago-alpha) with the current known issues or feel free to fill a new bug or rfe in case it is not addressed yet.

If you just got here, you may want to take our
[Quickstart with Kubernetes](site:pulp-operator/docs/admin/tutorials/quickstart-kubernetes/) tutorial to get your first instance up and running.
We also recommended that you read the [Basic Concepts](site:pulp-operator/docs/admin/learn/basic-concepts/)
section before diving into the workflows and reference material.

## Get Help

Here are some useful links if you need some help:

- Issue Tracker: [https://github.com/pulp/pulp-operator/issues](https://github.com/pulp/pulp-operator/issues)
- Forum: [https://discourse.pulpproject.org/](https://discourse.pulpproject.org/)
- Join [**#pulp** on Matrix](https://matrix.to/#/#pulp:matrix.org)
- Join [**#pulp-dev** on Matrix](https://matrix.to/#/#pulp-dev:matrix.org) for Developer discussion.
`````

## File: pulp-docs/pulp-operator/docs/dev/index.md
`````markdown
# Welcome to Pulp Operator for devs

This is the section is designed to support contributions to Pulp Operator development.

## Contributing guide

### Pull Request Checklist

1. Unless a change is small or doesn't affect users, create an issue on
[github](https://github.com/pulp/pulp-operator/issues/new).
2. Add [a changelog update.](https://pulpproject.org/pulpcore/docs/dev/guides/git/#changelog-update)
3. Write an excellent [Commit Message.](https://pulpproject.org/pulpcore/docs/dev/guides/git/#commit-message)
Make sure you reference and link to the issue.
4. Push your branch to your fork and open a [Pull request across forks.](https://help.github.com/articles/creating-a-pull-request-from-a-fork/)
5. Add GitHub labels as appropriate.

### Test the code

The tests can be run with the following command:
```bash
make test
```

If you want to run the tests inside your editor/IDE, you may need download the required binaries,
you can do it by running:
```bash
make testbin
```

### Test the Docs

Cross-platform:
```
pip install -r docs/doc_requirements.txt
```

Then:
```
mkdocs serve
```
Click the link it outputs. As you save changes to files modified in your editor,
the browser will automatically show the new content.


### Debug the code 

1. Ensure you have a cluster
  ```bash
  minikube start --vm-driver=docker --extra-config=apiserver.service-node-port-range=80-32000
  ```
2. Build and apply the manifests
  ```bash
  make local
  ```
3. Apply your custom resource
  ```bash
  kubectl apply -f config/samples/simple.yaml
  ```

The following steps are biased towards [vscode](https://code.visualstudio.com/):

1. Make sure you have the [Go extension](https://marketplace.visualstudio.com/items?itemName=golang.Go) installed
2. Make sure you have a `.vscode/launch.json` file with at least this config:
  ```json
    {
        "version": "0.2.0",
        "configurations": [
            {
            "name": "Launch Operator",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "${workspaceFolder}",
            "args": [ "--zap-log-level=debug", "--zap-stacktrace-level=error" ]
            }
        ]
    }
  ```
  You can learn more about debugging settings [here](https://github.com/golang/vscode-go/wiki/debugging)
`````

## File: pulp-docs/pulp-operator/docs/user/guides/common_issues.md
`````markdown
### **I modified a configmap/secret but the new config is not replicated to pods**

This is a known issue that [Pulp team is discussing](https://github.com/pulp/pulp-operator/issues/521) what will be the best way to handle it. The [Kubernetes community does not have a consensus](https://github.com/kubernetes/kubernetes/issues/22368) about it too.

One of the reasons that we don't want to put the pod restart logic (to propagate the new configuration) in operator is because it can cause downtime in case of error and we would need to automate the rollback or fix processes, which would probably bring other issues instead of being helpful.



### **How can I fix the "*Multi-Attach error for volume "my-volume" Volume is already used by pod(s) my-pod*"?**

    Warning  FailedAttachVolume  44m                   attachdetach-controller  Multi-Attach error for volume "my-volume" Volume is already used by pod(s) my-pod

The `Multi-Attach` error happens when the deployment is configured to mount a RWO volume and the scheduler tries to run a new pod in a different node. To fix the error and allow the new pod to be provisioned, delete the old pod so that the new one will be able to mount the volume.

Another common scenario that this issue happens is if a node lose communication with the cluster and the controller tries to provision a new pod. Since the communication of the failing node with the cluster is lost, it is not possible to detach the volume before trying to attach it again to the new pod.

To avoid this issue, it is recommended to use RWX volumes. If it is not possible, modify the `strategy` type from Pulp CR as `Recreate`.


### **Which resources are managed by the Operator?**

The Operator manages almost all resources it provisions, which are:

* **Deployments**
    * `pulp-api`, `pulp-content`, `pulp-worker`, *`pulp-web`(optional)*, *`pulp-redis`(optional)*
* **Services**
    * `pulp-api-svc`, `pulp-content-svc`, *`pulp-web-svc`(optional)*,*`pulp-redis-svc`(optional)*
* ***Routes(optional)***
    * *pulp, pulp-content, pulp-api, pulp-auth, pulp-container-v2, ...*
* ***Ingresses(optional)***
    * *pulp*



Some resources are provisioned by the Operator, but [**no reconciliation**](/pulp_operator/configuring/secrets/#pulp-operator-secrets) is made (even in managed state):

* **ConfigMaps**
* **Secrets**


!!! note
    Keep in mind that this list is constantly changing (sometimes we are adding more resources,
    sometimes we identify that a resource is not needed anymore).


### **Which fields are reconciled when the Operator is set as `managed`?**

All fields from `Spec` *should* be reconciled on *Deployments*, *Services*, *Routes* and *Ingresses* objects.


### **I created a new PulpRestore CR, but the restore procedure is not running again. Checking the operator logs I found the message "*PulpRestore lock ConfigMap found. No restore procedure will be executed!*"**

After the Operator finishes executing a restore procedure it creates a `ConfigMap` called *`restore-lock`*. This `ConfigMap` is used to control the restore reconciliation loop and avoid it overwriting all files or `Secrets` with data from an old backup.  
If you still want to run the restore, just delete the *`restore-lock`* `ConfigMap` and recreate the PulpRestore CR.


### **How can I manually run a database migration?**

There are some cases in which a db migration is needed and the operator did not automatically trigger a new migration job.  
We are investigating how the operator should handle these scenarios.

In the meantime, to manually run a migration if there is/are pulpcore pods running:
```bash
$ kubectl exec deployments/<PULP CR NAME>-api pulpcore-manager migrate
```

for example:
```bash
$ kubectl exec deployments/pulp-api pulpcore-manager migrate
```

If the pods are stuck in init or crash state and Pulp is running in an OCP cluster:
```bash
$ oc debug -c init-container  deployment/pulp-api -- pulpcore-manager migrate
```

or create a job to run the migrations (the values from these vars can be extracted from pulpcore pods):
```bash
export POSTGRES_HOST="pulp-database-service"
export POSTGRES_PORT="5432"
export SERVICE_ACCOUNT="pulp"
export PULP_SERVER_SECRET="pulp-server"
export DB_FIELDS_ENC_SECRET="pulp-db-fields-encryption"


kubectl apply -f-<<EOF
apiVersion: batch/v1
kind: Job
metadata:
  name: pulpcore-migration
spec:
  backoffLimit: 1
  completionMode: NonIndexed
  completions: 1
  parallelism: 1
  template:
    spec:
      containers:
      - args:
        - -c
        - |-
          /usr/bin/wait_on_postgres.py
          /usr/local/bin/pulpcore-manager migrate --noinput
        command:
        - /bin/sh
        env:
        - name: POSTGRES_SERVICE_HOST
          value: "$POSTGRES_HOST"
        - name: POSTGRES_SERVICE_PORT
          value: "$POSTGRES_PORT"
        image: quay.io/pulp/pulp-minimal:stable
        name: migration
        volumeMounts:
        - mountPath: /etc/pulp/keys/database_fields.symmetric.key
          name: pulp-db-fields-encryption
          readOnly: true
          subPath: database_fields.symmetric.key
        - mountPath: /etc/pulp/settings.py
          name: pulp-server
          readOnly: true
          subPath: settings.py
      restartPolicy: Never
      serviceAccount: "$SERVICE_ACCOUNT"
      volumes:
      - name: pulp-server
        secret:
          defaultMode: 420
          items:
          - key: settings.py
            path: settings.py
          secretName: "$PULP_SERVER_SECRET"
      - name: pulp-db-fields-encryption
        secret:
          defaultMode: 420
          items:
          - key: database_fields.symmetric.key
            path: database_fields.symmetric.key
          secretName: "$DB_FIELDS_ENC_SECRET"
EOF
```
`````

## File: pulp-docs/pulp-operator/docs/user/tutorials/quickstart.md
`````markdown
# Getting started

## Kubernetes

### Basic Install

This Kubernetes Operator is meant to be deployed in your Kubernetes cluster(s) and can manage one or more Pulp instances in any namespace.

For testing purposes, the `pulp-operator` can be deployed on a [Minikube](https://minikube.sigs.k8s.io/docs/) cluster. Due to different OS and hardware environments, please refer to the official Minikube documentation for further information.

```
$ minikube start --vm-driver=docker --extra-config=apiserver.service-node-port-range=80-32000
😄  minikube v1.23.2 on Fedora 34
✨  Using the docker driver based on user configuration
👍  Starting control plane node minikube in cluster minikube
🚜  Pulling base image ...
🔥  Creating docker container (CPUs=2, Memory=7900MB) ...
🐳  Preparing Kubernetes v1.22.2 on Docker 20.10.8 ...
    ▪ apiserver.service-node-port-range=80-32000
    ▪ Generating certificates and keys ...
    ▪ Booting up control plane ...
    ▪ Configuring RBAC rules ...
🔎  Verifying Kubernetes components...
    ▪ Using image gcr.io/k8s-minikube/storage-provisioner:v5
🌟  Enabled addons: storage-provisioner, default-storageclass
💡  kubectl not found. If you need it, try: 'minikube kubectl -- get pods -A'
🏄  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default

```

Once Minikube is deployed, check if the node(s) and `kube-apiserver` communication is working as expected.

```
$ minikube kubectl -- get nodes
NAME       STATUS   ROLES                  AGE    VERSION
minikube   Ready    control-plane,master   113s   v1.22.2

$ minikube kubectl -- get pods -A
NAMESPACE       NAME                                        READY   STATUS      RESTARTS   AGE
kube-system   coredns-78fcd69978-fdm96           1/1     Running   0             94s
kube-system   etcd-minikube                      1/1     Running   0             107s
kube-system   kube-apiserver-minikube            1/1     Running   0             107s
kube-system   kube-controller-manager-minikube   1/1     Running   0             107s
kube-system   kube-proxy-5s54z                   1/1     Running   0             95s
kube-system   kube-scheduler-minikube            1/1     Running   0             107s
kube-system   storage-provisioner                1/1     Running   1 (62s ago)   106s
```

It is not required for `kubectl` to be separately installed since it comes already wrapped inside minikube. As demonstrated above, simply prefix `minikube kubectl --` before kubectl command, i.e. `kubectl get nodes` would become `minikube kubectl -- get nodes`

Let's create an alias for easier usage:

```
$ alias kubectl="minikube kubectl --"
```

Now you need to deploy Pulp Operator into your cluster. Clone this repo and `git checkout` the latest version from [https://github.com/pulp/pulp-operator/releases](https://github.com/pulp/pulp-operator/releases), and then run the following command:

```
$ export NAMESPACE=my-namespace
$ make deploy
cd config/manager && /usr/local/bin/kustomize edit set image controller=quay.io/pulp/pulp-operator:v0.5.0.dev
cd config/default && /usr/local/bin/kustomize edit set namespace pulp-operator-system
/usr/local/bin/kustomize build config/default | kubectl apply -f -
namespace/pulp-operator-system created
customresourcedefinition.apiextensions.k8s.io/pulpbackups.pulp.pulpproject.org created
customresourcedefinition.apiextensions.k8s.io/pulprestores.pulp.pulpproject.org created
customresourcedefinition.apiextensions.k8s.io/pulps.pulp.pulpproject.org created
serviceaccount/pulp-operator-sa created
role.rbac.authorization.k8s.io/pulp-operator-leader-election-role created
role.rbac.authorization.k8s.io/pulp-operator-proxy-role created
role.rbac.authorization.k8s.io/pulp-operator-pulp-manager-role created
clusterrole.rbac.authorization.k8s.io/pulp-operator-metrics-reader created
rolebinding.rbac.authorization.k8s.io/pulp-operator-leader-election-rolebinding created
rolebinding.rbac.authorization.k8s.io/pulp-operator-proxy-rolebinding created
rolebinding.rbac.authorization.k8s.io/pulp-operator-pulp-manager-rolebinding created
configmap/pulp-operator-pulp-manager-config created
service/pulp-operator-controller-manager-metrics-service created
deployment.apps/pulp-operator-controller-manager created
networkpolicy.networking.k8s.io/pulp-operator-allow-same-namespace created
```

Wait a bit and you should have the `pulp-operator` running:

```
$ kubectl get pods -n $NAMESPACE
NAME                                               READY   STATUS    RESTARTS   AGE
pulp-operator-controller-manager-8d8b6967f-6lspp   2/2     Running   0          11s
```

So we don't have to keep repeating `-n $NAMESPACE`, let's set the current namespace for `kubectl`:

```
$ kubectl config set-context --current --namespace=$NAMESPACE
```

Next, review `config/samples/pulpproject_v1beta1_pulp_cr.default.yaml`. If the variables' default values are not correct for your environment, copy to `config/samples/pulpproject_v1beta1_pulp_cr.yaml`, uncomment "spec:", and uncomment and adjust the variables.

Finally, use `kubectl` to create the pulp instance in your cluster:

```
$ kubectl apply -f config/samples/config/samples/pulpproject_v1beta1_pulp_cr.yaml
pulp.pulp.pulpproject.org/example-pulp created
```

After a few minutes, the new Pulp instance will be deployed. You can look at the operator pod logs in order to know where the installation process is at:

```
$ kubectl logs -f deployments/pulp-operator-controller-manager -c pulp-manager
```

After a few seconds, you should see the operator begin to create new resources:

```
$ kubectl get pods -l "app.kubernetes.io/managed-by=pulp-operator"
NAME                        READY   STATUS    RESTARTS   AGE
example-pulp-api-5bff7945fb-srfw7       0/1     Running   0             3m45s
example-pulp-content-7d86b44545-zrdpx   1/1     Running   0             3m22s
example-pulp-postgres-0                 1/1     Running   0             4m35s
example-pulp-redis-5c94fddd8d-lcqfx     1/1     Running   0             4m31s
example-pulp-web-ff98589b8-r4q8g        0/1     Running   1 (48s ago)   4m28s
example-pulp-worker-c5b8f8948-ccsrq     1/1     Running   0             3m10s


$ kubectl get svc -l "app.kubernetes.io/managed-by=pulp-operator"
NAME                TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
example-pulp-api-svc       ClusterIP   10.101.91.163    <none>        24817/TCP         5m31s
example-pulp-content-svc   ClusterIP   10.108.116.169   <none>        24816/TCP         5m12s
example-pulp-postgres      ClusterIP   None             <none>        5432/TCP          6m13s
example-pulp-redis         ClusterIP   10.105.207.239   <none>        6379/TCP          6m10s
example-pulp-web-svc       NodePort    10.106.203.144   <none>        24880:31428/TCP   6m3s
```

Once deployed, the Pulp instance will be accessible by running:

```
$ minikube service example-pulp-web-svc --url -n $NAMESPACE
```

By default, the admin user is `admin` and the password is available in the `<resourcename>-admin-password` secret. To retrieve the admin password, run:

```
$ kubectl get secret example-pulp-admin-password -o jsonpath="{.data.password}" | base64 --decode
yDL2Cx5Za94g9MvBP6B73nzVLlmfgPjR
```

You just completed the most basic install of an Pulp instance via this operator. Congratulations!!!

### OperatorHub

Pulp can be installed from [OperatorHub](https://operatorhub.io) on the following link:
[https://operatorhub.io/operator/pulp-operator](https://operatorhub.io/operator/pulp-operator)

### Helm Chart Install

Pulp can also be installed using Helm Charts.  
Check [Helm Chart](/pulp_operator/install/helm) section for more information.

## OpenShift

Pulp is available on `OperatorHub`, you can find it at the `Integration & Delivery` section:

![OperatorHub tab](1.png "Pulp on OperatorHub tab")

For installing it, click on: `Pulp Project` and then `Install`:
![Installing pulp](2.png "Installing pulp operator")

![Installing pulp](3.png "Installing pulp operator")

Create a `Secret` with the `S3` credentials.
Note that these should be valid credentials from an already configured S3 bucket:
![S3 credentials Secret](4.png "S3 credentials Secret")

Click `Pulp`:
![Click on Pulp](5.png "Click on Pulp")

Select `S3` as the storage type and, on `S3 storage secret`, enter the name of the storage you created before,
e.g. `example-pulp-object-storage`:
![S3 credentials on Pulp kind](6.png "S3 credentials on Pulp kind")

Click `Advanced Configuration`,
select `Route` as Ingress type, fill in the `Route DNS host`, select `Edge` as Route TLS termination mechanism, and click on `Create`:
![Advanced Configuration](7.png "Advanced Configuration")

Wait a few minutes for pulp-operator to be successfully deployed!

You can check your `password` on `Secrets`, `example-pulp-admin-password`:
![Admin password Secret](8.png "Admin password Secret")

Verify your URL at `Networking > Routes`:
![Route URL](9.png "Route URL")

Use the URL from the previous step with `/pulp/api/v3/status/`path and verify Pulp was successfully deployed:
![Pulp Status](10.png "Pulp Status")
`````

## File: pulp-docs/pulp-operator/release/README.md
`````markdown
# ABOUT

The release container is used to make the process of releasing a new version of `pulp-operator` easier. <br/>
The idea of using a container, instead of just running the release.sh script, is to avoid issues because of different installations and to make it easier to run it (no need to install several apps). For example, running `make bundle` with different versions of `operator-sdk` will generate different bundle manifests, or towncrier docs can have incompatibility with newer versions.

# RUNNING

## PRE-REQS
* if you don't have a local copy of the repos yet, fork and clone them:
```sh
GITHUB_SPACE="git-hyagi"
git clone --depth 1 git@github.com:${GITHUB_SPACE}/pulp-operator /tmp/pulp-operator
git clone --depth 1 git@github.com:${GITHUB_SPACE}/community-operators/ /tmp/community-operators
git clone --depth 1 git@github.com:${GITHUB_SPACE}/community-operators-prod/ /tmp/community-operators-prod/
```

* configure the repositories upstreams:
```sh
REMOTE_NAME="upstream"
cd /tmp/pulp-operator
git remote add $REMOTE_NAME https://github.com/pulp/pulp-operator.git

cd /tmp/community-operators
git remote add $REMOTE_NAME https://github.com/k8s-operatorhub/community-operators.git

cd /tmp/community-operators-prod
git remote add $REMOTE_NAME https://github.com/redhat-openshift-ecosystem/community-operators-prod.git
```

## BUILD

* build the container image (run this command from inside the `release` directory of pulp-operator source):
```sh
podman build --build-arg GOLANG_VERSION=1.23.0 --build-arg CONTROLLER_TOOLS_VERSION=v0.16.5 -t pulp-operator-release .
```

## RUN
```sh
GIT_RELEASE_BRANCH=release-beta-4
PULP_OPERATOR_REPLACE_VERSION=1.0.0-beta.3
PULP_OPERATOR_RELEASE_VERSION=1.0.0-beta.4
PULP_OPERATOR_DEV_VERSION=1.0.0-beta.5
GITHUB_SSH_KEY=~/.ssh/github
PULP_OPERATOR_REPO_PATH=/tmp/pulp-operator/
OPERATORHUB_REPO_PATH=/tmp/community-operators/
REDHAT_CATALOG_REPO_PATH=/tmp/community-operators-prod/
GIT_UPSTREAM_REMOTE_NAME=upstream
GIT_REMOTE_NAME=origin
GIT_OPERATORHUB_RELEASE_BRANCH="pulp-operator-$PULP_OPERATOR_RELEASE_VERSION"
GIT_OPERATORHUB_UPSTREAM_REMOTE_NAME=upstream
GIT_OPERATORHUB_REMOTE_NAME=origin
GIT_REDHAT_CATALOG_RELEASE_BRANCH="pulp-operator-$PULP_OPERATOR_RELEASE_VERSION"
GIT_REDHAT_CATALOG_UPSTREAM_REMOTE_NAME=upstream
GIT_REDHAT_CATALOG_REMOTE_NAME=origin

podman run -dit --name pulp-operator-release \
  -v ~/.gitconfig:/root/.gitconfig:Z \
  -v ${GITHUB_SSH_KEY}:/root/.ssh/id_rsa:Z \
  -v ${PULP_OPERATOR_REPO_PATH}:/app/pulp-operator/:Z \
  -v ${OPERATORHUB_REPO_PATH}:/app/community-operators/:Z \
  -v ${REDHAT_CATALOG_REPO_PATH}/:/app/community-operators-prod/:Z \
  -e GIT_RELEASE_BRANCH \
  -e GIT_REMOTE_BRANCH \
  -e PULP_OPERATOR_REPLACE_VERSION \
  -e PULP_OPERATOR_RELEASE_VERSION \
  -e PULP_OPERATOR_DEV_VERSION \
  -e GIT_OPERATORHUB_RELEASE_BRANCH \
  -e GIT_OPERATORHUB_UPSTREAM_REMOTE_NAME \
  -e GIT_OPERATORHUB_REMOTE_NAME \
  -e GIT_REDHAT_CATALOG_RELEASE_BRANCH \
  -e GIT_REDHAT_CATALOG_UPSTREAM_REMOTE_NAME \
  -e GIT_REDHAT_CATALOG_REMOTE_NAME \
  pulp-operator-release
```


|ENV|DESCRIPTION|
|---|-----------|
|GITHUB_SSH_KEY|ssh private key to authenticate to github. For example: ~/.ssh/id_rsa|
|PULP_OPERATOR_REPO_PATH|host path of `pulp-operator` source repository. For example: ~/pulp/pulp-operator|
|OPERATORHUB_REPO_PATH|host path of `operatorhub catalog` source repository. For example: ~/pulp/community-operators|
|REDHAT_CATALOG_REPO_PATH|host path of `redhat catalog` source repository. For example: ~/pulp/community-operators-prod|
|GIT_RELEASE_BRANCH|name of the branch that will be created on `pulp-operator` repo for this new release. For example: release-beta-4|
|GIT_UPSTREAM_REMOTE_NAME|`pulp-operator` upstream git remote name. For example: upstream|
|GIT_REMOTE_NAME|`pulp-operator` fork git remote name. For example: origin|
|PULP_OPERATOR_REPLACE_VERSION|`pulp-operator` version to be replaced by this release. For example:1.0.0-beta.3|
|PULP_OPERATOR_RELEASE_VERSION|`pulp-operator` release version. For example: 1.0.0-beta.4|
|PULP_OPERATOR_DEV_VERSION|`pulp-operator` development version (version that will be worked on after this release). For example: 1.0.0-beta.5|
|GIT_OPERATORHUB_RELEASE_BRANCH|name of the release branch that will be created on `operatorhub catalog`. For example: "pulp-operator-$PULP_OPERATOR_RELEASE_VERSION"|
|GIT_OPERATORHUB_UPSTREAM_REMOTE_NAME|`operatorhub catalog` upstream git remote name. For example: upstream|
|GIT_OPERATORHUB_REMOTE_NAME|`operatorhub catalog` fork git remote name. For example: origin|
|GIT_REDHAT_CATALOG_RELEASE_BRANCH|name of the release branch that will be created on `redhat catalog`. For example: "pulp-operator-$PULP_OPERATOR_RELEASE_VERSION"|
|GIT_REDHAT_CATALOG_UPSTREAM_REMOTE_NAME|`redhat catalog` upstream git remote name. For example: upstream|
|GIT_REDHAT_CATALOG_REMOTE_NAME|`redhat catalog` fork git remote name. For example: origin|


# CHECKING

After the container finishes its execution, each repository should have a new branch with the changes.

### pulp-operator
The container should have created 2 new commits in the new branch:
```
$ git log --oneline upstream/main..
321e29f (HEAD -> release-beta-4) Bump version from Makefile to 1.0.0-beta.5
8a7c783 Release version 1.0.0-beta.4
```

The **release commit** should have the changes from towncrier (`CHANGES/*` files and `CHANGES.md`). <br/>
The **bump Makefile** commit should modify the following lines: `ref`, `VERSION`, `name`, `image`, `version`, `newTag`, and `pulp-operator version`.
For example:
```diff
$ git log -p -1 -U0
* 866022b (HEAD -> release-beta-4) [2023-12-11 12:33:11 +0000] git-hyagi  Bump version from Makefile to 1.0.0-beta.5|
  diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
  index bc884a4..2e5acc9 100644
  --- a/.github/workflows/ci.yml
  +++ b/.github/workflows/ci.yml
  @@ -90 +90 @@ jobs:
  -          ref: 1.0.0-beta.3
  +          ref: 1.0.0-beta.4
  diff --git a/Makefile b/Makefile
  index cc267ca..2fa2299 100644
  --- a/Makefile
  +++ b/Makefile
  @@ -13 +13 @@ WEB_IMAGE ?= quay.io/pulp/pulp-web
  -VERSION ?= 1.0.0-beta.4
  +VERSION ?= 1.0.0-beta.5
  diff --git a/bundle/manifests/pulp-operator.clusterserviceversion.yaml b/bundle/manifests/pulp-operator.clusterserviceversion.yaml
  index 22fd9d3..b55de46 100644
  --- a/bundle/manifests/pulp-operator.clusterserviceversion.yaml
  +++ b/bundle/manifests/pulp-operator.clusterserviceversion.yaml
  @@ -171 +171 @@ metadata:
  -    createdAt: "2023-12-11T12:33:08Z"
  +    createdAt: "2023-12-11T12:33:11Z"
  @@ -177 +177 @@ metadata:
  -  name: pulp-operator.v1.0.0-beta.4
  +  name: pulp-operator.v1.0.0-beta.5
  @@ -1304 +1304 @@ spec:
  -                image: quay.io/pulp/pulp-operator:v1.0.0-beta.4
  +                image: quay.io/pulp/pulp-operator:v1.0.0-beta.5
  @@ -1616 +1616 @@ spec:
  -  version: 1.0.0-beta.4
  +  version: 1.0.0-beta.5
  diff --git a/config/manager/kustomization.yaml b/config/manager/kustomization.yaml
  index 351751e..b734a9a 100644
  --- a/config/manager/kustomization.yaml
  +++ b/config/manager/kustomization.yaml
  @@ -16 +16 @@ images:
  -  newTag: v1.0.0-beta.4
  +  newTag: v1.0.0-beta.5
  diff --git a/main.go b/main.go
  index d5edeee..f025f3c 100644
  --- a/main.go
  +++ b/main.go
  @@ -180 +180 @@ func main() {
  -   setupLog.Info("pulp-operator version: 1.0.2-beta.4")
  + setupLog.Info("pulp-operator version: 1.0.0-beta.5")
```


### community-operators and community-operators-prod

The container should have created a new commit in a new branch with the following files:
```
$ git l -1 --name-only
* ff46725b3 (HEAD -> pulp-operator-<RELEASE_VERSION>) [2023-12-11 12:33:32 +0000] git-hyagi  operator pulp-operator (<RELEASE_VERSION>)|
  operators/pulp-operator/<RELEASE_VERSION>/manifests/pulp-operator-controller-manager-metrics-service_v1_service.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/pulp-operator-manager-config_v1_configmap.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/pulp-operator-manager-rolebinding_rbac.authorization.k8s.io_v1_clusterrolebinding.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/pulp-operator-metrics-reader_rbac.authorization.k8s.io_v1_clusterrole.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/pulp-operator.clusterserviceversion.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/repo-manager.pulpproject.org_pulpbackups.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/repo-manager.pulpproject.org_pulprestores.yaml
  operators/pulp-operator/<RELEASE_VERSION>/manifests/repo-manager.pulpproject.org_pulps.yaml
  operators/pulp-operator/<RELEASE_VERSION>/metadata/annotations.yaml
  operators/pulp-operator/<RELEASE_VERSION>/tests/scorecard/config.yaml
```

Since these are all new files, the git diff will not be that helpful, but make sure to double-check the CSV manifest (compare the current release with the one to be replaced):
```
$ diff -y --suppress-common-lines operators/pulp-operator/1.0.0-beta.{3,4}/manifests/pulp-operator.clusterserviceversion.yaml
    containerImage: quay.io/pulp/pulp-operator:v1.0.0-beta.3  |     containerImage: quay.io/pulp/pulp-operator:1.0.0-beta.4
    createdAt: "2023-12-04T14:48:41Z"                         |     createdAt: "2023-12-11T12:33:08Z"
  name: pulp-operator.v1.0.0-beta.3                           |   name: pulp-operator.v1.0.0-beta.4
                image: quay.io/pulp/pulp-operator:v1.0.0-beta |                 image: quay.io/pulp/pulp-operator:v1.0.0-beta
  version: 1.0.0-beta.3                                       |   version: 1.0.0-beta.4
  replaces: pulp-operator.v1.0.0-beta.2                       |   replaces: pulp-operator.1.0.0-beta.3
```
`````

## File: pulp-docs/pulp-operator/CHANGES.md
`````markdown
# Changelog

<!---
    You should *NOT* be adding new change log entries to this file, this
    file is managed by towncrier. You *may* edit previous change logs to
    fix problems like typo corrections or such.
    To add a new change log entry, please see
    https://docs.pulpproject.org/contributing/git.html#changelog-update

    WARNING: Don't drop the next directive!
--->

<!-- TOWNCRIER -->

## 1.0.0-beta.4 (2024-01-18) {: #1.0.0-beta.4 }

#### Features

- Added `env_vars` field to define custom environment variables.
  [#1161](https://github.com/pulp/pulp-operator/issues/1161)
- Added support for annotating pulp-operator managed Deployments.
  [#1190](https://github.com/pulp/pulp-operator/issues/1190)

#### Improved Documentation

- Added a section explaining how to add custom Pulp settings.
  [#1163](https://github.com/pulp/pulp-operator/issues/1163)

#### Misc

- [#1192](https://github.com/pulp/pulp-operator/issues/1192)

______________________________________________________________________

## 1.0.0-beta.3 (2023-12-04) {: #1.0.0-beta.3 }

#### Bugfixes

- Fixed the signing services issues.
  [#939](https://github.com/pulp/pulp-operator/issues/939)
- Fixed an error in wrong definition of tuples in `settings.py`.
  [#1122](https://github.com/pulp/pulp-operator/issues/1122)
- Modified how `pulp_settings` field is parsed to better handle generic configs.
  [#1132](https://github.com/pulp/pulp-operator/issues/1132)
- Updated the pulp-server `Secret` to import all funcs/vars from django-auth-ldap.
  [#1154](https://github.com/pulp/pulp-operator/issues/1154)

#### Improved Documentation

- Added the steps to configure signing services.
  [#1003](https://github.com/pulp/pulp-operator/issues/1003)
- Updated the index page with a little bit more context of operators and fixes.
  [#1145](https://github.com/pulp/pulp-operator/issues/1145)

#### Misc

- [#1100](https://github.com/pulp/pulp-operator/issues/1100), [#1124](https://github.com/pulp/pulp-operator/issues/1124)

______________________________________________________________________

## 1.0.0-beta.2 (2023-10-17) {: #1.0.0-beta.2 }

#### Features

- Added support to configure LDAP with Pulp.
  [#1042](https://github.com/pulp/pulp-operator/issues/1042)
- Added capability to customize annotations of serviceAccount created by operator.
  [#1079](https://github.com/pulp/pulp-operator/issues/1079)

#### Bugfixes

- Modified pulpcore containers entrypoints to support `pulp-minimal:3.33` image.
  [#1081](https://github.com/pulp/pulp-operator/issues/1081)
- Fixed a backup issue in pulp-secret-key with special chars.
  [#1098](https://github.com/pulp/pulp-operator/issues/1098)
- Fixed the KubeAPIWarningLogger PodSecurity warning messages.
  [#1102](https://github.com/pulp/pulp-operator/issues/1102)

#### Improved Documentation

- Added doc steps to rotate database fields encryption key.
  [#742](https://github.com/pulp/pulp-operator/issues/742)
- Updated the `reset-admin-password` warning message to also don't reset the\
  password via `/api/v3/users` endpoint.
  [#1078](https://github.com/pulp/pulp-operator/issues/1078)

#### Misc

- [#1101](https://github.com/pulp/pulp-operator/issues/1101)

______________________________________________________________________

## 1.0.0-beta.1 (2023-09-05) {: #1.0.0-beta.1 }

#### Features

- Added a job to handle `ALLOWED_CONTENT_CHECKSUMS` modifications.
  [#1060](https://github.com/pulp/pulp-operator/issues/1060)
- Mofified k8s jobs resource names to avoid name colision if multiple Pulp CRs are created in the same namespace.
  [#1074](https://github.com/pulp/pulp-operator/issues/1074)

#### Bugfixes

- Fixed a regression where the `s3-region` was defined as a required `Secret` field.
  [#1057](https://github.com/pulp/pulp-operator/issues/1057)
- Fixed a regression where handling of the `s3-endpoint` option was not possible
  [#1066](https://github.com/pulp/pulp-operator/issues/1066)

#### Deprecations and Removals

- Removed unused fields from CRD.
  [#817](https://github.com/pulp/pulp-operator/issues/817)
- Removed CRD fields from old ansible version of the operator.
  [#1044](https://github.com/pulp/pulp-operator/issues/1044)

______________________________________________________________________

## 1.0.0-alpha.9 (2023-08-21) {: #1.0.0-alpha.9 }

#### Features

- Added a check for missing file_storage_storage_class definition whenever
  file_storage_size or file_storage_access_mode is/are provided.
  [#946](https://github.com/pulp/pulp-operator/issues/946)
- Moved API container entrypoint migration script to k8s jobs.
  [#991](https://github.com/pulp/pulp-operator/issues/991)
- Added the OpenTelemetry support as sidecar container for pulp-api pods.
  [#1006](https://github.com/pulp/pulp-operator/issues/1006)
- Added support to define Redis PVC storage size.
  [#1016](https://github.com/pulp/pulp-operator/issues/1016)
- Added new fields to set resources for init-container and metrics sidecar containers.
  [#1019](https://github.com/pulp/pulp-operator/issues/1019)
- Added the `pulp_secret_key` field to set the Django `SECRET_KEY`.
  [#1040](https://github.com/pulp/pulp-operator/issues/1040)

#### Bugfixes

- Fixed an issue in OCP clusters where every ingress would be created with the same configurations (regardless of ingressclass).
  [#917](https://github.com/pulp/pulp-operator/issues/917)
- Fixed an issue in OCP clusters where the "pulp-redirect" Ingress would not get removed after modifying ingress_class_name.
  [#918](https://github.com/pulp/pulp-operator/issues/918)
- Fixed an issue in `Ingress.spec.rules.http.paths` from non "nginx" or "openshift-default" ingresses.
  [#923](https://github.com/pulp/pulp-operator/issues/923)
- Modified the format of backup dir names.
  [#937](https://github.com/pulp/pulp-operator/issues/937)
- Fixed a bug that caused the CONTENT_ORIGIN scheme to always be https.
  [#1048](https://github.com/pulp/pulp-operator/issues/1048)

#### Improved Documentation

- Added a doc section with instructions to install pulp-operator using Helm.
  [#1008](https://github.com/pulp/pulp-operator/issues/1008)

#### Deprecations and Removals

- The operator will not get the default ingress domain nor verify the ingressclass anymore to avoid the need of clusterroles.
  [#885](https://github.com/pulp/pulp-operator/issues/885)

#### Misc

- [#884](https://github.com/pulp/pulp-operator/issues/884), [#984](https://github.com/pulp/pulp-operator/issues/984), [#986](https://github.com/pulp/pulp-operator/issues/986), [#993](https://github.com/pulp/pulp-operator/issues/993), [#1041](https://github.com/pulp/pulp-operator/issues/1041)

______________________________________________________________________

## 1.0.0-alpha.8 (2023-06-23) {: #1.0.0-alpha.8 }

#### Bugfixes

- Modified the default readiness probe endpoint when DOMAIN is enabled.
  [#987](https://github.com/pulp/pulp-operator/issues/987)

______________________________________________________________________

## 1.0.0-alpha.7 (2023-06-22) {: #1.0.0-alpha.7 }

#### Features

- Modified the reconciliation for `pulpcore-content` to wait for `API` pods get
  into a READY state before updating the `Deployment` in case of image version change.
  [#969](https://github.com/pulp/pulp-operator/issues/969)
- Added a log message when restarting `api` and `content` pods in case of a
  secret reconciliation.
  [#973](https://github.com/pulp/pulp-operator/issues/973)

#### Bugfixes

- Added a watcher on some secrets not managed by the operator and added a
  reconciliation loop in case these secrets get modified.
  [#521](https://github.com/pulp/pulp-operator/issues/521)

#### Improved Documentation

- Added a networking section in configuration doc.
  [#666](https://github.com/pulp/pulp-operator/issues/666)
- Added more information regarding the usage and limitation of `emptyDir`.
  [#824](https://github.com/pulp/pulp-operator/issues/824)

______________________________________________________________________

## 1.0.0-alpha.6 (2023-04-27) {: #1.0.0-alpha.6 }

#### Bugfixes

- The container_token_secret was not getting its name from Pulp CR.
  [#852](https://github.com/pulp/pulp-operator/issues/852)

#### Improved Documentation

- Add Documentation for custom S3 endpoints
  [#882](https://github.com/pulp/pulp-operator/issues/882)

#### Misc

- [#858](https://github.com/pulp/pulp-operator/issues/858), [#935](https://github.com/pulp/pulp-operator/issues/935), [#942](https://github.com/pulp/pulp-operator/issues/942)

______________________________________________________________________

## 1.0.0-alpha.5 (2023-01-03) {: #1.0.0-alpha.5 }

#### Features

- Added a feature to deploy and sync Galaxy execution environments.
  [#821](https://github.com/pulp/pulp-operator/issues/821)
- Modified postgres mount point to keep compatibility with ansible-based operator version.
  [#848](https://github.com/pulp/pulp-operator/issues/848)

#### Bugfixes

- Added a check for `ingress_host` being null when `ingress_type` defined as "ingress".
  [#675](https://github.com/pulp/pulp-operator/issues/675)
- Fixed a permission/ownership error during bkp/restore procedure.
  [#808](https://github.com/pulp/pulp-operator/issues/808)
- Fixed a deadlock on status update.
  [#829](https://github.com/pulp/pulp-operator/issues/829)
- Fixed an issue on rendering Pulp settings wrongly.
  [#830](https://github.com/pulp/pulp-operator/issues/830)
- Fixed an issue with container token pub key mount point.
  [#834](https://github.com/pulp/pulp-operator/issues/834)
- Fixed an issue with default values for TOKEN_SERVER and TOKEN_AUTH_DISABLED in settings.py.
  [#836](https://github.com/pulp/pulp-operator/issues/836)

#### Improved Documentation

- Added steps to configure and run backup/restore procedure.
  [#765](https://github.com/pulp/pulp-operator/issues/765)
- Added steps to manually configure ingress.
  [#771](https://github.com/pulp/pulp-operator/issues/771)
- Document how to install multiple instances of Pulp operator.
  [#827](https://github.com/pulp/pulp-operator/issues/827)

______________________________________________________________________

## 1.0.0-alpha.4 (2022-11-28) {: #1.0.0-alpha.4 }

#### Features

- Added a field to set IngressClass name.
  [#674](https://github.com/pulp/pulp-operator/issues/674)
- Added a field to pass a secret name to configure route custom certificates.
  [#800](https://github.com/pulp/pulp-operator/issues/800)

#### Bugfixes

- Fixed an issue with envtest failing because of an assessment with old value.
  [#807](https://github.com/pulp/pulp-operator/issues/807)

#### Improved Documentation

- Described the Operator unmanaged state.
  [#792](https://github.com/pulp/pulp-operator/issues/792)

#### Misc

- [#796](https://github.com/pulp/pulp-operator/issues/796)

______________________________________________________________________

## 1.0.0-alpha.3 (2022-11-17) {: #1.0.0-alpha.3 }

#### Features

- Added a configmap to avoid pulprestore controller execution.
  [#550](https://github.com/pulp/pulp-operator/issues/550)
- Add Ingress TLS secret
  [#676](https://github.com/pulp/pulp-operator/issues/676)
- Added a field to set affinity for bkp-manager pods.
  [#782](https://github.com/pulp/pulp-operator/issues/782)

#### Bugfixes

- Make web available when ingress isn't nginx
  [#770](https://github.com/pulp/pulp-operator/issues/770)

______________________________________________________________________

## 1.0.0-alpha.2 (2022-11-09) {: #1.0.0-alpha.2 }

#### Bugfixes

- Ensure reconciliation when ingress is modified
  [#672](https://github.com/pulp/pulp-operator/issues/672)
- Fixed an issue with .status.conditions\[\] not getting updated for pulpcore-workers.
  [#735](https://github.com/pulp/pulp-operator/issues/735)
- Fixed an issue with .status.conditions\[\] getting updated in a specific order.
  [#736](https://github.com/pulp/pulp-operator/issues/736)
- Fixed an issue in RequeueAfter reconciliation logic.
  [#747](https://github.com/pulp/pulp-operator/issues/747)
- Added a "retry" in case controller fails to update operator's status.conditions\[\].
  [#751](https://github.com/pulp/pulp-operator/issues/751)
- Fix ingress type assertion
  [#755](https://github.com/pulp/pulp-operator/issues/755)
- Set update error message as DEBUG instead of ERROR.
  [#756](https://github.com/pulp/pulp-operator/issues/756)

#### Misc

- [#763](https://github.com/pulp/pulp-operator/issues/763)

______________________________________________________________________

## 1.0.0-alpha.1 (2022-11-03) {: #1.0.0-alpha.1 }

#### Features

- Added PDB configuration through Pulp CR.
  [#433](https://github.com/pulp/pulp-operator/issues/433)
- Modified affinity field to allow inter-pod affinity/anti-affinity configuration.
  [#434](https://github.com/pulp/pulp-operator/issues/434)
- Added option to mount custom CA.
  [#513](https://github.com/pulp/pulp-operator/issues/513)
- Added probe fields in pulp CR.
  [#516](https://github.com/pulp/pulp-operator/issues/516)
- Added configuration to change the operator log level.
  [#571](https://github.com/pulp/pulp-operator/issues/571)
- Added a field to control the restore deployment replicas.
  By default it will be set to false (restore controller will redeploy only a single replica of each component).
  [#572](https://github.com/pulp/pulp-operator/issues/572)
- Added more node selector configuration (cache and web pods).
  Added field to define route labels.
  [#577](https://github.com/pulp/pulp-operator/issues/577)
- Added default readiness probe for pulp-web pods.
  [#579](https://github.com/pulp/pulp-operator/issues/579)
- Added configuration to use external Redis instance.
  [#614](https://github.com/pulp/pulp-operator/issues/614)
- Modified (through processPodSecurityContext) the UID that runs the entrypoint of the container process.
  [#627](https://github.com/pulp/pulp-operator/issues/627)
- Modified Pulp CRD to collect info to connect to an external database from a Secret.
  [#630](https://github.com/pulp/pulp-operator/issues/630)
- Added a field to configure the deployment strategy.
  [#635](https://github.com/pulp/pulp-operator/issues/635)
- Let the operator namespace-scoped.
  [#657](https://github.com/pulp/pulp-operator/issues/657)
- Use Nginx Ingress as reverse proxy
  [#660](https://github.com/pulp/pulp-operator/issues/660)
- Added a check for configurations in non-ocp env with ingress_type==route.
  [#669](https://github.com/pulp/pulp-operator/issues/669)
- Updated CRD field comments.
  [#711](https://github.com/pulp/pulp-operator/issues/711)
- Utilize the renamed `pulp-minimal` and `galaxy-minimal` images. Also have CI test the new big s6-contining images `pulp` and `pulp-galaxy-ng`.
  [#717](https://github.com/pulp/pulp-operator/issues/717)
- Set nginx fields default values in controller (not in CR).
  [#722](https://github.com/pulp/pulp-operator/issues/722)
- Improved route paths provisioning loop.
  [#729](https://github.com/pulp/pulp-operator/issues/729)

#### Bugfixes

- Added logic on how to handle different/multiple types of storage in Pulp CR.
  [#526](https://github.com/pulp/pulp-operator/issues/526)
- Fixed an issue with backup of PVCs manually created.
  [#580](https://github.com/pulp/pulp-operator/issues/580)
- Fixed an issue with backup controller failing when there was no signing secret.
  [#581](https://github.com/pulp/pulp-operator/issues/581)
- Fixed .status.condition not reflecting the real state.
  [#600](https://github.com/pulp/pulp-operator/issues/600)
- Add serviceaccounts permission
  [#601](https://github.com/pulp/pulp-operator/issues/601)
- Removed default values for Pulp database when configuring external PostgreSQL.
  [#622](https://github.com/pulp/pulp-operator/issues/622)
- Set ContainerTokenSecret as immutable (the controller will reconcile with the same value if the field is modified).
  Set AdminPasswordSecret as immutable (the controller will reconcile with the same value if the field is modified).
  Added ImagePullSecrets reconciliation logic.
  Fixed TrustedCa volumeMount reconciliation logic.
  Fixed NodeSelector reconciliation logic.
  Fixed Tolerations reconciliation logic.
  Fixed TopologySpreadConstraints reconciliation logic.
  Fixed ResourceRequirements removal logic.
  Fixed PDB removal logic.
  Fixed Strategy removal logic.
  Set Cache.ExternalCacheSecret as immutable (the controller will reconcile with the same value if the field is modified).
  Fixed Cache.RedisPort reconciliation logic.
  Fixed Cache.Resources reconciliation logic.
  Fixed Cache.NodeSelector reconciliation logic.
  Fixed Cache.Tolerations reconciliation logic.
  [#646](https://github.com/pulp/pulp-operator/issues/646)
- Fixed a bug in route reconciliation.
  [#648](https://github.com/pulp/pulp-operator/issues/648)
- Fixed the backoff loop not incrementing exponentially on error.
  [#650](https://github.com/pulp/pulp-operator/issues/650)
- Ensure Nginx Ingress Controller is used when multiple controllers are installed
  [#673](https://github.com/pulp/pulp-operator/issues/673)
- Added ingressclass clusterrole.
  [#709](https://github.com/pulp/pulp-operator/issues/709)
- Ensure ingress status conditions
  [#714](https://github.com/pulp/pulp-operator/issues/714)
- Fixed issue with headless services propagating new address to pulp-web pods.
  [#737](https://github.com/pulp/pulp-operator/issues/737)

#### Improved Documentation

- Added steps to configure object storage.
  [#593](https://github.com/pulp/pulp-operator/issues/593)
- Added troubleshooting section.
  [#596](https://github.com/pulp/pulp-operator/issues/596)
- Stacktrace enabled only for above "panic" level.
  [#605](https://github.com/pulp/pulp-operator/issues/605)
- Added steps to configure operator's database.
  [#619](https://github.com/pulp/pulp-operator/issues/619)
- Fix broken links
  [#681](https://github.com/pulp/pulp-operator/issues/681)
- Added a section explaining default secrets created by the operator.
  [#683](https://github.com/pulp/pulp-operator/issues/683)

#### Misc

- [#678](https://github.com/pulp/pulp-operator/issues/678), [#692](https://github.com/pulp/pulp-operator/issues/692)

______________________________________________________________________

## 0.14.0 (2022-09-19) {: #0.14.0 }

#### Features

- Omitted pulp-web role if ingress_type==route, which brings some benefits like:
  - reduce point of failure
  - reduce complexity
  - reduce resource consumption
  - reduce communication hops
    [#436](https://github.com/pulp/pulp-operator/issues/436)
- Add support for pulp_container signing service
  [#564](https://github.com/pulp/pulp-operator/issues/564)

#### Bugfixes

- Adding NodeSelector/Toleration to Redis Deployment
  [#561](https://github.com/pulp/pulp-operator/issues/561)
- Allows users to correctly set predefined pvc with backup_pvc.  It was hardcoded in the remove ownerReferences task.  Now correctly uses the dynamic variable backup_claim.
  [#610](https://github.com/pulp/pulp-operator/issues/610)

#### Misc

- [#489](https://github.com/pulp/pulp-operator/issues/489), [#590](https://github.com/pulp/pulp-operator/issues/590)

______________________________________________________________________

## 0.13.0 (2022-07-04) {: #0.13.0 }

#### Features

- Added more information on `.status.conditions` CR field.
  [#435](https://github.com/pulp/pulp-operator/issues/435)
- Added readiness probe to content and workers
  [#455](https://github.com/pulp/pulp-operator/issues/455)

#### Bugfixes

- Remove ownerReferences from DB fields encryption secret to avoid garbage collection
  [#467](https://github.com/pulp/pulp-operator/issues/467)

#### Misc

- [#461](https://github.com/pulp/pulp-operator/issues/461), [#466](https://github.com/pulp/pulp-operator/issues/466)

______________________________________________________________________

## 0.12.0 (2022-06-15) {: #0.12.0 }

#### Features

- Make no_log configurable
  [#443](https://github.com/pulp/pulp-operator/issues/443)

#### Bugfixes

- Improve pulp status health check
  [#447](https://github.com/pulp/pulp-operator/issues/447)

______________________________________________________________________

## 0.11.1 (2022-06-09) {: #0.11.1 }

#### Bugfixes

- Gunicorn API workers default to 2
  [#437](https://github.com/pulp/pulp-operator/issues/437)
- Ensure azure_connection_string is optional
  [#440](https://github.com/pulp/pulp-operator/issues/440)

______________________________________________________________________

## 0.11.0 (2022-06-02) {: #0.11.0 }

#### Features

- Upgrade to PostgreSQL 13 and add data migration logic
  [#358](https://github.com/pulp/pulp-operator/issues/358)
- Made Nginx, Gunicorn, HAproxy timeouts configurable
  [#418](https://github.com/pulp/pulp-operator/issues/418)
- The Pulp API can now be rerooted using the new `API_ROOT` setting. By default it is set to
  `/pulp/`. Pulp appends the string `api/v3/` onto the value of `API_ROOT`.
  [#421](https://github.com/pulp/pulp-operator/issues/421)

#### Bugfixes

- Ensure Nginx `client_max_body_size` is correctly set
  [#418](https://github.com/pulp/pulp-operator/issues/418)
- Ensure content can be signed
  [#426](https://github.com/pulp/pulp-operator/issues/426)
- Fix restore when `deployment_name` is set
  [#427](https://github.com/pulp/pulp-operator/issues/427)

#### Misc

- [#407](https://github.com/pulp/pulp-operator/issues/407)

______________________________________________________________________

## 0.10.1 (2022-05-18) {: #0.10.1 }

#### Bugfixes

- Set reconcile period to 0s to resolve issue with reconciliation loop not converging
  [#385](https://github.com/pulp/pulp-operator/issues/385)
- Patch container-auth secret creation to ensure the reconciliation loop converges
  [#403](https://github.com/pulp/pulp-operator/issues/403)

#### Deprecations and Removals

- Revert #373 to ensure the reconciliation loop converges
  [#403](https://github.com/pulp/pulp-operator/issues/403)

______________________________________________________________________

## 0.10.0 (2022-05-12) {: #0.10.0 }

#### Features

- Add configurable timeout for pulp-api and pulp-content
  [#390](https://github.com/pulp/pulp-operator/issues/390)
- Add configurable workers for pulp-api and pulp-content
  [#392](https://github.com/pulp/pulp-operator/issues/392)

#### Bugfixes

- Fix a reference to an incorrect variable in pulp-status role
  [#388](https://github.com/pulp/pulp-operator/issues/388)
- Provide default values for container registry
  [#394](https://github.com/pulp/pulp-operator/issues/394)

#### Misc

- [#386](https://github.com/pulp/pulp-operator/issues/386)

______________________________________________________________________

## 0.9.0 (2022-04-27) {: #0.9.0 }

#### Features

- Modified image_pull_secret to allow users to provide multiple secrets.
  [#343](https://github.com/pulp/pulp-operator/issues/343)
- Implement the galaxy collection signing service
  [#362](https://github.com/pulp/pulp-operator/issues/362)
- Backup & restore the default signing service
  [#366](https://github.com/pulp/pulp-operator/issues/366)
- Enable backup for ReadWriteOnce access mode
  [#380](https://github.com/pulp/pulp-operator/issues/380)

#### Bugfixes

- Fix backup/restore events
  [#378](https://github.com/pulp/pulp-operator/issues/378)

#### Misc

- [#374](https://github.com/pulp/pulp-operator/issues/374)

______________________________________________________________________

## 0.8.0 (2022-03-14) {: #0.8.0 }

#### Features

- Add ability to configure extra args for postgres
  [#344](https://github.com/pulp/pulp-operator/issues/344)
- Add the ability to specify topologySpreadConstraints
  [#345](https://github.com/pulp/pulp-operator/issues/345)
- Allow service annotations not only for LoadBalancer type
  [#346](https://github.com/pulp/pulp-operator/issues/346)
- Support nodeSelector and tolerations
  [#348](https://github.com/pulp/pulp-operator/issues/348)

#### Bugfixes

- Ensure the operator works with pre-defined TLS secret
  [#354](https://github.com/pulp/pulp-operator/issues/354)

______________________________________________________________________

## 0.7.1 (2022-02-22) {: #0.7.1 }

#### Bugfixes

- Made Redis optional when installing pulp
  [#323](https://github.com/pulp/pulp-operator/issues/323)
- Made Operator work with arbitrary namespaces
  [#326](https://github.com/pulp/pulp-operator/issues/326)
- Made web image and ingress to have the same max_body_size
  [#330](https://github.com/pulp/pulp-operator/issues/330)
- Fixed pulp-api and pulp-web liveness probes.
  [#332](https://github.com/pulp/pulp-operator/issues/332)
- Fixes TokenReview authentication
  [#337](https://github.com/pulp/pulp-operator/issues/337)

______________________________________________________________________

## 0.7.0 (2021-12-21) {: #0.7.0 }

#### Features

- Support cert-manager format on container token secret
  [#313](https://github.com/pulp/pulp-operator/issues/313)
- Enable Execution Environments by default
  [#315](https://github.com/pulp/pulp-operator/issues/315)

#### Bugfixes

- Renamed services to avoid overwriting environment variables
  https://kubernetes.io/docs/concepts/services-networking/service/#environment-variables
  [#309](https://github.com/pulp/pulp-operator/issues/309)

______________________________________________________________________

## 0.6.1 (2021-12-09) {: #0.6.1 }

#### Bugfixes

- Mount `/var/lib/pulp/tmp` on pulp-content
  [#299](https://github.com/pulp/pulp-operator/issues/299)
- Raise resource limits for worker container to avoid OOMKill
  [#302](https://github.com/pulp/pulp-operator/issues/302)
- Raise resource limits for content container to avoid OOMKill
  [#303](https://github.com/pulp/pulp-operator/issues/303)

______________________________________________________________________

## 0.6.0 (2021-12-06) {: #0.6.0 }

#### Bugfixes

- Fix node affinity handling
  [#289](https://github.com/pulp/pulp-operator/issues/289)
- Fixed web containers initialization
  [#295](https://github.com/pulp/pulp-operator/issues/295)

______________________________________________________________________

## 0.5.0 (2021-11-05) {: #0.5.0 }

#### Features

- Made request size limit configurable
  [#227](https://github.com/pulp/pulp-operator/issues/227)
- Ensure resource manager is not started for pulpcore >= 3.16
  [#231](https://github.com/pulp/pulp-operator/issues/231)
- Set RELATED_IMAGE\_ vars to enable disconnected deployments
  [#232](https://github.com/pulp/pulp-operator/issues/232)

#### Bugfixes

- Image pull policy defaults to IfNotPresent
  [#229](https://github.com/pulp/pulp-operator/issues/229)

______________________________________________________________________

## 0.4.0 (2021-10-15) {: #0.4.0 }

#### Features

- Removed tags, registry, and projects so users can add images with custom registries and tags in image override
  [#218](https://github.com/pulp/pulp-operator/issues/218)
- Create or import a key for pulp-api to use when encrypting sensitive db fields
  [#8730](https://pulp.plan.io/issues/8730)
- Enable new tasking system
  [#9020](https://pulp.plan.io/issues/9020)
- Added support to override PosgreSQL sslmode
  [#9421](https://pulp.plan.io/issues/9421)

#### Bugfixes

- Ensure default storage for Postgres
  [#221](https://github.com/pulp/pulp-operator/issues/221)

#### Deprecations and Removals

- Move from cluster-scoped operator model to namespace-scoped model
  [#208](https://github.com/pulp/pulp-operator/issues/208)
- Dropping OCP 4.6 support
  [#9330](https://pulp.plan.io/issues/9330)

#### Misc

- [#206](https://github.com/pulp/pulp-operator/issues/206), [#209](https://github.com/pulp/pulp-operator/issues/209), [#215](https://github.com/pulp/pulp-operator/issues/215), [#9217](https://pulp.plan.io/issues/9217)

______________________________________________________________________

## 0.3.0 (2021-07-14) {: #0.3.0 }

#### Features

- Enable container based database migration support
  [#8472](https://pulp.plan.io/issues/8472)
- Enable backup of database and secrets associated with Pulp custom resource
  [#8473](https://pulp.plan.io/issues/8473)
- Enable backup of storage associated with Pulp custom resource
  [#8474](https://pulp.plan.io/issues/8474)
- Enable restore of deployment associated with Pulp custom resource backup
  [#8513](https://pulp.plan.io/issues/8513)
- Add additional backup and restore flexibility to allow for restore from only a PVC
  [#8630](https://pulp.plan.io/issues/8630)
- Allow user to specify the storage class for the Redis PVC
  [#8877](https://pulp.plan.io/issues/8877)

#### Bugfixes

- Allow user to specify empty string for PostgreSQL PVC storage class
  [#8733](https://pulp.plan.io/issues/8733)
- Update nodeport templating in API and Content services
  [#8810](https://pulp.plan.io/issues/8810)
- Fix collision on file_storage fact usage after pulp prefix cleanup
  [#8832](https://pulp.plan.io/issues/8832)
- Fix Nodeport flow to create ports in standard range and only on the web service. Also allows node_ip discover based on where the pod is running.
  [#8833](https://pulp.plan.io/issues/8833)
- Resolve Pulp status correctly when deployed in a separate namespace
  [#8880](https://pulp.plan.io/issues/8880)

#### Improved Documentation

- Document how to deploy Pulp on OpenShift
  [#8836](https://pulp.plan.io/issues/8836)

#### Misc

- [#8530](https://pulp.plan.io/issues/8530), [#8563](https://pulp.plan.io/issues/8563), [#8598](https://pulp.plan.io/issues/8598)

______________________________________________________________________

## 0.2.0 (2021-03-26) {: #0.2.0 }

#### Features

- Add deployment of nginx webserver with pulp snippets
  [#5657](https://pulp.plan.io/issues/5657)
- Container building machinery for the operator
  [#7171](https://pulp.plan.io/issues/7171)
- Enable the creation of Ingress or Route objects based on the specifications within the custom resource
  [#8272](https://pulp.plan.io/issues/8272)
- Deploy postgres database using a secret to store configuration instead of it existing in the custom resource; allows credentials to be kept secret.
  [#8289](https://pulp.plan.io/issues/8289)
- Enable the use of S3 compliant or Azure object storage as storage backend
  [#8361](https://pulp.plan.io/issues/8361)
- Operator will provide information data via custom resource status object
  [#8402](https://pulp.plan.io/issues/8402)
- Enable installation of operator using OLM catalog
  [#8409](https://pulp.plan.io/issues/8409)
- Enable resource requirement specification for deployments and have operator check for running nodes and healthy status
  [#8456](https://pulp.plan.io/issues/8456)

#### Bugfixes

- Only build plugins from pulp org
  [#7234](https://pulp.plan.io/issues/7234)
- Fix storage option check so that Azure Blob Storage can be used as a backend
  [#8424](https://pulp.plan.io/issues/8424)

#### Misc

- [#5134](https://pulp.plan.io/issues/5134), [#5141](https://pulp.plan.io/issues/5141), [#5142](https://pulp.plan.io/issues/5142), [#7107](https://pulp.plan.io/issues/7107), [#8273](https://pulp.plan.io/issues/8273), [#8293](https://pulp.plan.io/issues/8293), [#8294](https://pulp.plan.io/issues/8294), [#8345](https://pulp.plan.io/issues/8345), [#8353](https://pulp.plan.io/issues/8353), [#8370](https://pulp.plan.io/issues/8370), [#8378](https://pulp.plan.io/issues/8378), [#8399](https://pulp.plan.io/issues/8399), [#8418](https://pulp.plan.io/issues/8418)

______________________________________________________________________
`````

## File: pulp-docs/pulp-operator/README.md
`````markdown
![Pulp CI](https://github.com/pulp/pulp-operator/workflows/Pulp%20CI/badge.svg)

# Pulp

[Pulp](https://pulpproject.org/) is a platform for managing repositories of content, such as software packages, and making them available to a large number of consumers.

With Pulp you can:

* Locally mirror all or part of a repository
* Host your own content in a new repository
* Manage content from multiple sources in one place
* Promote content through different repos in an organized way

If you have dozens, hundreds, or thousands of software packages and need a better way to manage them, Pulp can help.

Pulp is completely free and open-source!

* License: GPLv2+
* Documentation: [https://pulpproject.org/](https://pulpproject.org/)
* Source: [https://github.com/pulp/pulpcore/](https://github.com/pulp/pulpcore/)

For more information, check out the project website: [https://pulpproject.org](https://pulpproject.org)

If you want to evaluate Pulp quickly, try [Pulp in One Container](https://pulpproject.org/pulp-oci-images/docs/admin/tutorials/quickstart/#single-container)

## Pulp Operator

See our documentation on [Pulp Operator page](https://pulpproject.org/pulp_operator/).

Pulp Operator is in beta stage and under active development, with the goal to provide a scalable and robust cluster for Pulp 3.
If you find any problem, please check our [issue page](https://github.com/pulp/pulp-operator/issues?q=is%3Aissue+is%3Aopen+label%3Ago-alpha) with the current known issues or feel free to fill a new bug or rfe in case it is not addressed yet.

Note that Pulp operator works with three different types of service containers (the operator itself, the main service and the web service):

|           | Operator | Main | Web |
| --------- | -------- | ---- | --- |
| **Image** | [pulp-operator](https://quay.io/repository/pulp/pulp-operator?tab=tags) |[pulp-minimal](https://quay.io/repository/pulp/pulp-minimal?tab=tags) | [pulp-web](https://quay.io/repository/pulp/pulp-web?tab=tags) |

<br>Pulp operator is manually built and [hosted on quay.io](https://quay.io/repository/pulp/pulp-operator). Read more about the container images [here](https://pulpproject.org/pulp-oci-images/docs/admin/reference/available-images/single-process-images/).

## Custom Resource Definitions
Pulp Operator currently provides three different kinds of [Custom Resources](https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-resources): Pulp, Pulp Backup and Pulp Restore.
### Pulp
Manages the Pulp application and its deployments, services, etc.

### Pulp Backup
Manages pulp backup
### Pulp Restore
Manages the restoration of a pulp backup
## Get Help

Documentation: [https://pulpproject.org/pulp_operator/](https://pulpproject.org/pulp_operator/)

Issue Tracker: [https://github.com/pulp/pulp-operator/issues](https://github.com/pulp/pulp-operator/issues)

Forum: [https://discourse.pulpproject.org/](https://discourse.pulpproject.org/)

Join [**#pulp** on Matrix](https://matrix.to/#/#pulp:matrix.org)

Join [**#pulp-dev** on Matrix](https://matrix.to/#/#pulp-dev:matrix.org) for Developer discussion.
`````

## File: pulp-docs/pulp-ui/docs/index.md
`````markdown
# pulp-ui

A community driven UI for [Pulp](https://pulpproject.org/).

## How to run

### backend

You can follow the [pulp-oci-images quickstart](https://pulpproject.org/pulp-oci-images/docs/admin/tutorials/quickstart/),
TLDR:

#### setup:

```sh
mkdir -p ~/pulp-backend-oci/{settings/certs,pulp_storage,pgsql,containers}
cd ~/pulp-backend-oci/
echo "
CONTENT_ORIGIN='http://$(hostname):8080'
ANSIBLE_API_HOSTNAME='http://$(hostname):8080'
ANSIBLE_CONTENT_HOSTNAME='http://$(hostname):8080/pulp/content'
" >> settings/settings.py
```

#### run:

```sh
cd ~/pulp-backend-oci/
podman run --publish 8080:80 \
           --replace --name pulp \
           --volume "$(pwd)/settings":/etc/pulp \
           --volume "$(pwd)/pulp_storage":/var/lib/pulp \
           --volume "$(pwd)/pgsql":/var/lib/pgsql \
           --volume "$(pwd)/containers":/var/lib/containers \
           docker.io/pulp/pulp
```

#### check:

```sh
curl localhost:8080/pulp/api/v3/status/ | jq
```

or open http://localhost:8080/pulp/api/v3/status/

#### change password:

```sh
podman exec -it pulp pulpcore-manager reset-admin-password --password admin
```
```sh
docker exec -it compose-pulp_api-1 pulpcore-manager reset-admin-password --password admin
```

#### configure `pulp-cli`:

```sh
pip install pulp-cli[pygments]
pulp config create --username admin --base-url http://localhost:8080 --password admin

pulp --help
pulp user list
```

### frontend

```sh
npm install
npm run start
```

and open http://localhost:8002/ :tada: :)

If your API listens elsewhere, you can use `API_PROXY=http://elsewhere:12345 npm run start` instead.


## Misc

### post-build configuration

The UI builds produced by `npm run build` can be further configured by serving a `/pulp-ui-config.json` alongside the built UI.
(Note it has to be mapped at `/`, not just wherever `index.html` is served from.)

* `API_BASE_PATH` - defaults to `/pulp/api/v3/` - change when using domains or a different path
* `UI_BASE_PATH` - defaults to `/ui/` - change when only serving index in a subdirectory, or want different browser path prefix
* `UI_EXTERNAL_LOGIN_URI` - defaults to nothing - set to something like `/login/` when using an SSO
* `EXTRA_VERSION` - an extra version string to display in about modal
`````

## File: pulp-docs/pulp-ui/CHANGES.md
`````markdown
## 0.1.22 (2025-01-16) {: #0.1.22 }

### What's Changed


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.21...v0.1.22

---

## 0.1.21 (2024-12-31) {: #0.1.21 }

### What's Changed
* Bump everything but pf6 and react19 [#187](https://github.com/pulp/pulp-ui/pull/187)
* ReactFragment deprecated in React 19, replace with ReactNode [#178](https://github.com/pulp/pulp-ui/pull/178)
* Use sentence case [#189](https://github.com/pulp/pulp-ui/pull/189)
* Fixups from #137 [#191](https://github.com/pulp/pulp-ui/pull/191)
* Fixups from #124 [#192](https://github.com/pulp/pulp-ui/pull/192)
* workflows/stale: Add workflow to close stale issues and PRs [#193](https://github.com/pulp/pulp-ui/pull/193)
* pulp_file: Repositories & Remotes [#137](https://github.com/pulp/pulp-ui/pull/137)
* Tests [#147](https://github.com/pulp/pulp-ui/pull/147)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.20...v0.1.21

---

## 0.1.20 (2024-12-24) {: #0.1.20 }

### What's Changed
* cron-release, CHANGELOG: fix changelog generation [#179](https://github.com/pulp/pulp-ui/pull/179)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.19...v0.1.20

---

## 0.1.19 (2024-12-12) {: #0.1.19 }

### What's Changed
* Switch from moment to luxon [#170](https://github.com/pulp/pulp-ui/pull/170)
* Switch to new JSX transform [#174](https://github.com/pulp/pulp-ui/pull/174)
* Bump react-router to v7 [#172](https://github.com/pulp/pulp-ui/pull/172)
* Bump lingui to v5 [#173](https://github.com/pulp/pulp-ui/pull/173)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.18...v0.1.19

---

## 0.1.18 (2024-11-25) {: #0.1.18 }

**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.17...v0.1.18

---

## 0.1.17 (2024-11-19) {: #0.1.17 }

**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.16...v0.1.17

---

## 0.1.16 (2024-11-18) {: #0.1.16 }

### What's Changed
* Remove obsolete write\_only\_fields logic [#150](https://github.com/pulp/pulp-ui/pull/150)
* Add pulp\_file apis [#151](https://github.com/pulp/pulp-ui/pull/151)
* Update paths, make beta a route property [#152](https://github.com/pulp/pulp-ui/pull/152)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.15...v0.1.16

---

## 0.1.15 (2024-11-17) {: #0.1.15 }

### What's Changed
* Fix Repository Url to use distributions value [#148](https://github.com/pulp/pulp-ui/pull/148)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.14...v0.1.15

---

## 0.1.14 (2024-11-04) {: #0.1.14 }

### What's Changed
* Add under contruction banner [#139](https://github.com/pulp/pulp-ui/pull/139)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.13...v0.1.14

---

## 0.1.13 (2024-11-01) {: #0.1.13 }

### What's Changed
* Small fixes for orphan clean up modal [#138](https://github.com/pulp/pulp-ui/pull/138)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.12...v0.1.13

---

## 0.1.12 (2024-10-30) {: #0.1.12 }

### What's Changed
* Add modals for Task buttons [#126](https://github.com/pulp/pulp-ui/pull/126)
* dependabot: stop trying to update to patternfly 6 [#133](https://github.com/pulp/pulp-ui/pull/133)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.11...v0.1.12

---

## 0.1.11 (2024-10-29) {: #0.1.11 }

### What's Changed
* Update task reserved resource logic to handle PRNs [#92](https://github.com/pulp/pulp-ui/pull/92)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.10...v0.1.11

---

## 0.1.10 (2024-10-27) {: #0.1.10 }

### What's Changed
* CHANGES - update PR links to match pulpcore [#125](https://github.com/pulp/pulp-ui/pull/125)
* API cleanup [#120](https://github.com/pulp/pulp-ui/pull/120)
* Add ability to add/edit/remove pulp labels [#123](https://github.com/pulp/pulp-ui/pull/123)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.9...v0.1.10

---

## 0.1.9 (2024-10-25) {: #0.1.9 }

### What's Changed
* Make API\_BASE\_PATH, UI\_BASE\_PATH, UI\_EXTERNAL\_LOGIN\_URI configurable at load-time [#111](https://github.com/pulp/pulp-ui/pull/111)
* cron-release: add CHANGES.md from autogenerated github release changelog [#114](https://github.com/pulp/pulp-ui/pull/114)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.8...v0.1.9

---

## 0.1.8 (2024-10-22) {: #0.1.8 }

### What's Changed
* Add basic docs to show on Pulp website [#107](https://github.com/pulp/pulp-ui/pull/107)
* User form fixes - convert user edit screens to functional, use user context, update api to patch [#112](https://github.com/pulp/pulp-ui/pull/112)
* Add new PulpCodeBlock component that auto-truncates and has download + copy action [#109](https://github.com/pulp/pulp-ui/pull/109)
* Add About page [#95](https://github.com/pulp/pulp-ui/pull/95)
* Not found handling - switch away from routes [#121](https://github.com/pulp/pulp-ui/pull/121)
* Remove galaxy-specifics from ansible repository list & detail tab [#108](https://github.com/pulp/pulp-ui/pull/108)
* stylelint - switch to `stylelint-config-recommended-scss` [#122](https://github.com/pulp/pulp-ui/pull/122)

### New Contributors
* @pedro-psb made their first contribution in https://github.com/pulp/pulp-ui/pull/107

**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.7...v0.1.8

---

## 0.1.7 (2024-10-19) {: #0.1.7 }

### What's Changed
* Remove galaxy info from about modal [#90](https://github.com/pulp/pulp-ui/pull/90)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.6...v0.1.7

---

## 0.1.6 (2024-10-18) {: #0.1.6 }

### What's Changed
* Fix date command for build startup [#94](https://github.com/pulp/pulp-ui/pull/94)
* Add Ubuntu update fix [#101](https://github.com/pulp/pulp-ui/pull/101)
* Login - add warning about basic auth [#104](https://github.com/pulp/pulp-ui/pull/104)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.5...v0.1.6

---

## 0.1.5 (2024-10-10) {: #0.1.5 }

**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.4...v0.1.5

---

## 0.1.4 (2024-10-07) {: #0.1.4 }

### What's Changed
* RPM list [#72](https://github.com/pulp/pulp-ui/pull/72)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.3...v0.1.4

---

## 0.1.3 (2024-10-07) {: #0.1.3 }

### What's Changed
* Add utility function has\_plugins [#74](https://github.com/pulp/pulp-ui/pull/74)
* Paths - reorganize by plugin [#82](https://github.com/pulp/pulp-ui/pull/82)
* Filter menu based on plugins [#86](https://github.com/pulp/pulp-ui/pull/86)


**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.2...v0.1.3

---

## 0.1.2 (2024-10-01) {: #0.1.2 }

**Full Changelog**: https://github.com/pulp/pulp-ui/compare/v0.1.1...v0.1.2

---

## 0.1.1 (2024-10-01) {: #0.1.1 }
`````

## File: pulp-docs/pulp-ui/README.md
`````markdown
# pulp-ui

A community driven UI for [Pulp](https://pulpproject.org/).

## How to run

### backend

You can follow the [pulp-oci-images quickstart](https://pulpproject.org/pulp-oci-images/docs/admin/tutorials/quickstart/),
TLDR:

#### setup:

```sh
mkdir -p ~/pulp-backend-oci/{settings/certs,pulp_storage,pgsql,containers}
cd ~/pulp-backend-oci/
echo "
CONTENT_ORIGIN='http://$(hostname):8080'
ANSIBLE_API_HOSTNAME='http://$(hostname):8080'
ANSIBLE_CONTENT_HOSTNAME='http://$(hostname):8080/pulp/content'
" >> settings/settings.py
```

#### run:

```sh
cd ~/pulp-backend-oci/
podman run --publish 8080:80 \
           --replace --name pulp \
           --volume "$(pwd)/settings":/etc/pulp \
           --volume "$(pwd)/pulp_storage":/var/lib/pulp \
           --volume "$(pwd)/pgsql":/var/lib/pgsql \
           --volume "$(pwd)/containers":/var/lib/containers \
           docker.io/pulp/pulp
```

#### check:

```sh
curl localhost:8080/pulp/api/v3/status/ | jq
```

or open http://localhost:8080/pulp/api/v3/status/

#### change password:

```sh
podman exec -it pulp pulpcore-manager reset-admin-password --password admin
```
```sh
docker exec -it compose-pulp_api-1 pulpcore-manager reset-admin-password --password admin
```

#### configure `pulp-cli`:

```sh
pip install pulp-cli[pygments]
pulp config create --username admin --base-url http://localhost:8080 --password admin

pulp --help
pulp user list
```

### frontend

```sh
npm install
npm run start
```

and open http://localhost:8002/ :tada: :)

If your API listens elsewhere, you can use `API_PROXY=http://elsewhere:12345 npm run start` instead.


## Misc

### post-build configuration

The UI builds produced by `npm run build` can be further configured by serving a `/pulp-ui-config.json` alongside the built UI.
(Note it has to be mapped at `/`, not just wherever `index.html` is served from.)

* `API_BASE_PATH` - defaults to `/pulp/api/v3/` - change when using domains or a different path
* `UI_BASE_PATH` - defaults to `/ui/` - change when only serving index in a subdirectory, or want different browser path prefix
* `UI_EXTERNAL_LOGIN_URI` - defaults to nothing - set to something like `/login/` when using an SSO
* `EXTRA_VERSION` - an extra version string to display in about modal
`````

## File: pulp-docs/pulpcore/CHANGES/.TEMPLATE.md
`````markdown
{# TOWNCRIER TEMPLATE #}
{% for section, _ in sections.items() %}
{%- set section_slug = "-" + section|replace(" ", "-")|replace("_", "-")|lower %}
{%- if section %}

### {{section}} {: #{{versiondata.version}}{{section_slug}} }
{% else %}
{%- set section_slug = "" %}
{% endif %}
{% if sections[section] %}
{% for category, val in definitions.items() if category in sections[section]%}

#### {{ definitions[category]['name'] }} {: #{{versiondata.version}}{{section_slug}}-{{category}} }

{% if definitions[category]['showcontent'] %}
{% for text, values in sections[section][category].items() %}
- {{ text }}
{% if values %}
  {{ values|join(',\n  ') }}
{% endif %}
{% endfor %}
{% else %}
- {{ sections[section][category]['']|join(', ') }}
{% endif %}
{% if sections[section][category]|length == 0 %}

No significant changes.
{% else %}
{% endif %}
{% endfor %}
{% else %}

No significant changes.
{% endif %}
{% endfor %}

---
`````

## File: pulp-docs/pulpcore/docs/admin/guides/auth/basic.md
`````markdown
# Authenticate using basic credentials

Pulp by default uses [Basic Authentication](https://tools.ietf.org/html/rfc7617) which checks the
user submitted header against an internal database of users. If the username and password match, the
request is considered authenticated as that username. Basic auth transmits credentials as
user-id and password joined with a colon and then encoded using Base64. This is passed along as the
`Authorization` header.

Below is an example of a Basic Authentication header for a username `admin` and password
`password`.:

```
Authorization: Basic YWRtaW46cGFzc3dvcmQ=
```

You can set this header on a [httpie](https://httpie.org/) command using the `--auth` option:

```
http --auth admin:password ...
```

You could also specify the header manually on a [httpie](https://httpie.org/) command using its
header syntax:

```
http Authorization:"Basic YWRtaW46cGFzc3dvcmQ=" ...
```

!!! warning
    For the 3.y releases, Pulp expects the user table to have exactly 1 user in it named 'admin',
    which is created automatically when the initial migration is applied. The password for this user
    can be set with the `pulpcore-manager reset-admin-password` command.
    To articulate what you'd like to see future versions of Pulp file a feature request
    [here](https://github.com/pulp/pulpcore/issues) or reach out via
    [pulp-list@redhat.com](https://www.redhat.com/mailman/listinfo/pulp-list).


## Disabling Basic Authentication

Basic Authentication is defined by receiving the username and password encoded in the
`Authorization` header. To disable receiving the username and password using Basic Authentication,
remove the `rest_framework.authentication.BasicAuthentication` from the
`REST_FRAMEWORK['DEFAULT_AUTHENTICATION_CLASSES']` list.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/auth/external.md
`````markdown
# Authenticate using external service

Pulp can be configured to use authentication provided in the webserver outside of Pulp. This allows
for integration with ldap for example, through [mod_ldap](https://httpd.apache.org/docs/2.4/mod/mod_ldap.html), or certificate based API access, etc.

## Enable external Auth

### 1. Accept external Auth

Accept external auth instead of checking the internal users database by setting the
`AUTHENTICATION_BACKENDS` to `['django.contrib.auth.backends.RemoteUserBackend']`.

This will cause Pulp to accept any username for each request and by default create a user in the database
backend for them. To have any name accepted but not create the user in the database backend, use the
`pulpcore.app.authentication.PulpNoCreateRemoteUserBackend` instead.

It is preferable to have users created because the authorization and permissions continue to
function normally since there are users in the Django database to assign permissions to and later
check. When using the `pulpcore.app.authentication.PulpNoCreateRemoteUserBackend` you also should
set the `DEFAULT_PERMISSION_CLASSES` to check permissions differently or not at all. By default
Pulp sets `DEFAULT_PERMISSION_CLASSES` to `pulpcore.plugin.access_policy.AccessPolicyFromDB`
which provides role based permission checking via a user in the database. For example, to only serve
to authenticated users specify set `DEFAULT_PERMISSION_CLASSES` to
`rest_framework.permissions.IsAuthenticated`. Alternatively, to allow any user (even
unauthenticated) use `rest_framework.permissions.AllowAny`.

### 2. Configure 

Specify how to receive the username from the webserver. Do this by specifying to DRF an
`DEFAULT_AUTHENTICATION_CLASSES`. For example, consider this example:

 ```python
 REST_FRAMEWORK['DEFAULT_AUTHENTICATION_CLASSES'] = (
     'rest_framework.authentication.SessionAuthentication',
     'pulpcore.app.authentication.PulpRemoteUserAuthentication'
 )
 ```

This removes `rest_framework.authentication.BasicAuthentication`, but retains
`rest_framework.authentication.SessionAuthentication` and adds
`PulpRemoteUserAuthentication`. This accepts the username as WSGI environment variable
`REMOTE_USER` by default, but can be configured via the
`REMOTE_USER_ENVIRON_NAME <remote-user-environ-name>` Pulp setting.



## Webserver Auth in Same Webserver

If your webserver authentication is occurring in the same webserver that is serving the
`pulpcore.app.wsgi` application, you can pass the authenticated username to Pulp via the WSGI
environment variable `REMOTE_USER`.

Reading the `REMOTE_USER` WSGI environment is the default behavior of the
`rest_framework.authentication.RemoteUserAuthentication` and the Pulp provided
`pulpcore.app.authentication.PulpRemoteUserAuthentication`. The only difference in the Pulp
provided one is that the WSGI environment variable name can be configured.

See the `REMOTE_USER_ENVIRON_NAME <remote-user-environ-name>` for configuring the WSGI provided
name, but if you are using the `REMOTE_USER` WSGI environment name with "same webserver"
authentication, you likely want to leave `REMOTE_USER_ENVIRON_NAME <remote-user-environ-name>`
unset and configure the webserver to set the `REMOTE_USER` WSGI environment variable.



## Webserver Auth with Reverse Proxy

For example purposes, assume you're using Nginx with LDAP authentication required and after
authenticating it reverse proxies your request to the gunicorn process running the pulpcore.app.wsgi
application. That would look like this:

```
nginx <---http---> gunicorn <----WSGI----> pulpcore.app.wsgi application
```

With nginx providing authentication, all it can do is pass `REMOTE-USER` (or similar name) to the
application webserver, i.e. gunicorn. You can pass the header as part of the proxy request in nginx
with a config line like:

```
proxy_set_header REMOTE-USER $remote_user;
```

Per the [WSGI standard](https://www.python.org/dev/peps/pep-0333/#environ-variables),
any incoming headers will be prepended with a `HTTP_`. The above line would send
the header named `REMOTE-USER` to gunicorn, and the WSGI application would receive
it as `HTTP_REMOTE_USER` (after gunicorn normalization). The default configuration
of Pulp is expecting `REMOTE_USER` in the WSGI environment not `HTTP_REMOTE_USER`,
so this won't work with `pulpcore.app.authentication.PulpRemoteUserAuthentication`
or the Django Rest Framework provided `rest_framework.authentication.RemoteUserAuthentication` as is.

Pulp provides a setting named `REMOTE_USER_ENVIRON_NAME <remote-user-environ-name>` which allows
you to specify another WSGI environment variable to read the authenticated username from.

!!! warning

    Configuring this has serious security implications. See the [Django warning at the end of this
    section in their docs](https://docs.djangoproject.com/en/4.2/howto/auth-remote-user/#configuration) for more details.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/auth/index.md
`````markdown
# Overview

By default, Pulp supports Basic and Session authentication. The Basic Authentication checks the
username and password against the internal users database.

!!! note
    This authentication is only for the REST API. Clients fetching binary data have their identity
    verified and authorization checked using a `ContentGuard`.


## Which URLs Require Authentication?

All URLs in the REST API require authentication except the Status API, `/pulp/api/v3/status/`.

## Concepts

Authentication in Pulp is provided by Django Rest Framework and Django together.

Django provides the [AUTHENTICATION_BACKENDS](https://docs.djangoproject.com/en/4.2/ref/settings/#std:setting-AUTHENTICATION_BACKENDS) which defines a set of behaviors to check usernames and
passwords against. By default it is set to:

```python
AUTHENTICATION_BACKENDS = [
    'django.contrib.auth.backends.ModelBackend',  # Django's users, groups, and permissions
    'pulpcore.backends.ObjectRolePermissionBackend'  # Pulp's RBAC object and model permissions
]
```

Django Rest Framework defines the source usernames and passwords come from with the
[DEFAULT_AUTHENTICATION_CLASSES](https://www.django-rest-framework.org/api-guide/authentication/#setting-the-authentication-scheme) setting. By default it is set to:

```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.SessionAuthentication',  # Session Auth
        'rest_framework.authentication.BasicAuthentication'  # Basic Auth
    ]
}
```

## Extend

Pulp is a Django app and Django Rest Framework (DRF) application, so additional authentication can
be added as long as it's correctly configured for both Django and Django Rest Frameowork.

See the [Django docs on configuring custom authentication](https://docs.djangoproject.com/en/4.2/topics/auth/customizing/#customizing-authentication-in-django) and the [Django Rest Framework docs
on configuring custom authentication](https://www.django-rest-framework.org/api-guide/authentication/#custom-authentication).
`````

## File: pulp-docs/pulpcore/docs/admin/guides/auth/json_header.md
`````markdown
# JSON Header Authentication

In a situation where it is not possible to use `Basic Authentication` Pulp can rely on a third-party
service to authenticate a user.
Using `JSONHeaderRemoteAuthentication` it's possible to receive a payload and even use `JQ` to filter
it and obtain the relevant data. The user is created in the database if one is not found.

You can set `AUTHENTICATION_JSON_HEADER` and `AUTHENTICATION_JSON_HEADER_JQ_FILTER` to obtain a user
given a header name and its value respectively::

```python title="settings.py"
AUTHENTICATION_JSON_HEADER = "HTTP_X_AUTHENTICATION_SERVICE"
AUTHENTICATION_JSON_HEADER_JQ_FILTER = ".identity.user.username"
```

will look for a `x-authentication-service` header and its content. With the given filter, it will
extract the information from a payload like this::
    
```json
{
  identity: {
    user: {
      username: "user"
    }
  }
}

```

## Enabling JSONHeaderRemoteAuthentication

The `JSONHeaderRemoteAuthentication` can be enabled by:

1. Add the `django.contrib.auth.backends.RemoteUserBackend` to
`AUTHENTICATION_BACKENDS`, or some authentication backend that subclasses it.

2. You need to add the `pulpcore.app.authentication.JSONHeaderRemoteAuthentication` to 
`REST_FRAMEWORK['DEFAULT_AUTHENTICATION_CLASSES']` setting.

3. Change the `AUTHENTICATION_JSON_HEADER` to your value of choice. Remember that it
must start with `HTTP_`, so, if your header is `x-authentication-service`, you need to set it to 
`HTTP_X_AUTHENTICATION_SERVICE`.

4. Set a JQ filter on `AUTHENTICATION_JSON_HEADER_JQ_FILTER`. You can find the JQ query syntax and reference on its
official site [here](https://jqlang.github.io/jq/).

Remember that the content of the header must be Base64 encoded.

## Enabling the ThirdParty Authentication Schema

In a case where Pulp is deployed behind an API Gateway which could require a specific authentication schema, it may be necessary to indicate to the clients which authorization process to use.
For this scenario, you may be able to provide an OpenAPI security schema describing it to be interpreted by clients.

To enable that, you have to configure the `AUTHENTICATION_JSON_HEADER_OPENAPI_SECURITY_SCHEME` setting with a payload following the [Security Scheme Object definition](https://spec.openapis.org/oas/latest.html#security-scheme-object).
Here are some examples describing a HTTP basic auth, a simple bearer server and an OAuth2 authentication scheme:

=== HTTP Basic Authentication
    ```json
    AUTHENTICATION_JSON_HEADER_OPENAPI_SECURITY_SCHEME = {
        "type": "http",
        "description": "External HTTP Basic integration",
        "scheme": "basic",
    } 
    ```

=== Bearer/Token Authentication
    ```json
    AUTHENTICATION_JSON_HEADER_OPENAPI_SECURITY_SCHEME = {
        "type": "apiKey",
        "in": "header",
        "name": "HeaderName",
        "description": "External Bearer/Token integration",
    } 
    ```

=== OAuth2 Authentication
    ```json
    AUTHENTICATION_JSON_HEADER_OPENAPI_SECURITY_SCHEME = {
        "type": "oauth2",
        "description": "External OAuth integration",
        "flows": {
            "clientCredentials": {
                "tokenUrl": "https://your-identity-provider/token/issuer",
                "scopes": {"api.console": "grant_access_to_pulp"}
            }
        }
    }
    ```
`````

## File: pulp-docs/pulpcore/docs/admin/guides/auth/keycloak.md
`````markdown
# Authenticate using Keycloak

Pulp can be configured to use authentication provided by a Keycloak server outside of Pulp.
[Keycloak](https://www.keycloak.org/) can provide Identity Brokering, User Federation, Single
sign-on, and act as a OpenID Connect-based (OIDC) Identity Provider.



## Required Python Modules

The library that will be utilized for the integration between Keycloak and Pulp is
[python-social-auth](https://python-social-auth.readthedocs.io/en/latest/index.html). The
following python modules must be installed in order to make use of python-social-auth within Pulp:

```bash
social-auth-core
social-auth-app-Django
```



## Python Social Auth and Django

The [python-social-auth documentation](https://python-social-auth.readthedocs.io/en/latest/configuration/django.html)
describes the django updates necessary to configure social-auth.

Enable general python social integration with the following steps:

### 1. Add the application to INSTALLED_APPS

```python title="settings.py"
INSTALLED_APPS = (
   ...
   'social_django',
   ...
)
```

### 2. Accept Keycloak auth

Accept Keycloak auth instead of checking the internal users database by enabling:

```python title="settings.py"
AUTHENTICATION_BACKENDS = [
   ...
   'social_core.backends.keycloak.KeycloakOAuth2',
   ...
]
```

### 3. Update the context processor

Update the context processor that will add backends and associations data to the template context:

```python title="settings.py"
TEMPLATES = [
   {
       ...
       'OPTIONS': {
           ...
           'context_processors': [
               ...
               'social_django.context_processors.backends',
               'social_django.context_processors.login_redirect',
               ...
           ]
       }
   }
]
```

### 4. Define the authentication pipeline

Define the authentication pipeline for data that will be associated with users:

```python title="settings.py"
SOCIAL_AUTH_PIPELINE = (
   'social_core.pipeline.social_auth.social_details',
   'social_core.pipeline.social_auth.social_uid',
   'social_core.pipeline.social_auth.social_user',
   'social_core.pipeline.user.get_username',
   'social_core.pipeline.social_auth.associate_by_email',
   'social_core.pipeline.user.create_user',
   'social_core.pipeline.social_auth.associate_user',
   'social_core.pipeline.social_auth.load_extra_data',
   'social_core.pipeline.user.user_details',
)
```



## Python Social Auth and Keycloak

The python-social-auth keycloak backend
[documentation](https://python-social-auth.readthedocs.io/en/latest/backends/keycloak.html#keycloak-open-source-red-hat-sso)
describes the necessary Keycloak integration variables.

Enable python social and Keycloak integration with the following steps:

1) On your Keycloak server, create a Realm (pulp)

2) Create a Client in the new Realm

3) Configure the Client `Access Type` to be "confidential.

Provide `` Valid Redirect URIs` `` with
 `http://<pulp-hostname>:<port>/*`. Set the `User Info Signed Response Algorithm` and
 `Request Object Signature Algorithm` is set to `RS256` in the
 `Fine Grain OpenID Connect Configuration` section

4) In the Pulp settings, add the value for the `Client ID`:

 ```
 SOCIAL_AUTH_KEYCLOAK_KEY = '<Client ID>'
 ```

5) Gather the `Client Secret` for the Pulp settings. You can find the `Client Secret` in the
   Credentials tab:

 ```
 SOCIAL_AUTH_KEYCLOAK_SECRET = '<Client Secret>'
 ```

6) Collect the `Public Key` from the Realm's Keys tab:

 ```
 SOCIAL_AUTH_KEYCLOAK_PUBLIC_KEY = '<Public Key>'
 ```

7) Add the `authorization_endpoint` and `token_endpoint` URL that you find to the Realm OpenID Endpoint
   Configuration to the Pulp settings:

 ```
 SOCIAL_AUTH_KEYCLOAK_AUTHORIZATION_URL = \
     'https://iam.example.com/auth/realms/pulp/protocol/openid-connect/auth/'
 SOCIAL_AUTH_KEYCLOAK_ACCESS_TOKEN_URL = \
     'https://iam.example.com/auth/realms/pulp/protocol/openid-connect/token/'
 ```

8) Create an audience mapper for the JWT token.

In the Client, select the Mappers tab, select the Create button to create a Mapper. Name the mapper, for example, "Audience Mapper".
From the `Mapper Type` list, select "Audience". Define the `Included Client Audience` to be the `Client ID`.
Enable this for both the ID token and access token.

9) Add additional Built-in Mappers to the JWT to populate the token with the data defined in the Social Auth Pipeline.
  
To do this, in the Client again select the Mappers tab. Next select the
"Add Builtin" button and you will be presented with a table of mappers that can be chosen.
Common choices are `username`, `email`, `groups`, `given name`, `family name`,
`full name`, `updated at`, and `email verified`.

After setup is completed go to: `http://<pulp-hostname>:<port>/login/keycloak` and the login flow
will be presented.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/configure-pulp/configure-storages.md
`````markdown
# Configure Storage Backend

Pulp uses [django-storages](https://django-storages.readthedocs.io) to support multiple storage backends.
See the reference for the [`STORAGES` settings](site:pulpcore/docs/admin/reference/settings/#storages).

## Modifying the settings

The settings can be updated via the `settings.py` file or through environment variables
and have support to dynaconf merge features.
The means to modify them will depend on your deployment option.

Learn more on the [Settings Introduction](site:pulpcore/docs/admin/guides/configure-pulp/).

## Local Filesystem (default)

### Example

In this example, the storage file permission and `MEDIA_ROOT` are overridden:

```python
STORAGES = {
    "default": {
        "BACKEND": "pulpcore.app.models.storage.FileSystem",
        "OPTIONS": {
            "file_permissions_mode": 0o600,
            "directory_permissions_mode": 0o600,
        },
    },
}
MEDIA_ROOT="/custom/media/root"  # default: /var/lib/pulp/media
```

Notes:

* The [`MEDIA_ROOT`](site:pulpcore/docs/admin/reference/settings/#media_root) setting specifies where Pulp
will save the files.
* Pulp customizes Django's default class, `django.core.files.storage.FileSystemStorage`. The original can't be used.
* There are some other related global definitions provided by django:
    * `MEDIA_URL`
    * `FILE_UPLOAD_PERMISSIONS`
    * `FILE_UPLOAD_DIRECTORY_PERMISSIONS`

Comprehensive options for Local Filesystem can be found in
[Django docs](https://docs.djangoproject.com/en/4.2/ref/files/storage/#django.core.files.storage.FileSystemStorage).

## Amazon S3

### Setup

Before you can configure Amazon S3 storage to use with Pulp, ensure that you complete the following steps
(consult the official Amazon S3 docs for precise steps).

1. Set up an AWS account.
2. Create an S3 bucket for Pulp to use.
3. In AWS Identity and Access Management (IAM), create a user that Pulp can use to access your S3 bucket.
4. Save the access key id and secret access key.

### Example

In this example, the storage uses a bucket called `pulp3` that is hosted in region `eu-central-1`:

```python
MEDIA_ROOT = ""
STORAGES = {
    "default": {
        "BACKEND": "storages.backends.s3.S3Storage",
        "OPTIONS": {
            "access_key": 'AKIAIT2Z5TDYPX3ARJBA',
            "secret_key": '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',
            "bucket_name": 'pulp3',
            "signature_version": "s3v4",
            "addressing_style": "path",
            "region_name": "eu-central-1",
        },
    },
}
```

Notes:

* `MEDIA_ROOT` must be set to an empty string.
* You can omit `access_key` and `secret_key` if:
    1. The system that hosts Pulp is running on AWS
    2. And the [`instance_profile`](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html) provides access to the S3 bucket


### Configure AWS CloudFront for Content Distribution

Check out how to configure [django-storages to use CloudFront with URL signing](https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html#cloudfront-signed-urls).

Also, you can follow this [doc](https://github.com/aws-samples/amazon-cloudfront-signed-urls-using-lambda-secretsmanager/tree/main/2-Create_CloudFront_Distribution) to understand what you need to configure on AWS side.

You'll need:

- The standard options for a normal S3 Bucket (access_key, secret_key, bucket_name and region_name)
- A CloudFront Key ID (`cloudfront_key_id`)
- A CloudFront Key (`cloudfront_key`)
- And a Custom Domain (`custom_domain`)

When creating a `Domain` you can use the following payload:

```json
{
  "name": "cloudfront_storage",
  "storage_class": "storages.backends.s3boto3.S3Boto3Storage",
  "storage_settings": {
    "access_key": "{aws_access_key}",
    "secret_key": "{aws_secret_key}",
    "bucket_name": "{aws_bucket_name}",
    "region_name": "{aws_region_name}",
    "default_acl": "private",
    "cloudfront_key_id": "{aws_cloudfront_key_id}",
    "cloudfront_key": "{aws_cloudfront_key}",
    "custom_domain": "{aws_cloudfront_custom_domain}"
  },
  "redirect_to_object_storage": true,
  "hide_guarded_distributions": false
}
```

=== "Create a new Domain"

    ```bash
    # We need to format our key to a JSON friendly format
    export CLOUDFRONT_KEY=$(cat keyfile.pem | jq -sR .)

    curl -X POST $BASE_HREF/pulp/default/api/v3/domains/ -d '{"name": "cloudfront_storage", "storage_class": "storages.backends.s3boto3.S3Boto3Storage", "storage_settings": {"access_key": "{aws_access_key}", "secret_key": "{aws_secret_key}", "bucket_name": "{aws_bucket_name}", "region_name": "{aws_region_name}", "default_acl": "private", "cloudfront_key_id": "{aws_cloudfront_key_id}", "cloudfront_key": '"$CLOUDFRONT_KEY"', "custom_domain": "{aws_cloudfront_custom_domain}"}, "redirect_to_object_storage": true, "hide_guarded_distributions": false}' -H 'Content-Type: application/json'
    ```

=== "Create a new Domain using pulp-cli"

    ```bash
    export CLOUDFRONT_KEY=$(cat keyfile.pem | jq -sR .)

    pulp domain create --name cloudfront_test --storage-class storages.backends.s3boto3.S3Boto3Storage --storage-settings '{"access_key": "{aws_access_key}", "secret_key": "{aws_secret_key}", "bucket_name": "{aws_bucket_name}", "region_name": "{aws_region_name}", "default_acl": "private", "cloudfront_key_id": "{aws_cloudfront_key_id}", "cloudfront_key": '"$CLOUDFRONT_KEY"', "custom_domain": "{aws_cloudfront_custom_domain}"}'
    ```

Create your remotes, repositories, and distributions under this domain and the requests will be redirected to the
CloudFront custom domain specified.


Comprehensive options for Amazon S3 can be found in
[`django-storages` docs](https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html#configuration-settings).

## S3 Compatible

The same `storages.backends.s3.S3Storage` backend can be used for S3 Compatible API services, such as [Minio](https://min.io/), [Ceph/RADOS](https://docs.ceph.com/en/reef/man/8/rados/) and [Backblaze B2](https://www.backblaze.com/cloud-storage).

The [django-storages](https://django-storages.readthedocs.io/en/latest/backends/s3_compatible/index.html) documentation
provides a reference for setting up some of these services.

## Azure Blob storage

### Setup

Before you can configure Azure Blob storage to use with Pulp, ensure that you complete the following steps
(consult the official Azure documentation for precise steps).

1. Set up an Azure account and create a storage account.
2. In your storage account, create a container under `Blob` service.
3. Obtain the access credentials so that you can later configure Pulp to access your Azure Blob storage. You can find the access credentials
   at the storage account level, at Access keys (these are automatically generated).

### Example

In this example, the storage uses a container called `pulp3` with the `pulp-account` username.

```python
MEDIA_ROOT = ""
STORAGES = {
    "default": {
        "BACKEND": "storages.backends.azure_storage.AzureStorage",
        "OPTIONS": {
            "account_name": 'pulp-account',
            "azure_container": 'pulp3',
            "account_key": 'Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==',
            "expiration_secs": 60,
            "overwrite_files": 'True',
            "location": 'pulp3'
        },
    },
}
```

Notes:

* `MEDIA_ROOT` must be set to an empty string.

Comprehensive options for Azure Blob can be found in
[`django-storages` docs](https://django-storages.readthedocs.io/en/latest/backends/azure.html#configuration-settings).
`````

## File: pulp-docs/pulpcore/docs/admin/guides/configure-pulp/db-encryption.md
`````markdown
# Database Encryption

Pulp attempts to protect certain pieces of sensitive data by storing some fields encrypted.
For example this includes credentials used by remotes, storage configurations for domains and generally task arguments.
The encryption is performed using a symmetric fernet key.
It must be provided as a url-safe base64-encoded string of 32 random bytes in a file.
This file is then referenced by the `DB_ENCRYPTION_KEY` setting and must be unique to the whole installation.
In containerized deployments, the setting can point to a properly shaped cluster secret.

!!! note

    Such a key is automatically generated by default when using the pulp-oci-images.

!!! warning

    This key should be included in your backup strategy,
    as losing it will result in some Pulp functionality ceasing to work.
    This bears the potential of data loss.

To generate such a key with openssl, use:

```
openssl rand -base64 32 > /etc/pulp/certs/database_fields.symmetric.key
```

## Key Rotation

This file can contain multiple such keys (one per line).
The key in the first line will be used for encryption but all others will still be attempted to decrypt old tokens.
This can help you to rotate this key in the following way:

### Key Rotation with Downtime

1. Shut down all Pulp services (api, content and worker processes).
1. Add a new key at the _top_ of the key file.
1. Call `pulpcore-manager rotate-db-key`.
1. Remove the old key (on the second line) from the key file.
1. Start the Pulp services again.

### Key Rotation without Downtime

For a zero downtime key rotation you can follow the slightly more complex recipe:

1. Add a new key at the _bottom_ of the key file.
1. Restart the Pulp services in the usual phased manner.
1. Swap the keys in the key file.
1. Restart the Pulp services again.
1. Call `pulpcore-manager rotate-db-key`.
1. Remove the old key (on the second line) from the key file.
1. Restart the Pulp services for the last time.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/configure-pulp/index.md
`````markdown
# Introduction

Pulp uses [dynaconf](https://www.dynaconf.com/) for its settings which allows you
to configure Pulp settings using various ways:

- `Environment Variables <env-var-settings>` - Enabled by default.
- `Configuration File <config-file-settings>` - Disabled by default, but easy to enable.

!!! note "Available Settings"

    For a comprehensive list of core settings, refer to the
    [Settings Reference](site:pulpcore/docs/admin/reference/settings/).

    Plugin-specific settings are typically located in the corresponding Admin/Reference section

!!! note "Deployment-specific instructions"

    For specialized instruction on how to edit/set files and environment, check the guide appropriate to your deployment option:

    * [Container (single-process) quickstart](site:pulp-oci-images/docs/admin/tutorials/quickstart/#single-container)
    * [Container (multi-process) quickstart](site:pulp-oci-images/docs/admin/tutorials/quickstart/#podman-or-docker-compose)
    * [Pulp Operator quickstart](site:pulp-operator/docs/admin/tutorials/quickstart-kubernetes/)

## Configure

### Through Environment Variables

Configuration by specifying environment variables is enabled by default. Any
`Setting ` can be configured using Dynaconf by prepending `PULP_` to the setting
name. For example `SECRET_KEY <secret-key-setting>` can be specified as the `PULP_SECRET_KEY`
environment variable. For example, in a shell you can use `export` to set this:

```bash
export PULP_SECRET_KEY="This should be a 50 chars or longer unique secret!"
```

### Through Configuration File

By default, Pulp does not read settings from a configuration file. Enable this by specifying the
`PULP_SETTINGS` environment variable with the path to your configuration file. For example:

```bash
export PULP_SETTINGS=/etc/pulp/settings.py
```

Then you can specify settings with Python variable assignment in the `/etc/pulp/settings.py`. For
example, you can specify `SECRET_KEY <secret-key-setting>` with:

```bash
$ cat /etc/pulp/settings.py
SECRET_KEY="This should be a 50 chars or longer unique secret!"
```

In this example the settings file ends in ".py" so it needs to be valid Python, but it could use any
[dynaconf supported format](https://www.dynaconf.com/#supported-formats).

!!! note
    The configuration file and directories containing the configuration file must be readable by the
    user Pulp runs as. If using SELinux, assign the `system_u:object_r:pulpcore_etc_t:s0` label.


## View Settings

To view the effective settings on a Pulp installation you can use `dynaconf` commands.
Refer to the cli help for detailed usage instructions:

- `dynaconf list`: List all effective settings
- `dynaconf get -k <settings>`: Show value for a given key
- `dynaconf inspect -k <setting>`: Show debug info for a given key (e.g, load history)

For dynaconf to work, it'a required to set `DJANGO_SETTINGS_MODULE` to the django settings module location.
E.g, `export DJANGO_SETTINGS_MODULE=pulpcore.app.settings`.

The installations provided by Pulp will usually have that already set by default.

!!! note
    Settings can come from both settings file and environment variables. When running the
    `dynaconf list` command, be sure you have the same environment variables set as your Pulp
    installation.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/_SUMMARY.md
`````markdown
* Authentication
    * [Using Basic Auth](auth/basic.md)
    * [Using external service](auth/external.md)
    * [Using Keycloak](auth/keycloak.md)
    * [Using JSON Header](auth/json_header.md)
    * auth/*.md
* Configuration
    * [Introduction](configure-pulp/index.md)
    * [Database Encryption](configure-pulp/db-encryption.md)
    * [Configure Storage backends](configure-pulp/configure-storages.md)
* *.md
`````

## File: pulp-docs/pulpcore/docs/admin/guides/import-export-repos.md
`````markdown
# Import/Export Repositories

## Overview

There is a use-case for extracting the content and `Artifacts` for a set of
`RepositoryVersions`, out of a running instance of Pulp and into
a file that can then be transferred to another Pulp instance and imported. This is not
the Pulp-to-Pulp sync case; the assumption is that the receiving Pulp instance is
network-isolated.

The high-level workflow for this use case is

1. On the Upstream Pulp instance, an Exporter is defined for the set of
`Repositories` that are to be exported to some Downstream Pulp instance.
1. That Exporter is requested to produce and execute an Export for the current
`RepositoryVersions` of the specified `Repositories`
1. The resulting `.tar` Export is transferred to the appropriate Downstream.
1. On the Downstream Pulp instance, an Importer is defined, that maps the incoming
Upstream `Repositories` to matching Downstream
`Repositories`.
1. That Importer is requested to produce and execute an Import, pointing to the provided
export file from the Upstream.

In order to minimize space utilization, import/export operates on sets of
`Repositories`. This allows the Export operation to export shared
`Artifacts` only once per-export, rather than once for each
`Repository` being exported.

## Definitions

### Upstream

Pulp instance whose `RepositoryVersions` we want to export

### Downstream

Pulp instance that will be importing those `RepositoryVersions`

### ModelResource

entity that understands how to map the metadata for a specific Model
owned/controlled by a plugin to an exportable file-format
(see [django-import-export](https://django-import-export.readthedocs.io/en/latest/api_resources.html#modelresource))

### Exporter

resource that exports content from Pulp for a variety of different use cases

### PulpExporter

kind-of Exporter, that is specifically used to export data from an Upstream
for consumption by a Downstream

### PulpExport

specific instantiation/run of a PulpExporter

### Export file

compressed tarfile containing database content and `Artifacts` for
`RepositoryVersions`, generated during execution of an Export

### PulpImporter

resource that accepts an Upstream PulpExporter export file, and manages
the process of importing the content and `Artifacts` included

### PulpImport

specific instantiation/run of a PulpImporter

### Repository-mapping

configuration file that provides the ability to map an Upstream `Repository`,
to a Downstream `Repository`, into which the Upstream’s `RepositoryVersion`
should be imported by a PulpImporter

### Import order

for complicated repository-types, managing relationships requires that
ModelResources be imported in order. Plugins are responsible for specifying the
import-order of the ModelResources they own

## Assumptions

The import/export workflow operates on a set of assumptions. Violating them will result
in error-messages as described below.

### On-Demand content not supported

Export will not operate on `RepositoryVersions` that have
been synchronized using `policy=on_demand` or `policy=streamed`. `Artifacts`
must actually exist in order to be exported - this is, after
all the only way for the Downstream Pulp instance to gain access to them!

If a repository is specified for export that utilized on-demand/streamed syncing, the
export will fail with a RuntimeError:

```
Remote artifacts cannot be exported.
```

### Export/Import Directories must be explicitly allowed

Import and Export strictly control which directories may be read from/written to via
the settings options `ALLOWED_IMPORT_PATHS` and `ALLOWED_EXPORT_PATHS`.
These default to empty - if they not explicitly set, attempts to import or export will fail
with a validation error like

```
"Path '/tmp/exports/' is not an allowed export path"
```

### Installed plugins must match

A Downstream must support the complete set of plugins present in a given export. If the
export includes plugins that are not installed in the Downstream, an import attempt will
fail with a validation error like

```
Export uses pulp_rpm which is not installed.
```

### Version-compatibility required

The export-to-import workflow is built on the assumption that the Upstream and
Downstream instances are running "compatible" versions of pulpcore and plugins. In this
context, "compatible" is defined as **"share the same X.Y version"**.  If this is not the
case, an import attempt will fail with a validation error like

```
Export version 3.14.15 of pulpcore incompatible with installed version 3.16.3.
```

## Exporting

!!! note
    The following examples assume a Pulp instance that includes the `pulp_file` and
    `pulp_rpm` plugins. They also assume that the `http` and `jq` packages are
    installed.

These workflows are executed on an Upstream Pulp instance.

### Creating an Exporter

In this workflow, you define an Exporter for a set of `Repositories`.
This Exporter can be invoked repeatedly to regularly export the current
`RepositoryVersion` of each of the specified `Repositories`.

First, let's make a pair of `Repositories` named `zoo` and `isofile`,
and save their UUIDs as `ZOO_UUID` and `ISOFILE_UUID`

Set up 'zoo' repository":

```bash
# Create the repository
export ZOO_HREF=$(http POST :/pulp/api/v3/repositories/rpm/rpm/ name=zoo | jq -r '.pulp_href')

# add a remote
http POST :/pulp/api/v3/remotes/rpm/rpm/ name=zoo url=https://fixtures.pulpproject.org/rpm-signed/  policy='immediate'

# find remote's href
export REMOTE_HREF=$(http :/pulp/api/v3/remotes/rpm/rpm/ | jq -r ".results[] | select(.name == \"zoo\") | .pulp_href")

# sync the repository to give us some content
http POST :$ZOO_HREF'sync/' remote=$REMOTE_HREF
```

Set up 'isofile' repository:

```bash
# create the repository
ISOFILE_HREF=$(http POST :/pulp/api/v3/repositories/file/file/ name=isofile | jq -r '.pulp_href')

# add remote
http POST :/pulp/api/v3/remotes/file/file/ name=isofile url=https://fixtures.pulpproject.org/file/PULP_MANIFEST

# find remote's href
REMOTE_HREF=$(http :/pulp/api/v3/remotes/file/file/ | jq -r ".results[] | select(.name == \"isofile\") | .pulp_href")

# sync the repository to give us some content
http POST :$ISOFILE_HREF'sync/' remote=$REMOTE_HREF
```

Now that we have `Repositories` with content, let's define an Exporter named `test-exporter`
that will export these `Repositories` to the directory `/tmp/exports/`:

```bash
export EXPORTER_HREF=$(http POST :/pulp/api/v3/exporters/core/pulp/ \
    name=test-exporter                                              \
    repositories:=[\"${ISOFILE_HREF}\",\"${ZOO_HREF}\"]             \
    path=/tmp/exports/ | jq -r '.pulp_href')
http GET :${EXPORTER_HREF}
```

### Exporting Content

Once we have an Exporter defined, we invoke it to generate an export-file in the directory
specified by that Exporter's `path` attribute:

```bash
http POST :${EXPORTER_HREF}exports/
```

The resulting Export writes to a `.tar` file, in the directory pointed to by the
Exporter's path, with a name that follows the convention `export-<export-UUID>-YYYYmmdd_HHMM.tar`.

It will also produce a "table of contents" file describing the file (or files, see
[Exporting Chunked Files] below) for later use verifying and importing the results of the export:

```bash
ls /tmp/exports
export-32fd25c7-18b2-42de-b2f8-16f6d90358c3-20200416_2000.tar
export-32fd25c7-18b2-42de-b2f8-16f6d90358c3-20200416_2000-toc.json
python -m json.tool /tmp/exports/export-32fd25c7-18b2-42de-b2f8-16f6d90358c3-20200416_2000-toc.json
    {
    "meta": {
        "chunk_size": 0, # chunk_size in bytes, or 0 if an export did not use the chunk_size parameter
        "file": "export-32fd25c7-18b2-42de-b2f8-16f6d90358c3-20200416_2000.tar",
        "global_hash": "eaef962943915ecf6b5e45877b162364284bd9c4f367d9c96d18c408012ef424"
    },
    "files": {
        "export-32fd25c7-18b2-42de-b2f8-16f6d90358c3-20200416_2000.tar": "eaef962943915ecf6b5e45877b162364284bd9c4f367d9c96d18c408012ef424"
    }
}
```

These export files can now be transferred to a Downstream Pulp instance, and imported.

!!! note
    In the event of any failure during an export, the process will clean up any partial
    export-files that may have been generated. Export-files can be very large; this will
    preserve available space in the export-directory.


### Exporting Specific Versions

By default, the latest-versions of the `Repositories` specified in the Exporter are exported. However, you
can export specific `RepositoryVersions` of those `Repositories`
if you wish using the `versions=` parameter on the `/exports/` invocation.

Following the above example - let's assume we want to export the "zero'th" `RepositoryVersion` of the
repositories in our Exporter.:

```bash
http POST :${EXPORTER_HREF}exports/ \
    versions:=[\"${ISO_HREF}versions/0/\",\"${ZOO_HREF}versions/0/\"]
```

Note that the "zero'th" `RepositoryVersion` of a `Repository` is created when the `Repository` is created, and is empty. If you unpack the resulting Export `tar` you will find, for example, that there is no `artifacts/` directory and an empty `ArtifactResource.json` file:

```bash
cd /tmp/exports
tar xvf export-930ea60c-97b7-4e00-a737-70f773ebbb14-20200511_2005.tar
    versions.json
    pulpcore.app.modelresource.ArtifactResource.json
    pulpcore.app.modelresource.RepositoryResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulpcore.app.modelresource.ContentResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulpcore.app.modelresource.ContentArtifactResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.PackageResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.ModulemdResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.ModulemdDefaultsResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.PackageGroupResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.PackageCategoryResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.PackageEnvironmentResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.PackageLangpacksResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.UpdateRecordResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.DistributionTreeResource.json
    repository-3c1ec06a-b0d6-4d04-9f99-32bfc0a499a9_0/pulp_rpm.app.modelresource.RepoMetadataFileResource.json
    repository-958ae747-c19d-4820-828c-87452f1a5b8d_0/pulpcore.app.modelresource.ContentResource.json
    repository-958ae747-c19d-4820-828c-87452f1a5b8d_0/pulpcore.app.modelresource.ContentArtifactResource.json
    repository-958ae747-c19d-4820-828c-87452f1a5b8d_0/pulp_file.app.modelresource.FileContentResource.json
python -m json.tool pulpcore.app.modelresource.ArtifactResource.json
    []
```

### Exporting Incrementally

By default, PulpExport exports all of the content and artifacts of the
`RepositoryVersions` being exported. A common use-case is to do
regular transfers of content from an Upstream to a Downstream Pulp instance.  While you
**can** export everything every time, it is an inefficient use of time and disk storage to
do so; exporting only the "entities that have changed" is a better choice. You can
accomplish this by setting the `full` parameter on the `/exports/` invocation to
`False`:

```bash
http POST :${EXPORTER_HREF}exports/ full=False
```

This results in an export of all content-entities, but only `Artifacts`
that have been **added** since the `last_export` of the same Exporter.

You can override the use of `last_export` as the starting point of an incremental export by use of the `start_versions=`
parameter. Building on our example Exporter, if we want to do an incremental export of everything that's happened since the
**second** `RepositoryVersion` of each `Repository`, regardless of what happened in our last export,
we would issue a command such as the following:

```bash
http POST :${EXPORTER_HREF}exports/ \
    full=False                      \
    start_versions:=[\"${ISO_HREF}versions/1/\",\"${ZOO_HREF}versions/1/\"]
```

This would produce an incremental export of everything that had been added to our `Repositories`
between `RepositoryVersion` '1' and the `current_version` `RepositoryVersions`
of our `Repositories`.

Finally, if we need complete control over incremental exporting, we can combine the use of `start_versions=` and `versions=`
to produce an incremental export of everything that happened after `start_versions=` up to and including `versions=`:

```bash
http POST :${EXPORTER_HREF}exports/                                         \
    full=False                                                              \
    start_versions:=[\"${ISO_HREF}versions/1/\",\"${ZOO_HREF}versions/1/\"] \
    versions:=[\"${ISO_HREF}versions/3/\",\"${ZOO_HREF}versions/3/\"]
```

!!! note
    **Note** that specifying `start_versions=` without specifying `full=False` (i.e., asking for an incremental export)
    is an error, since it makes no sense to specify a 'starting version' for a full export.


### Exporting Chunked Files

By default, PulpExport streams data into a single `.tar` file. Since `Repositories`
can contain a lot of artifacts and content, that can result in a file too large to be
copied to transport media. In this case, you can specify a maximum-file-size, and the
export process will chunk the tar into a series of files no larger than this.

You accomplish this by setting the `chunk_size` parameter to the desired maximum number of bytes. This
parameter takes an integer, or size-units of KB, MB, or GB. Files appear in the Exporter.path
directory, with a four-digit sequence number suffix:

```bash
http POST :/pulp/api/v3/exporters/core/pulp/1ddbe6bf-a6c3-4a88-8614-ad9511d21b94/exports/ chunk_size="10KB"
    {
        "task": "/pulp/api/v3/tasks/da3350f7-0102-4dd5-81e0-81becf3ffdc7/"
    }
ls -l /tmp/exports/
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0000
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0001
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0002
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0003
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0004
    10K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0005
    2.3K export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0006
    1168 export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325-toc.json
```

The "table of contents" lists all the resulting files and their checksums:

```bash
python -m json.tool /tmp/exports/export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325-toc.json
{
    "meta": {
        "chunk_size": 10240,
        "file": "export-8c1891a3-ffb5-41a7-b141-51daa0e38a18-20200717_1947.tar",
        "global_hash": "eaef962943915ecf6b5e45877b162364284bd9c4f367d9c96d18c408012ef424"
    },
    "files": {
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0000": "8156874798802f773bcbaf994def6523888922bde7a939bc8ac795a5cbb25b85",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0001": "e52fac34b0b7b1d8602f5c116bf9d3eb5363d2cae82f7cc00cc4bd5653ded852",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0002": "df4a2ea551ff41e9fb046e03aa36459f216d4bcb07c23276b78a96b98ae2b517",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0003": "27a6ecba3cc51965fdda9ec400f5610ff2aa04a6834c01d0c91776ac21a0e9bb",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0004": "f35c5a96fccfe411c074463c0eb0a77b39fa072ba160903d421c08313aba58f8",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0005": "13458b10465b01134bde49319d6b5cba9948016448da9d35cb447265a25e3caa",
        "export-780822a4-d280-4ed0-a53c-382a887576a6-20200522_2325.tar.0006": "a1986a0590943c9bb573c7d7170c428457ce54efe75f55997259ea032c585a35"
    }
}
```

### Updating an Exporter

You can update an Exporter to modify a subset of its fields:

```bash
http PATCH :${EXPORTER_HREF} path=/tmp/newpath
```

## Importing

### Creating the importer

The first step to importing a Pulp export archive is to create an importer:

```bash
http :/pulp/api/v3/importers/core/pulp/ name="test"
```

By default, Pulp will map `Repositories` in the export to `Repositories`
in Pulp by name. This can be overriden by supplying a repo mapping that maps names from the Pulp export
to the names of repos in Pulp. For example, suppose the name of the repo in the Pulp export achive was
'source' and the repo in Pulp was 'dest'. The following command would set up this mapping:

```bash
http :/pulp/api/v3/importers/core/pulp/ name="test" repo_mapping:="{\"source\": \"dest\"}"
```

After the importer is created, a POST request to create an import will trigger the import process.

!!! note
    By default, the Pulp import machinery expects destination repositories to be present at the time
    of the import. This can be overridden by passing the `create_repositories=True` field via the
    POST request that will lead Pulp to create missing repositories on the fly.


!!! warning
    The options `repo_mapping` and `create_repositories` are not compatible with each other. The
    existence of a repository specified in the `repo_mapping` option is tested before the importer
    is initialized. Thus, the repository has to be already created in advance.

You can import an exported `.tar` directly using the `path` parameter:

```bash
http POST :/pulp/api/v3/importers/core/pulp/f8acba87-0250-4640-b56b-c92597d344b7/imports/ \
  path="/data/export-113c8950-072b-432a-9da6-24da1f4d0a02-20200408_2015.tar"
```

Or you can point the importer at the "table of contents" file that was produced by an export.
If the TOC file is in the same directory as the export-files it points to, the import process
will:

- verify the checksum(s) of all export-files,
- reassemble a chunked-export into a single `.tar`
- remove chunks as they are used (in order to conserve disk space)
- verify the checksum of the resulting reassembled `.tar`

and then import the result:

```bash
http POST :/pulp/api/v3/importers/core/pulp/f8acba87-0250-4640-b56b-c92597d344b7/imports/ \
  toc="/data/export-113c8950-072b-432a-9da6-24da1f4d0a02-20200408_2015-toc.json"
```

!!! note
    The directory containing the file pointed to by `path` or `toc` must be defined in the
    `ALLOWED_IMPORT_PATHS` setting or the import will fail.


The command to create an import will return a task that can be used to monitor the import. You can
also see a history of past imports:

```bash
http :/pulp/api/v3/importers/core/pulp/f8acba87-0250-4640-b56b-c92597d344b7/imports/
```

### Pre-validating import parameters

There are a number of things that can keep an import from being successful, ranging from a specified
export-file not being available to bad JSON specified for `repo_mapping`. You can pre-validate your
proposed import using the `import-check` command:

```bash
http POST :/pulp/api/v3/importers/core/pulp/import-check/ \
  path=/tmp/export-file-path toc=/tmp/export-toc-path repo_mapping:="{\"source\": \"dest\"}"
```

`import-check` will validate that:

- paths are in `ALLOWED_IMPORT_PATHS`
- containing directory exists
- containing directory is readable
- path/toc file(s) exist and are readable
- for TOC, containing directory is writeable
- repo_mapping is valid JSON

`import-check` is a low-overhead synchronous call. It does not attempt to do validations that
require database access or long-running tasks such as verifying checksums. All parameters are optional.

!!! note
    For `path` and `toc`, if the ALLOWED_IMPORT_PATHS check fails, no further information will be given.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/integrate-kafka.md
`````markdown
# Integrate Kafka

Pulp can be configured to emit messages as tasks are created and executed.

Kafka configuration depends on how the kafka broker is configured. Which settings are applicable depends on the broker
configuration.

For a development preview of this functionality, the kafka profile from
[oci_env](https://github.com/pulp/oci_env/pull/159) can be used:

```
COMPOSE_PROFILE=kafka
```

After triggering task(s) any kafka consumer can be used to explore the resulting messages. 
For convenience, the previously mentioned `oci_env` setup contains a CLI consumer that can be invoked as follows:

```shell
oci-env exec -s kafka \
  /opt/kafka/bin/kafka-console-consumer.sh \
  --bootstrap-server=localhost:9092 \
  --offset earliest \
  --partition 0 \
  --topic pulpcore.tasking.status \
  --max-messages 1
```

## Common Configuration

`KAFKA_BOOTSTRAP_SERVERS` is a comma-separated list of hostname and port pairs. Setting this enables the kafka
integration.

Example values:

- `localhost:9092`
- `kafka1.example.com:9092,kafka2.example.com:9092`
 
## Authentication: Username/Password

In order to use username/password authentication, it's necessary to set an appropriate `KAFKA_SECURITY_PROTOCOL` value:

- `sasl_ssl` when the connection uses TLS. 
- `sasl_plaintext` when the connection does not use TLS.

It's also necessary to set the appropriate value for `KAFKA_SASL_MECHANISM`; consult kafka broker configuration, typical
values include:

- `SCRAM-SHA-256`
- `SCRAM-SHA-512`

## TLS Settings

If the TLS truststore needs to be customized, then `KAFKA_SSL_CA_PEM` can be used to provide CA certs in PEM format.

!!! note
    The pulp kafka integration does not currently expose settings necessary for mTLS (client certificates).

## Other settings

See [Kafka Settings](../reference/settings.md#kafka-settings) for details.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/integrate-sentry-glitchtip.md
`````markdown
# Integrate with Sentry or GlitchTip

Pulp can be configured to report unhandled exceptions to Sentry or GlitchTip.
All unhandled exceptions in `pulpcore-api` and `pulpcore-content` are reported to GlitchTip.
Exceptions encountered during task execution are not reported to GlitchTip.
Tasks API should be used to view exceptions encountered during task execution.

1. Install the `sentry-sdk` package.
2. Set the `SENTRY_DSN` environment variable to configure where to report the exceptions.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/remove-plugins.md
`````markdown
# Remove Plugins

In case when one does not need a certain Pulp plugin anymore or there is a plugin which is no
longer supported and having it installed may prevent from upgrading to the latest releases for
pulpcore and other Pulp plugins.

Pulp provides an ability to remove its plugins. It might be needed for the following reasons:
: - a plugin is no longer needed
  - a plugin is no longer supported (it can block further pulpcore upgrades if maintainers no
    longer update the plugin to be compatible with the latest pulpcore)

Plugins can be removed one at a time using the `pulpcore-manager` command `remove-plugin`. In this
example the File plugin is removed:

```
$ pulpcore-manager remove-plugin file
```

As a result, all the data related to the plugin will be removed from the Pulp database.
It is possible to install back the removed plugin if desired and if it's compatible with the
pulpcore version being used.

!!! note
    After `remove-plugin` command has succeeded, the plugin needs to be uninstalled manually.
    Steps to uninstall depend on how it was originally installed.
`````

## File: pulp-docs/pulpcore/docs/admin/guides/sign-metadata.md
`````markdown
# Sign Metadata

Administrators can add signing services to Pulp using the command line tools.
Users may then associate the signing services with repositories that support content signing.
The example below demonstrates how a signing service can be created using `gpg`:

## 1. Initial Setup

Make sure the service user `pulp` has access to `gpg` and that the keypair is installed in its keyrings.

The private key might alternatively be provided by a hardware cryptographic device.

## 2. Create signing script

Create a signing script that accepts a file name as the only argument.

The script needs to generate an ascii-armored detached GPG signature for that file,
using the key specified via the `PULP_SIGNING_KEY_FINGERPRINT` environment variable.
There is also a `CORRELATION_ID` environment variable available for logging purposes.
The script should then print out a JSON structure with the following format.
All the file names are relative paths inside the current working directory:

```
{"file": "filename", "signature": "filename.asc"}
```

The filename must remain the same for the detached signature, as shown.

!!! note

    This is specific to the `AsciiArmoredDetachedSigningService`.
    Plugins may provide other signing service classes that may need their JSON output to contain different information.

Below is an example of a signing script that produces signatures for content:

```bash
#!/usr/bin/env bash

FILE_PATH=$1
SIGNATURE_PATH="$1.asc"

ADMIN_ID="$PULP_SIGNING_KEY_FINGERPRINT"
PASSWORD="password"

# Create a detached signature
gpg --quiet --batch --pinentry-mode loopback --yes --passphrase \
   $PASSWORD --homedir ~/.gnupg/ --detach-sign --default-key $ADMIN_ID \
   --armor --output $SIGNATURE_PATH $FILE_PATH

# Check the exit status
STATUS=$?
if [ $STATUS -eq 0 ]; then
   echo {\"file\": \"$FILE_PATH\", \"signature\": \"$SIGNATURE_PATH\"}
else
   exit $STATUS
fi
```

!!! note

    As the creator of the signing script, you can expect `PULP_SIGNING_KEY_FINGERPRINT`,
    and potentially other environment variables,
    depending on the content plugin calling signing service.
    Make sure the script contains a proper shebang and Pulp has got valid permissions to execute it.
    If deploying in a distributed way, all `pulpcore-worker` processes need to be able to access this script in the same path.

## 3. Create a signing service

Create a signing service consisting of an absolute path to the script,
a meaningful name describing the script's purpose, and the identity identifying the key for signing.

The script must be executable.
Here is an example showing how to create one instance of a signing service:

```bash
pulpcore-manager add-signing-service ${SERVICE_NAME} ${SCRIPT_ABS_FILENAME} ${KEYID}
```

!!! note

    The public key must be available on the caller's keyring or on a keyring provided via the `--gpghome` or `--keyring` parameters.

## 4. Check the signing service

Retrieve and check the saved signing service via REST API:

=== "run"

      ```bash
      pulp signing-service list
      ```

=== "output"

      ```json
      [
          {
              "name": "sign-metadata",
              "pubkey_fingerprint": "19CD52BD1CA9A00DF10A842D74B14E3590C2231F",
              "public_key": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\n [...] \n-----END PGP PUBLIC KEY BLOCK-----\n",
              "pulp_created": "2020-11-06T15:42:20.645197Z",
              "pulp_href": "/pulp/api/v3/signing-services/ffb9e987-952f-47e3-a274-ffe69a80ded7/",
              "prn": "prn:core.signingservice:ffb9e987-952f-47e3-a274-ffe69a80ded7",
              "script": "/var/lib/pulp/sign-metadata.sh"
          }
      ]
      ```

Plugins referring to this signing service can now sign selected content by the provided script.
However support and details of this process varies greatly between different content types.
To learn more about the signing from a plugin writer's perspective, see the section [Metadata Signing].

[Metadata Signing]: site:pulpcore/docs/dev/learn/other/metadata-signing/
`````

## File: pulp-docs/pulpcore/docs/admin/guides/troubleshooting.md
`````markdown
# Troubleshoot

## Enabling Debug Logging

By default Pulp logs at INFO level, but enabling DEBUG logging can be a helpful thing to get more
insight when things don't go as expected. This can be enabled with dynaconf using the examples
below.

Designating a Python-based settings file, and putting the DEBUG logging configuration there:

```bash
export PULP_SETTINGS=/etc/pulp/settings.py
echo "LOGGING = {'dynaconf_merge': True, 'loggers': {'': {'handlers': ['console'], 'level': 'DEBUG'}}}" >> /etc/pulp/settings.py
```

Or via environment variable:

```bash
PULP_LOGGING='@json {"dynaconf_merge": true, "loggers": {"": {"handlers": ["console"], "level": "DEBUG"}}}'
```

!!! tip
    As a workaround, you could specify the entire config with the `PULP_LOGGING` environment variable
    and avoid using the "merge" feature from dynaconf. In that case you would specify
    `'level': 'DEBUG'` in addition to your current config shown with `dynaconf list`.

Then when starting Pulp you should see a lot more information logged.

To ensure you've enabled the settings correctly, view them with the `dynaconf list` command (for
more information, see `viewing-settings`). If configured correctly you should see:

```bash
$ dynaconf list
<snip>
LOGGING<dict> {'disable_existing_loggers': False,
'loggers': {'': {'filters': ['correlation_id'],
                 'handlers': ['console'],
                 'level': 'DEBUG'},  # <--- the DEBUG level
<snip>
```
`````

## File: pulp-docs/pulpcore/docs/admin/learn/architecture.md
`````markdown
# Architecture

Pulp's architecture has three components to it: a REST API, a content serving application, and the
tasking system. Each component can be horizontally scaled for both high availability and/or
additional capacity for that part of the architecture.

<figure markdown="span">
  ![Pulp Architecture](site:pulpcore/docs/assets/images/architecture.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

## REST API

Pulp's REST API is a Django application that runs standalone using the `gunicorn` like
`pulpcore-api` entrypoint. It serves the following things:

- The REST API hosted at `/pulp/api/v3/`
- The browse-able documentation at `/pulp/api/v3/docs/`
- Any viewsets or views provided by plugins
- Static content used by Django, e.g. images used by the browse-able API. This is not Pulp content.

!!! note
    A simple way to run the REST API as a standalone service is using the provided `pulpcore-api`
    entrypoint. It is `gunicorn` based and provides many of its options.


The REST API should only be deployed via the `pulpcore-api` entrypoint.

## Content Serving Application

A currently `aiohttp.server` based application that serves content to clients. The content could
be `Artifacts` already downloaded and saved in Pulp, or
`on-demand content units<on-demand content>`. When serving
`on-demand content units<on-demand content>` the downloading also happens from within this
component as well.

!!! note
    Pulp installs a script that lets you run the content serving app as a standalone service as
    follows. This script accepts many `gunicorn` options.:

```
$ pulpcore-content
```

The content serving application should be deployed with `pulpcore-content`. See `--help` to see
available options.

## Availability

Ensuring the REST API and the content server is healthy and alive:

- REST API: GET request to `${API_ROOT}api/v3/status/` (see [`API_ROOT](#)`)
- Content Server: HEAD request to `/pulp/content/` or `CONTENT_PATH_PREFIX`

## Distributed Tasking System

Pulp's tasking system consists of a single `pulpcore-worker` component consequently, and can be
scaled by increasing the number of worker processes to provide more concurrency. Each worker can
handle one task at a time, and idle workers will lookup waiting and ready tasks in a distributed
manner. If no ready tasks were found a worker enters a sleep state to be notified, once new tasks
are available or resources are released.  Workers auto-name and are auto-discovered, so they can be
started and stopped without notifying Pulp.

!!! note
    Pulp serializes tasks that are unsafe to run in parallel, e.g. a sync and publish operation on
    the same repo should not run in parallel. Generally tasks are serialized at the "resource" level, so
    if you start *N* workers you can process *N* repo sync/modify/publish operations concurrently.


All necessary information about tasks is stored in Pulp's Postgres database as a single source of
truth. In case your tasking system get's jammed, there is a guide to help (see `debugging tasks `).

## Static Content

When browsing the REST API or the browsable documentation with a web browser, for a good experience,
you'll need static content to be served.

### In Development

If using the built-in Django webserver and your settings.yaml has `DEBUG: True` then static
content is automatically served for you.

### In Production

Collect all of the static content into place using the `collectstatic` command. The
`pulpcore-manager` command is `manage.py` configured with the
`DJANGO_SETTINGS_MODULE="pulpcore.app.settings"`. Run `collectstatic` as follows:

```
$ pulpcore-manager collectstatic
```

## Analytics Collection

By default, Pulp installations post anonymous analytics data every 24 hours which is summarized on
[https://analytics.pulpproject.org/](https://analytics.pulpproject.org/) and aids in project decision making. This is enabled by
default but can be disabled by setting `ANALYTICS=False` in your settings.

Here is the list of exactly what is collected along with an example below:

- The version of Pulp components installed as well as the used PostgreSQL server
- The number of worker processes and number of hosts (not hostnames) those workers run on
- The number of content app processes and number of hosts (not hostnames) those content apps run on
- The number of certain RBAC related entities in the system (users, groups, domains, custom roles,
  custom access policies)

!!! note
    We may add more analytics data points collected in the future. To keep our high standards for
    privacy protection, we have a rigorous approval process in place. You can see open proposals on
    [https://github.com/pulp/analytics.pulpproject.org/issues](https://github.com/pulp/analytics.pulpproject.org/issues). In doubt,
    [reach out to us](site:help/community/get-involved/).


An example payload:

```json
{
    "systemId": "a6d91458-32e8-4528-b608-b2222ede994e",
    "onlineContentApps": {
        "processes": 2,
        "hosts": 1
    },
    "onlineWorkers": {
        "processes": 2,
        "hosts": 1
    },
    "components": [{
        "name": "core",
        "version": "3.21.0"
    }, {
        "name": "file",
        "version": "1.12.0"
    }],
    "postgresqlVersion": 90200
}
```



## Telemetry Support

Pulp can produce telemetry data, like the response latency, using OpenTelemetry. You can read more
about [OpenTelemetry here](https://opentelemetry.io). The telemetry is **disabled by default**.

!!! attention
    This feature is provided as a tech preview and could change in backwards incompatible
    ways in the future.

In order to enable the telemetry, set `OTEL_ENABLED=True` in the settings  file and follow the next
steps:

- Spin up a new instance of the [Opentelemetry Collector](https://opentelemetry.io/docs/collector/).
- Configure the `OTEL_EXPORTER_OTLP_ENDPOINT` environment variable to point to the address of the
  OpenTelemetry Collector instance (e.g.,`http://otel-collector:4318`).
- Set the `OTEL_EXPORTER_OTLP_PROTOCOL` environment variable to `http/protobuf`.


**At the moment, the following data is recorded by Pulp:**

- Latency of API endpoints (along with an HTTP method, URL, status code, and unique worker name).
- Latency of delivering requested packages (an HTTP method, status code, and unique worker name).
- Disk usage within a specific domain (total used disk space and the reference to a domain).
- The size of served artifacts (total count of served data and the reference to a domain).

The information above is sent to the collector in the form of metrics. Thus, the data is  emitted
either based on the user interaction with the system or on a regular basis. Consult
[OpenTelemetry Metrics](https://opentelemetry.io/docs/concepts/signals/metrics/) to learn more.
`````

## File: pulp-docs/pulpcore/docs/admin/reference/settings.md
`````markdown
# Settings

There is one required setting, although specific plugins may have additional required settings.

- `SECRET_KEY <secret-key-setting>`

Pulp uses four types of settings:

- `Django settings` Pulp is configuring
- `Pulp defined settings`
- `Redis settings` Pulp is using
- `Kafka settings`

!!! note
    For more information on how to specify settings see the
    [`Applying Settings`](site:pulpcore/docs/admin/guides/configure-pulp/).


## Django Settings

Below is a list of the most common Django settings Pulp users typically use.
Pulp is a Django project, so any [Django setting] can be set.

### AUTHENTICATION\_BACKENDS

By default, Pulp has two types of authentication enabled, and they fall back for each other:

1. Basic Auth which is checked against an internal users database.
1. Webserver authentication that relies on the webserver to perform the authentication.

To change the authentication types Pulp will use, modify the `AUTHENTICATION_BACKENDS` settings.
See the [Django authentication documentation] for more information.

### DATABASES

By default, Pulp uses PostgreSQL on localhost.
PostgreSQL is the only supported database.
For instructions on how to configure the database, refer to [Django database settings].

### DEFAULT\_FILE\_STORAGE

!!! warning "Deprecated in `3.70`"
    The `DEFAULT_FILE_STORAGE` setting was deprecated in [django 4.2] and will be removed from pulpcore on `3.85`.
    Between `3.70` and `3.85`, replace it with [`STORAGES`](#storages).

### LOGGING

By default, Pulp logs at an INFO level to syslog.
For all possible configurations please refer to [Django documentation on logging].

Enabling DEBUG logging is a common troubleshooting step.
See the [Enabling Debug Logging] documentation for details on how to do that.

### MEDIA\_ROOT

The location where Pulp will store files.
By default, this is `/var/lib/pulp/media`.

This only affects storage location when `STORAGES['default']['BACKEND']` is set to `pulpcore.app.models.storage.FileSystem`.

See the [storage documentation](site:pulpcore/docs/admin/guides/configure-pulp/configure-storages/) for more info.

It should have permissions of:

- mode: 750
- owner: pulp (the account that pulp runs under)
- group: pulp (the group of the account that pulp runs under)
- SELinux context: `system_u:object_r:pulpcore_var_lib_t:s0`

### SECRET\_KEY

In order to get a pulp server up and running a [Django secret key] *must* be provided.
The following code snippet can be used to generate a random `SECRET_KEY`.

```python linenums="1"
import secrets

chars = 'abcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(-_=+)'
print(''.join(secrets.choice(chars) for i in range(50)))
```

### STORAGES

!!! note "Added in `3.70`"
    Starting in `3.70`, this should be used in the place of [`DEFAULT_FILE_STORAGE`](#default_file_storage).

Pulp uses [django-storages] to support multiple storage backends.
If no backend is configured, Pulp will by default use the local filesystem (`pulpcore.app.models.storage.FileSystem`).

The storage setting has the form:

```python
STORAGES = {
    "default": {
        "BACKEND": "{storage-class}",
        "OPTIONS": {
            "{option-key}": "{option-value}",
            ...
        },
    },
}
```

To use another backend storage, you'll need to:

1. Set up your storage and gather required credentials and specific configs.
1. Ensure the `django-storage[s3|google|azure]` python package is installed.
This depends on the installation method.
1. Configure the default `BACKEND` storage class.
1. Configure available `OPTIONS` for that backend.

Learn more on the
[Configure Storages](site:pulpcore/docs/admin/guides/configure-pulp/configure-storages/) guide.

Overview of the integration with Pulp:

- **Supported**: We support (test) Amazon S3 and Azure.
- **Untested**: Other backends provided by `django-storages` may work as well, but we provide no guarantee.
- **Known caveat**: Using SFTP Storage is not recommended in Pulp's current state, and doing so can lead to file corruption.
This is because Pulp currently uses coroutines that seem to be incompatible with Django's SFTPStorage implementation.


## Pulp Settings

Pulp defines the following settings itself:

### ALLOWED\_CONTENT\_CHECKSUMS

The list of content-checksums this pulp-instance is **allowed to use**.
By default, the following are used:

```
ALLOWED_CONTENT_CHECKSUMS = ["sha224", "sha256", "sha384", "sha512"]
```

The entire set of supported checksums are:
`md5`, `sha1`, `sha224`, `sha256`, `sha384`, and `sha512`.

!!! warning
    Due to its use as the primary content-identifier, "sha256" **IS REQUIRED**.
    Pulp will fail to start if `"sha256"` is not found in this set.

Pulp can prohibit or allow checksums by setting the `ALLOWED_CONTENT_CHECKSUMS` setting.
Changing this setting requires a few steps.

First, before you change the setting, see how your Pulp instance will be impacted by this change by running:

`pulpcore-manager handle-artifact-checksums --report --checksums sha256,sha512`

Adjust `--checksums` as comma separated list of checksums types to match your needs.

!!! note
    If you already changed `ALLOWED_CONTENT_CHECKSUMS` in pulp settings you can leave out `--checksums`,
    and the checksums will be parsed from Pulp settings.

Before switching, any on-demand repositories containing forbidden checksum digests
need to be synced with `policy=immediate` to populate missing allowed checksums.
This can heavily impact your disk space.
Alternatively, users can remove these offending repository versions followed by orphan cleanup.

If you have artifacts that do not conform to your `ALLOWED_CONTENT_CHECKSUMS` setting, they need to be re-hashed.
You can update them using:

`pulpcore-manager handle-artifact-checksums`

!!! warning
    If Pulp fails to start because forbidden checksums have been identified or required ones are
    missing, run `pulpcore-manager handle-artifact-checksums` command.

### ALLOWED\_EXPORT\_PATHS

One or more real filesystem paths that Exporters can export to.
For example to allow a path of `/mnt/foo/bar/another/folder/` you could specify:

```
ALLOWED_EXPORT_PATHS = ['/mnt/foo/bar']  # only a subpath is needed
```

Defaults to `[]` which means no path is allowed.

### ALLOWED\_IMPORT\_PATHS

One or more real filesystem paths that Remotes with filesystem paths can import from.
For example to allow a remote url of `file:///mnt/foo/bar/another/folder/` you could specify:

```
ALLOWED_IMPORT_PATHS = ['/mnt/foo/bar']  # only a subpath is needed
```

Defaults to `[]`, meaning `file:///` urls are not allowed in any Remote.

### ANALYTICS

If `True`, Pulp will anonymously post analytics information to
[https://analytics.pulpproject.org/](https://analytics.pulpproject.org/) and aids in project decision-making.
See the `analytics docs ` for more info on exactly what is posted along with an example.

Defaults to `True`.

### API\_ROOT

A string containing the prefix for the Pulp API path generated by appending `api/v3/`.
This setting can be used to root the Pulp API in a different namespace on your server.
It must match your reverse proxy configuration and effects hrefs returned from the API.

Defaults to `/pulp/`.
This makes the V3 API by default serve from `/pulp/api/v3/`.

### CACHE\_ENABLED

Store cached responses from the content app into Redis.
This setting improves the performance of the content app under heavy load for similar requests.

Defaults to `False`.

!!! note
    The entire response is not stored in the cache.
    Only the location of the file needed to recreate the response is stored.
    This reduces database queries and allows for many responses to be stored inside the cache.

### CACHE\_SETTINGS

Dictionary with tunable settings for the cache:

- `EXPIRES_TTL` - Number of seconds entries should stay in the cache before expiring.

Defaults to `600` seconds.

!!! note
    Set to `None` to have entries not expire.
    Content app responses are always invalidated when the backing distribution is updated.

### CHUNKED\_UPLOAD\_DIR

A relative path inside the `DEPLOY_ROOT` directory used exclusively for uploaded chunks.
The uploaded chunks are stored in the default storage specified by `STORAGES['default']['BACKEND']`.
This option allows users to customize the actual place where chunked uploads should be stored within the declared storage.
A change to this setting only applies to uploads created after the change.

Defaults to `upload`, which is sufficient for most use cases.

### CONTENT\_APP\_TTL

The number of seconds before a content app should be considered lost.

Defaults to `30` seconds.

### CONTENT\_ORIGIN

A string containing the `protocol`, `fqdn`, and optionally `port` where the content app is reachable by users.
This is used by `pulpcore` and various plugins when referring users to the content app.
For example if the API should redirect users to content at pulp.example.com using HTTPS,
you would set: `https://pulp.example.com` (not including `/pulp/content`, the `CONTENT_PATH_PREFIX`).
Usually this should point to the external address of the reverse proxy.
When set to `None`, the `base_url` for Distributions is a relative path.
This means the API returns relative URLs without the protocol, fqdn, and port.

Default to `None`.

### CONTENT\_PATH\_PREFIX

A string containing the path prefix for the content app.
This is used by the REST API when forming URLs to redirect clients to the content serving app,
and by the content serving application to match incoming URLs.

Defaults to `/pulp/content/`.

### DB\_ENCRYPTION\_KEY

The file location of a symmetric fernet key that Pulp uses to encrypt sensitive fields in the database.
Default location is `/etc/pulp/certs/database_fields.symmetric.key`.

See [Database Encryption] for more details.

### DJANGO\_GUID

Pulp uses `django-guid` to append correlation IDs to logging messages.
For more information on how to configure the `DJANGO_GUID` setting, see the [django-guid settings documentation].
To read more about using correlation id in Pulp, read [our guide](site:pulpcore/docs/user/guides/correlation-id/).

### DOMAIN\_ENABLED

!!! note
    This feature is provided as a tech-preview

Enable the `Domains feature to enable multi-tenancy capabilities <domains>`.
All installed plugins must be Domain compatible for Pulp to start.

Defaults to `False`.

### ENABLED\_PLUGINS

An optional list of plugin names.
If provided, Pulp will limit loading plugins to this list.
If omitted, Pulp will load all installed plugins.

### HIDE\_GUARDED\_DISTRIBUTIONS

If `True`, the distributions, that are protected by a content guard,
will not be shown on the directory listing in the content app.

Defaults to `False`.

### ORPHAN\_PROTECTION\_TIME

The time, specified in minutes, for how long Pulp will hold orphan Content and Artifacts
before they become candidates for deletion by an orphan cleanup task.
This should ideally be longer than your longest running task.
Otherwise any content created during that task could be cleaned up before the task finishes.

Defaults to 1440 minutes (24 hours).

### OTEL\_ENABLED

Toggles the activation of OpenTelemetry instrumentation for monitoring and tracing the application's performance.

Defaults to `False`.

### REDIRECT\_TO\_OBJECT\_STORAGE

When set to `True` access to artifacts is redirected to the corresponding Cloud storage
configured in `STORAGES['default']['BACKEND']` using pre-authenticated URLs.
When set to `False` artifacts are always served by the content app instead.

Defaults to `True`; ignored for local file storage.

### REMOTE\_CONTENT\_FETCH\_FAILURE\_COOLDOWN

In the context of on-demand requests in the Content App,
the time in seconds that a content source from a specific remote will be ignored after failing to download the correct binary from it.
Learn more about [on-demand and streaming limitations].

Defaults to `5` minutes.

### REMOTE\_USER\_ENVIRON\_NAME

The name of the WSGI environment variable to read for [Webserver Auth with Reverse Proxy].

!!! warning
    Configuring this has serious security implications.
    See the [Django warning at the end of this section in their docs] for more details.

Defaults to `'REMOTE_USER'`.

### TASK\_DIAGNOSTICS

When enabled, each task records various diagnostics for analysis by a developer.
Some of these diagnostics add runtime overhead, and should probably not be enabled in production environments without careful thought and supervision.

The list of possible diagnostics that can be used are `["memory", "pyinstrument", "memray"]`.
Any subset of those can be used, or all of them, or none of them.

A value of `True` enables all diagnostics.

!!! note
    `memray` and `pyinstrument` diagnostics require additional packages to be installed.

Defaults to `[]` (no diagnostics).

See [task diagnostics documentation] for more details.

### TASK\_GRACE\_INTERVAL

On receiving SIGHUP or SIGTERM a worker will await the currently running task forever.
On SIGINT, this value represents the time before the worker will attempt to kill the subprocess.
This time is only accurate to one worker heartbeat corresponding to `WORKER_TTL / 3`.

Defaults to `600` seconds.

### TASK\_PROTECTION\_TIME, TMPFILE\_PROTECTION\_TIME and UPLOAD\_PROTECTION\_TIME

Pulp uses `tasks`, `pulp temporary files` and `uploads` to pass data from the api to worker tasks.
These options allow to specify a timeinterval in minutes used for cleaning up stale entries.
If set to `0`, automatic cleanup is disabled.

Each one defaults to `0`.

### UVLOOP\_ENABLED

Enable using the [uvloop] event loop in the content-app workers.
This is [recommended by aiohttp] for performance improvements.

The `uvloop` python package must be installed in the content-app's system.
That's available as an optional dependency for pulpcore: `pulpcore[uvloop]`.

### WORKER\_TTL

The number of seconds before a worker should be considered lost.

Defaults to `30` seconds.

### WORKING\_DIRECTORY

The directory used by workers to stage files temporarily.

It should have permissions of:

- mode: 750
- owner: pulp (the account that pulp runs under)
- group: pulp (the group of the account that pulp runs under)
- SELinux context: `system_u:object_r:pulpcore_var_lib_t:s0`

Defaults to `/var/lib/pulp/tmp/`.

!!! note
    It is recommended that `WORKING_DIRECTORY` and `MEDIA_ROOT`
    exist on the same storage volume for performance reasons.
    Files are commonly staged in the `WORKING_DIRECTORY` and
    validated before being moved to their permanent home in `MEDIA_ROOT`.


## Redis Settings

!!! note
    To enable usage of Redis the [CACHE\_ENABLED](#cache_enabled) option must be set to `True`.

Below are some common settings used for Redis configuration.

### REDIS\_HOST

The hostname for Redis.

### REDIS\_PASSWORD

The password for Redis.

### REDIS\_PORT

The port for Redis.

Additionally, the following Redis settings can be set in your Pulp config:

- `REDIS_DB`
- `REDIS_URL`


## Kafka Settings

!!! note
    Kafka integration functionality is in tech preview and may change based on user feedback.

See [librdkafka configuration documentation] for details on client configuration properties.

### KAFKA\_BOOTSTRAP\_SERVERS

`bootstrap.servers` value for the client.
Specifies endpoint(s) for the kafka client.
Kafka integration is disabled if unspecified.

### KAFKA\_PRODUCER\_POLL\_TIMEOUT

Timeout in seconds for the kafka producer polling thread's `poll` calls.

Defaults to `0.1`.

### KAFKA\_SASL\_MECHANISM

`sasl.mechanisms` value for the client (optional).
Specifies the authentication method used by the kafka broker.

### KAFKA\_SASL\_PASSWORD

`sasl.password` value for the client (optional).
Password for broker authentication.

### KAFKA\_SASL\_USERNAME

`sasl.username` value for the client (optional).
Username for broker authentication.

### KAFKA\_SECURITY\_PROTOCOL

`security.protocol` value for the client.
What protocol to use for communication with the broker.

Defaults to `plaintext` (unencrypted).

### KAFKA\_SSL\_CA\_PEM

`ssl.ca.pem` value for the client (optional).
Used to override the TLS truststore for broker connections.

### KAFKA\_TASKS\_STATUS\_PRODUCER\_SYNC\_ENABLED

Whether to synchronously send task status messages.
When `True`, the task message is sent synchronously, otherwise the sends happen asynchronously,
with a background thread periodically sending messages to the kafka server.

Defaults to `False`.

### KAFKA\_TASKS\_STATUS\_TOPIC

What kafka topic to emit notifications to when tasks start/stop.

Defaults to `pulpcore.tasking.status`.

[Database Encryption]: site:pulpcore/docs/admin/guides/configure-pulp/db-encryption
[django 4.2]: https://docs.djangoproject.com/en/4.2/ref/settings/#default-file-storage
[Django authentication documentation]: https://docs.djangoproject.com/en/4.2/topics/auth/customizing/#authentication-backends
[Django database settings]: https://docs.djangoproject.com/en/4.2/ref/settings/#databases
[Django documentation on logging]: https://docs.djangoproject.com/en/4.2/topics/logging/#configuring-logging
[django-guid settings documentation]: https://django-guid.readthedocs.io/en/latest/settings.html
[Django secret key]: https://docs.djangoproject.com/en/4.2/ref/settings/#secret-key
[Django setting]: https://docs.djangoproject.com/en/4.2/ref/settings/
[django-storages]: https://django-storages.readthedocs.io/en/latest/index.html
[Django warning at the end of this section in their docs]: https://docs.djangoproject.com/en/4.2/howto/auth-remote-user/#configuration
[Enabling Debug Logging]: site:pulpcore/docs/admin/guides/troubleshooting/#enabling-debug-logging
[librdkafka configuration documentation]: https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md
[on-demand and streaming limitations]: site:pulpcore/docs/user/learn/on-demand-downloading/#on-demand-and-streamed-limitations
[recommended by aiohttp]: https://docs.aiohttp.org/en/stable/third_party.html#approved-third-party-libraries
[task diagnostics documentation]: site:pulpcore/docs/dev/learn/tasks/diagnostics.md
[uvloop]: https://github.com/MagicStack/uvloop
[Webserver Auth with Reverse Proxy]: site:pulpcore/docs/admin/guides/auth/external/#webserver-auth-with-reverse-proxy
`````

## File: pulp-docs/pulpcore/docs/admin/reference/tech-preview.md
`````markdown
# Tech Previews

The following features are currently being released as part of tech preview:

- [Support for Open Telemetry](site:pulpcore/docs/admin/learn/architecture/#telemetry-support)
- Upstream replicas
- Domains - Multi-Tenancy
- [Checkpoint](site:pulpcore/docs/user/guides/checkpoint/)
`````

## File: pulp-docs/pulpcore/docs/dev/guides/git.md
`````markdown
# Git

Pulp source code lives on [GitHub](https://github.com/pulp/pulpcore). This document is definitive
for `pulpcore` only, but some plugins may choose to follow the same strategies.



## Versions and Branches

Code is submitted by a Pull Request on Github to merge the changes to `main` which represents
the next `pulpcore` release. See `versioning` for more details.

## Commits



### Rebasing and Squashing

We prefer each pull request to contain a single commit. Before you submit a PR, please consider an
[interactive rebase and squash.](https://github.com/edx/edx-platform/wiki/How-to-Rebase-a-Pull-Request)

The `git commit --amend` command is very useful, but be sure that you [understand what it does](https://www.atlassian.com/git/tutorials/rewriting-history/git-commit--amend) before you use it!
GitHub will update the PR and keep the comments when you force push an amended commit.

!!! warning

    Keep in mind that rebasing creates new commits that are unique from your
    original commits. Thus, if you have three commits and rebase them, you must
    make sure that all copies of those original commits get deleted. Did you push
    your branch to origin? Delete it and re-push after the rebase.




### Commit Message

Commit messages in Pulp should contain a human readable explanation of what was fixed.  They should
also follow the standard git message format of starting with a subject line or title (usually
wrapped at about 50 chars) and optionally, a longer message (usually wrapped at 72 characters)
broken up into paragraphs. For more on what constitutes a good commit message, we recommend [Tim
Pope's blog post on the subject](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html).

Each commit message should link to an issue on the [pulpcore Github Issue tracker](https://github.com/pulp/pulpcore/issues/). See the [Github Linking Docs](https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword) and include at least one link in your commit message.

Putting this all together, the following is an example of a good commit message:

```
Update install and quickstart

The install docs and quickstart was leaving out an important step on
the worker configuration.

closes #1392
```

!!! tip

    A good candidate for a `noissue` tag is a one line fix or a typo, otherwise we encourage
    you to open an issue.




### Requiring other Pull Requests

Sometimes a new feature may require changes to both `pulpcore` and one or many other plugins.
However, plugins can only depend on features that are already released with `pulpcore` or any other
dependency. Sometimes though you need to demonstrate, that a new feature about to be added to
`pulpcore` will work with a corresponding plugin change before you can get the needed approvals. In
order to do so, you can depend the plugin's pull request on the head of the pull request or the
main branch of `pulpcore` in the following way:

Add a line like:

```
git+https://github.com/pulp/pulpcore@refs/pull/1234/head
git+https://github.com/pulp/pulpcore@refs/heads/main
```

to `ci_requirements.txt` in the plugin PR. Make sure that file is covered by `MANIFEST.in`.
Also bump the requirement on `pulpcore` in `requirements.txt` or `pyproject.toml` to at least the current `dev` version
if you want to be sure the `lower bounds` scenario passes.

This works accordingly for depending on other plugins.

This will allow the tests in the CI to run, but it will fail the `ready-to-ship` check. The
depended on PR must be merged **and** released before a PR like this can be merged.

For very similar reasons it can happen that you need changes to the base image used in the CI to
spin up a new pulp container. In those cases you can build your own modified version of the image
and push it to a container registry. Now you can specify the image to use in the last commit
message like:

```
CI Base Image: pulp/pulp-ci:special_feature
```

Attention and care must be given not to merge PRs that require custom CI images.



### Changelog update

The CHANGES.rst file is managed using the [towncrier tool](https://github.com/hawkowl/towncrier)
and all non trivial changes must be accompanied by a news entry.

For user facing changes, put those news files into `CHANGES/`. For Plugin API changes, put those
into the `CHANGES/plugin_api/` folder.

To add an entry to the news file, you first need an issue on github describing the change you
want to make. Once you have an issue, take its number and create a file inside of the `CHANGES/`
or `CHANGES/plugin_api/` directory named after that issue number with one of the extensions below.

| extension    | description                                                          |
| ------------ | -------------------------------------------------------------------- |
| .bugfix      | A bug fix                                                            |
| .feature     | A new feature                                                        |
| .removal     | A backwards incompatible change (ie a removal or change in behavior) |
| .deprecation | Information about an upcoming backwards incompatible change          |
| .doc         | A documentation improvement                                          |
| .misc        | A change that is not visible to the end user                         |

So if your user-facing issue is 3543 and it fixes a bug, you would create the file
`CHANGES/3543.bugfix`. Or if your plugin API change is 5432 and it's a breaking change you would
create the file `CHANGES/plugin_api/5432.removal`.

PRs can span multiple categories by creating multiple files (for instance, if you added a feature
and deprecated an old feature at the same time, you would create CHANGES/NNNN.feature and
CHANGES/NNNN.removal). Likewise if a PR touches multiple issues/PRs you may create a file for each
of them with the exact same contents and Towncrier will deduplicate them.

The contents of this file are reStructuredText formatted text that will be used as the content of
the news file entry. You do not need to reference the issue or PR numbers here as towncrier will
automatically add a reference to all of the affected issues when rendering the news file.

The changelog message should use past simple tense. When possible, the message should describe the
change being made as opposed to the problem or user story. Here are some examples:

- Added API that allows users to export a repository version to disk.
- Fixed bug where whitespace was being trimmed from uploaded files.
- Added documentation for new pulpcore-manager command.
`````

## File: pulp-docs/pulpcore/docs/dev/guides/plugin-walkthrough.md
`````markdown
# Plugin Walkthrough

This guide assumes that you are familiar with [general pulp concepts](site:pulpcore/docs/dev/learn/plugin-concepts/) as well as the `planning-guide`.
It will be helpful to skim the `plugin-concepts` pages, and refer back to them as you go
through the process.

## Bootstrap your plugin

Start your new plugin by using the [Plugin Template](https://github.com/pulp/plugin_template).
Follow the documentation in the README to get a working stub plugin.



## Define your plugin Content type

To define a new content type(s), e.g. `ExampleContent`:

- `pulpcore.plugin.models.Content` should be subclassed and extended with additional
  attributes to the plugin needs,
- define `TYPE` class attribute which is used for filtering purposes,
- uniqueness should be specified in `Meta` class of newly defined `ExampleContent` model,
- `unique_together` should be specified for the `Meta` class of `ExampleContent` model,
- create a serializer for your new Content type as a subclass of
  `pulpcore.plugin.serializers.NoArtifactContentSerializer`,
  `pulpcore.plugin.serializers.SingleArtifactContentSerializer`, or
  `pulpcore.plugin.serializers.MultipleArtifactContentSerializer`
- create a viewset for your new Content type. It can be as a subclass of
  `pulpcore.plugin.viewsets.ContentViewSet`, and you can define your `create()` method based
  on the serializer you chose. If you need a read-only viewset, subclass
  `pulpcore.plugin.viewsets.ReadOnlyContentViewSet` instead. It's also convenient to subclass
  `pulpcore.plugin.viewsets.SingleArtifactContentUploadViewSet` if you need an upload support.

`pulpcore.plugin.models.Content` model should not be used directly anywhere in plugin code.
Only plugin-defined Content classes are expected to be used.

Check `pulp_file` implementation of [the FileContent](https://github.com/pulp/pulpcore/blob/master/pulp_file/app/models.py) and its
[serializer](https://github.com/pulp/pulpcore/blob/master/pulp_file/app/serializers.py)
and [viewset](https://github.com/pulp/pulpcore/blob/master/pulp_file/app/viewsets.py).
For a general reference for serializers and viewsets, check [DRF documentation](http://www.django-rest-framework.org/api-guide/viewsets/).

Add any fields that correspond to the metadata of your content, which could be the project name,
the author name, or any other type of metadata.



## Define your plugin Remote

To define a new remote, e.g. `ExampleRemote`:

- `pulpcore.plugin.models.Remote` should be subclassed and extended with additional
  attributes to the plugin needs,
- define `TYPE` class attribute which is used for filtering purposes,
- create a serializer for your new remote as a subclass of
  `pulpcore.plugin.serializers.RemoteSerializer`,
- create a viewset for your new remote as a subclass of
  `pulpcore.plugin.viewsets.RemoteViewSet`.

`pulpcore.plugin.models.Remote` model should not be used directly anywhere in plugin code.
Only plugin-defined Remote classes are expected to be used.

There are several important aspects relevant to remote implementation which are briefly mentioned
in the `object-relationships` section:

- due to deduplication of `pulpcore.plugin.models.Content` and
  `pulpcore.plugin.models.Artifact` data, they may already exist and the remote needs to
  fetch and use them when they do.
- `pulpcore.plugin.models.ContentArtifact` associates
  `pulpcore.plugin.models.Content` and `pulpcore.plugin.models.Artifact`. If
  `pulpcore.plugin.models.Artifact` is not downloaded yet,
  `pulpcore.plugin.models.ContentArtifact` contains `NULL` value for
  `pulpcore.plugin.models.ContentArtifact.artifact`. It should be updated whenever
  corresponding `pulpcore.plugin.models.Artifact` is downloaded

!!! note

    Some of these steps may need to behave differently for other download policies.


The remote implementation suggestion above allows plugin writer to have an understanding and
control at a low level.

## Define your Tasks

See `writing-tasks`. Almost all plugins must implement a `sync` task, most implement a
`publish` task as well.

## Plugin Completeness Checklist

- Plugin django app is defined using PulpAppConfig as a parent
- Plugin entry point is defined
- `pulpcore` is specified as a requirement
- Necessary models/serializers/viewsets are defined and discoverable.
  At a minimum:
    - models for plugin content type, remote, publisher
    - serializers for plugin content type, remote, publisher
    - viewset for plugin content type, remote, publisher
- Errors are handled according to Pulp conventions
- Docs for plugin are available (any location and format preferred and provided by plugin writer)
`````

## File: pulp-docs/pulpcore/docs/dev/guides/pull-request-walkthrough.md
`````markdown
# Pull Request Walkthrough

Changes to pulpcore are submitted via
[GitHub Pull Requests (PR)](https://help.github.com/articles/about-pull-requests/) to the
[pulp git repository](https://github.com/pulp/pulpcore).

Plugin git repositories are listed in the [plugin table](site:help/#quick-links-wip).

## Checklist

1. Add `functional tests` or `unit tests` where appropriate and ensure tests
   are passing on the CI.
2. Add a `CHANGES entry <changelog-update>`.
3. Update relevent `documentation`. Please build the docs to test!
4. `Rebase and squash` to a single commit.
5. Write an excellent `commit-message`. Make sure you reference and link to the issue.
6. Push your branch to your fork and open a [Pull request across forks](https://help.github.com/articles/creating-a-pull-request-from-a-fork/).
7. If the change requires a corresponding change in pulp-cli, open a PR against the pulp-cli or
   {doc}`file an issue</bugs-features>`.

## Review

Before a pull request can be merged, the `tests` must pass and it must
be reviewed. We encourage you to `reach out to the developers` to get speedy review.

## To Cherry-Pick or Not

If you are fixing a bug that should also be backported to another branch than `main`, add the
backport label, .e.g `backport-3.18`. PR authors can also add or remove this label if they have
write access.
`````

## File: pulp-docs/pulpcore/docs/dev/guides/test-pulp.md
`````markdown
# Write and run tests

There are two types of tests in *pulpcore* and in the plugins:

1. **Unittests** are meant to test the interface of a specific unit utilizing a test database.
2. **Functional tests** are meant to test certain workflows utilizing a running instance of pulp.

A pull request that has failing unit or functional tests cannot be merged.



## Unit Tests

New code is encouraged to have basic unit tests that demonstrate that
units (function, method or class instance) are working correctly.

The unit tests for `pulpcore` are in [pulpcore/tests](https://github.com/pulp/pulpcore/tree/master/pulpcore/tests/unit).



## Functional Tests

Functional tests verify a specific feature.
In general functional tests tend to answer the question "As an user can I do this?"

It is highly encouraged to accompany new features with functional
tests in [pulpcore/functional](https://github.com/pulp/pulpcore/tree/master/pulpcore/tests/functional).

Only the tests for features related to `pulpcore` should live in this repository.

Functional tests for features related to a specific plugin should live in the
plugin repository itself. For example:

- [File Plugin](https://github.com/pulp/pulpcore/tree/master/pulp_file/tests/functional)
- [RPM Plugin](https://github.com/pulp/pulp_rpm/tree/master/pulp_rpm/tests/functional)

## Prerequisites for running tests

If you want to run the functional tests, you need a running Pulp instance that is allowed to be
mixed up by the tests (in other words, running the tests on a production instance is not
recommended). For example, using the development vm (see `DevSetup`),
this can be accomplished by `workon pulp; pulpcore-manager runserver 24817`. The
`pulpcore-manager` command is `manage.py` configured with the
`DJANGO_SETTINGS_MODULE="pulpcore.app.settings"`.

## Running tests

In case pulp is installed in a virtual environment, activate it first (`workon pulp`).

All tests of a plugin (or pulpcore itself) are run with `pulpcore-manager test <plugin_name>`.
This involves setting up (and tearing down) the test database, however the functional tests are
still performed against the configured pulp instance with its *production* database.

To only perform the unittests, you can skip the prerequisites and call
`pulpcore-manager test <plugin_name>.tests.unit`.

If you are only interested in functional tests, you can skip the creation of the test database by
using `pytest <path_to_plugin>/<plugin_name>/tests/functional`.

!!! note
    Make sure, the task runners are actually running. In doubt, run `prestart` or
    `systemctl restart pulpcore-worker@*`.


!!! note
    You can be more specific on which tests to run by calling something like
    `pulpcore-manager test pulp_file.tests.unit.test_models` or
    `py.test <path_to_plugin>/<plugin_name>/tests/functional/api/test_sync.py`.

### Environment variables

The following environment variables can be set to adjust the API configuration for
functional tests:

- `API_PROTOCOL` (default: "https")
- `API_HOST` (default: "pulp")
- `API_PORT` (default: "443")
- `ADMIN_USERNAME` (default: "admin"),
- `ADMIN_PASSWORD` (default: "password")

## Contributing to tests

A new version of Pulp will only be released when all unit and functional tests are
passing.

Contributing test is a great way to ensure that your workflows never regress.

[istqb]: https://www.istqb.org/downloads/syllabi/foundation-level-syllabus.html
`````

## File: pulp-docs/pulpcore/docs/dev/learn/architecture/app-layout.md
`````markdown
# Pulp Platform Application Layout

The Pulp Platform is built using two key frameworks, the Django Web Framework
and the Django REST Framework. Where possible, conforming to the conventions
of these frameworks is encouraged. The Pulp Platform strives to leverage these
frameworks as much as possible, ideally making Pulp Platform development a
work of implementation before innovation.

In the event that one of these components offers functionality that augments
or supersedes functionality in another component, the order of precedence of
these frameworks is:

- Pulp Platform
- Django REST Framework (DRF)
- Django Web Framework (Django)

So, features provided by the Pulp Platform should preferred over similar
features provided by DRF, and features in DRF should be preferred over similar
features provided by Django.

## Module Layout

This is the basic layout of the `pulpcore.app` package, on the filesystem:

```
pulpcore
├── app
│   ├── apps.py
│   ├── fields.py
│   ├── __init__.py
│   ├── logs.py
│   ├── management
│   │   ├── commands
│   │   │   ├── __init__.py
│   │   │   └── ...
│   │   └── __init__.py
│   ├── manage.py
│   ├── migrations
│   ├── models
│   │   ├── __init__.py
│   │   └── ...
│   ├── pagination.py
│   ├── response.py
│   ├── serializers
│   │   ├── __init__.py
│   │   └── ...
│   ├── settings.py
│   ├── tasks
│   │   ├── __init__.py
│   │   └── ...
│   ├── templates
│   │   └── ...
│   ├── tests
│   │   └── ...
│   ├── urls.py
│   ├── viewsets
│   │   ├── __init__.py
│   │   └── ...
│   └── wsgi.py
└── __init__.py
```

The contents of this package are documented in detail in the `../platform-api/index`
documentation. Details how this package is organized can be found
below, along with information about some of the modules found in this namespace.

!!! tip
    This tree is incomplete, and maybe be out of date. Only the most notable and
    durable modules have been listed; the most complete listing of modules in this
    namespace will always be the `../platform-api/index` documentation.


## Module Imports

For modules in the `pulpcore.app` namespace that are large and capture behaviors
across multiple concerns of pulp, such as our models, we have separated these
packages into subpackages. All public identifiers and objects defined
in submodules are then collected into that module's `__init__.py`, from which
they will be imported by other Pulp Platform modules.

Using `pulpcore.app.models` as an example, this means that when breaking up the
`models` package in `pulpcore.app`, the following things are true:

- No models are defined in the `__init__.py` of `pulpcore.app.models`.

- All models are defined in submodules located in the `pulpcore.app.models` module
  directory (where its `__init__.py` can be found).

- The ` __init__.py` in `pulpcore.app.models` should consist only of import statements,
  ordered to prevent any circular import issues that may result based on the imports
  that are done in any included submodules.

- Any models defined in submodules in `pulpcore.app.models` namespace must be imported
  from the `pulpcore.app.models` namespace, not the submodule in which they are defined.
  Yes: `from pulpcore.app.models import PulpModel`,
  No: `from pulpcore.app.models.pulp import PulpModel`.

- When adding new models, they must be imported into the `pulpcore.app.models`
  `__init__.py`, so that they are available to be imported by any other Pulp Platform
  components that use them from the `pulpcore.app.models` namespace.

- Imports done inside any submodules should be relative, e.g.
  `from .submodule import identifier` or `from . import submodule`, avoiding the
  creation of circular imports.

- Imports done inside the module's `__init__.py` should be relative and explict, e.g.

  - Yes: `from .submodule import identifier1, identifier2`
  - No: `from submodule import identifier1, identifier2`
  - No: `from .submodule import *`

Any module in `pulpcore.app` broken up in this way, such as
`pulpcore.app.serializers` or `pulpcore.app.viewsets`, should do so in such a way
that renders the implementation invisible to anyone importing from that module.

## pulpcore.app

pulpcore.app is the package containing the core Pulp Platform Django application.
This package contains all of the Pulp Platform models, serializers, and
viewsets required to assemble Pulp's REST API and underlying database.

### pulpcore.app.apps

This module defines the `pulpcore.app.apps.PulpPluginAppConfig` base class
used by all Pulp plugins to identify themselves to the Pulp Platform as plugins.

This module also includes the `pulpcore.app.apps.PulpAppConfig` class which
is the Pulp Platform application config.

### pulpcore.app.settings

This is the main settings module for the platform Django project, which puts together
all of the various Django applications that the Pulp Platform depends on to function,
as well as the Pulp Platform application itself and its plugins.

Many things are defined in here, including the database settings, logging configuration,
REST API settings, etc. This file also finds and registers Pulp plugins with the Pulp
Platform Django Project, using the `pulpcore.plugin` entry point.

In order to use django-related tools with the Pulp Platform, the platform must be installed,
and the `DJANGO_SETTINGS_MODULE` environment var must be set to
`pulpcore.app.settings`.

### pulpcore.app.urls

This module contains the API `pulpcore.app.urls.root_router`, and is where all non-API
views (should we ever write any) are mapped to URLs.

### pulpcore.app.models

All models are contained in `pulpcore.app.models`.

The Platform models are all importable directly from the `pulpcore.app.models`
namespace. All Pulp models should subclass `pulpcore.app.models.Model`, or
one of its subclasses.

!!! note
    All models must exist in the pulpcore.app.models namespace in order to be
    recognized by Django and included in the Django ORM.


#### Master/Detail Models

A few Pulp Platform models, including the Content model as well as
Remotes and Publishers, implement a strategy we refer to as "Master/Detail".
The Master/Detail strategy, as implemented in Pulp, allows us to define
necessary relationships on a single master Model, while still allowing
plugin developers to extend these Master classes with details pertinent
to the plugin's requirements. Using the `pulpcore.app.models.Content`
model as an example, `pulpcore.app.models.Repository` relates to the
Content model. This causes all content to relate to the repositories that
contain them the same way while still allowing plugin writers to add any
additional fields or behaviors to the model as-needed for their use cases.

In the Pulp Platform, models requiring this sort of behavior should subclass
`pulpcore.app.models.MasterModel`.

## Serializers, ViewSets, and other Model-Related Classes

The modules containing Serializers and ViewSets, located in `pulpcore.app.serializers` and
`pulpcore.app.viewsets`, respectively, should be organized similarly to the models that
they represent where possible. For example, if `pulpcore.app.models.Repository` is defined
in the `pulpcore.app.models.repository` module, its corresponding serializer should be
defined in `pulpcore.app.serializers.repository`, and its corresponding viewset should be
defined in `pulpcore.app.viewsets.repository`, making it easy to find.

These, and other model-related classes, should be named in such a way as to make their
relationship to their Model unambiguous. To that end, model-related classes should include
the name of the model class they're related to in their name. So, the serializer for the
`pulpcore.app.models.Repository` model should be named `RepositorySerializer`, and the viewset
related to that model should be named `RepositoryViewSet`.

Classes not directly related to a model, or related to multiple models, should still of
course be named in such a way as to make their purpose obvious an unambiguous.

### ViewSet Registration

In order for ViewSets to be automatically registered with the Pulp Platform API router,
they *must* subclass `pulpcore.app.viewsets.base.NamedModelViewSet` and be imported into the
`pulpcore.app.viewsets` namespace.

ViewSets not meeting this criteria must be manually registered with the API router in
`pulpcore.app.urls` by using the router's `register` method during application setup.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/architecture/rest-api.md
`````markdown
# REST API Guidelines

## Introduction

The Pulp 3 API is intended to be decoupled from the data model, which the Django REST Framework
(DRF) makes it pretty easy to do. Where needed, support classes have been added to help the REST
API correctly and consistently represent our specialized models and relationships (most notably
the Master/Detail relationship).

Our API starts at a `DRF` `Router`. Each `ViewSet` is attached to this
router, and the router's routes are exposed in urls.py. Subclasses of
`pulpcore.app.viewsets.base.NamedModelViewSet` are automatically registered with the API router,
and most (possibly all) ViewSets created by plugins should be subclasses of this base class.
NamedModelViewSets are associated with a Django queryset, a `Serializer` that is able to
represent members of the Django queryset in the API, and an endpoint name used when registering
the ViewSet with the API router.

All models exposed via the API must have a corresponding Serializer. Each NamedModelViewSet must
be related to a serializer and a queryset of model instances to serialize.

Since Serializers and ViewSets are so closely related to the models they represent, the
serializers and viewsets directories are laid out similarly to the models directory to help keep
things consistent and easy to find.

The API basic component tree looks like this:

```
router
|-- viewset
|   |-- queryset
|   |-- serializer
|
|-- viewset
|   |-- ...
|
|-- ...
```

When creating API components, consider these guidelines:

- Where possible, API components representing models will be defined in files whose names match
  the corresponding file names of the models represented. For example, if you're defining the
  serializer for a model found in `pulpcore.app.models.consumer`, the serializer should be defined in
  `pulpcore.app.serializers.consumer`, and imported by name into `pulpcore.app.serializers`.
- All objects represented in the REST API will be referred to by a single complete URL to that
  object, using a DRF `HyperlinkedRelatedField` or subclass. Non-hyperlinked relations (e.g.
  `PrimaryKeyRelatedField`, `SlugRelatedField`, etc) should be avoided. See the "Serializer
  Relationships" section below for more details. In the database an object is identified by its
  Primary Key. In the API an object is identified by its URL.
- `pulpcore.app.viewsets.base.NamedModelViewSet` subclasses defined in a plugin's "viewsets" module
  are automatically registered with the API router. Endpoint names (the `endpoint_name` attribute)
  should plural, not singular (e.g. /pulp/api/v3/repositories/, not /pulp/api/v3/repository/).
- DRF supports natural keys on models in ModelViewSets with the "lookup_field" class attribute, but
  only if the natural key is derived from a single field (e.g. `Repository.name`). For natural
  keys made up of multiple fields, a custom Viewset and Serializer are required. The custom ViewSet
  ensures that the correct URL endpoints are created, and that a model instance can be returned for
  a given natural key. The custom Serializer (and any necessary related serializer fields), at a
  minimum, ensures that objects generate the correct `pulp_href` value when serialized.

## Serializer Relationships

### Serializer Notes

- Many of the model writing guidelines can be applied to writing serializers. Familiarity with
  them is recommended for writers of serializers.
- All Serializers representing Pulp Models should subclass
  `pulpcore.app.serializers.base.ModelSerializer`, as it provides useful behaviors to handle some
  of the conventions used when building Pulp Models.
- Whether serializer fields are explicitly declared on the serializer class or not, the field names
  to expose via the API must be declared by specifying 'fields' in the serializer's `Meta` class,
  as described in the DRF `Serializer` docs. The names of exposed API fields should always
  be explicit.
- Serialized objects will provide thier own URL as the value of the "pulp_href" field on the serializer.
  You will need to use a `rest_framework.serializers.HyperlinkedIdentifyField` to generate the
  `pulp_href` field value by specifying its `view_name`. If this object is referenced in the url by
  a field other than the pk, you will also need to specify a `lookup_field`.
- When subclassing serializers, you should also explicitly inherit properties that would normally
  be overridden in the parent Serializer's Meta class.

### Normal

A "Normal" relationship, for the purposes of this document, is defined as a Model that relates
to another Model with no specialized models on either side.

"Specialized" models include Generic Relations or a relation to the "Detail" side of a Master/Detail
Model, and are documented below.

When relating a serializer to serializers representing other models (or lists of other models),
remember to use DRF's HyperlinkedRelatedField, or a subclass of it, to ensure the relationship
is represented by complete URLs. Since this is a normal thing to do, the DRF docs explain how
to do it in detail:

<http://www.django-rest-framework.org/api-guide/relations/#hyperlinkedrelatedfield>

To determine the 'view_name' to use when declaring a HyperlinkedRelatedField, it should be
be `<endpoint_name>-<view_action>`, e.g. 'repositories-detail' when relating to a "normal" model
ViewSet whose `endpoint_name` is 'repositories'.

### Nested

Serializers can be nested inside other serializers, so in some cases it might make for a
better user experience to nest related objects inside their parent rather than only presenting
a list of links to related objects. When relating to "normal" models, this is also supported by
DRF out of the box, and the DRF docs explain how to do it in detail:

<http://www.django-rest-framework.org/api-guide/relations/#nested-relationships>

There are caveats to this when the nested relationship is intended to be writable. Mainly, DRF
needs to be told *how* it's supposed to validate and update nested objects. This is done by
implementing the create and update methods on the serializer that contains nested serializers,
as documented here:

<http://www.django-rest-framework.org/api-guide/relations/#writable-nested-serializers>

Nesting many read/write serializers may result in very complicated create/update methods, but
doing so potentially decreases the number of endpoints a user has to use when accessing the API,
which increases usability. The opposite is also true, in that too much nesting might hinder the
API usability, so the question of whether or not to nest a serializer should be handled case-by-
case.

An example of where this *might not* be useful is including complete Detail representations
of Content related to a Repository when viewing a Repository instance, since those instances
would have to be `cast()`, and there could literally be millions of them.

### Master/Detail

The Master/Detail model relationships used in platform models is an internal detail that should be
invisible to the API user. "Master" models of the Master/Detail relationship should not be exposed
via the API.

"Detail" models, then, provide a bit of a challenge, because the API needs to ensure that it is
rendering the down-cast version of the model instance requested, or referencing the correct view
name of that model when using a related field.

This is enough of a tricky problem that it has its own section in the docs a little bit below,
called "Master/Detail Relationships Overview".

### Building Explicit Serializers

In Pulp 3, the REST API will adhere to semantic versioning. This means that we need to exercise
control over what fields are exposed in the REST API, and that those fields are always exposed
the same way so that we don't break backward compatibility. To convert a ModelSerializer to its
explicit Serializer class, DRF provides an excellent bit of functionality:

```python
>>> from serializers import RepositorySerializer
>>> RepositorySerializer()
RepositorySerializer():
    pulp_href = HyperlinkedIdentityField(view_name='repositories-detail')
    name = CharField(style={'base_template': 'textarea.html'}, validators=[<UniqueValidator(queryset=Repository.objects.all())>])
    description = CharField(allow_blank=True, required=False, style={'base_template': 'textarea.html'})
    last_content_added = DateTimeField(allow_null=True, required=False)
    last_content_removed = DateTimeField(allow_null=True, required=False)
    content = HyperlinkedRelatedField(many=True, read_only=True, view_name='content-detail')
```

DRF Serializers fully support `__repr__`, which means calling `repr()` on them will return a string
that can be used to create that serializer. So, to see what fields DRF automatically generated
for a ModelSerializer, either instantiate it in an interpreter, or capture the output via `repr()`
and output it explicitly.

## Master/Detail Relationships Overview

The Master/Detail pattern that we're using in our Models requires some specific behaviors to
be properly implemented in the API. Care has been taken to expose the inner workings of these
behaviors to be easy to override or customize in plugins (if needed).

### ViewSets

As with most things related to the API, the place to start working with Master/Detail models
is in their ViewSet. The default ViewSet base class provided by the Pulp platform,
`pulpcore.app.viewsets.base.NamedModelViewSet` is aware of Master/Detail relationships, and
will do the right thing when registered with our API router. In order to benefit from this
behavior, a ViewSet must be declared that represents the Master model of a Master/Detail
relationship, and that ViewSet must, at a minimum, have its `endpoint_name` set to something
reasonable for that master model. For example, the Master ViewSet representing the Content
Model should probably have its `endpoint_name` be set to "content".

All ViewSets representing Detail Models must subclass their respective Master ViewSet, and have
their `endpoint_name` set to a string that uniquely identifies them. The autogenerated API
endpoint for a Detail ViewSet will include both the master and detail `endpoint_name`.
Building on the Content Model example, if we were making a ViewSet to represent the RPM
Detail Model, a reasonable `endpoint_name` would be "rpm". When combined with its Master
ViewSet, the generated endpoint would become `content/rpm`.

If in doubt, the Master ViewSet's `endpoint_name` should be set to the Master Model's
plural verbose name (e.g. `Content._meta.verbose_name_plural`, which is "content"), and
the Detail ViewSet's `endpoint_name` should be set to the Detail Model's TYPE value (e.g.
`RPM.TYPE`, which is probably `RPM`). There generated endpoint for this detail ViewSet
example would then become `content/rpm`.

Note that the Detail ViewSet's `endpoint_name` only needs to be unique among its Detail
ViewSet peers sharing the same Master ViewSet. It would be perfectly acceptable, for example,
to have a Detail Remote ViewSet with `endpoint_name` "rpm", since the generated endpoint
for that ViewSet would be something like `remote/rpm`, and not conflict with any of the
endpoints generated for Detail ViewSets that share the Content Model as a Master.

Setting `endpoint_name` to a string literal rather than deriving its value is an intentional
decoupling of the API from the Models represented in it. When writing ViewSets, avoid the
tempation to do things like this:

```
endpoint_name = Master._meta.verbose_name_plural
endpoint_name = Detail.TYPE
endpoint_name = anything_else_that_is_not_a_string_literal()
```

### Serializers

Since Master ViewSets are never exposed in the API (they exist only to be subclassed by Detail
ViewSets), they don't need to have an attached Serializer. However, a Serializer *must* exist
representing the Master Model in a Master/Detail relationship, and every Serializer representing
Detail Models must subclass their respective Master Serializer.

Furthermore, every Serializer representing a Master Model should subclass a special Serializer
created for Master/Detail models, `pulpcore.app.serializers.base.ModelSerializer`. This
Serializer includes a definition for the `type` field present on all models inheriting from
`pulpcore.app.models.MasterModel`, and also identifies the `type` field as filterable,
centralizing common behavior that we're likely to want in all Serializers representing Models
in a Master/Detail Relationship.

### Relating to Detail Serializers

When creating serializers for models that relate to Master/Detail models, a customized Serializer
field must be used that is Master/Detail aware so that URLs identifying the Detail Model instance
API representations are generated correctly.

In this case, instead of using a normal `HyperlinkedRelatedField`,
`pulpcore.app.serializers.base.DetailRelatedField` should be used. This field knows how to
correctly generate URLs to Detail types in the API by casting them down to their Detail Model
type, but should be used with care due to the inherent cost in calling `cast()` on an arbitrary
number of instances.

### Identifying Detail Serializers

Similar to using `DetailRelatedField`, Detail Model Serializers should use
`pulpcore.app.serializers.base.DetailIdentityField` when declaring their `pulp_href` attribute,
so that the URLs generated by Detail Serializers return the proper URL to the cast Detail
object.

## Pagination

`Pagination` support is provided by DRF, and should be used in the API to mitigate the
potentially negative effects caused by users attempting to iterate over large datasets. The
default pagination implementation use's DRF's `CursorPagination` method:

<http://www.django-rest-framework.org/api-guide/pagination/#cursorpagination>

Other methods are supported by DRF, and might be more appropriate in specific use-cases, but
cursor-based pagination provides the best support for our largest set of data, which is Content
stored in a Repository (or Repositories). By default, an object's id is used for the purposes
of cursor-based pagination, allowing an API user to reliably consume large datasets with no
duplicated entries.

Custom paginators can be easily created and attached to ViewSets using the `paginator_class`
class attribute in the ViewSet class definition.

## Filtering

### Filtering Backend

<http://www.django-rest-framework.org/api-guide/filtering/#setting-filter-backends>

We will be using `PulpFilterBackend`, a subclass of the rest framework's `DjangoFilterBackend`.
This is set as the default in the Django settings.py, but can be overridden in individual ViewSets.

### Allowing Filters

Filters must be explicitly specified and are not enabled by default.

#### filterset_fields

The simplest method of adding filters is simply to define `filterset_fields` on the ViewSet. Fields
specified here will be "filterable", but only using equality.

To use this request:

```bash
http 'http://192.168.121.134:24817/pulp/api/v3/repositories/?name=singing-gerbil'
```

This is what the ViewSet should look like:

```python
class RepositoryViewSet(viewsets.ModelViewSet):
    queryset = models.Repository.objects.all()
    serializer_class = serializers.RepositorySerializer
    filterset_fields = ('name',)
```

#### FilterSet

Defining a `FilterSet` allows more options. To start with, this is a `ViewSet` and `FilterSet`
that allows the same request:

```bash
http 'http://192.168.121.134:24817/pulp/api/v3/repositories/?name=singing-gerbil'
```

```python
class RepositoryFilter(filters.FilterSet):
    pass

    class Meta:
        model = models.Repository
        fields = ['name']

class RepositoryViewSet(viewsets.ModelViewSet):
    queryset = models.Repository.objects.all()
    serializer_class = serializers.RepositorySerializer
    filterset_class = RepositoryFilter
```

!!! note
    For `NamedModelViewSet` the base class `BaseFilterSet` should be used.


#### Beyond Equality

A `FilterSet` also allows filters that are more advanced than equality. We have access to any of
the filters provided out of the box by `django-filter`.

<https://django-filter.readthedocs.io/en/latest/ref/filters.html#filters>

Simply define any filters in the `FilterSet` and then include them in `fields` in the Filter's Meta class.

`http 'http://192.168.121.134:24817/pulp/api/v3/repositories/?name_contains=singing'`

```python
class RepositoryFilter(filters.FilterSet):
    name_contains = django_filters.filters.CharFilter(field_name='name', lookup_expr='contains')

    class Meta:
        model = models.Repository
        fields = ['name_contains']
```

#### Custom Filters

If the filters provided by `django-filter` do not cover a use case, we can create custom filters
from the `django-filter` base classes.

"In" is a special relationship and is not covered by the base filters, however we can create a
custom filter based on the `BaseInFilter`.

```bash
http 'http://192.168.121.134:24817/pulp/api/v3/repositories/?name_in_list=singing-gerbil,versatile-pudu'
```

```python
class CharInFilter(django_filters.filters.BaseInFilter,
                   django_filters.filters.CharFilter):
    pass

class RepositoryFilter(filters.FilterSet):
    name_in_list = CharInFilter(name='name', lookup_expr='in')

    class Meta:
        model = models.Repository
        fields = ['name_in_list']
```

!!! note
    We should be careful when naming these filters. Using `repo__in` would be fine because
    repo is not defined on this model. However, using `name__in` does *not* work because Django
    gets to it first looking for a subfield `in` on the name.


## Documenting

By default, the docstring of a CRUD method on a ViewSet is used to generate that endpoint's
description. Individual parameters and responses are documented largely automatically based
on the Serializer field type, but using the "help_text" kwarg when defining serializer fields
lets us add a user-friendly string that is then included in the API endpoint.

ViewSets can override the `get_view_description` method to customize the source and formatting
of the description field, if desired. Serializer fields should set their `help_text` value for
every field defined to help API users know the purpose of each field represented in the API.

If a site-wide customization of docstring generation is desired, DRF provides a mechanism for
changing the default function used in `get_view_description`:

<http://www.django-rest-framework.org/api-guide/settings/#view_description_function>

There are several support tools that work with DRF to aggregate endpoint documentation into
a browsable site of API docs, listed here:

<http://www.django-rest-framework.org/topics/documenting-your-api/#endpoint-documentation>

Because "DRF Docs" and "Django REST Swagger" do not generate documentation for responses,
Pulp is generating its REST API with [drf-spectacular](https://github.com/tfranzel/drf-spectacular)
until either DRF supports OpenAPI, or until CoreAPI supports response documentation.

## Glossary


DRF

: The Django Rest Framework.

Pagination

: The practice of splitting large datasets into multiple pages.

Router

: A `DRF` API router exposes registered views (like a `ViewSet`) at
  programatically-made URLs. Among other things, routers save us the trouble of having
  to manually write URLs for every API view.

  <http://www.django-rest-framework.org/api-guide/routers/>

Serializer

: A `DRF` Serializer is responsible for representing python objects in the API,
  and for converting API objects back into native python objects. Every model exposed
  via the API must have a related serializer.

  <http://www.django-rest-framework.org/api-guide/serializers/>

ViewSet

: A `DRF` ViewSet is a collection of views representing all API actions available
  at an API endpoint. ViewSets use a `Serializer` or Serializers to correctly
  represent API-related objects, and are exposed in urls.py by being registered with
  a `Router`. API actions provided by a ViewSet include "list", "create", "retreive",
  "update", "partial_update", and "destroy". Each action is one of the views that make up
  a ViewSet, and additional views can be added as-needed.

  <http://www.django-rest-framework.org/api-guide/viewsets/>
`````

## File: pulp-docs/pulpcore/docs/dev/learn/domains/domain_enabled_api.md
`````markdown
# Creating Domain-Enabled APIs

This document outlines the components and patterns needed to create a domain-enabled API in the Pulp platform

## 1. Model Configuration

### Steps

- Inherit from `BaseModel` to get standard Pulp fields and behaviors
- Include a `pulp_domain` foreign key field to associate records with specific domains

### Example Implementation

```python
from pulpcore.plugin.models import BaseModel, Domain
from pulpcore.app.util import get_domain_pk

class YourDomainEnabledModel(BaseModel):
    # Your model-specific fields
    some_field = models.TextField()
    data = models.JSONField()
    
    # Domain relationship - this is the key component for domain enablement
    pulp_domain = models.ForeignKey("core.Domain", default=get_domain_pk, on_delete=models.CASCADE)
    
    def __str__(self):
        return f"Your Model {self.pulp_id}"
```

## 2. Serializer Configuration

### Instructions

- Inherit from `ModelSerializer` to get standard Pulp serialization behavior
- Include an `IdentityField` for proper HREF generation
- Include all model fields that should be exposed in the API

### Example Implementation

```python
from pulpcore.plugin.serializers import IdentityField
from rest_framework import serializers
from pulpcore.plugin.serializers import ModelSerializer

class YourModelSerializer(ModelSerializer):
    pulp_href = IdentityField(view_name="your-endpoint-name-detail")
    # Include serializer fields corresponding to your model fields
    some_field = serializers.CharField()
    data = serializers.JSONField()
    
    class Meta:
        model = YourDomainEnabledModel
        fields = ModelSerializer.Meta.fields + ('some_field', 'data')
```

## 3. ViewSet Configuration

### Instructions

- Inherit from `NamedModelViewSet` for correct Pulp behavior (routing, permissions, domain scoping)
- Include mixins for specific operations (ListModelMixin, RetrieveModelMixin, etc.)
- Set `endpoint_name` for API URL generation
- Set `queryset` and `serializer_class`
- Implement custom methods as needed (create, list, etc.)

### Out-of-the-Box Functionality with Mixins

By including the standard Django REST Framework mixins, you get working endpoints without writing additional code:

- **ListModelMixin**: Automatically implements the `.list()` method, handling GET requests to the collection endpoint (`/pulp/{domain}/api/v3/your-endpoint-name/`). This provides:
    - Automatic pagination
    - Domain-aware filtering (objects only from the current domain)
    - Serialization of results using your serializer class

- **RetrieveModelMixin**: Automatically implements the `.retrieve()` method, handling GET requests to detail endpoints (`/pulp/{domain}/api/v3/your-endpoint-name/{uuid}/`). This provides:
    - Automatic lookup by UUID (pulp_id)
    - Domain-aware object retrieval
    - 404 responses for objects that don't exist or are in other domains

Simply by including these mixins and setting up the proper `queryset` and `serializer_class`, your API gains functional list and detail views with proper domain isolation.

### Example Implementation

```python
from pulpcore.app.viewsets import NamedModelViewSet
from rest_framework.mixins import ListModelMixin, RetrieveModelMixin
from pulpcore.app.response import OperationPostponedResponse
from pulpcore.plugin.tasking import dispatch

class YourModelViewSet(NamedModelViewSet, ListModelMixin, RetrieveModelMixin):
    endpoint_name = 'your-endpoint-name'
    queryset = YourDomainEnabledModel.objects.all()
    serializer_class = YourModelSerializer
    
    # No need to implement list() or retrieve() - they're provided by the mixins!
    
    def create(self, request):
        # Implement your creation logic
        serializer = YourCreateSerializer(data=request.data)
        serializer.is_valid(raise_exception=True)
        
        # For async operations
        task = dispatch(your_async_task, kwargs={
            'param1': serializer.validated_data['param1']
        })
        
        return OperationPostponedResponse(task, request)
```

## 4. Task Implementation (For Async Operations)

For domain-enabled APIs that need async operations:

```python
def your_async_task(self, param1):
    """
    Process data asynchronously.
    
    Args:
        param1: Data from the API request
        
    Returns:
        Dictionary of results
    """
    # Your task implementation
    # Domain context is automatically handled by Pulp task system
    # Use util method `get_domain` to get the current domain in the running Task
    
    # Create the model instance
    model_instance = YourDomainEnabledModel.objects.create(
        some_field="value",
        data={"processed": True}
    )
    
    return model_instance.pk
```

## 5. URL Registration

With `NamedModelViewSet`, URL registration happens automatically:

- No manual URL configuration is needed
- The `endpoint_name` property in your ViewSet determines the URL path
- URLs are registered automatically when Pulp starts up

For example, a ViewSet with `endpoint_name = 'your-endpoint-name'` will automatically be available at:

- `GET /pulp/{domain-name}/api/v3/your-endpoint-name/` (list endpoint)
- `GET /pulp/{domain-name}/api/v3/your-endpoint-name/{uuid}/` (detail endpoint)
- Other HTTP methods as defined by your included mixins

This automatic URL registration is a key advantage of using the Pulp platform and `NamedModelViewSet`.

```python
# No manual URL registration needed - this happens automatically
class YourModelViewSet(NamedModelViewSet, ListModelMixin, RetrieveModelMixin):
    endpoint_name = 'your-endpoint-name'  # This defines the URL path
    queryset = YourDomainEnabledModel.objects.all()
    serializer_class = YourModelSerializer
```

## Key Considerations

1. **Domain Filtering**: The `pulp_domain` foreign key enables automatic domain filtering in the Pulp platform
2. **Permissions**: Consider domain-specific permissions if needed
3. **Serialization**: Ensure proper serialization of domain-specific data
4. **Task Dispatching**: Use the Pulp task system for async operations

## Complete Example: 

The implementation demonstrates these patterns:

- **Model**: Has `pulp_domain` field to associate reports with domains
- **Serializer**: Exposes domain-specific fields and proper HREF generation
- **ViewSet**: Provides domain-aware CRUD operations
- **Task**: Handles async processing while maintaining domain context

By following these patterns, you can create domain-enabled APIs that properly isolate data between domains while leveraging Pulp's powerful features for API management and asynchronous task handling.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/domains/domains_compatibility.md
`````markdown
# Adding Domain Compatibility to a Plugin

In order to enable Domains, all plugins must be Domain compatible or Pulp will refuse to start.
Since Domains is an optional feature,
becoming Domains compatible requires special handling for when the feature is on or off.

Follow the guide below to learn how to make your plugin Domain compatible.

## Add Domain Relation to Plugin Models

Objects will need to be updated to always have a relation to a `pulp_domain`,
which points to a default domain when the feature is disabled.
Most models that inherit from `pulpcore` models will already have a `pulp_domain` foreign key relation,
so this step mainly involves updating your plugin's custom models.
The one exception is models inheriting from `Content`.
These models need the `_pulp_domain` relation to be added onto the model and have their `unique_together` updated.
See the code below for an example:

```python
from pulpcore.plugin.util import get_domain_pk

class FileContent(Content):
    ...
    _pulp_domain = models.ForeignKey("core.Domain", default=get_domain_pk, on_delete=models.PROTECT)

    class Meta:
        unique_together = ("relative_path", "digest", "_pulp_domain")
```

!!! note

    Child content models need a separate domain relation,
    since Postgres does not allow `unique_together` on fields from the parent table.
    The base `Content` model has a `pulp_domain` relation already,
    so the child content model must use an underscore to prevent a name collision.


## Ensure any Custom Action Serializer Prevents Cross-Domain Parameters

Domains are strictly isolated from each other and thus two objects from different domains can not be used within the same task/operation.
The `pulpcore.app.serializers.ValidateFieldsMixin` contains a method for this check: `check_cross_domains`.
This is called during the `validate` method if this mixin is included in your serializer.
Custom serializers that take in multiple resources need to perform this check to ensure Domain validity.

## Update each Task that uses Objects to include the Domain field

Task code that uses objects needs to be updated to account for Domains.
Each task can access the current domain either through the current `Task`'s `pulp_domain` relation or through using `pulpcore.plugin.util.get_domain`.
These should be used to ensure you are only using objects within the correct `domain` of the task.
The [sync pipeline] has been updated to use the task's `domain` when querying and saving `Artifact` and `Content` units,
so simple sync-pipelines will probably need no update.
Similarly, when [creating a publication] with the context-manager,
the `pulp_domain` field is already properly handled on the `Publication`, `PublishedArtifacts` and `PublishedMetadata`.

```python
from pulpcore.plugin.models import Task
from pulpcore.plugin.util import get_domain
from .models import CustomModel

def custom_task(custom_property):
    # How to get the current domain for this task
    domain = Task.current().pulp_domain
    # Or with get_domain
    domain = get_domain()
    # Use only objects within the Task's domain
    objects = CustomModel.objects.filter(pulp_domain=domain)
```

## Add the Appropriate has\_domain\_perms Checks to the ViewSets' AccessPolicies

If your plugin uses [RBAC AccessPolicies],
then the current access condition checks need to be updated to use their Domain compatible variants.
These checks ensure that Domain-level permissions work properly in your ViewSets.
See the `permission_checking_machinery` documentation for all available checks.

## Update any extra URL Routes to include \{pulp\_domain\}

Enabling Domains modifies the URL paths Pulp generates and custom routes added in `urls.py` need to add `{pulp_domain}` when `DOMAIN_ENABLED` is set.
Pulp has a custom Domain middleware that will remove the `pulp_domain` from the ViewSet's handler method args and attach it to the request object to prevent breaking current ViewSets.

## Add `domain_compatible = True` to `PluginAppConfig`

This attribute is what informs Pulp that your plugin is Domain compatible on startup.
Without this, Pulp will fail to start when enabling Domains.

## Add Tests

Adding custom tests for the most important actions is a good way to ensure your compatibility stays well maintained.
In your `template_config.yml`, change one-two runners to have `DOMAIN_ENABLED` set.
Use this setting in your custom Domains tests to check if they should be skipped.
When Domains are enabled the Python client bindings will require a `pulp_domain` name parameter on `list` and `create` actions.
This param has a default value of 'default' to prevent the need to rewrite existing tests.

```yaml
pulp_settings:
  orphan_protection_time: 0
pulp_settings_azure:
  domain_enabled: true
pulp_settings_s3:
  domain_enabled: true
pulp_settings_stream: null
```

## Add Documentation

Add Domain documentation to your workflows to show off your new features!

[creating a publication]: site:/pulpcore/docs/dev/learn/tasks/publish/
[RBAC AccessPolicies]: site:/pulpcore/docs/dev/learn/rbac/access_policy/
[sync pipeline]: site:/pulpcore/docs/dev/learn/sync_pipeline/sync_pipeline/
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/content-protection.md
`````markdown
# Content Protection

By default, the Content app will serve all content, but some deployments want to only serve content
to some users and not others. For example pulp_rpm only wants to give rpms to users who have valid
certificates declaring their paid access to content. To allow total customization of how content is
protected, A plugin writer can define a `ContentGuard`.

## Defining a ContentGuard

The `ContentGuard` is a Master/Detail object provided at
`from pulpcore.plugin.models import ContentGuard`, which provides [these base fields](https://github.com/pulp/pulpcore/blob/master/pulpcore/app/models/publication.py#L192-L202).

In your plugin code, subclass `ContentGuard` and optionally add additional fields as necessary to
perform the authentication and authorization. Then overwrite the `permit` method so that it
returns `None` if access is granted and throws a `PermissionError` on denial. As with all
Master/Detail objects a `TYPE` class attribute is needed which is then used in the URL. For
`ContentGuard` detail objects the URL structure is:

```
``/pulp/api/v3/contentguards/<plugin_name>/<TYPE>/``
```

!!! note
    The [pulp-certguard](site:pulp_certguard/) plugin ships various
    `ContentGuard` types for users and plugin writers to use together. Plugins can ship their own
    content guards too, but look at the existing ones first.


## Simple Example

Here's a trivial example where the client needs to send a header named SECRET_STRING and if its
value matches a recorded value for that ContentGuard instance, give the content to the user. The
secret both authenticates the user and authorizes them for this Content.

```python
from django.db import models
from pulpcore.plugin.models import ContentGuard

class SecretStringContentGuard(ContentGuard):

    TYPE = 'secret_string'

    secret_string = models.FileField(max_length=255)

    def permit(self, request):
        """

        Authorize the specified web request.

        Args:
            request (aiohttp.web.Request): A request for a published file.

        Raises:
            PermissionError: When the request cannot be authorized.
        """
        ca = self.ca_certificate.read()
        validator = Validator(ca.decode('utf8'))
        validator(request)

    class Meta:
        default_related_name = "%(app_label)s_%(model_name)s"
```

### End-User use of ContentGuard

Users create an instance of a `SecretStringContentGuard` and give it a secret string with
`httpie`:

```
http POST http://localhost:24817/pulp/api/v3/contentguards/<plugin_name>/secret_string/ \
              secret_string='2xlSFgJwOhbLrtIlmYszqHQy7ivzdQo9'
```

Then the user can protect one or more Distributions by specifying `content_guard`. See the
[ContentGuard creation API](site:pulpcore/restapi/#tag/Distributions:-File/operation/distributions_file_file_list) for more information.



### Plugin Writer use of ContentGuard

Plugin writers can also programatically create detail `ContentGuard` instances and have the
plugin's detail Distribution they define force its use. This allows plugin writers to offer
content protection features to users with fewer user required steps.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/documentation.md
`````markdown
# Documentation

## Principles

Pulp's documentation is designed with the following principles:

1. Avoid documenting external projects, providing links wherever reasonable.

2. Documentation layout should be designed for users to intuitively find information.

3. The structure should present introductory material before advanced topics.

4. Documentation should cross reference to limit repitition.

5. Pulp terminology should be be explicitly defined and added to the glossary.

6. Documentation should stay consistent with the language used in the `concepts`.

7. Where reasonable, documents should include:

   1. Summary of content.
   2. Intended audience.
   3. Links to prerequisite material.
   4. Links to related material.

## Building the Docs:

If you are using a developer Vagrant box, the docs requirements should already be installed.

Otherwise, (in your virtualenv), you should install the docs requirements.:

```
(pulp) $ pip install -r doc_requirements.txt
```

To build the docs, from the docs directory, use `make`:

```
(pulp) $ cd docs
(pulp) $ make html
```

Use your browser to load the generated html, which lives in `docs/_build/html/`

You do not need to clean the docs before rebuilding, however you can do it by running:

```
(pulp) $ cd docs
(pulp) $ make clean
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/error-handling.md
`````markdown
# Error Handling

## Errors in Tasks

All uncaught exceptions in a task are treated as fatal exceptions. The task is then marked as
failed. The error traceback, description, and code are returned to the user under the
`pulpcore.app.models.Task.error` attribute of the `pulpcore.app.models.Task`
object.

When raising exceptions [built-in Python Exceptions](https://docs.python.org/3/library/exceptions.html)
should be used if possible. {doc}`Coded Exceptions </contributing/platform-api/exceptions>` should be used for known error situations.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/how-plugins-work.md
`````markdown
# How Plugins Work



## Plugin Django Application

Like the Pulp Core itself, all Pulp Plugins begin as Django Applications, started like any other
with `pulpcore-manager startapp <your_plugin>`. However, instead of subclassing Django's
`django.apps.AppConfig` as seen [in the Django documentation](https://docs.djangoproject.com/en/4.2/ref/applications/#for-application-authors), Pulp Plugins identify themselves as plugins to
pulpcore by subclassing `pulpcore.plugin.PulpPluginAppConfig`.

`pulpcore.plugin.PulpPluginAppConfig` also provides the application autoloading behaviors,
such as automatic registration of viewsets with the API router, which adds plugin endpoints.

The `pulpcore.plugin.PulpPluginAppConfig` subclass for any plugin must set a few required
attributes:

- `name` attribute defines the importable dotted Python location of the plugin application (the
  Python namespace that contains at least models and viewsets).
- `label` attribute to something that unambiguously labels the plugin in a clear way for users.
  See [how it is done](https://github.com/pulp/pulpcore/blob/master/pulp_file/app/__init__.py) in
  the `pulp_file` plugin.
- `version` attribute to the string representing the version.



## pulpcore.plugin Entry Point

The Pulp Core discovers available plugins by inspecting the pulpcore.plugin entry point.

Once a plugin has defined its `pulpcore.plugin.PulpPluginAppConfig` subclass, it should add
a pointer to that subclass using the Django `default_app_config` convention, e.g.
`default_app_config = pulp_myplugin.app.MyPulpPluginAppConfig` somewhere in the module that
contains your Django application. The Pulp Core can then be told to use this value to discover your
plugin, by pointing the pulpcore.plugin entry point at it. If, for example, we set
`default_app_config` in `pulp_myplugin/__init__.py`, the setup.py `entry_points` would look like
this:

```python
entry_points={
    'pulpcore.plugin': [
        'pulp_myplugin = pulp_myplugin:default_app_config',
    ]
}
```

If you do not wish to use Django's `default_app_config` convention, the name given to the
`pulpcore.plugin` entry point must be an importable identifier with a string value containing the
importable dotted path to your plugin's application config class, just as `default_app_config`
does.

Check out `pulp_file` plugin: [default_app_config](https://github.com/pulp/pulpcore/blob/master/pulp_file/__init__.py) and [setup.py example](https://github.com/pulp/pulpcore/blob/master/setup.py).



## Model, Serializer, Viewset Discovery

The structure of plugins should, where possible, mimic the layout of the Pulp Core Plugin API. For
example, model classes should be based on platform classes imported from
`pulpcore.plugin.models` and be defined in the `models` module or directory of a plugin app.
ViewSets should be imported from `pulpcore.plugin.viewsets`, and be defined in the `viewsets`
module of a plugin app, and so on.

This matching of module names is required for the Pulp Core to be able to auto-discover plugin
components, particularly for both models and viewsets.

Take a look at [the structure](https://github.com/pulp/pulpcore/tree/master/pulp_file/app) of
the `pulp_file` plugin.

## Serializer and OpenAPI schema

Serializers are converted to OpenAPI objects through [drf-spectacular](https://github.com/tfranzel/drf-spectacular).
It inspects all serializer fields to describe them in the OpenAPI schema.
Due to the [DRF issue](https://github.com/encode/django-rest-framework/issues/7354)
it is preferable to use `CharField` instead of `URLField`.
Otherwise The REST API hosted at `/pulp/api/v3/` may hide some paths.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/how-to-doc-api.md
`````markdown
# Documenting your API

Each instance of Pulp hosts dynamically generated REST API documentation located at
`http://pulpserver/pulp/api/v3/docs/`.

The documentation is generated using [ReDoc](https://github.com/Rebilly/ReDoc) based on the
[OpenAPI 3.0](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md) schema
generated by Pulp. The schema generator iterates over all the Views and Viewsets in every plugin
and generates the schema based on the information provided by Viewset doc strings, Viewset method
docstrings, associated Model's names, View docstrings, and the help text from serializers.

Individual parameters and responses are documented automatically based on the Serializer field type.
A field's description is generated from the "help_text" kwarg when defining serializer fields.

Response status codes can be generated through the `Meta` class on the serializer:

```python
from rest_framework.status import HTTP_400_BAD_REQUEST

class SnippetSerializerV1(serializers.Serializer):
    title = serializers.CharField(required=False, allow_blank=True, max_length=100)

    class Meta:
        error_status_codes = {
            HTTP_400_BAD_REQUEST: 'Bad Request'
        }
```

You may disable schema generation for a view by setting `schema` to `None`:

```python
class CustomView(APIView):
    # ...
    schema = None  # Will not appear in schema
```

!!! note
    `Meta.ref_name` is a string that is used as the model definition name for
    the serializer class. If this attribute is not specified, all serializers
    have an implicit name derived from their class name. In order to avoid
    possible name collisions between plugins, plugins must define `ref_name`
    on the Meta class using `<app_label>.` as a prefix.

For the model based serializers offered by pulpcore (i.e.
`pulpcore.plugin.serializers.ModelSerializer` and derived
serializers), `Meta.ref_name` will be set correctly automatically. There is no
need to set `Meta.ref_name` in this case.

If a serializer has no associated model, you need to set `Meta.ref_name`
explicitly. For example, if the `SnippetSerializerV1` from above is for
the plugin providing the `snippets` app, `ref_name` could be set like
this:

```
class SnippetSerializerV1(serializers.Serializer):
    title = serializers.CharField(required=False, allow_blank=True, max_length=100)

    class Meta:
        ref_name = "snippets.Snippet"
```


!!! note
    Plugin authors can provide manual overrides using the
    [@extend_schema decorator](https://drf-spectacular.readthedocs.io/en/stable/drf_spectacular.html#drf_spectacular.utils.extend_schema)


The OpenAPI schema for pulpcore and all installed plugins can be downloaded from the `pulp-api`
server:

```bash
curl -o api.json http://localhost:24817/pulp/api/v3/docs/api.json
```

The OpenAPI schema for a specific plugin can be downloaded by specifying the plugin's module name
as a GET parameter. For example for pulp_rpm only endpoints use a query like this:

```bash
curl -o api.json http://localhost:24817/pulp/api/v3/docs/api.json?component=rpm
```

# OpenAPI Tags

Tags are used to group operations logically into categories, such as RepositoriesRpm,
DistributionsRpm, ContentPackages, and so on.
Pulpcore OpenAPI Tags are generated from URL paths.

Path `/pulp/api/v3/repositories/rpm/rpm/` yields the tag `repositories: rpm` which is turned into
`RepositoriesRpmApi` in the bindings client.

It is possible to customize the tag by setting the `pulp_tag_name` attribute at your view.

Setting `pulp_tag_name = "Pulp: RPM Repo"` at `RpmRepositoryViewSet` yields the tag `Pulp: RPM Repo`
which is turned into `PulpRPMRepoApi` in the bindings client.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/metadata-signing.md
`````markdown
# Metadata Signing

Plugin writers wishing to enable users to sign metadata need to add a new field `metadata_signing_service`
to their implementation of a repository and/or publication. This field should be exposed to users who consume
content via REST API. The users may afterwards specify which signing service will be used to sign the
metadata when creating a publication.

Every signing service will always be an instance of a subclass of the `SigningService` model. Plugin
writers may either use the existing `AsciiArmoredDetachedSigningService`, or use that as a reference for
writing their own signing service model.

The `SigningService` base class already provides the fully implemented `sign()` method, the signature of
the `validate()` method (which must be implemented by each subclass), and the `save()` method (which
calls the `validate()` method, but is otherwise fully implemented).

!!! note

    The `sign()` function will be calling the provided script to give the administrator the
    freedom to define, how the signature is obtained. It is their responsibility to setup the
    software or hardware facilities for signing and make the script use them. The plugin writer
    however should provide a reasonably easy default script based on e.g. a simple call to `gpg`.

In order to sign metadata, plugin writers are required to call the `sign()` method of the signing service
being used. This method invokes the signing script (or other executable) which is provided by the
administrator who instantiates a concrete signing service. Instantiating/creating a concrete signing service
will ultimately call the `save()` method, which will in turn call `validate()`. As a result, it is up to
the `validate()` method to ensure the signing service script provided by the administrator actually provides
any signatures, signature files, and return values, as required by the individual `SigningService` subclass.

This is why implementing a signing service model other than `AsciiArmoredDetachedSigningService` simply
requires inheriting from `SiginingService` and then implementing `validate()`.

The existing `AsciiArmoredDetachedSigningService` requires a signing script that creates a detached
ascii-armored signature file, and prints valid JSON in the following format to stdout:

```json
{"file": "filename", "signature": "filename.asc"}
```

Here "filename" is a path to the original file that was signed (passed to the signing script by the
`sign()` method), and "filename.asc" is a path to the signature file created by the script.

The script may read the fingerprint of the key it should use for signing, from the
`PULP_SIGNING_KEY_FINGERPRINT` environment variable.
A `CORRELATION_ID` environment variable is also added by default.
It is possible to pass a dictionary of environment variables to the signing script if need be.

The json is converted to a python dict and returned by the `sign()` method. If an error occurs, a
runtime error is raised instead. All of this is enforced by the `validate()` method at the time of
instantiation.

For more information see the corresponding `workflow documentation <configuring-signing>`.

## Procedure Sample

The following procedure may be taken into account for the plugin writers.

### Context

Let us assume that a file repository contains the field `metadata_signing_service`:

```python
metadata_signing_service = models.ForeignKey(
   AsciiArmoredDetachedSigningService,
   on_delete=models.SET_NULL,
   null=True
)
```

In the serializer, there is also added a corresponding field that serializes `metadata_signing_service`,
like so:

```python
metadata_signing_service = serializers.HyperlinkedRelatedField(
   help_text="A reference to an associated signing service.",
   view_name="signing-services-detail",
   queryset=models.AsciiArmoredDetachedSigningService.objects.all(),
   many=False,
   required=False,
   allow_null=True
)
```

### Associate a signing service

Retrieve a desired signing script via the field `metadata_signing_service` stored in the repository:

```python
metadata_signing_service = FileRepository.objects.get(name='foo').metadata_signing_service
```

A plugin writer can create a new repository with an associated signing service in the following two ways:

=== "Using Python"

    ```python
    signing_service = AsciiArmoredDetachedSigningService.objects.get(name='sign-metadata')
    FileRepository.objects.create(name='foo', metadata_signing_service=signing_service)
    ```

=== "Using HTTP calls"

    ```bash
    http POST :24817/pulp/api/v3/repositories/file/file/ name=foo metadata_signing_service=http://localhost:24817/pulp/api/v3/signing-services/5506c8ac-8eae-4f34-bb5a-3bc08f82b088/
    ```

### Sign the file

Sign a file by calling the method `sign()`:

```python
with tempfile.TemporaryDirectory("."):
    try:
        signature = metadata_signing_service.sign(metadata.filepath)
    except RuntimeError:
        raise
    add_to_repository(metadata, signature)
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/object-relationships.md
`````markdown
# Object Relationships

There are models which are expected to be used in plugin implementation, so understanding what they
are designed for is useful for a plugin writer. Each model below has a link to its documentation
where its purpose, all attributes and relations are listed.

Here is a gist of how models are related to each other and what each model is responsible for.

- `pulpcore.app.models.Repository` contains `pulpcore.plugin.models.Content`.
  `pulpcore.plugin.models.RepositoryContent` is used to represent this relation.
- `pulpcore.plugin.models.Content` can have `pulpcore.plugin.models.Artifact`
  associated with it. `pulpcore.plugin.models.ContentArtifact` is used to represent this
  relation.
- `pulpcore.plugin.models.ContentArtifact` can have
  `pulpcore.plugin.models.RemoteArtifact` associated with it.
- `pulpcore.plugin.models.Artifact` is a file.
- `pulpcore.plugin.models.RemoteArtifact` contains information about
  `pulpcore.plugin.models.Artifact` from a remote source, including URL to perform
  download later at any point.
- `pulpcore.plugin.models.Remote` knows specifics of the plugin
  `pulpcore.plugin.models.Content` to put it into Pulp.
  `pulpcore.plugin.models.Remote` defines how to synchronize remote content. Pulp
  Platform provides support for concurrent  `downloading <download-docs>` of remote content.
  Plugin writer is encouraged to use one of them but is not required to.
- `pulpcore.plugin.models.PublishedArtifact` refers to
  `pulpcore.plugin.models.ContentArtifact` which is published and belongs to a certain
  `pulpcore.app.models.Publication`.
- `pulpcore.plugin.models.PublishedMetadata` is a file generated while publishing and
  belongs to a certain `pulpcore.app.models.Publication`.
- `pulpcore.app.models.Publication` is a result of publish operation of a specific
  `pulpcore.plugin.models.RepositoryVersion`.
- `pulpcore.app.models.Distribution` defines how a publication is distributed for a specific
  `pulpcore.plugin.models.Publication`.
- `pulpcore.plugin.models.ProgressReport` is used to report progress of the task.
- `pulpcore.plugin.models.GroupProgressReport` is used to report progress of the task group.

An important feature of the current design is deduplication of
`pulpcore.plugin.models.Content` and `pulpcore.plugin.models.Artifact` data.
`pulpcore.plugin.models.Content` is shared between `pulpcore.app.models.Repository`,
`pulpcore.plugin.models.Artifact` is shared between
`pulpcore.plugin.models.Content`.
See more details on how it affects remote implementation in `define-remote` section.

Check `pulp_file` [implementation](https://github.com/pulp/pulpcore/tree/main/pulp_file) to see how all
those models are used in practice.
More detailed explanation of model usage with references to `pulp_file` code is below.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/on-demand-support.md
`````markdown
# On-Demand Support

"On-Demand support" refers to a plugin's ability to support downloading and creating Content but not
downloading their associated Artifacts. By convention, users expect the `Remote.policy` attribute to
determine when Artifacts will be downloaded. See the user docs for specifics on the user
expectations there.



## Adding Support when using DeclarativeVersion

Plugins like `pulp-file` sync content using `DeclarativeVersion`.
On-demand support can be added by specifying `deferred_download=True` at instantiation of
`pulpcore.plugin.stages.DeclarativeArtifact`.

`Remote.policy` can take several values. To easily translate them, consider a snippet like this one
taken from `pulp-file`.:

```
async def run(self):
    # Interpret download policy
    deferred_download = (self.remote.policy != Remote.IMMEDIATE)
    <...>
    da = DeclarativeArtifact(
        artifact=artifact,
        url=url,
        relative_path=relative_path,
        remote=self.remote,
        deferred_download=deferred_download,
    )
    <...>
```

!!! tip

    The `deferred_download` flag is used at the artifact level, to support on-demand concepts for
    plugins that need some artifacts to download immediately in all cases.
    See also `multi-level-discovery`.

## Adding Support when using a Custom Stages API Pipeline

Plugins like `pulp-rpm` that sync content using a custom pipeline can enable on-demand support by
excluding the `QueryExistingArtifacts`, `ArtifactDownloader` and `ArtifactSaver` stages. Without
these stages included, no Artifact downloading will occur. Content unit saving will occur, which
will correctly create the on-demand content units.

`Remote.policy` can take several values. To easily maintain the pipeline consider a snippet like
this one inspired by `pulp-rpm`:

```
download = (remote.policy == Remote.IMMEDIATE)  # Interpret policy to download Artifacts or not
stages = [first_stage]
if download:
    stages.extend([QueryExistingArtifacts(), ArtifactDownloader(), ArtifactSaver()])
stages.extend(the_rest_of_the_pipeline)  # This adds the Content and Association Stages
```

!!! warning

    Skipping of those Stages does not work with `multi-level-discovery`.
    If you need some artifacts downloaded anyway, follow the example on
    \:ref:on-demand-support-with-dv\` and include the artifact stages in the custom pipeline.

!!! tip

    Consider to also exclude the `ResolveContentFutures` stage.

## What if the Custom Pipeline Needs Artifact Downloading?

For example, `pulp-container` uses a custom Stages API Pipeline, and relies on Artifact downloading to
download metadata that is saved and stored as a Content unit. This metadata defines more Content
units to be created without downloading their corresponding Artifacts. The on-demand support for
this type needs to download Artifacts for those content types, but not others.

By specifying `deferred_download=False` in the `DeclarativeArtifact` regardless of the overall sync
policy, lazy downloading for that specific artifact can be prohibited.

!!! tip

    See also `on-demand-support-with-da`


## How Does This Work at the Model Layer?

The presence of a `RemoteArtifact` is what allows the Pulp content app to fetch and serve that
Artifact on-demand. So a Content unit is on-demand if and only if:

1. It has a saved Content unit
2. A `ContentArtifact` for each `Artifact` is saved that the Content unit would have referenced.
   Note: the `ContentArtifact` is created in both on-demand and not on-demand cases.
3. Instead of creating and saving an `Artifact`, a `RemoteArtifact` is created. This contains any
   known digest or size information allowing for automatic validation when the `Artifact` is
   fetched.

## How does the Content App work with this Model Layer?

When a request for content arrives, it is matched against a `Distribution` and eventually against a
specific Artifact path, which actually matches against a `ContentArtifact` not an `Artifact`. If an
`Artifact` exists, it is served to the client. Otherwise a `RemoteArtifact` allows the `Artifact` to
be downloaded on-demand and served to the client.

If `remote.policy == Remote.ON_DEMAND` the Artifact is saved on the first download. This causes
future requests to serve the already-downloaded and validated Artifact.

!!! note

    In situations where multiple Remotes synced and provided the same `Content` unit, only one
    `Content` unit is created but many `RemoteArtifact` objects may be created. The Pulp Content app
    will try all `RemoteArtifact` objects that correspond with a `ContentArtifact`. It's possible an
    unexpected `Remote` could be used when fetching that equivalent `Content` unit. Similar warnings
    are in the user documentation on on-demand.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/planning-guide.md
`````markdown
# Plugin Planning Guide

This guide assumes that you are familiar with [general pulp concepts](site:pulpcore/docs/dev/learn/plugin-concepts/).
Usually, the most difficult part of writing a new plugin is understanding the ecosystem surrounding the content type(s) that you want to support.

This page outlines some of the questions a plugin writer should consider while planning and writing
a new plugin.

## What APIs are available from remote repositories?

Since remote repositories typically exist to serve content to a client, they usually implement a
web API. It is very helpful to become familiar with this interface in order to understand how
to fetch content into Pulp and subsequently distribute it to the client.

Some ecosystems have extensive APIs, so it is helpful to understand a general flow to narrow the
research scope. For sychronization, Pulp mimics the behavior of the client, and for
publishing/distributing, Pulp mimics the behavior of the server.

1. Discover content in a remote repository
2. Retrieve metadata about the content
3. Retrieve files

## What does the metadata look like?

Understanding the structure and content of a content type's metadata is crucial to the design and
function of a plugin.

**Example:**
When the Container plugin was in the planning phase, engineers got familiar with the [manifest spec
files](https://docs.docker.com/registry/spec/manifest-v2-2/) to understand how to properly design
the workflow of Container content management within the plugin.

## Which data should be modeled as Content Units?

Will this data be added to/removed from a repository individually? If yes, this data could be a
Content Unit.

Should it be possible to add/remove a subset of this data to a repository? If yes, you should
consider managing this as a smaller unit.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/releasing.md
`````markdown
# Releasing Your Plugin

## Depending on pulpcore

The Plugin API is not yet stable, but starting with pulpcore 3.7.0, a
`deprecation process ` is in place which makes it safe for a plugin
to declare compatability with the next, unreleased pulpcore version also. For example, a plugin
compatible with pulpcore 3.7 would declare compatibility up to pulpcore 3.8. In this example, use
the following requirements string:

```
pulpcore>=3.7,<3.9
```

This ensures that when pulpcore 3.8 is released, users can receive it immediately and use it without
any issue. However when 3.9 comes out, any deprecations introduced in the `pulpcore.plugin` API in
3.8 will be removed, so preventing your plugin from working with pulpcore 3.9 maintains
compatibility.

Sometimes plugins can be compatible with older version of pulpcore, and in those cases the oldest
version should be allowed. For example if your plugin is compatible with pulpcore 3.5, and you just
tested it against 3.7 and it's still compatible, use this requirements string:

```
pulpcore>=3.5,<3.9
```

## Release process

Here are the steps to take to release a minor Plugin version, e.g. pulp_file 1.11.0:

1. Via the Github Actions, trigger a ["Create new release branch"](https://github.com/pulp/pulpcore/actions/workflows/create-branch.yml) job.

2. Checkout locally the target plugin release branch and set accordingly `pulpcore_branch` and
   `pulpcore_pip_version_specifier` in the template_config file.

3. Pull in latest CI changes from the plugin_template. Ensure you have the latest copy of upstream
   remote.

   ```
   [user@localhost plugin_template]$ git remote -v
   origin      git@github.com:user/plugin_template.git (fetch)
   origin      git@github.com:user/plugin_template.git (push)
   upstream    git@github.com:pulp/plugin_template.git (fetch)
   upstream    git@github.com:pulp/plugin_template.git (push)
   [user@localhost plugin_template]$ git branch
   * main
   [user@localhost plugin_template]$ git pull upstream main
   [user@localhost plugin_template]$ ./plugin-template --github <plugin_name>
   ```

   Make the PR against target plugin release branch and merge it.

4. Via the Github Actions, trigger a ["Release pipeline"](https://github.com/pulp/pulpcore/actions/workflows/release.yml) job
   by specifying the release branch and the tag of the release.

5. Once the release is available, make an anouncement on the discourse. See [example](https://discourse.pulpproject.org/t/pulp-file-1-11-0-has-been-released/551/2) .

6. The CI automation will create PRs with the Changelog update and Versions bump that will need to
   be merged.

To release a patch Plugin version, e.g. pulp_file 1.11.1, start with the step number 4.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/other/task-scheduling.md
`````markdown
# Task Scheduling

% warning: This feature is only accessible by direct manipulation of
% ``TaskSchedule`` objects. It is targeted for plugin writers and no api access is planned.

Pulp supports scheduling of tasks. Scheduled tasks will be dispatched shortly after their
`next_dispatch` time, and be rescheduled one `dispatch_interval` after that, if the latter is
set. By specifying the `dispatch_interval` as `time_delta(days=1)` you can expect the task
dispatch to stabily happen at same time every day. Until the last task of the same schedule enters a
final state, a new task will not be dispatched. Scheduling is done by the worker processes,
therefore scheduled task dispatching will be missed if all workers are offline. After an outage
window, overdue schedules will dispatch at most one task, but down to timing, they may be
rescheduled shortly thereafter. The task schedule API at `/pulp/api/v3/task-schedules/` is
provided to read the tasks schedules.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/access_policy.md
`````markdown
# Defining an Access Policy

The Access Policy controls the authorization of a given request and is enforced at the viewset-level.
Access policies are based on the AccessPolicy from [drf-access-policy] which uses policy statements described there.

## Example Policy

Below is an example policy used by `FileRemote`, with an explanation of its effect below that:

```python
[
    {
        "action": ["list"],
        "principal": "authenticated",
        "effect": "allow",
    },
    {
        "action": ["create"],
        "principal": "authenticated",
        "effect": "allow",
        "condition": "has_model_or_domain_perms:file.add_fileremote",
    },
    {
        "action": ["retrieve"],
        "principal": "authenticated",
        "effect": "allow",
        "condition": "has_model_or_domain_or_obj_perms:file.view_fileremote",
    },
    {
        "action": ["update", "partial_update", "set_label", "unset_label"],
        "principal": "authenticated",
        "effect": "allow",
        "condition": "has_model_or_domain_or_obj_perms:file.change_fileremote",
    },
    {
        "action": ["destroy"],
        "principal": "authenticated",
        "effect": "allow",
        "condition": "has_model_or_domain_or_obj_perms:file.delete_fileremote",
    },
]
```

The above policy allows the following four cases, and denies all others by default.
Overall this creates a "user isolation policy" whereby users with the `file.add_fileremote` permission can create `FileRemote` objects,
and users can only read/modify/delete `FileRemote` objects they created.

Here's a written explanation of the policy statements:

- `list` is allowed by any authenticated user.
  Although users are allowed to perform an operation what they can list will still be restricted to `only the objects that user can view`.
  See [queryset scoping].
- `create` is allowed by any authenticated user with the `file.add_fileremote` permission.
- `retrieve` (the detail view of an object) is allowed by an authenticated user who has the `file.view_fileremote` permission.
  Although users are allowed to perform an operation what they can list will still be restricted to `only the objects that user can view`.
  See [queryset scoping].
- `update` or `partial_update` is allowed by an authenticated user who has the `file.change_fileremote` permission.
- `destroy` is allowed by any authenticated user with the `file.delete_fileremote` permission.

These names correspond with the [default DRF viewset action names].

## Authorization Conditions

Each policy statement can contain [drf-access-policy conditions] which is useful for verifying a user has one or more permissions.
Pulp ships many built-in checks.
See the [permission checking machinery] documentation for more information on available checks.

When multiple conditions are present, **all** of them must return True for the request to be authorized.

!!! note

    If you are making your plugin compatible with Domains,
    use the `has_model_or_domain_perms` and `has_model_or_domain_or_obj_perms` checks where appropriate.


!!! warning

    The `admin` user created on installations prior to RBAC being enabled has `is_superuser=True`.
    Django assumes a superuser has any model-level permission even without it being assigned.
    Django's permission checking machinery assumes superusers bypass authorization checks.


## Custom ViewSet Actions

The `action` part of a policy statement can reference [any custom action your viewset has].
For example `FileRepositoryViewSet` has a `sync` custom action used by users to sync a given `FileRepository`.
Below is an example of the default policy used to guard that action:

```python
{
    "action": ["sync"],
    "principal": "authenticated",
    "effect": "allow",
    "condition": [
        "has_model_or_domain_or_obj_perms:file.modify_repo_content",
        "has_remote_param_model_or_domain_or_obj_perms:file.view_fileremote",
    ]
}
```



## Shipping a Default Access Policy

To ship a default access policy, define a dictionary named `DEFAULT_ACCESS_POLICY` as a class attribute on a subclass of `NamedModelViewSet`.
This attribute should contain all of `statements` and `creation_hooks`.
In the same way you might want to specify a `LOCKED_ROLES` dictionary that will define roles as lists of permissions to be used in the access policy.

Here's an example of code to define a default policy:

```python
class FileRemoteViewSet(RemoteViewSet):

    # <...>
    DEFAULT_ACCESS_POLICY = {
        "statements": [
            {
                "action": ["list"],
                "principal": "authenticated",
                "effect": "allow",
            },
            {
                "action": ["create"],
                "principal": "authenticated",
                "effect": "allow",
                "condition": "has_model_or_domain_perms:file.add_fileremote",
            },
            {
                "action": ["retrieve"],
                "principal": "authenticated",
                "effect": "allow",
                "condition": "has_model_or_domain_or_obj_perms:file.view_fileremote",
            },
            {
                "action": ["update", "partial_update", "set_label", "unset_label"],
                "principal": "authenticated",
                "effect": "allow",
                "condition": "has_model_or_domain_or_obj_perms:file.change_fileremote",
            },
            {
                "action": ["destroy"],
                "principal": "authenticated",
                "effect": "allow",
                "condition": "has_model_or_domain_or_obj_perms:file.delete_fileremote",
            },
        ],

        "creation_hooks": [
            {
                "function": "add_roles_for_object_creator",
                "parameters": {
                    "roles": "file.fileremote_owner",
                },
            },
        ],
    }
    LOCKED_ROLES = {
        "file.fileremote_owner": [
            "file.view_fileremote", "file.change_fileremote", "file.delete_fileremote"
        ],
        "file.fileremote_viewer": ["file.view_fileremote"],
    }
    <...>
```

For an explanation of the `creation_hooks` see the [Shipping a default new object policy] documentation.

The attribute `LOCKED_ROLES` contains roles that are managed by the plugin author.
Their name needs to be prefixed by the plugins `app_label` with a dot to prevent collisions.
Roles defined there will be replicated and updated in the database after every migration.
They are also marked `locked=True` to prevent being modified by users.
The primary purpose of these roles is to allow plugin writers to refer to them in the default access policy.



## Allow Granting Permissions by the Object Owners

To allow object owners to grant access to other users, first add a `manage_roles` permission to the model.

```python
class FileRemote(Remote):
    <...>

    class Meta:
        permissions = [
            ("manage_roles_fileremote", "Can manage roles on file remotes"),
        ]
```

Now include the `RolesMixin` in the definition of the viewset and add statements for its verbs.

```python
class FileRemoteViewSet(RemoteViewSet, RolesMixin):
    <...>

    DEFAULT_ACCESS_POLICY = {
        "statements": [
            <...>
            {
                "action": ["list_roles", "add_role", "remove_role"],
                "principal": "authenticated",
                "effect": "allow",
                "condition": ["has_model_or_domain_or_obj_perms:file.manage_roles_fileremote"],
            },
        ]
    }

    LOCKED_ROLES = {
        "file.fileremote_owner": [
            <...>
        <...>
    }
```



## Handling Objects created prior to RBAC

Prior to RBAC being enabled, `admin` was the only user.
They have `is_superuser=True` which generally causes them to pass any permission check even without explicit permissions being assigned.



## Viewset Enforcement

Pulp configures the `DEFAULT_PERMISSION_CLASSES` in the settings file to use `pulpcore.plugin.access_policy.AccessPolicyFromDB` by default.
This ensures that by defining a `DEFAULT_ACCESS_POLICY` on your Viewset, Pulp will automatically save it to the database at migration-time,
and your Viewset will be protected without additional effort.

!!! Note:

    This default configuration is supposed to change to `AccessPolicyFromSettings` with Pulp 4.
    Any not explicitely configured access policy will still be taken from the default.

This strategy allows users to completely customize or disable the DRF Permission checks Pulp uses like any typical DRF project would.

Also like a typical DRF project, individual Viewsets or views can also be customized to use a different Permission check by declaring the `permission_classes` check.
For example, here is the `StatusView` which disables permission checks entirely as follows:

```python
class StatusView(APIView):
    ...
    permission_classes = tuple()
    ...
```



## Permission Checking Machinery

`drf-access-policy` provides a feature to enable [conditional checks] to be globally available.
Pulp enables the `reusable_conditions` in its settings.py file, allowing a variety of condition checks to be globally available.
Pulp enables this as follows:

```python
DRF_ACCESS_POLICY = {"reusable_conditions": ["pulpcore.app.global_access_conditions"]}
```

The [pulpcore.app.global_access_conditions][]
provides several checks that are available for both users and plugin writers to use in their policies.


## Custom Permission Checks

Plugins can provide their own permission checks by defining them in a `app.global_access_conditions` module and adding a statement like

```python
DRF_ACCESS_POLICY = {
    "dynaconf_merge_unique": True,
    "reusable_conditions": ["pulp_container.app.global_access_conditions"],
}
```

to their `app.settings` module.

---

## Reference

::: pulpcore.app.global_access_conditions

[drf-access-policy]: https://rsinger86.github.io/drf-access-policy/policy_logic/
[queryset scoping]: site:pulpcore/docs/dev/learn/rbac/queryset_scoping/
[default DRF viewset action names]: https://www.django-rest-framework.org/api-guide/viewsets/#viewset-actions
[drf-access-policy conditions]: https://rsinger86.github.io/drf-access-policy/statement_elements/#condition
[permission checking machinery]: site:pulpcore/docs/dev/learn/rbac/permissions/
[any custom action your viewset has]: https://www.django-rest-framework.org/api-guide/viewsets/#marking-extra-actions-for-routing
[Shipping a default new object policy]: site:pulpcore/docs/dev/learn/rbac/adding_automatic_permissions/#shipping-a-default-new-object-policy
[conditional checks]: https://rsinger86.github.io/drf-access-policy/reusable_conditions/
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/adding_automatic_permissions.md
`````markdown
# Adding Automatic Permissions for New Objects

When creating new objects in either viewsets or tasks it's important to have the right permissions.
It is important that the permissions new objects receive work with the AccessPolicy so that newly
created objects can be authorized by the AccessPolicy as expected. The AccessPolicy statements are
user-configurable and so the permissions to be created for new objects are too. Similar to the
requirements for the AccessPolicy `statements`, plugin writers can define and ship a default
behavior for permissions on new objects, and then users can modify them as needed after migrations
are run.



## Defining New Object Permission Behaviors

The `AccessPolicy.creation_hooks` attribute defines a set of callables that are intended to be
run when new objects are created. These do not run automatically; your models should use the
`pulpcore.plugin.models.AutoAddObjPermsMixin` on the model as described in the
`enabling_new_object_permission_creation` section.

The `AccessPolicy.creation_hooks` attribute is optional because not all AccessPolicy objects
create objects. If no objects are created by an endpoint, there does not need to be a
`creation_hooks` attribute.

Permissions are associated to users via roles.

The most common auto-assignment of roles is to the creator of an object themselves. Here is an
example assigning the `"core.task_owner"` role to the creator of an object:

```python
{
    "function": "add_roles_for_object_creator",
    "parameters": {"roles": ["core.task_owner"]},
}
```

Another common auto-assignment of roles is to assign to one or more users explicitly. Here is an
example assigning the `"core.task_owner"` role to the users `["alice", "bob"]`.

```python
{
    "function": "add_roles_for_users",
    "parameters": {
        "roles": "core.task_owner",
        "users": ["alice", "bob"],
    },
}
```

A third common auto-assignment of roles is to assign to one or more groups explicitly. Here is an
example assigning the `"core.task_viewer"` role to the group `"foo"`.

```python
{
    "function": "add_roles_for_groups",
    "parameters": {
        "roles": ["core.task_viewer"],
        "groups": "foo",
    },
}
```

!!! note

    All the hooks shipped with pulpcore accept either a single item or list of items for their
    arguments like `roles`, `users` or `groups`.




## Enabling New Object Permission Creation

To enable automatic permission creation for an object managed by an AccessPolicy, have your model
use the [pulpcore.plugin.models.AutoAddObjPermsMixin][]. See the example below as an example:

```python
class MyModel(BaseModel, AutoAddObjPermsMixin):
   ...
```


## Shipping a Default New Object Policy

In general, the default recommended is to use the `add_roles_for_object_creator` to assign the
view, change, and delete permissions for the object created. Here is an example of a default policy
like this:

```python
DEFAULT_ACCESS_POLICY = {
    "statements": <...>
    "creation_hooks": [
        {
            "function": "add_roles_for_object_creator",
            "parameters": {"roles": "file.fileremote_owner"},
        }
    ],
}
LOCKED_ROLES = {
    "file.fileremote_owner": [
        "file.view_fileremote", "file.change_fileremote", "file.delete_fileremote"
    ],
}
```

This effectively creates a "user isolation" policy which aligns with the examples from
`shipping_default_access_policy`.



## Defining Custom New Object Permission Callables

Plugin writers can use more than the built-in callables such as `add_roles_for_object_creator` or
`add_roles_for_users` by defining additional methods on the model itself. The callables defined in
the `function` are method names on the Model that need to be registered with
`REGISTERED_CREATION_HOOKS`:

```python
class MyModel(BaseModel, AutoAddObjPermsMixin):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.REGISTERED_CREATION_HOOKS["my_custom_callable"] = self.my_custom_callable

    def my_custom_callable(self, role, users, groups):
        from pulpcore.app.util import assign_role
        for user in users:
            assign_role(role, user, self)  # self is the object being assigned
        for group in groups:
            assign_role(role, group, self)  # self is the object being assigned
```

This would be callable with a configuration like this one:

```python
{
    "function": "my_custom_callable",
    "parameters": {
        "role": "pulpcore.task_viewer",
        "users": ["bob"],
        "groups": [],
    },
}
```

!!! note

    The `parameters` dict must actually match the creation hooks signature.

---

## Reference

::: pulpcore.plugin.models.AutoAddObjPermsMixin
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/index.md
`````markdown
# Overview

The goals of the authorization system are to:

- Make Pulp safe as a multi-user system
- Rely on User and Group definitions in the Django database, but allow them to come from anywhere
- Enforce permission checks at each viewset using a policy based approach
- Give users fine-grained control over each viewset's policy

## Architecture

Pulp's authorization model has the following architecture:

![RBAC Architecture](site:pulpcore/docs/assets/images/rbac_architecture.png)

Task Permissions Check:
:  A permission check that occurs inside of Task code. This tends to use
   permission checking calls like `has_perm` or `has_perms`
   [provided by Django](https://docs.djangoproject.com/en/4.2/ref/contrib/auth/#django.contrib.auth.models.User.has_perm).

Permission Checking Machinery
: A set of methods which can check various conditions such as if a
  requesting user has a given permission, or is a member of a group that has a given permission,
  etc. See the [permission_checking_machinery](site:pulpcore/docs/dev/learn/rbac/permissions/) section for the complete list of available
  methods.

Users and Groups
: Users and Groups live in the Django database and are used by the Permission Checking Machinery.
  See the [users_and_groups](site:pulpcore/docs/dev/learn/rbac/users_groups/) documentation for more information.


## Getting Started

To add authorization for a given resource, e.g. `FileRemote`, you'll need to:

**Define the Policy:**

1. Define the default `statements` of the new Access Policy for the resource. See the
   `defining_access_policy` documentation for more information on that.
2. Define the `roles` as sets of permissions for that resource.
3. Define the default role associations created for new objects using the `creation_hooks`
   attribute of the new Access Policy for the resource. See the
   [Adding Automatic Permissions](site:pulpcore/docs/dev/learn/rbac/adding_automatic_permissions/)
   documentation for more information on that.
4. Ship that Access Policy as the class attribute `DEFAULT_ACCESS_POLICY` of a
   `NamedModelViewSet`. This will contain the `statements` and `creation_hooks` attributes.
   Ship the roles as the `LOCKED_ROLES` attribute accordingly. See the
   `shipping_default_access_policy` documentation for more information on this.
5. Add the `RolesMixin` to the viewset and add statements for managing roles to the access
   policy. Usually this is accompanied by adding a `manage_roles` permission on the model.

**Enforce the Policy:**

1. `pulpcore.plugin.access_policy.AccessPolicyFromDB` is configured as the default permission
   class, so by specifying a `DEFAULT_ACCESS_POLICY` it will automatically be enforced. See the
   `viewset_enforcement` docs for more information on this.

**Add QuerySet Scoping:**

1. Define a `queryset_filtering_required_permission` attribute on your viewset that names the
   permissions users must have to view an object. This is possible if your viewset is a subclass of
   the `pulpcore.plugin.models.NamedModelViewSet`. See the `enabling_queryset_scoping`
   documentation for more information.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/permissions.md
`````markdown
# Permissions and Roles

The permissions system provides a way to assign permissions as part of roles to specific users and
groups of users. The models driving this data are `django.contrib.auth.models.Permission` and
`pulpcore.plugin.models.role.Role`. Each `Permission` has a name, describing it and can be
associated with one or more `Role`. Roles can be assigned to users or groups either on the
Model-Level, Domain-level (if domains are enabled), or Object-Level.



## Model Permissions

`Permissions` in Django are tied to models and usually map to certain
actions performed thereon. By default, each model receives four permissions:

- The “add” permission limits the user’s ability to view the “add” form and add an object.
- The “change” permission limits a user’s ability to view the change list, view the “change”
  form and change an object.
- The “delete” permission limits the ability to delete an object.
- The “view” permission limits the ability to view an object.

The Model permissions are created automatically by Django, and receive a name like:
`<app_name>.<action>_<model_name>`. For example to change file remote the permission is named
`file.change_fileremote`. You can view the Permissions on a system via the Django ORM with:
`Permission.objects.all()`. See the [Django Permissions Docs](https://docs.djangoproject.com/en/4.2/topics/auth/default/#permissions-and-authorization) for more information on working with
permissions.

Here's an example of the Permissions automatically created for the `FileRemote` model:

- `file.add_fileremote`
- `file.view_fileremote`
- `file.change_fileremote`
- `file.delete_fileremote`



## Defining Custom Permissions

Any model can define custom permissions, and Django will automatically make a migration to add it
for you. See the [Django Custom Permissions Documentation](https://docs.djangoproject.com/en/4.2/topics/auth/customizing/#custom-permissions) for more information on how to do that. In contrast
to `AccessPolicies` and `creation_hooks`, permissions can only be defined by the plugin writer.
As a rule of thumb, permissions should be the atomic building blocks for roles and each action that
can be performed on an object should have its own permission.



## Custom Permission for Repository Content Modification

The Repository subclass is one place where it's recommended to create a custom permission that
manages the ability to modify RepositoryVersions underneath a Repository. While the add, create,
view, and delete default permissions apply to the Repository itself, this new custom permission is
intended to be required for any operations that produce RepositoryVersions, e.g. `sync`,
`modify`, or `upload`.

Here's an example of adding a permission like this for `FileRepository`:

```python
class FileRepository(Repository):

    ...

    class Meta:
        ...
        permissions = (
            ('modify_repo_content', 'Modify Repository Content'),
        )
```

!!! note

    It is not necessary to "namespace" this `modify_repo_content` permission because by including
    it in the meta class of your Detail view, it will already be namespaced on the correct object.




## Roles

`Roles` are basically sets of `Permissions`, and in Pulp, users and groups should receive their
`Permissions` exclusively via role assignments. Typical roles are `owner` for an object with all
the permissions to view modify and delete the object, or `viewer` limited to see the object. To
scope the reach of the permissions in a role, these role are assigned to `Users` or `Groups`
either on the model-level, domain-level (if domains are enabled), or the object-level.

### Role Levels

Domain-Level
: When the domains feature is enabled, a role is associated to a user or group for
access to a specific model within the specific domain and only that domain. This allows you
to express concepts like "Hilde can administer all FileRemotes within Domain 'foo'".

Object-Level
: A role is associated to a user or group for access to a specific instance of a
specific model. This allows you to express concepts like "Hilde can administer
FileRemote(name='foo remote').

Certain roles may contain permissions that are only ever checked on the model(or domain)-level.
For example the `creator` role for a model that contains the models `add` permission.

In the case for `FileRemote`, the typical set of roles provided by the plugin looks like:

```python
LOCKED_ROLES = {
    "file.fileremote_creator": ["file.add_fileremote"],
    "file.fileremote_owner": [
        "file.view_fileremote",
        "file.change_fileremote",
        "file.delete_fileremote",
        "file.manage_roles_fileremote",
    ],
    "file.fileremote_viewer": ["file.view_fileremote"],
}
```

### Locked and User-Defined

Roles come in two flavors, locked and user-defined.

First there are so called locked roles that are
provided by plugins. Their name needs to be prefixed by the plugin `app_label` followed by a dot
(see the example above). They can be seen, but not modified via the api, and are kept up to date
with their definition in the plugin code. That way, plugins can ship default access policies that
rely on those roles.

The other flavor is user defined roles. These are managed via the Pulp
API, and plugin code will not interfere with them. Users can opt to use the provided locked roles or
roll their own.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/queryset_scoping.md
`````markdown
# Restricting Viewable Objects

With limited object-level permissions on certain objects, its desirable to restrict the objects
shown to users. This effectively causes a Pulp system with many users to have each user see only
"their" permissions.

This feature is generally referred to as Queryset Scoping because it is applied as an additional
filter on the base Queryset of a ViewSet. This causes the permission filtering to work with other
filterings applied by a user.

!!! note

    If Domains are enabled, querysets will be scoped by the current request's domain before being
    passed onto RBAC queryset scoping.




## Enabling QuerySet Scoping

The support for this is built into `pulpcore.plugin.viewsets.NamedModelViewSet`, which is often
the base class for any model-based ViewSet if Pulp. Queryset Scoping is performed by the ViewSet's
`get_queryset` method which calls each permission class' method `scope_queryset` if present.
Pulp's default permission class, `pulpcore.app.AccessPolicyFromDB`, implementation of
`scope_queryset` calls the ViewSet function in the AccessPolicy field `queryset_scoping` if
defined. This field can be changed by the user to any method on the ViewSet or set empty if they
wish to turn off Queryset Scoping for that view:

```python
DEFAULT_ACCESS_POLICY = {
    ...
    # Call method `scope_queryset` on ViewSet to perform Queryset Scoping
    "queryset_scoping": {"function": "scope_queryset"},
    ...
}
```

`NamedModelViewSet` has a default `scope_queryset` implementation that will scope the query
based of the `queryset_filtering_required_permission` class attribute set on ViewSet.
Objects will only be shown to users that have access to this specific permission either at the
model-level or object-level.

For example Tasks are restricted only to those users with the "core.view_task" permission like
this:

```python
TaskViewSet(NamedModelViewSet):
    ...
    queryset_filtering_required_permission = "core.view_task"
```



## Manually Implementing QuerySet Scoping

Default scoping behavior can be overriden by supplying your own `scope_queryset` method.
`scope_queryset` takes one argument, the queryset to be scoped, and returns the scoped queryset.
Content ViewSet's have their `scope_queryset` method overriden to scope based on repositories
the user can see.

!!! note

    When queryset scoping is enabled for content you must also use the
    `has_required_repo_perms_on_upload` access condition on the upload endpoint to ensure users
    specify a repository for upload or they won't be able to see their uploaded content.


Extra Queryset Scoping methods can be defined on the ViewSet to allow users to choose different
behaviors besides On/Off. The method must accept the queryset as the first argument. Additional
parameters can also be accepted by supplying them in a `parameters` section of the
`queryset_scoping` field of the AccessPolicy like so:

```python
from pulpcore.plugin.viewsets import NamedModelViewSet
from pulpcore.plugin.util import get_objects_for_user

class MyViewSet(NamedModelViewSet):

    DEFAULT_ACCESS_POLICY = {
        # Statements omitted
        "queryset_scoping" : {
            # This entire field is editable by the user
            "function": "different_permission_scope",
            "parameters": {"permission": "my.example_permission"}
        }
    }

    def different_permission_scope(qs, permission):
        """Example extra scoping method that uses a user specified permission to scope."""
        return get_objects_for_user(self.request.user, permission, qs=qs)
```

If your ViewSet does not inherit from `pulpcore.plugin.viewsets.NamedModelViewSet` or you would
like more control over the QuerySet Scoping feature it can be added manually by adding a
`get_queryset` method to your ViewSet which returns the filtered QuerySet.

To look up objects by permission easily from an existing QuerySet use the `get_objects_for_user`
provided by pulpcore. Here's an example:

```python
from pulpcore.plugin.util import get_objects_for_user

class MyViewSet(rest_framework.viewsets.GenericViewSet):

    def get_queryset(self):
        qs = super().get_queryset()
        permission_name = "my.example_permission"
        return get_objects_for_user(self.request.user, permission_name, qs=qs)
```

!!! warning

    If you have custom ViewSets and plan to add Domains compatibility to your plugin, you must
    scope your objects by the domain in the ViewSet's `get_queryset` method to comply
    with Domain's isolation policies.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/rbac/users_groups.md
`````markdown
# Users and Groups

Users and Groups are always stored in the Django database. This is a requirement so that `Roles` and
`Permissions` can relate to them.

User
: Provided by Django with the `django.contrib.auth.models.User` model.

Group
: Provided by Django with the `django.contrib.auth.models.Group` model.

Any role can be assigned to either users, groups, or both. This includes both Model-level and
Object-level role assignments. Direct permission assignments are not recommended and cannot be
operated on within the Pulp-API.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/checkpoint.md
`````markdown
# Checkpoint

!!! warning
    This feature is provided as a tech preview and could change in backwards incompatible
    ways in the future.

Pulp's checkpoint feature offers a robust way to manage and access historical versions of
repositories. By integrating checkpoints into your plugins, you enable users to recreate
environments from specific points in time, which is invaluable for identifying when changes or
regressions were introduced. This feature supports reproducible deployments, helps track changes in
package behavior, and facilitates a structured update workflow.

!!! warning
    The checkpoint feature is only supported for plugins using publications.

Plugin writers need to expose the `checkpoint` field on their distribution and publication
serializers to allow users to create checkpoint publications and create checkpoint distributions to
serve these publications. The `checkpoint` field is already present on the base distribution and
publication models, so no new migration is needed.

Example: enabling the checkpoint feature in the pulp_file plugin.
```python
class FileDistributionSerializer(DistributionSerializer):
    """
    Serializer for File Distributions.
    """
    publication = DetailRelatedField(
        required=False,
        help_text=_("Publication to be served"),
        view_name_pattern=r"publications(-.*/.*)?-detail",
        queryset=models.Publication.objects.exclude(complete=False),
        allow_null=True,
    )
    checkpoint = serializers.BooleanField(default=False)

    class Meta:
        fields = DistributionSerializer.Meta.fields + ("publication", "checkpoint")
        model = FileDistribution
```

```python
class FilePublicationSerializer(PublicationSerializer):
    """
    Serializer for File Publications.
    """
    distributions = DetailRelatedField(
        help_text=_("This publication is currently hosted as defined by these distributions."),
        source="distribution_set",
        view_name="filedistributions-detail",
        many=True,
        read_only=True,
    )
    manifest = serializers.CharField(
        help_text=_("Filename to use for manifest file containing metadata for all the files."),
        default="PULP_MANIFEST",
        required=False,
        allow_null=True,
    )
    checkpoint = serializers.BooleanField(default=False)

    class Meta:
        model = FilePublication
        fields = PublicationSerializer.Meta.fields + ("distributions", "manifest", "checkpoint")
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/import-export.md
`````markdown
# Pulp Import/Export

The Pulp Import/Export process is based around the [Django Import/Export library](https://django-import-export.readthedocs.io/en/latest/) .
To be 'exportable/importable', your plugin must define a `modelresource` module at
`<plugin>/app/modelresource.py`. The module must contain a ModelResource subclass
for each Model you want to expose, and it must define an `IMPORT_ORDER` ordered list
for all such ModelResources.

## QueryModelResource

If you don't need to do anything "special" to export your Model you can subclass
`pulpcore.plugin.importexport.QueryModelResource`. This only requires you to provide the
`Meta.model` class for the Model being export/imported, and to override the
`set_up_queryset(self)` method to define a limiting filter. QueryModelResource is instantiated
by the export process with the RepositoryVersion being exported (`self.repo_version`).

An example `QueryModelResource` subclasses, for import/exporting the `Bar` Model
from `pulp_foo`, would look like this:

```
class BarResource(QueryModelResource):
    """
    Resource for import/export of foo_bar entities
    """

    def set_up_queryset(self):
        """
        :return: Bars specific to a specified repo-version.
        """
        return Bar.objects.filter(pk__in=self.repo_version.content)

    class Meta:
        model = Bar
```

## BaseContentResource

The `BaseContentResource` class provides a base class for exporting `Content`.
`BaseContentResource` provides extra functionality on top of `QueryModelResource` specific to
handling the exporting and importing of Content such as handling of Content-specific fields like
`upstream_id`.

An example of subclassing `BaseContentResource` looks like:

```
class MyContentResource(BaseContentResource):
    """
    Resource for import/export of MyContent.
    """

    def set_up_queryset(self):
        """
        :return: MyContent specific to a specified repo-version.
        """
        return MyContent.objects.filter(pk__in=self.repo_version.content)

    class Meta:
        model = MyContent
```

## modelresource.py

A simple `modelresource.py` module is the one for the `pulp_file` plugin. It looks like
this:

```
from pulpcore.plugin.importexport import BaseContentResource
from pulp_file.app.models import FileContent

class FileContentResource(BaseContentResource):
    """
    Resource for import/export of file_filecontent entities
    """

    def set_up_queryset(self):
        """
        :return: FileContents specific to a specified repo-version.
        """
        return FileContent.objects.filter(pk__in=self.repo_version.content)

    class Meta:
        model = FileContent


IMPORT_ORDER = [FileContentResource]
```

Plugin writers are encouraged to subclass the `RepositoryResource` class to enable automatic
repository creation during the import. For the `pulp_file` plugin, the following implementation
should be considered:

```
from pulpcore.plugin.modelresources import RepositoryResource
from pulp_file.app.models import FileRepository

class FileRepositoryResource(RepositoryResource):
    """
    A resource for importing/exporting file repository entities
    """

    def set_up_queryset(self):
        """
        :return: A queryset containing one repository that will be exported.
        """
        return FileRepository.objects.filter(pk=self.repo_version.repository)

    class Meta:
        model = FileRepository


# the list signifying the order of imports must also include the repository resource class
IMPORT_ORDER = [FileContentResource, FileRepositoryResource]
```

For performance reasons, it is important that care is taken when writing resource definitions. If your model
has foreign keys that are exported as such (raw UUID key values), you should define a should a custom
"dehydrate" method for that field to avoid an unnecessary lookup for each instance as seen
[in this issue](https://github.com/django-import-export/django-import-export/issues/974). Else, if
foreign keys are exported using some natural key of the referenced row, then the definition of
`set_up_queryset()` should ensure those references are pre-selected using `select_related()`, otherwise
an N+1 query scenario is likely.

## content_mapping

By default, all the Content that gets imported is automatically associated with the Repository it
is stored with inside the export archive. In some cases, this may not be desirable. One such case is
when there is Content that is tied to a sub_repo but not directly to the Repository itself. Another
case is where you may have Content you want imported but not associated with a Repositoy. In such
cases, you can set a `content_mapping` property on the Resource.

The `content_mapping` property should be a dictionary that maps repository names to a list of
content_ids. The importer code in pulp will combine the `content_mappings` across Resources and
export them to a `content_mapping.json` file that it will use during import to map Content to
Repositories.

Here is an example that deals with subrepos:

```
class MyContentResource(BaseContentResource):
    """
    Resource for import/export of MyContent.
    """

    def __init__(self, *args, **kwargs):
        """Override __init__ to set content_mapping to a dict."""
        self.content_mapping = {}
        super().__init__(*args, **kwargs)

    def set_up_queryset(self):
        """Set up the queryset and our content_mapping."""
        content = MyContent.objects.filter(pk__in=self.repo_version.content)
        self.content_mapping[self.repository_version.repository.name] = content

        for repo in self.subrepos(self.repo_version):
            subrepo_content = repo.latest_repository_version.content
            self.content_mapping[repo.name] = subrepo_content
            content |= subrepo_content

        return content

    class Meta:
        model = MyContent
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/models.md
`````markdown
# Models

For the most part, models provided by plugin writers are just regular [Django Models](https://docs.djangoproject.com/en/2.1/topics/db/models/).

!!! note
    One slight variation is that the validation is primarily handled in the Django Rest Framework
    Serializer. `.clean()` is not called.


Most plugins will implement:
- model(s) for the specific content type(s) used in the plugin, should be subclassed from Content model
- model(s) for the plugin specific remote(s), should be subclassed from Remote model

## Adding Model Fields

Each subclassed Model will typically store attributes that are specific to the content type. These
attributes need to be added to the model as `fields`. You can use any of Django's field types
for your fields. See the [Django field documentation](https://docs.djangoproject.com/en/4.2/ref/models/fields/), for more in-depth information on
using these fields.

!!! note
    It is required to declare the `default_related_name`.


The TYPE class attribute is used for filtering purposes.

```python
class FileContent(Content):
    """
    The "file" content type.

    Fields:
        digest (str): The SHA256 HEX digest.
    """
    TYPE = 'file'
    digest = models.TextField(null=False)

    class Meta:
        default_related_name = "%(app_label)s_%(model_name)s"
```

Here we create a new field `digest` using Django's `TextField`. After adding/modifying a model, you
can make and run database migrations with:

```bash
pulpcore-manager makemigrations $PLUGIN_APP_LABEL
pulpcore-manager migrate
```

!!! warning
    Do not use settings directly in the model fields, it will lead to a data migration that is
    specific to the users installation in case those settings change.


If you recognize this syntax, it is because pulpcore-manager is `manage.py` configured with
`DJANGO_SETTINGS_MODULE="pulpcore.app.settings"`. You can use it anywhere you normally would use
`manage.py` or `django-admin`.

## Uniqueness

Model uniqueness (which will also be used as the natural key) is defined by an inner `class
Meta`. Pulp Core enforces uniqueness constraints at the database level.

Adding to the simplified `FileContent` above:

```python
class FileContent(Content):
    """
    The "file" content type.
    Content of this type represents a single file uniquely
    identified by path and SHA256 digest.
    Fields:
        digest (str): The SHA256 HEX digest.
    """

    TYPE = 'file'

    digest = models.TextField(null=False)

    class Meta:
        # Note the comma, this must be a tuple.
        unique_together = ('digest',)
        default_related_name = "%(app_label)s_%(model_name)s"
```

In this example the Content's uniqueness enforced on a single field `digest`. For a multi-field
uniqueness, simply add other fields.

```python
class FileContent(Content):
    """
    The "file" content type.
    Content of this type represents a single file uniquely
    identified by path and SHA256 digest.
    Fields:
        relative_path (str): The file relative path.
        digest (str): The SHA256 HEX digest.
    """

    TYPE = 'file'

    relative_path = models.TextField(null=False)
    digest = models.TextField(null=False)

    class Meta:
        default_related_name = "%(app_label)s_%(model_name)s"
        unique_together = (
           'relative_path',
           'digest',
        )
```

The example above ensures that content is unique on `relative_path` and `digest` together.

## ForeignKey Gotchas

The orphan cleanup operation performs mass-deletion of Content units that are not associated with
any repository. Any ForeignKey relationships that refer to Content with a deletion relationship of
`PROTECT` will cause Orphan cleanup errors like:

```
django.db.models.deletion.ProtectedError: ("Cannot delete some instances of model 'MyContent'
because they are referenced through a protected foreign key: 'MyOtherContent.mycontent'"
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/pull-through.md
`````markdown
# Pull-Through Caching

Pull-through caching enables plugins to use remotes on their distributions that will act as an
upstream fallback source when an user requests content from Pulp. The content will be streamed from
the remote and saved in Pulp to be served again in future requests. This feature requires plugins to
provide implementations for the methods below on the subclasses of their Remote and Content objects.

```{eval-rst}
.. automethod:: pulpcore.app.models.Remote::get_remote_artifact_url
```

```{eval-rst}
.. automethod:: pulpcore.app.models.Remote::get_remote_artifact_content_type
```

```{eval-rst}
.. automethod:: pulpcore.app.models.Content::init_from_artifact_and_relative_path
```

Finally, plugin writers need to expose the `remote` field on their distribution serializer to allow
users to add their remotes to their distributions. The `remote` field is already present on the base
distribution model, so no new migration is needed.

```python
class GemDistributionSerializer(DistributionSerializer):
    """A Serializer for GemDistribution."""

    ...

    remote = DetailRelatedField(
        required=False,
        help_text=_("Remote that can be used to fetch content when using pull-through caching."),
        view_name_pattern=r"remotes(-.*/.*)?-detail",
        queryset=Remote.objects.all(),
        allow_null=True,
    )

    class Meta:
        fields = DistributionSerializer.Meta.fields + ("publication", "remote")
        model = GemDistribution
```
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/replication.md
`````markdown
# Pulp Replication

The Pulp replication process allows a Pulp instance to discover distributions on an upstream Pulp
and create the necessary remotes, repositories, and distributions to serve the same content as the
upstream Pulp. To be 'replication' compatible, your plugin must define a `replicator` module at
`<plugin>/app/replica.py`. The module must contain a Replicator subclass for each distribution
type you want to be able to replicate. The module must also define `REPLICATION_ORDER` ordered
list for all such replicators.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/serializers.md
`````markdown
# Serializers

[Django Rest Framework Serializers](https://www.django-rest-framework.org/api-guide/serializers/)
work "both ways", translating user input to Python objects, and translating Python objects to
user-facing responses. Generally, plugins will create a serializer field for each field on their
model that should be user-facing.

Most plugins will implement:
: - serializer(s) for plugin specific content type(s), should be subclassed from one of
    NoArtifactContentSerializer, SingleArtifactContentSerializer, or
    MultipleArtifactContentSerializer, depending on the properties of the content type(s)
  - serializer(s) for plugin specific repository(s), should be subclassed from RepositorySerializer
  - serializer(s) for plugin specific remote(s), should be subclassed from RemoteSerializer
  - serializer(s) for plugin specific publication(s), should be subclassed from PublicationSerializer
  - serializer(s) for plugin specific distribution(s), should be subclassed from DistributionSerializer

## Adding Fields

For each field on the corresponding model that should be readable or writable by the user, the
serializer needs to add that field as well.

```python
class FileContentSerializer(SingleArtifactContentSerializer):
    """
    Serializer for File Content.
    """

    relative_path = serializers.CharField(
        help_text="Relative location of the file within the repository"
    )

class Meta:
      fields = SingleArtifactContentSerializer.Meta.fields + ('relative_path',)
      model = FileContent
```

!!! note
    
    When inheriting from `pulpcore.plugin.serializers.ModelSerializer`, or one of its many subclasses,
    you should include the fields of that serializer in your own. Important fields it provides include
    `pulp_created`, `pulp_last_updated`, and `prn`.

    See `pulpcore.plugin.serializers.ContentGuardSerializer` for an example:
    ```python
    class Meta:
        model = models.ContentGuard
        fields = ModelSerializer.Meta.fields + ("name", "description")
    ```

### Help Text

The REST APIs of Pulp Core and each plugin are automatically documented using swagger. Each field's
documentation is generated using the `help_text` set on the serializer field, so please be sure
to set this for every field.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/subclassing/viewsets.md
`````markdown
# Viewsets

Each [Django Rest Framework Viewset](https://www.django-rest-framework.org/api-guide/viewsets/)
is a collection of views that provides `create`, `update`, `retrieve`, `list`, and
`delete`, which coresponds to http `POST`, `PATCH`, `GET`, `GET`, `DELETE`,
respectively. Some base classes will not include all of the views if they are inappropriate. For
instance, the `ContentViewset` does not include `update` because Content Units are immutable in
Pulp 3 (to support Repository Versions).

Most Plugins will implement:
: - viewset(s) for plugin specific content type(s), should be subclassed from `ContentViewSet`,
    `ReadOnlyContentViewSet` or `SingleArtifactContentUploadViewSet`
  - viewset(s) for plugin specific remote(s), should be subclassed from `RemoteViewSet`
  - viewset(s) for plugin specific publisher(s), should be subclassed from `PublisherViewSet`

## Endpoint Namespacing

Automatically, each "Detail" class is namespaced by the `app_label` set in the
`PulpPluginAppConfig` (this is set by the `plugin_template`).

For example, a ContentViewSet for `app_label` "foobar" like this:

```python
class PackageViewSet(ContentViewSet):
    endpoint_name = 'packages'
```

The above example will create set of CRUD endpoints for Packages at
`pulp/api/v3/content/foobar/packages/` and
`pulp/api/v3/content/foobar/packages/<int>/`

## Detail Routes (Extra Endpoints)

In addition to the CRUD endpoints, a Viewset can also add a custom endpoint. For example:

```python
class PackageViewSet(ContentViewSet):
    endpoint_name = 'packages'

    @decorators.detail_route(methods=('get',))
    def hello(self, request):
        return Response("Hey!")
```

The above example will create a simple nested endpoint at
`pulp/api/v3/content/foobar/packages/hello/`



### Kick off Tasks

Some endpoints may need to deploy tasks to the tasking system. The following is an example of how
this is accomplished.

See `pulpcore.plugin.tasking.dispatch` for more details.

!!! note
    The arguments provided to a task must be JSON serializable, but may contain instances of
    `uuid.UUID`.


!!! note
    You should always prefer handing primary keys instead of serialized instances of ORM objects to
    a task.


```python
# We recommend using POST for any endpoints that kick off task.
@detail_route(methods=('post',), serializer_class=RepositorySyncURLSerializer)
# `pk` is a part of the URL
def sync(self, request, pk):
    """
    Synchronizes a repository.
    The ``repository`` field has to be provided.
    """
    remote = self.get_object()
    serializer = RepositorySyncURLSerializer(data=request.data, context={'request': request})
    # This is how non-crud validation is accomplished
    serializer.is_valid(raise_exception=True)
    repository = serializer.validated_data.get('repository')
    mirror = serializer.validated_data.get('mirror', False)

    # This is how tasks are kicked off.
    result = dispatch(
        tasks.synchronize,
        exclusive_resources=[repository],
        shared_resources=[remote],
        kwargs={
            'remote_pk': remote.pk,
            'repository_pk': repository.pk,
            'mirror': mirror
        }
    )
    # Since tasks are asynchronous, we return a 202
    return OperationPostponedResponse(result, request)
```

For more details about the reservation system and task groups, see `writing-tasks`. and
`pulpcore.plugin.models.TaskGroup`.

### Content Upload ViewSet

For single file content types, there is the special `SingleArtifactContentUploadViewSet` to
derive from, that allows file uploads in the create method, instead of referencing an existing
Artifact. Also it allows to specify a `Repository`, to create a new `RepositoryVersion`
containing the newly created content. Content creation is then offloaded into a task.
To use that ViewSet, the serializer for the content type should inherit from
`SingleArtifactContentUploadSerializer`. By overwriting the `deferred_validate` method
instead of `validate`, this serializer can do detailed analysis of the given or uploaded Artifact
in order to fill database fields of the content type like "name", "version", etc. This part of
validation is only called in the task context. You can also overwrite the `retrieve` method
if you want your content type to be compatible with the functionality that makes sure the
`pulp_href` of the already existing unit is returned and re-used when attempting to re-upload
duplicate content. If the `retrieve` method is not implemented, an exception would be raised.

If the uploaded content does not need to be stored, plugin writers may derive from the class
`NoArtifactContentUploadViewSet`. Again, the same analogy applies to this workflow. To use this
ViewSet, the associated serializer should also subclass `NoArtifactContentUploadSerializer`. Note
that by using the aforesaid Serializer and ViewSet, Pulp still loads content of an uploaded file to
a temporary file. But the file is going to be removed by the end of a created task.

If creating the content does not require any files to be uploaded at all, you can use
`NoArtifactContentViewSet` along with `NoArtifactContentSerializer`. This is useful if creating the
content in question requires only a set of required API parameters, but should still use the same
"add to repository" and/or `retrieve` workflows.

If any additional context needs to be passed from the ViewSet to the creation task, the
`get_deferred_context` method of the ViewSet might be overwritten. It's return value will then be
available as `self.context` in the Serializer.

!!! note
    Context passed from the ViewSet to the Task must be easily serializable. i.e. one cannot
    return the request from `get_deferred_context`.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/sync_pipeline/sync_pipeline.md
`````markdown
# Synchronizing Repositories with the async-Pipeline

To accomplish the steps outlined in `sync-docs` in an efficient way, pulp provides a high
level api to construct a pipeline of stages. Those stages work in parallel like an assembly line
using pythons `async` feature in combination with the `asyncio` library. Each stage takes
designated content units from an incoming queue of type `asyncio.Queue` and performs an
individual task on them before passing them to the outgoing queue that is connected to the next
stage.

The anathomy of a stage is that it inherits `pulpcore.plugin.stages.Stage` and overwrites
its asynchronous callback `run`.
In `run` it can retrieve incoming declarative content individually via the asynchronous
iterator `self.items` or in batches via `self.batches`.
It can pass on declarative content with `self.put`.

The sync pipeline is headed by a `first_stage`, that is supposed to download upstream metadata
and iterate over all upstream content references. For each such reference, it creates a
`pulpcore.plugin.stages.DeclarativeContent` that contains a prefilled but unsaved instance
of a subclass of `pulpcore.plugin.content.Content`, as well as a list of
`pulpcore.plugin.stages.DeclarativeArtifact`. The latter combine an unsaved instance of
`pulpcore.plugin.content.Artifact` with a url to retrieve it.
The `pulpcore.plugin.stages.DeclarativeContent` objects, that describe, what a content will
look like when properly downloaded and saved to the database, are passed one by one to the next
pipeline stage.
The responsibility of providing this `first_stage` lies completely in the plugins domain, since
this is the part of the pipeline specific to the repository type.

The pulp plugin api provides the following stages which also comprise the default pipeline in the
following order:

1. `pulpcore.plugin.stages.QueryExistingContents`
2. `pulpcore.plugin.stages.QueryExistingArtifacts`
3. `pulpcore.plugin.stages.ArtifactDownloader`
4. `pulpcore.plugin.stages.ArtifactSaver`
5. `pulpcore.plugin.stages.ContentSaver`
6. `pulpcore.plugin.stages.RemoteArtifactSaver`
7. `pulpcore.plugin.stages.ResolveContentFutures`
8. `pulpcore.plugin.stages.ContentAssociation`

If the `mirror=True` optional parameter is passed to `DeclarativeVersion` the pipeline also runs
`pulpcore.plugin.stages.ContentUnassociation` at the end.

## On-demand synchronizing

See `on-demand-support`.



## Multiple level discovery

Plugins like `pulp_deb` and `pulp_container` use content artifacts to enumerate more content.
To support this pattern, the declarative content allows to be associated with a
`asyncio.Future`, that is resolved when the content reaches the
`pulpcore.plugin.stages.ResolveContentFutures` stage.
By awaiting this Future, one can implement an informational back loop into earlier stages.
If you need to drop `pulpcore.plugin.stages.DeclarativeContent` prematurely from the
pipeline, you can resolve the content using the function `resolve()` without handing
the content to the next stage. The function `resolve()` will unblock the coroutines awaiting the
attached `Future`.

!!! tip

    To improve performance when you expect to create a lot of those futures, consider to
    create a larger batch before starting to await them. This way the batching in the subsequent
    stages will still be exploited.

!!! tip

    If you need downloaded artifacts of this content for further discovery, make sure to
    provide `deferred_download=False` to the
    `pulpcore.plugin.stages.DeclarativeArtifact`.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/tasks/add-remove.md
`````markdown
# Adding and Removing Content

For adding and removing content, Pulp 3 provides a layered plugin API. The docs below explain our
lower level API; this information is helpful to understand how a synchronize task works under the
hood.

## Repository Versions

Starting with Pulp 3, repositories are versioned. A new immutable repository version is created
when its set of content units changes

To facilitate the creation of repository versions a
`pulpcore.plugin.models.RepositoryVersion` context manager is provided. Plugin Writers are
strongly encouraged to use RepositoryVersion as a context manager to provide transactional safety,
working directory setup, and database cleanup after encountering failures.

```python
with repository.new_version() as new_version:

   # add content manually
   new_version.add_content(content)
   new_version.remove_content(content)
```

!!! warning

    Any action that adds/removes content to a repository *must* create a new RepositoryVersion.
    Every action that creates a new RepositoryVersion *must* be asynchronous (defined as a task).
    Task reservations are necessary to prevent race conditions.

## Synchronizing

!!! tip

    Please consider using the high level `stages-concept-docs` for actual implementations.

Most plugins will define a synchronize task, which fetches content from a remote repository, and
adds it to a Pulp repository.

A typical synchronization task will follow this pattern:

- Download and analyze repository metadata from a remote source.

- Decide what needs to be added to repository or removed from it.

- Associate already existing content to a repository by creating an instance of
  `pulpcore.plugin.models.RepositoryContent` and saving it.

- Remove `pulpcore.plugin.models.RepositoryContent` objects which were identified for
  removal.

- For every content which should be added to Pulp create but do not save yet:

  - instance of `ExampleContent` which will be later associated to a repository.
  - instance of `pulpcore.plugin.models.ContentArtifact` to be able to create relations with
    the artifact models.
  - instance of `pulpcore.plugin.models.RemoteArtifact` to store information about artifact
    from remote source and to make a relation with `pulpcore.plugin.models.ContentArtifact`
    created before.

- If a remote content should be downloaded right away (aka `immediate` download policy), use
  the suggested  `downloading <download-docs>` solution. If content should be downloaded
  later (aka `on_demand` or `background` download policy), feel free to skip this step.

- Save all artifact and content data in one transaction:

  - in case of downloaded content, create an instance of
    {class}`~pulpcore.plugin.models .Artifact`. Set the `file` field to the
    absolute path of the downloaded file. Pulp will move the file into place
    when the Artifact is saved. The Artifact refers to a downloaded file on a
    filesystem and contains calculated checksums for it.
  - in case of downloaded content, update the `pulpcore.plugin.models.ContentArtifact` with
    a reference to the created `pulpcore.plugin.models.Artifact`.
  - create and save an instance of the `pulpcore.plugin.models.RepositoryContent` to
    associate the content to a repository.
  - save all created artifacts and content: `ExampleContent`,
    `pulpcore.plugin.models.ContentArtifact`,
    `pulpcore.plugin.models.RemoteArtifact`.

- Use `pulpcore.plugin.models.ProgressReport` to report the progress of some steps if needed.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/tasks/diagnostics.md
`````markdown
# Diagnostics

There is a `TASK_DIAGNOSTICS` setting which, if enabled, provides automatic collection of a number
of performance diagnostics for all executed tasks. This is intended primarily for developer use as
some of these diagnostics add significant runtime/memory overhead and therefore should not be
enabled in production environments (at last not without careful supervision).

`TASK_DIAGNOSTICS` is disabled by default.

The following diagnostics are supported currently:

- memory:
   Logs the task's max resident set size in MB logged over time
- pyinstrument:
   Dumps an HTML report from the pyinstrument profiler, if installed
- memray:
   Dumps a profile which can be processed with `memray`, which shows which lines and functions were
   responsible for the most allocations at the time of peak RSS of the process

When enabled, these are accessed by using HTTP GET requests to the path `${TASK_HREF}profile_artifacts/`
for the task which is under inspection. The response will contain a set of keys and corresponding URLs
which provides access to download the artifacts. Eventually these artifacts are removed automatically
by orphan cleanup and are no longer accessible.

## Memory Logging

The resident set size (RSS) of the process is measured every 2 seconds and logged to a file.

You can plot this with gnuplot by:

1. Downloading the memory log artifact, and saving it to a file such as `memory.datum` in your current
   working directory

2. Enter the `gnuplot` interactive environment.

3. Paste these commands:

   ```
   set ylabel "Task Process Megabytes (MB)"
   set xlabel "Seconds since task start"
   plot "memory.datum" with lines
   ```

4. Open your png chart saved at memory.png

## Pyinstrument Profiling

If the `pyinstrument` package is installed, a runtime profile of the execution of the task will be
automatically produced and written to a file.

When downloaded and opened in a browser, this profile will present an interactive tree showing how
much time is being spent in various functions relative to the total runtime of the task.

Enabling this profiler adds a bit of overhead (10-20%) to the runtime of the task, and also may leak
a bit of memory over time. This can be problematic for very long-running tasks. Behavior of the 
profiler (including sampling interval, directly proportional to memory overhead) can be adjusted 
by tweaking the code manually if required.

## Memray Profiling

If the `memray` package is installed, a runtime profile of the execution of the task will be
automatically produced and written to a file.

When downloaded and processed using `memray` (see [memray docs]), you can view the details of which
lines and functions were responsible for the most memory allocations at the time of peak process RSS.

Enabling this profiler adds significant overhead (25-40%+) to the runtime of the task. Behavior of the
profiler can be adjusted by tweaking the code manually if required, however, enabling most of the
additional options (such as profiling native callstacks, or recording the memory callstacks of the entire
process instead of merely max RSS) also adds additional runtime overhead and makes the resulting files
larger.

While the [memray docs] are recommended reading to fully grasp the options available, a recommended
starting point is:

1. Downloading the memray dump artifact, and saving it to a file such as `memray.bin` in your current
   working directory

2. python3 -m memray tree memray.bin

[memray docs]: https://bloomberg.github.io/memray/getting_started.html
`````

## File: pulp-docs/pulpcore/docs/dev/learn/tasks/publish.md
`````markdown
# Publish

In order to make content files available to clients, users must publish these files. Typically,
users will publish a repository which will make the content in the repository available.

When publishing a repository, your plugin needs to mimic the layout of both data and metadata. In
the simplest case for content types that don't have metadata, only the content unit data itself
needs to be published.

In most cases, both metadata and content unit data are required to make a usable publication. It's
important to understand what the required metadata is for your content type.

**Using a** `pulpcore.plugin.models.Publication` **context manager is highly encouraged.**  On
context exit, the complete attribute is set True provided that an exception has not been raised.
In the event an exception has been raised, the publication is deleted.

One of the ways to perform publishing:

- Find `pulpcore.plugin.models.ContentArtifact` objects which should be published
- For each of them create and save instance of `pulpcore.plugin.models.PublishedArtifact`
  which refers to `pulpcore.plugin.models.ContentArtifact` and
  `pulpcore.app.models.Publication` to which this artifact belongs.
- Generate and write to disk repository metadata
- For each of the metadata files create an instance of
  `pulpcore.plugin.models.PublishedMetadata` using `create_from_file` constructor. Each
  instance relates a metadata file to a `pulpcore.app.models.Publication`.
- Use `pulpcore.plugin.models.ProgressReport` to report progress of some steps if needed.
`````

## File: pulp-docs/pulpcore/docs/dev/learn/plugin-concepts.md
`````markdown
# Plugin Concepts

Like the Pulp Core itself, all Pulp Plugins are Django Applications, and could be created like any
other Django app with `pulpcore-manager startapp <your_plugin>`. However, instead of writing all
of the boilerplate yourself, it is recommended that you start your plugin by utilizing the [Plugin
Template](https://github.com/pulp/plugin_template).  This guide will assume that you have used
the plugin_template, but if you are interested in the details of what it provides you, please see
`plugin-django-application` for more information for how plugins are "discovered" and connected to
the `pulpcore` Django app. Additional information is given as inline comments in the template.

## Plugin API Usage

Plugin Applications interact with pulpcore with two high level interfaces, **subclassing** and
adding **tasks**.



## Subclassing

Pulp Core and each plugin utilize [Django](https://docs.djangoproject.com/) and the [Django Rest
Framework](https://www.django-rest-framework.org/). Each plugin provides
`subclassing-models`, `subclassing-serializers`, and `subclassing-viewsets`. For
each object that a plugin writer needs to make, the `pulpcore.plugin` API provides base classes.
These base classes handle most of the boilerplate code, resulting in CRUD for each object out of
the box.

```{toctree}
:maxdepth: 2

subclassing/models
subclassing/serializers
subclassing/viewsets
subclassing/import-export
subclassing/replication
subclassing/pull-through
```



## Master/Detail Models

Typically pulpcore wants to define a set of common fields on a Model; for example,
`pulpcore.plugin.models.Remote` defines fields like `url`, `username`, `password`, etc.
Plugin writers are able to also add plugin-specific fields through subclassing this object.
Conceptually this is easy, but two practical problems arise:

- With each subclass becoming its own table in the database, the common fields get duplicated on
  each of these tables.
- Migrations are now no longer on a single table, but N tables produced from subclassing.

To address these issues, pulpcore uses Django's [Multi-table inheritance support](https://docs.djangoproject.com/en/4.2/topics/db/models/#multi-table-inheritance) to create a pattern Pulp
developers call the "Master/Detail pattern". The model defining the common fields is called the
"Master model", and any subclass of a Master model is referred to as a "Detail model".

For example, pulpcore defines the [Remote](https://github.com/pulp/pulpcore/blob/b575e1338e04978755a0231905950659aeea4ea9/pulpcore/app/models/repository.py#L268) Master model. It
inherits from `MasterModel` which identifies it as a Master model, and defines many fields. Then
pulp_file defines the [FileRemote](https://github.com/pulp/pulpcore/blob/859427253903bdd55500cbc54097092baacec890/pulp_file/app/models.py#L48) which is a Detail model. The
Detail model defines a `TYPE` class attribute and is a subclass of a Master model.

Typically Master models are provided by pulpcore, and Detail models by plugins, but this is not
strictly required. Here is a list of the Master models pulpcore provides:

- `pulpcore.plugin.models.AlternateContentSource`
- `pulpcore.plugin.models.Content`
- `pulpcore.plugin.models.ContentGuard`
- `pulpcore.plugin.models.Distribution`
- `pulpcore.plugin.models.Exporter`
- `pulpcore.plugin.models.Importer`
- `pulpcore.plugin.models.Publication`
- `pulpcore.plugin.models.Remote`
- `pulpcore.plugin.models.Repository`

Here are some examples of usage from the Detail side:

```python
>>> my_file_remote = FileRemote.objects.get(name="some remote name")

>>> type(my_file_remote)  # We queried the detail type so we expect that type of instance
pulp_file.app.models.FileRemote

>>> my_file_remote.policy = "streamed"  # The detail object acts like it has all the attrs
>>> my_file_remote.save()  # Django's multi-table inheritance handles where to put things

>>> my_master_remote = my_file_remote.master  # the `master` attr gives you the master instance

>>> type(my_master_remote)  # Let's confirm this is the Master model type
pulpcore.app.models.repository.Remote
```

The Master table in psql gets a column named `pulp_type` which stores the app name joined with the
value of the class attribute on the Detail column using a period. So with `FileRemote` defining the
class attribute `TYPE = "file"` and the `pulp_file` Django app name being `"file"` we expect a
`pulp_type` of `"file.file"`.The Detail table in psql has a foreign key pointer used to join
against the Master table. This information can be helpful when you want to query from the Master
side:

```python
>>> items = Remote.objects.filter(pulp_type="file.file")  # Get the File Remotes in Master table
>>> my_master_remote = items[0]  # my_master_remote has no detail defined fields

>>> type(my_master_remote)  # Let's confirm this is the `master` instance
pulpcore.app.models.repository.Remote
```

A Master model instance can be transformed into its corresponding Detail model object using the
`cast()` method. See the example below for usage. Additionally, It is possible to create subclasses
of Detail models, and in that case, the `cast()` method will always derive the most recent
descendent. Consider the usage from below.

```python
>>> my_detail_remote = my_master_remote.cast()  # Let's cast the master to the detail instance
>>> type(my_detail_remote)
pulp_file.app.models.FileRemote  # Now it's a detail instance with both master and detail fields
```



## Validating Models

Pulp ensures validity of its database models by carefully crafted serializers.
So all instances where resources are created or updated, those serializers must be used.

To create a `MyModel` from a `data` dictionary, the `MyModelSerializer` can be used like:

```python
serializer = MyModelSerializer(data=data)
serializer.is_valid(raise_exception=True)
instance = serializer.create(serializer.validated_data)
```

In the stages pipeline, you want to instantiate the content units without saving them to database
right away. The `ContentSaver` stage will then persist the objects in the database. This can be
established by:

```python
# In MyPluginFirstStage::run
# <...>
serializer = MyModelSerializer(data=data)
serializer.is_valid(raise_exception=True)
d_content = DeclarativeContent(
    content=MyModel(**serializer.validated_data),
    d_artifacts=[d_artifact],
)
await self.put(d_content)
# <...>
```



## Tasks

Any action that can run for a long time should be an asynchronous task. Plugin writers do not need
to understand the internals of the pulpcore tasking system. Workers automatically execute tasks,
including the ones deployed by plugins.

**Worker and Tasks Directories**

In pulp each worker is assigned a unique working directory living in `/var/lib/pulp/tmp/`, and
each started task will have its own clean temporary subdirectory therein as its current working
directory. Those will automatically be cleaned up once the task is finished.

If a task needs to create more temporary directories, it is encouraged to use
`tempfile.TemporaryDirectory(dir=".")` from the python standard library to place them in the
tasks working directory. This can be necessary, if the amount of temporarily saved data is too much
to wait for the automatic cleanup at the end of the task processing or to avoid naming conflicts.

**Making Temporary Files Available to Tasks**

Sometimes, files must be brought forward from a ViewSet to an executing task. The files may or may
not end up being artifacts in the end. To tackle this, one should use `PulpTemporaryFile`.

```python
# Example 1 - Saving a temporary file:
temp_file = PulpTemporaryFile(file=my_file)
temp_file.save()

# Example 2 - Validating the digest and saving a temporary file:
temp_file = PulpTemporaryFile.init_and_validate(
    my_file, expected_digests={'md5': '912ec803b2ce49e4a541068d495ab570'}
)
temp_file.save()

# Example 3 - Creating an Artifact from the PulpTemporaryFile:
try:
    artifact = Artifact.from_pulp_temporary_file(temp_file)
except Exception:
    temp_file.delete()
```

When dealing with a clustered deployment, different pulp services are not guaranteed to share a
common filesystem (like /usr/share/pulp). `PulpTemporaryFile` is the alternative for creating
files with the same storage technology that the artifacts use. Therefore, the temporary files
are accessible by all pulp instances.

**Reservations**

The tasking system adds a concept called **reservations** which ensures that actions that act on the
same resources are not run at the same time. To ensure data correctness, any action that alters the
content of a repository (thus creating a new version) must be run asynchronously, locking on the
repository and any other models which cannot change during the action. For example, sync tasks must
be asynchronous and lock on the repository and the remote. Publish should lock on the repository
whose version is being published. Reservations can be shared (for read only access) and exclusive
(for modifying access).

**Deploying Tasks**

Tasks are usually deployed from Views or Viewsets, please see `kick-off-tasks`.

```{toctree}
:maxdepth: 2

tasks/add-remove
tasks/publish
```

**Immediate Tasks**

When dispatching a task, one can specify whether it is eligible to be run immediately in the same
process right away given the reservations can be satisfied (defaults to `False`), and whether it
is eligible to be deferred for workers to be picked up later (defaults to `True`).
In case a task was marked for immediate execution, but the reservations were not satisfied, it will
be left in the task queue or marked as canceled, depending on the `deferred` attribute.

!!! warning

    A task marked for immediate execution will not be isolated in the `pulpcore-worker`, but may
    be executed in the current api worker. This will not only delay the response to the http call,
    but also the complete single threaded gunicorn process. To prevent degrading the whole Pulp
    service, this is only ever allowed for tasks that guarantee to perform fast **and** without
    blocking on external resources. E.g. simple attribute updates, deletes... A model with a lot of
    dependants that cause cascaded deletes may not be suitable for immediate execution.


**Diagnostics**

```{toctree}
:maxdepth: 2

tasks/diagnostics
```

**Task Groups**

Sometimes, you may want to create many tasks to perform different parts of one larger piece of work,
but you need a simple means to track the progress of these many tasks. Task Groups serve this purpose
by providing details on the number of associated tasks in each possible state.
For more details, please see `kick-off-tasks`.

**GroupProgressReports**

GroupProgressReport can track progress of each task in that group. GroupProgressReport needs to be
created and associated to the TaskGroup. From within a task that belongs to the TaskGroup, the
GroupProgressReport needs to be updated.

```python
# Once a TaskGroup is created, plugin writers should create GroupProgressReport objects
# ahead, so tasks can find them and update the progress.
task_group = TaskGroup(description="Migration Sub-tasks")
task_group.save()
group_pr = GroupProgressReport(
    message="Repo migration",
    code="create.repo_version",
    total=1,
    done=0,
    task_group=task_group)
group_pr.save()
# When a task that will be executing certain work, which is part of a TaskGroup, it will look
# for the TaskGroup it belongs to and find appropriate progress report by its code and will
# update it accordingly.
task_group = TaskGroup.current()
progress_repo = task_group.group_progress_reports.filter(code='create.repo_version')
progress_repo.update(done=F('done') + 1)
# To avoid race conditions/cache invalidation issues, this pattern needs to be used so that
# operations are performed directly inside the database:

# .update(done=F('done') + 1)

# See: https://docs.djangoproject.com/en/4.2/ref/models/expressions/#f-expressions
# Important: F() objects assigned to model fields persist after saving the model instance and
# will be applied on each save(). Do not use save() and use update() instead, otherwise
# refresh_from_db() should be called after each save()
```

## Sync Pipeline

```{toctree}
:maxdepth: 2

sync_pipeline/sync_pipeline
```

## Domain Multi-tenancy

Pulp supports a namespacing feature called Domains that allows users to create their own Domain for
their objects to live in. This feature is optional and requires plugins to be domain compatible in
order to be enabled.

```{toctree}
:maxdepth: 2

domains/domains_compatibility
```



## Role Based Access Control

Pulp uses a policy-based approach for Role Based Access Control (RBAC).

Plugin writers can:

- Enable authorization for a viewset
- Ship a default access policy
- Express what default object-level and model-level permissions created for new objects
- Check permissions at various points in task code as needed

This allows users to then:

- Modify the default access policy on their installation for custom authorization
- Modify the default object-level and model-level permissions that are created for new objects

```{toctree}
:maxdepth: 2

rbac/overview
rbac/permissions
rbac/users_groups
rbac/access_policy
rbac/adding_automatic_permissions
rbac/queryset_scoping
```

## Content Protection

Users can configure a `ContentGuard` to protect a `Distribution` on their own, but some plugins
want to offer built-in content protection features. For example pulp_container may only want a user
to download container images they have rights to based on some permissions system pulp_container
could provide.

For more information, see the `ContentGuard Usage by Plugin Writers
<plugin-writers-use-content-protection>` documentation.

## Plugin Settings

Plugins can define settings by creating a `<your plugin>.app.settings` module containing settings
as you would define in the Django Settings File itself. `pulpcore` ships the actual settings.py
file so settings cannot be added directly as with most Django deployments. Instead as each plugin is
loaded, pulpcore looks for the `<your plugin>.app.settings` module and uses `dynaconf` to
overlay the settings on top of `pulpcore`'s settings and user provided settings.

Settings are parsed in the following order with later settings overwriting earlier ones:

1. Settings from `/etc/pulp/settings.py`.
2. Settings from `pulpcore.app.settings` (the pulpcore provided settings defaults).
3. Plugin settings from `<your plugin>.app.settings`.

In some cases, a setting should not overwrite an existing setting, but instead add to it. For
example, consider adding a custom log handler or logger to the [LOGGING](https://github.com/pulp/pulpcore/blob/ec336c2b7bc7cefd3a28fc69dcd1c65655332841/pulpcore/app/settings.py#L183-L202)
settings. You don't want to fully overwrite it, but instead add or overwrite only a sub-portion.
`dynaconf` provides the [dynaconf_merge feature](https://www.dynaconf.com/merging/) which is for merging settings instead of overwriting them. For
example, pulp_ansible makes use of this [here](https://github.com/pulp/pulp_ansible/blob/31dd6b77f0e2748644a4b76607be4a6cd2b6ce89/pulp_ansible/app/settings.py).

Some settings require validation to ensure the user has entered a valid value. Plugins can add
validation for their settings using validators added in a `dynaconf` hook file that will run
after all the settings have been loaded. Create a `<your plugin>.app.dynaconf_hooks` module like
below so `dynaconf` can run your plugin's validators. See [dynaconf validator docs](https://www.dynaconf.com/validation/) for more information on writing validators.

```python
from dynaconf import Validator

def post(settings):
    """This hook is called by dynaconf after the settings are completely loaded"""
    settings.validators.register(
        Validator(...),
        Validator(...),
        ...
    )
    settings.validators.validate()
```



## Custom API URL Routes

The [typical plugin viewsets](site:pulpcore/docs/dev/learn/subclassing/viewsets/) are all suburls under `/pulp/api/v3/`, but
some content types require additional urls outside of this area. For example pulp_ansible provides
the Galaxy API at `/pulp_ansible/galaxy/`.

Place a urls.py that defines a `urlpatterns` at the root of your Python package, and the pulpcore
plugin loading code will append those urls to the url root. This allows your urls.py to be a typical
Django file. For example pulp_ansible uses a [urls.py defined here](https://github.com/pulp/pulp_ansible/blob/master/pulp_ansible/app/urls.py)



## Custom Content App Routes

The Content App may also require custom routes, for example [pulp_container](https://github.com/pulp/pulp_container/blob/master/pulp_container/app/content.py) defines some. Read more about how
to `customize the content app with custom routes <content-app-docs>`.



## Configuring Reverse Proxy with Custom URLs

When a plugin requires either Pulp API or Pulp Content App custom urls, the reverse proxy, i.e.
either Nginx or Apache, need to receive extra configuration snippets to know which service to route
the custom URLs to.

A best practice is to document clearly the custom URL requirements your plugin needs. Environments
such as k8s, podman, or docker may need manual configuration. Having clear docs is a minimum.

You can ship webserver snippets as part of your Python package with three steps:

1\. Create a python package named `webserver_snippets` directory inside your app, e.g.
`pulp_ansible.app.webserver_snippets`. Like all Python packages it will have an `__init__.py`.

2. Create an `nginx.conf` and an `apache.conf`.

3\. Create an entry in MANIFEST.in to have the packaged plugin include the `apache.conf` and
`nginx.conf` files.

Here is an example in [pulp_ansible's webserver configs](https://github.com/pulp/pulp_ansible/tree/master/pulp_ansible/app/webserver_snippets).

For the `nginx.conf` you can use variables with the names `pulp-api` and `pulp-content` as the
location for the backend services. For example, to route the url `/pulp_ansible/galaxy/` to the
Pulp API you could have your `nginx.conf` contain:

```
location /pulp_ansible/galaxy/ {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $http_host;
    # we don't want nginx trying to do something clever with
    # redirects, we set the Host: header above already.
    proxy_redirect off;
    proxy_pass http://pulp-api;
}
```

The Apache config provides variables containing the location of the Pulp Content App and the Pulp
API as `pulp-api` and `pulp-content` respectively. Below is an equivalent snippet to the one
above, only for Apache:

```
ProxyPass /pulp_ansible/galaxy http://${pulp-api}/pulp_ansible/galaxy
ProxyPassReverse /pulp_ansible/galaxy http://${pulp-api}/pulp_ansible/galaxy
```

For the MANIFEST.in entry, you'll likely want one like the example below which was taken from
[pulp_ansible's MANIFEST.in](https://github.com/pulp/pulp_ansible/blob/master/MANIFEST.in):

```
include pulp_ansible/app/webserver_snippets/*
```



## Overriding the Reverse Proxy Route Configuration

Sometimes a plugin may want to control the reverse proxy behavior of a URL at the webserver. For
example, perhaps an additional header may want to be set at the reverse proxy when those urls are
forwarded to the plugin's Django code. To accomplish this, the
`custom app route <custom-content-app-routes>` can be used when it specifies a more-specific
route than the pulp-oci-images base webserver configuration provides.

For example assume the header `FOO` should be set at the url `/pulp/api/v3/foo_route`. Below are
two examples of a snippet that could do this (one for Nginx and another for Apache).

Nginx example:

```
location /pulp/api/v3/foo_route {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $http_host;

    proxy_set_header FOO 'asdf';  # This is the custom part

    # we don't want nginx trying to do something clever with
    # redirects, we set the Host: header above already.
    proxy_redirect off;
    proxy_pass http://pulp-api;
}
```

Apache example:

```
<Location "/pulp/api/v3/foo_route">
    ProxyPass /pulp/api http://${pulp-api}/pulp/api
    ProxyPassReverse /pulp/api http://${pulp-api}/pulp/api
    RequestHeader set FOO "asdf"
</Location>
```

These snippets work because both Nginx and Apache match on "more-specific" routes first regardless
of the order in the config file. The pulp-oci-env ships the a default of `/pulp/api/v3` so
anything containing another portion after `v3` such as `/pulp/api/v3/foo_route` would be more
specific.



## Plugin API Stability and Deprecation Policy

The `pulpcore.plugin` API can introduce breaking changes, and will be introduced in the following
way. For this example, assume that pulpcore 3.8 introduces a breaking change by changing the call
signature of a method named `def foo(a, b)` which is importable via the plugin API.

In 3.8 the following changes happen:

1. The new method would be introduced as a new named function `def the_new_foo(...)` or some
   similar name.

2. The existing method signature `def foo(a, b)` is left in-tact.

3. The `foo` method would have the a Python `DeprecationWarning` added to it such as:

   ```
   from pulpcore.app.loggers import deprecation_logger
   deprecation_logger.warning("foo() is deprecated and will be removed in pulpcore==3.9; use the_new_foo().")
   ```

4. A `CHANGES/plugin_api/XXXX.deprecation` changelog entry is created explaining how to port
   plugin code onto the new call interface.

Then in 3.9 the following happens:

1. The `def foo(a, b)` method is deleted entirely.
2. A `CHANGES/plugin_api/XXXX.removal` changelog entry is created explaining what has been
   removed.

!!! note

    Deprecation log statements are shown to users of your plugin when using a deprecated call
    interface. This is by design to raise general awareness that the code in-use will eventually be
    removed.


This also applies to models importable from `pulpcore.plugin.models`. For example, an attribute
that is being renamed or removed would follow a similar deprecation process described above to allow
plugin code one release cycle to update their code compatibility.

Logging of deprecation warnings can be disabled by raising the log level for the
`pulpcore.deprecation` logger in the pulpcore settings file:

```
LOGGING = {
    # ...
    "loggers": {
        "pulpcore.deprecation": {
            "level": "ERROR",
    }
}
```



## Declaring Dependencies

Pulpcore and Pulp plugins are Python applications and are expected to follow Python ecosystem norms
including declaring direct dependencies using the setuptools `install_requires` keyword in your
`setup.py`.

Pulpcore and Pulp plugins are expected to do two things when declaring dependencies:

1\. Declare an upper bound to prevent a breaking-change release of a dependency from breaking user
installations. To prevent unexpected breakages due to new plugin releases, this typically is the
current latest release of a dependency (assuming a plugin is compatible with the latest release).
The latest release is preferred because it allows each new dependency release to be tested, and it
prevents unexpected user breakages when dependencies release breaking changes.

2\. Declare as broad a range of compatible versions as possible to minimize conflicts between your
code and other Python projects installed in the same Python environment.

Here are some examples assuming our code directly depends on the `jsonschema` library and assuming
the latest `jsonschema` release is 4.4.2:

`jsonschema>=2.3,<=4.4.2` - Assuming this is accurate, this is the best declaration because it
declares as broad an expression of compatibility as safely possible.

`jsonschema<=4.4.2` - This is appropriate if the appropriate lower bound is not known.

`jsonschema~=4.4` - This should be avoided. Use an upper and lower bound range instead.

`jsonschema==4.4.0` - This is a last resort and needs an exceptional reason to do so.

`jsonschema` - This doesn't declare an upper bound, so this won't work. The CI will fail this.

Any code that you import directly should have its dependency declared as a requirement. This
includes code that you also would receive as dependencies of dependencies. For example, all plugins
import and use Django directly, but pulpcore also includes Django. Since your plugin uses Django
directly, your plugin should declare its dependency on Django.

!!! note
    Why add a requirement when pulpcore is known to provide it? To continue with the Django
    example... Django can introduce breaking changes with each release, so if your plugin relies on
    pulpcore to declare the Django requirement, and then pulpcore upgrades, your plugin could
    receive breaking changes with a new version of pulpcore. These breaking changes could be subtle
    and not be noticeable until they affect your users. By your plugin declaring the dependency on
    Django directly, at install/upgrade time (in the CI), you'll know right away you have a
    conflicting dependency on Django.


One useful tool for managing the upperbound is [dependabot](https://github.com/dependabot) which
can open PRs raising the upper bound when new releases occur. These changes will go through the CI
which allows your dependency upper bound raising to be tested.

The challenging part of maintaining the lower bound is that it is not tested due to `pip` in the
CI wanting to use the latest version. Here are a few examples of when you want to raise the lower
bound:

- A plugin code change uses a new dependency feature
- A bug in the lower bound version of a dependency affects your plugin's users and a fix is
  available in a newer version of the dependency.
- Plugin code is incompatible with the lower bound version of a dependency and the solution is to
  declare a new lower bound.



## Checksum Use In Plugins

The `ALLOWED_CONTENT_CHECKSUMS` setting provides the list of allowed checksums a Pulp installation
is allowed to handle. This includes two types of "checksum handling":

1. Generating checksums. Only hashers in the `ALLOWED_CONTENT_CHECKSUMS` list should be used for
   checksum generation.
2. Passing through checksum data to clients. Pulp installations should not deliver checksum data to
   clients that are not in the `ALLOWED_CONTENT_CHECKSUMS` list. For example, the RPM plugin
   publications contain checksums that Pulp does not generate, and it should restrict the checksum
   data used in those publications to the set of allowed hashers in `ALLOWED_CONTENT_CHECKSUMS`.

!!! note

    The plugin API provides the `pulpcore.plugin.pulp_hashlib` module which provides the `new`
    function. This is a wrapper around `hashlib.new` which raises an exception if a hasher is
    requested that is not listed in the `ALLOWED_CONTENT_CHECKSUMS` setting. This is a convenience
    facility allowing plugin writers to not check the `ALLOWED_CONTENT_CHECKSUMS` setting
    themselves.


(il8n-expectations)=

## Internationalization Expectations

pulpcore and its plugins are expected to internationalize all user-facing strings using Python's
gettext facilities. This allows Pulp to be translated to other languages and be more usable for a
broader base of users.

Administrator facing strings are expected *not* to be internationalized. These include all log
statements, migration output print statements, django management commands, etc. These not being
internationalized will remain in English. This expectation was formed after feedback from
multi-language speakers who believe having error messages for admins in English would reduce the
time to finding a fix and was generally less surprising.



## Zero-Downtime Upgrades

Pulp users should be able to upgrade without first stopping Pulp services. This has been
[requested from the community](https://discourse.pulpproject.org/t/support-zero-downtime-updates/645).
To support this, developers of `pulpcore` or a plugin should follow these requirements:

- Migrations must not break earlier versions code still running during an upgrade.
- Task code must be backwards compatible until the next major Pulp version.

Future user upgrades will likely run as follow:

1. Run the migrations while old pulp code is online. Old code, is using the new data format.
2. Rolling restart old code to become new code. Old and new code is running at the same time!

!!! note

    Zero-downtime upgrade support is provided as a best effort and sometimes it is not feasible to
    write a migration that doesn't require downtime. In such cases, a changelog entry should be
    added that notes the release has a migration that requires downtime.

# Zero-Downtime Migrations

The significant challenge with online migrations is that the db state the migration applies has to
work with both newer and older versions of Pulp code. For example, consider a model field that is to
be renamed. After renaming the field, Django would generate a migration that renames the specified
column. This would break all previous code which expects the previous column name.

Before getting into specific suggestions, the general pattern is to do the following:

1. The migration should be split into two parts: a "compatible with earlier code migration" and a
   "breaking earlier code migration". In continuing the column rename example, it would become a
   "create a new column" migration, and later a "delete the original column" migration.
2. The "breaking earlier code migration" should be delivered in a later release. It contains the
   the component versions that would not be broken by that change. When that migration goes to run
   it uses the db info in the db for each running pulp process to determine if any components are
   running a version that would break if this change is applied.

The solution to this will be highly dependant on the details of the migration, but here are some
likely patterns to be applied:

1. Avoid it. Is this rename really that important? Is it worth the trouble?
2. Rename the model attributes in code, but leave the actual column name as-is with
   the [db_column](https://docs.djangoproject.com/en/4.2/ref/models/fields/#db-column).
3. Have an "old" and a "new" column and use database triggers to keep data written to one to also be
   written to the other and vice-versa.

Here's an example:

pulp_file wants to rename a model attribute `old` to be called `new` in the next pulp_file
release, let's say that's pulp_file 1.10.0. Let's assume that avoiding the rename altogether or
using the `db-column` option to just rename it in the ORM are not viable.

This could be done as follows:

- Add the `new` field next to the `old` field and have Django auto-create a migration adding
  `new`.
- The same migration needs to install a new trigger that anytime `old` is written to, `new` is
  also written to and vice-versa.
  For example, something like writting to two columns in one table using postgres trigger.
  This allows the new code to read/write exclusively with `new` and the old code to deal with `old`.
- Write a data migration that updates the `new` column with `old` data in batches. Use batching
  to avoid a long table-lock.
- Have the codebase of pulp_file 1.10.0 stop using `old` entirely.

At a later time, e.g. pulp_file 1.13.0, a migration will be shipped to remove column `old`. That
migration needs to do two things things:

- Prior to running ensure via the database records that there are no pulp components running with
  pulp_file \< 1.10.0. If there are, abort running the migration and notify the user they need to
  upgrade to a version pulp_file>=1.10,\<1.13.0.
- Remove the database trigger and then the column `old`.

# Data Migrations

One problem that can arise from data migrations is the use of table-locks which would prevent other
code still running from executing concurrently. The typical solution is to have data migrations
operate in transactional batches which avoids a table-lock and instead creates row-locks.

# Tasking System

Tasking also has some considerations to allow code upgrades; specifically, tasks dispatched from
older codebases could run on newer, upgraded workers. To ensure this always works tasks must be
forever backwards compatible until the next major Pulp version. For example, you cannot have a
breaking signature change in tasking code and if this is needed you need to make a new task name and
preserve the old code until the next major Pulp version.

!!! note

    Users not performing zero downtime upgrades who are still wary of any task incompatibilities,
    should consider running the pulpcore worker in burst mode (`pulpcore-worker --burst`) after
    shutting down all the api and content workers to drain the task queue.
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/apps.md
`````markdown
# pulp.app.apps

::: pulpcore.app.apps
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/auth.md
`````markdown
# pulp.app.auth

::: pulpcore.app.authentication
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/index.md
`````markdown
# pulp.app
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/models.md
`````markdown
# pulp.app.models

::: pulpcore.app.models
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/response.md
`````markdown
# pulp.app.response

All response objects documented here should be imported directly from the `pulpcore.app.response` namespace.

::: pulpcore.app.response
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/serializers.md
`````markdown
# pulp.app.serializers

All serializers documented here should be imported directly from the `pulp.app.serializers` namespace.

::: pulpcore.app.serializers

## pulp.app.serializers.base

::: pulpcore.app.serializers.base

## pulp.app.serializers.fields

::: pulpcore.app.serializers.fields

## pulp.app.serializers.content

::: pulpcore.app.serializers.content

## pulp.app.serializers.repository

::: pulpcore.app.serializers.repository
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/settings.md
`````markdown
# pulp.app.settings

::: pulpcore.app.settings
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/urls.md
`````markdown
# pulp.app.urls

::: pulpcore.app.urls
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/app/viewsets.md
`````markdown
# pulp.app.viewsets

All viewsets documented here should be imported directly from the `pulpcore.app.viewsets` namespace.

Viewsets that dispatch tasks that are descendants of `pulpcore.tasking.tasks.UserFacingTask`
should return an `pulpcore.app.response.OperationPostponedResponse`.

::: pulpcore.app.viewsets

## pulp.app.viewsets.base

::: pulpcore.app.viewsets.base

## pulp.app.viewsets.content

::: pulpcore.app.viewsets.content

## pulp.app.viewsets.repository

::: pulpcore.app.viewsets.repository
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/constants.md
`````markdown
# pulp.constants

::: pulpcore.constants
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/exceptions.md
`````markdown
# pulp.exceptions

All exceptions documented here should be imported directly from the `pulp.exceptions` namespace.

::: pulpcore.exceptions

## pulp.exceptions.base

::: pulpcore.exceptions.base
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/index.md
`````markdown
# Platform API

All items documented here are only for use when working with the Pulp Platform. When writing
plugins, consult the Plugin API.
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/platform-api/tasking.md
`````markdown
# pulp.tasking

::: pulpcore.tasking

## pulp.tasking.worker

::: pulpcore.tasking.worker

## pulp.tasking.storage

::: pulpcore.tasking.storage

## pulp.tasking.tasks

::: pulpcore.tasking.tasks

## pulp.tasking.\_util

::: pulpcore.tasking._util
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/content-app.md
`````markdown
# pulpcore.plugin.content

The Content app provides built-in functionality to handle user requests for content, but in some
cases the default behavior may not work for some content types. For example, Container content requires
specific response headers to be present. In these cases the plugin write should provide a custom
Handler to the Content App by subclassing `pulpcore.plugin.content.Handler`.

Making a custom Handler is a two-step process:

1. subclass `pulpcore.plugin.content.Handler` to define your Handler's behavior
2. Add the Handler to a route using aiohttp.server's [add_route()](https://aiohttp.readthedocs.io/en/stable/web_reference.html#aiohttp.web.UrlDispatcher.add_route) interface.

If content needs to be served from within the `Distribution`'s base_path,
overriding the `pulpcore.plugin.models.Distribution.content_handler` and
`pulpcore.plugin.models.Distribution.content_handler_directory_listing`
methods in your Distribution is an easier way to serve this content. The
`pulpcore.plugin.models.Distribution.content_handler` method should
return an instance of `aiohttp.web_response.Response` or a
`pulpcore.plugin.models.ContentArtifact`.

## Creating your Handler

Import the Handler object through the plugin API and then subclass it. Custom functionality can be
provided by overriding the various methods of `Handler`, but here is the simplest version:

```python
from pulpcore.plugin.content import Handler

class MyHandler(Handler):

    pass
```

Here is an example of the [Container custom Handler](https://github.com/pulp/pulp_container/blob/master/pulp_container/app/registry.py).

## Registering your Handler

We register the Handler with Pulp's Content App by importing the aiohttp.server 'app' and then
adding a custom route to it. Here's an example:

```python
from pulpcore.content import app

app.add_routes([web.get(r'/my/custom/{somevar:.+}', MyHandler().stream_content)])
```

Here is an example of [Container registering some custom routes](https://github.com/pulp/pulp_container/blob/master/pulp_container/app/content.py).

## Restricting which detail Distributions Match

To restrict which Distribution model types your Handler will serve, set the `distribution_model`
field to your Model type. This causes the Handler to only search/serve your Distribution types.

```python
from pulpcore.plugin.content import Handler

from models import MyDistribution


class MyHandler(Handler):

    distribution_model = MyDistribution
```

## pulpcore.plugin.content.Handler

::: pulpcore.plugin.content.Handler
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/download.md
`````markdown
# pulpcore.plugin.download

The module implements downloaders that solve many of the common problems plugin writers have while
downloading remote data. A high level list of features provided by these downloaders include:

- auto-configuration from remote settings (auth, ssl, proxy)
- synchronous or parallel downloading
- digest and size validation computed during download
- grouping downloads together to return to the user when all files are downloaded
- customizable download behaviors via subclassing

All classes documented here should be imported directly from the
`pulpcore.plugin.download` namespace.

## Basic Downloading

The most basic downloading from a url can be done like this:

```
downloader = HttpDownloader('http://example.com/')
result = downloader.fetch()
```

The example above downloads the data synchronously. The
`pulpcore.plugin.download.HttpDownloader.fetch` call blocks until the data is
downloaded and the `pulpcore.plugin.download.DownloadResult` is returned or a fatal
exception is raised.

## Parallel Downloading

Any downloader in the `pulpcore.plugin.download` package can be run in parallel with the
`asyncio` event loop. Each downloader has a
`pulpcore.plugin.download.BaseDownloader.run` method which returns a coroutine object
that `asyncio` can schedule in parallel. Consider this example:

```
download_coroutines = [
    HttpDownloader('http://example.com/').run(),
    HttpDownloader('http://pulpproject.org/').run(),
]

loop = asyncio.get_event_loop()
done, not_done = loop.run_until_complete(asyncio.wait([download_coroutines]))

for task in done:
    try:
        task.result()  # This is a DownloadResult
    except Exception as error:
        pass  # fatal exceptions are raised by result()
```



## Download Results

The download result contains all the information about a completed download and is returned from a
the downloader's `run()` method when the download is complete.

::: pulpcore.plugin.download.DownloadResult
    options:
        members: false

## Configuring from a Remote

When fetching content during a sync, the remote has settings like SSL certs, SSL validation, basic
auth credentials, and proxy settings. Downloaders commonly want to use these settings while
downloading. The Remote's settings can automatically configure a downloader either to download a
`url` or a `pulpcore.plugin.models.RemoteArtifact` using the
`pulpcore.plugin.models.Remote.get_downloader` call. Here is an example download from a URL:

```
downloader = my_remote.get_downloader(url='http://example.com')
downloader.fetch()  # This downloader is configured with the remote's settings
```

Here is an example of a download configured from a RemoteArtifact, which also configures the
downloader with digest and size validation:

```
remote_artifact = RemoteArtifact.objects.get(...)
downloader = my_remote.get_downloader(remote_artifact=ra)
downloader.fetch()  # This downloader has the remote's settings and digest+validation checking
```

The `pulpcore.plugin.models.Remote.get_downloader` internally calls the
`DownloaderFactory`, so it expects a `url` that the `DownloaderFactory` can build a downloader for.
See the `pulpcore.plugin.download.DownloaderFactory` for more information on
supported urls.

!!! tip

    The `pulpcore.plugin.models.Remote.get_downloader` accepts kwargs that can
    enable size or digest based validation, and specifying a file-like object for the data to be
    written into. See `pulpcore.plugin.models.Remote.get_downloader` for more
    information.


!!! note

    All `pulpcore.plugin.download.HttpDownloader` downloaders produced by the same
    remote instance share an `aiohttp` session, which provides a connection pool, connection
    reusage and keep-alives shared across all downloaders produced by a single remote.




## Automatic Retry

The `pulpcore.plugin.download.HttpDownloader` will automatically retry 10 times if the
server responds with one of the following error codes:

- 429 - Too Many Requests



## Exception Handling

Unrecoverable errors of several types can be raised during downloading. One example is a
`validation exception <validation-exceptions>` that is raised if the content downloaded fails
size or digest validation. There can also be protocol specific errors such as an
`aiohttp.ClientResponse` being raised when a server responds with a 400+ response such as an HTTP
403\.

Plugin writers can choose to halt the entire task by allowing the exception be uncaught which
would mark the entire task as failed.

!!! note

    The `pulpcore.plugin.download.HttpDownloader` automatically retry in some cases, but if
    unsuccessful will raise an exception for any HTTP response code that is 400 or greater.




## Custom Download Behavior

Custom download behavior is provided by subclassing a downloader and providing a new `run()` method.
For example you could catch a specific error code like a 404 and try another mirror if your
downloader knew of several mirrors. Here is an [example of that](https://gist.github.com/bmbouter/bbacae99d3edfb145db1498e34fa6187#file-mirrorlist-py-L24-L75) in
code.

A custom downloader can be given as the downloader to use for a given protocol using the
`downloader_overrides` on the `pulpcore.plugin.download.DownloaderFactory`.
Additionally, you can implement the `pulpcore.plugin.models.Remote.get_downloader`
method to specify the `downloader_overrides` to the
`pulpcore.plugin.download.DownloaderFactory`.



## Adding New Protocol Support

To create a new protocol downloader implement a subclass of the
`pulpcore.plugin.download.BaseDownloader`. See the docs on
`pulpcore.plugin.download.BaseDownloader` for more information on the requirements.



## Download Factory

The DownloaderFactory constructs and configures a downloader for any given url. Specifically:

1. Select the appropriate downloader based from these supported schemes: `http`, `https` or `file`.
2. Auto-configure the selected downloader with settings from a remote including (auth, ssl,
   proxy).

The `pulpcore.plugin.download.DownloaderFactory.build` method constructs one
downloader for any given url.

!!! note
    Any `HttpDownloader <http-downloader>` objects produced by an instantiated
    `DownloaderFactory` share an `aiohttp` session, which provides a connection pool, connection
    reusage and keep-alives shared across all downloaders produced by a single factory.


!!! tip
    The `pulpcore.plugin.download.DownloaderFactory.build` method accepts kwargs that
    enable size or digest based validation or the specification of a file-like object for the data
    to be written into. See `pulpcore.plugin.download.DownloaderFactory.build` for
    more information.


::: pulpcore.plugin.download.DownloaderFactory


## HttpDownloader

This downloader is an asyncio-aware parallel downloader which is the default downloader produced by
the `downloader-factory` for urls starting with `http://` or `https://`. It also supports
synchronous downloading using `pulpcore.plugin.download.HttpDownloader.fetch`.

::: pulpcore.plugin.download.HttpDownloader
    options:
        inherited_members: true



## FileDownloader

This downloader is an asyncio-aware parallel file reader which is the default downloader produced by
the `downloader-factory` for urls starting with `file://`.

::: pulpcore.plugin.download.FileDownloader
    options:
        inherited_members: true



## BaseDownloader

This is an abstract downloader that is meant for subclassing. All downloaders are expected to be
descendants of BaseDownloader.

::: pulpcore.plugin.download.BaseDownloader



## Validation Exceptions

::: pulpcore.exceptions.DigestValidationError

::: pulpcore.exceptions.SizeValidationError

::: pulpcore.exceptions.ValidationError
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/exceptions.md
`````markdown
# pulpcore.plugin.exceptions

All exceptions documented here should be imported directly from the `pulpcore.plugin.exceptions` namespace.

::: pulpcore.plugin.exceptions
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/index.md
`````markdown
# Plugin API Reference

The Plugin API is versioned in sync with `pulpcore` and consists of everything importable within
the `pulpcore.plugin` namespace. It is governed by the
[deprecation policy](site:pulpcore/docs/dev/learn/plugin-concepts/?h=deprecation#plugin-api-stability-and-deprecation-policy).
When writing plugins, care should be taken to only import `pulpcore` components exposed in this
namespace; importing from elsewhere within the `pulpcore` module (e.g. importing directly from
`pulpcore.app`, `pulpcore.exceptions`, etc.) is unsupported, and not protected by the
aforementioned Pulp Plugin API deprecation policy.
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/models.md
`````markdown
# pulpcore.plugin.models

All models documented here should be imported directly from the `pulpcore.plugin.models` namespace.

::: pulpcore.plugin.models
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/serializers.md
`````markdown
# pulpcore.plugin.serializers

All serializers documented here should be imported directly from the `pulpcore.plugin.serializers`
namespace.

::: pulpcore.plugin.serializers
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/stages.md
`````markdown
# pulpcore.plugin.stages

Plugin writers can use the Stages API to create a high-performance, download-and-saving pipeline
to make writing sync code easier. There are several parts to the API:

1. `declarative-version` is a generic pipeline useful for most synchronization use cases.
2. The builtin Stages including `artifact-stages` and `content-stages`.
3. The `stages-api`, which allows you to build custom stages and pipelines.

## DeclarativeVersion

::: pulpcore.plugin.stages.DeclarativeVersion

::: pulpcore.plugin.stages.DeclarativeArtifact
    options:
        members: false

::: pulpcore.plugin.stages.DeclarativeContent
    options:
        members: false

## Stages API

::: pulpcore.plugin.stages.create_pipeline

::: pulpcore.plugin.stages.Stage

::: pulpcore.plugin.stages.EndStage

## Artifact Related Stages

::: pulpcore.plugin.stages.ArtifactDownloader

::: pulpcore.plugin.stages.ArtifactSaver

::: pulpcore.plugin.stages.RemoteArtifactSaver

::: pulpcore.plugin.stages.QueryExistingArtifacts

## Content Related Stages

::: pulpcore.plugin.stages.ContentSaver

::: pulpcore.plugin.stages.QueryExistingContents

::: pulpcore.plugin.stages.ResolveContentFutures

::: pulpcore.plugin.stages.ContentAssociation
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/storage.md
`````markdown
# pulpcore.plugin.storage

::: pulpcore.plugin.storage
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/tasking.md
`````markdown
# pulpcore.plugin.tasking

All models documented here should be imported directly from the `pulpcore.plugin.tasking` namespace.

::: pulpcore.plugin.tasking
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/util.md
`````markdown
# pulpcore.plugin.util

All utils documented here should be imported directly from the `pulpcore.plugin.util` namespace.

::: pulpcore.plugin.util
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/plugins-api/viewsets.md
`````markdown
# pulpcore.plugin.viewsets

All viewsets documented here should be imported directly from the `pulpcore.plugin.viewsets`
namespace.

::: pulpcore.plugin.viewsets
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-api/base-models.md
`````markdown
# Base Models

::: pulpcore.app.models.repository

::: pulpcore.app.models.content

::: pulpcore.app.models.publication
`````

## File: pulp-docs/pulpcore/docs/dev/reference/code-style-guide.md
`````markdown
# Code Style Guide

## Python Version

All Pulp 3+ code will use Python 3.8+.
It is not necessary to maintain backwards compatibility with Python 2.Y.

## PEP-8

All code should be compliant with [PEP-8] where reasonable.

It is recommended that contributors check for compliance by running [flake8].
We include `flake8.cfg` files in our git repositories for convenience.

## Black

All python code (except for the usually generated files in the migration folder) must be formatted according to the ruleset defined by [black].
As [black] is able to automatically reformat python code, contributors are supposed to run `black .` in the repositories `pulpcore` directory.
For various IDEs / editors, there is also an [integration] for [black].

### Modifications:

line length: We limit to 100 characters, rather than 79.

## Documentation

Documentation is written in MarkDown using mkdocs with the material theme and some extensions.
You can find a comprehensive list of examples in our [markdown cheat sheet].
We encourage to break lines at semantic boundaries to ease editing and reviewing small docs changes.
This is also termed "one sentence per line" rule, but do not take that too literally.

Rules of thumb:

* Use your best judgement.
* Avoid complicated sentence structure.
* Write technical prose, not lyrical.

### In-code Documentation

In-code documentation should follow the general documentation guidelines listed above.

Most classes and functions should have a docstring that follows the conventions described in [Google's Python Style Guide].

# Exceptions and Clarifications

1. Modules should not include license information.
2. The type of each Args value should be included after the variable name in parentheses.
   The type of each Returns value should be the first item on the line.
3. Following the type of Args and Returns values, there will be a colon and a single space followed by the description.
   Additional spaces should not be used to align types and descriptions.
4. Fields and Relations sections will be used when documenting fields on Django models.
   The Fields section will be used for non-related fields on Model classes.
   The Relations section will be used for related fields on Model classes.

# Auto-Documentation

Docstrings will be used for auto-documentation and must be parsable by the
[Napoleon plugin for Sphinx].

# Example Docstring

```python
def example_function():
    """
    The first section is a summary, which should be restricted to a single line.

    More detailed information follows the summary after a blank line.
    This section can be as many lines as necessary.

    Args:
        arg1 (str): The argument is visible, and its type is clearly indicated.
        much_longer_argument (str): Types and descriptions are not aligned.

    Returns:
        bool: The return value and type is very clearly visible.

    """
```

# Encoding

Python 3 assumes that files are encoded with UTF-8, so it is not necessary to declare this in the file.

[black]: https://github.com/psf/black
[flake8]: http://flake8.pycqa.org/en/latest/
[Google's Python Style Guide]: https://google.github.io/styleguide/pyguide.html?showone=Comments#Comments
[integration]: https://github.com/psf/black#editor-integration
[markdown cheat sheet]: site:pulp-docs/docs/dev/reference/markdown-cheatsheet/
[Napoleon plugin for Sphinx]: http://www.sphinx-doc.org/en/stable/ext/napoleon.html
[pep-8]: https://www.python.org/dev/peps/pep-0008
`````

## File: pulp-docs/pulpcore/docs/dev/tutorials/_SUMMARY.md
`````markdown
* [Contributing with docs](quickstart-docs.md)
* [Contributing with code](quickstart.md)
`````

## File: pulp-docs/pulpcore/docs/dev/tutorials/quickstart-docs.md
`````markdown
# Contributing with docs

## Overview

The purpose of this quickstart is to help you to make docs-only contributing effortless, without requiring a full development setup.

## Workflow

### 1. Setup

Pulp uses a dedicated tool to aggregate documentation from its various repositories called [`pulp-docs`](site:pulp-docs/docs/dev/).

Once its installed, it'll look for local Pulp repo checkouts in the parent directory and, if not found,
it'll clone the last released repo from GitHub into a managed environment.

=== "pipx"

    ```bash
    pipx install git+https://github.com/pulp/pulp-docs --include-deps
    ```

=== "pip"

    ```bash
    pip install --user git+https://github.com/pulp/pulp-docs
    ```

=== "pip with venv"

    ```bash
    python -m venv venv
    source venv/bin/activate
    pip install git+https://github.com/pulp/pulp-docs
    ```

See also `pulp-docs` [Getting Started](site:pulp-docs/docs/dev/tutorials/getting-started/).

### 2. Make a change

Make your changes using markdown and supported `mkdocs-material` features.
See the [markdown cheat sheet].

Our docs comply with the [Diataxis framework] for organizing content.
Here is a brief summary:

|               | Tutorial                          | How-to Guide                      | Reference                 | Explanation               |
| ---           | ---                               | ---                               | ---                       | ---                       |
| **purpose**   | to provide a learning experience  | to help achieve a particular goal | to describe the machinery | to illuminate a topic     |
| **form**      | a lesson                          | a series of steps                 | dry description           | discursive explanation    |

Also, keep in mind that you are always writing primarily for one of the three types of `persona`:

- User: "I just want to create sync and publish repositories."
- Admin: "I need to get this instance configured and keep it running."
- Developer: "I need to add features, troubleshoot and fix bugs."

When you are done with your changes, you can preview it locally with:

```bash
pulp-docs serve
```

See also `pulp-docs` [Getting Started](site:pulp-docs/docs/dev/tutorials/getting-started/).

### 3. Update the changelog entry

Pulp uses [towncrier] to manage its changelog.

It requires that you have a related GitHub issue number, except for trivial changes (such as typo fixes).
In those cases the entry is not required at all.

The changelog message should use past simple tense and describe the change being made (as opposed to the problem or user story).
Creating an entry can look something like this:

=== "For User-Facing changes"

    ```bash
    # write a message using past simple tense
    echo "Added documentation for new pulpcore-manager command." > CHANGES/3245.doc
    ```

=== "For Plugin API changes"

    ```bash
    # write a message using past simple tense
    echo "Added documentation for new pulpcore plugin api." > CHANGES/plugin_api/3245.doc
    ```

A more comprehensive guide on using towncrier in the Pulp project is documented [here](site:/pulpcore/docs/dev/guides/git/#changelog-update).

### 4. Commit and Submit a PR

Commit messages in Pulp should contain a human readable explanation of what was fixed.
Here are general guidelines:

| Section       | description                                                                                           |
| ---           | ---                                                                                                   |
| Title         | - Should be wrapped at about 50 characters.                                                           |
| Body          | - Should be wrapped at 72 characters.                                                                 |
|               |    - May be broken up into paragraphs.                                                                |
| Footer        | - Should reference a linked issue on the plugin Github Issue tracker. See the [Github Linking Docs].  |

For more on what constitutes a good commit message, we recommend [Tim Pope’s blog post on the subject].
Putting this all together, the following is an example of a good commit message:

```
Update install and quickstart documentation

The install docs and quickstart was leaving out an important step on
the worker configuration.

closes #1392
```

A more comprehensive guide on using git in the Pulp project is documented [here](site:pulpcore/docs/dev/guides/git/).

[Diataxis framework]: https://diataxis.fr/map/
[Github Linking Docs]: https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword
[markdown cheat sheet]: site:/pulp-docs/docs/dev/reference/markdown-cheatsheet
[Tim Pope’s blog post on the subject]: http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html
[towncrier]: https://towncrier.readthedocs.io/en/stable/
`````

## File: pulp-docs/pulpcore/docs/dev/tutorials/quickstart.md
`````markdown
# Contributing with code

## Overview

The purpose of this quickstart is to get yourself familiar with the usual contributing process in Pulp.
It assumes you are familiar with Pulp concepts and architecture.

## Workflow

### 1. Setup a dev environment

We have a dedicated tool to quickly setup a Pulp instance for development called [oci-env](https://github.com/pulp/oci_env).
It is a CLI tool that uses `docker/podman-compose` and [Pulp OCI Images](https://github.com/pulp/pulp-oci-images) and provides some convenient configuration options.

To set it up, follow these steps:

```bash
# 1. clone repos to the same basedir (pulpcore is required)
git clone https://github.com/pulp/oci_env.git
git clone https://github.com/pulp/pulpcore.git
git clone https://github.com/pulp/pulp_rpm.git

# 2. install oci-env client
cd oci_env
pip3 install -e client

# 3. use minimal compose.env
cp compose.env.example compose.env

# 4. build the images and do basic setup
oci-env compose build
oci-env generate-client -i
oci-env generate-client -i pulp_file

# 5. start the service
oci-env compose up 
```

A more comprehensive guide on setting up the dev environment is documented  [here](#).

### 2. Make and test changes

Make the necessary changes and write good tests for them.

Then, run the test suite with:

```bash
# the -i (install) flag is required only for the first run
oci-env test -i -p pulp_rpm functional

# also, you can pass any pytest arguments here 
oci-env test -p pulp_rpm functional -k test_mychages
```

A more comprehensive guide on running tests is documented  [here](#).

### 3. Update the changelog entry

Pulp uses [towncrier](#) to manage its changelog.

It requires that you have a related GitHub issue number, except for trivial changes (such as typo fixes).
In those cases the entry is no required at all. 

The changelog message should use past simple tense and describe the change being made (as opposed to the problem or user story). Creating an entry can look something like this:

=== "For User-Facing changes"

    ```bash
    # create entry file
    touch CHANGES/3245.feature

    # write a message using past simple tense
    echo "Added API that allows users to export a repository version to disk." > CHANGES/3245.feature
    ```

=== "For Plugin API changes"

    ```bash
    # create entry file
    touch CHANGES/plugin_api/3245.bugfix

    # write a message using past simple tense
    echo "Added API that allows users to export a repository version to disk." > CHANGES/plugin_api/3245.feature
    ```

A more comprehensive guide on using towncrier in the Pulp project is documented  [here](#).

### 4. Commit and Submit a PR

Commit messages in Pulp should contain a human readable explanation of what was fixed.
Here are general guidelines:

| extension    | description                                                          |
| ------------ | -------------------------------------------------------------------- |
| Title | - Should be wrapped at about 50 chars
| Body | - Should be wrapped at wrapped at 72 characters
|  |    - May be broken up into paragraphs.
| Footer |  - Should Linked issue on the plugin Github Issue tracker. See the [Github Linking Docs](https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword).

For more on what constitutes a good commit message, we recommend [Tim Pope’s blog post on the subject](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html). Putting this all together, the following is an example of a good commit message:

```
Update install and quickstart

The install docs and quickstart was leaving out an important step on
the worker configuration.

closes #1392
```

A more comprehensive guide on using git in the Pulp project is documented [here](#).
`````

## File: pulp-docs/pulpcore/docs/user/guides/alternate-content-sources.md
`````markdown
# Alternate Content Sources (ACS)

Alternate Content Sources (ACS) in Pulp allow you to specify additional locations where content can be fetched. The primary purpose of using ACS is to fetch binary content from a location that is **latency or bandwidth closer** to your Pulp system than the original remote sources you are syncing from.

### How ACS Works

When you want to use multiple mirror source servers as alternate locations for content, you do not define multiple URLs directly within a single ACS object. Instead, you will need to:

1.  Create a **Remote** object.
2.  Create a separate **Alternate Content Source object**.

For each hostname or server you want to use as an alternate source, create a remote and associated Alternate Content Source object.

The ACS object creation process does not accept full URLs, it only exposes the capability of specifying 'paths'. This 'paths' part is a convenience feature. It is **optional**. It is primarily used in situations where the remote server has multiple repositories available at different paths, and you wish to reference these paths without defining a separate ACS object for each path.

### Content Preference

Content provided by an Alternate Content Source is considered **preferred** over any content provided by a non-ACS source for any sync operation or on-demand download. This preference for ACS applies whenever Pulp needs to fetch binary data remotely.

If the same content is available from multiple configured ACS sources, Pulp will **randomly select** one of these sources to fetch the content from.

The preference for Alternate Content Sources is active **within the domain** they are created in. They will be preferred for syncs or on-demand fetching operations occurring within that specific domain, but they will be ignored for operations in other domains.

### Refreshing ACS

An Alternate Content Source object has a "refresh" operation, which needs to be done prior to being used. This operation performs a sync which indexes the remote source that is referred to by its associated Remote object. The **refresh operation does not actually sync any binary data**. The binary data itself is not known by Pulp and is only brought into the Pulp system **as needed** during other sync operations or when content is downloaded on-demand within that domain.

### Common Use Cases

Some common situations where Alternate Content Sources are useful include:

*   Having a local disk mounted on your Pulp server that contains RPM repositories.
*   Rebuilding one Pulp server from another, where one acts as a source for content.
`````

## File: pulp-docs/pulpcore/docs/user/guides/checkpoint.md
`````markdown
# Create and Distribute Checkpoints

!!! warning
    This feature requires plugin support to work correctly.

!!! warning
    This feature is provided as a tech preview and could change in backwards incompatible
    ways in the future.

## Overview

Checkpoints in Pulp provide a way to access and manage historical versions of repositories. This
feature allows users to view and install packages as they existed at specific points in time. By
using checkpoints, you can recreate environments from any given date/time, which is particularly
useful for tracking down when changes or regressions were introduced.

Checkpoints support reproducible deployments, help identify changes in package behavior over time,
and facilitate a structured update workflow. This ensures that a validated environment can be
consistently replicated across different stages of development and production.

For a similar concept, you can refer to [Debian's snapshot archive](https://snapshot.debian.org/),
which offers access to old snapshots of the repositories based on timestamps.

## Enabling Checkpoints

Checkpoint is a plugin-dependent feature. It needs to be enabled in a plugin before you can start
using it.

## Creating Checkpoints

The first step to start using checkpoint, is to create a checkpoint distribution which will be used
to distribute checkpoint publications. A checkpoint distribution serves all the checkpoint
publications of the related repository.

```bash
pulp file distribution create \
    --name <distro_name> \
    --repository <repo_name> \
    --base-path <distro_base_path> \
    --checkpoint
```

The next step is to create checkpoint publications. Only publications marked as checkpoint will be
served from the checkpoint distribution. When creating checkpoint publications, you can only pass
the repository, not any of its versions. The repository's latest version will be used to create the publication. Repository versions of the distributed checkpoint publications will be protected from
the automatic cleanup defined by `retain_repo_versions`.

```bash
pulp file publication create \
    --repository <repo_name> \
    --checkpoint
```

## Accessing Checkpoints

### Listing All Checkpoints
You can access a listing of all the available repository's checkpoint publications by accessing the
base path of any of the repository's checkpoint distributions. 

```bash
http https://pulp.example/pulp/content/checkpoint/myfile
```

```html
<html>
<head><title>Index of checkpoint/myfile/</title></head>
<body bgcolor="white">
<h1>Index of checkpoint/myfile/</h1>
<hr><pre><a href="../">../</a>
<a href="20250130T203000Z/">20250130T203000Z/</a>                                  30-Jan-2025 20:30
<a href="20250130T205000Z/">20250130T205000Z/</a>                                  30-Jan-2025 20:50
</pre><hr></body>
</html>
```

### Accessing a Specific Checkpoint
To access a specific checkpoint, suffix the checkpoint distribution's path with a timestamp in the format
`yyyyMMddTHHmmssZ` (e.g. 20250130T205339Z), If a checkpoint was created at this time, it will be
served. Otherwise, you will be redirected to the latest checkpoint created before this timestamp.
Trying to access a checkpoint using a timestamp in the future or before the first checkpoint's
timestamp, will result in a 404 response.

Assuming the checkpoints from the above example, the below table show responses for sample requests
<table>
  <tr>
    <th>Request path</th>
    <th>Response</th>
  </tr>
  <tr>
    <td>checkpoint/myfile/20250130T203000Z/</td>
    <td>200</td>
  </tr>
  <tr>
    <td>checkpoint/myfile/20250130T204000Z/</td>
    <td>
    301 <br>
    Location: checkpoint/myfile/20250130T203000Z/
    </td>
  </tr>
  <tr>
    <td>checkpoint/myfile/20250130T206000Z/</td>
    <td>
    301 <br>
    Location: checkpoint/myfile/20250130T205000Z/
    </td>
  </tr>
  <tr>
    <td>checkpoint/myfile/20250130T202000Z/</td>
    <td>
    404
    </td>
  </tr>
  <tr>
    <td>checkpoint/myfile/29250130T203000Z/</td>
    <td>
    404
    </td>
  </tr>
</table>
`````

## File: pulp-docs/pulpcore/docs/user/guides/correlation-id.md
`````markdown
# Correlation ID

Pulp provides support for correlation ids that are helpful to correlate requests to log messages and
tasks. Correlation IDs are autogenerated by default but can also be set via pulp-cli or sent as a
header with each request. Correlation ids are also returned as a header in the response and are
recorded in the `logging_cid` field of tasks.

To view the correlation id for an API request, see the `Correlation-ID` header in the response:

```
$ http POST ${SERVER_ADDR}${REPO_HREF}sync/
...
Correlation-ID: 47ebc1b6a77642e2b9eca645d3277aa5
...
```

All log messages in Pulp that are correlated with the request will be prepended with the correlation
id:

```
pulp [47ebc1b6a77642e2b9eca645d3277aa5]: 127.0.0.1 - admin [31/Jan/2025:20:09:34 +0000] "POST /pulp/api/v3/repositories/file/file/0194b8e9-5425-799b-ad0a-86c71e160158/sync/ HTTP/1.1" 202 67 "-" "HTTPie/3.2.1"
pulp [47ebc1b6a77642e2b9eca645d3277aa5]: pulpcore.tasking.tasks:INFO: Starting task 0194bdfb-aa1e-72fb-b3bd-8e6e3f36dedb in domain: default
pulp [47ebc1b6a77642e2b9eca645d3277aa5]: pulpcore.tasking.tasks:INFO: Task completed 0194bdfb-aa1e-72fb-b3bd-8e6e3f36dedb in domain: default
```

Any task that was executed will also have the correlation id set on its `logging_cid` field:

```
$ pulp task list --cid 47ebc1b6a77642e2b9eca645d3277aa5
...
    "logging_cid": "47ebc1b6a77642e2b9eca645d3277aa5",
...
```

## Setting correlation id

It's possible to set the correlation id using the pulp-cli:

```bash
$ pulp --cid 1646c5896b48414698a260374dcb6849 file repository sync --name myfilerepo
```

Or when sending a request directly to Pulp:

```
$ http ${SERVER_ADDR}${REPO_HREF}sync/ Correlation-ID:1646c5896b48414698a260374dcb6849
...
Correlation-ID: 1646c5896b48414698a260374dcb6849
```

By default Pulp expects a 32 character UUID to be sent via a "Correlation-ID" header. However,
support for correlation id is highly customizable in terms of what headers Pulp uses and what
formats it accepts. For information how to customize correlation id header name and format, see [the
settings documentation](site:pulpcore/docs/admin/reference/settings/#django_guid).
`````

## File: pulp-docs/pulpcore/docs/user/guides/create-client-bindings.md
`````markdown
# Create client bindings

!!! warning "Update Docs"
    This should be targeted at creating bindings, as we don't intend to keep maintaining the bindings as packages.

## Python Client for pulpcore's REST API

The `pulpcore-client` Python package is available on [PyPI](https://pypi.org/project/pulpcore-client/). It is currently published daily and with every RC.
Each plugin is responsible for publishing it's own client to PyPI. The client libraries for plugins
should follow the\`\`pulp\_\<slug>-client\`\` naming scheme.

## Ruby Client for pulpcore's REST API

`pulpcore_client` Ruby Gem is available on
[rubygems.org](https://rubygems.org/gems/pulpcore_client). It is currently published daily and
with every RC. Each plugin is responsible for publishing it's own client to Rubygems.org. The
client libraries for plugins should follow the\`\`pulp\_\<slug>\_client\`\` naming scheme.

## Other Languages

A client can be generated using Pulp's OpenAPI schema and any of the available
[generators](https://openapi-generator.tech/docs/generators/).

Generating a client is a two step process:

**1) Download the OpenAPI schema for pulpcore:**

```bash
curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json?bindings&component=core
```

The OpenAPI schema for a specific plugin can be downloaded by specifying the plugin's module name
as a GET parameter. For example for pulp_rpm only endpoints use a query like this:

```bash
curl -o api.json http://<pulp-hostname>:24817/pulp/api/v3/docs/api.json?bindings&component=rpm
```

**2) Generate a client using openapi-generator.**

The schema can then be used as input to the openapi-generator-cli. The documentation on getting
started with openapi-generator-cli is available on
[openapi-generator.tech](https://openapi-generator.tech/#try).
`````

## File: pulp-docs/pulpcore/docs/user/guides/create-domains.md
`````markdown
# Enable and create Domains

!!! warning
    This feature requires plugin support to work correctly.

!!! warning
    This feature is provided as a tech preview and could change in backwards incompatible
    ways in the future.

## Overview

Domains are an optional feature that enables true multi-tenancy in Pulp. Enabling domains allows
multiple tenants to use the same Pulp instance in a safe and isolated manner without worry that
other users can modify or interfere with your workflows. Each domain acts as a unique namespace for
that user and their Pulp objects, completely isolated from the other domains. To this end each
domain can be customized to use their own storage backend to store their artifacts and content,
ensuring each user has complete control over the content they manage in Pulp.

Domains are meant for Pulp admins that need more multi-tenancy abilities than are provided through
current RBAC features. Domains help greatly when multiple, but distinctly separate tenants are
sharing the same Pulp instance without having to resort to creating multiple Pulp instances. See
`RBAC Overview` for Pulp's RBAC capabilities if you are unsure what Pulp's RBAC can
currently do.

## Enabling Domains

Domains are off by default and can be enabled by setting `DOMAIN_ENABLED = True` in your settings
file and restarting Pulp. In order to enable domains, each plugin needs to be domain compatible. If
a plugin is not compatible Pulp will fail to start. See list below for current list of plugins with
domain compatibility. Once domains are enabled all current objects in Pulp will be found under the
`default` domain.

Current Domain Compatible Plugins:

- pulp_file>=1.13.0
- pulp_certguard>=1.6.0

!!! warning
    Before turning on domains, you should let all currently running tasks finished.

## Creating Domains

Domains have three important fields: a unique `name`, the backend `storage class` and the
`storage settings` for the storage backend. See `Storage` documentation to see
available storage backends and settings. The domain name must be unique and is used in the URL path
after the `API_ROOT<api-root>`, e.g. `/pulp/<domain_name>/api/v3/`. You can also customize
the content app behavior for your domain through the fields `redirect_to_object_storage` and
`hide_guarded_distributions`. See `settings` for more details on these settings.

```bash
pulp domain create \
  --name <domain_name> \
  --storage-class <storage_class> \
  --storage-settings <storage_settings>
```

Specific examples for different storage backends:

=== "FileSystem"
    ```bash
    pulp domain create \
      --name foo \
      --description foo \
      --storage-class pulpcore.app.models.storage.FileSystem \
      --storage-settings "{\"MEDIA_ROOT\": \"/var/lib/pulp/media/\"}"
    ```

=== "S3"
    ```bash
    pulp domain create \
      --name mydomain \
      --storage-class storages.backends.s3boto3.S3Boto3Storage \
      --storage-settings "{\"access_key\": \"AcVDppUlVkA6\", \"secret_key\": \"SFviCmMfRT6N\", \"bucket_name\": \"my-unique-bucket-name\", \"region_name\": \"us-east-1\", \"default_acl\": \"private\"}"
    ```

!!! note
    `default`, `content`, and `api` are reserved names that can not be used during creation
    or update. The `default` domain can not be updated or deleted.


!!! note
    To delete a domain all objects within that domain must be deleted first, including artifacts and
    orphaned content.


!!! note
    The AWS access key must be authorized to perform the `s3:ListBucket` and `s3:PutObject`
    operations.


!!! warning
    Changing the `storage-class` or `storage-settings` of an in-use domain is
    dangerous and can result in a broken domain.

## Using Domains

Once domains are enabled all URLs in Pulp will require the domain name in the path after the
`API_ROOT<api-root>` for the Pulp API, e.g. `/pulp/<domain_name>/api/v3/`, or after the
`CONTENT_PATH_PREFIX<content-path-prefix>` for the Content App, e.g.
`/pulp/content/<domain_name>/`. Objects present in Pulp before enabling domains will now be
present under the `default` domain. To work in a domain you must specify the domain's name in the
URL.

```bash
# List repositories in 'test' domain
pulp --domain test repository list

# Create a File Repository 'foo' in 'foo' domain
pulp --domain foo file repository create --name foo

# Create a File Repository 'foo' in 'boo' domain (Possible because of separate domains)
pulp --domain boo file repository create --name foo

# See Exposed Distributions in 'default' domain
pulp distribution list
```

Domains are isolated from each other and perform their own deduplication and uniqueness checks
within their domain. Therefore multiple domains can each have their own repository named 'foo'; a
capability not available without domains as repository names were unique within a Pulp system, but
are now unique within a domain. This also means that content and artifact deduplication is no longer
system wide, but instead perform at the domain level. Since domains can each have their own unique
storage backend, duplicate content across domains could be stored in multiple locations and it would
be inappropriate to try to deduplicate across domains.

Most all Pulp objects and operations work the same within their domain. Uploading, syncing,
publishing, and distributing workflows are all supported with domains. Objects are scoped to their
domain and will not appear in other domains even if you have permissions on those domains. Plugins
that support RBAC will now also have access to a new permission level on the domain. Assigning a
role at the domain-level will allow users to operate with those permissions only within that domain.
Current global(model)-level roles should be converted to domain-level if you wish for the user to
not have permission across all domains.

```bash
# Delete the global-level role
pulp user role-assignment remove --username <username> --role <role_name> --object ""

# Assign the role at the domain-level
pulp user role-assignment add --username <username> --role <role_name> --domain <domain_href>
```

!!! note
    Operations on resources across separate domains is not allowed. e.g. You can not add content
    from one domain to the repository of another domain even if you own both domains.


!!! warning
    Pulp Export and Import are currently not supported with domains enabled.


There are notable objects in Pulp, `AccessPolicies`, `Roles`, `Users`, and `Groups`, that
are not a part of domains and remain global across the system. These objects are closely intertwined
with the RBAC system and currently do not make sense to be unique on the domain level. Objects
that are not a part of a domain are readable from any domain (with the correct permissions), but are
only operable on within the `default` domain, i.e. `Roles` can be read from any domain, but can
only be created from the `default` domain.
`````

## File: pulp-docs/pulpcore/docs/user/guides/manage-labels.md
`````markdown
# Manage Labels

Pulp provides a way to add key/value data to many resources (e.g. repositories, remotes,
distributions) in the form of labels. Labels are also useful for categorizing and filtering
resources. In the API, labels appear as a dictionary field that maps keys (strings) to values (also
strings).

## Creating labels

To create labels:

```bash
# create a new repository
pulp file repository create --name myrepo

# set some labels
pulp file repository label set --name myrepo --key environment --value production
pulp file repository label set --name myrepo --key reviewed --value true

# call show to view the repo's labels
pulp file repository show --name myrepo
```

On show, you should see the new labels that have been created:

```json
{
  "pulp_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/",
  "pulp_created": "2021-01-29T17:54:17.084105Z",
  "versions_href":
  "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/",
  "pulp_labels": {
    "environment": "production",
    "reviewed": "true"
  },
  "latest_version_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/0/",
  "name": "myrepo",
  "description": null,
  "remote": null
}
```

## Updating labels

To update an existing label, call set again:

```bash
# update the label
pulp file repository label set --name myrepo --key reviewed --value false

# call show to view the repo's labels
pulp file repository show --name myrepo
```

On show, you should now see:

```json
{
  "pulp_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/",
  "pulp_created": "2021-01-29T17:54:17.084105Z",
  "versions_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/",
  "pulp_labels": {
    "environment": "production",
    "reviewed": "false"
  },
  "latest_version_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/0/",
  "name": "myrepo",
  "description": null,
  "remote": null
}
```

## Unsetting labels

To remove a label from a resource, call the unset command:

```bash
# update the label
pulp file repository label unset --name myrepo --key reviewed

# call show to view the repo's labels
pulp file repository show --name myrepo
```

On show, you should now see:

```json
{
  "pulp_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/",
  "pulp_created": "2021-01-29T17:54:17.084105Z",
  "versions_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/",
  "pulp_labels": {
    "environment": "production"
  },
  "latest_version_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/0/",
  "name": "myrepo",
  "description": null,
  "remote": null
}
```

## Filtering

Pulp provides a `pulp_label_select` field for filtering resources by label. The value for this
field must be url-encoded. The following operations are supported:

- `environment=production` - label has key 'environment' with value 'production'
- `environment!=production` - label has key 'environment' without value 'production'
- `environment~prod` - label has key 'environment' with value that contains 'prod' (case insensitive)
- `enviroment` - label has key of environment
- `!environment` - label without a key of environment

Multiple terms can be combined with `,`:

- `environment=production,reviewed=true` - returns resources with labels where environment is
  production and reviewed is true
- `environment,reviewed=false` - returns resources with an environment label and where reviewed is
  false

To filter using the CLI use `--label-select`:

```bash
pulp file repository list --label-select="environment~prod,reviewed"
```

This would return a list of repositories such as:

```json
{
  "pulp_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/",
  "pulp_created": "2021-01-29T17:54:17.084105Z",
  "versions_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/",
  "pulp_labels": {
    "environment": "production",
    "reviewed": "true"
  },
  "latest_version_href": "/pulp/api/v3/repositories/file/file/13477a92-b811-4436-a76a-d2469a17a62e/versions/0/",
  "name": "myrepo",
  "description": null,
  "remote": null
}
```
## Labeling content

All of the above also applies to Content entities - with a few extra caveats.

Unlike the entities described above (Repository, Remote, and Distribution), in Pulp all Content is a shared resource. 
That is, a given Content entity with a specific key/digest/sha256 exists in Pulp **once**, and will be shared between 
any Repositories to which it is assigned. This means that User-A who has access to Repository-1 could label a piece of 
"their" Content, and User-B would see those labels in "their" Content in Repository-B.

As a result of this sharing, Pulp only allows setting `pulp_labels` on Content to users who have been given the
specific RBAC Role of `core.content_labeler`. By default, no User has this role, so only the Pulp admin can label
Content. If you wish a user to be allowed to do so, you need to assign that Role to them:

```bash
pulp user role-assignment add \
  --username USERNAME \
  --role core.content_labeler 
  --domain default
```
`````

## File: pulp-docs/pulpcore/docs/user/guides/protect-content.md
`````markdown
# Protect Content

Pulp provides a way to protect content from being accessed by unauthorized users. This is done by
associating a `ContentGuard` with a distribution.

When a `ContentGuard` is associated with a distribution, Pulp will check that the user has the
correct permissions to access the content. If the setting `HIDE_GUARDED_DISTRIBUTIONS` is set to
`True`, then distributions guarded by a `ContentGuard` will not be shown in the directory listing
in the content app.

## Available Content Guards

Pulp offers several content guard types to protect your distributions:

### RBAC Content Guard

The RBAC (Role-Based Access Control) content guard protects distributions using Pulp's built-in authentication and authorization system. Users must authenticate using their Pulp credentials and have appropriate permissions to access protected content.

To set up an RBAC content guard:

1. Create the content guard:

    ```bash
    pulp content-guard rbac create --name rbac
    ```

2. Assign permissions to users and/or groups:

    ```bash
    pulp content-guard rbac assign --name rbac --user alice --user bob --group file-buddies
    ```

3. Associate the content guard with a distribution:

    ```bash
    pulp file distribution update --name foo --content-guard rbac
    ```

By default, users/groups need the `core.download_rbaccontenguard` permission to access protected content.

### X509 Certificate Guard

The X509 certificate guard (from pulp-certguard) protects distributions using x509 client certificates. Users must present a valid certificate to access protected content. Follow the [pulp-certguard quickstart guide](site:pulp_certguard/docs/user/tutorials/quickstart/) to configure this guard.

### RHSM Certificate Guard

The RHSM certificate guard (from pulp-certguard) validates certificates created using python-rhsm.
!!! warning

    This guard is currently not recommended as python-rhsm has not been updated recently.

### Header Content Guard 

The header content guard checks for specific HTTP headers in incoming requests. This guard is primarily useful in custom setups where a reverse proxy adds authentication/authorization headers before forwarding requests to Pulp.

```bash
# Create a header content guard that only accepts requests with the X-Pulp-User header set to alice
pulp content-guard header create --name header --header-name X-Pulp-User --header-value alice

# Use a JQ filter to extract the value to check against from the header
pulp content-guard header create --name header --header-name X-Auth-Service --header-value true --jq-filter '.authenticated'
```

### Composite Content Guard

The composite content guard combines multiple guards using OR logic - if any of the configured guards allows access, the request is permitted. This enables flexible authentication schemes, like allowing access via either certificates OR RBAC authentication.

```bash
# Use different types of content guards, e.g. RBAC and X509
pulp content-guard composite create --name composite --guard rbac --guard x509
```

### Redirect Content Guard

The redirect content guard validates pre-signed URLs generated by Pulp. This guard is primarily used internally by certain plugins (like pulp-container) and is not intended for direct configuration by users.
`````

## File: pulp-docs/pulpcore/docs/user/guides/reclaim-disk-space.md
`````markdown
# Reclaim disk space

Pulp provides the ability to reclaim disk space for:

- content that one no longer needs to serve but would like to keep in the repo for historical reasons.
- repos that were synced with the on_demand download policy and one would want to clear out
  downloaded files for those repos.

!!! Note
    Usually, a repository that was synced with the on_demand download policy will store artifacts locally after they have been requested by the client, but there really isn't a way to have pulp delete the locally stored files and free disk space if these packages are unlikely to be used again.

To start a reclaim task send a POST request to `/pulp/api/v3/repositories/reclaim_space/`.

=== "run"
    ```bash
    RECLAIM_TASK=$(http POST :24817/pulp/api/v3/repositories/reclaim_space/ repo_hrefs:=[\"/pulp/api/v3/repositories/rpm/rpm/b3a6674d-181c-4e72-9412-7cbc747480ad/\"] | qq -r '.task')
    http --body :24817$RECLAIM_TASK
    ```

=== "output"
    ```json
    {
        "child_tasks": [],
        "created_resources": [],
        "error": null,
        "finished_at": "2021-07-16T15:36:20.650573Z",
        "logging_cid": "50d1721d205c40f69defb773e32a98ff",
        "name": "pulpcore.app.tasks.reclaim_space.reclaim_space",
        "parent_task": null,
        "progress_reports": [
           {
                "code": "reclaim-space.artifact",
                "done": 35,
                "message": "Reclaim disk space",
                "state": "completed",
                "suffix": null,
                "total": 35
            }
        ],
        "pulp_created": "2021-07-16T15:36:20.306845Z",
        "pulp_href": "/pulp/api/v3/tasks/20ee50bd-9392-4ebf-8f1d-d2f15474ebd6/",
        "reserved_resources_record": [
            "/pulp/api/v3/repositories/rpm/rpm/b3a6674d-181c-4e72-9412-7cbc747480ad/"
        ],
        "started_at": "2021-07-16T15:36:20.370245Z",
        "state": "completed",
        "task_group": null,
        "worker": "/pulp/api/v3/workers/ccc132c4-0445-4f55-b370-32c3662dce3c/"
     }
    ```

As a result of this request, disk space will be freed-up for artifacts that are exclusive to the
list of provided repos. The content of the repository versions will not change and no repository
versions will be created or removed.

An optional `repo_versions_keeplist` parameter can be specified, that will contain list of repo
version hrefs which will be excluded from the artifact removal.

The task will remove artifacts only from content that was synced from a remote source. It will not
touch the content that was uploaded directly into Pulp.

!!! note
    The task will clean up artifacts regardless of the download policy. The content app will be able
    to stream artifact if it is locally available, otherwise it will attempt to redownload it from
    the known upstream urls. In case upstream stopped serving the corresponding file, Pulp won't be
    able to download and serve it.
`````

## File: pulp-docs/pulpcore/docs/user/guides/repair-pulp.md
`````markdown
# Repair Pulp

Pulp provides some features for self-repair in cases where artifacts in the storage went missing or
got corrupted in some way (i.e. bit rot).

!!! warning
    This repair feature looks for missing or corrupted files that are supposed to be in
    the storage. It attempts a redownload of these files from known upstream urls.
    In case upstream stopped serving the corresponding files, or these files were uploaded
    directly into Pulp or were created by Pulp itself (i.e. generated metadata), the Pulp
    repair feature is unable to remedy the situation.


To start a repair task for all of Pulp (i.e. checks all content), send a POST request to
`/pulp/api/v3/repair/`.

=== "run"
    ```bash
    $ REPAIR_TASK=$(http POST :24817/pulp/api/v3/repair/ | jq -r '.task')
    $ http --body :24817$REPAIR_TASK
    ```
=== "output"
    ```json
    {
        "child_tasks": [],
        "created_resources": [],
        "error": null,
        "finished_at": "2020-04-07T08:36:52.373633Z",
        "name": "pulpcore.app.tasks.repository.repair_all_artifacts",
        "parent_task": null,
        "progress_reports": [
            {
                "code": "repair.repaired",
                "done": 2,
                "message": "Repair corrupted units",
                "state": "completed",
                "suffix": null,
                "total": null
            },
            {
                "code": "repair.corrupted",
                "done": 2,
                "message": "Identify corrupted units",
                "state": "completed",
                "suffix": null,
                "total": null
            }
        ],
        "pulp_created": "2020-04-07T08:36:52.274985Z",
        "pulp_href": "/pulp/api/v3/tasks/530302b4-8674-4db3-8a13-99febef80830/",
        "reserved_resources_record": [],
        "started_at": "2020-04-07T08:36:52.348381Z",
        "state": "completed",
        "task_group": null,
        "worker": "/pulp/api/v3/workers/f2fe2811-74a1-463f-93d2-53c7b302115c/"
    }
    ```

To start a repair task on a specific repository version, send a POST request to its `repair`
endpoint:

=== "run"
    ```bash
    $ REPAIR_TASK=$(http POST :24817${REPOSITORY_VERSION}repair/ | jq -r '.task')
    $ http --body :24817$REPAIR_TASK
    ```
=== "output"
    ```json
    {
        "child_tasks": [],
        "created_resources": [],
        "error": null,
        "finished_at": "2020-04-07T08:36:52.373633Z",
        "name": "pulpcore.app.tasks.repository.repair_version",
        "parent_task": null,
        "progress_reports": [
            {
                "code": "repair.repaired",
                "done": 2,
                "message": "Repair corrupted units",
                "state": "completed",
                "suffix": null,
                "total": null
            },
            {
                "code": "repair.corrupted",
                "done": 2,
                "message": "Identify corrupted units",
                "state": "completed",
                "suffix": null,
                "total": null
            }
        ],
        "pulp_created": "2020-04-07T08:36:52.274985Z",
        "pulp_href": "/pulp/api/v3/tasks/530302b4-8674-4db3-8a13-99febef80830/",
        "reserved_resources_record": [
            "/pulp/api/v3/repositories/file/file/47a3f651-aaa6-4026-b649-130c45ab38ea/"
        ],
        "started_at": "2020-04-07T08:36:52.348381Z",
        "state": "completed",
        "task_group": null,
        "worker": "/pulp/api/v3/workers/f2fe2811-74a1-463f-93d2-53c7b302115c/"
    }
    ```

The result of this task can be read in the `progress_report` section.
If the number of `done` differs between the reports, pulp was unable to repair all artifacts.

For both endpoints, there is a POST parameter named `verify_checksums`, which defaults to
True. Specifying False when calling one of the repair endpoints will skip the checksum
verification and only check for files which are missing, which is substantially faster and
less resource intensive. However, this won't detect corrupted files.
`````

## File: pulp-docs/pulpcore/docs/user/guides/troubleshoot-tasks.md
`````markdown
# Troubleshoot tasks

## Debugging Tasks

In case your system gets stuck in the processing of pulp tasks, you might want to debug the tasking system.

Please always consider that your system might be in the process of dealing with long running tasks, and other tasks are rightfully waiting on their completion.

## Query tasks with the CLI

How many tasks are waiting?

```bash
pulp task list --state=waiting | jq 'length'
```

Is anybody running?

```bash
pulp task list --state=running | jq 'length'
```

How many have failed?

```bash
pulp task list --state=failed | jq 'length'
```

Retrieve the HREF's of running tasks:

```bash
pulp task list --state=running | jq 'map({.name, .pulp_href})'
# Save the HREF of the 3rd (counting starts at zero)
TASK_HREF=$(pulp task list --state=running | jq -r 'map(.pulp_href)[3]')
```

Show the state of a particular task:

```bash
pulp task show --href "$TASK_HREF"
```

Cancel a running task:

```bash
# warning canceling tasks may break higher level workflows
pulp task cancel --href "$TASK_HREF"
```

## Tracing workloads

To help users better trace workloads in Pulp, Pulp provides [support for correlation
ids](site:pulpcore/docs/user/guides/correlation-id/).
`````

## File: pulp-docs/pulpcore/docs/user/guides/update-repo-retention.md
`````markdown
# Update Repository Version Retention

Repositories in Pulp 3 are versioned and anytime a change is made to the content of Repository, a
new version is created. These RepositoryVersions are immutable: they can only be created and
deleted, not updated or changed.

## Version Retention

By default,`retain_repo_versions` is null which means that Pulp will store all versions of a
Repository. This behavior can be changed by setting the retain_repo_versions field on the
Repository. A Repository must have at least one RepositoryVersion so `retain_repo_versions` must be
greater than or equal to 1.

Setting retain_repo_versions to 1 effectively disables repository versioning since Pulp will only
store the latest version.

Cleanup will ignore any repo versions that are being served directly via a distribution or via a
publication. This includes repo versions of distributed checkpoint publications.

To update this field for a file Repository called myrepo, simply call:

```
pulp file repository update --name myrepo --retained-versions 1
```

Note that updating this field will automatically update the versions for the Repository so setting
the number to a smaller value will cause Pulp to delete any versions that exceed the number of
retained versions.
`````

## File: pulp-docs/pulpcore/docs/user/guides/upload-publish.md
`````markdown
# Upload and Publish Content

## Uploading Content

Content can be uploaded by POSTing the file to `/pulp/api/v3/content/<plugin_name>/<content_type>/`.
Some plugins can create the content unit completely from that file, but others require some
additional attributes to be specified with the upload. See your plugin documentation for more info
on upload features of your plugin.

File data can be uploaded in parallel, and then the call to
`/pulp/api/v3/content/<plugin_name>/<content_type>/` can reference the already existing Artifact to create
the content from.

## Associating with a Repository on Upload

You can automatically associate newly uploaded content with a Repository when using the
`/pulp/api/v3/content/<plugin_name>/<content_type>/` API by passing the `repository reference`.

## Chunked Uploads

For large file uploads, Pulp provides an [Uploads API](site:pulpcore/restapi/#tag/Uploads). To begin
uploading a file in chunks, an initial POST request must be sent to the `/pulp/api/v3/uploads`
endpoint with the total size of the file:

```
http POST :24817/pulp/api/v3/uploads/ size=10485760
```

This returns an upload href (e.g. `/pulp/api/v3/uploads/a8b5a7f7-2f22-460d-ab20-d5616cb71cdd/`) that can
be used for chunks. Chunks can be uploaded in any order or in parallel:

```
http --form PUT :24817/pulp/api/v3/uploads/a8b5a7f7-2f22-460d-ab20-d5616cb71cdd/ file@./chunk2 'Content-Range:bytes 6291456-10485759/*'
http --form PUT :24817/pulp/api/v3/uploads/a8b5a7f7-2f22-460d-ab20-d5616cb71cdd/ file@./chunk1 'Content-Range:bytes 0-6291455/*'
```

Note: You can send an optional sha256 argument:

```
http --form PUT :24817/pulp/api/v3/uploads/a8b5a7f7-2f22-460d-ab20-d5616cb71cdd/ file@./chunk1 'Content-Range:bytes 0-6291455/*' sha256=7ffc86295de63e96006ce5ab379050628aa5d51f816267946c71906594e13870
```

Once all chunks have been uploaded, a final POST request with the file sha256 can be sent to
complete the upload:

```
http POST :24817/pulp/api/v3/uploads/a8b5a7f7-2f22-460d-ab20-d5616cb71cdd/commit sha256=abc123...
```

This queues a task that creates an artifact, and the upload gets deleted and cannot be re-used.

Putting this altogether, here is an example that uploads a 1.iso file in two chunks:

```
curl -O https://fixtures.pulpproject.org/file-large/1.iso
split --bytes=6M 1.iso chunk
export UPLOAD=$(http POST :24817/pulp/api/v3/uploads/ size=`ls -l 1.iso | cut -d ' ' -f5` | jq -r '.pulp_href')
http --form PUT :24817$UPLOAD file@./chunkab 'Content-Range:bytes 6291456-10485759/*'
http --form PUT :24817$UPLOAD file@./chunkaa 'Content-Range:bytes 0-6291455/*'
http POST :24817${UPLOAD}commit/ sha256=`sha256sum 1.iso | cut -d ' ' -f1`
```

!!! note
    Each uploaded chunk is stored as a separate file in the default storage.
    When an upload is committed, uploaded chunks are removed automatically and a new artifact is created, as usually.
`````

## File: pulp-docs/pulpcore/docs/user/guides/use-complex-filters.md
`````markdown
# Use Complex Filtering

In addition to the usual querystring filters, Pulp provides a special `q` filter, that allows you
to combine other filters with `NOT`, `AND` and `OR` operations.

In order to prevent arbitrarily complex queries, the maximum complexity of the expressions
explained below is limited to 8. See the examples below for how complexity is calculated.

For a given list endpoint, all the other existing (non ordering) filters can be used in these
expressions.

The grammar, given sufficient whitespace to tokenize, is basically:

```bash
EXPRESSION = FILTER_EXPR | NOT_EXPR | AND_EXPR | OR_EXPR | "(" EXPRESSION ")"
NOT_EXPR = "NOT" EXPRESSION
AND_EXPRESSION = EXPRESSION "AND" EXPRESSION
OR_EXPRESSION = EXPRESSION "OR" EXPRESSION
FILTER_EXPRESSION = FILTERNAME "=" STRING
STRING = SIMPLE_STRING | QUOTED_STRING
```

Some example `q` expressions and their complexity are:

```bash
pulp_type__in='core.rbac'
# complexity: 1 = 1 (filter expression)

NOT pulp_type="core.rbac"
# complexity: 2 = 1 (NOT) + 1 (filter expression)

pulp_type__in=core.rbac,core.content_redirect
# complexity: 1 = 1 (filter expression)

pulp_type="core.rbac" OR pulp_type="core.content_redirect"
pulp_type="core.rbac" AND name__contains=GGGG
pulp_type="core.rbac" AND name__iexact=gGgG
pulp_type="core.rbac" AND name__contains="naïve"
# complexity: 3 = 1 (AND/OR) + 2 (filter expression)

pulp_type="core.rbac" AND name__icontains=gg AND NOT name__contains=HH
# complexity: 5 = 1 (AND/OR) + 1 (NOT) + 3 (filter expression)

NOT (pulp_type="core.rbac" AND name__icontains=gGgG)
pulp_type="core.rbac" AND NOT name__contains="naïve"
# complexity: 4 = 1 (AND/OR) + 1 (NOT) + 2 (filter expression)

pulp_type="core.rbac" AND(   name__icontains=gh OR name__contains="naïve")
# complexity: 5 = 2 (AND/OR) + 3 (filter expression)

pulp_type="core.rbac" OR name__icontains=gh OR name__contains="naïve"
# complexity: 4 = 1 (AND/OR) + 3 (filter expression)
```

### Examples

For instance, use the following filter to list sync tasks that did not fail:

```bash
http http://localhost:5001/pulp/api/v3/tasks/?q='name__contains=sync AND (NOT state="failed" OR state="completed")'
```

To filter RPM packages by a set of `build_id` labels use the following:

```bash
http http://localhost:5001/api/pulp/default/api/v3/content/rpm/packages/?q='pulp_label_select="build_id=6789" OR pulp_label_select="build_id=123"'
```
`````

## File: pulp-docs/pulpcore/docs/user/learn/concepts.md
`````markdown
# Concepts and Terminology

This introduction is designed for anyone who is familiar with software management even without prior
knowledge of Pulp.

From a user’s perspective, Pulp is a tool to manage content. In this context, *Pulp* refers to
pulpcore and one or more content plugins.

## What is pulpcore?

Throughout Pulp documentation, when you see references to *pulpcore*, this term refers to the main
python program that provides a platform to which you add content plugins for the types of content
that you want to manage. In a very general sense, Pulpcore refers to Pulp and its functionality
without any plugins. Pulpcore provides a REST API and a Plugin API.

## Content Management with plugins

To manage content, you need at least one content plugin. Each type of content unit, for example RPM
or Debian, is defined by a plugin. For example, if you want to manage RPM content in Pulp, you must
install the RPM plugin. Files that belong to a content unit are called
`Artifacts`. Each content unit can have zero or many artifacts. Artifacts can be
shared by multiple content units.

<figure markdown="span">
  ![Concept Content](site:pulpcore/docs/assets/images/concept-content.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

## Content repositories and versioning

Content units in Pulp are organized by their membership in repositories. Repositories can only hold
the content type that is defined by the plugin you install. You can add, remove and modify content
in a repository. Each time the content of a repository is changed, a new Repository Version is
created. Any operation such as sync that does not change the content set, does not produce a new
repository version.

<figure markdown="span">
  ![Concept Content](site:pulpcore/docs/assets/images/concept-repository.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

<figure markdown="span">
  ![Concept Content](site:pulpcore/docs/assets/images/concept-add-repo.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

## Pulling content into Pulp with Remotes

In Pulp, you can define external sources of content units, called **Remotes**.
Through your plugin of choice, you can define actions to interact with those external sources.
For example, most or all plugins define sync to fetch content units from a remote and add them to a
Pulp repository.

<figure markdown="span">
  ![Concept Content](site:pulpcore/docs/assets/images/concept-remote.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

## Serving content with Pulp

Pulp provides a content app, which is an
[aiohttp.server](https://docs.aiohttp.org/en/stable/web.html) that serves content through what in
Pulp is referred to as a `Distribution`. Using this content app, you can serve all content
that is managed with Pulp.

To serve content from Pulp, you need to create a publication and a distribution. A
`Publication` consists of the metadata of the content set and the artifacts of each content
unit in the content set. To host a publication, it must be assigned to a `Distribution`, which
determines how and where a publication is served.

<figure markdown="span">
  ![Concept Content](site:pulpcore/docs/assets/images/concept-publish.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>
`````

## File: pulp-docs/pulpcore/docs/user/learn/from-pulp-2.md
`````markdown
# Changes From Pulp 2

## Renamed Concepts

### Importers -> Remotes

CLI users may not have been aware of Importer objects because they were embedded into CLI commands
with repositories. In Pulp 3, this object is now called a `Remote`. The scope of this object
has been reduced to interactions with a single external source. They are no longer associated with a
repository.

### Distributors -> Publication/Exporters

CLI users may not have been aware of Distributor objects because they were also embedded into CLI
commands with repositories. In some cases these distributors created metadata along with the
published content, e.g. `YumDistributor`. In other cases, Distributor objects pushed content to
remote services, such as the `RsyncDistributor`.

For Pulp 2 Distributors that produce metadata, e.g. `YumDistributor`, Pulp 3 introduces a
`Publication` that stores content and metadata created describing that content. The
responsibilities of serving a `Publication` are moved to a new object, the
`Distribution`. Only plugins that need metadata produced at publish time will have use
`Publications`.

For Pulp 2 Distributors that push content to remote systems, e.g. `RsyncDistributor`, Pulp 3
introduces an `Exporter` that is used to push an existing `Publication` to a remote
location. For content types that don't use `Publications`, exporters can export
`RepositoryVersion` content directly.

## New Concepts

### Repository Version

A new feature of Pulp 3 is that the content set of a repository is versioned. Each time the content
set of a repository is changed, a new immutable `RepositoryVersion` is created. An empty
`RepositoryVersion` is created upon creation of a repository.

### Rollback

The combination of publications and distributions allows users to promote and rollback instantly.
With one call, the user can update a distribution (eg. "Production") to host any pre-created
publication.

### Going Live is Atomic

Content is served by a `Distribution` and goes live from Pulp's `content app` as soon as
the database is configured to serve it. This guarantees a users view of a repository is consistent
and as the entire repository is made available atomically.

## Obsolete Concepts

### Consumers

In Pulp 2, there are consumers, aka managed hosts. It is information about existing installation
and subscription profiles for hosts which receive updates based on Pulp repositories. This is
not supported in Pulp 3. The functionality is available as part of [the Katello project](https://theforeman.org/plugins/katello/).

### Applicability

Applicability is a feature that provides a list of updates, content which needs to be installed
on a specific host to bring it up to date. In Pulp 2, it is possible to calculate applicability
based on the installation and subscription profile of a host managed by Pulp. This is
not supported in Pulp 3. The functionality is available as part of [the Katello project](https://theforeman.org/plugins/katello/).

## Scheduling Tasks

While Pulp 2 supported scheduling tasks natively, this is no longer a core feature in Pulp 3. Scheduling Pulp tasks
in Pulp 3 can be accomplished using any of the following external tools (and possibly others not on this list).

- [cron](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/crontab.html)
- [rundeck](http://rundeck.org/)
- [distributed cron](https://github.com/ivanmp91/distributed-cron)
`````

## File: pulp-docs/pulpcore/docs/user/learn/lifecycle-promotion.md
`````markdown
# Lifecyle Promotion Support

A typical workflow for several users of Pulp is managing separate sets of content for different
lifecycle environments (e.g. Dev, Staging, Production, etc) and promoting content from one
environment to another. There are some features Pulp provides which can help facilitate this.

## Distributions

`Distributions` are a resource in Pulp that are useful for supporting different
environments. In most cases, you'll want to create one Distribution for each `Repository` and
environment. If for example, you have a CentOS Repository that you want to serve to your Dev
servers, you can create a distribution called "Dev CentOS" that points to your CentOS Publication.

One way to promote content is to use Distributions. Going back to the Dev CentOS example one way you
could promote this Publication to a Staging environment would be to create a Staging CentOS
distribution and point it to the same publication as the Dev CentOS distribution. Any time you want
to promote content from Dev to Staging, you can simply repeat this action. Also, to rollback, you can
simply point the Staging CentOS distribution to the Publication it was previously pointed at.

## Repositories

Another way to promote content is to create separate Repositories for each environment. This gives
you greater control over which content is available to each environment. In the case where you want
to make a CentOS Repository available to Dev and Production environments, you'd create two
Repositories: a Dev CentOS and a Production CentOS Repository. You'd also create one Distribution
for each repository and you'd sync down all content from a Remote into the Dev CentOS Repository and
only that Repository.

When you want to promote content from Dev to Production, one option is to call the `modify`
endpoint on the Production CentOS Repository and supply a Dev CentOS RepositoryVersion as the
`base_version` parameter. This will copy all content from the Dev CentOS RepositoryVersion of your
choosing into the Production CentOS repository.

This method of managing environment content is particularly useful for plugins without Publications
where Distributions can point directly to a Repository.
`````

## File: pulp-docs/pulpcore/docs/user/learn/on-demand-downloading.md
`````markdown
# On-Demand Download and Sync

## Overview

Pulp can sync content in a few modes: `immediate`, `on_demand`, and `streamed`. Each provides a
different behavior on how and when Pulp acquires content. These are set as the `policy` attribute
of the `Remote` performing the sync. Policy is an optional parameter and defaults to
`immediate`.

## Sync Modes

### immediate

When performing the sync, download all `Artifacts` now. Also download all metadata
now to create the content units in Pulp, associated with the
`repository version` created by the sync. `immediate` is the default, and
any plugin providing a sync is expected to implement the `immediate` mode.

### on_demand

When performing the sync, do not download any `Artifacts` now. Download all
metadata now to create the content units in Pulp, associated with the
`repository version` created by the sync. Clients requesting content
trigger the downloading of `Artifacts`, which are saved into Pulp to be served to
future clients.

This mode is ideal for saving disk space because Pulp never downloads and stores
`Artifacts` that clients don't need. Units created from this mode are
`on-demand content units<on-demand content>`.

### streamed

When performing the sync, do not download any `Artifacts` now. Download all
metadata now to create the content units in Pulp, associated with the
`repository version` created by the sync. Clients requesting content
trigger the downloading of `Artifacts`, which are *not* saved into Pulp. This
content will be re-downloaded with each client request.

This mode is ideal for content that you especially don't want Pulp to store over time. For
instance, syncing from a nightly repo would cause Pulp to store every nightly ever produced which
is likely not valuable. Units created from this mode are
`on-demand content units<on-demand content>`.

## Plugin support for on-demand/streamed

Unless a plugin has enabled either the 'on_demand' or 'streamed' values for the `policy` attribute
you will receive an error. Check that plugin's documentation also.

Example of the "Create Remote" endpoints for some plugins that supports these features:

* [pulp-rpm](https://pulpproject.org/pulp_rpm/restapi/#tag/Remotes:-Rpm/operation/remotes_rpm_rpm_create)
* [pulp-container](https://pulpproject.org/pulp_container/restapi/#tag/Remotes:-Container/operation/remotes_container_container_create)

!!! note
    Want to add on-demand support to your plugin? See the
    [On-Demand Support](site:pulpcore/docs/dev/learn/other/on-demand-support/)
    documentation for more details on how to add on-demand support to a plugin.


## On-Demand Content and Repository Versions

An `on-demand content unit` can be associated and unassociated from a `repository version` just like a normal unit. Note that the original `Remote` will be used to download content should a client request it, even as that content is
made available in multiple places.

!!! warning "Deleting a Remote"
    Learn about the dangers of [deleting a Remote](#remote-deletion-and-content-sharing) in the context of on-demand content.

## On-Demand and Streamed limitations

On-demand and streamed content can be useful, but they come with some problems.

### External dependency and error handling

There are two different types of errors that can occur with on-demand streaming:

1. **Pre-response**: Pulp can't find or connect to the server. A response is never started.
2. **Post-response**: Pulp can get data from the remote and start streaming the response, but the final digest is wrong.

(1) Pulp will try all the available remote sources for the requested content and will return a 404
if all of them fail with pre-response retriable errors.

(2) Pulp already sent the corrupted data to the client and can't recover from it, so it will close the connection to prevent the client from consolidating the file.
When this happens, the content-app will ignore that remote source for a [configurable cooldown interval],
which will enable future requests to select a different remote source.
If all remote sources are ignored due to prior failure, then a 404 will be returned for all requests of that content until the *cooldown interval* for one of those sources has expired.
Pulp doesn't permanently invalidate the remote because it can't know if the error is transient or not.

!!! info

    Case (2) is complex and can be confusing to the user.

    The core reason for this complexity lies in the very nature of on-demand serving, which imposes that Pulp must fetch and stream the content on request time, and has no way to know anything about the remote before that.
    This constrains the range of actions Pulp can do to satisfy the request properly.

    **If this behavior is prohibitive, consider using the immediate sync policy.**

Context: <https://github.com/pulp/pulpcore/issues/5012>.

### Remote deletion and content sharing

Deleting a `Remote` that was used in a sync with either the `on_demand` or `streamed`
options can break published data.

Specifically, clients who want to fetch content that a `Remote` was providing access to would begin to 404.
Recreating a `Remote` and re-triggering a sync will cause these broken units to recover again.

In the worst case, the Content is shared across multiple Repositories, and the Remote's removal
can invalidate all those repositories at once.

In either case, proceed with the deletion of a remote with great care.

Context: <https://github.com/pulp/pulpcore/issues/1975>.

### Implicit credential sharing within a domain

In the same domain, a request for on-demand content may use any available Remotes associated with that content,
regardless of which user created it.

An example:

* Given User A and User B both synced the same on-demand content from their separate remotes (there are two different sources for the same content).
* When User B requests the content
* Then the credentials used for the download could potentially be User A's.

If a user doesn't want their registered Remotes to be indirectly used by other users, they should use a separate domain.

Context: <https://github.com/pulp/pulpcore/issues/3212>.

[configurable cooldown interval]: site:pulpcore/docs/admin/reference/settings/#remote_content_fetch_failure_cooldown
`````

## File: pulp-docs/pulpcore/docs/user/learn/pulp-versioning.md
`````markdown
# Pulp Versioning

Pulp uses a version scheme `x.y.z`, which is based on [Semantic Versioning](http://semver.org/).
Briefly, `x.y.z` releases may only contain bugfixes (no features),
`x.y` releases may only contain backwards compatible changes (new features, bugfixes),
and `x` releases may break backwards compatibility.

!!! note
    In some rare cases, fixing a bug can only be done in a backwards incompatible way.
    This may happen in any release and even be backported.
    For obvious reasons we try to keep these cases to a minimum.

## Deprecation Policy for the Plugin API

The plugin API is provided by the pulpcore package.
However, it is not semantically versioned.
Backwards incompatible Plugin API changes are released in batches.
The version of such a breaking change release is announced well in advance. 
Right before a breaking change release, the version of the next breaking change release is announced. 
So far, the breaking change releases have occurred every 15 y-releases.

!!! note
    For example, at the time of this writing, the last breaking change release was `3.40` and the next will be `3.55.0`.
    So plugins should be safe to depend on `pulpcore>=3.42.0,<3.55` if depending on a feature introduced in `3.42.0`.
`````

## File: pulp-docs/pulpcore/docs/user/tutorials/index.md
`````markdown
# Start Here

<figure markdown="span">
  ![Pulp 101](site:pulpcore/docs/assets/images/pulp-101.png)
  <!-- <figcaption>Image caption</figcaption> -->
</figure>

If you are a new user and are unsure where to begin, this page outlines the different options available, as well as the limitations and requirements for those options.

## Want to evaluate Pulp?

The quickest way to evaluate Pulp is by using Pulp in One Container.
This image contains all the services that you need to run Pulp and is perfect for an initial evaluation.
Mind that this container cannot scale to provide for high availability scenarios.

For installation instructions, see
[Pulp in One Container](site:pulp-oci-images/docs/admin/tutorials/quickstart/).

## Is there a Kubernetes/OpenShift deployment option?

Pulp operator endeavours to provide a scalable and robust cluster for Pulp 3.
Pulp can be installed from [OperatorHub](https://operatorhub.io/operator/pulp-operator).
If you're interested in providing feedback or contributing to making this better, see the
[Pulp operator repo](https://github.com/pulp/pulp-operator) on GitHub.

For more information about using Pulp operator, see
[Pulp on Openshift](site:pulp-operator/docs/admin/tutorials/quickstart-openshift/)

## Is there a podman/docker compose deployment option?

Based on community feedback from the survey and PulpCon 2021, we have reused the Pulp operator images to create a podman compose option for deploying Pulp.
If you're familiar with podman compose, you can customize the configuration to suit your deployment needs and to deploy at scale.

For more information see our
[podman/docker compose intro section](site:pulp-oci-images/docs/admin/tutorials/quickstart/#podman-or-docker-compose).

## Do you need something else?

If you are blocked and don't find an option that you need, please post to our [Pulp Community Discourse](https://discourse.pulpproject.org) and let us know what problem you encountered or what scenario you're missing. Feel free to introduce yourself, what you're trying to achieve, where you ran into problems or didn't understand something. We're always happy to hear how people are using Pulp!

You can also find us on [**pulp** on Matrix](https://matrix.to/#/!HWvLQmBGVPfJfTQBAu:matrix.org) for user support.

!!! note

    We plan to write an Introduction Tutorial to teach fundamentals skills and concepts throught a basic Project.
    Reach out if you have a good idea of what this didactical Project could look like.
`````

## File: pulp-docs/pulpcore/docs/index.md
`````markdown
# Welcome to Pulp Core

Pulpcore is the main component of the Pulp Project.

It handles some parts of common content management workflows, including high performance
downloading, task queuing with scalable workers, and management of content within versioned
repositories.

If you are looking for:

- A high-level features overview, check out
  [Why Pulp](site:help/more/why-pulp/).
- Main concepts and terminology overview, see
  [Concepts and Terminology](site:pulpcore/docs/user/learn/concepts/).
- Installing Pulp, start with our
  [Installation Introduction](site:pulp-oci-images/docs/admin/tutorials/quickstart/)
- Learning core and plugin workflows, see the *How-to Guides* in Core or in Plugin pages.
- Writing a Plugin, refer to
  [Plugin Development](site:pulpcore/docs/dev/).
`````

## File: pulp-docs/pulpcore/CHANGES.md
`````markdown
# Changelog

[//]: # (You should *NOT* be adding new change log entries to this file, this)
[//]: # (file is managed by towncrier. You *may* edit previous change logs to)
[//]: # (fix problems like typo corrections or such.)
[//]: # (To add a new change log entry, please see the contributing docs.)
[//]: # (WARNING: Don't drop the towncrier directive!)

[//]: # (towncrier release notes start)

## 3.80.0 (2025-05-27) {: #3.80.0 }

### REST API {: #3.80.0-rest-api }

#### Bugfixes {: #3.80.0-rest-api-bugfix }

- Prevent downloader session to be closed when there is a digest validation in on_demand content serving.

#### Improved Documentation {: #3.80.0-rest-api-doc }

- Adds docs on the Alternate Content Sources feature set.
  [#6609](https://github.com/pulp/pulpcore/issues/6609)

### Plugin API {: #3.80.0-plugin-api }

#### Deprecations {: #3.80.0-plugin-api-deprecation }

- Deprecated `TaskGroup.finish()` for removal with Pulp 4.
  [#task_group_finish](https://github.com/pulp/pulpcore/issues/task_group_finish)

### Pulp File {: #3.80.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.80.0-pulp-cert-guard }

No significant changes.

---

## 3.79.1 (2025-05-27) {: #3.79.1 }

### REST API {: #3.79.1-rest-api }

No significant changes.

### Plugin API {: #3.79.1-plugin-api }

No significant changes.

### Pulp File {: #3.79.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.79.1-pulp-cert-guard }

No significant changes.

---

## 3.79.0 (2025-05-20) {: #3.79.0 }

### REST API {: #3.79.0-rest-api }

#### Features {: #3.79.0-rest-api-feature }

- Added the `execution_time` as microseconds and other task related information on the finished task log entry.
  [#6569](https://github.com/pulp/pulpcore/issues/6569)

### Plugin API {: #3.79.0-plugin-api }

No significant changes.

### Pulp File {: #3.79.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.79.0-pulp-cert-guard }

No significant changes.

---

## 3.78.0 (2025-05-13) {: #3.78.0 }

### REST API {: #3.78.0-rest-api }

#### Features {: #3.78.0-rest-api-feature }

- Added the optional feature to enable uvloop library as a replacement of asyncio eventloop.
  The feature is activated through the UVLOOP_ENABLED feature flag settings and the 'uvloop' optional dependency.
  [#6021](https://github.com/pulp/pulpcore/issues/6021)

#### Bugfixes {: #3.78.0-rest-api-bugfix }

- Taught tasks to update the state of associated progress-reports when canceled/failed.

  Added a management-task, `clean-up-progress-reports`, to clean up existing reports.
  [#3609](https://github.com/pulp/pulpcore/issues/3609)
- Fixed a server error when listing user roles.
  [#6330](https://github.com/pulp/pulpcore/issues/6330)
- On-demand or pull-through content is now immediately cached upon first request.
  [#6540](https://github.com/pulp/pulpcore/issues/6540)

#### Misc {: #3.78.0-rest-api-misc }

-

### Plugin API {: #3.78.0-plugin-api }

No significant changes.

### Pulp File {: #3.78.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.78.0-pulp-cert-guard }

No significant changes.

---

## 3.77.1 (2025-05-08) {: #3.77.1 }

### REST API {: #3.77.1-rest-api }

#### Bugfixes {: #3.77.1-rest-api-bugfix }

- On-demand or pull-through content is now immediately cached upon first request.
  [#6540](https://github.com/pulp/pulpcore/issues/6540)

### Plugin API {: #3.77.1-plugin-api }

No significant changes.

### Pulp File {: #3.77.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.77.1-pulp-cert-guard }

No significant changes.

---

## 3.77.0 (2025-05-06) {: #3.77.0 }

### REST API {: #3.77.0-rest-api }

#### Features {: #3.77.0-rest-api-feature }

- The `TASK_DIAGNOSTICS` option now permits individual diagnostics to be enabled or disabled by listing them.
  [#4548](https://github.com/pulp/pulpcore/issues/4548)
- If enabled using `TASK_DIAGNOSTICS` and the appropriate package is installed, tasks can now output a profile of what functions / lines allocated the most memory at the time of peak RSS.

#### Bugfixes {: #3.77.0-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)
- Fixed incorrect use of f-strings in gettext.
  [#6521](https://github.com/pulp/pulpcore/issues/6521)

#### Improved Documentation {: #3.77.0-rest-api-doc }

- Fixed the TASK_DIAGNOSTICS documentation, which was out of date.
  [#6481](https://github.com/pulp/pulpcore/issues/6481)

#### Misc {: #3.77.0-rest-api-misc }

-

### Plugin API {: #3.77.0-plugin-api }

#### Bugfixes {: #3.77.0-plugin-api-bugfix }

- Re-added* timeout to tasks dispatched as immediate for both deferred and non-deferred runs.

  Also, immediate tasks must be coroutines from now on.
  This is to enable immediate tasks to run on the workers foreground without completely blocking heartbeats.
  Support for legacy non-coroutines immediate task will be dropped in pulpcore 3.85.

  \* This was added in pulpcore 3.75.0, reverted in 3.75.1 due to a regression and re-applied here with the regression fix.
  [#6429](https://github.com/pulp/pulpcore/issues/6429)

### Pulp File {: #3.77.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.77.0-pulp-cert-guard }

No significant changes.

---

## 3.76.1 (2025-04-24) {: #3.76.1 }

### REST API {: #3.76.1-rest-api }

#### Bugfixes {: #3.76.1-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)
- Reverted fix for #6491, it broke certificate-chains.
  [#6510](https://github.com/pulp/pulpcore/issues/6510)

### Plugin API {: #3.76.1-plugin-api }

No significant changes.

### Pulp File {: #3.76.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.76.1-pulp-cert-guard }

No significant changes.

---

## 3.76.0 (2025-04-22) {: #3.76.0 }

### REST API {: #3.76.0-rest-api }

#### Features {: #3.76.0-rest-api-feature }

- Added the `task_name` and if it's a `task.immediate` to the `Starting task ...` log entry.
  [#6482](https://github.com/pulp/pulpcore/issues/6482)

#### Bugfixes {: #3.76.0-rest-api-bugfix }

- Added validation to `PublicationSerializer` and `DistributionSerializer` to raise an error if repo and remote differ.
  [#6174](https://github.com/pulp/pulpcore/issues/6174)
- Set the X-PULP-ARTIFACT-SIZE header at the handle_response_header function.
  [#6390](https://github.com/pulp/pulpcore/issues/6390)
- Client- and CA-certificates used in Remotes are now validated and any comments stripped
  before being applied to the Remote.
  [#6491](https://github.com/pulp/pulpcore/issues/6491)
- Fixed an oversight in the #6385 fix.

#### Improved Documentation {: #3.76.0-rest-api-doc }

- Updated the settings.md file to be sorted alphabetically.
  [#6459](https://github.com/pulp/pulpcore/issues/6459)

### Plugin API {: #3.76.0-plugin-api }

#### Bugfixes {: #3.76.0-plugin-api-bugfix }

- Fixed `add_roles_for_object_creator` not handling anonymous users.
- Reverted adding timeout to immediate tasks, for it was causing a regression
  with pull-through caching (https://github.com/pulp/pulpcore/issues/6429).

### Pulp File {: #3.76.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.76.0-pulp-cert-guard }

No significant changes.

---

## 3.75.3 (2025-04-22) {: #3.75.3 }

### REST API {: #3.75.3-rest-api }

No significant changes.

### Plugin API {: #3.75.3-plugin-api }

#### Bugfixes {: #3.75.3-plugin-api-bugfix }

- Fixed `add_roles_for_object_creator` not handling anonymous users.

### Pulp File {: #3.75.3-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.75.3-pulp-cert-guard }

No significant changes.

---

## 3.75.2 (2025-04-09) {: #3.75.2 }

### REST API {: #3.75.2-rest-api }

#### Bugfixes {: #3.75.2-rest-api-bugfix }

- Set the X-PULP-ARTIFACT-SIZE header at the handle_response_header function.
  [#6390](https://github.com/pulp/pulpcore/issues/6390)

### Plugin API {: #3.75.2-plugin-api }

No significant changes.

### Pulp File {: #3.75.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.75.2-pulp-cert-guard }

No significant changes.

---

## 3.75.1 (2025-04-08) {: #3.75.1 }

### REST API {: #3.75.1-rest-api }

#### Bugfixes {: #3.75.1-rest-api-bugfix }

- Fixed an oversight in the #6385 fix.

### Plugin API {: #3.75.1-plugin-api }

#### Bugfixes {: #3.75.1-plugin-api-bugfix }

- Reverted adding timeout to immediate tasks, for it was causing a regression
  with pull-through caching (https://github.com/pulp/pulpcore/issues/6429).

### Pulp File {: #3.75.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.75.1-pulp-cert-guard }

No significant changes.

---

## 3.75.0 (2025-04-02) {: #3.75.0 }

### REST API {: #3.75.0-rest-api }

#### Features {: #3.75.0-rest-api-feature }

- Added validation to the `RepositorySyncURLSerializer` to raise an error if repo and remote are from different plugins.
  [#1860](https://github.com/pulp/pulpcore/issues/1860)

#### Bugfixes {: #3.75.0-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)
- Reworked the loading of plugin default settings in order to fix interference with environment injection.
  [#6341](https://github.com/pulp/pulpcore/issues/6341)
- Fixed migrations 0131 and 0132 to make it possible to upgrade from 3.73.
  [#6375](https://github.com/pulp/pulpcore/issues/6375)
- Fixed task purge in case no access policy based permission framework is configured for Pulp.
  [#6380](https://github.com/pulp/pulpcore/issues/6380)
- Fixed pull-through caching failure when content already existed on-demand.
  [#6385](https://github.com/pulp/pulpcore/issues/6385)
- Fixed cross-domain check for RepositoryVersion fields.
  [#6388](https://github.com/pulp/pulpcore/issues/6388)
- Redeclared the aiohttp dependency boundaries to follow semver as stated in their documentation.

### Plugin API {: #3.75.0-plugin-api }

#### Bugfixes {: #3.75.0-plugin-api-bugfix }

- Added timeout to tasks dispatched as immediate for both deferred and non-deferred runs.

  Also, immediate tasks must be coroutines from now on.
  This is to enable immediate tasks to run on the workers foreground without completely blocking heartbeats.
  Support for legacy non-coroutines immediate task will be dropped in pulpcore 3.85.
  [#5930](https://github.com/pulp/pulpcore/issues/5930)

### Pulp File {: #3.75.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.75.0-pulp-cert-guard }

No significant changes.

---

## 3.74.2 (2025-04-02) {: #3.74.2 }

### REST API {: #3.74.2-rest-api }

#### Bugfixes {: #3.74.2-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)
- Fixed task purge in case no access policy based permission framework is configured for Pulp.
  [#6380](https://github.com/pulp/pulpcore/issues/6380)
- Fixed pull-through caching failure when content already existed on-demand.
  [#6385](https://github.com/pulp/pulpcore/issues/6385)
- Fixed cross-domain check for RepositoryVersion fields.
  [#6388](https://github.com/pulp/pulpcore/issues/6388)
- Redeclared the aiohttp dependency boundaries to follow semver as stated in their documentation.

### Plugin API {: #3.74.2-plugin-api }

No significant changes.

### Pulp File {: #3.74.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.74.2-pulp-cert-guard }

No significant changes.

---

## 3.74.1 (2025-03-20) {: #3.74.1 }

### REST API {: #3.74.1-rest-api }

#### Bugfixes {: #3.74.1-rest-api-bugfix }

- Fixed migrations 0131 and 0132 to make it possible to upgrade from 3.73.
  [#6375](https://github.com/pulp/pulpcore/issues/6375)

### Plugin API {: #3.74.1-plugin-api }

No significant changes.

### Pulp File {: #3.74.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.74.1-pulp-cert-guard }

No significant changes.

---

## 3.74.0 (2025-03-18) {: #3.74.0 }

### REST API {: #3.74.0-rest-api }

#### Features {: #3.74.0-rest-api-feature }

- Added validation to the `orphans/cleanup/` endpoint to restrict the `orphan_protection_time` value.
  [#3234](https://github.com/pulp/pulpcore/issues/3234)
- Added support to create and distribute checkpoint publications in Pulp.
  [#6244](https://github.com/pulp/pulpcore/issues/6244)

#### Bugfixes {: #3.74.0-rest-api-bugfix }

- Fixed cache not being invalidated when a publication was created or a repository version was deleted.
  [#6333](https://github.com/pulp/pulpcore/issues/6333)
- Reworked content-labeling RBAC to use a specific permission for set/unset labels.

  Users must be explicitly given the `core.content_labeler` role to access this
  functionality, or to upload content with labels.
  [#6337](https://github.com/pulp/pulpcore/issues/6337)
- Fixed a bug in the plugin API related to set and unset labels for ReadOnlyContentViewSet.
  [#6340](https://github.com/pulp/pulpcore/issues/6340)
- Fixed not being able to call the set/unset label endpoints for domains.
- Reverted the feature to allow describing remote authentication in the openapi specs. It depended on the also reverted switch to openapi 3.1.

### Plugin API {: #3.74.0-plugin-api }

#### Features {: #3.74.0-plugin-api-feature }

- Added ability for plugins to dispatch a task to add pull-through content to an associated repository.

  Add the class var `PULL_THROUGH_SUPPORTED = True` to the plugin's repository model to enable this
  feature. Plugins can also customize the dispatched task by supplying their own
  `pull_through_add_content` method on their repository model.
  [#6201](https://github.com/pulp/pulpcore/issues/6201)
- Added support to create and distribute checkpoint publications in Pulp.
  Plugins can choose to enable this feature by exposing the checkpoint field in their inherited PublicationSerializer and DistributionSerializer.
  Checkpoint publications and distributions can be created by passing checkpoint=True when creating them.
  [#6244](https://github.com/pulp/pulpcore/issues/6244)

### Pulp File {: #3.74.0-pulp-file }

#### Features {: #3.74.0-pulp-file-feature }

- Added support to create checkpoint file publications and distribute them through checkpoint file distributions.
  [#6244](https://github.com/pulp/pulpcore/issues/6244)

### Pulp Cert Guard {: #3.74.0-pulp-cert-guard }

No significant changes.

---

## 3.73.11 (2025-06-04) {: #3.73.11 }

### REST API {: #3.73.11-rest-api }

No significant changes.

### Plugin API {: #3.73.11-plugin-api }

No significant changes.

### Pulp File {: #3.73.11-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.11-pulp-cert-guard }

No significant changes.

---

## 3.73.10 (2025-05-27) {: #3.73.10 }

### REST API {: #3.73.10-rest-api }

#### Bugfixes {: #3.73.10-rest-api-bugfix }

- Prevent downloader session to be closed when there is a digest validation in on_demand content serving.

### Plugin API {: #3.73.10-plugin-api }

No significant changes.

### Pulp File {: #3.73.10-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.10-pulp-cert-guard }

No significant changes.

---

## 3.73.9 (2025-05-06) {: #3.73.9 }

### REST API {: #3.73.9-rest-api }

No significant changes.

### Plugin API {: #3.73.9-plugin-api }

No significant changes.

### Pulp File {: #3.73.9-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.9-pulp-cert-guard }

No significant changes.

---

## 3.73.8 (2025-04-24) {: #3.73.8 }

### REST API {: #3.73.8-rest-api }

#### Bugfixes {: #3.73.8-rest-api-bugfix }

- Reverted fix for #6491, it broke certificate-chains.
  [#6510](https://github.com/pulp/pulpcore/issues/6510)

### Plugin API {: #3.73.8-plugin-api }

No significant changes.

### Pulp File {: #3.73.8-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.8-pulp-cert-guard }

No significant changes.

---

## 3.73.7 (2025-04-23) {: #3.73.7 }

### REST API {: #3.73.7-rest-api }

#### Bugfixes {: #3.73.7-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)

### Plugin API {: #3.73.7-plugin-api }

No significant changes.

### Pulp File {: #3.73.7-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.7-pulp-cert-guard }

No significant changes.

---

## 3.73.6 (2025-04-23) {: #3.73.6 }

### REST API {: #3.73.6-rest-api }

No significant changes.

### Plugin API {: #3.73.6-plugin-api }

No significant changes.

### Pulp File {: #3.73.6-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.6-pulp-cert-guard }

No significant changes.

---

## 3.73.5 (2025-04-22) {: #3.73.5 }

### REST API {: #3.73.5-rest-api }

#### Bugfixes {: #3.73.5-rest-api-bugfix }

- Client- and CA-certificates used in Remotes are now validated and any comments stripped
  before being applied to the Remote.
  [#6491](https://github.com/pulp/pulpcore/issues/6491)

### Plugin API {: #3.73.5-plugin-api }

#### Bugfixes {: #3.73.5-plugin-api-bugfix }

- Fixed `add_roles_for_object_creator` not handling anonymous users.

### Pulp File {: #3.73.5-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.5-pulp-cert-guard }

No significant changes.

---

## 3.73.4 (2025-04-08) {: #3.73.4 }

### REST API {: #3.73.4-rest-api }

#### Bugfixes {: #3.73.4-rest-api-bugfix }

- Fixed an oversight in the #6385 fix.

### Plugin API {: #3.73.4-plugin-api }

No significant changes.

### Pulp File {: #3.73.4-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.4-pulp-cert-guard }

No significant changes.

---

## 3.73.3 (2025-04-02) {: #3.73.3 }

### REST API {: #3.73.3-rest-api }

#### Bugfixes {: #3.73.3-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)
- Fixed task purge in case no access policy based permission framework is configured for Pulp.
  [#6380](https://github.com/pulp/pulpcore/issues/6380)
- Fixed pull-through caching failure when content already existed on-demand.
  [#6385](https://github.com/pulp/pulpcore/issues/6385)
- Fixed cross-domain check for RepositoryVersion fields.
  [#6388](https://github.com/pulp/pulpcore/issues/6388)
- Redeclared the aiohttp dependency boundaries to follow semver as stated in their documentation.

### Plugin API {: #3.73.3-plugin-api }

No significant changes.

### Pulp File {: #3.73.3-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.3-pulp-cert-guard }

No significant changes.

---

## 3.73.2 (2025-03-14) {: #3.73.2 }

### REST API {: #3.73.2-rest-api }

#### Bugfixes {: #3.73.2-rest-api-bugfix }

- Fixed cache not being invalidated when a publication was created or a repository version was deleted.
  [#6333](https://github.com/pulp/pulpcore/issues/6333)
- Reworked content-labeling RBAC to use a specific permission for set/unset labels.

  Users must be explicitly given the `core.content_labeler` role to access this
  functionality, or to upload content with labels.
  [#6337](https://github.com/pulp/pulpcore/issues/6337)
- Fixed a bug in the plugin API related to set and unset labels for ReadOnlyContentViewSet.
  [#6340](https://github.com/pulp/pulpcore/issues/6340)

### Plugin API {: #3.73.2-plugin-api }

No significant changes.

### Pulp File {: #3.73.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.2-pulp-cert-guard }

No significant changes.

---

## 3.73.1 (2025-03-06) {: #3.73.1 }

### REST API {: #3.73.1-rest-api }

#### Bugfixes {: #3.73.1-rest-api-bugfix }

- Reverted the feature to allow describing remote authentication in the openapi specs. It depended on the also reverted switch to openapi 3.1.

### Plugin API {: #3.73.1-plugin-api }

No significant changes.

### Pulp File {: #3.73.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.1-pulp-cert-guard }

No significant changes.

---

## 3.73.0 (2025-03-04) {: #3.73.0 }

### REST API {: #3.73.0-rest-api }

#### Features {: #3.73.0-rest-api-feature }

- Allow labelling Content in pulp.

  This adds `pulp_labels` to Content subclasses, using the same entities as used for
  labelling Repositories, Remotes, and Distributions currently (q.v.). Labels can be added
  when uploading Content, searched on using the `pulp_labels_select` filter to the list
  endpoints, and set/unset on existing Content.
  [#3338](https://github.com/pulp/pulpcore/issues/3338)
- Added new field `policy` to UpstreamPulp that decides how Replicate manages local objects within the domain.

  Replicate will now copy the upstream's `pulp_labels` on downstream objects. Also, replicate will now
  label the downstream objects created with the UpstreamPulp they came from.
  [#5214](https://github.com/pulp/pulpcore/issues/5214)
- Add ability to configure the openapi schema for remote user authentication via `REMOTE_USER_OPENAPI_SECURITY_SCHEME`.
  Its type defaults to "mutualTLS" for cert based authentication.
  [#5437](https://github.com/pulp/pulpcore/issues/5437)

#### Bugfixes {: #3.73.0-rest-api-bugfix }

- Fixed plugin default settings overriding user settings.

#### Improved Documentation {: #3.73.0-rest-api-doc }

- Add a new section about configuring AWS CloudFront as storage backend.
  [#6258](https://github.com/pulp/pulpcore/issues/6258)

#### Misc {: #3.73.0-rest-api-misc }

- [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.73.0-plugin-api }

No significant changes.

### Pulp File {: #3.73.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.73.0-pulp-cert-guard }

No significant changes.

---

## 3.72.2 (2025-03-04) {: #3.72.2 }

### REST API {: #3.72.2-rest-api }

#### Bugfixes {: #3.72.2-rest-api-bugfix }

- Fixed plugin default settings overriding user settings.

### Plugin API {: #3.72.2-plugin-api }

No significant changes.

### Pulp File {: #3.72.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.72.2-pulp-cert-guard }

No significant changes.

---

## 3.72.1 (2025-02-26) {: #3.72.1 }

### REST API {: #3.72.1-rest-api }

No significant changes.

### Plugin API {: #3.72.1-plugin-api }

No significant changes.

### Pulp File {: #3.72.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.72.1-pulp-cert-guard }

No significant changes.

---

## 3.72.0 (2025-02-25) {: #3.72.0 }

### REST API {: #3.72.0-rest-api }

#### Features {: #3.72.0-rest-api-feature }

- Added ``ENABLED_PLUGINS`` option to allow selecting installed plugins to be enabled.
  [#5235](https://github.com/pulp/pulpcore/issues/5235)
- Added support for labels on domains.
  [#6236](https://github.com/pulp/pulpcore/issues/6236)
- Added `TASK_GRACE_INTERVAL` as a setting to specify the amount of seconds a worker gives the current task to finish when receiving SIGINT.
  [#6242](https://github.com/pulp/pulpcore/issues/6242)

#### Bugfixes {: #3.72.0-rest-api-bugfix }

- Taught the upload-workflow to replace missing artifact-files when discovered.
  [#6274](https://github.com/pulp/pulpcore/issues/6274)
- Fixed an issue in immediate tasks switching to tmp directories and API worker failing to run `cwd`.
  [#6293](https://github.com/pulp/pulpcore/issues/6293)
- The Alternate Content Source sync feature has received some optimizations, making it dramatically faster.

#### Improved Documentation {: #3.72.0-rest-api-doc }

- Added basic documentation for Content Guards.
  [#4629](https://github.com/pulp/pulpcore/issues/4629)

### Plugin API {: #3.72.0-plugin-api }

No significant changes.

### Pulp File {: #3.72.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.72.0-pulp-cert-guard }

No significant changes.

---

## 3.71.2 (2025-02-24) {: #3.71.2 }

### REST API {: #3.71.2-rest-api }

No significant changes.

### Plugin API {: #3.71.2-plugin-api }

No significant changes.

### Pulp File {: #3.71.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.71.2-pulp-cert-guard }

No significant changes.

---

## 3.71.1 (2025-02-24) {: #3.71.1 }

### REST API {: #3.71.1-rest-api }

#### Bugfixes {: #3.71.1-rest-api-bugfix }

- Fixed an issue in immediate tasks switching to tmp directories and API worker failing to run `cwd`.
  [#6293](https://github.com/pulp/pulpcore/issues/6293)

### Plugin API {: #3.71.1-plugin-api }

No significant changes.

### Pulp File {: #3.71.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.71.1-pulp-cert-guard }

No significant changes.

---

## 3.71.0 (2025-02-19) {: #3.71.0 }

### REST API {: #3.71.0-rest-api }

#### Features {: #3.71.0-rest-api-feature }

- Added `pulp_created` filter for Tasks API.
  [#6241](https://github.com/pulp/pulpcore/issues/6241)

#### Bugfixes {: #3.71.0-rest-api-bugfix }

- Content app now returns a 400 Bad Request response when receiving invalid cookies instead of a 500 error.
  [#6214](https://github.com/pulp/pulpcore/issues/6214)
- Fixed a bug in replication, where a failed sync will not be reattempted.
  [#6261](https://github.com/pulp/pulpcore/issues/6261)

### Plugin API {: #3.71.0-plugin-api }

#### Bugfixes {: #3.71.0-plugin-api-bugfix }

- Fixed immediate tasks to run in a temporary directory.
  [#5928](https://github.com/pulp/pulpcore/issues/5928)

### Pulp File {: #3.71.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.71.0-pulp-cert-guard }

No significant changes.

---

## 3.70.1 (2025-02-12) {: #3.70.1 }

### REST API {: #3.70.1-rest-api }

#### Bugfixes {: #3.70.1-rest-api-bugfix }

- Fixed a bug in replication, where a failed sync will not be reattempted.
  [#6261](https://github.com/pulp/pulpcore/issues/6261)

### Plugin API {: #3.70.1-plugin-api }

No significant changes.

### Pulp File {: #3.70.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.70.1-pulp-cert-guard }

No significant changes.

---

## 3.70.0 (2025-02-04) {: #3.70.0 }

### REST API {: #3.70.0-rest-api }

#### Features {: #3.70.0-rest-api-feature }

- Allow CONTENT_ORIGIN to be None. When None, the base_url for Distributions is a relative path.
  [#5931](https://github.com/pulp/pulpcore/issues/5931)
- Added a login api endpoint to result in an authorization cookie from any other sort of feasible authentication.
  [#5932](https://github.com/pulp/pulpcore/issues/5932)
- Added the unblocked_at filter for Tasks API.
  [#6165](https://github.com/pulp/pulpcore/issues/6165)
- Added a check to the basic auth module to respect the `X-Requested-With: "XMLHttpRequest"` header.
  In return the signature of the `WWW-Authenticate` header is changed so browsers will not pop up a password dialog.

#### Bugfixes {: #3.70.0-rest-api-bugfix }

- Fixed replication failing when the upstream Pulp doesn't have all the same plugins as the downstream.
  [#4509](https://github.com/pulp/pulpcore/issues/4509)
- Added an extra check to the task unblocking logic to catch a rare case of stuck tasks in running, but never unblocked.
  Tasks in normal operation should never end in this state, but at least with a specific upgrade it can happen.
  [#6225](https://github.com/pulp/pulpcore/issues/6225)

#### Improved Documentation {: #3.70.0-rest-api-doc }

- Expanded docs on correlation id.
  [#6248](https://github.com/pulp/pulpcore/issues/6248)

#### Removals {: #3.70.0-rest-api-removal }

- Marked django's `DEFAULT_FILE_STORAGE` and `STATIC_FILE_STORAGE` settings to be
  removed in pulpcore 3.85. Users should upgrade to use the
  [`STORAGES`](https://docs.djangoproject.com/en/4.2/ref/settings/#std-setting-STORAGES)
  setting instead.

  The [django-upgrade](https://github.com/adamchainz/django-upgrade?tab=readme-ov-file#django-42)
  tool can handle simple cases. If cloud storages are being used, refer to django-storages
  to adapt their specific storage options. E.g:

  * <https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html>
  * <https://django-storages.readthedocs.io/en/latest/backends/azure.html>
  [#5404](https://github.com/pulp/pulpcore/issues/5404)
- Updated the OpenAPI generator version used to generate python bindings to 7.10.0.
  This involves stricter client side validation of api calls when using the bindings.

### Plugin API {: #3.70.0-plugin-api }

#### Features {: #3.70.0-plugin-api-feature }

- Modified the `artifact_url` method from `ArtifactDistribution` model to return a relative URL
  (no protocol, fqdn, and port) in case `CONTENT_ORIGIN` is not defined.
  [#relative-path-base-url](https://github.com/pulp/pulpcore/issues/relative-path-base-url)

#### Removals {: #3.70.0-plugin-api-removal }

- Started using `settings.STORAGES` internally instead of `settings.DEFAULT_FILE_STORAGE` and `settings.STATICFILES_STORAGE`,
  which was deprecated in Django 4.2.

  For compatibility, plugins must replace access to:

  * `settings.DEFAULT_FILE_STORAGE` with `settings.STORAGES["default"]["BACKEND"]`
  * `settings.STATICFILES_STORAGE` with `settings.STORAGES["staticfiles"]["BACKEND"]`

  See the new storage structure in [Django docs](https://docs.djangoproject.com/en/4.2/ref/settings/#std-setting-STORAGES).
  [#5404](https://github.com/pulp/pulpcore/issues/5404)
- Removed `distribution_data` from `Replicator`. The function was renamed to `distribution_extra_fields`.
  [#6077](https://github.com/pulp/pulpcore/issues/6077)
- Deleted field `pulp_label_select` from UpstreamPulp model.

### Pulp File {: #3.70.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.70.0-pulp-cert-guard }

No significant changes.

---

## 3.69.2 (2025-01-29) {: #3.69.2 }

### REST API {: #3.69.2-rest-api }

#### Bugfixes {: #3.69.2-rest-api-bugfix }

- Added an extra check to the task unblocking logic to catch a rare case of stuck tasks in running, but never unblocked.
  Tasks in normal operation should never end in this state, but at least with a specific upgrade it can happen.
  [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.69.2-plugin-api }

No significant changes.

### Pulp File {: #3.69.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.69.2-pulp-cert-guard }

No significant changes.

---

## 3.69.1 (2025-01-21) {: #3.69.1 }

### REST API {: #3.69.1-rest-api }

No significant changes.

### Plugin API {: #3.69.1-plugin-api }

No significant changes.

### Pulp File {: #3.69.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.69.1-pulp-cert-guard }

No significant changes.

---

## 3.69.0 (2024-12-11) {: #3.69.0 }

### REST API {: #3.69.0-rest-api }

#### Features {: #3.69.0-rest-api-feature }

- Added core version to the bindings api spec even if core apis are not part of the spec.

#### Bugfixes {: #3.69.0-rest-api-bugfix }

- Fixed content-app behavior for the case where the client would get a 200 response for a package
  streamed from a Remote which did not match the expected checksum.
  Now, the connection is closed before finalizing the response.
  [#5012](https://github.com/pulp/pulpcore/issues/5012)
- On a request for on-demand content in the content app, a corrupted Remote that
  contains the wrong binary (for that content) prevented other Remotes from being
  attempted on future requests. Now the last failed Remotes are temporarily ignored
  and others may be picked.
  [#5725](https://github.com/pulp/pulpcore/issues/5725)
- Disable retry logic on the context of content-app on-demand streaming, as we can't recover
  from any errors after starting the streaming process (chunked transfer).
  [#5937](https://github.com/pulp/pulpcore/issues/5937)
- Allowed to bind api and content workers to multiple addresses.
  You can specify `--bind` multiple times on the `pulpcore-{api,content}` entrypoints.
  [#6053](https://github.com/pulp/pulpcore/issues/6053)
- Fixed the openapi schema definition of task error.
- Fixed the schema definition for created resources.

#### Improved Documentation {: #3.69.0-rest-api-doc }

- Added docs about on-demand content limitations and caveats.
  [#1975](https://github.com/pulp/pulpcore/issues/1975),
  [#3212](https://github.com/pulp/pulpcore/issues/3212)

### Plugin API {: #3.69.0-plugin-api }

#### Features {: #3.69.0-plugin-api-feature }

- Pulpcore migrations have been squashed.
  In order to allow removing the old ones, plugins should rebase their migrations on at least the 0091 migration of core.
  The `pulpcore-manager rebasemigrations` command will hep with that.

#### Bugfixes {: #3.69.0-plugin-api-bugfix }

- Fixed `GetOrCreateSerializerMixin` not accepting pulp_domain for the natural key creation.
  [#domain-get-create-serializer-mixin](https://github.com/pulp/pulpcore/issues/domain-get-create-serializer-mixin)

#### Misc {: #3.69.0-plugin-api-misc }

-

### Pulp File {: #3.69.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.69.0-pulp-cert-guard }

No significant changes.

---

## 3.68.2 (2024-12-11) {: #3.68.2 }

### REST API {: #3.68.2-rest-api }

No significant changes.

### Plugin API {: #3.68.2-plugin-api }

#### Bugfixes {: #3.68.2-plugin-api-bugfix }

- Fixed `GetOrCreateSerializerMixin` not accepting pulp_domain for the natural key creation.
  [#domain-get-create-serializer-mixin](https://github.com/pulp/pulpcore/issues/domain-get-create-serializer-mixin)

### Pulp File {: #3.68.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.68.2-pulp-cert-guard }

No significant changes.

---

## 3.68.1 (2024-11-26) {: #3.68.1 }

### REST API {: #3.68.1-rest-api }

#### Bugfixes {: #3.68.1-rest-api-bugfix }

- Fixed content-app behavior for the case where the client would get a 200 response for a package
  streamed from a Remote which did not match the expected checksum.
  Now, the connection is closed before finalizing the response.
  [#5012](https://github.com/pulp/pulpcore/issues/5012)
- Allowed to bind api and content workers to multiple addresses.
  You can specify `--bind` multiple times on the `pulpcore-{api,content}` entrypoints.
  [#6053](https://github.com/pulp/pulpcore/issues/6053)

### Plugin API {: #3.68.1-plugin-api }

No significant changes.

### Pulp File {: #3.68.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.68.1-pulp-cert-guard }

No significant changes.

---

## 3.68.0 (2024-11-12) {: #3.68.0 }

### REST API {: #3.68.0-rest-api }

#### Bugfixes {: #3.68.0-rest-api-bugfix }

- Fixed an assertion on all content being added/removed in a repository version is of the same domain.
  [#content-assert](https://github.com/pulp/pulpcore/issues/content-assert)
- Fixed incorrect count of waiting tasks in the queue for the `tasks_unblocked_queue` and `tasks_longest_unblocked_time` metrics.
  [#5941](https://github.com/pulp/pulpcore/issues/5941)
- On the content-app, added ClientConnectionError (aiohttp) as an exception that can trigger
  a retry when streaming content from a Remote.
  [#5967](https://github.com/pulp/pulpcore/issues/5967)

### Plugin API {: #3.68.0-plugin-api }

#### Features {: #3.68.0-plugin-api-feature }

- Added `pulpcore.app.util.cache_key` to the plugin api.
  Use this method to get the base-key when using the Pulp cache.
  [#cache-key](https://github.com/pulp/pulpcore/issues/cache-key)

### Pulp File {: #3.68.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.68.0-pulp-cert-guard }

No significant changes.

---

## 3.67.1 (2024-11-12) {: #3.67.1 }

### REST API {: #3.67.1-rest-api }

#### Bugfixes {: #3.67.1-rest-api-bugfix }

- Fixed an assertion on all content being added/removed in a repository version is of the same domain.
  [#content-assert](https://github.com/pulp/pulpcore/issues/content-assert)

### Plugin API {: #3.67.1-plugin-api }

No significant changes.

### Pulp File {: #3.67.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.67.1-pulp-cert-guard }

No significant changes.

---

## 3.67.0 (2024-11-06) {: #3.67.0 }

### REST API {: #3.67.0-rest-api }

#### Features {: #3.67.0-rest-api-feature }

- Added `DefaultAccessPolicy` that will always use the default policy declared on the views.
  Added `AccessPolicyFromSettings` that will read policies from the `ACCESS_POLICIES` setting first.
  [#5882](https://github.com/pulp/pulpcore/issues/5882)
- Replaced built-in opentelemetry metrics with custom middlewares. Additionally, introduced a new
  setting `OTEL_ENABLED` that toggles the opentelemetry instrumentation on and off. It defaults to
  `False`.
  [#5943](https://github.com/pulp/pulpcore/issues/5943)

#### Bugfixes {: #3.67.0-rest-api-bugfix }

- pass envvars to Signing Scripts to access GNUPGHOME
  [#5911](https://github.com/pulp/pulpcore/issues/5911)
- Fixed repository modify allowing content from separate domains.
  [#5934](https://github.com/pulp/pulpcore/issues/5934)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

#### Improved Documentation {: #3.67.0-rest-api-doc }

- Fixed pulpcore code-api generated docs, which was not using the right mkdocstring directives yet.
  [#5834](https://github.com/pulp/pulpcore/issues/5834)

### Plugin API {: #3.67.0-plugin-api }

#### Bugfixes {: #3.67.0-plugin-api-bugfix }

- Downloaders now always ensure the download ends up under `WORKING_DIRECTORY`.
  [#5912](https://github.com/pulp/pulpcore/issues/5912)

#### Deprecations {: #3.67.0-plugin-api-deprecation }

- Deprecated `AccessPolicyFromDB` for removal in 4.0.
  [#5822](https://github.com/pulp/pulpcore/issues/5822)

### Pulp File {: #3.67.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.67.0-pulp-cert-guard }

No significant changes.

---

## 3.66.1 (2024-11-06) {: #3.66.1 }

### REST API {: #3.66.1-rest-api }

#### Bugfixes {: #3.66.1-rest-api-bugfix }

- Fixed repository modify allowing content from separate domains.
  [#5934](https://github.com/pulp/pulpcore/issues/5934)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.66.1-plugin-api }

No significant changes.

### Pulp File {: #3.66.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.66.1-pulp-cert-guard }

No significant changes.

---

## 3.66.0 (2024-10-16) {: #3.66.0 }

### REST API {: #3.66.0-rest-api }

#### Features {: #3.66.0-rest-api-feature }

- Added OpenPGP keyring repository type and OpenPGP key content type.
  [#3024](https://github.com/pulp/pulpcore/issues/3024)
- Re-enabled and refactored the Domain Storage metric emitter.
  [#5762](https://github.com/pulp/pulpcore/issues/5762)
- Added a formal "immediate" type of Task and changed workers behavior to prioritize those.
  This labeling is exlusive to plugin code and should only be applied where it's known that
  the task will finish shortly, like in updates of repositories, remotes, and distributions.
  [#5767](https://github.com/pulp/pulpcore/issues/5767)

#### Bugfixes {: #3.66.0-rest-api-bugfix }

- Fixed task purge to not expect a user, when a run has been scheduled by Pulp itself.
  [#5881](https://github.com/pulp/pulpcore/issues/5881)

### Plugin API {: #3.66.0-plugin-api }

No significant changes.

### Pulp File {: #3.66.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.66.0-pulp-cert-guard }

No significant changes.

---

## 3.65.0 (2024-10-08) {: #3.65.0 }

### REST API {: #3.65.0-rest-api }

#### Bugfixes {: #3.65.0-rest-api-bugfix }

- pulp-worker fails to start with "float object cannot be interpreted as an integer" on some versions of python.
  [#5861](https://github.com/pulp/pulpcore/issues/5861)
- Fixed the name of the metrics' attribute reporting the worker's process name. Started emitting the
  name of the Pulp service with a dedicated label (i.e., job=pulp-api).
  [#5864](https://github.com/pulp/pulpcore/issues/5864)
- Started propagating headers from the content-app when using a non-default filesystem storage.
  [#5879](https://github.com/pulp/pulpcore/issues/5879)

#### Improved Documentation {: #3.65.0-rest-api-doc }

- Correct rendering of pulp bash example in reclaim-disk-space.md
  [#5876](https://github.com/pulp/pulpcore/issues/5876)

### Plugin API {: #3.65.0-plugin-api }

No significant changes.

### Pulp File {: #3.65.0-pulp-file }

#### Bugfixes {: #3.65.0-pulp-file-bugfix }

- During sync, quote the URL path for file downloads using HTTP.
  [#5686](https://github.com/pulp/pulpcore/issues/5686)

### Pulp Cert Guard {: #3.65.0-pulp-cert-guard }

No significant changes.

---

## 3.64.0 (2024-10-03) {: #3.64.0 }

### REST API {: #3.64.0-rest-api }

#### Features {: #3.64.0-rest-api-feature }

- Started using an upstream version of the OpenTelemetry aiohttp server instrumentation.
  [#5833](https://github.com/pulp/pulpcore/issues/5833)
- Included the worker's name in the ``http.server.duration`` OpenTelemetry metric attributes.
  [#5844](https://github.com/pulp/pulpcore/issues/5844)

#### Bugfixes {: #3.64.0-rest-api-bugfix }

- Started collecting artifact size metrics even after caching the served content.
  [#5817](https://github.com/pulp/pulpcore/issues/5817)

### Plugin API {: #3.64.0-plugin-api }

No significant changes.

### Pulp File {: #3.64.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.64.0-pulp-cert-guard }

No significant changes.

---

## 3.63.20 (2025-06-04) {: #3.63.20 }

### REST API {: #3.63.20-rest-api }

No significant changes.

### Plugin API {: #3.63.20-plugin-api }

No significant changes.

### Pulp File {: #3.63.20-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.20-pulp-cert-guard }

No significant changes.

---

## 3.63.19 (2025-05-27) {: #3.63.19 }

### REST API {: #3.63.19-rest-api }

#### Bugfixes {: #3.63.19-rest-api-bugfix }

- Prevent downloader session to be closed when there is a digest validation in on_demand content serving.

### Plugin API {: #3.63.19-plugin-api }

No significant changes.

### Pulp File {: #3.63.19-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.19-pulp-cert-guard }

No significant changes.

---

## 3.63.18 (2025-05-13) {: #3.63.18 }

### REST API {: #3.63.18-rest-api }

#### Bugfixes {: #3.63.18-rest-api-bugfix }

- Disable retry logic on the context of content-app on-demand streaming, as we can't recover
  from any errors after starting the streaming process (chunked transfer).
  [#5937](https://github.com/pulp/pulpcore/issues/5937)

### Plugin API {: #3.63.18-plugin-api }

No significant changes.

### Pulp File {: #3.63.18-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.18-pulp-cert-guard }

No significant changes.

---

## 3.63.17 (2025-04-24) {: #3.63.17 }

### REST API {: #3.63.17-rest-api }

#### Bugfixes {: #3.63.17-rest-api-bugfix }

- Reverted fix for #6491, it broke certificate-chains.
  [#6510](https://github.com/pulp/pulpcore/issues/6510)

### Plugin API {: #3.63.17-plugin-api }

No significant changes.

### Pulp File {: #3.63.17-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.17-pulp-cert-guard }

No significant changes.

---

## 3.63.16 (2025-04-23) {: #3.63.16 }

### REST API {: #3.63.16-rest-api }

#### Bugfixes {: #3.63.16-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)

### Plugin API {: #3.63.16-plugin-api }

No significant changes.

### Pulp File {: #3.63.16-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.16-pulp-cert-guard }

No significant changes.

---

## 3.63.15 (2025-04-22) {: #3.63.15 }

### REST API {: #3.63.15-rest-api }

#### Bugfixes {: #3.63.15-rest-api-bugfix }

- Client- and CA-certificates used in Remotes are now validated and any comments stripped
  before being applied to the Remote.
  [#6491](https://github.com/pulp/pulpcore/issues/6491)

### Plugin API {: #3.63.15-plugin-api }

#### Bugfixes {: #3.63.15-plugin-api-bugfix }

- Fixed `add_roles_for_object_creator` not handling anonymous users.

### Pulp File {: #3.63.15-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.15-pulp-cert-guard }

No significant changes.

---

## 3.63.14 (2025-04-08) {: #3.63.14 }

### REST API {: #3.63.14-rest-api }

#### Bugfixes {: #3.63.14-rest-api-bugfix }

- Fixed an oversight in the #6385 fix.

### Plugin API {: #3.63.14-plugin-api }

No significant changes.

### Pulp File {: #3.63.14-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.14-pulp-cert-guard }

No significant changes.

---

## 3.63.13 (2025-04-02) {: #3.63.13 }

### REST API {: #3.63.13-rest-api }

#### Bugfixes {: #3.63.13-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)
- Fixed pull-through caching failure when content already existed on-demand.
  [#6385](https://github.com/pulp/pulpcore/issues/6385)
- Fixed cross-domain check for RepositoryVersion fields.
  [#6388](https://github.com/pulp/pulpcore/issues/6388)

### Plugin API {: #3.63.13-plugin-api }

No significant changes.

### Pulp File {: #3.63.13-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.13-pulp-cert-guard }

No significant changes.

---

## 3.63.12 (2025-03-18) {: #3.63.12 }

### REST API {: #3.63.12-rest-api }

#### Bugfixes {: #3.63.12-rest-api-bugfix }

- Fixed cache not being invalidated when a publication was created or a repository version was deleted.
  [#6333](https://github.com/pulp/pulpcore/issues/6333)
- The Alternate Content Source sync feature has received some optimizations, making it dramatically faster.

### Plugin API {: #3.63.12-plugin-api }

No significant changes.

### Pulp File {: #3.63.12-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.12-pulp-cert-guard }

No significant changes.

---

## 3.63.11 (2025-03-03) {: #3.63.11 }

### REST API {: #3.63.11-rest-api }

#### Misc {: #3.63.11-rest-api-misc }

- [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.63.11-plugin-api }

No significant changes.

### Pulp File {: #3.63.11-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.11-pulp-cert-guard }

No significant changes.

---

## 3.63.10 (2025-02-28) {: #3.63.10 }

### REST API {: #3.63.10-rest-api }

No significant changes.

### Plugin API {: #3.63.10-plugin-api }

No significant changes.

### Pulp File {: #3.63.10-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.10-pulp-cert-guard }

No significant changes.

---

## 3.63.9 (2025-01-29) {: #3.63.9 }

### REST API {: #3.63.9-rest-api }

#### Bugfixes {: #3.63.9-rest-api-bugfix }

- Added an extra check to the task unblocking logic to catch a rare case of stuck tasks in running, but never unblocked.
  Tasks in normal operation should never end in this state, but at least with a specific upgrade it can happen.
  [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.63.9-plugin-api }

No significant changes.

### Pulp File {: #3.63.9-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.9-pulp-cert-guard }

No significant changes.

---

## 3.63.8 (2025-01-21) {: #3.63.8 }

### REST API {: #3.63.8-rest-api }

#### Bugfixes {: #3.63.8-rest-api-bugfix }

- On a request for on-demand content in the content app, a corrupted Remote that
  contains the wrong binary (for that content) prevented other Remotes from being
  attempted on future requests. Now the last failed Remotes are temporarily ignored
  and others may be picked.
  [#5725](https://github.com/pulp/pulpcore/issues/5725)

### Plugin API {: #3.63.8-plugin-api }

No significant changes.

### Pulp File {: #3.63.8-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.8-pulp-cert-guard }

No significant changes.

---

## 3.63.7 (2025-01-08) {: #3.63.7 }

### REST API {: #3.63.7-rest-api }

No significant changes.

### Plugin API {: #3.63.7-plugin-api }

No significant changes.

### Pulp File {: #3.63.7-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.7-pulp-cert-guard }

No significant changes.

---

## 3.63.6 (2024-12-13) {: #3.63.6 }

### REST API {: #3.63.6-rest-api }

No significant changes.

### Plugin API {: #3.63.6-plugin-api }

No significant changes.

### Pulp File {: #3.63.6-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.6-pulp-cert-guard }

No significant changes.

---

## 3.63.5 (2024-12-11) {: #3.63.5 }

### REST API {: #3.63.5-rest-api }

No significant changes.

### Plugin API {: #3.63.5-plugin-api }

#### Bugfixes {: #3.63.5-plugin-api-bugfix }

- Fixed `GetOrCreateSerializerMixin` not accepting pulp_domain for the natural key creation.
  [#domain-get-create-serializer-mixin](https://github.com/pulp/pulpcore/issues/domain-get-create-serializer-mixin)

### Pulp File {: #3.63.5-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.5-pulp-cert-guard }

No significant changes.

---

## 3.63.4 (2024-11-26) {: #3.63.4 }

### REST API {: #3.63.4-rest-api }

#### Bugfixes {: #3.63.4-rest-api-bugfix }

- Fixed content-app behavior for the case where the client would get a 200 response for a package
  streamed from a Remote which did not match the expected checksum.
  Now, the connection is closed before finalizing the response.
  [#5012](https://github.com/pulp/pulpcore/issues/5012)
- Allowed to bind api and content workers to multiple addresses.
  You can specify `--bind` multiple times on the `pulpcore-{api,content}` entrypoints.
  [#6053](https://github.com/pulp/pulpcore/issues/6053)

### Plugin API {: #3.63.4-plugin-api }

No significant changes.

### Pulp File {: #3.63.4-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.4-pulp-cert-guard }

No significant changes.

---

## 3.63.3 (2024-11-20) {: #3.63.3 }

### REST API {: #3.63.3-rest-api }

#### Bugfixes {: #3.63.3-rest-api-bugfix }

- Fixed incorrect count of waiting tasks in the queue for the `tasks_unblocked_queue` and `tasks_longest_unblocked_time` metrics.
  [#5941](https://github.com/pulp/pulpcore/issues/5941)

### Plugin API {: #3.63.3-plugin-api }

No significant changes.

### Pulp File {: #3.63.3-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.3-pulp-cert-guard }

No significant changes.

---

## 3.63.2 (2024-11-12) {: #3.63.2 }

### REST API {: #3.63.2-rest-api }

#### Bugfixes {: #3.63.2-rest-api-bugfix }

- Fixed an assertion on all content being added/removed in a repository version is of the same domain.
  [#content-assert](https://github.com/pulp/pulpcore/issues/content-assert)
- pulp-worker fails to start with "float object cannot be interpreted as an integer" on some versions of python.
  [#5861](https://github.com/pulp/pulpcore/issues/5861)
- Started propagating headers from the content-app when using a non-default filesystem storage.
  [#5879](https://github.com/pulp/pulpcore/issues/5879)
- Fixed task purge to not expect a user, when a run has been scheduled by Pulp itself.
  [#5881](https://github.com/pulp/pulpcore/issues/5881)
- pass envvars to Signing Scripts to access GNUPGHOME
  [#5911](https://github.com/pulp/pulpcore/issues/5911)
- On the content-app, added ClientConnectionError (aiohttp) as an exception that can trigger
  a retry when streaming content from a Remote.
  [#5967](https://github.com/pulp/pulpcore/issues/5967)

### Plugin API {: #3.63.2-plugin-api }

No significant changes.

### Pulp File {: #3.63.2-pulp-file }

#### Bugfixes {: #3.63.2-pulp-file-bugfix }

- During sync, quote the URL path for file downloads using HTTP.
  [#5686](https://github.com/pulp/pulpcore/issues/5686)

### Pulp Cert Guard {: #3.63.2-pulp-cert-guard }

No significant changes.

---

## 3.63.1 (2024-10-30) {: #3.63.1 }

### REST API {: #3.63.1-rest-api }

#### Bugfixes {: #3.63.1-rest-api-bugfix }

- Fixed repository modify allowing content from separate domains.
  [#5934](https://github.com/pulp/pulpcore/issues/5934)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.63.1-plugin-api }

No significant changes.

### Pulp File {: #3.63.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.1-pulp-cert-guard }

No significant changes.

---

## 3.63.0 (2024-10-01) {: #3.63.0 }

### REST API {: #3.63.0-rest-api }

#### Features {: #3.63.0-rest-api-feature }

- Introduced new immutable resource identifier: Pulp Resource Name (PRN). All objects within Pulp
  will now show their PRN alongside their pulp_href. The PRN can be used in lieu of the pulp_href
  in API calls when creating or filtering objects. The PRN of any object has the form of
  `prn:app_label.model_label:pulp_id`.
  [#5766](https://github.com/pulp/pulpcore/issues/5766)

#### Bugfixes {: #3.63.0-rest-api-bugfix }

- Removed opentelemetry-instrumentation-django from dependencies.
  [#5843](https://github.com/pulp/pulpcore/issues/5843)
- Made Kafka dependencies optional depending on whether the producer is configured.
  [#5850](https://github.com/pulp/pulpcore/issues/5850)

### Plugin API {: #3.63.0-plugin-api }

No significant changes.

### Pulp File {: #3.63.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.63.0-pulp-cert-guard }

No significant changes.

---

## 3.62.0 (2024-09-25) {: #3.62.0 }

### REST API {: #3.62.0-rest-api }

#### Features {: #3.62.0-rest-api-feature }

- Added `name`, `base_url` and `last_replication` filters for UpstreamPulps.
  [#4110](https://github.com/pulp/pulpcore/issues/4110)
- Added new setting ``API_ROOT_REWRITE_HEADER`` that when specified allows the API_ROOT to be rewritten
  per request based on the header's value.
  [#4207](https://github.com/pulp/pulpcore/issues/4207)
- Added new `q_select` field to UpstreamPulp to allow for more advanced filtering on upstream distributions.
  `pulp_label_select` has been removed and its values have been migrated to this new field.
  Please upgrade every API worker before issuing a new replicate task to avoid unwanted behavior.
  [#5087](https://github.com/pulp/pulpcore/issues/5087)

#### Bugfixes {: #3.62.0-rest-api-bugfix }

- Fixed Publication & RepositoryVersion's `content__in` filter to properly accept an array of strings.
  [#3634](https://github.com/pulp/pulpcore/issues/3634)

#### Improved Documentation {: #3.62.0-rest-api-doc }

- Document the environment variables used in the test fixture `bindings_cfg`.
  [#5807](https://github.com/pulp/pulpcore/issues/5807)

### Plugin API {: #3.62.0-plugin-api }

#### Features {: #3.62.0-plugin-api-feature }

- Added new ``reverse`` method that handles Pulp specific url formatting. Plugins should update
  instances of ``django.urls.reverse`` and ``rest_framework.reverse`` to this new Pulp one.
  [#4207](https://github.com/pulp/pulpcore/issues/4207)

#### Deprecations {: #3.62.0-plugin-api-deprecation }

- Deprecated Replicator's `distribution_data`, plugins should switch to `distribution_extra_fields`.
  `distribution_data` will be removed in pulpcore==3.70.
  [#3649](https://github.com/pulp/pulpcore/issues/3649)

### Pulp File {: #3.62.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.62.0-pulp-cert-guard }

No significant changes.

---

## 3.61.0 (2024-09-18) {: #3.61.0 }

### REST API {: #3.61.0-rest-api }

#### Features {: #3.61.0-rest-api-feature }

- Added new `/migrate/` endpoint to Domains that allows for migrating artifacts from one storage backend to another.
  [#3358](https://github.com/pulp/pulpcore/issues/3358)

#### Bugfixes {: #3.61.0-rest-api-bugfix }

- Fix a memory spike on deletion of large repositories.
  [#5048](https://github.com/pulp/pulpcore/issues/5048)
- Fixed a logging issue, when a task marked for cancelling that finished produced an unecessary stack trace.

### Plugin API {: #3.61.0-plugin-api }

No significant changes.

### Pulp File {: #3.61.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.61.0-pulp-cert-guard }

No significant changes.

---

## 3.60.0 (2024-09-10) {: #3.60.0 }

### REST API {: #3.60.0-rest-api }

#### Features {: #3.60.0-rest-api-feature }

- Added metrics reporting the size of served artifacts.
  [#4602](https://github.com/pulp/pulpcore/issues/4602)
- Pulp-workers now also log domain name in which the task is executed.
  [#5693](https://github.com/pulp/pulpcore/issues/5693)

### Plugin API {: #3.60.0-plugin-api }

No significant changes.

### Pulp File {: #3.60.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.60.0-pulp-cert-guard }

No significant changes.

---

## 3.59.0 (2024-08-28) {: #3.59.0 }

### REST API {: #3.59.0-rest-api }

#### Features {: #3.59.0-rest-api-feature }

- Added ability to cancel all tasks in a TaskGroup through a partial update with `state=canceled`.
  [#4125](https://github.com/pulp/pulpcore/issues/4125)

#### Bugfixes {: #3.59.0-rest-api-bugfix }

- Added a default access policy where only admin users will be able to upload and
  read/list artifacts.
  [#5525](https://github.com/pulp/pulpcore/issues/5525)

#### Improved Documentation {: #3.59.0-rest-api-doc }

- Improved documentation for the complex filtering.
  [#5703](https://github.com/pulp/pulpcore/issues/5703)

#### Deprecations {: #3.59.0-rest-api-deprecation }

- The `DELETE` request method from Artifact viewset has been deprecated and
  planned for removal.
  [#5525](https://github.com/pulp/pulpcore/issues/5525)

### Plugin API {: #3.59.0-plugin-api }

No significant changes.

### Pulp File {: #3.59.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.59.0-pulp-cert-guard }

No significant changes.

---

## 3.58.0 (2024-08-14) {: #3.58.0 }

### REST API {: #3.58.0-rest-api }

#### Features {: #3.58.0-rest-api-feature }

- Optimized replication to skip content syncing when upstream distributions are unchanged. The
  optimization considers changes on the upstream distributions serving content directly from a
  publication or repository version.
  [#5493](https://github.com/pulp/pulpcore/issues/5493)
- Exposed the `no_content_change_since` field on the Distribution API endpoint to return a timestamp
  since when the distributed content served by a distribution has not changed. If the value equals to
  `null`, no such a guarantee about the content change is given.
  [#5687](https://github.com/pulp/pulpcore/issues/5687)

#### Bugfixes {: #3.58.0-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.58.0-plugin-api }

No significant changes.

### Pulp File {: #3.58.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.58.0-pulp-cert-guard }

No significant changes.

---

## 3.57.1 (2024-08-10) {: #3.57.1 }

### REST API {: #3.57.1-rest-api }

#### Bugfixes {: #3.57.1-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.57.1-plugin-api }

No significant changes.

### Pulp File {: #3.57.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.57.1-pulp-cert-guard }

No significant changes.

---

## 3.57.0 (2024-08-07) {: #3.57.0 }

### REST API {: #3.57.0-rest-api }

#### Features {: #3.57.0-rest-api-feature }

- Added the ability to save task's diagnostics data as artifacts. These artifacts are available at the
  task's detail endpoint. To download them, issue a GET request to `${TASK_HREF}profile_artifacts/`.
  The artifacts are cleaned up automatically by the orphan cleanup.
  [#5422](https://github.com/pulp/pulpcore/issues/5422)
- Improved performance when handling tasks by deferred loading of encrypted args.
  This also allows seeing and purging tasks in case the symmetric db key was lost.

#### Bugfixes {: #3.57.0-rest-api-bugfix }

- Implemented batching for artifact deletion to handle the reclaim space task for large repositories.
  [#5635](https://github.com/pulp/pulpcore/issues/5635)
- Fixed urlizing of api hrefs in clickable api.
  [#5664](https://github.com/pulp/pulpcore/issues/5664)

#### Improved Documentation {: #3.57.0-rest-api-doc }

- Updated REMOTE-USER header definition (to use hyphen, instead of underscore) due
  to gunicorn version update blocking its usage for security purposes.
  [#5478](https://github.com/pulp/pulpcore/issues/5478)

### Plugin API {: #3.57.0-plugin-api }

#### Bugfixes {: #3.57.0-plugin-api-bugfix }

- Change field name `url` to `file_url` on UploadSerializerFieldsMixin to avoid conflicting fields in
  plugins.
  [#5633](https://github.com/pulp/pulpcore/issues/5633)

### Pulp File {: #3.57.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.57.0-pulp-cert-guard }

No significant changes.

---

## 3.56.1 (2024-07-26) {: #3.56.1 }


### REST API {: #3.56.1-rest-api }

No significant changes.

### Plugin API {: #3.56.1-plugin-api }

#### Bugfixes {: #3.56.1-plugin-api-bugfix }

- Change field name `url` to `file_url` on UploadSerializerFieldsMixin to avoid conflicting fields in
  plugins.
  [#5633](https://github.com/pulp/pulpcore/issues/5633)

### Pulp File {: #3.56.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.56.1-pulp-cert-guard }

No significant changes.

---

## 3.56.0 (2024-07-23) {: #3.56.0 }


### REST API {: #3.56.0-rest-api }

#### Features {: #3.56.0-rest-api-feature }

- Added kafka integration (tech-preview).
  [#5337](https://github.com/pulp/pulpcore/issues/5337)
- Added RBAC for `TaskGroups` API.
  [#5497](https://github.com/pulp/pulpcore/issues/5497)

#### Bugfixes {: #3.56.0-rest-api-bugfix }

- Fixed path title at content directory index to include domain's name when enabled.
  [#4253](https://github.com/pulp/pulpcore/issues/4253)
- Fixed content upload for existing on-demand content not properly storing the new artifact.
  [#5501](https://github.com/pulp/pulpcore/issues/5501)
- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)
- Added a note about the default value of the `SECRET_KEY` setting.
  [#5529](https://github.com/pulp/pulpcore/issues/5529)
- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)
- Fixed a bug in `has_repo_or_repo_ver_param_model_or_obj_perms` function to make
  it work with plugin Repositories.
  [#5619](https://github.com/pulp/pulpcore/issues/5619)

### Plugin API {: #3.56.0-plugin-api }

#### Features {: #3.56.0-plugin-api-feature }

- Added new `url` field to UploadSerializerFieldsMixin that will download the file used for the content upload task.
  [#4608](https://github.com/pulp/pulpcore/issues/4608)

### Pulp File {: #3.56.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.56.0-pulp-cert-guard }

No significant changes.

---

## 3.55.3 (2024-07-23) {: #3.55.3 }


### REST API {: #3.55.3-rest-api }

#### Bugfixes {: #3.55.3-rest-api-bugfix }

- Fixed a bug in `has_repo_or_repo_ver_param_model_or_obj_perms` function to make
  it work with plugin Repositories.
  [#5619](https://github.com/pulp/pulpcore/issues/5619)

### Plugin API {: #3.55.3-plugin-api }

No significant changes.

### Pulp File {: #3.55.3-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.55.3-pulp-cert-guard }

No significant changes.

---

## 3.55.2 (2024-07-16) {: #3.55.2 }


### REST API {: #3.55.2-rest-api }

#### Bugfixes {: #3.55.2-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.55.2-plugin-api }

No significant changes.

### Pulp File {: #3.55.2-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.55.2-pulp-cert-guard }

No significant changes.

---

## 3.55.1 (2024-06-24) {: #3.55.1 }


### REST API {: #3.55.1-rest-api }

#### Bugfixes {: #3.55.1-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.55.1-plugin-api }

No significant changes.

### Pulp File {: #3.55.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.55.1-pulp-cert-guard }

No significant changes.

---

## 3.55.0 (2024-06-18) {: #3.55.0 }


### REST API {: #3.55.0-rest-api }

#### Features {: #3.55.0-rest-api-feature }

- Added two new metrics related to Tasks: `pulp_tasks_unblocked_waiting_queue` has the number of unblocked waiting tasks that have been waiting longer than five(5) seconds,
  while `pulp_tasks_longest_unblocked_waiting_time` record the time in seconds of the longest waiting time for a task in the queue.
  [#3821](https://github.com/pulp/pulpcore/issues/3821)
- Added indices to `object_id` on user and group roles tables.
  [#5369](https://github.com/pulp/pulpcore/issues/5369)
- Add `pulpcore-manager openapi` command to help generate `api.json` for bindings.
  [#5462](https://github.com/pulp/pulpcore/issues/5462)

#### Bugfixes {: #3.55.0-rest-api-bugfix }

- Added Pulp side batching to fix large exports that were failing due to changes in psycopg.
  [#5375](https://github.com/pulp/pulpcore/issues/5375)
- Added a lock to avoid multiple workers sending metrics at the same time.
  [#5442](https://github.com/pulp/pulpcore/issues/5442)
- Pulpcore no longer assumes that every plugin implementing the Replication feature supports
  Publications.
  [#5464](https://github.com/pulp/pulpcore/issues/5464)

#### Removals {: #3.55.0-rest-api-removal }

- Removed ``pulp_hrefs`` from task reserved resources record. Task resource locking will now use Pulp
  Resource Names (PRNs) that are immutable with respect to settings changes. A resource's ``pulp_href``
  can still be used in task's ``reserved_resources`` filter, Pulp will convert it to the new format
  behind the scenes.
  [#5148](https://github.com/pulp/pulpcore/issues/5148)
- Removed task's ``reserved_resources_record`` filter. Please use ``reserved_resources`` instead.
  [#5415](https://github.com/pulp/pulpcore/issues/5415)
- Removed deprecated `plugin` query string parameter from api doc endpoint.
  Please use a list of app labels with the `component` parameter instead.
- Upgrade the version of drf spectacular to 0.27.2.

#### Misc {: #3.55.0-rest-api-misc }

- [#5420](https://github.com/pulp/pulpcore/issues/5420), [#5468](https://github.com/pulp/pulpcore/issues/5468)

### Plugin API {: #3.55.0-plugin-api }

#### Removals {: #3.55.0-plugin-api-removal }

- Removed deprecated functional test fixtures for api clients.
  The new `pulpcore_bindings`, `file_bindings`, ... fixtures should be used instead.
  [#5417](https://github.com/pulp/pulpcore/issues/5417)

### Pulp File {: #3.55.0-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.55.0-pulp-cert-guard }

No significant changes.

---

## 3.54.1 (2024-06-18) {: #3.54.1 }


### REST API {: #3.54.1-rest-api }

#### Bugfixes {: #3.54.1-rest-api-bugfix }

- Pulpcore no longer assumes that every plugin implementing the Replication feature supports
  Publications.
  [#5464](https://github.com/pulp/pulpcore/issues/5464)

#### Misc {: #3.54.1-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.54.1-plugin-api }

No significant changes.

### Pulp File {: #3.54.1-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.54.1-pulp-cert-guard }

No significant changes.

---

## 3.54.0 (2024-05-22) {: #3.54.0 }

### REST API

#### Features

-   Added search indices to the Task table to speed up task operations.
    [#5367](https://github.com/pulp/pulpcore/issues/5367)
-   Added a scheduled version of task purge.
    You need to adjust the "TASK_PROTECTION_TIME" setting in order to use it.
    [#5378](https://github.com/pulp/pulpcore/issues/5378)

#### Bugfixes

-   Renamed `name` to `domain_name` in the metric's attributes reporting domain's disk usage.
    [#5134](https://github.com/pulp/pulpcore/issues/5134)
-   Fixed content directory listing returning 500 in certain scenarios due to missing artifact sizes.
    [#5318](https://github.com/pulp/pulpcore/issues/5318)
-   Fixed a bug related to replication of AppStream and BaseOS repositories of CentOS.
    [#5358](https://github.com/pulp/pulpcore/issues/5358)
-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

#### Improved Documentation

-   Made the complex filtering feature production-ready. This feature supports a special q filter
    that allows combinations of other filters with NOT, AND and OR operations.
    [#5319](https://github.com/pulp/pulpcore/issues/5319)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.53.0 (2024-04-30) {: #3.53.0 }

### REST API

#### Features

-   Added integration with Sentry/GlitchTip.
    [#5285](https://github.com/pulp/pulpcore/issues/5285)

#### Bugfixes

-   Update jquery version from 3.5.1 to 3.7.1 in API.html template
    [#5306](https://github.com/pulp/pulpcore/issues/5306)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.52.0 (2024-04-23) {: #3.52.0 }

### REST API

#### Features

-   Added a Liveness API that can be used for the livenessProbe in k8s.
    [#5243](https://github.com/pulp/pulpcore/issues/5243)

#### Bugfixes

-   Fixed bug where Last-Modified header of packages in django-storages was being updated on duplicate
    uploads.
    [#5149](https://github.com/pulp/pulpcore/issues/5149)
-   Fixed bug which prevented the Pulp API usaging from a web browser
    [#5250](https://github.com/pulp/pulpcore/issues/5250)

#### Misc

-

### Plugin API

#### Bugfixes

-   Fixed a bug where models with auto assign permissions failed when no viewset was attached.
    [#5267](https://github.com/pulp/pulpcore/issues/5267)

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.51.3 (2024-04-23) {: #3.51.3 }

### REST API

#### Bugfixes

-   Fixed bug which prevented the Pulp API usaging from a web browser
    [#5250](https://github.com/pulp/pulpcore/issues/5250)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.51.2 (2024-04-17) {: #3.51.2 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.51.1 (2024-04-17) {: #3.51.1 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Fixed a bug where models with auto assign permissions failed when no viewset was attached.
    [#5267](https://github.com/pulp/pulpcore/issues/5267)

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.51.0 (2024-04-16) {: #3.51.0 }

### REST API

#### Features

-   Add a new SecurityScheme for external authentication in the OpenAPI schema.
    [#5179](https://github.com/pulp/pulpcore/issues/5179)

#### Bugfixes

-   Fix Upload failing to run post create hooks.
    On installations using the default access policy, this fixes the automatic owner assignment for
    users with the core.upload_create role on upload objects.
    [#5199](https://github.com/pulp/pulpcore/issues/5199)
-   Catch any DatabaseError, not only OperationalError to trigger reconnect to the database
    [#5259](https://github.com/pulp/pulpcore/issues/5259)

#### Misc

-   [#4592](https://github.com/pulp/pulpcore/issues/4592), [#5010](https://github.com/pulp/pulpcore/issues/5010)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.50.3 (2024-04-16) {: #3.50.3 }

### REST API

#### Bugfixes

-   Fix Upload failing to run post create hooks.
    On installations using the default access policy, this fixes the automatic owner assignment for
    users with the core.upload_create role on upload objects.
    [#5199](https://github.com/pulp/pulpcore/issues/5199)
-   Catch any DatabaseError, not only OperationalError to trigger reconnect to the database
    [#5259](https://github.com/pulp/pulpcore/issues/5259)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.50.2 (2024-04-09) {: #3.50.2 }

### REST API

#### Misc

-   [#5010](https://github.com/pulp/pulpcore/issues/5010)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.50.1 (2024-04-03) {: #3.50.1 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.50.0 (2024-03-26) {: #3.50.0 }

### REST API

#### Bugfixes

-   Fixed an issue in replicate, where an existing distribution had a conflicting publication set.
    [#4637](https://github.com/pulp/pulpcore/issues/4637)
-   Fixed content directory listing not showing file size for 0-byte files.
    [#5100](https://github.com/pulp/pulpcore/issues/5100)

#### Deprecations

-   Task filter `reserved_resources_record` has been deprecated and planned for removal in pulpcore 3.55.
    [#4315](https://github.com/pulp/pulpcore/issues/4315)

#### Misc

-   [#4315](https://github.com/pulp/pulpcore/issues/4315)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.42 (2025-05-21) {: #3.49.42 }

### REST API {: #3.49.42-rest-api }

No significant changes.

### Plugin API {: #3.49.42-plugin-api }

No significant changes.

### Pulp File {: #3.49.42-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.42-pulp-cert-guard }

No significant changes.

---

## 3.49.41 (2025-05-13) {: #3.49.41 }

### REST API {: #3.49.41-rest-api }

#### Bugfixes {: #3.49.41-rest-api-bugfix }

- Disable retry logic on the context of content-app on-demand streaming, as we can't recover
  from any errors after starting the streaming process (chunked transfer).
  [#5937](https://github.com/pulp/pulpcore/issues/5937)

### Plugin API {: #3.49.41-plugin-api }

No significant changes.

### Pulp File {: #3.49.41-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.41-pulp-cert-guard }

No significant changes.

---

## 3.49.40 (2025-05-06) {: #3.49.40 }

### REST API {: #3.49.40-rest-api }

#### Bugfixes {: #3.49.40-rest-api-bugfix }

- Fixed to not use the OpenTelemetryMiddleware when PULP_OTEL_ENABLED is not set.
  [#6529](https://github.com/pulp/pulpcore/issues/6529)

### Plugin API {: #3.49.40-plugin-api }

No significant changes.

### Pulp File {: #3.49.40-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.40-pulp-cert-guard }

No significant changes.

---

## 3.49.39 (2025-04-24) {: #3.49.39 }

### REST API {: #3.49.39-rest-api }

#### Bugfixes {: #3.49.39-rest-api-bugfix }

- Reverted fix for #6491, it broke certificate-chains.
  [#6510](https://github.com/pulp/pulpcore/issues/6510)

### Plugin API {: #3.49.39-plugin-api }

No significant changes.

### Pulp File {: #3.49.39-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.39-pulp-cert-guard }

No significant changes.

---

## 3.49.38 (2025-04-23) {: #3.49.38 }

### REST API {: #3.49.38-rest-api }

#### Bugfixes {: #3.49.38-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)

### Plugin API {: #3.49.38-plugin-api }

No significant changes.

### Pulp File {: #3.49.38-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.38-pulp-cert-guard }

No significant changes.

---

## 3.49.37 (2025-04-22) {: #3.49.37 }

### REST API {: #3.49.37-rest-api }

#### Bugfixes {: #3.49.37-rest-api-bugfix }

- Client- and CA-certificates used in Remotes are now validated and any comments stripped
  before being applied to the Remote.
  [#6491](https://github.com/pulp/pulpcore/issues/6491)

### Plugin API {: #3.49.37-plugin-api }

No significant changes.

### Pulp File {: #3.49.37-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.37-pulp-cert-guard }

No significant changes.

---

## 3.49.36 (2025-04-08) {: #3.49.36 }

### REST API {: #3.49.36-rest-api }

#### Bugfixes {: #3.49.36-rest-api-bugfix }

- Fixed an oversight in the #6385 fix.

### Plugin API {: #3.49.36-plugin-api }

No significant changes.

### Pulp File {: #3.49.36-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.36-pulp-cert-guard }

No significant changes.

---

## 3.49.35 (2025-04-02) {: #3.49.35 }

### REST API {: #3.49.35-rest-api }

#### Bugfixes {: #3.49.35-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)
- Fixed pull-through caching failure when content already existed on-demand.
  [#6385](https://github.com/pulp/pulpcore/issues/6385)
- Fixed cross-domain check for RepositoryVersion fields.
  [#6388](https://github.com/pulp/pulpcore/issues/6388)

### Plugin API {: #3.49.35-plugin-api }

No significant changes.

### Pulp File {: #3.49.35-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.35-pulp-cert-guard }

No significant changes.

---

## 3.49.34 (2025-03-18) {: #3.49.34 }

### REST API {: #3.49.34-rest-api }

#### Bugfixes {: #3.49.34-rest-api-bugfix }

- Fixed cache not being invalidated when a publication was created or a repository version was deleted.
  [#6333](https://github.com/pulp/pulpcore/issues/6333)
- The Alternate Content Source sync feature has received some optimizations, making it dramatically faster.

### Plugin API {: #3.49.34-plugin-api }

No significant changes.

### Pulp File {: #3.49.34-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.34-pulp-cert-guard }

No significant changes.

---

## 3.49.33 (2025-03-03) {: #3.49.33 }

### REST API {: #3.49.33-rest-api }

#### Misc {: #3.49.33-rest-api-misc }

- [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.49.33-plugin-api }

No significant changes.

### Pulp File {: #3.49.33-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.33-pulp-cert-guard }

No significant changes.

---

## 3.49.32 (2025-01-29) {: #3.49.32 }

### REST API {: #3.49.32-rest-api }

#### Bugfixes {: #3.49.32-rest-api-bugfix }

- Added an extra check to the task unblocking logic to catch a rare case of stuck tasks in running, but never unblocked.
  Tasks in normal operation should never end in this state, but at least with a specific upgrade it can happen.
  [#6225](https://github.com/pulp/pulpcore/issues/6225)

### Plugin API {: #3.49.32-plugin-api }

No significant changes.

### Pulp File {: #3.49.32-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.32-pulp-cert-guard }

No significant changes.

---

## 3.49.31 (2025-01-21) {: #3.49.31 }

### REST API {: #3.49.31-rest-api }

#### Bugfixes {: #3.49.31-rest-api-bugfix }

- On a request for on-demand content in the content app, a corrupted Remote that
  contains the wrong binary (for that content) prevented other Remotes from being
  attempted on future requests. Now the last failed Remotes are temporarily ignored
  and others may be picked.
  [#5725](https://github.com/pulp/pulpcore/issues/5725)

### Plugin API {: #3.49.31-plugin-api }

No significant changes.

### Pulp File {: #3.49.31-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.31-pulp-cert-guard }

No significant changes.

---

## 3.49.30 (2025-01-08) {: #3.49.30 }

### REST API {: #3.49.30-rest-api }

No significant changes.

### Plugin API {: #3.49.30-plugin-api }

No significant changes.

### Pulp File {: #3.49.30-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.30-pulp-cert-guard }

No significant changes.

---

## 3.49.29 (2024-12-18) {: #3.49.29 }

### REST API {: #3.49.29-rest-api }

No significant changes.

### Plugin API {: #3.49.29-plugin-api }

No significant changes.

### Pulp File {: #3.49.29-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.29-pulp-cert-guard }

No significant changes.

---

## 3.49.28 (2024-12-13) {: #3.49.28 }

### REST API {: #3.49.28-rest-api }

No significant changes.

### Plugin API {: #3.49.28-plugin-api }

No significant changes.

### Pulp File {: #3.49.28-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.28-pulp-cert-guard }

No significant changes.

---

## 3.49.27 (2024-12-07) {: #3.49.27 }

### REST API {: #3.49.27-rest-api }

No significant changes.

### Plugin API {: #3.49.27-plugin-api }

#### Bugfixes {: #3.49.27-plugin-api-bugfix }

- Fixed `GetOrCreateSerializerMixin` not accepting pulp_domain for the natural key creation.
  [#domain-get-create-serializer-mixin](https://github.com/pulp/pulpcore/issues/domain-get-create-serializer-mixin)

### Pulp File {: #3.49.27-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.27-pulp-cert-guard }

No significant changes.

---

## 3.49.26 (2024-11-29) {: #3.49.26 }

### REST API {: #3.49.26-rest-api }

No significant changes.

### Plugin API {: #3.49.26-plugin-api }

No significant changes.

### Pulp File {: #3.49.26-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.26-pulp-cert-guard }

No significant changes.

---

## 3.49.25 (2024-11-26) {: #3.49.25 }

### REST API {: #3.49.25-rest-api }

#### Bugfixes {: #3.49.25-rest-api-bugfix }

- Fixed content-app behavior for the case where the client would get a 200 response for a package
  streamed from a Remote which did not match the expected checksum.
  Now, the connection is closed before finalizing the response.
  [#5012](https://github.com/pulp/pulpcore/issues/5012)
- Fixed content directory listing returning 500 in certain scenarios due to missing artifact sizes.
  [#5318](https://github.com/pulp/pulpcore/issues/5318)
- Allowed to bind api and content workers to multiple addresses.
  You can specify `--bind` multiple times on the `pulpcore-{api,content}` entrypoints.
  [#6053](https://github.com/pulp/pulpcore/issues/6053)

### Plugin API {: #3.49.25-plugin-api }

No significant changes.

### Pulp File {: #3.49.25-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.25-pulp-cert-guard }

No significant changes.

---

## 3.49.24 (2024-11-12) {: #3.49.24 }

### REST API {: #3.49.24-rest-api }

#### Bugfixes {: #3.49.24-rest-api-bugfix }

- Fixed an assertion on all content being added/removed in a repository version is of the same domain.
  [#content-assert](https://github.com/pulp/pulpcore/issues/content-assert)
- On the content-app, added ClientConnectionError (aiohttp) as an exception that can trigger
  a retry when streaming content from a Remote.
  [#5967](https://github.com/pulp/pulpcore/issues/5967)

### Plugin API {: #3.49.24-plugin-api }

No significant changes.

### Pulp File {: #3.49.24-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.24-pulp-cert-guard }

No significant changes.

---

## 3.49.23 (2024-11-06) {: #3.49.23 }

### REST API {: #3.49.23-rest-api }

#### Bugfixes {: #3.49.23-rest-api-bugfix }

- Fixed repository modify allowing content from separate domains.
  [#5934](https://github.com/pulp/pulpcore/issues/5934)
- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.49.23-plugin-api }

#### Bugfixes {: #3.49.23-plugin-api-bugfix }

- Downloaders now always ensure the download ends up under `WORKING_DIRECTORY`.
  [#5912](https://github.com/pulp/pulpcore/issues/5912)

### Pulp File {: #3.49.23-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.23-pulp-cert-guard }

No significant changes.

---

## 3.49.22 (2024-10-17) {: #3.49.22 }

### REST API {: #3.49.22-rest-api }

#### Bugfixes {: #3.49.22-rest-api-bugfix }

- pass envvars to Signing Scripts to access GNUPGHOME
  [#5911](https://github.com/pulp/pulpcore/issues/5911)

### Plugin API {: #3.49.22-plugin-api }

No significant changes.

### Pulp File {: #3.49.22-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.22-pulp-cert-guard }

No significant changes.

---

## 3.49.21 (2024-10-09) {: #3.49.21 }

### REST API {: #3.49.21-rest-api }

No significant changes.

### Plugin API {: #3.49.21-plugin-api }

No significant changes.

### Pulp File {: #3.49.21-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.21-pulp-cert-guard }

No significant changes.

---

## 3.49.20 (2024-09-18) {: #3.49.20 }

### REST API {: #3.49.20-rest-api }

No significant changes.

### Plugin API {: #3.49.20-plugin-api }

No significant changes.

### Pulp File {: #3.49.20-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.20-pulp-cert-guard }

No significant changes.

---

## 3.49.19 (2024-09-03) {: #3.49.19 }

### REST API {: #3.49.19-rest-api }

No significant changes.

### Plugin API {: #3.49.19-plugin-api }

No significant changes.

### Pulp File {: #3.49.19-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.19-pulp-cert-guard }

No significant changes.

---

## 3.49.18 (2024-08-28) {: #3.49.18 }

### REST API {: #3.49.18-rest-api }

#### Bugfixes {: #3.49.18-rest-api-bugfix }

- Fixed urlizing of api hrefs in clickable api.
  [#5664](https://github.com/pulp/pulpcore/issues/5664)

### Plugin API {: #3.49.18-plugin-api }

No significant changes.

### Pulp File {: #3.49.18-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.18-pulp-cert-guard }

No significant changes.

---

## 3.49.17 (2024-08-10) {: #3.49.17 }

### REST API {: #3.49.17-rest-api }

#### Bugfixes {: #3.49.17-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.49.17-plugin-api }

No significant changes.

### Pulp File {: #3.49.17-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.17-pulp-cert-guard }

No significant changes.

---

## 3.49.16 (2024-08-06) {: #3.49.16 }

### REST API {: #3.49.16-rest-api }

No significant changes.

### Plugin API {: #3.49.16-plugin-api }

No significant changes.

### Pulp File {: #3.49.16-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.16-pulp-cert-guard }

No significant changes.

---

## 3.49.15 (2024-07-23) {: #3.49.15 }


### REST API {: #3.49.15-rest-api }

#### Bugfixes {: #3.49.15-rest-api-bugfix }

- Fixed a bug in `has_repo_or_repo_ver_param_model_or_obj_perms` function to make
  it work with plugin Repositories.
  [#5619](https://github.com/pulp/pulpcore/issues/5619)

### Plugin API {: #3.49.15-plugin-api }

No significant changes.

### Pulp File {: #3.49.15-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.15-pulp-cert-guard }

No significant changes.

---

## 3.49.14 (2024-07-16) {: #3.49.14 }


### REST API {: #3.49.14-rest-api }

#### Bugfixes {: #3.49.14-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.49.14-plugin-api }

No significant changes.

### Pulp File {: #3.49.14-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.14-pulp-cert-guard }

No significant changes.

---

## 3.49.13 (2024-07-02) {: #3.49.13 }


### REST API {: #3.49.13-rest-api }

#### Bugfixes {: #3.49.13-rest-api-bugfix }

- Update jquery version from 3.5.1 to 3.7.1 in API.html template
  [#5306](https://github.com/pulp/pulpcore/issues/5306)

### Plugin API {: #3.49.13-plugin-api }

No significant changes.

### Pulp File {: #3.49.13-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.13-pulp-cert-guard }

No significant changes.

---

## 3.49.12 (2024-06-24) {: #3.49.12 }


### REST API {: #3.49.12-rest-api }

#### Bugfixes {: #3.49.12-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.49.12-plugin-api }

No significant changes.

### Pulp File {: #3.49.12-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.12-pulp-cert-guard }

No significant changes.

---

## 3.49.11 (2024-06-18) {: #3.49.11 }


### REST API {: #3.49.11-rest-api }

#### Bugfixes {: #3.49.11-rest-api-bugfix }

- Pulpcore no longer assumes that every plugin implementing the Replication feature supports
  Publications.
  [#5464](https://github.com/pulp/pulpcore/issues/5464)

#### Misc {: #3.49.11-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.49.11-plugin-api }

No significant changes.

### Pulp File {: #3.49.11-pulp-file }

No significant changes.

### Pulp Cert Guard {: #3.49.11-pulp-cert-guard }

No significant changes.

---

## 3.49.10 (2024-05-23) {: #3.49.10 }

### REST API

#### Bugfixes

-   Added Pulp side batching to fix large exports that were failing due to changes in psycopg.
    [#5375](https://github.com/pulp/pulpcore/issues/5375)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.9 (2024-05-22) {: #3.49.9 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.8 (2024-05-16) {: #3.49.8 }

### REST API

#### Bugfixes

-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.7 (2024-05-07) {: #3.49.7 }

### REST API

#### Bugfixes

-   Fixed bug which prevented the Pulp API usaging from a web browser
    [#5250](https://github.com/pulp/pulpcore/issues/5250)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.6 (2024-04-30) {: #3.49.6 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.5 (2024-04-17) {: #3.49.5 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.4 (2024-04-16) {: #3.49.4 }

### REST API

#### Bugfixes

-   Catch any DatabaseError, not only OperationalError to trigger reconnect to the database
    [#5259](https://github.com/pulp/pulpcore/issues/5259)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.3 (2024-03-27) {: #3.49.3 }

### REST API

#### Bugfixes

-   Fix import in wsgi preventing startup.
    [#5189](https://github.com/pulp/pulpcore/issues/5189)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.2 (2024-03-26) {: #3.49.2 }

### REST API

#### Bugfixes

-   Fixed an issue in replicate, where an existing distribution had a conflicting publication set.
    [#4637](https://github.com/pulp/pulpcore/issues/4637)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.1 (2024-03-19) {: #3.49.1 }

### REST API

#### Bugfixes

-   Fixed content directory listing not showing file size for 0-byte files.
    [#5100](https://github.com/pulp/pulpcore/issues/5100)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.49.0 (2024-03-05) {: #3.49.0 }

### REST API

No significant changes.

### Plugin API

#### Features

-   Added NoArtifactContentViewSet for content creation that does not require a file to be uploaded.
    [#5086](https://github.com/pulp/pulpcore/issues/5086)

### Pulp File

#### Misc

-   [#5055](https://github.com/pulp/pulpcore/issues/5055)

### Pulp Cert Guard

#### Misc

-   [#5054](https://github.com/pulp/pulpcore/issues/5054)

---

## 3.48.0 (2024-02-28) {: #3.48.0 }

### REST API

#### Features

-   Added a serializer to output pulp_last_updated field on pulp resources.
    [#5033](https://github.com/pulp/pulpcore/issues/5033)
-   Added `unblocked_at` to tasks to distingish waiting for other resources from waiting for a free worker.
    [#5057](https://github.com/pulp/pulpcore/issues/5057)

#### Bugfixes

-   Fixed a theoretical race condition leading to improper locking when dispatching tasks.
    [#5071](https://github.com/pulp/pulpcore/issues/5071)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.47.0 (2024-02-22) {: #3.47.0 }

### REST API

#### Features

-   Started emitting metrics that report disk usage within a domain. The metrics are sent to the
    collector every 60 seconds. The interval can be adjusted with the `OTEL_METRIC_EXPORT_INTERVAL`
    environemnt variable.
    [#4603](https://github.com/pulp/pulpcore/issues/4603)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.46.0 (2024-02-13) {: #3.46.0 }

### REST API

#### Bugfixes

-   Taught downloader to trust system-cert-store on HTTPS proxy connections.
    [#3036](https://github.com/pulp/pulpcore/issues/3036)
-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)
-   Added a serializer validation for domain names with more than 50 characters.
    [#4976](https://github.com/pulp/pulpcore/issues/4976)

#### Misc

-   [#4589](https://github.com/pulp/pulpcore/issues/4589)

### Plugin API

#### Features

-   Exposed `TimeoutException` to plugin writers.
    [#5024](https://github.com/pulp/pulpcore/issues/5024)

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.45.4 (2024-03-26) {: #3.45.4 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.45.3 (2024-03-05) {: #3.45.3 }

### REST API

No significant changes.

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.45.2 (2024-02-13) {: #3.45.2 }

### REST API

#### Misc

-   [#4589](https://github.com/pulp/pulpcore/issues/4589)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.45.1 (2024-01-30) {: #3.45.1 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.45.0 (2024-01-24) {: #3.45.0 }

### REST API

#### Features

-   Added `orphaned_for` filters to artifact and content endpoints to filter content that has been
    orphaned for a given number of minutes.
    [#3364](https://github.com/pulp/pulpcore/issues/3364)
-   Added `pulp-certguard` as a resident plugin.
    [#4626](https://github.com/pulp/pulpcore/issues/4626)

#### Bugfixes

-   Fixed a bug where publications couldn't be created from repository versions when using RBAC.
    [#4932](https://github.com/pulp/pulpcore/issues/4932)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

### Pulp Cert Guard

No significant changes.

---

## 3.44.1 (2024-01-17) {: #3.44.1 }

### REST API

#### Bugfixes

-   Fixed a bug where publications couldn't be created from repository versions when using RBAC.
    [#4932](https://github.com/pulp/pulpcore/issues/4932)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

---

## 3.44.0 (2024-01-16) {: #3.44.0 }

### REST API

#### Features

-   Added "module" to status api.
    [#4728](https://github.com/pulp/pulpcore/issues/4728)
-   Enabled the gunicorn applications for `pulpcore-api` and `pulpcore-content` to load configurations from the "gunicorn.conf.py" file.
    [#4917](https://github.com/pulp/pulpcore/issues/4917)

#### Bugfixes

-   Repo versions are now protected from deletion if they are being used by Pulp to distribute content.
    Users must first update any necessary distributions before deleting a protected repo version.
    [#2705](https://github.com/pulp/pulpcore/issues/2705)
-   Fixed a bug in the repository version repair API for non-default domains.
    [#4776](https://github.com/pulp/pulpcore/issues/4776),
    [#4806](https://github.com/pulp/pulpcore/issues/4806)
-   Fix a bug in import/export that could result in a division-by-zero during import.
    [#4777](https://github.com/pulp/pulpcore/issues/4777)
-   Ensure the Redis cache is actually respecting the TTL.
    [#4845](https://github.com/pulp/pulpcore/issues/4845)
-   Fixed an issue with importing async-timeout in Python 3.11.
    [#4923](https://github.com/pulp/pulpcore/issues/4923)
-   Fixed RBAC related bug where syncing a repository with a predefined remote required specifying the
    remote's HREF at sync time.
    [#4925](https://github.com/pulp/pulpcore/issues/4925)

#### Removals

-   The python package for the `file` plugin is now correctly reporting as `"pulpcore"`.
    [#4728](https://github.com/pulp/pulpcore/issues/4728)

#### Deprecations

-   Deprecated the query parameter `plugin` on the api doc endpoint in favor of `component`.
    [#4728](https://github.com/pulp/pulpcore/issues/4728)

#### Misc

-   [#4751](https://github.com/pulp/pulpcore/issues/4751), [#4850](https://github.com/pulp/pulpcore/issues/4850), [#4881](https://github.com/pulp/pulpcore/issues/4881)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

---

## 3.43.3 (2024-01-16) {: #3.43.3 }

### REST API

#### Bugfixes

-   Fixed an issue with importing async-timeout in Python 3.11.
    [#4923](https://github.com/pulp/pulpcore/issues/4923)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

---

## 3.43.2 (2024-01-09) {: #3.43.2 }

### REST API

#### Bugfixes

-   Fix a bug in import/export that could result in a division-by-zero during import.
    [#4777](https://github.com/pulp/pulpcore/issues/4777)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

---

## 3.43.1 (2023-12-12) {: #3.43.1 }

### REST API

#### Bugfixes

-   Fixed a bug in the repository version repair API for non-default domains.
    [#4776](https://github.com/pulp/pulpcore/issues/4776),
    [#4806](https://github.com/pulp/pulpcore/issues/4806)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

---

## 3.43.0 (2023-12-05) {: #3.43.0 }

### REST API

#### Features

-   Added a CompositeContentGuard, that manages a list-of ContentGuards and permits
    access to content if *ANY* guard permits.
    [#4583](https://github.com/pulp/pulpcore/issues/4583)

#### Bugfixes

-   Removed a race condition leading to 500 error in distribution filtering.
    [#4766](https://github.com/pulp/pulpcore/issues/4766)
-   Added missing database indices to the `RemoteArtifact` model.
    [#4835](https://github.com/pulp/pulpcore/issues/4835)

### Plugin API

#### Features

-   Added the async safe detail_model property to master detail models.
    [#4766](https://github.com/pulp/pulpcore/issues/4766)

### Pulp File

No significant changes.

---

## 3.42.0 (2023-11-28) {: #3.42.0 }

### REST API

#### Features

-   Added instrumentation to content-app to track telemetry data.
    [#3829](https://github.com/pulp/pulpcore/issues/3829)

#### Bugfixes

-   Fixed that pulp_file presented its python_package as pulp_file instead of pulp-file.
    [#4724](https://github.com/pulp/pulpcore/issues/4724)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

## 3.41.1 (2023-11-21) {: #3.41.1 }

### REST API

#### Bugfixes

-   Fixed that pulp_file presented its python_package as pulp_file instead of pulp-file.
    [#4724](https://github.com/pulp/pulpcore/issues/4724)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

## 3.41.0 (2023-11-14) {: #3.41.0 }

### REST API

#### Features

-   Added a `--restart` option to pulpcore worker. This requires "hupper" to be installed.
-   Added new management command `repository-size` that calculates the total size in bytes of files stored in repositories.
    [#2079](https://github.com/pulp/pulpcore/issues/2079)

#### Bugfixes

-   Closed the window when serializer.get_or_create could raise ObjectDoesnotExist.
    [#4648](https://github.com/pulp/pulpcore/issues/4648)
-   Restored the ability to set `--max-requests-jitter` on service entrypoints.
    [#4679](https://github.com/pulp/pulpcore/issues/4679)
-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

#### Features

-   Exposed a function to return a batch from a given queryset at `pulpcore.plugin.util.batch_qs`.
    [#4607](https://github.com/pulp/pulpcore/issues/4607)
-   Added content app feature to accept a `ContentArtifact` from `content_handler` so that the
    plugin writer no longer has to generate a response when dealing with `ContentArtifacts`.
    [#4635](https://github.com/pulp/pulpcore/issues/4635)

#### Bugfixes

-   Added ADD_TRAILING_SLASH property to AsyncContentCache. The default value is True. By default,
    AsyncContentCache will call into Handler._match_distribution(path, add_trailing_slash=True). If the
    meaning of the Distribution's base_path changes when a trailing slash is added, this method will not
    match such a Distribution. In this case, AsyncContentCache.ADD_TRAILING_SLASH should be set to
    False.
    [#4634](https://github.com/pulp/pulpcore/issues/4634)
-   Fixed how Distribution.content_handler() is called in the content app.
    [#4644](https://github.com/pulp/pulpcore/issues/4644)
-   Fixed content app returning 404s on directory index pages for some published plugins.
    [#4654](https://github.com/pulp/pulpcore/issues/4654)

#### Removals

-   Removed the ability to call functions defined outside of pulp components as the target of a task.
    [#4651](https://github.com/pulp/pulpcore/issues/4651)

### Pulp File

#### Bugfixes

-   Fix pulp_file advertised version.
    [#4633](https://github.com/pulp/pulpcore/issues/4633)

## 3.40.4 (2023-11-08) {: #3.40.4 }

### REST API

#### Bugfixes

-   Restored the ability to set `--max-requests-jitter` on service entrypoints.
    [#4679](https://github.com/pulp/pulpcore/issues/4679)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

## 3.40.3 (2023-11-07) {: #3.40.3 }

### REST API

#### Bugfixes

-   Closed the window when serializer.get_or_create could raise ObjectDoesnotExist.
    [#4648](https://github.com/pulp/pulpcore/issues/4648)

### Plugin API

No significant changes.

### Pulp File

No significant changes.

## 3.40.2 (2023-11-06) {: #3.40.2 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Fixed content app returning 404s on directory index pages for some published plugins.
    [#4654](https://github.com/pulp/pulpcore/issues/4654)

### Pulp File

No significant changes.

## 3.40.1 (2023-11-02) {: #3.40.1 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Added ADD_TRAILING_SLASH property to AsyncContentCache. The default value is True. By default,
    AsyncContentCache will call into Handler._match_distribution(path, add_trailing_slash=True). If the
    meaning of the Distribution's base_path changes when a trailing slash is added, this method will not
    match such a Distribution. In this case, AsyncContentCache.ADD_TRAILING_SLASH should be set to
    False.
    [#4634](https://github.com/pulp/pulpcore/issues/4634)
-   Fixed how Distribution.content_handler() is called in the content app.
    [#4644](https://github.com/pulp/pulpcore/issues/4644)

### Pulp File

#### Bugfixes

-   Fix pulp_file advertised version.
    [#4633](https://github.com/pulp/pulpcore/issues/4633)

## 3.40.0 (2023-10-31) {: #3.40.0 }

### REST API

#### Features

-   The content app now returns a 301 redirect when a requested path does not end in a / but should end in a /.
    [#3173](https://github.com/pulp/pulpcore/issues/3173)
-   Added upload field to no artifact content upload apis.
    [#4348](https://github.com/pulp/pulpcore/issues/4348)
-   Added pulp_file as a resident plugin.
    [#4550](https://github.com/pulp/pulpcore/issues/4550)

#### Removals

-   Removed fallback to eval in case EncryptedJSONField failed to decode json data.
    In case you suspect bad entries in the database, run pulpcore-manager rotate-db-key *before* the
    upgrade.
    [#4383](https://github.com/pulp/pulpcore/issues/4383)
-   Removed old unencrypted task arguments from database.
    [#4546](https://github.com/pulp/pulpcore/issues/4546)

### Plugin API

#### Features

-   Handler._match_distribution() method now accepts add_trailing_slash keyword argument. When set to False, the content app will not try to append a '/' to the path before trying to match it to a distribution. Plugin code that calls this method directly needs to be updated to account for the desired behavior.
    [#3459](https://github.com/pulp/pulpcore/issues/3459)

#### Removals

-   The changes introduced to the content upload serializers need adjustments in dome plugins.
    Specifically plugin that implemented their own notion of deferred validation to
    `NoArtifactContentUploadSerializer` seem to be affected.
    [#4348](https://github.com/pulp/pulpcore/issues/4348)

### Pulp File

#### Features

-   Starting from this release pulp_file will be shipped as part of the pulpcore package.
    [#4550](https://github.com/pulp/pulpcore/issues/4550)

## 3.39.32 (2025-05-27) {: #3.39.32 }

### REST API {: #3.39.32-rest-api }

#### Bugfixes {: #3.39.32-rest-api-bugfix }

- Fixed bug which prevented the Pulp API usaging from a web browser
  [#5250](https://github.com/pulp/pulpcore/issues/5250)
- pass envvars to Signing Scripts to access GNUPGHOME
  [#5911](https://github.com/pulp/pulpcore/issues/5911)

### Plugin API {: #3.39.32-plugin-api }

No significant changes.

---

## 3.39.31 (2025-05-20) {: #3.39.31 }

### REST API {: #3.39.31-rest-api }

No significant changes.

### Plugin API {: #3.39.31-plugin-api }

No significant changes.

---

## 3.39.30 (2025-04-24) {: #3.39.30 }

### REST API {: #3.39.30-rest-api }

#### Bugfixes {: #3.39.30-rest-api-bugfix }

- Reverted fix for #6491, it broke certificate-chains.
  [#6510](https://github.com/pulp/pulpcore/issues/6510)

### Plugin API {: #3.39.30-plugin-api }

No significant changes.

---

## 3.39.29 (2025-04-23) {: #3.39.29 }

### REST API {: #3.39.29-rest-api }

#### Bugfixes {: #3.39.29-rest-api-bugfix }

- Fixed a memory consumption issue that was triggered by the use of the Alternate Content Source feature.
  [#6500](https://github.com/pulp/pulpcore/issues/6500)

### Plugin API {: #3.39.29-plugin-api }

No significant changes.

---

## 3.39.28 (2025-04-22) {: #3.39.28 }

### REST API {: #3.39.28-rest-api }

#### Bugfixes {: #3.39.28-rest-api-bugfix }

- Client- and CA-certificates used in Remotes are now validated and any comments stripped
  before being applied to the Remote.
  [#6491](https://github.com/pulp/pulpcore/issues/6491)

### Plugin API {: #3.39.28-plugin-api }

No significant changes.

---

## 3.39.27 (2025-04-02) {: #3.39.27 }

### REST API {: #3.39.27-rest-api }

#### Bugfixes {: #3.39.27-rest-api-bugfix }

- Fixes the Remote configuration of timeouts to properly fallback to aiohttp defaults if they are unset by the user.
  [#5439](https://github.com/pulp/pulpcore/issues/5439)

### Plugin API {: #3.39.27-plugin-api }

No significant changes.

---

## 3.39.26 (2025-03-18) {: #3.39.26 }

### REST API {: #3.39.26-rest-api }

#### Bugfixes {: #3.39.26-rest-api-bugfix }

- The Alternate Content Source sync feature has received some optimizations, making it dramatically faster.

### Plugin API {: #3.39.26-plugin-api }

No significant changes.

---

## 3.39.25 (2025-01-08) {: #3.39.25 }

### REST API {: #3.39.25-rest-api }

No significant changes.

### Plugin API {: #3.39.25-plugin-api }

No significant changes.

---

## 3.39.24 (2024-11-26) {: #3.39.24 }

### REST API {: #3.39.24-rest-api }

No significant changes.

### Plugin API {: #3.39.24-plugin-api }

No significant changes.

---

## 3.39.23 (2024-11-12) {: #3.39.23 }

### REST API {: #3.39.23-rest-api }

#### Bugfixes {: #3.39.23-rest-api-bugfix }

- On the content-app, added ClientConnectionError (aiohttp) as an exception that can trigger
  a retry when streaming content from a Remote.
  [#5967](https://github.com/pulp/pulpcore/issues/5967)

### Plugin API {: #3.39.23-plugin-api }

No significant changes.

---

## 3.39.22 (2024-11-06) {: #3.39.22 }

### REST API {: #3.39.22-rest-api }

#### Bugfixes {: #3.39.22-rest-api-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.39.22-plugin-api }

No significant changes.

---

## 3.39.21 (2024-09-16) {: #3.39.21 }

### REST API {: #3.39.21-rest-api }

No significant changes.

### Plugin API {: #3.39.21-plugin-api }

No significant changes.

---

## 3.39.20 (2024-08-10) {: #3.39.20 }

### REST API {: #3.39.20-rest-api }

#### Bugfixes {: #3.39.20-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.39.20-plugin-api }

No significant changes.

---

## 3.39.19 (2024-07-23) {: #3.39.19 }


### REST API {: #3.39.19-rest-api }

No significant changes.

### Plugin API {: #3.39.19-plugin-api }

No significant changes.

---

## 3.39.18 (2024-07-16) {: #3.39.18 }


### REST API {: #3.39.18-rest-api }

#### Bugfixes {: #3.39.18-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.39.18-plugin-api }

No significant changes.

---

## 3.39.17 (2024-06-24) {: #3.39.17 }


### REST API {: #3.39.17-rest-api }

#### Bugfixes {: #3.39.17-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.39.17-plugin-api }

No significant changes.

---

## 3.39.16 (2024-06-18) {: #3.39.16 }


### REST API {: #3.39.16-rest-api }

#### Misc {: #3.39.16-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.39.16-plugin-api }

No significant changes.

---

## 3.39.15 (2024-05-23) {: #3.39.15 }

### REST API

#### Bugfixes

-   Added Pulp side batching to fix large exports that were failing due to changes in psycopg.
    [#5375](https://github.com/pulp/pulpcore/issues/5375)

### Plugin API

No significant changes.

---

## 3.39.14 (2024-05-16) {: #3.39.14 }

### REST API

#### Bugfixes

-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

### Plugin API

No significant changes.

---

## 3.39.13 (2024-04-17) {: #3.39.13 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.39.12 (2024-03-26) {: #3.39.12 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.39.11 (2024-03-05) {: #3.39.11 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.39.10 (2024-02-13) {: #3.39.10 }

### REST API

#### Misc

-   [#4589](https://github.com/pulp/pulpcore/issues/4589)

### Plugin API

No significant changes.

---

## 3.39.9 (2024-01-30) {: #3.39.9 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

---

## 3.39.8 (2024-01-25) {: #3.39.8 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.39.7 (2024-01-24) {: #3.39.7 }

### REST API

#### Bugfixes

-   Taught downloader to trust system-cert-store on HTTPS proxy connections.
    [#3036](https://github.com/pulp/pulpcore/issues/3036)

### Plugin API

No significant changes.

---

## 3.39.6 (2024-01-16) {: #3.39.6 }

### REST API

#### Bugfixes

-   Fixed an issue with importing async-timeout in Python 3.11.
    [#4923](https://github.com/pulp/pulpcore/issues/4923)

### Plugin API

No significant changes.

---

## 3.39.5 (2024-01-09) {: #3.39.5 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.39.4 (2023-12-14) {: #3.39.4 }

### REST API

#### Bugfixes

-   Fix a bug in import/export that could result in a division-by-zero during import.
    [#4777](https://github.com/pulp/pulpcore/issues/4777)

### Plugin API

No significant changes.

---

## 3.39.3 (2023-11-15) {: #3.39.3 }

### REST API

#### Bugfixes

-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

No significant changes.

## 3.39.2 (2023-11-08) {: #3.39.2 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)
-   Restored the ability to set `--max-requests-jitter` on service entrypoints.
    [#4679](https://github.com/pulp/pulpcore/issues/4679)

### Plugin API

No significant changes.

## 3.39.1 (2023-10-31) {: #3.39.1 }

### REST API

No significant changes.

### Plugin API

No significant changes.

## 3.39.0 (2023-10-25) {: #3.39.0 }

### REST API

#### Features

-   Added a `HeaderContentGuard` to allow a content access based on a valued provided by a specific header. The header can optionally be filtered through a `jq` expression.
    [#4518](https://github.com/pulp/pulpcore/issues/4518)

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.38.1 (2023-10-28) {: #3.38.1 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.38.0 (2023-10-19) {: #3.38.0 }

### REST API

#### Features

-   Use CRC32 checksums instead of SHA256 to improve import/export performance. Cryptographic checksums aren't required as we are only verifying the integrity of the files.
    [#4447](https://github.com/pulp/pulpcore/issues/4447)
-   Parsing of the db encryption key was made resiliant to whitespace and to allow comments.
    [#4542](https://github.com/pulp/pulpcore/issues/4542)

#### Bugfixes

-   Stopped reassembling the tarball of a chunked import into one large file, and instead gather the
    bits on the fly. This also allows importing directly from a read-only medium.
    [#4545](https://github.com/pulp/pulpcore/issues/4545)
-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

#### Misc

-   [#4323](https://github.com/pulp/pulpcore/issues/4323), [#4585](https://github.com/pulp/pulpcore/issues/4585)

### Plugin API

No significant changes.

## 3.37.0 (2023-10-05) {: #3.37.0 }

### REST API

#### Features

-   Include social_django urls based on config option
    [#4511](https://github.com/pulp/pulpcore/issues/4511)

#### Bugfixes

-   Added `format` param to `DEFAULT_FILTERS` in `BaseFilterSet` to fix django api format.
    [#4450](https://github.com/pulp/pulpcore/issues/4450)

### Plugin API

No significant changes.

## 3.36.0 (2023-09-27) {: #3.36.0 }

### REST API

#### Features

-   Status endpoint now reports storage usage of the domain being called from.
    [#4456](https://github.com/pulp/pulpcore/issues/4456)
-   Status endpoint now reports the storage usage for non-filesystem storage backends.
    [#4457](https://github.com/pulp/pulpcore/issues/4457)

#### Bugfixes

-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)
-   Fixed the return value of `get_users_with_perms_attached_roles` to give proper role names.
    [#4478](https://github.com/pulp/pulpcore/issues/4478)

#### Removals

-   Exports now take place in .tar format rather than .tar.gz. It was previously found that the
    compression provided little benefit but came with large runtime costs, so the compression
    level was reduced to 0. However even packaging the data in a gzip archive without compression
    comes with performance costs (particularly on import), so, we remove that layer entirely.
    [#4446](https://github.com/pulp/pulpcore/issues/4446)

### Plugin API

No significant changes.

## 3.35.0 (2023-09-20) {: #3.35.0 }

### REST API

#### Features

-   Added RBAC for UpstreamPulp APIs.
    [#3994](https://github.com/pulp/pulpcore/issues/3994)
-   Added filters `name__regex` and `name__iregex` to various endpoints.
    [#4432](https://github.com/pulp/pulpcore/issues/4432)
-   Enabling the TASK_DIAGNOSTICS option now additionally creates a profile of all executed tasks if the pyinstrument package is installed. This incurs a small overhead on task runtime (5-10%).
    [#4436](https://github.com/pulp/pulpcore/issues/4436)

#### Bugfixes

-   Added encryption to task argument fields.
-   Fixed sync not deleting temporary files when WORKING_DIRECTORY is not a sub-directory of MEDIA_ROOT
    or when using a non-filesystem storage backend.
    [#1936](https://github.com/pulp/pulpcore/issues/1936)
-   Ensure non-chunked exports and chunked exports use the same compression level.
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)
-   Fixed bug where supplying an empty list for `pulp_href__in` or `pulp_id__in` would return all
    results instead of none.
    [#4437](https://github.com/pulp/pulpcore/issues/4437)

#### Removals

-   Removed the `pulp-content` script that was superseeded by `pulpcore-content`.

### Plugin API

No significant changes.

## 3.34.0 (2023-09-12) {: #3.34.0 }

### REST API

#### Bugfixes

-   Added missing `--preload` option to `pulpcore-api` and `pulpcore-content`.
    [#4368](https://github.com/pulp/pulpcore/issues/4368)
-   Ensured that repository and remote delete is always executed in a task. This fixes a bug when the
    deletion blocks the gunicorn api worker for too long.
    [#4372](https://github.com/pulp/pulpcore/issues/4372)

### Plugin API

#### Features

-   Added a `LabelsMixin` for views to allow syncronous manipulation of labels on existing objects.
    Repository, remote and distribution views inherit this from pulpcore, but default access policies
    need to be adjusted.
    [#3332](https://github.com/pulp/pulpcore/issues/3332)
-   Added a migration operation `RequireVersion` that refuses to complete as long as active
    server components exist in the database.
    [#3401](https://github.com/pulp/pulpcore/issues/3401)

## 3.33.0 (2023-09-06) {: #3.33.0 }

### REST API

#### Features

-   Added a filter q that supports complex filter expressions.

    This feature is in tech-preview for the time being.
    [#2480](https://github.com/pulp/pulpcore/issues/2480),
    [#3914](https://github.com/pulp/pulpcore/issues/3914)

-   Add status records for api apps.
    [#3175](https://github.com/pulp/pulpcore/issues/3175)

-   Added `set_label` and `unset_label` endpoints to allow manipulating individual labels
    synchronously.
    [#3332](https://github.com/pulp/pulpcore/issues/3332)

-   Added `--burst` flag to pulpcore-worker so it will terminate instead of sleeping.
    [#4341](https://github.com/pulp/pulpcore/issues/4341)

#### Bugfixes

-   Fixed an exception that gets raised inside the domain delete hook
    when there are still repositories with content in the domain.
    [#4157](https://github.com/pulp/pulpcore/issues/4157)
-   Made orphan clean up more tolerant when other tasks are running in parallel.
    [#4316](https://github.com/pulp/pulpcore/issues/4316)
-   Fix the label migration 0104 to allow upgrading from before 3.25.
    [#4319](https://github.com/pulp/pulpcore/issues/4319)
-   Fixed Distribution validation for PUT calls when the data source changes.
    [#4324](https://github.com/pulp/pulpcore/issues/4324)
-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)
-   Fix encrypted fields to use json instead of repr/eval and make them fit for `bulk_update`.
    This solves an issue with `pulpcore-manager rotate-db-key` corrupting data.
    [#4359](https://github.com/pulp/pulpcore/issues/4359)

#### Removals

-   Starting with this release, it is highly recommended to start the api and content processes by
    the newly provided entrypoints (`pulpcore-api` and `pulpcore-content`) instead of calling
    `gunicorn` directly.
    [#3175](https://github.com/pulp/pulpcore/issues/3175)

### Plugin API

#### Features

-   Added a `LabelsMixin` for views to allow syncronous manipulation of labels on existing objects.
    Repository, remote and distribution views inherit this from pulpcore, but default access policies
    need to be adjusted.
    [#3332](https://github.com/pulp/pulpcore/issues/3332)

## 3.32.1 (2023-09-06) {: #3.32.1 }

### REST API

#### Bugfixes

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)
-   Fix encrypted fields to use json instead of repr/eval and make them fit for `bulk_update`.
    This solves an issue with `pulpcore-manager rotate-db-key` corrupting data.
    [#4359](https://github.com/pulp/pulpcore/issues/4359)

### Plugin API

No significant changes.

## 3.32.0 (2023-08-22) {: #3.32.0 }

### REST API

#### Bugfixes

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

#### Features

-   Made the current domain a shared resource for all tasks even with domains disabled, so tasks can
    hold off all other operations by taking an exclusive lock on the (default) domain.
    [#4285](https://github.com/pulp/pulpcore/issues/4285)

## 3.31.0 (2023-08-15) {: #3.31.0 }

### REST API

#### Bugfixes

-   Optimized content app to not slow down as the size of a repository grows.
    [#3802](https://github.com/pulp/pulpcore/issues/3802)
-   Fixed FileDownloader in the presence of on_demand remotes.
    [#4019](https://github.com/pulp/pulpcore/issues/4019)
-   Taught downloader to correctly handle plugin-specified headers for object-storage backends.
    [#4028](https://github.com/pulp/pulpcore/issues/4028)

### Plugin API

#### Features

-   Added memoized `system_id` function to the plugin api.
    [#4276](https://github.com/pulp/pulpcore/issues/4276)

## 3.30.0 (2023-08-08) {: #3.30.0 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Fixed a bug with the replicate API not handling Upstream Pulp API over HTTPS.
    [#3910](https://github.com/pulp/pulpcore/issues/3910)

-   Fixed duplicate OpenAPI operation ids when using domains.
    [#3977](https://github.com/pulp/pulpcore/issues/3977)

-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

-   Fixed a 500 error for Upstream Pulp Replicate API when domains are enabled.
    [#4119](https://github.com/pulp/pulpcore/issues/4119)

-   Fixed the OpenAPI schema for the 'replicate' operation response.
    [#4121](https://github.com/pulp/pulpcore/issues/4121)

-   Fixed a bug where repositories were getting deleted accross domains.
    [#4158](https://github.com/pulp/pulpcore/issues/4158)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

-   Fixed bug where the Task Group for replication would be marked as fully dispatched after just one
    replicator.
    [#4175](https://github.com/pulp/pulpcore/issues/4175)

-   Fixed a 500 server error when two concurrent requests try to create an object with the same unique fields.
    [#4183](https://github.com/pulp/pulpcore/issues/4183)

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

-   Fixed a bug where replication remotes did not have their URLs updated on subsequent runs.
    [#4218](https://github.com/pulp/pulpcore/issues/4218)

-   Fixed a bug where ca_cert was not getting set for replication remotes.
    [#4219](https://github.com/pulp/pulpcore/issues/4219)

-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

-   Fixed bug where tls_validation, client_key, and client_cert were not getting set on replication remotes.
    [#4247](https://github.com/pulp/pulpcore/issues/4247)

#### Misc

-   [#3923](https://github.com/pulp/pulpcore/issues/3923)

### Plugin API

#### Features

-   Adjusted the `BaseDownloader.fetch()` method to accept `extra_data`.
    [#4229](https://github.com/pulp/pulpcore/issues/4229)

## 3.29.8 (2023-08-08) {: #3.29.8 }

### REST API

#### Bugfixes

-   Fixed bug where tls_validation, client_key, and client_cert were not getting set on replication remotes.
    [#4247](https://github.com/pulp/pulpcore/issues/4247)

### Plugin API

No significant changes.

## 3.29.7 (2023-08-01) {: #3.29.7 }

### REST API

#### Bugfixes

-   Fixed a bug where replication remotes did not have their URLs updated on subsequent runs.
    [#4218](https://github.com/pulp/pulpcore/issues/4218)
-   Fixed a bug where ca_cert was not getting set for replication remotes.
    [#4219](https://github.com/pulp/pulpcore/issues/4219)
-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.29.6 (2023-07-31) {: #3.29.6 }

### REST API

#### Bugfixes

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.29.5 (2023-07-29) {: #3.29.5 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Fixed a bug with the replicate API not handling Upstream Pulp API over HTTPS.
    [#3910](https://github.com/pulp/pulpcore/issues/3910)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Fixed a bug where repositories were getting deleted accross domains.
    [#4158](https://github.com/pulp/pulpcore/issues/4158)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

-   Fixed bug where the Task Group for replication would be marked as fully dispatched after just one
    replicator.
    [#4175](https://github.com/pulp/pulpcore/issues/4175)

#### Misc

-   [#3923](https://github.com/pulp/pulpcore/issues/3923)

### Plugin API

No significant changes.

## 3.29.4 (2023-07-25) {: #3.29.4 }

### REST API

#### Bugfixes

-   Fixed a 500 error for Upstream Pulp Replicate API when domains are enabled.
    [#4119](https://github.com/pulp/pulpcore/issues/4119)
-   Fixed the OpenAPI schema for the 'replicate' operation response.
    [#4121](https://github.com/pulp/pulpcore/issues/4121)

### Plugin API

No significant changes.

## 3.29.3 (2023-07-22) {: #3.29.3 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)
-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

### Plugin API

No significant changes.

## 3.29.2 (2023-07-19) {: #3.29.2 }

### REST API

#### Bugfixes

-   Fixed duplicate OpenAPI operation ids when using domains.
    [#3977](https://github.com/pulp/pulpcore/issues/3977)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

### Plugin API

No significant changes.

## 3.29.1 (2023-07-14) {: #3.29.1 }

### REST API

#### Bugfixes

-   Pinned importlib-metadata to 6.0.1 given pip is unable to solve an opentelemetry dependency version correctly.
    [#4042](https://github.com/pulp/pulpcore/issues/4042)

### Plugin API

No significant changes.

## 3.29.0 (2023-07-12) {: #3.29.0 }

### REST API

#### Features

-   Added version information to tasks. Workers will refuse to pick up tasks with a version higher
    than their own.
    [#3369](https://github.com/pulp/pulpcore/issues/3369)
-   Added graceful shutdown to pulpcore-worker without killing the current task on receiving
    `SIGHUP` or `SIGTERM`.
    [#3940](https://github.com/pulp/pulpcore/issues/3940)
-   Added periodically executed cleanup tasks for uploads and temporary files. Configure a time
    interval in `UPLOAD_PROTECTION_TIME` or `TMPFILE_PROTECTION_TIME` to activate.
    [#3949](https://github.com/pulp/pulpcore/issues/3949)

#### Bugfixes

-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Fixed error when downloading pull-through content that already exists in Pulp.
    [#3945](https://github.com/pulp/pulpcore/issues/3945)
-   Fixed circular imports caused by get_user_model calls.
    [#3957](https://github.com/pulp/pulpcore/issues/3957)
-   Fix api schema of the upstream_pulp_replicate operation requiring no body.
    [#3995](https://github.com/pulp/pulpcore/issues/3995)

### Plugin API

#### Features

-   Added `retrieve` logic to `MultipleArtifactContentSerializer`.
    [#3951](https://github.com/pulp/pulpcore/issues/3951)

#### Bugfixes

-   Fixed the import path for `pulpcore.plugin.pulp_hashlib`.
    [#4006](https://github.com/pulp/pulpcore/issues/4006)

#### Misc

-   [#3798](https://github.com/pulp/pulpcore/issues/3798)

## 3.28.39 (2025-05-27) {: #3.28.39 }

### REST API {: #3.28.39-rest-api }

#### Bugfixes {: #3.28.39-rest-api-bugfix }

- Fixed bug which prevented the Pulp API usaging from a web browser
  [#5250](https://github.com/pulp/pulpcore/issues/5250)
- pass envvars to Signing Scripts to access GNUPGHOME
  [#5911](https://github.com/pulp/pulpcore/issues/5911)

### Plugin API {: #3.28.39-plugin-api }

No significant changes.

---

## 3.28.38 (2025-05-20) {: #3.28.38 }

### REST API {: #3.28.38-rest-api }

No significant changes.

### Plugin API {: #3.28.38-plugin-api }

No significant changes.

---

## 3.28.37 (2025-03-18) {: #3.28.37 }

### REST API {: #3.28.37-rest-api }

No significant changes.

### Plugin API {: #3.28.37-plugin-api }

No significant changes.

---

## 3.28.36 (2025-01-10) {: #3.28.36 }

### REST API {: #3.28.36-rest-api }

No significant changes.

### Plugin API {: #3.28.36-plugin-api }

No significant changes.

---

## 3.28.35 (2024-11-26) {: #3.28.35 }

### REST API {: #3.28.35-rest-api }

No significant changes.

### Plugin API {: #3.28.35-plugin-api }

No significant changes.

---

## 3.28.34 (2024-11-13) {: #3.28.34 }

### REST API {: #3.28.34-rest-api }

No significant changes.

### Plugin API {: #3.28.34-plugin-api }

No significant changes.

---

## 3.28.33 (2024-11-06) {: #3.28.33 }

### REST API {: #3.28.33-rest-api }

#### Bugfixes {: #3.28.33-rest-api-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.28.33-plugin-api }

No significant changes.

---

# ## 3.28.32 (2024-08-10) {: #3.28.32 }

### REST API {: #3.28.32-rest-api }

#### Bugfixes {: #3.28.32-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.28.32-plugin-api }

No significant changes.

---

## 3.28.31 (2024-07-23) {: #3.28.31 }


### REST API {: #3.28.31-rest-api }

No significant changes.

### Plugin API {: #3.28.31-plugin-api }

No significant changes.

---

## 3.28.30 (2024-07-16) {: #3.28.30 }


### REST API {: #3.28.30-rest-api }

#### Bugfixes {: #3.28.30-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.28.30-plugin-api }

No significant changes.

---

## 3.28.29 (2024-06-24) {: #3.28.29 }


### REST API {: #3.28.29-rest-api }

#### Bugfixes {: #3.28.29-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.28.29-plugin-api }

No significant changes.

---

## 3.28.28 (2024-06-18) {: #3.28.28 }


### REST API {: #3.28.28-rest-api }

#### Misc {: #3.28.28-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.28.28-plugin-api }

No significant changes.

---

## 3.28.27 (2024-05-22) {: #3.28.27 }

### REST API

#### Bugfixes

-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

### Plugin API

No significant changes.

---

## 3.28.26 (2024-04-17) {: #3.28.26 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.28.25 (2024-03-26) {: #3.28.25 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.28.24 (2024-03-05) {: #3.28.24 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.28.23 (2024-01-30) {: #3.28.23 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

---

## 3.28.22 (2024-01-25) {: #3.28.22 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.28.21 (2024-01-25) {: #3.28.21 }

### REST API

#### Bugfixes

-   Fixed an issue with importing async-timeout in Python 3.11.
    [#4923](https://github.com/pulp/pulpcore/issues/4923)

### Plugin API

No significant changes.

---

## 3.28.20 (2024-01-24) {: #3.28.20 }

### REST API

#### Bugfixes

-   Fixed a regular expression used when listing directories.
    [#3673](https://github.com/pulp/pulpcore/issues/3673)
-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)
-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)
-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

No significant changes.

---

## 3.28.19 (2023-11-06) {: #3.28.19 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.28.18 (2023-10-16) {: #3.28.18 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.28.17 (2023-10-05) {: #3.28.17 }

### REST API

#### Bugfixes

-   Added `format` param to `DEFAULT_FILTERS` in `BaseFilterSet` to fix django api format.
    [#4450](https://github.com/pulp/pulpcore/issues/4450)

### Plugin API

No significant changes.

## 3.28.16 (2023-09-27) {: #3.28.16 }

### REST API

#### Features

-   Enabling the TASK_DIAGNOSTICS option now additionally creates a profile of all executed tasks if the pyinstrument package is installed. This incurs a small overhead on task runtime (5-10%).
    [#4436](https://github.com/pulp/pulpcore/issues/4436)

#### Bugfixes

-   Fixed sync not deleting temporary files when WORKING_DIRECTORY is not a sub-directory of MEDIA_ROOT
    or when using a non-filesystem storage backend.
    [#1936](https://github.com/pulp/pulpcore/issues/1936)
-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Fixed the return value of `get_users_with_perms_attached_roles` to give proper role names.
    [#4478](https://github.com/pulp/pulpcore/issues/4478)

### Plugin API

No significant changes.

## 3.28.15 (2023-09-20) {: #3.28.15 }

### REST API

#### Bugfixes

-   Ensure non-chunked exports and chunked exports use the same compression level.
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)

### Plugin API

No significant changes.

## 3.28.14 (2023-09-12) {: #3.28.14 }

### REST API

#### Bugfixes

-   Ensured that repository and remote delete is always executed in a task. This fixes a bug when the
    deletion blocks the gunicorn api worker for too long.
    [#4372](https://github.com/pulp/pulpcore/issues/4372)

### Plugin API

No significant changes.

## 3.28.13 (2023-09-06) {: #3.28.13 }

### REST API

#### Bugfixes

-   Fix the label migration 0104 to allow upgrading from before 3.25.
    [#4319](https://github.com/pulp/pulpcore/issues/4319)
-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)
-   Fix encrypted fields to use json instead of repr/eval and make them fit for `bulk_update`.
    This solves an issue with `pulpcore-manager rotate-db-key` corrupting data.
    [#4359](https://github.com/pulp/pulpcore/issues/4359)

### Plugin API

No significant changes.

## 3.28.12 (2023-08-22) {: #3.28.12 }

### REST API

#### Bugfixes

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)
-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

#### Features

-   Added memoized `system_id` function to the plugin api.
    [#4276](https://github.com/pulp/pulpcore/issues/4276)

## 3.28.11 (2023-08-15) {: #3.28.11 }

### REST API

#### Bugfixes

-   Taught downloader to correctly handle plugin-specified headers for object-storage backends.
    [#4028](https://github.com/pulp/pulpcore/issues/4028)

### Plugin API

No significant changes.

## 3.28.10 (2023-08-08) {: #3.28.10 }

### REST API

#### Bugfixes

-   Fixed bug where tls_validation, client_key, and client_cert were not getting set on replication remotes.
    [#4247](https://github.com/pulp/pulpcore/issues/4247)

### Plugin API

No significant changes.

## 3.28.9 (2023-08-03) {: #3.28.9 }

### REST API

No significant changes.

### Plugin API

No significant changes.

## 3.28.8 (2023-08-01) {: #3.28.8 }

### REST API

#### Bugfixes

-   Fixed a bug where replication remotes did not have their URLs updated on subsequent runs.
    [#4218](https://github.com/pulp/pulpcore/issues/4218)
-   Fixed a bug where ca_cert was not getting set for replication remotes.
    [#4219](https://github.com/pulp/pulpcore/issues/4219)
-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.28.7 (2023-07-31) {: #3.28.7 }

### REST API

#### Bugfixes

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.28.6 (2023-07-29) {: #3.28.6 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Fixed a bug with the replicate API not handling Upstream Pulp API over HTTPS.
    [#3910](https://github.com/pulp/pulpcore/issues/3910)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Fixed a bug where repositories were getting deleted accross domains.
    [#4158](https://github.com/pulp/pulpcore/issues/4158)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

-   Fixed bug where the Task Group for replication would be marked as fully dispatched after just one
    replicator.
    [#4175](https://github.com/pulp/pulpcore/issues/4175)

#### Misc

-   [#3923](https://github.com/pulp/pulpcore/issues/3923)

### Plugin API

No significant changes.

## 3.28.5 (2023-07-25) {: #3.28.5 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)
-   Fixed a 500 error for Upstream Pulp Replicate API when domains are enabled.
    [#4119](https://github.com/pulp/pulpcore/issues/4119)
-   Fixed the OpenAPI schema for the 'replicate' operation response.
    [#4121](https://github.com/pulp/pulpcore/issues/4121)

### Plugin API

No significant changes.

## 3.28.4 (2023-07-19) {: #3.28.4 }

### REST API

#### Bugfixes

-   Fixed duplicate OpenAPI operation ids when using domains.
    [#3977](https://github.com/pulp/pulpcore/issues/3977)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

### Plugin API

#### Bugfixes

-   Fixed the import path for `pulpcore.plugin.pulp_hashlib`.
    [#4006](https://github.com/pulp/pulpcore/issues/4006)

## 3.28.3 (2023-07-14) {: #3.28.3 }

### REST API

#### Bugfixes

-   Pinned importlib-metadata to 6.0.1 given pip is unable to solve an opentelemetry dependency version correctly.
    [#4042](https://github.com/pulp/pulpcore/issues/4042)

### Plugin API

No significant changes.

## 3.28.2 (2023-07-12) {: #3.28.2 }

### REST API

#### Bugfixes

-   Fix api schema of the upstream_pulp_replicate operation requiring no body.
    [#3995](https://github.com/pulp/pulpcore/issues/3995)

### Plugin API

No significant changes.

## 3.28.1 (2023-06-27) {: #3.28.1 }

### REST API

#### Bugfixes

-   Fixed error when downloading pull-through content that already exists in Pulp.
    [#3945](https://github.com/pulp/pulpcore/issues/3945)
-   Fixed circular imports caused by get_user_model calls.
    [#3957](https://github.com/pulp/pulpcore/issues/3957)

### Plugin API

No significant changes.

## 3.28.0 (2023-06-14) {: #3.28.0 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)
-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)
-   Fixed the method for displaying the representation of `MasterModel` objects.
    [#3898](https://github.com/pulp/pulpcore/issues/3898)

#### Improved Documentation

-   Removes leftover documentation referring to the deprecated Ansible based installer.
    [#3834](https://github.com/pulp/pulpcore/issues/3834)

### Plugin API

#### Features

-   Added support to pull-through caching for streaming metadata files.

    `Remote.get_remote_artifact_content_type` can now return `None` to inform the content app that
    the requested path is a metadata file that should be streamed and not saved for the pull-through
    caching feature.
    [#3817](https://github.com/pulp/pulpcore/issues/3817)

-   Added support to pull-through caching for plugins with multi-artifact content types.

    `Content.init_from_artifact_and_relative_path` can now return a tuple of the new content unit
    and a dict containing the mapping of that content's artifacts and their relative paths.
    [#3818](https://github.com/pulp/pulpcore/issues/3818)

-   Added Distribution.content_headers_for() to let plugins affect content-app response headers.

    This can be useful, for example, when it's desirable for specific files to
    be served with Cache-control: no-cache.
    [#3897](https://github.com/pulp/pulpcore/issues/3897)

## 3.27.2 (2023-07-14) {: #3.27.2 }

### REST API

#### Bugfixes

-   Fixed circular imports caused by get_user_model calls.
    [#3957](https://github.com/pulp/pulpcore/issues/3957)
-   Pinned importlib-metadata to 6.0.1 given pip is unable to solve an opentelemetry dependency version correctly.
    [#4042](https://github.com/pulp/pulpcore/issues/4042)

### Plugin API

No significant changes.

## 3.27.1 (2023-06-05) {: #3.27.1 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)
-   Fixed the method for displaying the representation of `MasterModel` objects.
    [#3898](https://github.com/pulp/pulpcore/issues/3898)

### Plugin API

No significant changes.

## 3.27.0 (2023-05-31) {: #3.27.0 }

### REST API

#### Features

-   Expose user who dispatched a Task under new field `created_by`.
    [#1917](https://github.com/pulp/pulpcore/issues/1917)
-   Added `hidden` field to Distributions that toggles visibility in Content app directory listing.
    [#3538](https://github.com/pulp/pulpcore/issues/3538)

#### Bugfixes

-   Taught repair task to remove unrepairable corrupted files.
    [#1947](https://github.com/pulp/pulpcore/issues/1947)
-   Taught repair task to continue when encountering a 404 during the repair process.
    [#3611](https://github.com/pulp/pulpcore/issues/3611)
-   Serialized global reclaim space, global repair artifacts tasks with respect to each other
    to prevent them from failing.
    [#3786](https://github.com/pulp/pulpcore/issues/3786)

#### Improved Documentation

-   Release-process documentation is now more explicit about which branches are tested by CI.
    [#3841](https://github.com/pulp/pulpcore/issues/3841)
-   Added the instructions needed to enable OpenTelemetry on `pulp-api` application.
    [#3867](https://github.com/pulp/pulpcore/issues/3867)

#### Misc

-   [#3873](https://github.com/pulp/pulpcore/issues/3873)

### Plugin API

#### Features

-   Added async version of `cast` as `acast`.
    [#3873](https://github.com/pulp/pulpcore/issues/3873)

#### Bugfixes

-   Fixed potential unnecessary database calls executed after matching distributions in the content
    application.
    [#3876](https://github.com/pulp/pulpcore/issues/3876)

## 3.26.2 (2023-07-14) {: #3.26.2 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)
-   Pinned importlib-metadata to 6.0.1 given pip is unable to solve an opentelemetry dependency version correctly.
    [#4042](https://github.com/pulp/pulpcore/issues/4042)

### Plugin API

No significant changes.

## 3.26.1 (2023-05-25) {: #3.26.1 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Fixed potential unnecessary database calls executed after matching distributions in the content
    application.
    [#3876](https://github.com/pulp/pulpcore/issues/3876)

## 3.26.0 (2023-05-16) {: #3.26.0 }

### REST API

#### Features

-   Added a pre-delete hook to domains in order to stop orphaned content preventing the deletion.
    [#3800](https://github.com/pulp/pulpcore/issues/3800)
-   Enabled OpenTelemetry metrics and tracing for the pulp-api app.
    [#3835](https://github.com/pulp/pulpcore/issues/3835)

#### Improved Documentation

-   Updated examples and fixed some typos in Domains workflow doc.
    [#3825](https://github.com/pulp/pulpcore/issues/3825)

### Plugin API

No significant changes.

## 3.25.1 (2023-05-25) {: #3.25.1 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Fixed potential unnecessary database calls executed after matching distributions in the content
    application.
    [#3876](https://github.com/pulp/pulpcore/issues/3876)

## 3.25.0 (2023-05-10) {: #3.25.0 }

### REST API

#### Features

-   Added filters `with_content` and `latest_with_content` to Repository list endpoint.
    [#2865](https://github.com/pulp/pulpcore/issues/2865)
-   Updated Django version to 4.2 LTS branch.
    [#3660](https://github.com/pulp/pulpcore/issues/3660)

#### Bugfixes

-   Fixed representation of domains in created_resources on task list and show.
    [#3783](https://github.com/pulp/pulpcore/issues/3783)
-   Deferred artifact file deletion to after committing the database transaction.
    [#3807](https://github.com/pulp/pulpcore/issues/3807)

#### Misc

-   [#2993](https://github.com/pulp/pulpcore/issues/2993)

### Plugin API

#### Features

-   Created a wrapper type for UUID generation so that the implementation can potentially be
    switched in the future. UUIDs are just 128-bit integers - as long as they don't overlap
    there is no explicit need to stick with any particular implementation. Plugin writers may
    notice a migration created due to this change depending on how they have written the
    plugin.
    [#3117](https://github.com/pulp/pulpcore/issues/3117)
-   Bumped the database backend from psycopg2 to psycopg3.
    [#3792](https://github.com/pulp/pulpcore/issues/3792)

#### Removals

-   Removed `NamedModelViewSet.extract_pk` in favor of `pulpcore.plugin.util.extract_pk` and
    `raise_for_unknown_content_units` from `pulpcore.plugin.actions`, which moved to
    `pulpcore.plugin.util`.
    [#3613](https://github.com/pulp/pulpcore/issues/3613)
-   Removed the deprecated verify_signature. Use gpg_verify instead.
    [#3614](https://github.com/pulp/pulpcore/issues/3614)
-   Removed `LabelsField`, `Label`, and `LabelSelectFilter`.
    [#3615](https://github.com/pulp/pulpcore/issues/3615)
-   Updated Django version to 4.2 LTS branch. This may introduce some breaking changes to plugins.
    [#3660](https://github.com/pulp/pulpcore/issues/3660)

## 3.24.1 (2023-05-03) {: #3.24.1 }

### REST API

#### Bugfixes

-   Fixed representation of domains in created_resources on task list and show.
    [#3783](https://github.com/pulp/pulpcore/issues/3783)

### Plugin API

No significant changes.

## 3.24.0 (2023-05-02) {: #3.24.0 }

### REST API

#### Features

-   Added commands and documentation for db encryption key rotation.
    [#2048](https://github.com/pulp/pulpcore/issues/2048)
-   Added ability to filter resources by list of HREFs or IDs with `pulp_href__in` and `pulp_id__in`.
    [#2975](https://github.com/pulp/pulpcore/issues/2975)
-   Added ability to sort by type on generic list endpoints with `pulp_type__in`.
    [#3408](https://github.com/pulp/pulpcore/issues/3408)
-   Added file size to the content app listing.
    [#3656](https://github.com/pulp/pulpcore/issues/3656)
-   Changed most of the update and delete tasks to allow for immediate execution if not contested by
    other running tasks.
    [#3661](https://github.com/pulp/pulpcore/issues/3661)

#### Bugfixes

-   Fixed some deprecations in preparation to 3.25 being a breaking change release.
    [#3023](https://github.com/pulp/pulpcore/issues/3023)
-   Task purge now continues when encountering a task that could not be deleted. The user is informed
    about any such tasks.
    [#3530](https://github.com/pulp/pulpcore/issues/3530)
-   Fixed package timestamp on content app to reflect time package was added to the repository.
    [#3653](https://github.com/pulp/pulpcore/issues/3653)
-   Fixed import/export in the presence of the domains work.
    [#3663](https://github.com/pulp/pulpcore/issues/3663)
-   Fixed a regular expression used when listing directories.
    [#3673](https://github.com/pulp/pulpcore/issues/3673)
-   Optimized queries needed when listing Tasks.
    [#3711](https://github.com/pulp/pulpcore/issues/3711)
-   Optimized DB queries for content, distribution, publication, remote, repository, and repository-version list endpoints.
    [#3714](https://github.com/pulp/pulpcore/issues/3714)
-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)
-   Fixed returned error codes for unauthenticated users. Pulp now returns HTTP 401 errors instead of
    HTTP 403 errors which were default return types for `SessionAuthentication`.
    [#3730](https://github.com/pulp/pulpcore/issues/3730)
-   Fixed issue with deleting export tasks via purge.
    [#3741](https://github.com/pulp/pulpcore/issues/3741)
-   Closed the window for a race condition in content creation.
    [#3754](https://github.com/pulp/pulpcore/issues/3754)

#### Improved Documentation

-   Updated contributor docs to point to the `oci-env` for the developer environment.
    [#3444](https://github.com/pulp/pulpcore/issues/3444)
-   Fixed infinite loading when searching for specific terms.
    [#3667](https://github.com/pulp/pulpcore/issues/3667)

#### Misc

-   [#3247](https://github.com/pulp/pulpcore/issues/3247)

### Plugin API

#### Features

-   Added flags `immediate` and `deferred` to `dispatch` to allow specifying whether a task can
    be attempted to run synchronously and whether it can be deferred.
    [#3661](https://github.com/pulp/pulpcore/issues/3661)

## 3.23.24 (2024-01-09) {: #3.23.24 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.23.23 (2023-11-29) {: #3.23.23 }

### REST API

#### Bugfixes

-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)

### Plugin API

No significant changes.

## 3.23.22 (2023-11-23) {: #3.23.22 }

### REST API

#### Bugfixes

-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

No significant changes.

## 3.23.21 (2023-11-14) {: #3.23.21 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.23.20 (2023-10-16) {: #3.23.20 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.23.19 (2023-10-05) {: #3.23.19 }

### REST API

#### Bugfixes

-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)
-   Added `format` param to `DEFAULT_FILTERS` in `BaseFilterSet` to fix django api format.
    [#4450](https://github.com/pulp/pulpcore/issues/4450)

### Plugin API

No significant changes.

## 3.23.18 (2023-09-27) {: #3.23.18 }

### REST API

#### Bugfixes

-   Fixed sync not deleting temporary files when WORKING_DIRECTORY is not a sub-directory of MEDIA_ROOT
    or when using a non-filesystem storage backend.
    [#1936](https://github.com/pulp/pulpcore/issues/1936)
-   Ensure non-chunked exports also use gzip `compressionlevel=1`
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Fixed the return value of `get_users_with_perms_attached_roles` to give proper role names.
    [#4478](https://github.com/pulp/pulpcore/issues/4478)

### Plugin API

No significant changes.

## 3.23.17 (2023-09-06) {: #3.23.17 }

### REST API

#### Bugfixes

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)
-   Fix encrypted fields to use json instead of repr/eval and make them fit for `bulk_update`.
    This solves an issue with `pulpcore-manager rotate-db-key` corrupting data.
    [#4359](https://github.com/pulp/pulpcore/issues/4359)

### Plugin API

No significant changes.

## 3.23.16 (2023-08-23) {: #3.23.16 }

### REST API

#### Bugfixes

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

No significant changes.

## 3.23.15 (2023-08-08) {: #3.23.15 }

### REST API

#### Bugfixes

-   Fixed bug where tls_validation, client_key, and client_cert were not getting set on replication remotes.
    [#4247](https://github.com/pulp/pulpcore/issues/4247)

### Plugin API

No significant changes.

## 3.23.14 (2023-08-01) {: #3.23.14 }

### REST API

#### Bugfixes

-   Fixed a bug where replication remotes did not have their URLs updated on subsequent runs.
    [#4218](https://github.com/pulp/pulpcore/issues/4218)
-   Fixed a bug where ca_cert was not getting set for replication remotes.
    [#4219](https://github.com/pulp/pulpcore/issues/4219)
-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.23.13 (2023-07-31) {: #3.23.13 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)
-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)
-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.23.12 (2023-07-29) {: #3.23.12 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Fixed a bug with the replicate API not handling Upstream Pulp API over HTTPS.
    [#3910](https://github.com/pulp/pulpcore/issues/3910)

-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Fixed a bug where repositories were getting deleted accross domains.
    [#4158](https://github.com/pulp/pulpcore/issues/4158)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

-   Fixed bug where the Task Group for replication would be marked as fully dispatched after just one
    replicator.
    [#4175](https://github.com/pulp/pulpcore/issues/4175)

#### Misc

-   [#3923](https://github.com/pulp/pulpcore/issues/3923)

### Plugin API

No significant changes.

## 3.23.11 (2023-07-25) {: #3.23.11 }

### REST API

#### Bugfixes

-   Fixed a 500 error for Upstream Pulp Replicate API when domains are enabled.
    [#4119](https://github.com/pulp/pulpcore/issues/4119)
-   Fixed the OpenAPI schema for the 'replicate' operation response.
    [#4121](https://github.com/pulp/pulpcore/issues/4121)

### Plugin API

No significant changes.

## 3.23.10 (2023-07-22) {: #3.23.10 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)
-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

### Plugin API

No significant changes.

## 3.23.9 (2023-07-19) {: #3.23.9 }

### REST API

#### Bugfixes

-   Fixed duplicate OpenAPI operation ids when using domains.
    [#3977](https://github.com/pulp/pulpcore/issues/3977)

### Plugin API

No significant changes.

## 3.23.8 (2023-07-12) {: #3.23.8 }

### REST API

#### Bugfixes

-   Fix api schema of the upstream_pulp_replicate operation requiring no body.
    [#3995](https://github.com/pulp/pulpcore/issues/3995)

### Plugin API

No significant changes.

## 3.23.7 (2023-06-14) {: #3.23.7 }

### REST API

#### Bugfixes

-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)

### Plugin API

No significant changes.

## 3.23.6 (2023-05-30) {: #3.23.6 }

### REST API

#### Bugfixes

-   Taught repair task to remove unrepairable corrupted files.
    [#1947](https://github.com/pulp/pulpcore/issues/1947)
-   Taught repair task to continue when encountering a 404 during the repair process.
    [#3611](https://github.com/pulp/pulpcore/issues/3611)

### Plugin API

No significant changes.

## 3.23.5 (2023-05-23) {: #3.23.5 }

### REST API

#### Bugfixes

-   Serialized global reclaim space, global repair artifacts tasks with respect to each other
    to prevent them from failing.
    [#3786](https://github.com/pulp/pulpcore/issues/3786)

### Plugin API

No significant changes.

## 3.23.4 (2023-05-10) {: #3.23.4 }

### REST API

#### Bugfixes

-   Task purge now continues when encountering a task that could not be deleted. The user is informed
    about any such tasks.
    [#3530](https://github.com/pulp/pulpcore/issues/3530)
-   Closed the window for a race condition in content creation.
    [#3754](https://github.com/pulp/pulpcore/issues/3754)

### Plugin API

No significant changes.

## 3.23.3 (2023-04-18) {: #3.23.3 }

### REST API

No significant changes.

### Plugin API

No significant changes.

## 3.23.2 (2023-04-11) {: #3.23.2 }

### REST API

#### Bugfixes

-   Fixed package timestamp on content app to reflect time package was added to the repository.
    [#3653](https://github.com/pulp/pulpcore/issues/3653)
-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)

### Plugin API

No significant changes.

## 3.23.1 (2023-03-27) {: #3.23.1 }

### REST API

#### Bugfixes

-   Fixed import/export in the presence of the domains work.
    [#3663](https://github.com/pulp/pulpcore/issues/3663)
-   Fixed a regular expression used when listing directories.
    [#3673](https://github.com/pulp/pulpcore/issues/3673)

### Plugin API

No significant changes.

## 3.23.0 (2023-03-14) {: #3.23.0 }

### REST API

#### Features

-   Added a repository exact and in filters to the Distributions API.
    [#3394](https://github.com/pulp/pulpcore/issues/3394)
-   Added a new optional multi-tenancy namespacing feature: Domains. See workflow documentation for more
    information on this tech-preview feature.
    [#3403](https://github.com/pulp/pulpcore/issues/3403)
-   Add GCP support
    [#3424](https://github.com/pulp/pulpcore/issues/3424)
-   Added `retain_repo_versions` filter to Repository endpoint.
    [#3507](https://github.com/pulp/pulpcore/issues/3507)
-   Pass correlation id to signing script through ENV variable
    [#3522](https://github.com/pulp/pulpcore/issues/3522)
-   Added ability to replicate distributions/repositories from another Pulp.
    [#3566](https://github.com/pulp/pulpcore/issues/3566)
-   Started to collect statistics about RBAC (amd domain) usage.
    [#3639](https://github.com/pulp/pulpcore/issues/3639)

#### Bugfixes

-   Bump dynaconf version to 3.1.12 given it fixes a bug to handle failures when pwd does not exist.
    [#3310](https://github.com/pulp/pulpcore/issues/3310)

-   Added validation to the repository modify endpoint.
    [#3326](https://github.com/pulp/pulpcore/issues/3326)

-   Addressed a possible N+1 query performance issue within reclaim_space task.
    [#3404](https://github.com/pulp/pulpcore/issues/3404)

-   Added repeating logic to signalling a task worker subprocess. This should fix a bug where the
    task refuses to be terminated easily.
    [#3407](https://github.com/pulp/pulpcore/issues/3407)

-   Added a `start_repository_version` parameter to the file system exporter.

    If specified, it will export only content units that differed between two repository versions.
    [#3413](https://github.com/pulp/pulpcore/issues/3413)

-   Fixed the label migration code for not null constraint errors when objects with and without labels
    are migrated.
    [#3495](https://github.com/pulp/pulpcore/issues/3495)

-   Added int64 format to integer fields in api schema.
    [#3590](https://github.com/pulp/pulpcore/issues/3590)

-   Fixed a bug that caused Pulp to return duplicate content when a user was logged in as a
    non-superuser while the content was part of multiple repositories.
    [#3641](https://github.com/pulp/pulpcore/issues/3641)

-   Added missing validation to the `repair` endpoint.
    [#3645](https://github.com/pulp/pulpcore/issues/3645)

-   Fixed bug related to pulpcore-content serving content from a remote (pull-through-cache).
    [#3654](https://github.com/pulp/pulpcore/issues/3654)

#### Improved Documentation

-   Revisited features in tech preview (e.g., ACS, RBAC, metadata signing, import/export) and marked
    them production ready.
    [#3429](https://github.com/pulp/pulpcore/issues/3429)
-   Documented PostgreSQL version compatibility and incompatibility with transaction based connection
    pooling.
    [#3505](https://github.com/pulp/pulpcore/issues/3505)
-   Updated the release-process doc to be more complete.
    [#3514](https://github.com/pulp/pulpcore/issues/3514)
-   Added links to the Containerfiles used for building the pulp and pulp-minimal OCI images.
    [#3627](https://github.com/pulp/pulpcore/issues/3627)

#### Removals

-   Removed the PROFILE_STAGES_API setting along with the dependent code.
    [#3595](https://github.com/pulp/pulpcore/issues/3595)

#### Misc

-   [#3446](https://github.com/pulp/pulpcore/issues/3446), [#3541](https://github.com/pulp/pulpcore/issues/3541), [#3569](https://github.com/pulp/pulpcore/issues/3569), [#3574](https://github.com/pulp/pulpcore/issues/3574), [#3584](https://github.com/pulp/pulpcore/issues/3584), [#3638](https://github.com/pulp/pulpcore/issues/3638)

### Plugin API

#### Features

-   Refactored `ArtifactDownloader` stage logic into base class `GenericDownloader` and allow for
    the progress reports message and code to be customized by subclasses.
    [#1931](https://github.com/pulp/pulpcore/issues/1931)
-   Added version information to the worker records in the database.
    [#3365](https://github.com/pulp/pulpcore/issues/3365)
-   Added new config option `domain_compatible` to `PluginAppConfig` to specify Domains feature
    compatibility within a plugin. See Domains compatibility documentation in plugin-writer section for
    more information.
    [#3403](https://github.com/pulp/pulpcore/issues/3403)
-   Exported `TaskSerializer` in `pulpcore.plugin.serializers`
    [#3506](https://github.com/pulp/pulpcore/issues/3506)
-   Added Replicator class that plugins can implement to enable distribution/repository replication.
    [#3566](https://github.com/pulp/pulpcore/issues/3566)
-   Exposed a function for extracting PKs from URIs and a function for validating content units
    (`pulpcore.plugin.util.extract_pk`, `pulpcore.plugin.util.raise_for_unknown_content_units`).
    [#3604](https://github.com/pulp/pulpcore/issues/3604)
-   Add `label_field_name` arg to `LabelFilter()` filter that allows plugin devs to
    customize the model field that `LabelFilter` filters on.
    [#3631](https://github.com/pulp/pulpcore/issues/3631)

#### Bugfixes

-   Added HiddenFieldsMixin to the plugin API.
    [#3520](https://github.com/pulp/pulpcore/issues/3520)
-   Exported `LabelFilter` to the plugin api as a replacement for the deprecated
    `LabelSelectFilter`.
    [#3570](https://github.com/pulp/pulpcore/issues/3570)

#### Improved Documentation

-   Adds docs that plugin writers tasks must be backwards compatible until the next major Pulp version.
    [#3368](https://github.com/pulp/pulpcore/issues/3368)
-   Adds docs on the need and possible options for writing migrations in a way that they could be
    applied to a running Pulp system.
    [#3443](https://github.com/pulp/pulpcore/issues/3443)

#### Deprecations

-   Deprecated `NamedModelViewSet.extract_pk` in favour of `pulpcore.plugin.util.extract_pk`.
    Deprecated `pulpcore.plugin.actions.raise_for_unknown_content_units` in favour of
    `pulpcore.plugin.util.raise_for_unknown_content_units`.
    [#3604](https://github.com/pulp/pulpcore/issues/3604)

## 3.22.35 (2025-01-08) {: #3.22.35 }

### REST API {: #3.22.35-rest-api }

No significant changes.

### Plugin API {: #3.22.35-plugin-api }

No significant changes.

---

## 3.22.34 (2024-11-26) {: #3.22.34 }

### REST API {: #3.22.34-rest-api }

No significant changes.

### Plugin API {: #3.22.34-plugin-api }

No significant changes.

---

## 3.22.33 (2024-11-13) {: #3.22.33 }

### REST API {: #3.22.33-rest-api }

No significant changes.

### Plugin API {: #3.22.33-plugin-api }

No significant changes.

---

## 3.22.32 (2024-11-06) {: #3.22.32 }

### REST API {: #3.22.32-rest-api }

#### Bugfixes {: #3.22.32-rest-api-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.22.32-plugin-api }

No significant changes.

---

## 3.22.31 (2024-10-01) {: #3.22.31 }

### REST API {: #3.22.31-rest-api }

#### Bugfixes {: #3.22.31-rest-api-bugfix }

- Fixed a bug that caused Pulp to return duplicate content when a user was logged in as a
  non-superuser while the content was part of multiple repositories.
  [#3641](https://github.com/pulp/pulpcore/issues/3641)

### Plugin API {: #3.22.31-plugin-api }

No significant changes.

---

## 3.22.30 (2024-08-10) {: #3.22.30 }

### REST API {: #3.22.30-rest-api }

#### Bugfixes {: #3.22.30-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.22.30-plugin-api }

No significant changes.

---

## 3.22.29 (2024-07-16) {: #3.22.29 }


### REST API {: #3.22.29-rest-api }

#### Bugfixes {: #3.22.29-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.22.29-plugin-api }

No significant changes.

---

## 3.22.28 (2024-06-24) {: #3.22.28 }


### REST API {: #3.22.28-rest-api }

#### Bugfixes {: #3.22.28-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.22.28-plugin-api }

No significant changes.

---

## 3.22.27 (2024-06-18) {: #3.22.27 }


### REST API {: #3.22.27-rest-api }

#### Misc {: #3.22.27-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.22.27-plugin-api }

No significant changes.

---

!!! warning
    Until Role-Based Access Control is added to Pulp, REST API is not safe for multi-user use.
    Sensitive credentials can be read by any user, e.g. `Remote.password`, `Remote.client_key`.

## 3.22.26 (2024-05-14) {: #3.22.26 }

### REST API

#### Bugfixes

-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

### Plugin API

No significant changes.

---

## 3.22.25 (2024-04-17) {: #3.22.25 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.22.24 (2024-03-26) {: #3.22.24 }

### REST API

#### Misc

-   [#3574](https://github.com/pulp/pulpcore/issues/3574)

### Plugin API

No significant changes.

---

## 3.22.23 (2024-03-26) {: #3.22.23 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.22.22 (2024-01-30) {: #3.22.22 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

---

## 3.22.21 (2024-01-09) {: #3.22.21 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.22.20 (2023-11-30) {: #3.22.20 }

### REST API

#### Bugfixes

-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)

### Plugin API

No significant changes.

## 3.22.19 (2023-11-15) {: #3.22.19 }

### REST API

#### Bugfixes

-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

No significant changes.

## 3.22.18 (2023-11-03) {: #3.22.18 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.22.17 (2023-10-16) {: #3.22.17 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.22.16 (2023-09-27) {: #3.22.16 }

### REST API

#### Bugfixes

-   Fixed sync not deleting temporary files when WORKING_DIRECTORY is not a sub-directory of MEDIA_ROOT
    or when using a non-filesystem storage backend.
    [#1936](https://github.com/pulp/pulpcore/issues/1936)

#### Misc

-   [#4436](https://github.com/pulp/pulpcore/issues/4436)

### Plugin API

No significant changes.

## 3.22.15 (2023-09-20) {: #3.22.15 }

### REST API

#### Bugfixes

-   Ensure non-chunked exports and chunked exports use the same compression level.
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)

### Plugin API

No significant changes.

## 3.22.14 (2023-09-06) {: #3.22.14 }

### REST API

#### Bugfixes

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)

### Plugin API

No significant changes.

## 3.22.13 (2023-08-23) {: #3.22.13 }

### REST API

#### Bugfixes

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

No significant changes.

## 3.22.12 (2023-08-01) {: #3.22.12 }

### REST API

#### Bugfixes

-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.22.11 (2023-07-31) {: #3.22.11 }

### REST API

#### Bugfixes

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.22.10 (2023-07-29) {: #3.22.10 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

### Plugin API

No significant changes.

## 3.22.9 (2023-07-22) {: #3.22.9 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)
-   Added repeating logic to signalling a task worker subprocess. This should fix a bug where the
    task refuses to be terminated easily.
    [#3407](https://github.com/pulp/pulpcore/issues/3407)
-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

### Plugin API

No significant changes.

## 3.22.8 (2023-07-19) {: #3.22.8 }

### REST API

#### Bugfixes

-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

### Plugin API

No significant changes.

## 3.22.7 (2023-06-14) {: #3.22.7 }

### REST API

#### Bugfixes

-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)

### Plugin API

No significant changes.

## 3.22.6 (2023-06-07) {: #3.22.6 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)

### Plugin API

No significant changes.

## 3.22.5 (2023-05-30) {: #3.22.5 }

### REST API

#### Bugfixes

-   Taught repair task to remove unrepairable corrupted files.
    [#1947](https://github.com/pulp/pulpcore/issues/1947)
-   Taught repair task to continue when encountering a 404 during the repair process.
    [#3611](https://github.com/pulp/pulpcore/issues/3611)

### Plugin API

No significant changes.

## 3.22.4 (2023-04-11) {: #3.22.4 }

### REST API

#### Bugfixes

-   Fixed package timestamp on content app to reflect time package was added to the repository.
    [#3653](https://github.com/pulp/pulpcore/issues/3653)
-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)

### Plugin API

No significant changes.

## 3.22.3 (2023-03-06) {: #3.22.3 }

### REST API

No significant changes.

### Plugin API

No significant changes.

## 3.22.2 (2023-02-02) {: #3.22.2 }

### REST API

#### Bugfixes

-   Added a `start_repository_version` parameter to the file system exporter.

    If specified, it will export only content units that differed between two repository versions.
    [#3413](https://github.com/pulp/pulpcore/issues/3413)

### Plugin API

No significant changes.

## 3.22.1 (2023-01-20) {: #3.22.1 }

### REST API

#### Bugfixes

-   Fixed the label migration code for not null constraint errors when objects with and without labels
    are migrated.
    [#3495](https://github.com/pulp/pulpcore/issues/3495)

### Plugin API

No significant changes.

## 3.22.0 (2022-12-18) {: #3.22.0 }

### REST API

#### Features

-   Added dates to the HTML pages listing the content of distributions. The timestamp is of when the
    content was created in Pulp.
    [#2054](https://github.com/pulp/pulpcore/issues/2054)
-   Create HiddenFieldsMixin serializer and add hidden_fields to RemoteSerializer and UserSerializer.
    [#2825](https://github.com/pulp/pulpcore/issues/2825)
-   Added `pulpcore-manager` command called `remove-signing-service` for removing specified signing services.
    [#2967](https://github.com/pulp/pulpcore/issues/2967)
-   Added the option HIDE_GUARDED_DISTRIBUTIONS to allow hiding the content guard protected
    distributions from the listing page.
    [#3061](https://github.com/pulp/pulpcore/issues/3061)
-   Added "content_settings" stanza to the /status/ output.
    [#3138](https://github.com/pulp/pulpcore/issues/3138)
-   Added expiry to preauthenticated URLs from ContentRedirectingContentGuard.
    [#3238](https://github.com/pulp/pulpcore/issues/3238)
-   Added `reserved_resources`, `reserved_resources__in`, `exclusive_resources`,
    `exclusive_resources__in`, `shared_resources` and `shared_resources__in` filter to task
    list endpoint.
    [#3280](https://github.com/pulp/pulpcore/issues/3280)
-   The postgresql version is now included in analytics data posted. The payload looks like:
    `` {`'postgresqlVersion': 90200} ``. The integer value is the raw format postgresql reports its
    version as.
    [#3396](https://github.com/pulp/pulpcore/issues/3396)
-   The new `ANALYTICS` setting replaced the `TELEMETRY` setting to avoid confusion with
    application metrics that will be exposed using OpenTelemetry.
    [#3417](https://github.com/pulp/pulpcore/issues/3417)

#### Bugfixes

-   Fixed the fs exporter to handle the case where there are pre-existing files in the location that FileSystem attempts to export to you get a FileExistsError.
    [#1949](https://github.com/pulp/pulpcore/issues/1949)
-   The logging_cid field of a task can no longer be an empty string.
    [#3016](https://github.com/pulp/pulpcore/issues/3016)
-   Fixed content-disposition header which is used in the object storage backends.
    [#3124](https://github.com/pulp/pulpcore/issues/3124)
-   Fixed the fs exporter to handle the case where hardlink method was requested but pulp and export locations are in different partitions so can't share the same inode.
    [#3187](https://github.com/pulp/pulpcore/issues/3187)
-   Another guardrail added around content-stages to address deadlock in a specific usecase.
    [#3192](https://github.com/pulp/pulpcore/issues/3192)
-   Fixed bug where installations with at least one pre-release plugin installed were posting to the
    production analytics site instead of the developer analytics site.
    [#3213](https://github.com/pulp/pulpcore/issues/3213)
-   Fixed the worker__in filter for Tasks API.
    [#3235](https://github.com/pulp/pulpcore/issues/3235)
-   Do not expose artifact digest via content-disposition header when using Azure backend.
    [#3244](https://github.com/pulp/pulpcore/issues/3244)
-   Fixed a bug that disallowed non-admin users to purge completed tasks.
    [#3263](https://github.com/pulp/pulpcore/issues/3263)
-   Made ordering consistent between all list API endpoints.
    [#3266](https://github.com/pulp/pulpcore/issues/3266)
-   Another step on closing the deadlock-window when syncing overlapping content.
    [#3284](https://github.com/pulp/pulpcore/issues/3284)
-   Fixed an occasional 500 error when viewing a repository version content summary while performing a content deletion task.
    [#3299](https://github.com/pulp/pulpcore/issues/3299)
-   Fixed an error when raising `UnexportableArtifactException`.
    [#3313](https://github.com/pulp/pulpcore/issues/3313)
-   Hardened the state transition for tasks and ensured a canceled task will have finished_at set.
    [#3319](https://github.com/pulp/pulpcore/issues/3319)
-   Made sure PulpImport's use of tar.extractall() is safe.
    [#3323](https://github.com/pulp/pulpcore/issues/3323)
-   Fixed content disposition header value when content is stored in Azure.
    [#3342](https://github.com/pulp/pulpcore/issues/3342)
-   Fixes schema generation to use proper type uri for `HyperlinkRelatedFilter`.
    [#3351](https://github.com/pulp/pulpcore/issues/3351)
-   Insured that pulp-export correctly locks repos-being-exported.
    [#3370](https://github.com/pulp/pulpcore/issues/3370)
-   Fixed the update of default access policies when fields are missing.
    [#3391](https://github.com/pulp/pulpcore/issues/3391)
-   Fixed the openapi spec of "fields" and "exclude_fields" querystring parameters.
    [#3398](https://github.com/pulp/pulpcore/issues/3398)
-   Fixed label querying performance issues.
    In case some labels could not be migrated properly, a `datarepair-labels` command was added.
    [#3400](https://github.com/pulp/pulpcore/issues/3400)
-   Fix migrating Remotes with @ in path
    [#3409](https://github.com/pulp/pulpcore/issues/3409)
-   Fixed the broken link on the root page served by pulpcore-content.
    [#3436](https://github.com/pulp/pulpcore/issues/3436)

#### Improved Documentation

-   Improvements clarifying how to specify settings and which settings are required.
    [#2417](https://github.com/pulp/pulpcore/issues/2417)
-   Documented Pulpcore and Plugin release processes.
    [#3204](https://github.com/pulp/pulpcore/issues/3204)
-   Separated the user plugin listing from the plugin developer docs more clearly.
    [#3260](https://github.com/pulp/pulpcore/issues/3260)
-   Remove the ansible collection from the recommendation
    [#3430](https://github.com/pulp/pulpcore/issues/3430)

#### Deprecations

-   `` TELEMETRY` setting was deprecated in favor of ``ANALYTICS`.
    #3417 <[https://github.com/pulp/pulpcore/issues/3417](https://github.com/pulp/pulpcore/issues/3417)>`__

#### Misc

-   [#3232](https://github.com/pulp/pulpcore/issues/3232), [#3333](https://github.com/pulp/pulpcore/issues/3333), [#3334](https://github.com/pulp/pulpcore/issues/3334), [#3461](https://github.com/pulp/pulpcore/issues/3461)

### Plugin API

#### Features

-   Added `get_artifact_url` to emit preauthed urls to existing artifacts.
    [#2785](https://github.com/pulp/pulpcore/issues/2785)
-   The upload feature was changed to accept already existing content. This allows multiple users
    to own identical content when working with plugins that implement the 'retrieve' method
    inside their `ContentUpload` serializers.
    [#3081](https://github.com/pulp/pulpcore/issues/3081)
-   Exposed `ArtifactResponse` at `pulpcore.plugin.responses`.
    [#3340](https://github.com/pulp/pulpcore/issues/3340)
-   Exposed the `get_url` util function.
    [#3468](https://github.com/pulp/pulpcore/issues/3468)

#### Bugfixes

-   Added `BaseFilterSet` to `NamedModelViewSet` to allow ordering on all list endpoints even
    without specifying a custom filterset class.
    [#3266](https://github.com/pulp/pulpcore/issues/3266)

#### Improved Documentation

-   Added documentation for plugin writers on declaring dependencies.
    [#2997](https://github.com/pulp/pulpcore/issues/2997)

#### Removals

-   Deprecated model `Label` and serializer field `LabelField` and `LabelSelectFilter` for
    removal in 3.25.
    [#3400](https://github.com/pulp/pulpcore/issues/3400)

## 3.21.36 (2024-11-13) {: #3.21.36 }

### REST API {: #3.21.36-rest-api }

No significant changes.

### Plugin API {: #3.21.36-plugin-api }

No significant changes.

---

## 3.21.35 (2024-10-31) {: #3.21.35 }

### REST API {: #3.21.35-rest-api }

#### Bugfixes {: #3.21.35-rest-api-bugfix }

- Fixed the JSONField specification so it doesn't break ruby bindings.
  See context [here](https://github.com/pulp/pulp_rpm/issues/3639).

### Plugin API {: #3.21.35-plugin-api }

No significant changes.

---

## 3.21.34 (2024-10-01) {: #3.21.34 }

### REST API {: #3.21.34-rest-api }

#### Bugfixes {: #3.21.34-rest-api-bugfix }

- Fixed a bug that caused Pulp to return duplicate content when a user was logged in as a
  non-superuser while the content was part of multiple repositories.
  [#3641](https://github.com/pulp/pulpcore/issues/3641)

### Plugin API {: #3.21.34-plugin-api }

No significant changes.

---

## 3.21.33 (2024-08-12) {: #3.21.33 }

### REST API {: #3.21.33-rest-api }

#### Bugfixes {: #3.21.33-rest-api-bugfix }

- Fixed RBAC permissions being incorrectly assigned in tasks that create objects.
  https://access.redhat.com/security/cve/cve-2024-7143
  [#5683](https://github.com/pulp/pulpcore/issues/5683)

### Plugin API {: #3.21.33-plugin-api }

No significant changes.

---

## 3.21.32 (2024-07-16) {: #3.21.32 }


### REST API {: #3.21.32-rest-api }

#### Bugfixes {: #3.21.32-rest-api-bugfix }

- Browsable HREFs now have clickable links again.
  [#5563](https://github.com/pulp/pulpcore/issues/5563)

### Plugin API {: #3.21.32-plugin-api }

No significant changes.

---

## 3.21.31 (2024-06-24) {: #3.21.31 }


### REST API {: #3.21.31-rest-api }

#### Bugfixes {: #3.21.31-rest-api-bugfix }

- Fixed openapi command where plugins relied on CONTENT_ORIGIN to be set.
  [#5510](https://github.com/pulp/pulpcore/issues/5510)

### Plugin API {: #3.21.31-plugin-api }

No significant changes.

---

## 3.21.30 (2024-06-18) {: #3.21.30 }


### REST API {: #3.21.30-rest-api }

#### Misc {: #3.21.30-rest-api-misc }

- [#5462](https://github.com/pulp/pulpcore/issues/5462)

### Plugin API {: #3.21.30-plugin-api }

No significant changes.

---

!!! warning
    Until Role-Based Access Control is added to Pulp, REST API is not safe for multi-user use.
    Sensitive credentials can be read by any user, e.g. `Remote.password`, `Remote.client_key`.

## 3.21.29 (2024-05-14) {: #3.21.29 }

### REST API

#### Bugfixes

-   Stopped deleting content and artifacts presumably created by later failed or canceled tasks.
    Deleting these lies solely in the responsibility of orphan cleanup.
    [#5363](https://github.com/pulp/pulpcore/issues/5363)

### Plugin API

No significant changes.

---

## 3.21.28 (2024-03-26) {: #3.21.28 }

### REST API

#### Misc

-   [#3574](https://github.com/pulp/pulpcore/issues/3574)

### Plugin API

No significant changes.

---

## 3.21.27 (2024-03-26) {: #3.21.27 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.21.26 (2024-01-30) {: #3.21.26 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

---

## 3.21.25 (2024-01-09) {: #3.21.25 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.21.24 (2023-11-30) {: #3.21.24 }

### REST API

#### Bugfixes

-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)

### Plugin API

No significant changes.

## 3.21.23 (2023-11-23) {: #3.21.23 }

### REST API

#### Bugfixes

-   Fix <file://> syncs deleting the original files.
    [#4681](https://github.com/pulp/pulpcore/issues/4681)

### Plugin API

No significant changes.

## 3.21.22 (2023-11-14) {: #3.21.22 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.21.21 (2023-10-16) {: #3.21.21 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.21.20 (2023-10-05) {: #3.21.20 }

### REST API

#### Bugfixes

-   Made sure PulpImport's use of tar.extractall() is safe.
    [#3323](https://github.com/pulp/pulpcore/issues/3323)

### Plugin API

No significant changes.

## 3.21.19 (2023-09-27) {: #3.21.19 }

### REST API

#### Bugfixes

-   Fixed sync not deleting temporary files when WORKING_DIRECTORY is not a sub-directory of MEDIA_ROOT
    or when using a non-filesystem storage backend.
    [#1936](https://github.com/pulp/pulpcore/issues/1936)

#### Misc

-   [#4436](https://github.com/pulp/pulpcore/issues/4436)

### Plugin API

No significant changes.

## 3.21.18 (2023-09-25) {: #3.21.18 }

### REST API

#### Bugfixes

-   Ensure non-chunked exports and chunked exports use the same compression level.
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)

### Plugin API

No significant changes.

## 3.21.17 (2023-09-06) {: #3.21.17 }

### REST API

#### Bugfixes

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)

### Plugin API

No significant changes.

## 3.21.16 (2023-08-23) {: #3.21.16 }

### REST API

#### Bugfixes

-   Added repeating logic to signalling a task worker subprocess. This should fix a bug where the
    task refuses to be terminated easily.
    [#3407](https://github.com/pulp/pulpcore/issues/3407)
-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

No significant changes.

## 3.21.15 (2023-08-01) {: #3.21.15 }

### REST API

#### Bugfixes

-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.21.14 (2023-07-31) {: #3.21.14 }

### REST API

#### Bugfixes

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.21.13 (2023-07-29) {: #3.21.13 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

### Plugin API

No significant changes.

## 3.21.12 (2023-07-22) {: #3.21.12 }

### REST API

#### Bugfixes

-   Resolved a memory leak that could occur while making large repeated queries against the API service.
    [#2250](https://github.com/pulp/pulpcore/issues/2250)
-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

### Plugin API

No significant changes.

## 3.21.11 (2023-07-19) {: #3.21.11 }

### REST API

#### Bugfixes

-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

### Plugin API

No significant changes.

## 3.21.10 (2023-06-14) {: #3.21.10 }

### REST API

#### Bugfixes

-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)

### Plugin API

No significant changes.

## 3.21.9 (2023-06-06) {: #3.21.9 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)

### Plugin API

No significant changes.

## 3.21.8 (2023-05-30) {: #3.21.8 }

### REST API

#### Bugfixes

-   Taught repair task to remove unrepairable corrupted files.
    [#1947](https://github.com/pulp/pulpcore/issues/1947)
-   Taught repair task to continue when encountering a 404 during the repair process.
    [#3611](https://github.com/pulp/pulpcore/issues/3611)

### Plugin API

No significant changes.

## 3.21.7 (2023-04-11) {: #3.21.7 }

### REST API

#### Bugfixes

-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)

### Plugin API

No significant changes.

## 3.21.6 (2023-03-29) {: #3.21.6 }

### REST API

#### Bugfixes

-   Fixed an error when raising `UnexportableArtifactException`.
    [#3313](https://github.com/pulp/pulpcore/issues/3313)
-   Fixed the openapi spec of "fields" and "exclude_fields" querystring parameters.
    [#3398](https://github.com/pulp/pulpcore/issues/3398)

### Plugin API

No significant changes.

## 3.21.5 (2023-02-02) {: #3.21.5 }

### REST API

#### Bugfixes

-   Added a `start_repository_version` parameter to the file system exporter.

    If specified, it will export only content units that differed between two repository versions.
    [#3413](https://github.com/pulp/pulpcore/issues/3413)

### Plugin API

No significant changes.

## 3.21.4 (2023-01-20) {: #3.21.4 }

### REST API

#### Bugfixes

-   Fixed an occasional 500 error when viewing a repository version content summary while performing a content deletion task.
    [#3299](https://github.com/pulp/pulpcore/issues/3299)
-   Fix migrating Remotes with @ in path
    [#3409](https://github.com/pulp/pulpcore/issues/3409)

### Plugin API

No significant changes.

## 3.21.3 (2022-11-15) {: #3.21.3 }

### REST API

#### Bugfixes

-   Adjust the dependency on `cryptography` to suite more versions of `pulp-certguard`.
    [#3269](https://github.com/pulp/pulpcore/issues/3269)
-   Insured that pulp-export correctly locks repos-being-exported.
    [#3370](https://github.com/pulp/pulpcore/issues/3370)
-   Fixed the update of default access policies when fields are missing.
    [#3391](https://github.com/pulp/pulpcore/issues/3391)

### Plugin API

No significant changes.

## 3.21.2 (2022-10-24) {: #3.21.2 }

### REST API

#### Bugfixes

-   Another step on closing the deadlock-window when syncing overlapping content.
    [#3284](https://github.com/pulp/pulpcore/issues/3284)
-   Fixed content disposition header value when content is stored in Azure.
    [#3342](https://github.com/pulp/pulpcore/issues/3342)

### Plugin API

No significant changes.

## 3.21.1 (2022-10-18) {: #3.21.1 }

### REST API

#### Bugfixes

-   Fixed the fs exporter to handle the case where there are pre-existing files in the location that FileSystem attempts to export to you get a FileExistsError.
    [#1949](https://github.com/pulp/pulpcore/issues/1949)
-   Fixed content-disposition header which is used in the object storage backends.
    [#3124](https://github.com/pulp/pulpcore/issues/3124)
-   Fixed the fs exporter to handle the case where hardlink method was requested but pulp and export locations are in different partitions so can't share the same inode.
    [#3187](https://github.com/pulp/pulpcore/issues/3187)
-   Another guardrail added around content-stages to address deadlock in a specific usecase.
    [#3192](https://github.com/pulp/pulpcore/issues/3192)
-   Fixed bug where installations with at least one pre-release plugin installed were posting to the
    production telemetry site instead of the developer telemetry site.
    [#3213](https://github.com/pulp/pulpcore/issues/3213)
-   Do not expose artifact digest via content-disposition header when using Azure backend.
    [#3244](https://github.com/pulp/pulpcore/issues/3244)

### Plugin API

No significant changes.

## 3.21.0 (2022-09-08) {: #3.21.0 }

### REST API

#### Features

-   Added an option for automatically creating repositories on the fly during an import procedure. The
    option is disabled by default. Enable it by setting the field `create_repositories` to `True`
    via the REST API.
    [#1920](https://github.com/pulp/pulpcore/issues/1920)

-   Content app now groups distributions in a directory structure on the landing page.
    [#1951](https://github.com/pulp/pulpcore/issues/1951)

-   Added RBAC protection to upload objects.
    [#2362](https://github.com/pulp/pulpcore/issues/2362)

-   New endpoint to list all Remote objects is now available at /pulp/api/v3/remotes/.
    [#2530](https://github.com/pulp/pulpcore/issues/2530)

-   `HyperlinkRelatedFilter` can now be filtered by object types and NULL values.

    Repositories can now be filtered by Remotes.
    [#2864](https://github.com/pulp/pulpcore/issues/2864)

-   Introduced the `with_content` query parameter that filters distributions by the specified content
    unit.
    [#2952](https://github.com/pulp/pulpcore/issues/2952)

-   Add a debug log to see where is file downloaded from.
    [#3088](https://github.com/pulp/pulpcore/issues/3088)

-   Introduces anonymous telemetry data posting to <https://analytics.pulpproject.org/>. This is
    enabled by default, and can be disabled by setting the `TELEMETRY` setting to `False`. See the
    *telemetry docs* for more info on exactly what is posted along with an example.
    [#3115](https://github.com/pulp/pulpcore/issues/3115)

#### Bugfixes

-   Fixed the value of the Content-Type header returned for .xml.gz files.
    [#2811](https://github.com/pulp/pulpcore/issues/2811)
-   Improve content app performance on head requests
    [#2924](https://github.com/pulp/pulpcore/issues/2924)
-   Use published relative paths for FS Exporter.
    [#2933](https://github.com/pulp/pulpcore/issues/2933)
-   Configured aiohttp to avoid rewriting redirect URLs, as some web servers (e.g. Amazon CloudFront) can be tempermental about the encoding of the URL.
    [#2964](https://github.com/pulp/pulpcore/issues/2964)
-   Fixed inaccurate 404 error message for content app.
    [#2977](https://github.com/pulp/pulpcore/issues/2977)
-   Fixed variable referenced before assignment error in `django-admin dump-permissions`.
    [#3011](https://github.com/pulp/pulpcore/issues/3011)
-   Do not create telemetry TaskSchedule for production systems.
    [#3015](https://github.com/pulp/pulpcore/issues/3015)
-   Serialized orphan cleanup tasks with respect to each other to prevent them from failing.
    [#3030](https://github.com/pulp/pulpcore/issues/3030)
-   Fixed 500 error when 'range' header starts with a negative value for 'on-demand' content.
    [#3052](https://github.com/pulp/pulpcore/issues/3052)
-   Fixed bug where 'range' header with a start value greater than size of on-demand content would produce an incomplete response.
    [#3054](https://github.com/pulp/pulpcore/issues/3054)
-   Fixed a bug where Content-Length header value was wrong when on-demand content was requested with
    a Range header that has an end value greater than the size of the content.
    [#3055](https://github.com/pulp/pulpcore/issues/3055)
-   Fixed a bug in the routing logic, where generic base class viewsets were served on actual urls.
    [#3056](https://github.com/pulp/pulpcore/issues/3056)
-   Fixed a bug in import code where all objects imported would also be added to the target repository
    by their UUID. In case of a UUID-collision with content, unwanted content may have ended up being
    in the next repository version.
    [#3064](https://github.com/pulp/pulpcore/issues/3064)
-   Fixed a bug that caused the import machinery to import the same content multiple times in a row.
    [#3075](https://github.com/pulp/pulpcore/issues/3075)
-   Limited access policy reset to viewsets with a default one. This will solve 500 errors when
    trying to reset an access policy whose viewset name is repeated by an abstract base class.
    Stopped reporting on unmodified access policies when migrating.
    [#3080](https://github.com/pulp/pulpcore/issues/3080)
-   Fixed another rare deadlock for high-concurrency/overlapping-content syncs.
    [#3111](https://github.com/pulp/pulpcore/issues/3111)
-   Fixed the progress report counter for imported content units.
    [#3113](https://github.com/pulp/pulpcore/issues/3113)
-   Moved telemetry setup to the pulpcore-worker startup sequence. This will prevent orm calls before
    all apps are ready.
    [#3122](https://github.com/pulp/pulpcore/issues/3122)

#### Improved Documentation

-   docs: Update the architecture diagram to reflect the fact that both API and workers talk to redis.
    [#3000](https://github.com/pulp/pulpcore/issues/3000)
-   Multiple updates to the PyPI (manual) install instructions.
    [#3051](https://github.com/pulp/pulpcore/issues/3051)

#### Misc

-   [#2445](https://github.com/pulp/pulpcore/issues/2445), [#2890](https://github.com/pulp/pulpcore/issues/2890), [#3063](https://github.com/pulp/pulpcore/issues/3063), [#3091](https://github.com/pulp/pulpcore/issues/3091)

### Plugin API

#### Features

-   Exposed the `RepositoryResource` class to enable plugin writers to customize the way of
    importing/exporting of particular repository types. Repositories should be now a part of exported
    resources to enable automatic creation of missing repositories.
    [#1920](https://github.com/pulp/pulpcore/issues/1920)
-   Added a global access condition `has_upload_param_model_or_obj_perms` to enforce permissions
    on the upload parameter.
    [#2362](https://github.com/pulp/pulpcore/issues/2362)
-   Extended the interface of `verify_signature` as a new function `gpg_verify` to support file
    like objects in addition to a file path and also return the `python-gnupg` `verify` object.
    [#2930](https://github.com/pulp/pulpcore/issues/2930)
-   Added new field `info` to the `RepositoryVersion`. This will allow to store additional information for a specific version.
    [#2998](https://github.com/pulp/pulpcore/issues/2998)
-   Added pulpcore.plugin.models.EncryptedTextField to plugin api.
    #3157 <[https://github.com/pulp/pulpcore/issues/3157](https://github.com/pulp/pulpcore/issues/3157)>`__

#### Improved Documentation

-   Adds Master/Detail pattern overview and usage documentation to the Plugin writer docs.
    [#2981](https://github.com/pulp/pulpcore/issues/2981)
-   Documented the use of `RolesMixin` in the plugin writer concepts section.
    [#3085](https://github.com/pulp/pulpcore/issues/3085)

#### Deprecations

-   Deprecated `verify_signature` in favor of `gpg_verify` for removal in 3.25.
    [#2930](https://github.com/pulp/pulpcore/issues/2930)

## 3.20.0 (2022-06-21) {: #3.20.0 }

### REST API

#### Features

-   Added a repository filter to publications.
    [#1912](https://github.com/pulp/pulpcore/issues/1912)

-   The status API endpoint now shows the python package name that provides a given plugin.
    [#1982](https://github.com/pulp/pulpcore/issues/1982)

-   Queryset scoping can be customized by the user using the new field `queryset_scoping` on a
    ViewSet's AccessPolicy.
    [#2114](https://github.com/pulp/pulpcore/issues/2114)

-   Enabled administrators to work with a customized GnuPG home directory and keyring during the
    creation of a signing service. The introduced optional arguments `--gnupghome` and `--keyring`
    are available under the `pulpcore-manager add-signing-service` command.
    [#2476](https://github.com/pulp/pulpcore/issues/2476)

-   Added the setting `REDIRECT_TO_OBJECT_STORAGE` to allow using cloud storage with or without
    redirecting urls.

    Added support for sftp storage via the `pulpcore.app.models.storage.PulpSFTPStorage` class.
    [#2537](https://github.com/pulp/pulpcore/issues/2537)

-   Added more details to an error message that is shown when none of the allowed content checksums
    hashers could be used.
    [#2550](https://github.com/pulp/pulpcore/issues/2550)

-   Add contains_permission query parameter to the roles API that allows clients to get back a list
    of roles that have any permission in a list of permissions.
    [#2715](https://github.com/pulp/pulpcore/issues/2715)

-   Master Content endpoint, `/pulp/api/v3/content/`, has a new access policy that allows any
    authenticated user to view content. The endpoint now scopes the content based on repositories
    the user can see.
    [#2724](https://github.com/pulp/pulpcore/issues/2724)

-   New AccessPolicies have been added to ContentGuard, Distribution, Publication, Repository,
    and RepositoryVersions master ViewSets. Queryset scoping has been enabled for each ViewSet.
    [#2725](https://github.com/pulp/pulpcore/issues/2725)

-   New AccessPolicy for ContentRedirectContentGuard ViewSet has been added.
    [#2726](https://github.com/pulp/pulpcore/issues/2726)

-   Added dump-permissions management command to list deprecated permissions not yet translated into
    roles. This is the only way to get to this information after the 3.20 release.
    [#2741](https://github.com/pulp/pulpcore/issues/2741)

-   Add ?for_object_type query parameter to Roles API that accepts an object HREF and returns a list
    of roles that only contain permissions for the given object type.
    [#2747](https://github.com/pulp/pulpcore/issues/2747)

-   Add role description and permissions to group and user role serializer.
    [#2765](https://github.com/pulp/pulpcore/issues/2765)

#### Bugfixes

-   Leading and trailing whitespace characters are no longer trimmed in passwords within remotes.
    [#2068](https://github.com/pulp/pulpcore/issues/2068)

-   Fixed generation of the redirect url to the object storage
    [#2075](https://github.com/pulp/pulpcore/issues/2075)

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Made the API root endpoint accessible for anonymous users once again.
    [#2340](https://github.com/pulp/pulpcore/issues/2340)

-   Removed il8n from the logs written so they will always show up in English for speedy resolution of
    error messages. All user facing strings are still expected to be il8n.
    [#2477](https://github.com/pulp/pulpcore/issues/2477)

-   Replaced "//" with "/" in base_url when CONTENT_PATH_PREFIX is "" or "/".
    [#2553](https://github.com/pulp/pulpcore/issues/2553)

-   Fixed does_batch method in sync pipeline to allow waiting on content that is already resolved.
    [#2557](https://github.com/pulp/pulpcore/issues/2557)

-   Fixed OOM error after uploading large chunked files.
    [#2573](https://github.com/pulp/pulpcore/issues/2573)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

-   Improved the error message when HTTP proxies reject requests from Pulp.
    [#2654](https://github.com/pulp/pulpcore/issues/2654)

-   Fix ?ordering=role on user and group role apis so that it sorts results by role name.
    [#2703](https://github.com/pulp/pulpcore/issues/2703)

-   Add options to the role_util functions to make them work the same as guardian did.
    [#2739](https://github.com/pulp/pulpcore/issues/2739)

-   Fixed a bug that disallowed administrators to create a signing service via the pulpcore-manager
    utility.
    [#2798](https://github.com/pulp/pulpcore/issues/2798)

-   Reduced duplicate SQL queries for `AccessPolicy` when accessing any view.
    [#2802](https://github.com/pulp/pulpcore/issues/2802)

-   Fixed docs regarding the default for orphan protection time.
    [#2810](https://github.com/pulp/pulpcore/issues/2810)

-   Started showing errors when users try to export remote artifacts.
    [#2817](https://github.com/pulp/pulpcore/issues/2817)

-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)

#### Improved Documentation

-   Cleared out some of the paragraphs from the "Pull Request Walkthrough" section.
    [#1852](https://github.com/pulp/pulpcore/issues/1852)
-   Added a troubleshooting section that includes information on how to enable DEBUG logging.
    [#1944](https://github.com/pulp/pulpcore/issues/1944)
-   Removed some out of date references to Redmine (the previous issue tracker). We use Github Issues
    now.
    [#2642](https://github.com/pulp/pulpcore/issues/2642)
-   Added a note about explicitly setting `content_object` to null when assigning model-level
    permissions.
    [#2758](https://github.com/pulp/pulpcore/issues/2758)
-   Fixed `extlinks` use in docs to be Sphinx==5.0.0 compatible.
    [#2782](https://github.com/pulp/pulpcore/issues/2782)
-   Update installation instructions about "User and database configuration" for the Database setup to point to a matching Django documentation.
    [#2877](https://github.com/pulp/pulpcore/issues/2877)

#### Deprecations

-   Deprecated creation hook interface was removed. Creation hook need to be registered with the view
    set by the plugin writer before being used. Creation hooks can no longer be added with the
    deprecated name `permission_assignments`.
    [#2559](https://github.com/pulp/pulpcore/issues/2559)

#### Removals

-   Removed the group permission endpoints `api/v3/groups/:id/model_permissions/` and
    `api/v3/groups/:id/object_permissions/`. Permissions should be managed via roles exclusively.
    [#2050](https://github.com/pulp/pulpcore/issues/2050)
-   Removed django-guardian from the stack. The `guardian.backends.ObjectPermissionBackend` should
    not be used anymore.
    [#2051](https://github.com/pulp/pulpcore/issues/2051)

#### Misc

-   [#2070](https://github.com/pulp/pulpcore/issues/2070), [#2244](https://github.com/pulp/pulpcore/issues/2244), [#2605](https://github.com/pulp/pulpcore/issues/2605), [#2643](https://github.com/pulp/pulpcore/issues/2643)

### Plugin API

#### Features

-   Plugins are required to provide the `python_package_name` as a string attribute on their subclass
    of `PulpPluginAppConfig`.
    [#1982](https://github.com/pulp/pulpcore/issues/1982)

-   Exposed the method `raise_for_unknown_content_units` which raises `ValidationError` for content
    units that were not found in the database.
    [#2052](https://github.com/pulp/pulpcore/issues/2052)

-   Plugins now have to enable default queryset scoping by setting the `queryset_scoping` field on the
    AccessPolicy to `{"function": "scope_queryset"}`.

    Default queryset scoping behavior can be changed by supplying a new `scope_queryset` method.

    Extra queryset scoping functions can be declared on plugin ViewSets and used by setting the
    AccessPolicy's `queryset_scoping` field.
    [#2114](https://github.com/pulp/pulpcore/issues/2114)

-   DeclarativeArtifact now accepts a `urls` option which permits multiple URLs
    to be provided for a single artifact. If multiple URLs are provided, the download
    stage will try each of them in turn upon encountering failures.
    [#2175](https://github.com/pulp/pulpcore/issues/2175)

-   Exposed the function `pulpcore.plugin.util.verify_signature` for verifying signatures created
    by signing services.
    [#2476](https://github.com/pulp/pulpcore/issues/2476)

-   Added `pulpcore.plugin.content.ArtifactResponse` to plugin API. Use this response to stream an
    artifact from the object storage if redirecting is impossible.
    [#2537](https://github.com/pulp/pulpcore/issues/2537)

-   Queryset scoping is now performed when the ViewSet's AccessPolicy field `scope_queryset` is set to
    a function on the ViewSet.

    `NamedModelViewSet` now has default scoping method `scope_queryset` that will scope the request
    off of `queryset_filtering_required_permission` if present. If ViewSet is a master ViewSet then
    scoping will be performed by calling each child's scoping method if present.
    [#2723](https://github.com/pulp/pulpcore/issues/2723)

-   Content ViewSets default `scope_queryset` method will scope based on repositories the user can see.
    [#2724](https://github.com/pulp/pulpcore/issues/2724)

-   Added the ability to specify an upload for the single shot upload serializer. This allows to
    upload files in chunks and attach them with content in repositories without creating orphans.
    [#2786](https://github.com/pulp/pulpcore/issues/2786)

-   Added new access condition `has_required_repo_perms_on_upload` for RBAC plugins to use to require
    users to specify a repository when uploading content. If not used when uploading content, non-admin
    users will not be able to see their uploaded content if queryset scoping is enabled.
    [#2796](https://github.com/pulp/pulpcore/issues/2796)

#### Bugfixes

-   Reworked the ordering framework to use django-filters.

    Plugins should not declare filter-backends on viewsets.
    [#2703](https://github.com/pulp/pulpcore/issues/2703)

#### Improved Documentation

-   Updated plugin writers RBAC guide to explain more roles and less permissions. Removed mentions of
    django-guardian.
    [#2463](https://github.com/pulp/pulpcore/issues/2463)
-   Added docs on the expectation that all user-facing strings are i8ln wrapped with gettext, but log
    messages are not.
    [#2477](https://github.com/pulp/pulpcore/issues/2477)

#### Removals

-   The `pulpcore.plugin.exceptions.MissingResource` object has been removed. Instead let 404
    errors propagate upwards for DRF to handle, or use the DRF exception `NotFound`.
    [#1812](https://github.com/pulp/pulpcore/issues/1812)
-   Removed django-guardian from the stack. This includes the removal of `AutoDeleteObjPermsMixin`
    from the plugin api.
    [#2051](https://github.com/pulp/pulpcore/issues/2051)
-   Removed the `custom_file_object` argument to `pulpcore.plugin.download.BaseDownloader`. Now all
    downloaded data will be written to a random file in the current working directory. Further
    customization of where downloaded data can be written to can be done through subclassing.
    [#2137](https://github.com/pulp/pulpcore/issues/2137)
-   Constructor signature of DigestValidationError and SizeValidationError has changed - the
    "actual" and "expected" values are now required and "url" which was previously a positional
    argument is now a keyword argument.
    [#2244](https://github.com/pulp/pulpcore/issues/2244)
-   The pulpcore.plugin.constants.API_ROOT has been removed. Use the `V3_API_ROOT` and
    `V3_API_ROOT_NO_FRONT_SLASH` settings instead.
    [#2556](https://github.com/pulp/pulpcore/issues/2556)
-   Plugins using the `SingleArtifactContentUploadSerializer` must place a super call when
    overwriting `deferred_validate`. They can only assume the existance of the `Artifact` in the
    database, after this call.
    [#2786](https://github.com/pulp/pulpcore/issues/2786)

#### Misc

-   [#2634](https://github.com/pulp/pulpcore/issues/2634), [#2742](https://github.com/pulp/pulpcore/issues/2742)

## 3.19.1 (2022-07-11) {: #3.19.1 }

### REST API

#### Bugfixes

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Fixed does_batch method in sync pipeline to allow waiting on content that is already resolved.
    [#2557](https://github.com/pulp/pulpcore/issues/2557)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

-   Improved the error message when HTTP proxies reject requests from Pulp.
    [#2654](https://github.com/pulp/pulpcore/issues/2654)

-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)

-   Improve content app performance on head requests
    [#2924](https://github.com/pulp/pulpcore/issues/2924)

#### Improved Documentation

-   Removed some out of date references to Redmine (the previous issue tracker). We use Github Issues
    now.
    [#2642](https://github.com/pulp/pulpcore/issues/2642)
-   Fixed `extlinks` use in docs to be Sphinx==5.0.0 compatible.
    [#2782](https://github.com/pulp/pulpcore/issues/2782)

#### Misc

-   [#2605](https://github.com/pulp/pulpcore/issues/2605)

### Plugin API

No significant changes.

## 3.19.0 (2022-04-12) {: #3.19.0 }

### REST API

#### Features

-   Content app now logs where it gets on-demand and streamed content from.
    [#2059](https://github.com/pulp/pulpcore/issues/2059)
-   Reclaim disk space can now accept ["*"] for `repo_hrefs` to specify all repositories for reclaim.
    [#2065](https://github.com/pulp/pulpcore/issues/2065)
-   Added a filter to allow searching for user roles by their description.
    [#2276](https://github.com/pulp/pulpcore/issues/2276)
-   Add swagger view and make OpenAPI human readable
    [#2291](https://github.com/pulp/pulpcore/issues/2291)
-   Adds a `TASK_DIAGNOSTICS` setting which will enable each task to write out diagnostic information
    such as memory usage of the task to a data file in `/var/tmp/pulp/<task_UUID>/`. This is disabled
    by default.
    [#2329](https://github.com/pulp/pulpcore/issues/2329)
-   Added a `/pulp/api/v3/distributions/` endpoint to list all distributions.
    [#2379](https://github.com/pulp/pulpcore/issues/2379)

#### Bugfixes

-   Added reason for 404 error when accessing distributions without a publication.
    [#1910](https://github.com/pulp/pulpcore/issues/1910)

-   Fixed validation order of required settings to occur before plugin settings are loaded.
    [#1968](https://github.com/pulp/pulpcore/issues/1968)

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)

-   Fixed two instances of Pulp not writing to the task worker's temporary directory.
    [#2061](https://github.com/pulp/pulpcore/issues/2061)

-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

-   Taught task-purge to process tasks in batches of 1000. This prevents large purges from using
    large amounts of memory as a result of reading all the affected Tasks into memory at once.
    [#2215](https://github.com/pulp/pulpcore/issues/2215)

-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)

-   Added transactions around repository version operations to prevent data loss.
    [#2268](https://github.com/pulp/pulpcore/issues/2268)

-   Loosened the version-restrictions on PulpImport to only require X.Y matching.
    [#2269](https://github.com/pulp/pulpcore/issues/2269)

-   Fix a mistake in a previous migration which may have caused improperly encrypted remote fields.
    [#2327](https://github.com/pulp/pulpcore/issues/2327)

-   Fixed improper fields being listed in `RepositoryVersion` repair API.
    [#2330](https://github.com/pulp/pulpcore/issues/2330)

-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)

-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)

-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)

-   Fixed a (rare) deadlock around bulk_update() during syncs with overlapping content.
    [#2430](https://github.com/pulp/pulpcore/issues/2430)

-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)

#### Improved Documentation

-   Updates and revises docs on webserver based authentication.
    [#2260](https://github.com/pulp/pulpcore/issues/2260)
-   Adds docs on recording and building graphs from the memory data saved by the `TASK_DIAGNOSTICS`
    setting.
    [#2329](https://github.com/pulp/pulpcore/issues/2329)

#### Removals

-   Removed the Django UI Admin site. It was added to provide RBAC permissions management before there
    were APIs that could provide that. It was tech preview and now there are APIs for user and group
    management, along with role and permission assignment. It is being removed because the direct DB
    access it provides has caused some issues for users, especially since its not integrated with the
    validation provided by Django Rest Framework, which Pulp uses.
    [#2374](https://github.com/pulp/pulpcore/issues/2374)

### Plugin API

#### Features

-   Exposed the `PulpRemoteUserAuthentication` class to plugin writers. This will allow the use of
    remote authentication methods when building protected endpoints.
    [#2262](https://github.com/pulp/pulpcore/issues/2262)
-   Added new global access conditions `has_publication_param_model_or_obj_perms` and
    `has_repo_or_repo_ver_param_model_or_obj_perms` for RBAC checks.
    [#2364](https://github.com/pulp/pulpcore/issues/2364)
-   Changed the `reusable_conditions` module configuration for access policies to being a list to
    enable plugins to add custom modules to it.
    [#2495](https://github.com/pulp/pulpcore/issues/2495)

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.18.36 (2024-03-26) {: #3.18.36 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.18.35 (2024-01-30) {: #3.18.35 }

### REST API

#### Bugfixes

-   Fixed a warning that gets raised when cache is enabled: `RuntimeWarning: coroutine 'AsyncCache.delete' was never awaited`.
    [#4967](https://github.com/pulp/pulpcore/issues/4967)

### Plugin API

No significant changes.

---

## 3.18.34 (2024-01-09) {: #3.18.34 }

### REST API

No significant changes.

### Plugin API

No significant changes.

---

## 3.18.33 (2023-12-01) {: #3.18.33 }

### REST API

#### Bugfixes

-   Removed a workaround to force close all tcp connections in sync leading to an exhaustion of port
    numbers and their reuse while in time_wait state.
    [#4452](https://github.com/pulp/pulpcore/issues/4452)

### Plugin API

No significant changes.

---

## 3.18.32 (2023-11-14) {: #3.18.32 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.18.31 (2023-10-16) {: #3.18.31 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.18.30 (2023-10-05) {: #3.18.30 }

### REST API

#### Bugfixes

-   Made sure PulpImport's use of tar.extractall() is safe.
    [#3323](https://github.com/pulp/pulpcore/issues/3323)

### Plugin API

No significant changes.

## 3.18.29 (2023-09-27) {: #3.18.29 }

### REST API

#### Improved Documentation

-   Adds docs on recording and building graphs from the memory data saved by the `TASK_DIAGNOSTICS`
    setting.
    [#2329](https://github.com/pulp/pulpcore/issues/2329)

#### Misc

-   [#2329](https://github.com/pulp/pulpcore/issues/2329), [#4436](https://github.com/pulp/pulpcore/issues/4436)

### Plugin API

No significant changes.

## 3.18.28 (2023-09-20) {: #3.18.28 }

### REST API

#### Bugfixes

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)
-   Ensure non-chunked exports and chunked exports use the same compression level.
    [#4411](https://github.com/pulp/pulpcore/issues/4411)
-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)

### Plugin API

No significant changes.

## 3.18.27 (2023-09-06) {: #3.18.27 }

### REST API

#### Bugfixes

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)

### Plugin API

No significant changes.

## 3.18.26 (2023-08-23) {: #3.18.26 }

### REST API

#### Bugfixes

-   Fixed bug where incorrect error message presented in relation to content-import
    [#4294](https://github.com/pulp/pulpcore/issues/4294)

### Plugin API

No significant changes.

## 3.18.25 (2023-08-01) {: #3.18.25 }

### REST API

#### Bugfixes

-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

### Plugin API

No significant changes.

## 3.18.24 (2023-07-31) {: #3.18.24 }

### REST API

#### Bugfixes

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

### Plugin API

No significant changes.

## 3.18.23 (2023-07-29) {: #3.18.23 }

### REST API

#### Bugfixes

-   Made reclaim space task more tolerant in the face of artifact shared between two content units.
    [#3610](https://github.com/pulp/pulpcore/issues/3610)

-   Taught pulp-import to be able to use a subset of available worker-threads.
    [#4068](https://github.com/pulp/pulpcore/issues/4068)

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

### Plugin API

No significant changes.

## 3.18.22 (2023-07-25) {: #3.18.22 }

### REST API

#### Bugfixes

-   Taught repair task to be tolerant in the face of any artifact download failure.
    [#4111](https://github.com/pulp/pulpcore/issues/4111)

### Plugin API

No significant changes.

## 3.18.21 (2023-07-19) {: #3.18.21 }

### REST API

#### Bugfixes

-   Made the incremental file export include all published metadata.
    [#3941](https://github.com/pulp/pulpcore/issues/3941)
-   Updates file system exporter to correctly account the start_repository_version for pass_through publications
    [#4051](https://github.com/pulp/pulpcore/issues/4051)

### Plugin API

No significant changes.

## 3.18.20 (2023-06-14) {: #3.18.20 }

### REST API

#### Bugfixes

-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)

### Plugin API

No significant changes.

## 3.18.19 (2023-06-06) {: #3.18.19 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)

### Plugin API

No significant changes.

## 3.18.18 (2023-05-30) {: #3.18.18 }

### REST API

#### Bugfixes

-   Taught repair task to remove unrepairable corrupted files.
    [#1947](https://github.com/pulp/pulpcore/issues/1947)
-   Taught repair task to continue when encountering a 404 during the repair process.
    [#3611](https://github.com/pulp/pulpcore/issues/3611)

### Plugin API

No significant changes.

## 3.18.17 (2023-04-11) {: #3.18.17 }

### REST API

#### Bugfixes

-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)

### Plugin API

No significant changes.

## 3.18.16 (2023-03-29) {: #3.18.16 }

### REST API

#### Bugfixes

-   Fixed an error when raising `UnexportableArtifactException`.
    [#3313](https://github.com/pulp/pulpcore/issues/3313)

### Plugin API

No significant changes.

## 3.18.15 (2023-03-09) {: #3.18.15 }

### REST API

#### Bugfixes

-   Added a `start_repository_version` parameter to the file system exporter.

    If specified, it will export only content units that differed between two repository versions.
    [#3413](https://github.com/pulp/pulpcore/issues/3413)

### Plugin API

No significant changes.

## 3.18.14 (2023-02-23) {: #3.18.14 }

### REST API

#### Bugfixes

-   Fixed a bug that caused the import machinery to import the same content multiple times in a row.
    [#3075](https://github.com/pulp/pulpcore/issues/3075)

### Plugin API

No significant changes.

## 3.18.13 (2023-01-20) {: #3.18.13 }

### REST API

#### Bugfixes

-   Fixed an occasional 500 error when viewing a repository version content summary while performing a content deletion task.
    [#3299](https://github.com/pulp/pulpcore/issues/3299)

### Plugin API

No significant changes.

## 3.18.12 (2023-01-10) {: #3.18.12 }

### REST API

#### Bugfixes

-   Insured that pulp-export correctly locks repos-being-exported.
    [#3370](https://github.com/pulp/pulpcore/issues/3370)
-   Fix migrating Remotes with @ in path
    [#3409](https://github.com/pulp/pulpcore/issues/3409)

### Plugin API

No significant changes.

## 3.18.11 (2022-11-02) {: #3.18.11 }

### REST API

#### Bugfixes

-   Fixed the fs exporter to handle the case where there are pre-existing files in the location that FileSystem attempts to export to you get a FileExistsError.
    [#1949](https://github.com/pulp/pulpcore/issues/1949)
-   Fixed the fs exporter to handle the case where hardlink method was requested but pulp and export locations are in different partitions so can't share the same inode.
    [#3187](https://github.com/pulp/pulpcore/issues/3187)
-   Another step on closing the deadlock-window when syncing overlapping content.
    [#3284](https://github.com/pulp/pulpcore/issues/3284)

### Plugin API

No significant changes.

## 3.18.10 (2022-09-14) {: #3.18.10 }

### REST API

#### Bugfixes

-   Another guardrail added around content-stages to address deadlock in a specific usecase.
    [#3192](https://github.com/pulp/pulpcore/issues/3192)

### Plugin API

No significant changes.

## 3.18.9 (2022-09-01) {: #3.18.9 }

### REST API

#### Bugfixes

-   Fixed the value of the Content-Type header returned for .xml.gz files.
    [#2811](https://github.com/pulp/pulpcore/issues/2811)
-   Fixed another rare deadlock for high-concurrency/overlapping-content syncs.
    [#3111](https://github.com/pulp/pulpcore/issues/3111)

### Plugin API

No significant changes.

## 3.18.8 (2022-08-16) {: #3.18.8 }

### REST API

No significant changes.

### Plugin API

No significant changes.

## 3.18.7 (2022-08-15) {: #3.18.7 }

### REST API

#### Bugfixes

-   Serialized orphan cleanup tasks with respect to each other to prevent them from failing.
    [#3030](https://github.com/pulp/pulpcore/issues/3030)

### Plugin API

No significant changes.

## 3.18.6 (2022-08-03) {: #3.18.6 }

### REST API

#### Bugfixes

-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)
-   Improve content app performance on head requests
    [#2924](https://github.com/pulp/pulpcore/issues/2924)
-   Use published relative paths for FS Exporter.
    [#2933](https://github.com/pulp/pulpcore/issues/2933)
-   Configured aiohttp to avoid rewriting redirect URLs, as some web servers (e.g. Amazon CloudFront) can be tempermental about the encoding of the URL.
    [#2964](https://github.com/pulp/pulpcore/issues/2964)

#### Improved Documentation

-   Removed some out of date references to Redmine (the previous issue tracker). We use Github Issues
    now.
    [#2642](https://github.com/pulp/pulpcore/issues/2642)
-   Fixed `extlinks` use in docs to be Sphinx==5.0.0 compatible.
    [#2782](https://github.com/pulp/pulpcore/issues/2782)

### Plugin API

No significant changes.

## 3.18.5 (2022-05-10) {: #3.18.5 }

### REST API

#### Bugfixes

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Fixed does_batch method in sync pipeline to allow waiting on content that is already resolved.
    [#2557](https://github.com/pulp/pulpcore/issues/2557)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

-   Improved the error message when HTTP proxies reject requests from Pulp.
    [#2654](https://github.com/pulp/pulpcore/issues/2654)

### Plugin API

No significant changes.

## 3.18.4 (2022-04-12) {: #3.18.4 }

### REST API

#### Bugfixes

-   Fixed two instances of Pulp not writing to the task worker's temporary directory.
    [#2061](https://github.com/pulp/pulpcore/issues/2061)
-   Taught task-purge to process tasks in batches of 1000. This prevents large purges from using
    large amounts of memory as a result of reading all the affected Tasks into memory at once.
    [#2215](https://github.com/pulp/pulpcore/issues/2215)
-   Loosened the version-restrictions on PulpImport to only require X.Y matching.
    [#2269](https://github.com/pulp/pulpcore/issues/2269)
-   Fixed a (rare) deadlock around bulk_update() during syncs with overlapping content.
    [#2430](https://github.com/pulp/pulpcore/issues/2430)
-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)

### Plugin API

No significant changes.

## 3.18.3 (2022-03-25) {: #3.18.3 }

### REST API

#### Bugfixes

-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)
-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)
-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)
-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)

### Plugin API

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.18.2 (2022-03-18) {: #3.18.2 }

### REST API

#### Bugfixes

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)

-   Fix a mistake in a previous migration which may have caused improperly encrypted remote fields.
    [#2327](https://github.com/pulp/pulpcore/issues/2327)

### Plugin API

No significant changes.

## 3.18.1 (2022-03-01) {: #3.18.1 }

### REST API

#### Bugfixes

-   Added transactions around repository version operations to prevent data loss.
    [#2268](https://github.com/pulp/pulpcore/issues/2268)

### Plugin API

No significant changes.

## 3.18.0 (2022-02-22) {: #3.18.0 }

### REST API

#### Features

-   Added a pulpcore-manager command remove-plugin to remove a Pulp plugin.
    [#1945](https://github.com/pulp/pulpcore/issues/1945)

-   Implemented the Redis caching machinery that can be used within the synchronous context.
    [#2003](https://github.com/pulp/pulpcore/issues/2003)

-   Add a "current_task" field to workers so that you can easily see which workers are currently active.
    [#2034](https://github.com/pulp/pulpcore/issues/2034)

-   Allowed Pulp to install without Redis.
    [#2057](https://github.com/pulp/pulpcore/issues/2057)

-   Added `has_repository_obj_perms` and `has_repository_model_or_obj_perms` as access conditions
    that can be used by viewsets nested beneath repository viewsets.
    [#2076](https://github.com/pulp/pulpcore/issues/2076)

-   Queryset scoping can now be disabled by changing the `DEFAULT_PERMISSION_CLASSES`.
    [#2115](https://github.com/pulp/pulpcore/issues/2115)

-   Specifying a different value for `DEFAULT_PERMISSION_CLASSES` will now automatically disable the
    permission assignment provided by the `creation_hooks` portion of an `AccessPolicyFromDB`.
    [#2116](https://github.com/pulp/pulpcore/issues/2116)

-   The Pulp API can now be rerooted using the new `API_ROOT` setting. By default it is set to
    `/pulp/`. Pulp appends the string `api/v3/` onto the value of `API_ROOT`.
    [#2148](https://github.com/pulp/pulpcore/issues/2148)

-   Added a redirecting content guard that can be employed by plugins to forward from a REST call to
    the content app.
    [#2151](https://github.com/pulp/pulpcore/issues/2151)

-   Added a new analyze-publication management command to facilitate debugging.
    [#2200](https://github.com/pulp/pulpcore/issues/2200)

-   Added a read-only task schedule view for configured tasks schedules.

    NOTE: This feature is in tech-preview and may change in backwards incompatible ways in the future.
    [#2204](https://github.com/pulp/pulpcore/issues/2204)

#### Bugfixes

-   Fix import and export OOM error.
    [#2072](https://github.com/pulp/pulpcore/issues/2072)

-   Fixed downloader retry logic with partially written files.
    [#2078](https://github.com/pulp/pulpcore/issues/2078)

-   Fix content summary showing incorrect count after previous version deletion.
    [#2084](https://github.com/pulp/pulpcore/issues/2084)

-   Fixed issue with listing repository versions after deleting previous versions.
    [#2085](https://github.com/pulp/pulpcore/issues/2085)

-   Fixed file descriptior leak during upload.
    [#2087](https://github.com/pulp/pulpcore/issues/2087)

-   Fixed an api schema bug where both `permission_assignment` and `creation_hooks` were required
    by the `AccessPolicy` serializer.
    [#2089](https://github.com/pulp/pulpcore/issues/2089)

-   Fixed migration 0081 to be compatible with custom User models.
    [#2090](https://github.com/pulp/pulpcore/issues/2090)

-   Fixed PulpImport to correctly save relative to MEDIA_ROOT.
    [#2091](https://github.com/pulp/pulpcore/issues/2091)

-   Added proper logging around certain ways a task could fail.
    [#2093](https://github.com/pulp/pulpcore/issues/2093)

-   Taught PulpImport to retry in the event of a concurrency-collision on ContentArtifact.
    [#2102](https://github.com/pulp/pulpcore/issues/2102)

-   Fixed an edge case where the first (streamed) response from an repo synced as "on_demand" could be incorrect.
    [#2119](https://github.com/pulp/pulpcore/issues/2119)

-   Fixed bug where retries of partially downloaded files failed digest and size validation.
    [#2135](https://github.com/pulp/pulpcore/issues/2135)

-   Fixed the calculation of response range headers in streaming answers from the content app.
    [#2147](https://github.com/pulp/pulpcore/issues/2147)

-   Fixed potential deadlock-window in touch() path.
    [#2157](https://github.com/pulp/pulpcore/issues/2157)

-   Fixed reporting tasks being canceled before being picked up by a worker as canceled instead of
    failed.
    [#2183](https://github.com/pulp/pulpcore/issues/2183)

-   Return a concise message exception on 500 in case file is missing on the FS.
    [#2187](https://github.com/pulp/pulpcore/issues/2187)

-   Fixed import/export of repositories with sub-content.

    An example would be the sub-repositories in pulp_rpm
    DistributionTrees.
    [#2192](https://github.com/pulp/pulpcore/issues/2192)

-   touch() now uses standard Django instead of raw-sql to update.
    [#2229](https://github.com/pulp/pulpcore/issues/2229)

#### Misc

-   [#2086](https://github.com/pulp/pulpcore/issues/2086), [#2094](https://github.com/pulp/pulpcore/issues/2094), [#2173](https://github.com/pulp/pulpcore/issues/2173), [#2202](https://github.com/pulp/pulpcore/issues/2202)

### Plugin API

#### Features

-   The `AutoAddObjPermsMixin` now calls a `handle_creation_hooks` interface on the configured DRF
    permission class, e.g. the default `AccessPolicyFromDB`.
    [#2116](https://github.com/pulp/pulpcore/issues/2116)
-   Added a redirecting content guard that can be employed by plugins to generate preauthenticated URLs
    that forward from a REST call to the content app. Added the `GetOrCreateSerializerMixin` to
    `get_or_create` objects still validating them through the serializer.
    [#2151](https://github.com/pulp/pulpcore/issues/2151)
-   Exposed synchronous and asynchronous caching machinery. The classes `AsyncContentCache` and
    `SyncContentCache` can be now managed by plugin writers.
    [#8806](https://github.com/pulp/pulpcore/issues/8806)

#### Bugfixes

-   Started using a plugin provided serializer in has_remote_param_obj_perms and
    has_remote_param_model_or_obj_perms to solve the Unexpected field error during sync by
    a non-admin user.
    [#2088](https://github.com/pulp/pulpcore/issues/2088)
-   Exposed adjust_roles in the plugin api.
    [#2092](https://github.com/pulp/pulpcore/issues/2092)
-   Expose Roles model in plugin api.
    [#2185](https://github.com/pulp/pulpcore/issues/2185)

#### Deprecations

-   Deprecate the the use of `custom_file_object` parameter in `BaseDownloader`.
    [#2123](https://github.com/pulp/pulpcore/issues/2123)
-   The `API_ROOT` constant has been deprecated and turned into a setting. Its removal is scheduled
    for 3.20. Please use the setting with the same name instead.
    [#2148](https://github.com/pulp/pulpcore/issues/2148)
-   The `ACCESS_POLICY_VIEWSET_NAME` attribute is no longer expected to be present on models. The
    RBAC machinery no longer uses this, and if present a deprecation warning will be emitted.
    [#2209](https://github.com/pulp/pulpcore/issues/2209)

## 3.17.8 (2022-05-10) {: #3.17.8 }

### REST API

#### Bugfixes

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Fixed does_batch method in sync pipeline to allow waiting on content that is already resolved.
    [#2557](https://github.com/pulp/pulpcore/issues/2557)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

-   Improved the error message when HTTP proxies reject requests from Pulp.
    [#2654](https://github.com/pulp/pulpcore/issues/2654)

### Plugin API

No significant changes.

## 3.17.7 (2022-04-12) {: #3.17.7 }

### REST API

#### Bugfixes

-   Fixed two instances of Pulp not writing to the task worker's temporary directory.
    [#2061](https://github.com/pulp/pulpcore/issues/2061)
-   Taught task-purge to process tasks in batches of 1000. This prevents large purges from using
    large amounts of memory as a result of reading all the affected Tasks into memory at once.
    [#2215](https://github.com/pulp/pulpcore/issues/2215)
-   Loosened the version-restrictions on PulpImport to only require X.Y matching.
    [#2269](https://github.com/pulp/pulpcore/issues/2269)
-   Fixed a (rare) deadlock around bulk_update() during syncs with overlapping content.
    [#2430](https://github.com/pulp/pulpcore/issues/2430)
-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)

### Plugin API

No significant changes.

## 3.17.6 (2022-03-25) {: #3.17.6 }

### REST API

#### Bugfixes

-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)
-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)
-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)
-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)

### Plugin API

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.17.5 (2022-03-18) {: #3.17.5 }

### REST API

#### Bugfixes

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

-   Taught PulpImport to retry in the event of a concurrency-collision on ContentArtifact.
    [#2102](https://github.com/pulp/pulpcore/issues/2102)

-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)

-   Fix a mistake in a previous migration which may have caused improperly encrypted remote fields.
    [#2327](https://github.com/pulp/pulpcore/issues/2327)

### Plugin API

No significant changes.

## 3.17.4 (2022-03-01) {: #3.17.4 }

### REST API

#### Bugfixes

-   Fix import and export OOM error.
    [#2072](https://github.com/pulp/pulpcore/issues/2072)

-   Fixed downloader retry logic with partially written files.
    [#2078](https://github.com/pulp/pulpcore/issues/2078)

-   Fix content summary showing incorrect count after previous version deletion.
    [#2084](https://github.com/pulp/pulpcore/issues/2084)

-   Fixed issue with listing repository versions after deleting previous versions.
    [#2085](https://github.com/pulp/pulpcore/issues/2085)

-   Fixed file descriptior leak during upload.
    [#2087](https://github.com/pulp/pulpcore/issues/2087)

-   Added proper logging around certain ways a task could fail.
    [#2093](https://github.com/pulp/pulpcore/issues/2093)

-   Make checksum mismatches a retryable error.
    [#2094](https://github.com/pulp/pulpcore/issues/2094)

-   Fixed an edge case where the first (streamed) response from an repo synced as "on_demand" could be incorrect.
    [#2119](https://github.com/pulp/pulpcore/issues/2119)

-   Fixed bug where retries of partially downloaded files failed digest and size validation.
    [#2135](https://github.com/pulp/pulpcore/issues/2135)

-   Fixed the calculation of response range headers in streaming answers from the content app.
    [#2147](https://github.com/pulp/pulpcore/issues/2147)

-   Fixed potential deadlock-window in touch() path.
    [#2157](https://github.com/pulp/pulpcore/issues/2157)

-   Fixed reporting tasks being canceled before being picked up by a worker as canceled instead of
    failed.
    [#2183](https://github.com/pulp/pulpcore/issues/2183)

-   Fixed import/export of repositories with sub-content.

    An example would be the sub-repositories in pulp_rpm
    DistributionTrees.
    [#2192](https://github.com/pulp/pulpcore/issues/2192)

-   touch() now uses standard Django instead of raw-sql to update.
    [#2229](https://github.com/pulp/pulpcore/issues/2229)

-   Added transactions around repository version operations to prevent data loss.
    [#2268](https://github.com/pulp/pulpcore/issues/2268)

### Plugin API

No significant changes.

## 3.17.3 (2022-01-12) {: #3.17.3 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Exposed adjust_roles in the plugin api.
    (backported from #9665)
    [#9668](https://pulp.plan.io/issues/9668)

## 3.17.2 (2022-01-06) {: #3.17.2 }

### REST API

#### Bugfixes

-   Fixed PulpImport to correctly save relative to MEDIA_ROOT.
    (backported from #9660)
    [#9664](https://pulp.plan.io/issues/9664)

### Plugin API

No significant changes.

## 3.17.1 (2021-12-21) {: #3.17.1 }

### REST API

#### Bugfixes

-   Fixed migration 0081 to be compatible with custom User models.
    [#9654](https://pulp.plan.io/issues/9654)

### Plugin API

No significant changes.

## 3.17.0 (2021-12-14) {: #3.17.0 }

### REST API

#### Features

-   Added a `/tasks/purge/` API to do bulk-deletion of old tasks.

    Over time, the database can fill with task-records. This API allows
    an installation to bulk-remove records based on their completion
    timestamps.

    NOTE: this endpoint is in tech-preview and may change in backwards
    incompatible ways in the future.
    [#8554](https://pulp.plan.io/issues/8554)

-   Added a role model to support RBAC and the utility functions `assign_role` and `remove_role`.

    The field `permissions_assignment` of access policies has been renamed to `creation_hooks`. A
    compatibility patch has been added to be removed with pulpcore=3.20.

    The `permissions` argument to `creation_hooks` has been deprecated to be removed with
    pulpcore=3.20.
    [#9411](https://pulp.plan.io/issues/9411)

-   Added views to assign model and object level roles to users and groups.
    [#9413](https://pulp.plan.io/issues/9413)

-   Rewrote existing access policies on viewsets to use roles.
    [#9415](https://pulp.plan.io/issues/9415)

-   Added validation to prevent credentials in remote urls. Also added data migration to move
    credentials out of remote url and into remote username/password fields for existing remotes.
    [#9459](https://pulp.plan.io/issues/9459)

-   Reworked RBAC Content Guards to now use roles. Added new endpoints `{list, add, remove}_roles` and `my_permissions` to the RBAC content guard viewset.
    [#9498](https://pulp.plan.io/issues/9498)

-   Content-type and Content-disposition headers are now sent in the AzureStorage.url.
    [#9518](https://pulp.plan.io/issues/9518)

-   SigningService scripts can now access the public key fingerprint using the `PULP_SIGNING_KEY_FINGERPRINT` environment variable.
    This allows for more generic scripts, that do not need to "guess" (hardcode) what key they should use.
    [#9532](https://pulp.plan.io/issues/9532)

-   Added object specific endpoints `{list,add}_roles`, `remove_roles` and `my_permissions` to tasks and groups viewsets.
    [#9604](https://pulp.plan.io/issues/9604)

-   Added a `reset` endpoint to the access policy viewset to revert to the provided default uncustomized access policy.
    [#9606](https://pulp.plan.io/issues/9606)

#### Bugfixes

-   PulpImporter now unpacks into the task-worker's working directory rather than /tmp. Unpacking
    large files into /tmp could cause the operation to fail, or even cause stability issues for
    Pulp instance, due to running /tmp out of space.
    [#8610](https://pulp.plan.io/issues/8610)
-   Missing worker records are now kept in the database for seven days allowing time for post-mortem
    analysis of them. The user-facing data in the status API remains unmodified.
    [#8988](https://pulp.plan.io/issues/8988)
-   Made Pulp to be fault-tolerant to Redis server connection issues.
    [#8997](https://pulp.plan.io/issues/8997)
-   Cache is now properly invalidated after reclaim disk task.
    [#9215](https://pulp.plan.io/issues/9215)
-   Fixed bug where the content app would stop working after a brief loss of connection to the database.
    [#9276](https://pulp.plan.io/issues/9276)
-   Improved messaging around timeout requests.
    [#9301](https://pulp.plan.io/issues/9301)
-   Updated the distribution validation to properly handle the use of `repository` / `repository_version` / `publication`.
    [#9434](https://pulp.plan.io/issues/9434)
-   Fixed issue with listing repository versions while running orphan cleanup task.
    [#9481](https://pulp.plan.io/issues/9481)
-   Fixed erroneous ordering filters from appearing in HTML views and causing 500 errors when used.
    [#9496](https://pulp.plan.io/issues/9496)
-   Fixed bug where Artifacts were being downloaded even if they were already saved in Pulp.
    [#9542](https://pulp.plan.io/issues/9542)
-   Fixed a bug in pulpcore-worker, where wakeup and cancel signals could be lost due to a race
    condition.
    [#9549](https://pulp.plan.io/issues/9549)
-   Fixed bug where chunked uploads were being assembled in /tmp.
    [#9550](https://pulp.plan.io/issues/9550)
-   Created a proxy model for Groups to allow using creation_hooks with them.
    [#9588](https://pulp.plan.io/issues/9588)
-   Fixed permission errors on artifact retrieval from object storage when redis caching is enabled.
    [#9595](https://pulp.plan.io/issues/9595)

#### Improved Documentation

-   Adjusted the RBAC documentation for the roles framework.
    [#9411](https://pulp.plan.io/issues/9411)
-   Added documentation for `DB_ENCRYPTION_KEY` setting.
    [#9495](https://pulp.plan.io/issues/9495)
-   Fixed the path to uploaded artifacts.
    [#9527](https://pulp.plan.io/issues/9527)

#### Removals

-   The `pulpcore-worker` binary no longer accepts the `--resource-manager` flag. There is no
    resource manager anymore, so this flag is no longer needed.
    [#9327](https://pulp.plan.io/issues/9327)
-   Removed tech previewed `assign_permission` and `remove_permission` endpoints from RBAC content guard viewset.
    [#9498](https://pulp.plan.io/issues/9498)

#### Misc

-   [#9353](https://pulp.plan.io/issues/9353), [#9354](https://pulp.plan.io/issues/9354), [#9506](https://pulp.plan.io/issues/9506)

### Plugin API

#### Features

-   Added `get_objects_for_user` to support queryset filtering by roles.
    Added hooks in `AutoAddObjPermsMixin` to support auto-assignment of roles.

    Changed the lookup for creation hooks so hooks need to be registered in
    `REGISTERED_CREATION_HOOKS` on the model to be used. The signature for creation hooks that are
    registered must match the exploded version of the dict parameters from the access policy.
    Unregistered creation hooks are deprecated and support will be dropped in pulpcore 3.20.
    [#9411](https://pulp.plan.io/issues/9411)

-   Made RepositoryAddRemoveContentSerializer available for plugin writers.
    [#9504](https://pulp.plan.io/issues/9504)

-   Added ability to pass headers through the AzureStorage.url.
    [#9518](https://pulp.plan.io/issues/9518)

-   `Remote.get_remote_artifact_url` now accepts a `request` parameter.
    [#9554](https://pulp.plan.io/issues/9554)

-   Added `initialize_new_version` function to `Repository` model.
    [#9579](https://pulp.plan.io/issues/9579)

-   DownloaderFactory.user_agent() method is now available if plugin needs to generate User-Agent header value to use in their custom (subclasssed) downloader factory.
    [#9591](https://pulp.plan.io/issues/9591)

-   Added ability to use a custom download factory. Remote.get_downloader now accepts a download_factory parameter.
    [#9592](https://pulp.plan.io/issues/9592)

-   `Handler._serve_content_artifact` method accepts new positional argument `request`.
    [#9595](https://pulp.plan.io/issues/9595)

-   Added Group model to plugin api.
    Added `RolesMixin` to for viewsets to allow managing object roles based on permissions.
    [#9604](https://pulp.plan.io/issues/9604)

-   Added new async sign method `asign` to the `SigningService` model.
    [#9615](https://pulp.plan.io/issues/9615)

-   `SigningService.sign` and `SigningService.asign` now accepts a `env_var` parameter that makes
    it possible to pass environment variables to the signing script.
    [#9621](https://pulp.plan.io/issues/9621)

#### Bugfixes

-   Include additional information about which AccessPolicy is using deprecated policy features.
    [#9608](https://pulp.plan.io/issues/9608)

## 3.16.24 (2023-10-30) {: #3.16.24 }

### REST API

#### Bugfixes

-   Resolved a sync-time performance regression.
    [#4591](https://github.com/pulp/pulpcore/issues/4591)

### Plugin API

No significant changes.

## 3.16.23 (2023-10-16) {: #3.16.23 }

### REST API

#### Bugfixes

-   Improve performance during export operations.
    [#4551](https://github.com/pulp/pulpcore/issues/4551)
-   Taught ContentArtifactResource import to cache content results to improve performance.
    [#4564](https://github.com/pulp/pulpcore/issues/4564)

### Plugin API

No significant changes.

## 3.16.22 (2023-10-05) {: #3.16.22 }

### REST API

#### Bugfixes

-   Made sure PulpImport's use of tar.extractall() is safe.
    [#3323](https://github.com/pulp/pulpcore/issues/3323)

### Plugin API

No significant changes.

## 3.16.21 (2023-09-27) {: #3.16.21 }

### REST API

#### Improved Documentation

-   Adds docs on recording and building graphs from the memory data saved by the `TASK_DIAGNOSTICS`
    setting.
    [#2329](https://github.com/pulp/pulpcore/issues/2329)

#### Misc

-   [#2329](https://github.com/pulp/pulpcore/issues/2329), [#4436](https://github.com/pulp/pulpcore/issues/4436)

### Plugin API

No significant changes.

## 3.16.20 (2023-09-20) {: #3.16.20 }

### REST API

#### Bugfixes

-   Removed compression from exports (using gzip level 0). For most users of export functionality it seems to be a poor tradeoff.
    [#4434](https://github.com/pulp/pulpcore/issues/4434)

### Plugin API

No significant changes.

## 3.16.19 (2023-09-13) {: #3.16.19 }

### REST API

#### Bugfixes

-   Taught PulpImport to be more robust in the face of previous failed attempts.
    [#3737](https://github.com/pulp/pulpcore/issues/3737)

-   Exports now use gzip compression level 1 rather than compression level 9. Exported archives will
    now be slightly larger, but exports should be much faster. This is considered to be a more
    optimal balance of space/time for the export operation.
    [#3869](https://github.com/pulp/pulpcore/issues/3869)

-   Improved the performance when looking up content for repository versions.
    [#3969](https://github.com/pulp/pulpcore/issues/3969)

-   Taught the Artifact.json of an export to hold minimum-unique-set of Artifact entries.

    In highly-duplicated-content export scenarios, this can mean a significant decrease
    in export-size, and significant improvement in import-performance.
    [#4159](https://github.com/pulp/pulpcore/issues/4159)

-   Fix a subtle export bug introduced from the optimizations in #4159.
    [#4210](https://github.com/pulp/pulpcore/issues/4210)

-   Correctly fixed pulp_rpm-export-edgecase - fix #4210 was incomplete.
    [#4231](https://github.com/pulp/pulpcore/issues/4231)

-   Ensure the compression level is reliably set properly as per #3869.
    [#4351](https://github.com/pulp/pulpcore/issues/4351)

-   Ensure non-chunked exports also use gzip `compressionlevel=1`
    [#4411](https://github.com/pulp/pulpcore/issues/4411)

### Plugin API

No significant changes.

## 3.16.18 (2023-08-01) {: #3.16.18 }

### REST API

#### Bugfixes

-   Updated the downloader's fetch method to comply with Python 3.11.
    [#4107](https://github.com/pulp/pulpcore/issues/4107)

### Plugin API

No significant changes.

## 3.16.17 (2023-04-11) {: #3.16.17 }

### REST API

#### Bugfixes

-   Downloader will now attempt to keep the filename of the requested URL intact if one exists.
    [#3715](https://github.com/pulp/pulpcore/issues/3715)

### Plugin API

No significant changes.

## 3.16.16 (2023-02-23) {: #3.16.16 }

### REST API

#### Bugfixes

-   Fixed a bug that caused the import machinery to import the same content multiple times in a row.
    [#3075](https://github.com/pulp/pulpcore/issues/3075)
-   Insured that pulp-export correctly locks repos-being-exported.
    [#3370](https://github.com/pulp/pulpcore/issues/3370)

### Plugin API

No significant changes.

## 3.16.15 (2022-11-02) {: #3.16.15 }

### REST API

#### Bugfixes

-   Fixed the fs exporter to handle the case where there are pre-existing files in the location that FileSystem attempts to export to you get a FileExistsError.
    [#1949](https://github.com/pulp/pulpcore/issues/1949)
-   Fixed the fs exporter to handle the case where hardlink method was requested but pulp and export locations are in different partitions so can't share the same inode.
    [#3187](https://github.com/pulp/pulpcore/issues/3187)
-   Another step on closing the deadlock-window when syncing overlapping content.
    [#3284](https://github.com/pulp/pulpcore/issues/3284)

### Plugin API

No significant changes.

## 3.16.14 (2022-09-13) {: #3.16.14 }

### REST API

#### Bugfixes

-   Fixed the value of the Content-Type header returned for .xml.gz files.
    [#2811](https://github.com/pulp/pulpcore/issues/2811)
-   Another guardrail added around content-stages to address deadlock in a specific usecase.
    [#3192](https://github.com/pulp/pulpcore/issues/3192)

### Plugin API

No significant changes.

## 3.16.13 (2022-09-01) {: #3.16.13 }

### REST API

#### Bugfixes

-   Fixed another rare deadlock for high-concurrency/overlapping-content syncs.
    [#3111](https://github.com/pulp/pulpcore/issues/3111)

### Plugin API

No significant changes.

## 3.16.12 (2022-08-05) {: #3.16.12 }

### REST API

#### Bugfixes

-   Use published relative paths for FS Exporter.
    [#2933](https://github.com/pulp/pulpcore/issues/2933)
-   Serialized orphan cleanup tasks with respect to each other to prevent them from failing.
    [#3030](https://github.com/pulp/pulpcore/issues/3030)

### Plugin API

No significant changes.

## 3.16.11 (2022-07-14) {: #3.16.11 }

### REST API

#### Bugfixes

-   Improve content app performance on head requests
    [#2924](https://github.com/pulp/pulpcore/issues/2924)
-   Configured aiohttp to avoid rewriting redirect URLs, as some web servers (e.g. Amazon CloudFront) can be tempermental about the encoding of the URL.
    [#2964](https://github.com/pulp/pulpcore/issues/2964)

### Plugin API

No significant changes.

## 3.16.10 (2022-06-16) {: #3.16.10 }

### REST API

#### Bugfixes

-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)

### Plugin API

No significant changes.

## 3.16.9 (2022-06-15) {: #3.16.9 }

### REST API

#### Bugfixes

-   Started showing errors when users try to export remote artifacts.
    [#2817](https://github.com/pulp/pulpcore/issues/2817)

#### Misc

-   [#2816](https://github.com/pulp/pulpcore/issues/2816)

### Plugin API

No significant changes.

## 3.16.8 (2022-05-10) {: #3.16.8 }

### REST API

#### Bugfixes

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Fixed does_batch method in sync pipeline to allow waiting on content that is already resolved.
    [#2557](https://github.com/pulp/pulpcore/issues/2557)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

-   Improved the error message when HTTP proxies reject requests from Pulp.
    [#2654](https://github.com/pulp/pulpcore/issues/2654)

### Plugin API

No significant changes.

## 3.16.7 (2022-04-12) {: #3.16.7 }

### REST API

#### Bugfixes

-   Fixed two instances of Pulp not writing to the task worker's temporary directory.
    [#2061](https://github.com/pulp/pulpcore/issues/2061)
-   Fixed file descriptior leak during upload.
    [#2087](https://github.com/pulp/pulpcore/issues/2087)
-   Fixed a bug in pulpcore-worker, where wakeup and cancel signals could be lost due to a race
    condition.
    [#2144](https://github.com/pulp/pulpcore/issues/2144)
-   Loosened the version-restrictions on PulpImport to only require X.Y matching.
    [#2269](https://github.com/pulp/pulpcore/issues/2269)
-   Fixed a (rare) deadlock around bulk_update() during syncs with overlapping content.
    [#2430](https://github.com/pulp/pulpcore/issues/2430)
-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)

### Plugin API

No significant changes.

## 3.16.6 (2022-03-25) {: #3.16.6 }

### REST API

#### Bugfixes

-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)
-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)
-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)
-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)
-   Fixed secure proxy support by updating aiohttp version to ~=3.8.1.
    [#2423](https://github.com/pulp/pulpcore/issues/2423)

### Plugin API

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.16.5 (2022-03-17) {: #3.16.5 }

### REST API

#### Bugfixes

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

-   Taught PulpImport to retry in the event of a concurrency-collision on ContentArtifact.
    [#2102](https://github.com/pulp/pulpcore/issues/2102)

-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)

-   Fix a mistake in a previous migration which may have caused improperly encrypted remote fields.
    [#2327](https://github.com/pulp/pulpcore/issues/2327)

### Plugin API

No significant changes.

## 3.16.4 (2022-03-01) {: #3.16.4 }

### REST API

#### Bugfixes

-   Fix content summary showing incorrect count after previous version deletion.
    [#2084](https://github.com/pulp/pulpcore/issues/2084)

-   Fixed issue with listing repository versions after deleting previous versions.
    [#2085](https://github.com/pulp/pulpcore/issues/2085)

-   Fixed potential deadlock-window in touch() path.
    [#2157](https://github.com/pulp/pulpcore/issues/2157)

-   Fixed import/export of repositories with sub-content.

    An example would be the sub-repositories in pulp_rpm
    DistributionTrees.
    [#2192](https://github.com/pulp/pulpcore/issues/2192)

-   touch() now uses standard Django instead of raw-sql to update.
    [#2229](https://github.com/pulp/pulpcore/issues/2229)

-   PulpImporter now unpacks into the task-worker's working directory rather than /tmp. Unpacking
    large files into /tmp could cause the operation to fail, or even cause stability issues for
    Pulp instance, due to running /tmp out of space.
    [#2247](https://github.com/pulp/pulpcore/issues/2247)

-   Added transactions around repository version operations to prevent data loss.
    [#2268](https://github.com/pulp/pulpcore/issues/2268)

### Plugin API

No significant changes.

## 3.16.3 (2022-02-08) {: #3.16.3 }

### REST API

#### Bugfixes

-   Fix import and export OOM error.
    [#2072](https://github.com/pulp/pulpcore/issues/2072)
-   Fixed downloader retry logic with partially written files.
    [#2078](https://github.com/pulp/pulpcore/issues/2078)
-   Fixed bug where retries of partially downloaded files failed digest and size validation.
    [#2135](https://github.com/pulp/pulpcore/issues/2135)
-   Fixed the calculation of response range headers in streaming answers from the content app.
    [#2147](https://github.com/pulp/pulpcore/issues/2147)
-   Improved messaging around timeout requests.
    [#2169](https://github.com/pulp/pulpcore/issues/2169)
-   Fixed reporting tasks being canceled before being picked up by a worker as canceled instead of
    failed.
    [#2183](https://github.com/pulp/pulpcore/issues/2183)

#### Misc

-   [#2094](https://github.com/pulp/pulpcore/issues/2094)

### Plugin API

No significant changes.

## 3.16.2 (2022-01-07) {: #3.16.2 }

### REST API

#### Bugfixes

-   Fixed PulpImport to correctly save relative to MEDIA_ROOT.
    (backported from #9660)
    [#9663](https://pulp.plan.io/issues/9663)

### Plugin API

No significant changes.

## 3.16.1 (2021-12-02) {: #3.16.1 }

### REST API

#### Bugfixes

-   Fixed bug where Artifacts were being downloaded even if they were already saved in Pulp.
    (backported from #9542)
    [#9596](https://pulp.plan.io/issues/9596)
-   Fixed bug where the content app would stop working after a brief loss of connection to the database.
    (backported from #9276)
    [#9598](https://pulp.plan.io/issues/9598)

### Plugin API

No significant changes.

## 3.16.0 (2021-10-05) {: #3.16.0 }

### REST API

#### Features

-   Prioritize remote content provided by Alternate Content Sources over regular content in the content
    app.
    [#8749](https://pulp.plan.io/issues/8749)
-   Marked readonly task resources as shared for concurrent use.
    [#9326](https://pulp.plan.io/issues/9326)
-   Added validation for the remote type that can be used with the ACS.
    [#9375](https://pulp.plan.io/issues/9375)

#### Bugfixes

-   Ordered several ContentStages paths to fix deadlocks in high-concurrency scenarios.
    [#8750](https://pulp.plan.io/issues/8750)
-   Fixed a bug where `pulpcore-content` decompressed data while incorrectly advertising to clients
    it was still compressed via the `Content-Encoding: gzip` header.
    [#9213](https://pulp.plan.io/issues/9213)
-   Changed the pulpcore-worker to mark abandoned tasks as "failed" instead of "canceled".
    [#9247](https://pulp.plan.io/issues/9247)
-   Fixed the repository modify endpoint performance problems.
    [#9266](https://pulp.plan.io/issues/9266)
-   `RBACContentGuard` assign/remove permission endpoints now properly return 201 instead of 200
    [#9314](https://pulp.plan.io/issues/9314)
-   Fixed bug where some Openshift environments could not start workers due to a strange Python runtime
    import issue.
    [#9338](https://pulp.plan.io/issues/9338)
-   PATCH/PUT/DELETE calls for the ACS are asynchronous and trigger a task.
    [#9374](https://pulp.plan.io/issues/9374)
-   Fixed update call for the ACS so paths are not silenty removed when other fields are being updated.
    [#9376](https://pulp.plan.io/issues/9376)
-   Fixed an issue where on_demand content might not be downloaded properly if the remote URL was changed (even if re-synced).
    [#9395](https://pulp.plan.io/issues/9395)
-   Fixed a bug, where natural key calculations on content performed superfluous database calls.
    [#9409](https://pulp.plan.io/issues/9409)
-   Ensured that with the removal of ACS its' hidden repositories are removed as well.
    [#9417](https://pulp.plan.io/issues/9417)
-   Taught a remote-artifact error path to not assume 'filename' was valid for all content.
    [#9427](https://pulp.plan.io/issues/9427)
-   Taught several more codepaths to order-before-update to avoid deadlocks.
    [#9441](https://pulp.plan.io/issues/9441)

#### Improved Documentation

-   Added an architecture diagram to the components page.
    [#7692](https://pulp.plan.io/issues/7692)
-   Fixed a note saying where to find versioning details.
    [#8859](https://pulp.plan.io/issues/8859)
-   Removed deprecated uses of `MEDIA_ROOT`.
    [#9100](https://pulp.plan.io/issues/9100)
-   Updated ACS docs to use CLI commands.
    [#9251](https://pulp.plan.io/issues/9251)
-   Document Azure storage needs to set `MEDIA_ROOT`
    [#9428](https://pulp.plan.io/issues/9428)
-   Corrected a fact that Redis is needed by the tasking system in the installation section.
    [#9436](https://pulp.plan.io/issues/9436)

#### Removals

-   Removed the legacy tasking system and the `USE_NEW_WORKER_TYPE` setting.
    [#9157](https://pulp.plan.io/issues/9157)
-   Removed OpenAPI browsable API
    [#9322](https://pulp.plan.io/issues/9322)
-   Updated the pulp import creation endpoint to return a task group instead of a task.
    [#9382](https://pulp.plan.io/issues/9382)

#### Misc

-   [#9432](https://pulp.plan.io/issues/9432), [#9443](https://pulp.plan.io/issues/9443)

### Plugin API

#### Features

-   Added optional stage for Alternate Content Source support.
    [#8748](https://pulp.plan.io/issues/8748)
-   `AlternateContentSource` has a new class variable `REMOTE_TYPES` that it will use to validate
    the type of remote set on the ACS.
    [#9375](https://pulp.plan.io/issues/9375)
-   Added `pulpcore.plugin.viewset.TaskGroupResponse` which can be used to return a reference to a
    task group created in a viewset. Added `pulpcore.plugin.serializers.TaskGroupResponseSerializer`
    which can be used to indicate the serializer response format of viewsets that will use
    `TaskGroupResponse` similar to how `AsyncOperationResponseSerializer` is used.
    [#9380](https://pulp.plan.io/issues/9380)
-   Added the `pulpcore.plugin.tasking.general_multi_delete` that deletes a list of model instances
    in a transaction.
    [#9417](https://pulp.plan.io/issues/9417)
-   Exposed tasks `general_create`, `general_create_from_temp_file`, `general_delete`,
    `general_update`, `orphan_cleanup`, and `reclaim_space` in the plugin api.
    [#9418](https://pulp.plan.io/issues/9418)
-   ALLOW_SHARED_TASK_RESOURCES is now enabled by default. If all goes smoothly, this will become permanent and the setting will be removed in the next release.
    [#9474](https://pulp.plan.io/issues/9474)

#### Bugfixes

-   Set the default widget type to `JSONWidget` for `JSONFields` for Model Resources to fix
    django-import-export bug where `django.db.models.JSONFields` weren't properly handled.
    [#9307](https://pulp.plan.io/issues/9307)
-   PATCH/PUT/DELETE calls for the ACS are asynchronous and trigger a task.
    [#9374](https://pulp.plan.io/issues/9374)

#### Removals

-   Removed the deprecated `reserved_resources_record__resource` filter for Task. Use
    `reserved_resources_record__contains` instead.
    [#9157](https://pulp.plan.io/issues/9157)
-   Removed drf-access-policy workaround for condition/condition_expession.
    [#9163](https://pulp.plan.io/issues/9163)
-   Removed ACS path validation. Plugins should now define `validate_paths` on their ACS serializer to
    validate paths.
    [#9340](https://pulp.plan.io/issues/9340)
-   Renamed `TaskGroupResponse` to `TaskGroupOperationResponse` and `TaskGroupResponseSerializer`
    to `TaskGroupOperationResponseSerializer` in order to avoid conflicts with responses from task
    groups endpoints.
    [#9425](https://pulp.plan.io/issues/9425)
-   The resources argument of dispatch() has been removed. exclusive_resources and shared_resources should be used instead.
    [#9477](https://pulp.plan.io/issues/9477)
-   ContentSaver._pre_save() and ContentSaver._post_save() must now be implemented as synchronous functions rather than coroutines.
    [#9478](https://pulp.plan.io/issues/9478)

## 3.15.9 (2022-06-28) {: #3.15.9 }

### REST API

#### Bugfixes

-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)

#### Misc

-   [#2856](https://github.com/pulp/pulpcore/issues/2856)

### Plugin API

No significant changes.

## 3.15.8 (2022-04-12) {: #3.15.8 }

### REST API

#### Bugfixes

-   Fixed file descriptior leak during upload.
    [#2087](https://github.com/pulp/pulpcore/issues/2087)
-   Fixed a bug in pulpcore-worker, where wakeup and cancel signals could be lost due to a race
    condition.
    [#2144](https://github.com/pulp/pulpcore/issues/2144)
-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)
-   Changed the pulpcore-worker to mark abandoned tasks as "failed" instead of "canceled".
    [#2532](https://github.com/pulp/pulpcore/issues/2532)

### Plugin API

No significant changes.

## 3.15.7 (2022-03-25) {: #3.15.7 }

### REST API

#### Bugfixes

-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)
-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)
-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)
-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)

### Plugin API

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.15.6 (2022-03-22) {: #3.15.6 }

### REST API

#### Bugfixes

-   Fix a mistake in a previous migration which may have caused improperly encrypted remote fields.
    [#2327](https://github.com/pulp/pulpcore/issues/2327)

### Plugin API

No significant changes.

## 3.15.5 (2022-03-15) {: #3.15.5 }

### REST API

#### Bugfixes

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)

-   Fix content summary showing incorrect count after previous version deletion.
    [#2084](https://github.com/pulp/pulpcore/issues/2084)

-   Fixed issue with listing repository versions after deleting previous versions.
    [#2085](https://github.com/pulp/pulpcore/issues/2085)

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

-   Taught PulpImport to retry in the event of a concurrency-collision on ContentArtifact.
    [#2102](https://github.com/pulp/pulpcore/issues/2102)

-   Fixed potential deadlock-window in touch() path.
    [#2157](https://github.com/pulp/pulpcore/issues/2157)

-   Fixed reporting tasks being canceled before being picked up by a worker as canceled instead of
    failed.
    [#2183](https://github.com/pulp/pulpcore/issues/2183)

-   Fixed import/export of repositories with sub-content.

    An example would be the sub-repositories in pulp_rpm
    DistributionTrees.
    [#2192](https://github.com/pulp/pulpcore/issues/2192)

-   touch() now uses standard Django instead of raw-sql to update.
    [#2229](https://github.com/pulp/pulpcore/issues/2229)

-   PulpImporter now unpacks into the task-worker's working directory rather than /tmp. Unpacking
    large files into /tmp could cause the operation to fail, or even cause stability issues for
    Pulp instance, due to running /tmp out of space.
    [#2247](https://github.com/pulp/pulpcore/issues/2247)

-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)

-   Added transactions around repository version operations to prevent data loss.
    [#2268](https://github.com/pulp/pulpcore/issues/2268)

-   Fixed bug where the content app would stop working after a brief loss of connection to the database.
    [#2293](https://github.com/pulp/pulpcore/issues/2293)

### Plugin API

No significant changes.

## 3.15.4 (2022-01-28) {: #3.15.4 }

### REST API

#### Bugfixes

-   Fixed downloader retry logic with partially written files.
    [#2078](https://github.com/pulp/pulpcore/issues/2078)
-   Fixed bug where retries of partially downloaded files failed digest and size validation.
    [#2135](https://github.com/pulp/pulpcore/issues/2135)
-   Fixed the calculation of response range headers in streaming answers from the content app.
    [#2147](https://github.com/pulp/pulpcore/issues/2147)
-   Improved messaging around timeout requests.
    [#2169](https://github.com/pulp/pulpcore/issues/2169)

#### Misc

-   [#2094](https://github.com/pulp/pulpcore/issues/2094)

### Plugin API

No significant changes.

## 3.15.3 (2021-11-30) {: #3.15.3 }

### REST API

#### Bugfixes

-   Fixed bug where Artifacts were being downloaded even if they were already saved in Pulp.
    (backported from #9542)
    [#9584](https://pulp.plan.io/issues/9584)

### Plugin API

No significant changes.

## 3.15.2 (2021-09-02) {: #3.15.2 }

### REST API

#### Bugfixes

-   Fixed bug where some Openshift environments could not start workers due to a strange Python runtime
    import issue.
    (backported from #9338)
    [#9342](https://pulp.plan.io/issues/9342)

### Plugin API

No significant changes.

## 3.15.1 (2021-08-31) {: #3.15.1 }

### REST API

#### Bugfixes

-   `RBACContentGuard` assign/remove permission endpoints now properly return 201 instead of 200
    (backported from #9314)
    [#9323](https://pulp.plan.io/issues/9323)

### Plugin API

#### Bugfixes

-   Set the default widget type to `JSONWidget` for `JSONFields` for Model Resources to fix
    django-import-export bug where `django.db.models.JSONFields` weren't properly handled.
    (backported from #9307)
    [#9324](https://pulp.plan.io/issues/9324)

## 3.15.0 (2021-08-26) {: #3.15.0 }

### REST API

#### Features

-   Added encryption in the database for `Remote` fields `username`, `password`,
    `proxy_username`, `proxy_password`, and `client_key`.
    [#8192](https://pulp.plan.io/issues/8192)
-   Added feature to reclaim disk space for a list of repositories.
    [#8459](https://pulp.plan.io/issues/8459)
-   Added `method` field to filesystem exporters to customize how they export files. Users can now
    export files by writing them to the filesystem, using hardlinks, or using symlinks.
    [#8695](https://pulp.plan.io/issues/8695)
-   Changed orphan cleanup task to be a non-blocking task that can be run at any time. Added a
    `ORPHAN_PROTECTION_TIME` setting that can be configured for how long orphan Content and
    Artifacts are kept before becoming candidates for deletion by the orphan cleanup task.
    [#8824](https://pulp.plan.io/issues/8824)
-   Added a `/v3/exporters/core/filesystem/` endpoint for exporting publications or repository
    versions to the filesystem.
    [#8860](https://pulp.plan.io/issues/8860)
-   Added a periodical cleanup to the pulpcore-worker class to keep the Worker table clean.
    [#8931](https://pulp.plan.io/issues/8931)
-   Added new content guard that uses RBAC policies to protect content
    [#8940](https://pulp.plan.io/issues/8940)
-   Added authentication to the content app.
    [#8951](https://pulp.plan.io/issues/8951)
-   A new setting `ALLOW_SHARED_TASK_RESOURCES` was temporarily added to allow plugins to use specific
    resources concurrently, during task execution. It defaults to `False`. It will switch to `True`
    with 3.16 and will eventually be removed.
    [#9148](https://pulp.plan.io/issues/9148)

#### Bugfixes

-   In stages-pipeline and new-version sanity-checks, added full error-info on path-problems.
    [#8133](https://pulp.plan.io/issues/8133)
-   Improved disk usage during the synchronization.
    [#8295](https://pulp.plan.io/issues/8295)
-   Fixed an internal server error that was raised when a user provided invalid parameters while
    assigning new permissions to an object.
    [#8500](https://pulp.plan.io/issues/8500)
-   Fixed a bug, where new tasks were assigned to dead workers.
    [#8779](https://pulp.plan.io/issues/8779)
-   Fixed bug where content app would not respond to `Range` HTTP Header in requests when
    `remote.policy` was either `on_demand` or `streamed`. For example this request is used by
    Anaconda clients.
    [#8865](https://pulp.plan.io/issues/8865)
-   Unpublished content can no longer be accessed from content app if publication based-plugin has
    defined their distributions as publication serving
    [#8870](https://pulp.plan.io/issues/8870)
-   Fixed a bug that caused a serializer to ignore form data for `pulp_labels`.
    [#8954](https://pulp.plan.io/issues/8954)
-   Fixed inability for users to disable RBAC at the settings level by changing the
    `DEFAULT_PERMISSION_CLASSES` like any user configuring a DRF project expects to.
    [#8974](https://pulp.plan.io/issues/8974)
-   Fixed signal handling to properly kill a task when double ctrl-c is used to shut down a worker fast.
    [#8986](https://pulp.plan.io/issues/8986)
-   Added an attempt to cancel a task if a worker needed to abort it on graceful shutdown.
    [#8987](https://pulp.plan.io/issues/8987)
-   Fixed a bug where on-demand downloads would fill up `/var/run/` by not deleting downloaded files.
    [#9000](https://pulp.plan.io/issues/9000)
-   Fixed a regression preventing syncs from <file://> urls.
    [#9003](https://pulp.plan.io/issues/9003)
-   Removed ambiguity from the OpenAPI schema for Exports. The exported_resources are now a list of URI strings.
    [#9008](https://pulp.plan.io/issues/9008)
-   Use proxy auth from Remote config to download content from a remote repository.
    [#9024](https://pulp.plan.io/issues/9024)
-   Fixed the behavior of setting "repository" on a distribution for publication-based plugins.
    [#9039](https://pulp.plan.io/issues/9039)
-   Set Redis connection information in status to null unless it's used. Redis is
    needed for RQ tasking or content caching.
    [#9070](https://pulp.plan.io/issues/9070)
-   Fixed server error when accessing invalid files from content app base directory
    [#9074](https://pulp.plan.io/issues/9074)
-   Fixed improper validation of remotes' URLs.
    [#9080](https://pulp.plan.io/issues/9080)
-   Artifacts are now being properly updated for Content after switching from 'on_demand' to 'immediate'.
    [#9101](https://pulp.plan.io/issues/9101)
-   Made all database queries run serially using a single connection to the database.
    [#9129](https://pulp.plan.io/issues/9129)
-   Move files to artifact storage only when they originate from WORKING_DIRECTORY.
    Copy files from all other sources.
    [#9146](https://pulp.plan.io/issues/9146)
-   Content app now properly sets Content-Type header for artifacts being served from S3
    [#9216](https://pulp.plan.io/issues/9216)
-   Fixed repository sync performance regression introduced in pulpcore 3.14.
    [#9243](https://pulp.plan.io/issues/9243)
-   Stop using insecure hash function blake2s for calculating 64 bit lock identifier from uuid.
    [#9249](https://pulp.plan.io/issues/9249)
-   Fixed another occurence of the HTTP 500 error and connection already closed in the logs while accessing content.
    [#9275](https://pulp.plan.io/issues/9275)

#### Removals

-   Dropped support for Python 3.6 and 3.7. Pulp now supports Python 3.8+.
    [#8855](https://pulp.plan.io/issues/8855)
-   Renamed the `retained_versions` field on repositories to `retain_repo_versions`.
    [#9030](https://pulp.plan.io/issues/9030)

#### Deprecations

-   The traditional tasking system (formerly the default in `pulpcore<=3.13`) is deprecated and
    will be removed in `pulpcore==3.16`. If you are using the `USE_NEW_WORKER_TYPE=False` that
    will no longer give you the traditional tasking system starting with `pulpcore==3.16`.
    [#9159](https://pulp.plan.io/issues/9159)

#### Misc

-   [#5582](https://pulp.plan.io/issues/5582), [#8996](https://pulp.plan.io/issues/8996), [#9010](https://pulp.plan.io/issues/9010), [#9056](https://pulp.plan.io/issues/9056), [#9112](https://pulp.plan.io/issues/9112), [#9120](https://pulp.plan.io/issues/9120), [#9171](https://pulp.plan.io/issues/9171), [#9174](https://pulp.plan.io/issues/9174)

### Plugin API

#### Features

-   Content model has a new boolean class constant `PROTECTED_FROM_RECLAIM` for plugins to enable the
    reclaim disk space feature provided by core.
    [#8459](https://pulp.plan.io/issues/8459)
-   Added endpoints for managing Alternate Content Sources.
    [#8607](https://pulp.plan.io/issues/8607)
-   Orphan cleanup task has a new optional parameter `orphan_protection_time` that decides for how
    long Pulp will hold orphan Content and Artifacts before they become candidates for deletion for this
    particular orphan cleanup task.
    [#8824](https://pulp.plan.io/issues/8824)
-   Distribution model has a new boolean class variable `SERVE_FROM_PUBLICATION` for plugins to declare
    whether their distributions serve from publications or directly from repository versions
    [#8870](https://pulp.plan.io/issues/8870)
-   The settings file switched `DEFAULT_PERMISSION_CLASSES` to use `AccessPolicyFromDB` instead of
    `IsAdminUser` with a fallback to a behavior of `IsAdminUser`. With this feature plugin writers
    no longer need to declare `permission_classes` on their Views or Viewsets to use
    `AccessPolicyFromDB`.
    [#8974](https://pulp.plan.io/issues/8974)
-   Upgraded django from 2.2 to 3.2.
    [#9018](https://pulp.plan.io/issues/9018)
-   pulpcore.plugin.models.ProgressReport now has async interfaces: asave(), aincrease_by(),
    aincrement(), __aenter__(), _aexit__(). Plugins should switch to the async interfaces in their
    Stages.
    pulpcore.plugin.sync.sync_to_async_iterator is a utility method to synchronize the database
    queries generated when a QuerySet is iterated.
    [#9129](https://pulp.plan.io/issues/9129)
-   Added `shared_resources` to the `dispatch` call, so tasks can run concurrently if they need overlapping resources for read only.
    [#9148](https://pulp.plan.io/issues/9148)
-   Added `touch` to Artifact and Content query sets for bulk operation.
    [#9234](https://pulp.plan.io/issues/9234)
-   Added ContentManager to the plugin API - all subclasses of Content that add their own custom manager should have the manager subclass ContentManager.
    [#9269](https://pulp.plan.io/issues/9269)

#### Bugfixes

-   Added kwarg to RemoteArtifactSaver init to allow enabling handling of rare error edge-case.

    fix_mismatched_remote_artifacts=True enables workaround for a failure-scenario that
    (so far) is only encountered by pulp_rpm. Current behavior is the default.
    [#8133](https://pulp.plan.io/issues/8133)

#### Removals

-   Removed the `pulpcore.plugin.viewsets.NewDistributionFilter`. Instead use
    `pulpcore.plugin.viewsets.DistributionFilter`.
    [#8479](https://pulp.plan.io/issues/8479)
-   Removed `FilesystemExporterSerializer` and `PublicationExportSerializer` from the plugin api.
    Filesystem exports are now handled by pulpcore.
    [#8860](https://pulp.plan.io/issues/8860)
-   The `pulpcore.plugin.download.http_giveup` method has been removed from the plugin API. Plugins
    used to have to use this to wrap the `_run` method defined on subclasses of `HttpDownloader`,
    but starting with pulpcore 3.14 the backoff is implemented directly in the `HttpDownloader.run()`
    method which subclasses do not override. Due to `pulpcore` implementing it, it is no longer needed
    or available for plugins to use.
    [#8913](https://pulp.plan.io/issues/8913)

#### Deprecations

-   ContentSaver._pre_save() and ContentSaver._post_save() hooks are no longer coroutines. They should
    be implemented as synchronous functions.
    [#9129](https://pulp.plan.io/issues/9129)
-   Deprecate the compatibility layer for access policies. As of pulpcore 3.16, all plugins should
    properly use the "condition" and "condition_expression" fields in the access policy statements.
    [#9160](https://pulp.plan.io/issues/9160)
-   Deprecate the `resources` argument of `dispatch` in favor of `exclusive_resources` and `shared_resources`.
    [#9257](https://pulp.plan.io/issues/9257)

#### Misc

-   [#8606](https://pulp.plan.io/issues/8606), [#9160](https://pulp.plan.io/issues/9160)

## 3.14.19 (2023-02-09) {: #3.14.19 }

### REST API

#### Bugfixes

-   Fixed another rare deadlock for high-concurrency/overlapping-content syncs.
    [#3111](https://github.com/pulp/pulpcore/issues/3111)
-   Another step on closing the deadlock-window when syncing overlapping content.
    [#3284](https://github.com/pulp/pulpcore/issues/3284)

### Plugin API

No significant changes.

## 3.14.18 (2022-07-14) {: #3.14.18 }

### REST API

#### Bugfixes

-   Started showing errors when users try to export remote artifacts.
    [#2817](https://github.com/pulp/pulpcore/issues/2817)
-   Restore multiple-retry logic for PulpImport.
    [#2854](https://github.com/pulp/pulpcore/issues/2854)
-   Configured aiohttp to avoid rewriting redirect URLs, as some web servers (e.g. Amazon CloudFront) can be tempermental about the encoding of the URL.
    [#2964](https://github.com/pulp/pulpcore/issues/2964)

### Plugin API

No significant changes.

## 3.14.17 (2022-05-09) {: #3.14.17 }

### REST API

#### Bugfixes

-   Loosened the version-restrictions on PulpImport to only require X.Y matching.
    [#2269](https://github.com/pulp/pulpcore/issues/2269)

-   Taught PulpImport to stream imports rather than reading files into memory in one chunk.

    This largely alleviates the memory-pressure that results from importing multiple
    large repositories in parallel.
    [#2307](https://github.com/pulp/pulpcore/issues/2307)

-   Ensure downloader resets file on retry.
    [#2576](https://github.com/pulp/pulpcore/issues/2576)

-   Taught PulpImport to retry more than once in the event of creation-collisions.

    This fixes a rare import-failure during high-concurrency, high-content-overlap imports.
    [#2589](https://github.com/pulp/pulpcore/issues/2589)

### Plugin API

No significant changes.

## 3.14.16 (2022-04-12) {: #3.14.16 }

### REST API

#### Bugfixes

-   Fixed two instances of Pulp not writing to the task worker's temporary directory.
    [#2061](https://github.com/pulp/pulpcore/issues/2061)
-   Fixed a (rare) deadlock around bulk_update() during syncs with overlapping content.
    [#2430](https://github.com/pulp/pulpcore/issues/2430)
-   Fixed a bug where notifications to workers may go unnoticed. This may lead to idle workers while
    there are tasks waiting.
    [#2506](https://github.com/pulp/pulpcore/issues/2506)

### Plugin API

No significant changes.

## 3.14.15 (2022-03-25) {: #3.14.15 }

### REST API

#### Bugfixes

-   Fix delete repository version causing "duplicate key value violates unique constraint" error.
    [#2047](https://github.com/pulp/pulpcore/issues/2047)
-   Reduced memory usage during tasks like sync by holding fewer objects in-memory unnecessarily.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)
-   This fix prevents the lost track of a content removed version when deleting a repository version that deletes a content that is added back in the subsequent version, but deleted again in a later version.
    [#2267](https://github.com/pulp/pulpcore/issues/2267)
-   Fixes duplicate key error `Key (content_artifact_id, remote_id)` when creating `RemoteArtifacts`
    during syncs in pulp_container and possibly other plugins.
    [#2381](https://github.com/pulp/pulpcore/issues/2381)
-   Declared proper dependency on user model in migration 0040.
    [#2403](https://github.com/pulp/pulpcore/issues/2403)
-   Fixed a rare deadlock when sync'ing overlapping content in high-concurrency envs.
    [#2420](https://github.com/pulp/pulpcore/issues/2420)

### Plugin API

#### Bugfixes

-   Adjusted the default size of the queues between pipelines to be 1 instead of 1000. The batchers in
    the stage will still accumulate up to 500 (by default) items so batching is still in-effect there
    where it matters.
    [#2069](https://github.com/pulp/pulpcore/issues/2069)

## 3.14.14 (2022-03-10) {: #3.14.14 }

### REST API

#### Bugfixes

-   Fixed migration 0064_add_new_style_task_columns to purge extraneous ReservedResource and
    TaskReservedResource entries, which could block sync and publish tasks post-upgrade.

    Also taught the migration to bulk-update the Task changes. In large installations, this
    should have a positive impact on the time it takes to apply the migration.
    [#2101](https://github.com/pulp/pulpcore/issues/2101)

### Plugin API

No significant changes.

## 3.14.13 (2022-03-08) {: #3.14.13 }

### REST API

#### Bugfixes

-   Taught PulpImport to retry in the event of a concurrency-collision on ContentArtifact.
    [#2102](https://github.com/pulp/pulpcore/issues/2102)

-   Fixed import/export of repositories with sub-content.

    An example would be the sub-repositories in pulp_rpm
    DistributionTrees.
    [#2192](https://github.com/pulp/pulpcore/issues/2192)

-   touch() now uses standard Django instead of raw-sql to update.
    [#2229](https://github.com/pulp/pulpcore/issues/2229)

-   PulpImporter now unpacks into the task-worker's working directory rather than /tmp. Unpacking
    large files into /tmp could cause the operation to fail, or even cause stability issues for
    Pulp instance, due to running /tmp out of space.
    [#2247](https://github.com/pulp/pulpcore/issues/2247)

## 3.14.12 (2022-02-11) {: #3.14.12 }

### REST API

#### Bugfixes

-   Fixed potential deadlock-window in touch() path.
    [#2157](https://github.com/pulp/pulpcore/issues/2157)
-   Fixed reporting tasks being canceled before being picked up by a worker as canceled instead of
    failed.
    [#2183](https://github.com/pulp/pulpcore/issues/2183)

### Plugin API

No significant changes.

## 3.14.11 (2022-01-27) {: #3.14.11 }

### REST API

#### Bugfixes

-   Fix import and export OOM error.
    [#2072](https://github.com/pulp/pulpcore/issues/2072)
-   Fixed downloader retry logic with partially written files.
    [#2078](https://github.com/pulp/pulpcore/issues/2078)
-   Fix content summary showing incorrect count after previous version deletion.
    [#2084](https://github.com/pulp/pulpcore/issues/2084)
-   Fixed issue with listing repository versions after deleting previous versions.
    [#2085](https://github.com/pulp/pulpcore/issues/2085)
-   Fixed file descriptior leak during upload.
    [#2087](https://github.com/pulp/pulpcore/issues/2087)
-   Added proper logging around certain ways a task could fail.
    [#2093](https://github.com/pulp/pulpcore/issues/2093)
-   Make checksum mismatches a retryable error.
    [#2094](https://github.com/pulp/pulpcore/issues/2094)
-   Fixed an edge case where the first (streamed) response from an repo synced as "on_demand" could be incorrect.
    [#2119](https://github.com/pulp/pulpcore/issues/2119)
-   Fixed bug where retries of partially downloaded files failed digest and size validation.
    [#2135](https://github.com/pulp/pulpcore/issues/2135)
-   Fixed a bug in pulpcore-worker, where wakeup and cancel signals could be lost due to a race
    condition.
    [#2144](https://github.com/pulp/pulpcore/issues/2144)
-   Fixed the calculation of response range headers in streaming answers from the content app.
    [#2147](https://github.com/pulp/pulpcore/issues/2147)

### Plugin API

No significant changes.

## 3.14.10 (2022-01-07) {: #3.14.10 }

### REST API

#### Bugfixes

-   Fixed PulpImport to correctly save relative to MEDIA_ROOT.
    (backported from #9660)
    [#9662](https://pulp.plan.io/issues/9662)

### Plugin API

No significant changes.

## 3.14.9 (2021-11-05) {: #3.14.9 }

### REST API

#### Bugfixes

-   Fixed a bug where the /pulp/content/ page would return a 500 error after the database connection
    was closed due to a network problem or a database restart.
    [#9515](https://pulp.plan.io/issues/9515)
-   Fixed bug where chunked uploads were being assembled in /tmp.
    [#9556](https://pulp.plan.io/issues/9556)

### Plugin API

No significant changes.

## 3.14.8 (2021-10-06) {: #3.14.8 }

### REST API

#### Bugfixes

-   Improved messaging around timeout requests. (Backported from [#9301](https://pulp.plan.io/issues/9301)).
    [#9491](https://pulp.plan.io/issues/9491)

### Plugin API

No significant changes.

## 3.14.7 (2021-09-29) {: #3.14.7 }

### REST API

#### Bugfixes

-   Added a periodical cleanup to the pulpcore-worker class to keep the Worker table clean.
    (backported from #8931)
    [#9462](https://pulp.plan.io/issues/9462)
-   Ordered several ContentStages paths to fix deadlocks in high-concurrency scenarios.
    (backported from #8750)
    [#9379](https://pulp.plan.io/issues/9379)
-   Fixed an issue where on_demand content might not be downloaded properly if the remote URL was changed (even if re-synced).
    (backported from #9395)
    [#9400](https://pulp.plan.io/issues/9400)
-   Fixed the repository modify endpoint performance problems.
    (backported from #9266)
    [#9401](https://pulp.plan.io/issues/9401)
-   Taught a remote-artifact error path to not assume 'filename' was valid for all content.
    (backported from #9427)
    [#9440](https://pulp.plan.io/issues/9440)
-   Taught several more codepaths to order-before-update to avoid deadlocks.
    (backported from #9441)
    [#9445](https://pulp.plan.io/issues/9445)
-   Changed the pulpcore-worker to mark abandoned tasks as "failed" instead of "canceled".
    (backported from #9247)
    [#9453](https://pulp.plan.io/issues/9453)

### Plugin API

No significant changes.

## 3.14.6 (2021-09-02) {: #3.14.6 }

### REST API

#### Bugfixes

-   Stop using insecure hash function blake2s for calculating 64 bit lock identifier from uuid.
    (backported from #9249)
    [#9288](https://pulp.plan.io/issues/9288)
-   Fixed a bug where `pulpcore-content` decompressed data while incorrectly advertising to clients
    it was still compressed via the `Content-Encoding: gzip` header.
    (backported from #9213)
    [#9325](https://pulp.plan.io/issues/9325)
-   Fixed bug where some Openshift environments could not start workers due to a strange Python runtime
    import issue.
    (backported from #9338)
    [#9339](https://pulp.plan.io/issues/9339)

### Plugin API

No significant changes.

## 3.14.5 (2021-08-24) {: #3.14.5 }

### REST API

#### Bugfixes

-   Content app now properly sets Content-Type header for artifacts being served from S3
    (backported from #9216)
    [#9244](https://pulp.plan.io/issues/9244)
-   Artifacts are now being properly updated for Content after switching from 'on_demand' to 'immediate'.
    (backported from #9101)
    [#9261](https://pulp.plan.io/issues/9261)
-   Fixed repository sync performance regression introduced in pulpcore 3.14.
    (backported from #9243)
    [#9264](https://pulp.plan.io/issues/9264)
-   Fixed another occurence of the HTTP 500 error and connection already closed in the logs while accessing content.
    (backported from #9275)
    [#9282](https://pulp.plan.io/issues/9282)

#### Misc

-   [#9265](https://pulp.plan.io/issues/9265)

### Plugin API

#### Misc

-   [#9268](https://pulp.plan.io/issues/9268), [#9273](https://pulp.plan.io/issues/9273)

## 3.14.4 (2021-08-10) {: #3.14.4 }

### REST API

#### Bugfixes

-   Unpublished content can no longer be accessed from content app if publication based-plugin has
    defined their distributions as publication serving
    (backported from #8870)
    [#9126](https://pulp.plan.io/issues/9126)
-   In stages-pipeline and new-version sanity-checks, added full error-info on path-problems.
    (backported from #8133)
    [#9130](https://pulp.plan.io/issues/9130)
-   Move files to artifact storage only when they originate from WORKING_DIRECTORY.
    Copy files from all other sources.
    (backported from #9146)
    [#9202](https://pulp.plan.io/issues/9202)

#### Misc

-   [#9179](https://pulp.plan.io/issues/9179)

### Plugin API

#### Features

-   Distribution model has a new boolean class variable `SERVE_FROM_PUBLICATION` for plugins to declare
    whether their distributions serve from publications or directly from repository versions
    (backported from #8870)
    [#9126](https://pulp.plan.io/issues/9126)

#### Bugfixes

-   Added kwarg to RemoteArtifactSaver init to allow enabling handling of rare error edge-case.

    fix_mismatched_remote_artifacts=True enables workaround for a failure-scenario that
    (so far) is only encountered by pulp_rpm. Current behavior is the default.
    (backported from #8133)
    [#9130](https://pulp.plan.io/issues/9130)

## 3.14.3 (2021-07-23) {: #3.14.3 }

### REST API

#### Bugfixes

-   Fixed improper validation of remotes' URLs.
    (backported from #9080)
    [#9083](https://pulp.plan.io/issues/9083)
-   Set Redis connection information in status to null unless it's used. Redis is
    needed for RQ tasking or content caching.
    (backported from #9070)
    [#9085](https://pulp.plan.io/issues/9085)
-   Fixed signal handling to properly kill a task when double ctrl-c is used to shut down a worker fast.
    (backported from #8986)
    [#9086](https://pulp.plan.io/issues/9086)
-   Improved disk usage during the synchronization.
    (backported from #8295)
    [#9103](https://pulp.plan.io/issues/9103)
-   Fixed a bug where on-demand downloads would fill up `/var/run/` by not deleting downloaded files.
    (backported from #9000)
    [#9110](https://pulp.plan.io/issues/9110)
-   Fixed a bug, where new tasks were assigned to dead workers.
    (backported from #8779)
    [#9116](https://pulp.plan.io/issues/9116)

### Plugin API

No significant changes.

## 3.14.2 (2021-07-13) {: #3.14.2 }

### REST API

#### Bugfixes

-   Fixed bug where content app would not respond to `Range` HTTP Header in requests when
    `remote.policy` was either `on_demand` or `streamed`. For example this request is used by
    Anaconda clients.
    (backported from #8865)
    [#9057](https://pulp.plan.io/issues/9057)
-   Fixed a bug that caused a serializer to ignore form data for `pulp_labels`.
    (backported from #8954)
    [#9058](https://pulp.plan.io/issues/9058)
-   Fixed the behavior of setting "repository" on a distribution for publication-based plugins.
    (backported from #9039)
    [#9059](https://pulp.plan.io/issues/9059)
-   Use proxy auth from Remote config to download content from a remote repository.
    (backported from #9024)
    [#9068](https://pulp.plan.io/issues/9068)
-   Fixed server error when accessing invalid files from content app base directory
    (backported from #9074)
    [#9077](https://pulp.plan.io/issues/9077)

#### Misc

-   [#9063](https://pulp.plan.io/issues/9063)

### Plugin API

No significant changes.

## 3.14.1 (2021-07-07) {: #3.14.1 }

### REST API

#### Bugfixes

-   Fixed a regression preventing syncs from <file://> urls.
    (backported from #9003)
    [#9015](https://pulp.plan.io/issues/9015)
-   Removed ambiguity from the OpenAPI schema for Exports. The exported_resources are now a list of URI strings.
    (backported from #9008)
    [#9025](https://pulp.plan.io/issues/9025)

### Plugin API

No significant changes.

## 3.14.0 (2021-07-01) {: #3.14.0 }

### REST API

#### Features

-   Introduce new worker style. (tech-preview)
    [#8501](https://pulp.plan.io/issues/8501)

-   Added new endpoint `/pulp/api/v3/orphans/cleanup/`. When called with `POST` and no parameters
    it is equivalent to calling `DELETE /pulp/api/v3/orphans/`. Additionally the optional parameter
    `content_hrefs` can be specified and must contain a list of content hrefs. When `content_hrefs`
    is specified, only those content units will be considered to be removed by orphan cleanup.
    [#8658](https://pulp.plan.io/issues/8658)

-   Content app responses are now smartly cached in Redis.
    [#8805](https://pulp.plan.io/issues/8805)

-   Downloads from remote sources will now be retried on more kinds of errors, such as HTTP 500 or socket errors.
    [#8881](https://pulp.plan.io/issues/8881)

-   Add a correlation id filter to the task list endpoint.
    [#8891](https://pulp.plan.io/issues/8891)

-   Where before `download_concurrency` would previously be set to a default value upon creation, it will now be set NULL (but a default value will still be used).
    [#8897](https://pulp.plan.io/issues/8897)

-   Added graceful shutdown to pulpcore workers.
    [#8930](https://pulp.plan.io/issues/8930)

-   Activate the new task worker type by default.

    !!! warning
        If you intend to stick with the old tasking system, you should configure the
        `USE_NEW_WORKER_TYPE` setting to false before upgrade

    [#8948](https://pulp.plan.io/issues/8948)

#### Bugfixes

-   Fixed race condition where a task could clean up reserved resources shared with another task.
    [#8637](https://pulp.plan.io/issues/8637)

-   Altered redirect URL escaping, preventing invalidation of signed URLs for artifacts using cloud storage.
    [#8670](https://pulp.plan.io/issues/8670)

-   Add an update row lock on in task dispatching for `ReservedResource` to prevent a race where an
    object was deleted that was supposed to be reused. This prevents a condition where tasks ended up in
    waiting state forever.
    [#8708](https://pulp.plan.io/issues/8708)

-   Retry downloads on `ClientConnectorSSLError`, which appears to be spuriously returned by some CDNs.
    [#8867](https://pulp.plan.io/issues/8867)

-   Fixed OpenAPI schema tag generation for resources that are nested more than 2 levels.

    This change is most evident in client libraries generated from the OpenAPI schema.

    Prior to this change, the API client for a resource located at
    [/api/v3/pulp/exporters/core/pulp/<uuid>/exports/]{.title-ref} was named ExportersCoreExportsApi.

    After this change, the API client for a resource located at
    [/api/v3/pulp/exporters/core/pulp/<uuid>/exports/]{.title-ref} is named ExportersPulpExportsApi.
    [#8868](https://pulp.plan.io/issues/8868)

-   Fixed request schema for `/pulp/api/v3/repair/`, which did identify any arguments. This also fixes
    the bindings.
    [#8869](https://pulp.plan.io/issues/8869)

-   Update default access policies in the database if they were unmodified by the administrator.
    [#8883](https://pulp.plan.io/issues/8883)

-   Pinning to psycopg2 < 2.9 as psycopg 2.9 doesn't work with django 2.2. More info at
    <https://github.com/django/django/commit/837ffcfa681d0f65f444d881ee3d69aec23770be>.
    [#8926](https://pulp.plan.io/issues/8926)

-   Fixed bug where artifacts and content were not always saved in Pulp with each
    on_demand request serviced by content app.
    [#8980](https://pulp.plan.io/issues/8980)

#### Improved Documentation

-   Fixed a number of link-problems in the installation/ section of docs.
    [#6837](https://pulp.plan.io/issues/6837)
-   Added a troubleshooting section to the docs explaining how to find stuck tasks.
    [#8774](https://pulp.plan.io/issues/8774)
-   Moved existing basic auth docs to a new top-level section named Authentication.
    [#8800](https://pulp.plan.io/issues/8800)
-   Moved `Webserver Authentication` docs under the top-level `Authentication` section.
    [#8801](https://pulp.plan.io/issues/8801)
-   Provide instructions to use Keycloak authenication using Python Social Aauth
    [#8803](https://pulp.plan.io/issues/8803)
-   Updated the docs.pulpproject.org to provide some immediate direction for better user orientation.
    [#8946](https://pulp.plan.io/issues/8946)
-   Separated hardware and Filesystem information from the Architecture section and added them to the Installation section.
    [#8947](https://pulp.plan.io/issues/8947)
-   Added sub-headings and simplified language of Pulp concept section.
    [#8949](https://pulp.plan.io/issues/8949)

#### Deprecations

-   Deprecated the `DELETE /pulp/api/v3/orphans/` call. Instead use the
    `POST /pulp/api/v3/orphans/cleanup/` call.
    [#8876](https://pulp.plan.io/issues/8876)

#### Misc

-   [#8821](https://pulp.plan.io/issues/8821), [#8827](https://pulp.plan.io/issues/8827), [#8975](https://pulp.plan.io/issues/8975)

### Plugin API

#### Features

-   Added the `pulpcore.plugin.viewsets.DistributionFilter`. This should be used instead of
    `pulpcore.plugin.viewsets.NewDistributionFilter`.
    [#8480](https://pulp.plan.io/issues/8480)
-   Added `user_hidden` field to `Repository` to hide repositories from users.
    [#8487](https://pulp.plan.io/issues/8487)
-   Added a `timestamp_of_interest` field to Content and Artifacts. This field can be updated by
    calling a new method `touch()` on Artifacts and Content. Plugin writers should call this method
    whenever they deal with Content or Artifacts. For example, this includes places where Content is
    uploaded or added to Repository Versions. This will prevent Content and Artifacts from being cleaned
    up when orphan cleanup becomes a non-blocking task in pulpcore 3.15.
    [#8823](https://pulp.plan.io/issues/8823)
-   Exposed `AsyncUpdateMixin` through `pulpcore.plugin.viewsets`.
    [#8844](https://pulp.plan.io/issues/8844)
-   Added a field `DEFAULT_MAX_RETRIES` to the `Remote` base class - plugin writers can override the default number of retries attempted when file downloads failed for each type of remote. The default value is 3.
    [#8881](https://pulp.plan.io/issues/8881)
-   Added a field `DEFAULT_DOWNLOAD_CONCURRENCY` to the Remote base class - plugin writers can override the number of concurrent downloads for each type of remote. The default value is 10.
    [#8897](https://pulp.plan.io/issues/8897)

#### Bugfixes

-   Fixed OpenAPI schema tag generation for resources that are nested more than 2 levels.

    This change is most evident in client libraries generated from the OpenAPI schema.

    Prior to this change, the API client for a resource located at
    [/api/v3/pulp/exporters/core/pulp/<uuid>/exports/]{.title-ref} was named ExportersCoreExportsApi.

    After this change, the API client for a resource located at
    [/api/v3/pulp/exporters/core/pulp/<uuid>/exports/]{.title-ref} is named ExportersPulpExportsApi.
    [#8868](https://pulp.plan.io/issues/8868)

#### Removals

-   The usage of non-JSON serializable types of `args` and `kwargs` to tasks is no longer supported.
    `uuid.UUID` objects however will silently be converted to `str`.
    [#8501](https://pulp.plan.io/issues/8501)
-   Removed the `versions_containing_content` method from the
    pulpcore.plugin.models.RepositoryVersion object. Instead use
    RepositoryVersion.objects.with_content().
    #8729 <<https://pulp.plan.io/issues/8729>>`__
-   Removed pulpcore.plugin.stages.ContentUnassociation from the plugin API.
    [#8827](https://pulp.plan.io/issues/8827)

#### Deprecations

-   The `pulpcore.plugin.viewsets.NewDistributionFilter` is deprecated and will be removed from a
    future release. Instead use `pulpcore.plugin.viewsets.DistributionFilter`.
    [#8480](https://pulp.plan.io/issues/8480)
-   Deprecate the use of the reserved_resources_record__resource in favor of reserved_resources_record__contains.
    Tentative removal release is pulpcore==3.15.
    [#8501](https://pulp.plan.io/issues/8501)
-   Plugin writers who create custom downloaders by subclassing `HttpDownloader` no longer need to wrap the `_run()` method with a `backoff` decorator. Consequntly the `http_giveup` handler the sake of the `backoff` decorator is no longer needed and has been deprecated. It is likely to be removed in pulpcore 3.15.
    [#8881](https://pulp.plan.io/issues/8881)

## 3.13.0 (2021-05-25) {: #3.13.0 }

### REST API

#### Features

-   Added two views to identify content which belongs to repository_version or publication.
    [#4832](https://pulp.plan.io/issues/4832)
-   Added repository field to repository version endpoints.
    [#6068](https://pulp.plan.io/issues/6068)
-   Added ability for users to limit how many repo versions Pulp retains by setting
    `retained_versions` on repository.
    [#8368](https://pulp.plan.io/issues/8368)
-   Added the `add-signing-service` management command.
    Notice that it is still in tech-preview and can change without further notice.
    [#8609](https://pulp.plan.io/issues/8609)
-   Added a `pulpcore-worker` entrypoint to simplify and unify the worker command.
    [#8721](https://pulp.plan.io/issues/8721)
-   Content app auto-distributes latest publication if distribution's `repository` field is set
    [#8760](https://pulp.plan.io/issues/8760)

#### Bugfixes

-   Fixed cleanup of UploadChunks when their corresponding Upload is deleted.
    [#7316](https://pulp.plan.io/issues/7316)
-   Fixed an issue that caused the request's context to be ignored in the serializers.
    [#8396](https://pulp.plan.io/issues/8396)
-   Fixed missing `REDIS_SSL` parameter in RQ config.
    [#8525](https://pulp.plan.io/issues/8525)
-   Fixed bug where using forms submissions to create resources (e.g. `Remotes`) raised exception
    about the format of `pulp_labels`.
    [#8541](https://pulp.plan.io/issues/8541)
-   Fixed bug where publications sometimes fail with the error '[Errno 39] Directory not empty'.
    [#8595](https://pulp.plan.io/issues/8595)
-   Handled a tasking race condition where cleaning up resource reservations sometimes raised an IntegrityError.
    [#8603](https://pulp.plan.io/issues/8603)
-   Fixed on-demand sync/migration of repositories that don't have sha256 checksums.
    [#8625](https://pulp.plan.io/issues/8625)
-   Taught pulp-export to validate chunk-size to be <= 1TB.
    [#8628](https://pulp.plan.io/issues/8628)
-   Addressed a race-condition in PulpImport that could fail with unique-constraint violations.
    [#8633](https://pulp.plan.io/issues/8633)
-   Content app now properly lists all distributions present
    [#8636](https://pulp.plan.io/issues/8636)
-   Fixed ability to specify custom headers on a Remote.
    [#8689](https://pulp.plan.io/issues/8689)
-   Fixed compatibility with Django 2.2 LTS. Pulp now requires Django~=2.2.23
    [#8691](https://pulp.plan.io/issues/8691)
-   Skip allowed content checks on collectstatic
    [#8711](https://pulp.plan.io/issues/8711)
-   Fixed a bug in the retained versions code where content wasn't being properly moved to newer repo
    versions when old versions were cleaned up.
    [#8793](https://pulp.plan.io/issues/8793)

#### Improved Documentation

-   Added docs on how to list the effective settings using `dynaconf list`.
    [#6235](https://pulp.plan.io/issues/6235)
-   Added anti-instructions, that users should never run pulpcore-manager makemigrations[, but file a bug instead.
    ]{.title-ref}#6703 <<https://pulp.plan.io/issues/6703>>`__
-   Clarified repositories are typed in concepts page
    [#6990](https://pulp.plan.io/issues/6990)
-   Added UTF-8 character set encoding as a requirement for PostgreSQL
    [#7019](https://pulp.plan.io/issues/7019)
-   Fixed typo s/comtrol/control
    [#7715](https://pulp.plan.io/issues/7715)
-   Removed the PUP references from the docs.
    [#7747](https://pulp.plan.io/issues/7747)
-   Updated plugin writers' guide to not use settings directly in the model fields.
    [#7776](https://pulp.plan.io/issues/7776)
-   Make the reference to the Pulp installer documentation more explicit.
    [#8477](https://pulp.plan.io/issues/8477)
-   Removed example Ansible installer playbook from the pulpcore docs so that Pulp users would have a single source of truth in the pulp-installer docs.
    [#8550](https://pulp.plan.io/issues/8550)
-   Added security disclosures ref to homepage
    [#8584](https://pulp.plan.io/issues/8584)
-   Add sequential steps for storage docs
    [#8597](https://pulp.plan.io/issues/8597)
-   Updated signing service workflow. Removed old deprecation warning.
    [#8609](https://pulp.plan.io/issues/8609)
-   Add an example of how to specify an array value and a dict key in the auth methods section
    [#8668](https://pulp.plan.io/issues/8668)
-   Fixed docs build errors reported by autodoc.
    [#8784](https://pulp.plan.io/issues/8784)

#### Misc

-   [#8524](https://pulp.plan.io/issues/8524), [#8656](https://pulp.plan.io/issues/8656), [#8761](https://pulp.plan.io/issues/8761)

### Plugin API

#### Features

-   Undeprecated the use of `uuid.UUID` in task arguments. With this, primary keys do not need to be explicitely cast to `str`.
    [#8723](https://pulp.plan.io/issues/8723)

#### Bugfixes

-   Added RepositoryVersionRelatedField to the plugin API.
    [#8578](https://pulp.plan.io/issues/8578)
-   Fixed auto-distribute w/ retained_versions tests
    [#8792](https://pulp.plan.io/issues/8792)

#### Removals

-   Removed deprecated `pulpcore.plugin.tasking.WorkingDirectory`.
    [#8354](https://pulp.plan.io/issues/8354)
-   Removed `BaseDistribution`, `PublicationDistribution`, and `RepositoryVersionDistribution`
    models. Removed `BaseDistributionSerializer`, `PublicationDistributionSerializer`, and
    `RepositoryVersionDistributionSerializer` serializers. Removed `BaseDistributionViewSet` and
    `DistributionFilter`.
    [#8386](https://pulp.plan.io/issues/8386)
-   Removed `pulpcore.plugin.tasking.enqueue_with_reservation`.
    [#8497](https://pulp.plan.io/issues/8497)

#### Deprecations

-   RepositoryVersion method "versions_containing_content" is deprecated now.
    [#4832](https://pulp.plan.io/issues/4832)
-   The usage of the pulpcore.plugin.stages.ContentUnassociation stage has been deprecated. A future update will remove it from the plugin API.
    [#8635](https://pulp.plan.io/issues/8635)

## 3.12.2 (2021-04-29) {: #3.12.2 }

### REST API

#### Bugfixes

-   Backported a fix for on-demand sync/migration of repositories that don't have sha256 checksums.
    [#8652](https://pulp.plan.io/issues/8652)

### Plugin API

No significant changes.

## 3.12.1 (2021-04-20) {: #3.12.1 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Added RepositoryVersionRelatedField to the plugin API.
    [#8580](https://pulp.plan.io/issues/8580)

## 3.12.0 (2021-04-08) {: #3.12.0 }

### REST API

#### Features

-   Add support for automatic publishing and distributing.
    [#7626](https://pulp.plan.io/issues/7626)
-   Add a warning at startup time if there are remote artifacts with checksums but no allowed checksums.
    [#7985](https://pulp.plan.io/issues/7985)
-   Added support in content app for properly handling unknown or forbidden digest errors.
    [#7989](https://pulp.plan.io/issues/7989)
-   Added sync check that raises error when only forbidden checksums are found for on-demand content.
    [#8423](https://pulp.plan.io/issues/8423)
-   Added ability for users to delete repo version 0 as long as they still have at least one repo
    version for their repo.
    [#8454](https://pulp.plan.io/issues/8454)

#### Bugfixes

-   Added asynchronous tasking to the Update and Delete endpoints of PulpExporter to provide proper locking on resources.
    [#7438](https://pulp.plan.io/issues/7438)
-   Fixed a scenario where canceled tasks could be marked failed.
    [#7980](https://pulp.plan.io/issues/7980)
-   Taught `PulpImport` correct way to find and import `RepositoryVersions`. Previous
    implementation only worked for `RepositoryVersions` that were the 'current' version
    of the exported `Repository`.
    [#8116](https://pulp.plan.io/issues/8116)
-   Fixed a race condition that sometimes surfaced during handling of reserved resources.
    [#8352](https://pulp.plan.io/issues/8352)
-   Made digest and size sync erros more helpful by logging url of the requested files.
    [#8357](https://pulp.plan.io/issues/8357)
-   Fixed artifact-stage to handle an edge-case when multiple multi-artifact content, from different remotes, is in a single batch.
    [#8377](https://pulp.plan.io/issues/8377)
-   Fixed Azure artifacts download.
    [#8427](https://pulp.plan.io/issues/8427)
-   Fixed bug during sync where a unique constraint violation for `Content` would raise an "X matching
    query does not exist" error.
    [#8430](https://pulp.plan.io/issues/8430)
-   Fix artifact checksum check to not check on-demand content.
    [#8445](https://pulp.plan.io/issues/8445)
-   Fixed a bug where the existence of PublishedMetadata caused `LookupError` when querying `/pulp/api/v3/content/`
    [#8447](https://pulp.plan.io/issues/8447)
-   Distributions are now viewable again at the base url of the content app
    [#8475](https://pulp.plan.io/issues/8475)
-   Fixed a path in artifact_stages that could lead to sync-failures in pulp_container.
    [#8489](https://pulp.plan.io/issues/8489)

#### Improved Documentation

-   Update docs with guide how to change 'ALLOWED_CONTENT_CHECKSUMS' setting using 'pulpcore-manager handle-artifact-checksums --report' if needed.
    [#8325](https://pulp.plan.io/issues/8325)

#### Removals

-   The Update and Delete endpoints of Exporters changed to now return 202 with tasks.
    [#7438](https://pulp.plan.io/issues/7438)
-   Deprecation warnings are now being logged by default if the log level includes WARNING. This can be
    disabled by adjusting the log level of `pulpcore.deprecation`. See the deprecation docs for more
    information.
    [#8499](https://pulp.plan.io/issues/8499)

#### Misc

-   [#8450](https://pulp.plan.io/issues/8450)

### Plugin API

#### Features

-   Added a new callback method to `Repository` named `on_new_version()`, which runs when a new repository version has been created. This can be used for e.g. automatically publishing or distributing a new repository version after it has been created.
    [#7626](https://pulp.plan.io/issues/7626)

-   Added url as optional argument to `DigestValidationError` and `SizeValidationError` exceptions to log urls in the exception message.
    [#8357](https://pulp.plan.io/issues/8357)

-   Added the following new objects related to a new `Distribution` MasterModel:

    * `pulpcore.plugin.models.Distribution` - A new MasterModel `Distribution` which replaces the
    `pulpcore.plugin.models.BaseDistribution`. This now contains the `repository`,
    `repository_version`, and `publication` fields on the MasterModel instead of on the detail
    models as was done with `pulpcore.plugin.models.BaseDistribution`.

    * `pulpcore.plugin.serializer.DistributionSerializer` - A serializer plugin writers should use
    with the new `pulpcore.plugin.models.Distribution`.

    * `pulpcore.plugin.viewset.DistributionViewSet` - The viewset that replaces the deprecated
    `pulpcore.plugin.viewset.BaseDistributionViewSet`.

    * `pulpcore.plugin.viewset.NewDistributionFilter` - The filter that pairs with the
    `Distribution` model.
    [#8384](https://pulp.plan.io/issues/8384)

-   Added checksum type enforcement to `pulpcore.plugin.download.BaseDownloader`.
    [#8435](https://pulp.plan.io/issues/8435)

-   Adds the `pulpcore.plugin.tasking.dispatch` interface which replaces the
    `pulpcore.plugin.tasking.enqueue_with_reservation` interface. It is the same except:

    -   It returns a `pulpcore.plugin.models.Task` instead of an RQ object
    -   It does not support the `options` keyword argument

    Additionally the `pulpcore.plugin.viewsets.OperationPostponedResponse` was updated to support both
    the `dispatch` and `enqueue_with_reservation` interfaces.
    [#8496](https://pulp.plan.io/issues/8496)

#### Bugfixes

-   Allow plugins to unset the `queryset_filtering_required_permission` attribute in `NamedModelViewSet`.
    [#8438](https://pulp.plan.io/issues/8438)

#### Removals

-   Removed checksum type filtering from `pulpcore.plugin.models.Remote.get_downloader` and `pulpcore.plugin.stages.DeclarativeArtifact.download`.
    [#8435](https://pulp.plan.io/issues/8435)

#### Deprecations

-   The following objects were deprecated:

    * `pulpcore.plugin.models.BaseDistribution` -- Instead use
    `pulpcore.plugin.models.Distribution`.

    * `pulpcore.plugin.viewset.BaseDistributionViewSet` -- Instead use
    `pulpcore.plugin.viewset.DistributionViewSet`.

    * `pulpcore.plugin.serializer.BaseDistributionSerializer` -- Instead use
    `pulpcore.plugin.serializer.DistributionSerializer`.

    * `pulpcore.plugin.serializer.PublicationDistributionSerializer` -- Instead use define the
    `publication` field directly on your detail distribution object. See the docstring for
    `pulpcore.plugin.serializer.DistributionSerializer` for an example.

    * `pulpcore.plugin.serializer.RepositoryVersionDistributionSerializer` -- Instead use define the
    `repository_version` field directly on your detail distribution object. See the docstring for
    `pulpcore.plugin.serializer.DistributionSerializer` for an example.

    * `pulpcore.plugin.viewset.DistributionFilter` -- Instead use
    `pulpcore.plugin.viewset.NewDistributionFilter`.

    !!! note
        You will have to define a migration to move your data from
        `pulpcore.plugin.models.BaseDistribution` to `pulpcore.plugin.models.Distribution`. See the
        pulp_file migration 0009 as a reference example.

    [#8385](https://pulp.plan.io/issues/8385)

-   Deprecated the `pulpcore.plugin.tasking.enqueue_with_reservation`. Instead use the
    `pulpcore.plugin.tasking.dispatch` interface.
    [#8496](https://pulp.plan.io/issues/8496)

-   The usage of non-JSON serializable types of `args` and `kwargs` to tasks is deprecated. Future
    releases of pulpcore may discontinue accepting complex argument types. Note, UUID objects are not
    JSON serializable. A deprecated warning is logged if a non-JSON serializable is used.
    [#8505](https://pulp.plan.io/issues/8505)

## 3.11.2 (2021-05-25) {: #3.11.2 }

### REST API

#### Bugfixes

-   Skip allowed content checks on collectstatic
    (backported from #8711)
    [#8712](https://pulp.plan.io/issues/8712)
-   Fixed cleanup of UploadChunks when their corresponding Upload is deleted.
    (backported from #7316)
    [#8757](https://pulp.plan.io/issues/8757)
-   Fixed compatibility with Django 2.2 LTS. Pulp now requires Django~=2.2.23
    (backported from #8691)
    [#8758](https://pulp.plan.io/issues/8758)
-   Pinned click~=7.1.2 to ensure RQ is compatible with it.
    [#8767](https://pulp.plan.io/issues/8767)

### Plugin API

No significant changes.

## 3.11.1 (2021-04-29) {: #3.11.1 }

### REST API

#### Bugfixes

-   Fixed a race condition that sometimes surfaced during handling of reserved resources.
    [#8632](https://pulp.plan.io/issues/8632)
-   Handled a tasking race condition where cleaning up resource reservations sometimes raised an IntegrityError.
    [#8648](https://pulp.plan.io/issues/8648)

### Plugin API

#### Bugfixes

-   Allow plugins to unset the `queryset_filtering_required_permission` attribute in `NamedModelViewSet`.
    [#8444](https://pulp.plan.io/issues/8444)

## 3.11.0 (2021-03-15) {: #3.11.0 }

### REST API

#### Features

-   Raise error when syncing content with a checksum not included in `ALLOWED_CONTENT_CHECKSUMS`.
    [#7854](https://pulp.plan.io/issues/7854)
-   User can evaluate how many content units are affected with checksum type change with 'pulpcore-manager handle-artifact-checksums --report'.
    [#7986](https://pulp.plan.io/issues/7986)
-   The fields `proxy_username` and `proxy_password` have been added to remotes.
    Credentials can no longer be specified as part of the `proxy_url`.
    A data migration will move the proxy auth information on existing remotes to the new fields.
    [#8167](https://pulp.plan.io/issues/8167)
-   Added the `WORKER_TTL` setting, that specifies the interval a worker is considered missing after its last heartbeat.
    [#8291](https://pulp.plan.io/issues/8291)
-   Due to the removal of `md5` and `sha1` from the `ALLOWED_CONTENT_CHECKSUMS` setting, every
    system that had any Artifacts synced in in prior to 3.11 will have to run the `pulpcore-manager handle-content-checksums` command. A data migration is provided with 3.11 that will run this
    automatically as part of the `pulpcore-manager migrate` command all upgrades must run anyway.
    [#8322](https://pulp.plan.io/issues/8322)

#### Bugfixes

-   Fixed a bug experienced by the migration plugin where all content objects are assumed to have a
    remote associated with them.
    [#7876](https://pulp.plan.io/issues/7876)

-   Restored inadvertently-changed content-guards API to its correct endpoint.

    In the process of adding generic list-endpoints, the /pulp/api/v3/contentguards
    API was inadvertently rehomed to /pulp/api/v3/content_guards. This change restores
    it to its published value.
    [#8283](https://pulp.plan.io/issues/8283)

-   Added headers field to the list of fields in the `RemoteSerializer` base class and marked it optional to make it accessible via the REST api.
    [#8330](https://pulp.plan.io/issues/8330)

-   Fixed AccessPolicy AttributeError.
    [#8395](https://pulp.plan.io/issues/8395)

#### Improved Documentation

-   Removed correlation id feature from tech preview.
    [#7927](https://pulp.plan.io/issues/7927)

-   Removed 'tech preview' label from `handle-artifact-checksums` command.

    `handle-artifact-checksums` is now a fully-supported part of Pulp3.
    [#7928](https://pulp.plan.io/issues/7928)

-   Added a warning banner to the `ALLOWED_CONTENT_CHECKSUMS` setting section indicating the setting
    is not fully enforcing in `pulpcore` code and various plugins.
    [#8342](https://pulp.plan.io/issues/8342)

#### Removals

-   The `component` field of the `versions` section of the status API `` `/pulp/api/v3/status/ `` now
    lists the Django app name, not the Python package name. Similarly the OpenAPI schema at
    `/pulp/api/v3` does also.
    [#8198](https://pulp.plan.io/issues/8198)
-   Removed sensitive fields `username`, `password`, and `client_key` from Remote responses. These
    fields can still be set and updated but will no longer be readable.
    [#8202](https://pulp.plan.io/issues/8202)
-   Adjusted the `ALLOWED_CONTENT_CHECKSUMS` setting to remove `md5` and `sha1` since they are
    insecure. Now, by default, the `ALLOWED_CONTENT_CHECKSUMS` contain `sha224`, `sha256`,
    `sha384`, and `sha512`.
    [#8246](https://pulp.plan.io/issues/8246)

#### Misc

-   [#7797](https://pulp.plan.io/issues/7797), [#7984](https://pulp.plan.io/issues/7984), [#8315](https://pulp.plan.io/issues/8315)

### Plugin API

#### Features

-   Allow developers to use more than one WorkingDirectory() within a task, including nested calls. Tasks will also now use a temporary working directory by default.
    [#7815](https://pulp.plan.io/issues/7815)
-   Added the `pulpcore.app.pulp_hashlib` module which provides the `new` function and ensures only
    allowed hashers listed in `ALLOWED_CONTENT_CHECKSUMS` can be instantiated. Plugin writers should
    use this instead of `hashlib.new` to generate checksum hashers.
    [#7984](https://pulp.plan.io/issues/7984)
-   Add a `get_content` method to `pulpcore.plugin.models.RepositoryVersion` that accepts a
    queryset and returns a list of content in that repository using the given queryset.
    This allows for specific content type to be returned by executing
    `repo_version.get_content(content_qs=MyContentType.objects)`.
    [#8375](https://pulp.plan.io/issues/8375)

#### Improved Documentation

-   Added docs identifying plugin writers to use the `pulpcore.app.pulp_hashlib` module which provides
    the `new` function and ensures only allowed hashers can be instantiated. This should be used in
    place of `hashlib.new`.
    [#7984](https://pulp.plan.io/issues/7984)
-   The use of `tempdir.TemporaryDirectory` in tasks has been documented.
    [#8231](https://pulp.plan.io/issues/8231)

#### Removals

-   Adjusted the `ALLOWED_CONTENT_CHECKSUMS` setting to remove `md5` and `sha1` since they are
    insecure. Now, by default, the `ALLOWED_CONTENT_CHECKSUMS` contain `sha224`, `sha256`,
    `sha384`, and `sha512`.
    [#8246](https://pulp.plan.io/issues/8246)
-   Removed unused get_plugin_storage_path method.
    [#8343](https://pulp.plan.io/issues/8343)
-   It is not longer possible to address AccessPolicy via the viewset's classname. Viewset's urlpattern should be used instead.
    [#8397](https://pulp.plan.io/issues/8397)
-   Removed deprecated key field returned by the signing service.
    Plugin writers must now refer directly to the public_key field on the signing service object.
    [#8398](https://pulp.plan.io/issues/8398)

#### Deprecations

-   `pulpcore.plugin.tasking.WorkingDirectory` has been deprecated.
    [#8231](https://pulp.plan.io/issues/8231)

## 3.10.0 (2021-02-04) {: #3.10.0 }

### REST API

#### Features

-   Change the default deployment layout

    This changes the default deployment layout. The main change is that MEDIA_ROOT gets its own
    directory. This allows limiting the file permissions in a shared Pulp 2 + Pulp 3 deployment and the
    SELinux file contexts. Another benefit is compatibility with django_extensions' unreferenced_files
    command which lists all files in MEDIA_ROOT that are not in the database.

    Other paths are kept on the same absolute paths. The documentation is updated to show the latest
    best practices.
    [#7178](https://pulp.plan.io/issues/7178)

-   Added general endpoints to list `Content`, `ContentGuards`, and `Repositories`.
    [#7204](https://pulp.plan.io/issues/7204)

-   Added /importers/core/pulp/import-check/ to validate import-parameters.
    [#7549](https://pulp.plan.io/issues/7549)

-   Added a new field called public_key to SigningService. This field preserves the value of the public
    key. In addition to that, the field fingerprint was introduced as well. This field identifies the
    public key.
    [#7700](https://pulp.plan.io/issues/7700)

-   Added possibility to filter users and groups by various fields.
    [#7975](https://pulp.plan.io/issues/7975)

-   Added pulp_labels to allow users to add key/value data to objects.
    [#8065](https://pulp.plan.io/issues/8065)

-   Added `pulp_label_select` filter to allow users to filter by labels.
    [#8067](https://pulp.plan.io/issues/8067)

-   Added optional headers field to the aiohttp ClientSession.
    [#8083](https://pulp.plan.io/issues/8083)

-   Allow querying names on the api using name__icontains, name__contains and name__startswith query parameters.
    [#8094](https://pulp.plan.io/issues/8094)

-   Added RBAC to the endpoint for managing groups.
    [#8159](https://pulp.plan.io/issues/8159)

-   Added RBAC to the endpoint for managing group users.
    [#8160](https://pulp.plan.io/issues/8160)

-   Added the `AccessPolicy.customized` field which if `True` indicates a user has modified the
    default AccessPolicy.
    [#8182](https://pulp.plan.io/issues/8182)

-   Added filtering for access policies.
    [#8189](https://pulp.plan.io/issues/8189)

-   As an authenticated user I can create and view artifacts.
    [#8193](https://pulp.plan.io/issues/8193)

#### Bugfixes

-   Fixed bug where duplicate artifact error message was nondeterministic in displaying different error
    messages with different checksum types. Also, updated duplicate artifact error message to be more
    descriptive.
    [#3387](https://pulp.plan.io/issues/3387)
-   Fixed Pulp import/export bug that occurs when sha384 or sha512 is not in `ALLOWED_CONTENT_CHECKSUMS`.
    [#7836](https://pulp.plan.io/issues/7836)
-   X-CSRFToken is not sent through ajax requests (PUT) in api.html. Fixed by setting the right value in
    the JS code.
    [#7888](https://pulp.plan.io/issues/7888)
-   Provide a mechanism to automatically resolve issues and prevent deadlocks when Redis experiences data loss (such as a restart).
    [#7912](https://pulp.plan.io/issues/7912)
-   Silence unnecessary log messages from django_guid which were spamming up the logs.
    [#7982](https://pulp.plan.io/issues/7982)
-   Changed the default permission class to `IsAdminUser` to protect endpoints not yet guarded by an access policy from users without permission.
    [#8018](https://pulp.plan.io/issues/8018)
-   Fixed apidoc bug, where model and object permissions on groups overlapped.
    [#8033](https://pulp.plan.io/issues/8033)
-   Fixed the viewset_name used by access policy for the cases when parent_viewset is involved.
    [#8152](https://pulp.plan.io/issues/8152)
-   Made the viewset_name property of access policies read only.
    [#8185](https://pulp.plan.io/issues/8185)

#### Improved Documentation

-   Added a description of the common filesystem layout in the deployment section.
    [#7750](https://pulp.plan.io/issues/7750)
-   Updated the reference to the new location of pulplift at the installer repository in the development section.
    [#7878](https://pulp.plan.io/issues/7878)
-   Add links to plugin docs into docs.pulpproject.org.
    [#8131](https://pulp.plan.io/issues/8131)
-   Added documentation for labels.
    [#8157](https://pulp.plan.io/issues/8157)

#### Misc

-   [#8203](https://pulp.plan.io/issues/8203)

### Plugin API

#### Features

-   Add `rate_limit` option to `Remote`
    [#7965](https://pulp.plan.io/issues/7965)
-   Made DistributionFilter accessible to plugin writers.
    [#8059](https://pulp.plan.io/issues/8059)
-   Adding `Label` and `LabelSerializer` to the plugin api.
    [#8065](https://pulp.plan.io/issues/8065)
-   Added `LabelSelectFilter` to filter resources by labels.
    [#8067](https://pulp.plan.io/issues/8067)
-   Added ReadOnlyRepositoryViewset to the plugin API.
    [#8103](https://pulp.plan.io/issues/8103)
-   Added NAME_FILTER_OPTIONS to the plugin API to gain more consistency across plugins when filter by name or similar CharFields.
    [#8117](https://pulp.plan.io/issues/8117)
-   Added has_repo_attr_obj_perms and has_repo_attr_model_or_obj_perms to the global access checks available to all plugins to use.
    [#8161](https://pulp.plan.io/issues/8161)

#### Removals

-   Plugins are required to define a `version` attribute on their subclass of
    `PulpPluginAppConfig`. Starting with pulpcore==3.10, if undefined while Pulp loads, Pulp will
    refuse to start.
    [#7930](https://pulp.plan.io/issues/7930)
-   Changed the default permission class to from `IsAuthenticated` to `IsAdminUser`.
    Any endpoints that should be accessible by all known to the system users need to specify the permission_classes accordingly.
    [#8018](https://pulp.plan.io/issues/8018)
-   `pulpcore.plugin.models.UnsupportedDigestValidationError` has been removed. Plugins should
    look for this at `pulpcore.plugin.exceptions.UnsupportedDigestValidationError` instead.
    [#8169](https://pulp.plan.io/issues/8169)

#### Deprecations

-   Access to the path of the public key of a signing service was deprecated. The value of the public
    key is now expected to be saved in the model instance as `SigningService.public_key`.
    [#7700](https://pulp.plan.io/issues/7700)
-   The `pulpcore.plugin.storage.get_plugin_storage_path()` method has been deprecated.
    [#7935](https://pulp.plan.io/issues/7935)

## 3.9.1 (2021-01-21) {: #3.9.1 }

### REST API

#### Removals

-   CHUNKED_UPLOAD_DIR was converted to a relative path inside MEDIA_ROOT.
    [#8099](https://pulp.plan.io/issues/8099)

### Plugin API

No significant changes.

## 3.9.0 (2020-12-07) {: #3.9.0 }

### REST API

#### Features

-   Made uploaded chunks to be stored as separate files in the default storage. This feature removes
    the need for a share storage of pulp api nodes, as the chunks are now stored individually in the
    shared storage and are therefore accessible by all nodes.
    [#4498](https://pulp.plan.io/issues/4498)

-   Add support for logging messages with a correlation id that can either be autogenerated or passed in
    with a `Correlation-ID` header. This feature is provided as a tech preview in pulpcore 3.9.
    [#4689](https://pulp.plan.io/issues/4689)

-   Added progress reporting for pulp imports.
    [#6559](https://pulp.plan.io/issues/6559)

-   Exposed `aiohttp.ClientTimeout` fields in `Remote` as `connect_timeout`,
    `sock_connect_timeout`, `sock_read_timeout`, and `total_timeout`.

    This replaces the previous hard-coded 600 second timeout for sock_connect and sock_read,
    giving per-`Remote` control of all four `ClientTimeout` fields to the user.
    [#7201](https://pulp.plan.io/issues/7201)

-   Enabled users to add checksums to ALLOWED_CONTENT_CHECKSUMS by allowing them to populate checksums
    with handle-artifact-checksums command.
    [#7561](https://pulp.plan.io/issues/7561)

-   Added version information to api docs.
    [#7569](https://pulp.plan.io/issues/7569)

-   Made signing services to be immutable. This requires content signers to create a new signing
    service explicitly when a change occurs.
    [#7701](https://pulp.plan.io/issues/7701)

-   Added support for repairing Pulp by detecting and redownloading missing or corrupted artifact files. Sending a POST request to `/pulp/api/v3/repair/` will trigger a task that scans all artifacts for missing and corrupted files in Pulp storage, and will attempt to redownload them from the original remote. Specifying `verify_checksums=False` when POSTing to the same endpoint will skip checking the hashes of the files (corruption detection) and will instead just look for missing files.

    The `verify_checksums` POST parameter was added to the existing "repository version repair" endpoint as well.
    [#7755](https://pulp.plan.io/issues/7755)

-   Added check to prevent Pulp to start if there are Artifacts with forbidden checksums.
    [#7914](https://pulp.plan.io/issues/7914)

#### Bugfixes

-   Fixed a serious bug data integrity bug where some Artifact files could be silently deleted from storage in specific circumstances.
    [#7676](https://pulp.plan.io/issues/7676)
-   Moved the initial creation of access_policies to post_migrate signal.
    This enforces their existance both with migrate and flush.
    [#7710](https://pulp.plan.io/issues/7710)
-   Fixed incremental export to happen if start_version provided, even if last_export is null.
    [#7716](https://pulp.plan.io/issues/7716)
-   Fixed a file descriptor leak during repository version repair operations.
    [#7735](https://pulp.plan.io/issues/7735)
-   Fixed bug where exporter directory existed and was writable but not owned by worker process and thus
    not chmod-able.
    [#7829](https://pulp.plan.io/issues/7829)
-   Properly namespaced the viewset_name in AccessPolicy to avoid naming conflicts in plugins.
    [#7845](https://pulp.plan.io/issues/7845)
-   Update jquery version from 3.3.1 to 3.5.1 in API.html template. It is the version provided by djangorestframework~=3.12.2
    [#7850](https://pulp.plan.io/issues/7850)
-   Prevented a Redis failure scenario from causing the tasking system to back up due to "tasking system
    locks" not being released, even on worker restart.
    [#7907](https://pulp.plan.io/issues/7907)
-   Use subclassed plugin downloaders during the pulp repair.
    [#7909](https://pulp.plan.io/issues/7909)

#### Improved Documentation

-   Added requirement to record a demo with PRs of substantial change.
    [#7703](https://pulp.plan.io/issues/7703)
-   Removed outdated reference stating Pulp did not have an SELinux policy.
    [#7793](https://pulp.plan.io/issues/7793)

#### Removals

-   The local file system directory used for uploaded chunks is specified by the setting
    CHUNKED_UPLOAD_DIR. Users are encouraged to remove all uncommitted uploaded files before
    applying this change.
    [#4498](https://pulp.plan.io/issues/4498)

#### Misc

-   [#7690](https://pulp.plan.io/issues/7690), [#7753](https://pulp.plan.io/issues/7753), [#7902](https://pulp.plan.io/issues/7902), [#7890](https://pulp.plan.io/issues/7890)

### Plugin API

#### Features

-   Added pre_save hook to Artifact to enforce checksum rules implied by ALLOWED_CONTENT_CHECKSUMS.
    [#7696](https://pulp.plan.io/issues/7696)
-   Enabled plugin writers to retrieve a request object from a serializer when look ups are
    performed from within the task serializer.
    [#7718](https://pulp.plan.io/issues/7718)
-   Expose ProgressReportSerializer through pulpcore.plugin
    [#7759](https://pulp.plan.io/issues/7759)
-   Allowed plugin writers to access the models Upload and UploadChunk
    [#7833](https://pulp.plan.io/issues/7833)
-   Exposed `pulpcore.plugin.constants.ALL_KNOWN_CONTENT_CHECKSUMS`.
    [#7897](https://pulp.plan.io/issues/7897)
-   Added `UnsupportedDigestValidationError` to `pulpcore.plugins.exceptions`. Going
    forward, plugin authors can expect to find all unique exceptions under
    `pulpcore.plugin.exceptions`.
    [#7908](https://pulp.plan.io/issues/7908)

#### Deprecations

-   Plugins are encouraged to define a `version` attribute on their subclass of
    `PulpPluginAppConfig`. If undefined while Pulp loads a warning is now shown to encourage plugin
    writers to implement this attribute, which will be required starting in pulpcore==3.10.
    [#6671](https://pulp.plan.io/issues/6671)

-   Using the ViewSet's classname to identify its AccessPolicy has been deprecated and is slated for removal in 3.10.
    Instead the urlpattern is supposed to be used.

    Plugins with existing AccessPolicies should add a data migration to rename their AccessPolicies:

    ::

    :   access_policy = AccessPolicy.get(viewset_name="MyViewSet")
        access_policy.viewset_name = "objectclass/myplugin/myclass"
        access_policy.save()

    [#7845](https://pulp.plan.io/issues/7845)

-   The `pulpcore.plugin.models.UnsupportedDigestValidationError` is being deprecated and
    will be removed in 3.10.

    It can now be found at `pulpcore.plugin.exceptions.UnsupportedDigestValidationError`
    instead; please change any code that imports it to access it from its new location.
    [#7908](https://pulp.plan.io/issues/7908)

## 3.8.1 (2020-10-30) {: #3.8.1 }

### REST API

#### Bugfixes

-   Fixed a serious bug data integrity bug where some Artifact files could be silently deleted from storage in specific circumstances. (Backported from [#7676](https://pulp.plan.io/issues/7676))
    [#7758](https://pulp.plan.io/issues/7758)

### Plugin API

No significant changes.

## 3.8.0 (2020-10-20) {: #3.8.0 }

### REST API

#### Features

-   Added check to prevent users from adding checksums to `ALLOWED_CONTENT_CHECKSUMS` if there are
    Artifacts without those checksums.
    [#7487](https://pulp.plan.io/issues/7487)
-   Django admin site URL is configurable via ADMIN_SITE_URL settings parameter.
    [#7637](https://pulp.plan.io/issues/7637)
-   Always set a default for DJANGO_SETTINGS_MODULE. This means the services files don't need to.
    [#7720](https://pulp.plan.io/issues/7720)

#### Bugfixes

-   Fix a warning inappropriately logged when cancelling a task.
    [#4559](https://pulp.plan.io/issues/4559)
-   When a task is canceled, we now set the state of all incomplete "progress reports" to canceled as well.
    [#4921](https://pulp.plan.io/issues/4921)
-   Properly handle duplicate content during synchronization and migration from Pulp 2 to 3.
    [#7147](https://pulp.plan.io/issues/7147)
-   Enable content streaming for RepositoryVersionDistribution
    [#7568](https://pulp.plan.io/issues/7568)
-   Change dropped DRF filter to django urlize.
    [#7634](https://pulp.plan.io/issues/7634)
-   Added some more files to MANIFEST.in.
    [#7656](https://pulp.plan.io/issues/7656)
-   Updated dynaconf requirement to prevent use of older buggy versions.
    [#7682](https://pulp.plan.io/issues/7682)

#### Improved Documentation

-   Updated examples of auto-distribution.
    [#5247](https://pulp.plan.io/issues/5247)
-   Improved testing section in Pulp contributor docs.
    Mentioned prestart, pminio, pfixtures and phelp.
    [#7475](https://pulp.plan.io/issues/7475)
-   Fix an erroneous API endpoint in the "upload and publish" workflow documentation.
    [#7655](https://pulp.plan.io/issues/7655)
-   Documented that we don't support backporting migrations.
    [#7657](https://pulp.plan.io/issues/7657)

### Plugin API

#### Improved Documentation

-   Removed mentions of semver in the plugin API docs, and replaced them with a link to the deprecation policy where appropriate.
    [#7555](https://pulp.plan.io/issues/7555)

## 3.7.9 (2021-11-30) {: #3.7.9 }

### REST API

#### Bugfixes

-   Prevented a Redis failure scenario from causing the tasking system to back up due to "tasking system
    locks" not being released, even on worker restart.
    (backported from #7907)
    [#9547](https://pulp.plan.io/issues/9547)
-   Prevent proxy credentials to be passed to aiohttp, so they no longer appear in stack traces.
    This is a rewritten backport of #8167.
    [#9573](https://pulp.plan.io/issues/9573)

### Plugin API

No significant changes.

## 3.7.8 (2021-08-24) {: #3.7.8 }

### REST API

#### Bugfixes

-   In stages-pipeline and new-version sanity-checks, added full error-info on path-problems.
    (backported from #8133)
    [#9227](https://pulp.plan.io/issues/9227)

### Plugin API

#### Bugfixes

-   Added kwarg to RemoteArtifactSaver init to allow enabling handling of rare error edge-case.

    fix_mismatched_remote_artifacts=True enables workaround for a failure-scenario that
    (so far) is only encountered by pulp_rpm. Current behavior is the default.
    (backported from #8133)
    [#9227](https://pulp.plan.io/issues/9227)

## 3.7.7 (2021-07-26) {: #3.7.7 }

### REST API

#### Bugfixes

-   Fixed a bug, where new tasks were assigned to dead workers.
    (backported from #8779)
    [#9118](https://pulp.plan.io/issues/9118)

### Plugin API

No significant changes.

## 3.7.6 (2021-04-29) {: #3.7.6 }

### REST API

#### Bugfixes

-   Backported a fix for on-demand sync/migration of repositories that don't have sha256 checksums.
    [#8651](https://pulp.plan.io/issues/8651)

### Plugin API

No significant changes.

## 3.7.5 (2021-04-12) {: #3.7.5 }

### REST API

#### Bugfixes

-   Backported fixes for artifact handling important for pulp-2to3-migration plugin use cases.
    [#8485](https://pulp.plan.io/issues/8485)
-   Allowed to use PyYAML 5.4 which contains a patch for [CVE-2020-14343 <https://nvd.nist.gov/vuln/detail/CVE-2020-14343]{.title-ref}.
    [#8540](https://pulp.plan.io/issues/8540)

### Plugin API

No significant changes.

## 3.7.4 (2021-03-15) {: #3.7.4 }

### REST API

#### Bugfixes

-   No longer load .env files. They are not used by Pulp but potentially can break the setup.
    [#8373](https://pulp.plan.io/issues/8373)

### Plugin API

No significant changes.

## 3.7.3 (2020-10-28) {: #3.7.3 }

### REST API

#### Bugfixes

-   Fixed a serious bug data integrity bug where some Artifact files could be silently deleted from storage in specific circumstances. (Backported from [#7676](https://pulp.plan.io/issues/7676))
    [#7757](https://pulp.plan.io/issues/7757)

### Plugin API

No significant changes.

## 3.7.2 (2020-10-21) {: #3.7.2 }

### REST API

#### Bugfixes

-   Properly handle duplicate content during synchronization and migration from Pulp 2 to 3.
    [#7702](https://pulp.plan.io/issues/7702)
-   Fixed incremental export to happen if start_version provided, even if last_export is null.
    [#7725](https://pulp.plan.io/issues/7725)

### Plugin API

No significant changes.

## 3.7.1 (2020-09-29) {: #3.7.1 }

### REST API

#### Bugfixes

-   Including functest_requirements.txt on MANIFEST.in
    [#7610](https://pulp.plan.io/issues/7610)

### Plugin API

No significant changes.

## 3.7.0 (2020-09-22) {: #3.7.0 }

### REST API

#### Features

-   Added setting ALLOWED_CONTENT_CHECKSUMS to support limiting the checksum-algorithms Pulp uses.
    [#5216](https://pulp.plan.io/issues/5216)
-   Added progress-reports to the PulpExport task.
    [#6541](https://pulp.plan.io/issues/6541)
-   Improve performance and memory consumption of orphan cleanup.
    [#6581](https://pulp.plan.io/issues/6581)
-   Extra require: s3, azure, prometheus and test
    [#6844](https://pulp.plan.io/issues/6844)
-   Added the toc_info attribute with filename/sha256sum to PulpExport, to enable direct access to the export-TOC.
    [#7221](https://pulp.plan.io/issues/7221)
-   Taught export-process to clean up broken files if the export fails.
    [#7246](https://pulp.plan.io/issues/7246)
-   Added the django-cleanup handlers for removing files stored within FileField
    [#7316](https://pulp.plan.io/issues/7316)
-   Added deprecations section to the changelog.
    [#7415](https://pulp.plan.io/issues/7415)

#### Bugfixes

-   Address some problems with stuck tasks when connection to redis is interrupted.
    [#6449](https://pulp.plan.io/issues/6449)
-   Fixed a bug where creating an incomplete repository version (via canceled or failed task) could cause future operations to fail.
    [#6463](https://pulp.plan.io/issues/6463)
-   Added validation for unknown serializers' fields
    [#7245](https://pulp.plan.io/issues/7245)
-   Fixed: PulpTemporaryFile stored in the wrong location
    [#7319](https://pulp.plan.io/issues/7319)
-   Fixed an edge case where canceled tasks might sometimes be processed and marked completed.
    [#7389](https://pulp.plan.io/issues/7389)
-   Fixed pulp-export scenario where specifying full= could fail silently.
    [#7403](https://pulp.plan.io/issues/7403)
-   Fixed OpenAPI creation response status code to 201
    [#7444](https://pulp.plan.io/issues/7444)
-   The `AccessPolicy.permissions_assignment` can now be null, which some viewset endpoints may
    require.
    [#7448](https://pulp.plan.io/issues/7448)
-   Taught export to insure export-dir was writeable by group as well as owner.
    [#7459](https://pulp.plan.io/issues/7459)
-   Fixed orphan cleanup for subrepositories (e.g. an add-on repository in RPM distribution tree repository).
    [#7460](https://pulp.plan.io/issues/7460)
-   Fixed issue with reserved resources not being displayed for waiting tasks.
    [#7497](https://pulp.plan.io/issues/7497)
-   Fixed broken bindings resulting from drf-spectacular 0.9.13 release.
    [#7510](https://pulp.plan.io/issues/7510)
-   Fix filesystem exports failing due to undefinied `validate_path` method.
    [#7521](https://pulp.plan.io/issues/7521)
-   Fix a bug that prevented users from adding permissions for models have conflicting names across different django apps.
    [#7541](https://pulp.plan.io/issues/7541)

#### Improved Documentation

-   Added pulp 2 obsolete concepts (consumers, applicability).
    [#6255](https://pulp.plan.io/issues/6255)

#### Misc

-   [#7508](https://pulp.plan.io/issues/7508)

### Plugin API

#### Features

-   Enabled the automatic removal of files, which are stored in FileField, when a corresponding
    model's delete() method is invoked
    [#7316](https://pulp.plan.io/issues/7316)
-   Add add_and_remove task to pulpcore.plugin.tasking
    [#7351](https://pulp.plan.io/issues/7351)
-   Added deprecations section to the plugin api changelog.
    [#7415](https://pulp.plan.io/issues/7415)

#### Bugfixes

-   The `AccessPolicy.permissions_assignment` can now be null, which some viewset endpoints may
    require.
    [#7448](https://pulp.plan.io/issues/7448)

#### Improved Documentation

-   Added an example how to use a serializer to create validated objects.
    [#5927](https://pulp.plan.io/issues/5927)
-   Document the URLField OpenAPI issue
    [#6828](https://pulp.plan.io/issues/6828)
-   Added all exported models to the autogenerated API reference.
    [#7045](https://pulp.plan.io/issues/7045)
-   Updated docs recommending plugins to rely on a 1-release deprecation process for backwards
    incompatible changes in the `pulpcore.plugin`.
    [#7413](https://pulp.plan.io/issues/7413)
-   Adds plugin writer docs on how to ship snippets which override default webserver routes provided by
    the installer.
    [#7471](https://pulp.plan.io/issues/7471)
-   Revises the "installation plugin custom tasks" documentation to reflect that plugin writers can
    contribute their custom installation needs directly to the installer.
    [#7523](https://pulp.plan.io/issues/7523)

#### Misc

-   [#7270](https://pulp.plan.io/issues/7270)

## 3.6.5 (2020-10-28) {: #3.6.5 }

### REST API

#### Bugfixes

-   Fixed a bug where creating an incomplete repository version (via canceled or failed task) could cause future operations to fail. (Backported from [#6463](https://pulp.plan.io/issues/6463))
    [#7737](https://pulp.plan.io/issues/7737)

### Plugin API

No significant changes.

## 3.6.4 (2020-09-23) {: #3.6.4 }

### REST API

#### Bugfixes

-   Fixed broken bindings resulting from drf-spectacular 0.9.13 release.
    [#7510](https://pulp.plan.io/issues/7510)

### Plugin API

No significant changes.

## 3.6.3 (2020-09-04) {: #3.6.3 }

### REST API

#### Misc

-   [#7450](https://pulp.plan.io/issues/7450)

### Plugin API

No significant changes.

## 3.6.2 (2020-09-02) {: #3.6.2 }

### REST API

No significant changes.

### Plugin API

#### Bugfixes

-   Remove customized operation_id from OrphansView
    [#7446](https://pulp.plan.io/issues/7446)

## 3.6.1 (2020-09-01) {: #3.6.1 }

### REST API

#### Bugfixes

-   Fixing groups API validation
    [#7329](https://pulp.plan.io/issues/7329)

#### Improved Documentation

-   Updated Pypi installation step.
    [#6305](https://pulp.plan.io/issues/6305)
-   Added hardware requirements.
    [#6856](https://pulp.plan.io/issues/6856)

#### Misc

-   [#7229](https://pulp.plan.io/issues/7229)

### Plugin API

#### Bugfixes

-   Fix custom operation_id's from OpenAPI
    [#7341](https://pulp.plan.io/issues/7341)
-   OpenAPI: do not discard components without properties
    [#7347](https://pulp.plan.io/issues/7347)

## 3.6.0 (2020-08-13) {: #3.6.0 }

### REST API

#### Features

-   Added table-of-contents to export and gave import a toc= to find/reassemble pieces on import.
    [#6737](https://pulp.plan.io/issues/6737)

-   Added ability to associate a Remote with a Repository so users no longer have to specify Remote when
    syncing.
    [#7015](https://pulp.plan.io/issues/7015)

-   The /pulp/api/v3/access_policies/ endpoint is available for reading and modifying the AccessPolicy
    used for Role Based Access Control for all Pulp endpoints. This allows for complete customization
    of the Authorization policies.

    NOTE: this endpoint is in tech-preview and may change in backwards incompatible ways in the future.
    [#7160](https://pulp.plan.io/issues/7160)

-   The /pulp/api/v3/access_policies/ endpoint also includes a permissions_assignment section which
    customizes the permissions assigned to new objects. This allows for complete customization for how
    new objects work with custom define Authorization policies.
    [#7210](https://pulp.plan.io/issues/7210)

-   The /pulp/api/v3/users/ endpoint is available for reading the Users, Group membership, and
    Permissions.

    NOTE: this endpoint is in tech-preview and may change in backwards incompatible ways in the future.
    [#7231](https://pulp.plan.io/issues/7231)

-   The /pulp/api/v3/groups/ endpoint is available for reading the Groups, membership, and
    Permissions.

    NOTE: this endpoint is in tech-preview and may change in backwards incompatible ways in the future.
    [#7232](https://pulp.plan.io/issues/7232)

-   The /pulp/api/v3/tasks/ endpoint now provides a user-isolation behavior for non-admin users. This
    policy is controllable at the /pulp/api/v3/access_policies/ endpoint.

    NOTE: The user-isolation behavior is in "tech preview" and production systems are recommended to
    continue using the build-in `admin` user only.
    [#7301](https://pulp.plan.io/issues/7301)

-   Extended endpoint /pulp/api/v3/groups/:pk/users to add and remove users from a group.

    NOTE: this endpoint is in tech-preview and may change in backwards incompatible ways in the future.
    [#7310](https://pulp.plan.io/issues/7310)

-   Extended endpoints /pulp/api/v3/groups/:pk/model_permissions and
    /pulp/api/v3/groups/:pk/object_permissions to add and remove permissions from a group.

    NOTE: this endpoint is in tech-preview and may change in backwards incompatible ways in the future.
    [#7311](https://pulp.plan.io/issues/7311)

#### Bugfixes

-   WorkerDirectory.delete() no longer recursively trys to delete itself when encountering a permission error
    [#6504](https://pulp.plan.io/issues/6504)
-   Stopped preventing removal of PulpExport/Exporter when last-export existed.
    [#6555](https://pulp.plan.io/issues/6555)
-   First time on demand content requests appear in the access log.
    [#7002](https://pulp.plan.io/issues/7002)
-   Fixed denial of service caused by extra slashes in content urls.
    [#7066](https://pulp.plan.io/issues/7066)
-   Set a default DJANGO_SETTINGS_MODULE env var in content app
    [#7179](https://pulp.plan.io/issues/7179)
-   Added plugin namespace to openapi href identifier.
    [#7209](https://pulp.plan.io/issues/7209)
-   By default, html in field descriptions filtered out in REST API docs unless 'include_html' is set.
    [#7299](https://pulp.plan.io/issues/7299)
-   Fixed plugin filtering in bindings to work independently from "bindings" parameter.
    [#7306](https://pulp.plan.io/issues/7306)

#### Improved Documentation

-   Made password variable consistent with Ansible installer example playbook
    [#7065](https://pulp.plan.io/issues/7065)
-   Fixed various docs bugs in the pulpcore docs.
    [#7090](https://pulp.plan.io/issues/7090)
-   Adds documentation about SSL configuration requirements for reverse proxies.
    [#7285](https://pulp.plan.io/issues/7285)
-   Fixed REST API docs.
    [#7292](https://pulp.plan.io/issues/7292)

#### Deprecations and Removals

-   Removed unnecessary fields from the import/export transfer.
    [#6515](https://pulp.plan.io/issues/6515)

-   Upgrading the api documentation from OpenAPI v2 to OpenAPI v3.

    - Methods signatures for bindings may change.
    [#7108](https://pulp.plan.io/issues/7108)

-   Changed default `download_concurrency` on Remotes from 20 to 10 to avoid connection problems. Also
    updated existing Remotes with `download_concurrency` of 20 to 10.
    [#7212](https://pulp.plan.io/issues/7212)

#### Misc

-   [#6807](https://pulp.plan.io/issues/6807), [#7142](https://pulp.plan.io/issues/7142), [#7196](https://pulp.plan.io/issues/7196)

### Plugin API

#### Features

-   Adding PulpTemporaryFile for handling temporary files between the viewset and triggered tasks
    [#6749](https://pulp.plan.io/issues/6749)

-   `RepositorySyncURLSerializer` will now check remote on the repository before it raises an
    exception if the remote param is not set.
    [#7015](https://pulp.plan.io/issues/7015)

-   Added a hook on `Repository` called `artifacts_for_version()` that plugins can override to
    modify the logic behind `RepositoryVersion.artifacts`. For now, this is used when exporting
    artifacts.
    [#7021](https://pulp.plan.io/issues/7021)

-   Enabling plugin writers to have more control on HttpDownloader response codes 400+
    by subclassing HttpDownloader and overwriting raise_for_status method
    [#7117](https://pulp.plan.io/issues/7117)

-   BaseModel now inherits from LifecycleModel provided by django-lifecycle allowing any subclass
    to also use it instead of signals.
    [#7151](https://pulp.plan.io/issues/7151)

-   A new pulpcore.plugin.models.AutoDeleteObjPermsMixin object can be added to models to
    automatically delete all user and group permissions for an object just before the object is deleted.
    This provides an easy cleanup mechanism and can be added to models as a mixin. Note that your model
    must support django-lifecycle to use this mixin.
    [#7157](https://pulp.plan.io/issues/7157)

-   A new model pulpcore.plugin.models.AccessPolicy is available to store AccessPolicy statements in
    the database. The model's statements field stores the list of policy statements as a JSON field.
    The name field stores the name of the Viewset the AccessPolicy is protecting.

    Additionally, the pulpcore.plugin.access_policy.AccessPolicyFromDB is a drf-access-policy which
    viewsets can use to protect their viewsets with. See the *viewset_enforcement* for more
    information on this.
    [#7158](https://pulp.plan.io/issues/7158)

-   Adds the TaskViewSet and TaskGroupViewSet objects to the plugin api.
    [#7187](https://pulp.plan.io/issues/7187)

-   Enabled plugin writers to create immutable repository ViewSets
    [#7191](https://pulp.plan.io/issues/7191)

-   A new pulpcore.plugin.models.AutoAddObjPermsMixin object can be added to models to automatically
    add permissions for an object just after the object is created. This is controlled by data saved in
    the permissions_assignment attribute of the pulpcore.plugin.models.AccessPolicy allowing users
    to control what permissions are created. Note that your model must support django-lifecycle to use
    this mixin.
    [#7210](https://pulp.plan.io/issues/7210)

-   Added ability for plugin writers to set a `content_mapping` property on content resources to
    provide a custom mapping of content to repositories.
    [#7252](https://pulp.plan.io/issues/7252)

-   Automatically excluding `pulp_id`, `pulp_created`, and `pulp_last_updated` for
    `QueryModelResources`.
    [#7277](https://pulp.plan.io/issues/7277)

-   Viewsets that subclass `` pulpcore.plugin.viewsets.NamedModelViewSet` can declare the ``queryset_filtering_required_permission`[ class attribute naming the permission required to view
    an object. See the *queryset_scoping* documentation for more information.
    ]{.title-ref}#7300 <<https://pulp.plan.io/issues/7300>>`__

#### Bugfixes

-   Making operation_id unique
    [#7233](https://pulp.plan.io/issues/7233)
-   Making ReDoc OpenAPI summary human readable
    [#7237](https://pulp.plan.io/issues/7237)
-   OpenAPI schema generation from CLI
    [#7258](https://pulp.plan.io/issues/7258)
-   Allow pulpcore.plugin.models.AutoAddObjPermsMixin.add_for_object_creator to skip assignment of
    permissions if there is no known user. This allows endpoints that do not use authorization but still
    create objects in the DB to execute without error.
    [#7312](https://pulp.plan.io/issues/7312)

#### Improved Documentation

-   Omit a view/viewset from the OpenAPI schema
    [#7133](https://pulp.plan.io/issues/7133)
-   Added plugin writer docs for `BaseContentResource`.
    [#7296](https://pulp.plan.io/issues/7296)

#### Deprecations and Removals

-   Newlines in certificate string (ca_cert, client_cert, client_key) on Remotes are not required to be escaped.
    [#6735](https://pulp.plan.io/issues/6735)

-   Replaced drf-yasg with drf-spectacular.

    -   This updates the api documentation to openapi v3.
    -   Plugins may require changes.

    - Methods signatures for bindings may change.
    [#7108](https://pulp.plan.io/issues/7108)

-   Moving containers from pulpcore to pulp-operator
    [#7171](https://pulp.plan.io/issues/7171)

## 3.5.0 (2020-07-08) {: #3.5.0 }

### REST API

#### Features

-   Added start_versions= to export to allow for arbitrary incremental exports.
    [#6763](https://pulp.plan.io/issues/6763)
-   Added GroupProgressReport to track progress in a TaskGroup.
    [#6858](https://pulp.plan.io/issues/6858)
-   Provide a user agent string with all aiohttp requests by default.
    [#6954](https://pulp.plan.io/issues/6954)

#### Bugfixes

-   Fixed 'integer out of range' error during sync by changing RemoteArtifact size field to BigIntegerField.
    [#6717](https://pulp.plan.io/issues/6717)
-   Added a more descriptive error message that is shown when CONTENT_ORIGIN is not properly configured
    [#6771](https://pulp.plan.io/issues/6771)
-   Including requirements.txt on MANIFEST.in
    [#6888](https://pulp.plan.io/issues/6888)
-   Corrected a number of filters to be django-filter-2.3.0-compliant.
    [#6915](https://pulp.plan.io/issues/6915)
-   Locked Content table to prevent import-deadlock.
    [#7073](https://pulp.plan.io/issues/7073)

#### Improved Documentation

-   Updating installation docs
    [#6836](https://pulp.plan.io/issues/6836)
-   Fixed a number of typos in the import/export workflow docs.
    [#6919](https://pulp.plan.io/issues/6919)
-   Fixed docs which claim that admin user has a default password.
    [#6992](https://pulp.plan.io/issues/6992)
-   Fixed broken link to content plugins web page
    [#7017](https://pulp.plan.io/issues/7017)

#### Deprecations and Removals

-   Removes the Write models from the OpenAPI schema.
    Brings back the models that were accidentally removed from the OpenAPI schema in 3.4.0 release.
    [#7087](https://pulp.plan.io/issues/7087)

#### Misc

-   [#6483](https://pulp.plan.io/issues/6483), [#6925](https://pulp.plan.io/issues/6925)

### Plugin API

#### Features

-   Views can specify the tag name with pulp_tag_name
    [#6832](https://pulp.plan.io/issues/6832)
-   Added GroupProgressReport to track progress in a TaskGroup.
    [#6858](https://pulp.plan.io/issues/6858)
-   Exported the symbols serializers.SingleContentArtifactField and files.PulpTemporaryUploadedFile.
    [#7088](https://pulp.plan.io/issues/7088)

---

## 3.4.1 (2020-06-03) {: #3.4.1 }

### REST API

#### Bugfixes

-   Including requirements.txt on MANIFEST.in
    [#6888](https://pulp.plan.io/issues/6888)

### Plugin API

No significant changes.

---

## 3.4.0 (2020-05-27) {: #3.4.0 }

### REST API

#### Features

-   Implemented incremental-exporting for PulpExport.
    [#6136](https://pulp.plan.io/issues/6136)
-   Added support for S3 and other non-filesystem storage options to pulp import/export functionality.
    [#6456](https://pulp.plan.io/issues/6456)
-   Optimized imports by having repository versions processed using child tasks.
    [#6484](https://pulp.plan.io/issues/6484)
-   Added repository type check during Pulp imports.
    [#6532](https://pulp.plan.io/issues/6532)
-   Added version checking to import process.
    [#6558](https://pulp.plan.io/issues/6558)
-   Taught PulpExport to export by RepositoryVersions if specified.
    [#6566](https://pulp.plan.io/issues/6566)
-   Task groups now have an 'all_tasks_dispatched' field which denotes that no more tasks will spawn
    as part of this group.
    [#6591](https://pulp.plan.io/issues/6591)
-   Taught export how to split export-file into chunk_size bytes.
    [#6736](https://pulp.plan.io/issues/6736)

#### Bugfixes

-   Remote fields username and password show up in:
    REST docs, API responses, and are available in the bindings.
    [#6346](https://pulp.plan.io/issues/6346)
-   Fixed a bug, where the attempt to cancel a completed task lead to a strange response.
    [#6465](https://pulp.plan.io/issues/6465)
-   Fixed KeyError during OpenAPI schema generation.
    [#6468](https://pulp.plan.io/issues/6468)
-   Added a missing trailing slash to distribution's base_url
    [#6507](https://pulp.plan.io/issues/6507)
-   Fixed a bug where the wrong kind of error was being raised for href parameters of mismatched types.
    [#6521](https://pulp.plan.io/issues/6521)
-   containers: Fix pulp_rpm 3.3.0 install by replacing the python3-createrepo_c RPM with its build-dependencies, so createrep_c gets installed & built from PyPI
    [#6523](https://pulp.plan.io/issues/6523)
-   Fixed OpenAPI schema for importer and export APIs.
    [#6556](https://pulp.plan.io/issues/6556)
-   Normalized export-file-path for PulpExports.
    [#6564](https://pulp.plan.io/issues/6564)
-   Changed repository viewset to use the general_update and general_delete tasks.
    This fixes a bug where updating specialized fields of a repository was impossible due to using the wrong serializer.
    [#6569](https://pulp.plan.io/issues/6569)
-   Only uses multipart OpenAPI Schema when dealing with file fields
    [#6702](https://pulp.plan.io/issues/6702)
-   Fixed a bug that prevented write_only fields from being present in the API docs and bindings
    [#6775](https://pulp.plan.io/issues/6775)
-   Added proper headers for index.html pages served by content app.
    [#6802](https://pulp.plan.io/issues/6802)
-   Removed Content-Encoding header from pulpcore-content responses.
    [#6831](https://pulp.plan.io/issues/6831)

#### Improved Documentation

-   Adding docs for importing and exporting from Pulp to Pulp.
    [#6364](https://pulp.plan.io/issues/6364)
-   Add some documentation around TaskGroups.
    [#6641](https://pulp.plan.io/issues/6641)
-   Introduced a brief explanation about pulp_installer
    [#6674](https://pulp.plan.io/issues/6674)
-   Added a warning that the REST API is not safe for multi-user use until RBAC is implemented.
    [#6692](https://pulp.plan.io/issues/6692)
-   Updated the required roles names
    [#6758](https://pulp.plan.io/issues/6758)

#### Deprecations and Removals

-   Changed repositories field on `/pulp/api/v3/exporters/core/pulp/` from UUIDs to hrefs.
    [#6457](https://pulp.plan.io/issues/6457)
-   Imports now spawn child tasks which can be fetched via the `child_tasks` field of the import task.
    [#6484](https://pulp.plan.io/issues/6484)
-   Content of ssl certificates and keys changed to be return their full value instead of sha256 through REST API.
    [#6691](https://pulp.plan.io/issues/6691)
-   Replaced PulpExport filename/sha256 fields, with output_info_file, a '<filename>': '<hash>' dictionary.
    [#6736](https://pulp.plan.io/issues/6736)

#### Misc

-   [#5020](https://pulp.plan.io/issues/5020), [#6421](https://pulp.plan.io/issues/6421), [#6477](https://pulp.plan.io/issues/6477), [#6539](https://pulp.plan.io/issues/6539), [#6542](https://pulp.plan.io/issues/6542), [#6544](https://pulp.plan.io/issues/6544), [#6572](https://pulp.plan.io/issues/6572), [#6583](https://pulp.plan.io/issues/6583), [#6695](https://pulp.plan.io/issues/6695), [#6803](https://pulp.plan.io/issues/6803), [#6804](https://pulp.plan.io/issues/6804)

### Plugin API

#### Features

-   Added new NoArtifactContentUploadSerializer and NoArtifactContentUploadViewSet to enable plugin
    writers to upload content without storing an Artifact
    [#6281](https://pulp.plan.io/issues/6281)
-   Added view_name_pattern to DetailRelatedField and DetailIdentityField to properly identify wrong resource types.
    [#6521](https://pulp.plan.io/issues/6521)
-   Added support for Distributions to provide non-Artifact content via a content_handler.
    [#6570](https://pulp.plan.io/issues/6570)
-   Added constants to the plugin API at `pulpcore.plugin.constants`.
    [#6579](https://pulp.plan.io/issues/6579)
-   TaskGroups now have an 'all_tasks_dispatched' field that can be used to notify systems that no
    further tasks will be dispatched for a TaskGroup. Plugin writers should call ".finish()" on all
    TaskGroups created once they are done using them to set this field.
    [#6591](https://pulp.plan.io/issues/6591)

#### Bugfixes

-   Added `RemoteFilter` to the plugin API as it was missing but used by plugin_template.
    [#6563](https://pulp.plan.io/issues/6563)

#### Deprecations and Removals

-   Fields: username and password will be returned to the rest API user requesting a Remote
    [#6346](https://pulp.plan.io/issues/6346)
-   Rehomed QueryModelResource to pulpcore.plugin.importexport.
    [#6514](https://pulp.plan.io/issues/6514)
-   The pulpcore.content.handler.Handler.list_directory function now returns a set of strings where it returned a string of HTML before.
    [#6570](https://pulp.plan.io/issues/6570)

---

## 3.3.1 (2020-05-07) {: #3.3.1 }

### REST API

#### Bugfixes

-   Fixed partial and general update calls for SecretCharField on the Remote.
    [#6565](https://pulp.plan.io/issues/6565)
-   Fixed bug where `TaskGroup` was showing up as null for `created_resources` in tasks.
    [#6573](https://pulp.plan.io/issues/6573)

### Plugin API

#### Features

-   Add TaskGroup to the plugin API.
    [#6603](https://pulp.plan.io/issues/6603)

---

## 3.3.0 (2020-04-15) {: #3.3.0 }

### REST API

#### Features

-   Added support for repairing a RepositoryVersion by redownloading corrupted artifact files.
    Sending a POST request to
    `/pulp/api/v3/repositories/<plugin>/<type>/<repository-uuid>/versions/<version-number>/repair/`
    will trigger a task that scans all associated artfacts and attempts to fetch missing or corrupted ones again.
    [#5613](https://pulp.plan.io/issues/5613)
-   Added support for exporting pulp-repo-versions. POSTing to an exporter using the
    `/pulp/api/v3/exporters/core/pulp/<exporter-uuid>/exports/` API will instantiate a
    PulpExport entity, which will generate an export-tar.gz file at
    `<exporter.path>/export-<export-uuid>-YYYYMMDD_hhMM.tar.gz`
    [#6135](https://pulp.plan.io/issues/6135)
-   Added API for importing Pulp Exports at `POST /importers/core/pulp/<uuid>/imports/`.
    [#6137](https://pulp.plan.io/issues/6137)
-   Added the new setting CHUNKED_UPLOAD_DIR for configuring a default directory used for uploads
    [#6253](https://pulp.plan.io/issues/6253)
-   Exported SigningService in plugin api
    [#6256](https://pulp.plan.io/issues/6256)
-   Added name filter for SigningService
    [#6257](https://pulp.plan.io/issues/6257)
-   Relationships between tasks that spawn other tasks will be shown in the Task API.
    [#6282](https://pulp.plan.io/issues/6282)
-   Added a new APIs for PulpExporters and Exports at `/exporters/core/pulp/` and
    `/exporters/core/pulp/<uuid>/exports/`.
    [#6328](https://pulp.plan.io/issues/6328)
-   Added PulpImporter API at `/pulp/api/v3/importers/core/pulp/`. PulpImporters are used for
    importing exports from Pulp.
    [#6329](https://pulp.plan.io/issues/6329)
-   Added an `ALLOWED_EXPORT_PATHS` setting with list of filesystem locations that exporters can export to.
    [#6335](https://pulp.plan.io/issues/6335)
-   Indroduced ordering keyword, which orders the results by specified field.
    Pulp objects will by default be ordered by pulp_created if that field exists.
    [#6347](https://pulp.plan.io/issues/6347)
-   Task Groups added -- Plugin writers can spawn tasks as part of a "task group",
    which facilitates easier monitoring of related tasks.
    [#6414](https://pulp.plan.io/issues/6414)

#### Bugfixes

-   Improved the overall performance while syncing very large repositories
    [#6121](https://pulp.plan.io/issues/6121)
-   Made chunked uploads to be stored in a local file system instead of a default file storage
    [#6253](https://pulp.plan.io/issues/6253)
-   Fixed 500 error when calling modify on nonexistent repo.
    [#6284](https://pulp.plan.io/issues/6284)
-   Fixed bug where user could delete repository version 0 but not recreate it by preventing users from
    deleting repo version 0.
    [#6308](https://pulp.plan.io/issues/6308)
-   Fixed non unique content units on content list
    [#6347](https://pulp.plan.io/issues/6347)
-   Properly sort endpoints during generation of the OpenAPI schema.
    [#6372](https://pulp.plan.io/issues/6372)
-   Improved resync performance by up to 2x with a change to the content stages.
    [#6373](https://pulp.plan.io/issues/6373)
-   Fixed bug where 'secret' fields would be set to the sha256 checksum of the original value.
    [#6402](https://pulp.plan.io/issues/6402)
-   Fixed pulp containers not allowing commands to be run via absolute path.
    [#6420](https://pulp.plan.io/issues/6420)

#### Improved Documentation

-   Documented bindings installation for a dev environment
    [#6221](https://pulp.plan.io/issues/6221)
-   Added documentation for how to write changelog messages.
    [#6336](https://pulp.plan.io/issues/6336)
-   Cleared up a line in the database settings documentation that was ambiguous.
    [#6384](https://pulp.plan.io/issues/6384)
-   Updated docs to reflect that S3/Azure are supported and no longer tech preview.
    [#6443](https://pulp.plan.io/issues/6443)
-   Added tech preview note to docs for importers/exporters.
    [#6454](https://pulp.plan.io/issues/6454)
-   Renamed ansible-pulp to pulp_installer (to avoid confusion with pulp-ansible)
    [#6461](https://pulp.plan.io/issues/6461)
-   Fixed missing terms in documentation.
    [#6485](https://pulp.plan.io/issues/6485)

#### Deprecations and Removals

-   Changing STATIC_URL from /static/ to /assets/ for avoiding conflicts
    [#6128](https://pulp.plan.io/issues/6128)
-   Exporting now requires the configuration of the `ALLOWED_EXPORT_PATHS` setting. Without this
    configuration, Pulp will not export content to the filesystem.
    [#6335](https://pulp.plan.io/issues/6335)

#### Misc

-   [#5826](https://pulp.plan.io/issues/5826), [#6155](https://pulp.plan.io/issues/6155), [#6357](https://pulp.plan.io/issues/6357), [#6450](https://pulp.plan.io/issues/6450), [#6451](https://pulp.plan.io/issues/6451), [#6481](https://pulp.plan.io/issues/6481), [#6482](https://pulp.plan.io/issues/6482)

### Plugin API

#### Features

-   Tasks can now be spawned from inside other tasks, and these relationships can be explored
    via the "parent_task" field and "child_tasks" related name on the Task model.
    [#6282](https://pulp.plan.io/issues/6282)
-   Added a new Export model, serializer, and viewset.
    [#6328](https://pulp.plan.io/issues/6328)
-   Added models Import and Importer (as well as serializers and viewsets) that can be used for
    importing data into Pulp.
    [#6329](https://pulp.plan.io/issues/6329)
-   NamedModelViewSet uses a default ordering of -pulp_created using the StableOrderingFilter.
    Users using the ordering keyword will be the primary ordering used when specified.
    [#6347](https://pulp.plan.io/issues/6347)
-   Added two new repo validation methods (validate_repo_version and validate_duplicate_content).
    [#6362](https://pulp.plan.io/issues/6362)
-   enqueue_with_reservation() provides a new optional argument for "task_group".
    [#6414](https://pulp.plan.io/issues/6414)

#### Bugfixes

-   Fixed bug where RepositoryVersion.artifacts returns None.
    [#6439](https://pulp.plan.io/issues/6439)

#### Improved Documentation

-   Add plugin writer docs on adding MANIFEST.in entry to include `webserver_snippets` in the Python
    package.
    [#6249](https://pulp.plan.io/issues/6249)
-   Updated the metadata signing plugin writers documentation.
    [#6342](https://pulp.plan.io/issues/6342)

#### Deprecations and Removals

-   Changed master model from FileSystemExporter to Exporter. Plugins will still need to extend
    FileSystemExporter but the master table is now core_exporter. This will require that plugins drop
    and recreate their filesystem exporter tables.
    [#6328](https://pulp.plan.io/issues/6328)
-   RepositoryVersion add_content no longer checks for duplicate content.
    [#6362](https://pulp.plan.io/issues/6362)

#### Misc

-   [#6342](https://pulp.plan.io/issues/6342)

---

## 3.2.1 (2020-03-17) {: #3.2.1 }

### REST API

#### Misc

-   [#6244](https://pulp.plan.io/issues/6244)

### Plugin API

No significant changes.

---

## 3.2.0 (2020-02-26) {: #3.2.0 }

### REST API

#### Features

-   Added a `pulpcore-manager` script that is `django-admin` only configured with
    `DJANGO_SETTINGS_MODULE="pulpcore.app.settings"`. This can be used for things like applying
    database migrations or collecting static media.
    [#5859](https://pulp.plan.io/issues/5859)
-   Resolve DNS faster with aiodns
    [#6190](https://pulp.plan.io/issues/6190)

#### Bugfixes

-   Considering base version when removing duplicates
    [#5964](https://pulp.plan.io/issues/5964)
-   Renames /var/lib/pulp/static/ to /var/lib/pulp/assets/.
    [#5995](https://pulp.plan.io/issues/5995)
-   Disabled the trimming of leading and trailing whitespace characters which led to a situation where
    a hash of a certificate computed in Pulp was not equal to a hash generated locally
    [#6025](https://pulp.plan.io/issues/6025)
-   Repository.latest_version() considering deleted versions
    [#6147](https://pulp.plan.io/issues/6147)
-   Stopped HttpDownloader sending basic auth credentials to redirect location if domains don't match.
    [#6227](https://pulp.plan.io/issues/6227)

#### Improved Documentation

-   Updated docs to suggest to use `pulpcore-manager` command instead of `django-admin` directly.
    [#5859](https://pulp.plan.io/issues/5859)

#### Deprecations and Removals

-   Renaming Repository.last_version to Repository.next_version
    [#6147](https://pulp.plan.io/issues/6147)

#### Misc

-   [#6038](https://pulp.plan.io/issues/6038), [#6202](https://pulp.plan.io/issues/6202)

### Plugin API

#### Features

-   Adding not equal lookup to model field filters.
    [#5868](https://pulp.plan.io/issues/5868)

#### Improved Documentation

-   Adds plugin writer docs on adding custom url routes and having the installer configure the reverse
    proxy to route them.
    [#6209](https://pulp.plan.io/issues/6209)

---

## 3.1.1 (2020-02-17) {: #3.1.1 }

### REST API

#### Bugfixes

-   Content with duplicate repo_key_fields raises an error
    [#5567](https://pulp.plan.io/issues/5567)
-   Resolve content app errors `django.db.utils.InterfaceError: connection already closed`.
    [#6045](https://pulp.plan.io/issues/6045)
-   Fix a bug that could cause an inability to detect an invalid signing script during the validation
    [#6077](https://pulp.plan.io/issues/6077)
-   Fixing broken S3 redirect
    [#6154](https://pulp.plan.io/issues/6154)
-   Pin idna==2.8 to avoid a version conflict caused by the idna 2.9 release.
    #6169 <<https://pulp.plan.io/issues/6169>>`__

### Plugin API

#### Features

-   A new method `_reset_db_connection` has been added to `content.Handler`. It can be called before
    accessing the db to ensure that the db connection is alive.
    [#6045](https://pulp.plan.io/issues/6045)

---

## 3.1.0 (2020-01-30) {: #3.1.0 }

### REST API

#### Features

-   Allow administrators to add a signing service
    [#5943](https://pulp.plan.io/issues/5943)
-   Adds `pulpcore.app.authentication.PulpDoNotCreateUsersRemoteUserBackend` which can be used to
    verify authentication in the webserver, but will not automatically create users like
    `django.contrib.auth.backends.RemoteUserBackend` does.
    [#5949](https://pulp.plan.io/issues/5949)
-   Allow Azure blob storage to be used as DEFAULT_FILE_STORAGE for Pulp
    [#5954](https://pulp.plan.io/issues/5954)
-   Allow to filter publications by `repository_version` and `pulp_created`
    [#5968](https://pulp.plan.io/issues/5968)
-   Adds the `ALLOWED_IMPORT_PATHS` setting which can specify the file path prefix that `file:///`
    remote paths can import from.
    [#5974](https://pulp.plan.io/issues/5974)
-   Allow the same artifact to be published at multiple relative paths in the same publication.
    [#6037](https://pulp.plan.io/issues/6037)

#### Bugfixes

-   Files stored on S3 and Azure now download with the correct filename.
    [#4733](https://pulp.plan.io/issues/4733)
-   Adds operation_summary to the OpenAPI schema definition of repository modify operation
    [#6002](https://pulp.plan.io/issues/6002)
-   Temporarily pinned redis-py version to avoid a task locking issue.
    [#6038](https://pulp.plan.io/issues/6038)

#### Improved Documentation

-   Rewrote the Authentication page for more clarity on how to configure Pulp's authentication.
    [#5949](https://pulp.plan.io/issues/5949)

#### Deprecations and Removals

-   Removed the `django.contrib.auth.backends.RemoteUserBackend` as a default configured backend in
    `settings.AUTHENTICATION_BACKENDS`. Also removed
    `pulpcore.app.authentication.PulpRemoteUserAuthentication` from the DRF configuration of
    `DEFAULT_AUTHENTICATION_CLASSES`.
    [#5949](https://pulp.plan.io/issues/5949)
-   Importing from <file:///> now requires the configuration of the `ALLOWED_IMPORT_PATHS` setting.
    Without this configuration, Pulp will not import content from `file:///` locations correctly.
    [#5974](https://pulp.plan.io/issues/5974)

#### Misc

-   [#5795](https://pulp.plan.io/issues/5795)

### Plugin API

#### Features

-   Allow awaiting for resolution on DeclarativeContent.
    [#5668](https://pulp.plan.io/issues/5668)
-   Add a previous() method to RepositoryVersion.
    [#5734](https://pulp.plan.io/issues/5734)
-   Enable plugin writers to sign selected content with signing scripts provided by administrators
    [#5946](https://pulp.plan.io/issues/5946)
-   Add a batching content iterator `content_batch_qs()` to `RepositoryVersion`.
    [#6024](https://pulp.plan.io/issues/6024)

#### Deprecations and Removals

-   The `` `Handler._handle_file_response` has been removed. It was renamed to ``_serve_content_artifact`` and has the following signature:

        def _serve_content_artifact(self, content_artifact, headers):

    [#4733](https://pulp.plan.io/issues/4733)

-   Remove get_or_create_future and does_batch from DeclarativeContent. Replaced by awaiting for
    resolution on the DeclarativeContent itself.
    [#5668](https://pulp.plan.io/issues/5668)

---

## 3.0.1 (2020-01-15) {: #3.0.1 }

### REST API

#### Bugfixes

-   Fix bug where content shows as being added and removed in the same version.
    [#5707](https://pulp.plan.io/issues/5707)
-   Fix bug where calling Repository new_version() outside of task raises exception.
    [#5894](https://pulp.plan.io/issues/5894)
-   Adjusts setup.py classifier to show 3.0 as Production/Stable.
    [#5896](https://pulp.plan.io/issues/5896)
-   Importing from <file:///> paths no longer destroys the source repository.
    [#5941](https://pulp.plan.io/issues/5941)
-   Webserver auth no longer prompts for csrf incorrectly.
    [#5955](https://pulp.plan.io/issues/5955)

#### Deprecations and Removals

-   Removed `pulpcore.app.middleware.PulpRemoteUserMiddleware` from the default middleware section.
    Also replaced `rest_framework.authentication.RemoteUserAuthentication` with
    `pulpcore.app.authentication.PulpRemoteUserAuthentication` in the Django Rest Framework portion
    of the config.
    [#5955](https://pulp.plan.io/issues/5955)

#### Misc

-   [#5833](https://pulp.plan.io/issues/5833), [#5867](https://pulp.plan.io/issues/5867), [#5870](https://pulp.plan.io/issues/5870), [#5873](https://pulp.plan.io/issues/5873)

### Plugin API

#### Features

-   Added an optional parameter base_version to RepositoryVersion add() and removed() methods.
    [#5706](https://pulp.plan.io/issues/5706)

#### Deprecations and Removals

-   Saving an Artifact from a source that is outside of settings.MEDIA_ROOT will copy the file instead
    of moving the file as it did in previous versions. This causes data imported from <file:///> sources
    to be left in tact.
    [#5941](https://pulp.plan.io/issues/5941)

---

## 3.0.0 (2019-12-11) {: #3.0.0 }

!!! note
    Task names, e.g. `pulpcore.app.tasks.orphan.orphan_cleanup`, are subject to change in future
    releases 3.y releases. These are represented in the Task API as the "name" attribute. Please
    check future release notes to see when these names will be considered stable. Otherwise, the
    REST API pulpcore provides is considered semantically versioned.

### REST API

#### Features

-   Pulp will do validation that a new repository version contains only content which is supported by
    the Repository type. Using the same a-priori knowledge of content types, increase performance of
    duplicate removal.
    [#5701](https://pulp.plan.io/issues/5701)

#### Bugfixes

-   Improve speed and memory performance.
    [#5688](https://pulp.plan.io/issues/5688)

#### Improved Documentation

-   Fix an incorrect license claim in the docs. Pulp is GPLv2+.
    [#4592](https://pulp.plan.io/issues/4592)
-   Labeling 3.0 features as tech preview.
    [#5563](https://pulp.plan.io/issues/5563)
-   Simplified docs index page.
    [#5714](https://pulp.plan.io/issues/5714)
-   Add text to Promotion page.
    [#5721](https://pulp.plan.io/issues/5721)
-   Fixes and updates to the glossry page.
    [#5726](https://pulp.plan.io/issues/5726)

### Plugin API

#### Features

-   Added a new required field called CONTENT_TYPES to the Repository model.
    [#5701](https://pulp.plan.io/issues/5701)
`````

## File: pulp-docs/pulpcore/CODE_OF_CONDUCT.md
`````markdown
## Code of Conduct

Please be sure you have read our Code of Conduct here:
https://pulpproject.org/help/more/governance/code-of-conduct/

Thank you for keeping our community a welcoming one!
`````

## File: pulp-docs/pulpcore/CONTRIBUTING.md
`````markdown
## Contributing

We have provided detailed documentation for ways in which you can
contribute to Pulp here:
https://pulpproject.org/dev/

This documentation includes:

* Suggestions of how to contribute
* How we track bugs
* Ways to get in touch with other contributors who can advise you
* A contribution checklist
* A developer guide

Join us!  We look forward to hearing from you.
`````

## File: pulp-docs/pulpcore/README.md
`````markdown
**Acquire, Organize, and Distribute Software**

Pulp is a platform for managing repositories of content, such as software
packages, and pushing that content out to large numbers of consumers.

Using Pulp you can:
- Locally mirror all or part of a repository
- Host your own content in a new repository
- Manage content from multiple sources in one place
- Promote content through different repos in an organized way

Pulp is completely free and open-source!
- License: GPLv2+
- Documentation: https://pulpproject.org/
- Source: https://github.com/pulp/pulpcore/
- Bugs: https://github.com/pulp/pulpcore/issues

For more information, check out the project website: https://pulpproject.org

Get Help
--------

Check out our help page for ways to get help:

https://pulpproject.org/help/
`````

## File: pulp-docs/pulpcore/releasing.md
`````markdown
[//]: # "WARNING: DO NOT EDIT!"
[//]: # ""
[//]: # "This file was generated by plugin_template, and is managed by it. Please use"
[//]: # "'./plugin-template --github pulpcore' to update this file."
[//]: # ""
[//]: # "For more info visit https://github.com/pulp/plugin_template"
# Releasing (For Internal Use)

This document outlines the steps to perform a release.

### Determine if a Release is Required
- Make sure to have GitPython python package installed
- Run the release checker script:
  ```
  python3 .ci/scripts/check_release.py
  ```

### Release a New Y-version (e.g., 3.23.0)
- If a new minor version (Y) is needed, trigger a [Create New Release Branch](https://github.com/pulp/pulpcore/actions/workflows/create-branch.yml) job from the main branch via the GitHub Actions.
- Look for the "Bump minor version" pull request and merge it.
- Trigger a [Release Pipeline](https://github.com/pulp/pulpcore/actions/workflows/release.yml) job by specifying the new release branch (X.**Y**) via the GitHub Actions.

### Release a New Z-version (Patch Release) (e.g., 3.23.1, 3.22.12)
- Trigger a [Release Pipeline](https://github.com/pulp/pulpcore/actions/workflows/release.yml) job by specifying the release branch (X.Y) via the GitHub Actions.

## Final Steps
- Ensure the new version appears on PyPI (it should appear after [Publish Release](https://github.com/pulp/pulpcore/actions/workflows/publish.yml) workflow succeeds).
- Verify that the changelog has been updated by looking for the "Update Changelog" pull request (A new PR should be available on the next day).
- [optional] Post a brief announcement about the new release on the [Pulp Discourse](https://discourse.pulpproject.org/).
`````

## File: pulp-docs/pulpcore-selinux/docs/admin/guides/extend-support.md
`````markdown
# Extend webserver support

## Adding support for remote repos running on custom ports

**Optional** By default, pulp is allowed to connect to web servers running on several standard or semi-standard ports: `80, 81, 443, 488, 8008, 8009, 8443, 9000`.

If any of the remote repos you are trying to connect to are hosted on non-standard
HTTP/HTTPS ports, you can configure Pulp to be able to talk to them like in the following example
for port `10011`.

`sudo semanage port -a -t http_port_t -p tcp 10011`

## Adding support for proxy servers running on custom ports

**Optional** By default, pulp is allowed to connect to web proxy servers on several standard or semi-standard ports: `3128, 3401, 4827, 8080, 8118, 8123, 10001-10010`.

If Pulp is configured to use a proxy server (in order to talk to remote repos), but the proxy
server is on a non-standard port, you can configure Pulp to be able to talk to them like in the
following example for port `10012`.

`sudo semanage port -a -t http_cache_port_t -p tcp 10012`

!!! note

    If you get the following error:

    `ValueError: Port tcp/10012 already defined`

    That means that the port number is already labelled for some other purpose by SELinux. No change was
    made to your system. Run this command instead (substitute `http_port_t` for remote repos):

    `sudo semanage port -m -t http_cache_port_t -p tcp 10012`

!!! note

    Technically Pulp can talk to any remote repo or proxy server running on any SELinux-recognized
    ports for web servers or for proxy servers. (They are effectively one cumulative list.)

!!! note

    To see the complete list of these ports currently recognized on your system, run:
    `sudo semanage port -l | grep -E "^http_port_t|^http_cache_port_t|^squid_port_t" | grep tcp`
`````

## File: pulp-docs/pulpcore-selinux/docs/admin/index.md
`````markdown
# Overview

The SELinux policy for Pulp 3.Y releases.

## Quickstart

### Building

```
sudo yum install -y selinux-policy-devel policycoreutils
git clone https://github.com/pulp/pulpcore-selinux
cd pulpcore-selinux

make -f /usr/share/selinux/devel/Makefile pulpcore_port.pp
make -f /usr/share/selinux/devel/Makefile pulpcore.pp
make -f /usr/share/selinux/devel/Makefile pulpcore_rhsmcertd.pp
```

### Installing

```
sudo semodule -i pulpcore_port.pp
sudo semodule -i pulpcore.pp
sudo semodule -i pulpcore_rhsmcertd.pp
```

### Labeling pulpcore_port

**Required**: You must label ports used by Pulp with `pulpcore_port_t` so that the proper type is assigned to the ports and Pulp is allowed to communicate on with the network correctly.

Apply the `pulpcore_port_t` SELinux type to ports 24816 and 24817 with:

`sudo semanage port -a -t pulpcore_port_t -p tcp 24816-24817`


### Uninstalling

Uninstall in the following order:

```
sudo semanage port -d -t pulpcore_port_t -p tcp 24816-24817
sudo semodule -r pulpcore_rhsmcertd
sudo semodule -r pulpcore
sudo semodule -r pulpcore_port
```
`````

## File: pulp-docs/pulpcore-selinux/docs/dev/guides/release.md
`````markdown
# Release Guide

1. Bump the version number (`sed -i -e 's/1.2.1/1.2.2/g' *.te`).
1. Create a PR with all the changes above and merge it after a review.
1. Create a release on github. It will create the corresponding tag.
1. In that release, copy and paste the git commit titles since the last release
(`git shortlog 1.2.1...master --no-merges | grep -E "^(\s)+\w" | sed -e 's/     /*/'`)
1. Create a corresponding PR ([example](https://github.com/pulp/pulp_installer/pull/524)) for pulp_installer to use the new pulpcore-selinux tag.
(Bump `__pulp_selinux_version` in `roles/pulp_common/defaults/main.yml`)
`````

## File: pulp-docs/pulpcore-selinux/README.md
`````markdown
# pulpcore-selinux

The SELinux policy for Pulp 3.Y releases.

## Building

```
sudo yum install -y selinux-policy-devel policycoreutils
git clone https://github.com/pulp/pulpcore-selinux
cd pulpcore-selinux

make -f /usr/share/selinux/devel/Makefile pulpcore_port.pp
make -f /usr/share/selinux/devel/Makefile pulpcore.pp
make -f /usr/share/selinux/devel/Makefile pulpcore_rhsmcertd.pp
```

## Installing

```
sudo semodule -i pulpcore_port.pp
sudo semodule -i pulpcore.pp
sudo semodule -i pulpcore_rhsmcertd.pp
```

## Labeling pulpcore\_port

**Required**: You must label ports used by Pulp with `pulpcore_port_t` so that the proper type is assigned to the ports and Pulp is allowed to communicate on with the network correctly.

Apply the `pulpcore_port_t` SELinux type to ports 24816 and 24817 with:

`sudo semanage port -a -t pulpcore_port_t -p tcp 24816-24817`


## Uninstalling

Uninstall in the following order:

```
sudo semanage port -d -t pulpcore_port_t -p tcp 24816-24817
sudo semodule -r pulpcore_rhsmcertd
sudo semodule -r pulpcore
sudo semodule -r pulpcore_port
```

# Additional configuration

## Adding support for remote repos running on custom ports

**Optional** By default, pulp is allowed to connect to web servers running on several standard or semi-standard ports: `80, 81, 443, 488, 8008, 8009, 8443, 9000`.

If any of the remote repos you are trying to connect to are hosted on non-standard
HTTP/HTTPS ports, you can configure Pulp to be able to talk to them like in the following example
for port `10011`.

`sudo semanage port -a -t http_port_t -p tcp 10011`

## Adding support for proxy servers running on custom ports

**Optional** By default, pulp is allowed to connect to web proxy servers on several standard or semi-standard ports: `3128, 3401, 4827, 8080, 8118, 8123, 10001-10010`.

If Pulp is configured to use a proxy server (in order to talk to remote repos), but the proxy
server is on a non-standard port, you can configure Pulp to be able to talk to them like in the
following example for port `10012`.

`sudo semanage port -a -t http_cache_port_t -p tcp 10012`

**NOTE**: If you get the following error:

`ValueError: Port tcp/10012 already defined`

That means that the port number is already labelled for some other purpose by SELinux. No change was
made to your system. Run this command instead (substitute `http_port_t` for remote repos):

`sudo semanage port -m -t http_cache_port_t -p tcp 10012`

**NOTE**: Technically Pulp can talk to any remote repo or proxy server running on any SELinux-recognized
ports for web servers or for proxy servers. (They are effectively one cumulative list.)

**NOTE**: To see the complete list of these ports currently recognized on your system, run:
`sudo semanage port -l | grep -E "^http_port_t|^http_cache_port_t|^squid_port_t" | grep tcp`

# Development

## Release Process

See the [Release Guide](RELEASING.md)
`````

## File: pulp-docs/pulpcore-selinux/RELEASING.md
`````markdown
Release Guide
=============

1. Bump the version number (`sed -i -e 's/1.2.1/1.2.2/g' *.te`).
1. Create a PR with all the changes above and merge it after a review.
1. Create a release on github. It will create the corresponding tag.
1. In that release, Select "Auto-generate release notes"
1. Create a corresponding PR ([example](https://github.com/pulp/pulp_installer/pull/524)) for pulp_installer to use the new pulpcore-selinux tag.
(Bump `__pulp_selinux_version` in `roles/pulp_common/defaults/main.yml`)
`````
